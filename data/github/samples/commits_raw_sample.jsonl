{"sha": "c1f0a89d9caeb62a0a5f3462b454746941e626e6", "message": "Merge bitcoin/bitcoin#34040: test: Detect truncated download in get_previous_releases.py\n\nfa75480c84ffecc856c2d76b1143b14ebce85d0b test: Detect truncated download in get_previous_releases.py (MarcoFalke)\n\nPull request description:\n\n  Without this, and end-of-stream is not detected and will just lead to an immediate exit, instead of a re-try.\n\n  E.g. https://github.com/bitcoin/bitcoin/actions/runs/20089133013/job/57633839315?pr=34038#step:12:201:\n\n  ```\n  ...\n  Downloading: [##--------------------------------------] 5.4%\n  Downloading: [##--------------------------------------] 5.4%\n  Downloading: [##--------------------------------------] 5.5%\n  Downloading: [##--------------------------------------] 5.6%\n  Checksum dd02eab18f9154604e38135ef3f98fd310ba3c748074aeb83a71118cd2cd1367 did not match\n  Error: Process completed with exit code 1.\n  ```\n\n  Also, remove the `0` fallback value, because if the fallback was ever hit, the program would fail anyway with `division by zero` error.\n\nACKs for top commit:\n  Sjors:\n    utACK fa75480c84ffecc856c2d76b1143b14ebce85d0b\n  rkrux:\n    Looks fine, ACK fa75480c84ffecc856c2d76b1143b14ebce85d0b\n  l0rinc:\n    code review ACK fa75480c84ffecc856c2d76b1143b14ebce85d0b\n\nTree-SHA512: 230eaf155701ed833636b401118f11ff5c6521c61bf4f3a01fcf390a71a508ba6a570eea855ef659134e118b74f75e3d5772ec8a261db23ebfe4ac7ec87cab5a", "author": {"name": "merge-script", "email": "fanquake@gmail.com", "login": "fanquake", "date": "2025-12-10T16:40:54+00:00"}, "committer": {"name": "merge-script", "email": "fanquake@gmail.com", "login": "fanquake", "date": "2025-12-10T16:40:54+00:00"}, "url": "https://github.com/bitcoin/bitcoin/commit/c1f0a89d9caeb62a0a5f3462b454746941e626e6", "is_merge": true, "parents": ["56ce78d5f62c9eb9353d33eedd15495c1205465f", "fa75480c84ffecc856c2d76b1143b14ebce85d0b"], "stats": {"additions": 0, "deletions": 0, "total": 0}, "files_changed": 0, "merged_pr_number": 34040}
{"sha": "fa75480c84ffecc856c2d76b1143b14ebce85d0b", "message": "test: Detect truncated download in get_previous_releases.py", "author": {"name": "MarcoFalke", "email": "*~=`'#}+{/-|&$^_@721217.xyz", "login": null, "date": "2025-12-10T09:57:46+00:00"}, "committer": {"name": "MarcoFalke", "email": "*~=`'#}+{/-|&$^_@721217.xyz", "login": null, "date": "2025-12-10T12:35:22+00:00"}, "url": "https://github.com/bitcoin/bitcoin/commit/fa75480c84ffecc856c2d76b1143b14ebce85d0b", "is_merge": false, "parents": ["cca113f5b022b131a78579ab233d0d40643c7c2b"], "stats": {"additions": 0, "deletions": 0, "total": 0}, "files_changed": 0}
{"sha": "56ce78d5f62c9eb9353d33eedd15495c1205465f", "message": "Merge bitcoin/bitcoin#34031: net: Remove \"tor\" as a network specification\n\ne7ac5a133cc354b1e60cb9c3660da03e79c50173 doc: add release note for 34031 (fanquake)\nc4c70a256ed82c0e25d9bf32eda218f31e1523c8 netbase: Remove \"tor\" as a network specification (Carl Dong)\n\nPull request description:\n\n  \"tor\" as a network specification was deprecated in 60dc8e4208 in favor of \"onion\"\n  and this commit removes it and updates the relevant test.\n\n  Previously #16029. This has been warning as being deprecated since `v0.17.0`.\n\n  This PR only removes the already deprecated usage of tor as a network specification, the use of tor throughout the codebase, is not deprecated.\n\nACKs for top commit:\n  davidgumberg:\n    crACK https://github.com/bitcoin/bitcoin/commit/e7ac5a133cc354b1e60cb9c3660da03e79c50173\n  laanwj:\n    Code review ACK e7ac5a133cc354b1e60cb9c3660da03e79c50173\n  janb84:\n    ACK e7ac5a133cc354b1e60cb9c3660da03e79c50173\n  stickies-v:\n    ACK e7ac5a133cc354b1e60cb9c3660da03e79c50173\n\nTree-SHA512: f211dec151c21728b4cd2b1716ee68907871beaa85d8c89e2bc17576e701d03c03e5455593de94970d787aa3264fab60d8c6debeeff908e00d8feb48804692e9", "author": {"name": "merge-script", "email": "fanquake@gmail.com", "login": "fanquake", "date": "2025-12-10T11:51:01+00:00"}, "committer": {"name": "merge-script", "email": "fanquake@gmail.com", "login": "fanquake", "date": "2025-12-10T11:51:01+00:00"}, "url": "https://github.com/bitcoin/bitcoin/commit/56ce78d5f62c9eb9353d33eedd15495c1205465f", "is_merge": true, "parents": ["500862b2d4a1a6d7f1a5c637a2d1a4f1440325cf", "e7ac5a133cc354b1e60cb9c3660da03e79c50173"], "stats": {"additions": 0, "deletions": 0, "total": 0}, "files_changed": 0, "merged_pr_number": 34031}
{"sha": "500862b2d4a1a6d7f1a5c637a2d1a4f1440325cf", "message": "Merge bitcoin/bitcoin#33423: qa: Improvements to debug_assert_log + busy_wait_for_debug_log\n\na1f76230209629c5141984aaac1cc4ba7b4f761a qa: Only complain about expected messages that were not found (Hodlinator)\n1e54125e2e0063e4586265b957912896c056ba0a refactor(qa): Avoid unnecessary string operations (Hodlinator)\na9021101dc63ee7fb1e1f342387ab7d3f0e3cefc qa: Replace always-escaped regexps with \"X in Y\" (Hodlinator)\n5c16e4631c009056d571d83fe17062c107f71798 doc: Remove no longer correct comment (Hodlinator)\n\nPull request description:\n\n  * Remove incorrect docstring in `busy_wait_for_debug_log()`.\n  * Replace nerfed regex searches with `X in Y` expressions.\n  * Only compute the log string to be printed on failure *when we actually fail* instead of every 0.05s.\n  * As we find each needle (expected message) in the haystack (log output), stop searching for it. **If we fail and time out, we will only complain about the needles (expected messages) we didn't find. On master we also include found needles, which is less helpful.**\n\n  Found while developing a new test case in https://github.com/bitcoin/bitcoin/pull/33336#discussion_r2351892330\n\nACKs for top commit:\n  l0rinc:\n    Code review ACK a1f76230209629c5141984aaac1cc4ba7b4f761a\n  maflcko:\n    review ACK a1f76230209629c5141984aaac1cc4ba7b4f761a \ud83d\udca8\n\nTree-SHA512: 191ea7647b0ea8b4220e37c62d176861c2fd0e3737aee3641b262915d9118f48953cf1204767c93a93a8fc78a44c2c29206fb390b44c59d99fc2aa7d12bf4889", "author": {"name": "merge-script", "email": "fanquake@gmail.com", "login": "fanquake", "date": "2025-12-10T11:40:59+00:00"}, "committer": {"name": "merge-script", "email": "fanquake@gmail.com", "login": "fanquake", "date": "2025-12-10T11:40:59+00:00"}, "url": "https://github.com/bitcoin/bitcoin/commit/500862b2d4a1a6d7f1a5c637a2d1a4f1440325cf", "is_merge": true, "parents": ["cca113f5b022b131a78579ab233d0d40643c7c2b", "a1f76230209629c5141984aaac1cc4ba7b4f761a"], "stats": {"additions": 0, "deletions": 0, "total": 0}, "files_changed": 0, "merged_pr_number": 33423}
{"sha": "cca113f5b022b131a78579ab233d0d40643c7c2b", "message": "Merge bitcoin/bitcoin#34008: log: don't rate-limit \"new peer\" with -debug=net\n\nd4d184eda9c0f73bc31ece07d5001d887b5c6914 log: don't rate-limit \"new peer\" with -debug=net (0xb10c)\n\nPull request description:\n\n  Previously, when `debug=net` is enabled, we log \"New [..] peer connected\" for new inbound peers with `LogInfo`. However, `LogInfo` will get rate-limited since https://github.com/bitcoin/bitcoin/pull/32604. When we specifically turn on `debug=net`, we don't want these log messages to be rate-limited.\n\n  To fix this, use `LogDebug(BCLog::NET, ...)` for potentially high-rate inbound connections. Otherwise use `LogInfo`. This means we don't rate-limit the messages for inbound peers when `debug=net` is turned on but will rate-limit if we created outbound at a high rate as these are logged via `LogInfo`.\n\n  The new log messages look similar to:\n  ```\n  2025-12-08T00:00:00Z [net] New inbound peer connected: transport=v2 version=70016 blocks=0 peer=1\n  2025-12-08T00:00:00Z New outbound-full-relay peer connected: transport=v2 version=70016 blocks=281738 peer=5\n  ```\n\n  --\n\n  I ran into this message getting rate-limited on one of my monitoring nodes with `-logsourcelocations=1`: With logsourcelocations, one of these lines is about 338 chars (or 338 bytes) long. We rate-limit after more than 1048576 bytes per hour, which results in about 3100 in- and outbound connections per hour. With evicted and instantly reconnecting connections from an entity like LinkingLion, this can be reached fairly quickly.\n\nACKs for top commit:\n  stickies-v:\n    utACK d4d184eda9c0f73bc31ece07d5001d887b5c6914\n  Crypt-iQ:\n    tACK d4d184eda9c0f73bc31ece07d5001d887b5c6914\n  maflcko:\n    review ACK d4d184eda9c0f73bc31ece07d5001d887b5c6914 \ud83d\udeb2\n  rkrux:\n    lgtm code review ACK d4d184eda9c0f73bc31ece07d5001d887b5c6914\n  glozow:\n    lgtm ACK d4d184eda9c0f73bc31ece07d5001d887b5c6914\n\nTree-SHA512: 14dbf693fa44a74c9822590e7a08167d2deeb1bc6f4b8aeb00c1b035c0df7101087d5c80a3c0d637879d5c52f88b30f0cb4c0577cff6f647d2eb3300f49d8ea3", "author": {"name": "merge-script", "email": "gloriajzhao@gmail.com", "login": "glozow", "date": "2025-12-09T19:16:12+00:00"}, "committer": {"name": "merge-script", "email": "gloriajzhao@gmail.com", "login": "glozow", "date": "2025-12-09T19:16:12+00:00"}, "url": "https://github.com/bitcoin/bitcoin/commit/cca113f5b022b131a78579ab233d0d40643c7c2b", "is_merge": true, "parents": ["2c44c41984e0a170cf38d595635a9e861854573c", "d4d184eda9c0f73bc31ece07d5001d887b5c6914"], "stats": {"additions": 0, "deletions": 0, "total": 0}, "files_changed": 0, "merged_pr_number": 34008}
{"sha": "2c44c41984e0a170cf38d595635a9e861854573c", "message": "Merge bitcoin/bitcoin#33553: validation: Improve warnings in case of chain corruption\n\n4b4711369880369729893ba7baef11ba2a36cf4b validation: Reword CheckForkWarningConditions and call it also during IBD and at startup (Martin Zumsande)\n2f51951d03cc1f8917e0fc931dce674f9bfedaf5 p2p: Add warning message when receiving headers for blocks cached as invalid (Martin Zumsande)\n\nPull request description:\n\n  In case of corruption that leads to a block being marked as invalid that is seen as valid by the rest of the network, the user currently doesn't receive good error messages, but will often be stuck in an endless headers-sync loop with no explanation (#26391).\n\n  This PR improves warnings in two ways:\n  - When we receive a header that is already saved in our disk, but invalid, add a warning. This will happen repeatedly during the headerssync loop (see https://github.com/bitcoin/bitcoin/issues/26391#issuecomment-1291765534 on how to trigger it artificially).\n  - Removes the IBD check from `CheckForkWarningConditions` and adds a call to the function during init (`LoadChainTip()`). The existing check was added in https://github.com/bitcoin/bitcoin/commit/55ed3f14751206fc87f0cbf8cb4e223efacef338 a long time ago when we had more sophisticated fork detection that could lead to false positives during IBD, but that  logic was removed in https://github.com/bitcoin/bitcoin/commit/fa62304c9760f0de9838e56150008816e7a9bacb so that I don't see a reason to suppress the warning anymore.\n\n  Fixes #26391 (We'll still do the endless looping, trying to find a peer with a headers that we can use, but will now repeatedly log warnings while doing so).\n\nACKs for top commit:\n  glozow:\n    ACK `git range-diff 6d2c8ea9dbd77c71051935b5ab59224487509559...4b4711369880369729893ba7baef11ba2a36cf4b`\n  theStack:\n    re-ACK 4b4711369880369729893ba7baef11ba2a36cf4b\n  sedited:\n    ACK 4b4711369880369729893ba7baef11ba2a36cf4b\n\nTree-SHA512: 78bc53606374636d616ee10fdce0324adcc9bcee2806a7e13c9471e4c02ef00925ce6daef303bc153b7fcf5a8528fb4263c875b71d2e965f7c4332304bc4d922", "author": {"name": "merge-script", "email": "gloriajzhao@gmail.com", "login": "glozow", "date": "2025-12-09T16:25:17+00:00"}, "committer": {"name": "merge-script", "email": "gloriajzhao@gmail.com", "login": "glozow", "date": "2025-12-09T16:25:17+00:00"}, "url": "https://github.com/bitcoin/bitcoin/commit/2c44c41984e0a170cf38d595635a9e861854573c", "is_merge": true, "parents": ["d23d49ee3f2399b3727d3cef3bd490b6977102cb", "4b4711369880369729893ba7baef11ba2a36cf4b"], "stats": {"additions": 0, "deletions": 0, "total": 0}, "files_changed": 0, "merged_pr_number": 33553}
{"sha": "d23d49ee3f2399b3727d3cef3bd490b6977102cb", "message": "Merge bitcoin/bitcoin#31823: tests: Add witness commitment if we have a witness transaction in `FullBlockTest.update_block()`\n\na7c96f874de13ace9814da92fd6160a126a97ebf tests: Add witness commitment if we have a witness transaction in FullBlockTest.update_block() (Chris Stewart)\n\nPull request description:\n\n  This is useful for test cases where we want to test logic invalid blocks that contain witness transactions. If we don't add the witness commitment as per [BIP141](https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki#user-content-Commitment_structure), blocks will be rejected with the error [`Block mutated`](https://github.com/bitcoin/bitcoin/blob/fb0ada982a73687520c43b8fde480fa5d456f3e1/src/validation.cpp#L4180).\n\n  This change was needed in https://github.com/ajtowns/bitcoin/pull/13 which is a soft fork proposal to disallow 64 byte transactions. We want to test that 64 byte transactions serialized without the witness are invalid. If we do not have this change, we cannot directly test the logic that rejects 64 byte transactions.\n\n  I decided to PR this upstream as many soft fork proposals may not see the light of day, but this functionality seems strictly additive to the test framework.\n\nACKs for top commit:\n  theStack:\n    ACK a7c96f874de13ace9814da92fd6160a126a97ebf\n  sedited:\n    ACK a7c96f874de13ace9814da92fd6160a126a97ebf\n  glozow:\n    ACK a7c96f874de13ace9814da92fd6160a126a97ebf\n\nTree-SHA512: 7c185838abaf068bc96b425c3c971b73f75dfcb41dacc8b2f2543c7602f23f19d908633278b93738f18049e6bd8c845c152cfb93b289bef501c7e86ed8dae0ab", "author": {"name": "merge-script", "email": "gloriajzhao@gmail.com", "login": "glozow", "date": "2025-12-09T16:11:13+00:00"}, "committer": {"name": "merge-script", "email": "gloriajzhao@gmail.com", "login": "glozow", "date": "2025-12-09T16:11:13+00:00"}, "url": "https://github.com/bitcoin/bitcoin/commit/d23d49ee3f2399b3727d3cef3bd490b6977102cb", "is_merge": true, "parents": ["29ed608dc75e6397c65ef72f4da9f51050ae95ec", "a7c96f874de13ace9814da92fd6160a126a97ebf"], "stats": {"additions": 0, "deletions": 0, "total": 0}, "files_changed": 0, "merged_pr_number": 31823}
{"sha": "29ed608dc75e6397c65ef72f4da9f51050ae95ec", "message": "Merge bitcoin/bitcoin#33961: script: Add a separate ScriptError for empty pubkeys encountered in Tapscript\n\n9d5021a05bd33c73276909eec961777867ddb412 script: add SCRIPT_ERR_TAPSCRIPT_EMPTY_PUBKEY (billymcbip)\n\nPull request description:\n\n  We currently have two callsites for `SCRIPT_ERR_PUBKEYTYPE`:\n  - A pre-tapscript policy error behind the `SCRIPT_VERIFY_STRICTENC` flag: https://github.com/bitcoin/bitcoin/blob/4de26b111f4d9b116d0d4930f8bbd69889b3cf75/src/script/interpreter.cpp#L220\n  - A [consensus error](https://github.com/bitcoin/bips/blob/master/bip-0342.mediawiki?plain=1#L93) in Tapscript: https://github.com/bitcoin/bitcoin/blob/4de26b111f4d9b116d0d4930f8bbd69889b3cf75/src/script/interpreter.cpp#L368\n\n  It would be good for readability and testability to have separate errors for both cases, as they are quite distinct (policy vs. consensus, format vs. emptiness).\n\n  **This PR adds `SCRIPT_ERR_TAPSCRIPT_EMPTY_PUBKEY` for the consensus error path.**\n\n  This change would make our error handling more consistent. We have more granular errors for other pubkey error paths already: `SCRIPT_ERR_WITNESS_PUBKEYTYPE`,  `SCRIPT_ERR_DISCOURAGE_UPGRADABLE_PUBKEYTYPE`. We also have separate errors for MINIMAL_IF: `SCRIPT_ERR_MINIMALIF` for the policy error pre-tapscript, and `SCRIPT_ERR_TAPSCRIPT_MINIMALIF` for the consensus error post-tapscript.\n\n  Tests:\n\n  Added a test case to `script_tests` and ran `build/bin/test_bitcoin --run_test=script_tests --log_level=success`.\n  ```\n  test/script_tests.cpp:144: info: check '[[\"aa\",\"#SCRIPT# 0 CHECKSIG\",\"#CONTROLBLOCK#\",0.00000001],\"\",\"0x51 0x20 #TAPROOTOUTPUT#\",\"P2SH,WITNESS,TAPROOT\",\"TAPSCRIPT_EMPTY_PUBKEY\",\"TAPSCRIPT: OP_CHECKSIG with empty pubkey must fail\"] (with flags 165d5d)' has passed\n  ...\n  ```\n\n  Ran `DIR_UNIT_TEST_DATA=\"$(pwd)/../qa-assets/unit_test_data\" build/bin/test_bitcoin --run_test=script_assets_tests --log_level=success`.\n\n  Updated `feature_taproot.py` and ran `build/test/functional/feature_taproot.py`.\n\n  Looking forward to your feedback.\n\nACKs for top commit:\n  sedited:\n    ACK 9d5021a05bd33c73276909eec961777867ddb412\n  darosior:\n    utACK 9d5021a05bd33c73276909eec961777867ddb412\n  sipa:\n    ACK 9d5021a05bd33c73276909eec961777867ddb412\n\nTree-SHA512: bc0b7f64454313fe392ffb2d23aa4eca3deadc5ea1d10b3fba0b3ab4cb0575a5ddcb002dc27b4fa7aa3c180840a83d1b3e5c89351009ce7ffe684d58e1980ace", "author": {"name": "merge-script", "email": "gloriajzhao@gmail.com", "login": "glozow", "date": "2025-12-09T16:01:49+00:00"}, "committer": {"name": "merge-script", "email": "gloriajzhao@gmail.com", "login": "glozow", "date": "2025-12-09T16:01:49+00:00"}, "url": "https://github.com/bitcoin/bitcoin/commit/29ed608dc75e6397c65ef72f4da9f51050ae95ec", "is_merge": true, "parents": ["d2a199bca73ba26838ebbaebd6f6e5857fe3d34f", "9d5021a05bd33c73276909eec961777867ddb412"], "stats": {"additions": 0, "deletions": 0, "total": 0}, "files_changed": 0, "merged_pr_number": 33961}
{"sha": "d2a199bca73ba26838ebbaebd6f6e5857fe3d34f", "message": "Merge bitcoin/bitcoin#33909: doc, ci: Make the max number of commits tested explicit\n\nb5a7a685bba312a780eddcb4a53ce2c26a937854 ci: Make the max number of commits tested explicit (Hodlinator)\n\nPull request description:\n\n  Gives less of a false sense of security.\n\nACKs for top commit:\n  maflcko:\n    lgtm ACK b5a7a685bba312a780eddcb4a53ce2c26a937854\n  rkrux:\n    crACK b5a7a685bba312a780eddcb4a53ce2c26a937854\n  janb84:\n    ACK b5a7a685bba312a780eddcb4a53ce2c26a937854\n  glozow:\n    lgtm ACK b5a7a685bba312a780eddcb4a53ce2c26a937854\n\nTree-SHA512: 9f50a86f440d6a551a0c1ff547e61b61b829e98cd0cd2d5ca65966af0b48d40582f698bcb039a7467c4b71166920413c334eac0e9e4f0141c3e02cd68555865b", "author": {"name": "merge-script", "email": "gloriajzhao@gmail.com", "login": "glozow", "date": "2025-12-09T15:51:44+00:00"}, "committer": {"name": "merge-script", "email": "gloriajzhao@gmail.com", "login": "glozow", "date": "2025-12-09T15:51:44+00:00"}, "url": "https://github.com/bitcoin/bitcoin/commit/d2a199bca73ba26838ebbaebd6f6e5857fe3d34f", "is_merge": true, "parents": ["dbc89280691278d222d88e8a469de6ee3bfbbe7f", "b5a7a685bba312a780eddcb4a53ce2c26a937854"], "stats": {"additions": 0, "deletions": 0, "total": 0}, "files_changed": 0, "merged_pr_number": 33909}
{"sha": "dbc89280691278d222d88e8a469de6ee3bfbbe7f", "message": "Merge bitcoin/bitcoin#33993: init: point out -stopatheight may be imprecise\n\nff06e2468a5d3eeebeffe781904c34c9d1b44385 init: point out -stopatheight may be imprecise (brunoerg)\n\nPull request description:\n\n  `-stopatheight` is used to stop running bitcoind after reaching a given height. However, this feature is imprecise since some blocks can still be processed during the shutdown.\n\n  There are some previous discussions around it in https://github.com/bitcoin/bitcoin/pull/13713, https://github.com/bitcoin/bitcoin/pull/13490 and https://github.com/bitcoin/bitcoin/issues/13477. However, I'm not sure if it will get fixed since it's undesirable to burden the validation code further with this and we can bypass this behavior by using `invalidateblock` to wind back. Anyway, since at this moment its behavior is imprecise I think worth mentioning it in documentation.\n\nACKs for top commit:\n  rkrux:\n    re-ACK ff06e2468a5d3eeebeffe781904c34c9d1b44385\n  stickies-v:\n    ACK ff06e2468a5d3eeebeffe781904c34c9d1b44385\n  pablomartin4btc:\n    ACK ff06e2468a5d3eeebeffe781904c34c9d1b44385\n  jaonoctus:\n    re-ACK ff06e2468a5d3eeebeffe781904c34c9d1b44385\n\nTree-SHA512: 222d5e89021d5f9a7ce0edca44c4ce20b13f71832413dccea78ad40a01f2a615a061f8cf446d7290ed911023922adbc6fa22f0c88cff306dcd8b4ae14194e9b8", "author": {"name": "merge-script", "email": "gloriajzhao@gmail.com", "login": "glozow", "date": "2025-12-09T15:39:46+00:00"}, "committer": {"name": "merge-script", "email": "gloriajzhao@gmail.com", "login": "glozow", "date": "2025-12-09T15:39:46+00:00"}, "url": "https://github.com/bitcoin/bitcoin/commit/dbc89280691278d222d88e8a469de6ee3bfbbe7f", "is_merge": true, "parents": ["d5c8199b7904f4b13230d5677d4528591e4d5b41", "ff06e2468a5d3eeebeffe781904c34c9d1b44385"], "stats": {"additions": 0, "deletions": 0, "total": 0}, "files_changed": 0, "merged_pr_number": 33993}
