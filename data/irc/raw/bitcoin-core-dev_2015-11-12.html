<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2015-11-12
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2015-11-12' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:27 UTC</pre>
<pre><a href="/bitcoin-core-dev/2015-10-12">&lt;</a><span class='header'>  November 2015   </span><a href="/bitcoin-core-dev/2015-12-12">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2015-11-01">1</a>  <a class="" href="/bitcoin-core-dev/2015-11-02">2</a>  <a class="" href="/bitcoin-core-dev/2015-11-03">3</a>  <a class="" href="/bitcoin-core-dev/2015-11-04">4</a>  <a class="" href="/bitcoin-core-dev/2015-11-05">5</a>  <a class="" href="/bitcoin-core-dev/2015-11-06">6</a>  <a class="" href="/bitcoin-core-dev/2015-11-07">7</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2015-11-08">8</a>  <a class="" href="/bitcoin-core-dev/2015-11-09">9</a> <a class="" href="/bitcoin-core-dev/2015-11-10">10</a> <a class="" href="/bitcoin-core-dev/2015-11-11">11</a> <a class="current" href="/bitcoin-core-dev/2015-11-12">12</a> <a class="" href="/bitcoin-core-dev/2015-11-13">13</a> <a class="" href="/bitcoin-core-dev/2015-11-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-11-15">15</a> <a class="" href="/bitcoin-core-dev/2015-11-16">16</a> <a class="" href="/bitcoin-core-dev/2015-11-17">17</a> <a class="" href="/bitcoin-core-dev/2015-11-18">18</a> <a class="" href="/bitcoin-core-dev/2015-11-19">19</a> <a class="" href="/bitcoin-core-dev/2015-11-20">20</a> <a class="" href="/bitcoin-core-dev/2015-11-21">21</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-11-22">22</a> <a class="" href="/bitcoin-core-dev/2015-11-23">23</a> <a class="" href="/bitcoin-core-dev/2015-11-24">24</a> <a class="" href="/bitcoin-core-dev/2015-11-25">25</a> <a class="" href="/bitcoin-core-dev/2015-11-26">26</a> <a class="" href="/bitcoin-core-dev/2015-11-27">27</a> <a class="" href="/bitcoin-core-dev/2015-11-28">28</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-11-29">29</a> <a class="" href="/bitcoin-core-dev/2015-11-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1447295160' id='436117'>
<a class='timestamp' href='#436117'><time timestamp='2015-11-12T02:26:00Z'>02:26</time></a>
&lt;<span class='nick nick-12'> GitHub16</span>&gt;
[bitcoin] pstratem opened pull request #6993: Add -blocksonly option (master...blocksonly) <a href="https://github.com/bitcoin/bitcoin/pull/6993" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6993</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447295400' id='436118'>
<a class='timestamp' href='#436118'><time timestamp='2015-11-12T02:30:00Z'>02:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: does that actually work?!
<br>
</div>

<div class='talk op-msg' data-timestamp='1447295400' id='436119'>
<a class='timestamp' href='#436119'><time timestamp='2015-11-12T02:30:00Z'>02:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
add docs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447296900' id='436120'>
<a class='timestamp' href='#436120'><time timestamp='2015-11-12T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, yeah it does
<br>
</div>

<div class='talk op-msg' data-timestamp='1447297020' id='436121'>
<a class='timestamp' href='#436121'><time timestamp='2015-11-12T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i had completely forgotten about the fRelay flag
<br>
</div>

<div class='talk op-msg' data-timestamp='1447297680' id='436122'>
<a class='timestamp' href='#436122'><time timestamp='2015-11-12T03:08:00Z'>03:08</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
phantomcircuit: its cool tbh haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1447307340' id='436123'>
<a class='timestamp' href='#436123'><time timestamp='2015-11-12T05:49:00Z'>05:49</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
conceptually, phantomcircuit I feel like you could separate mempool from bitcoind with -blocksonly :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1447307460' id='436124'>
<a class='timestamp' href='#436124'><time timestamp='2015-11-12T05:51:00Z'>05:51</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
phantomcircuit: also, would it be worth just dropping the transactions before they even get to AcceptToMempool?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447307460' id='436125'>
<a class='timestamp' href='#436125'><time timestamp='2015-11-12T05:51:00Z'>05:51</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
or would advertising you don&#x27;t care about txs be a BIP requiring protocol change?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447307700' id='436126'>
<a class='timestamp' href='#436126'><time timestamp='2015-11-12T05:55:00Z'>05:55</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: getdata being dropping the transactions before ATM? :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1447307760' id='436127'>
<a class='timestamp' href='#436127'><time timestamp='2015-11-12T05:56:00Z'>05:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jinx I guess. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447307760' id='436128'>
<a class='timestamp' href='#436128'><time timestamp='2015-11-12T05:56:00Z'>05:56</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308000' id='436129'>
<a class='timestamp' href='#436129'><time timestamp='2015-11-12T06:00:00Z'>06:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but yea, I think he should change it to not getdata any announcements instead from non-whitebound peers, and leave the mempool alone. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308000' id='436130'>
<a class='timestamp' href='#436130'><time timestamp='2015-11-12T06:00:00Z'>06:00</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: agreed, most likely the mempool would always be empty
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308000' id='436131'>
<a class='timestamp' href='#436131'><time timestamp='2015-11-12T06:00:00Z'>06:00</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
but that is intended
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308000' id='436132'>
<a class='timestamp' href='#436132'><time timestamp='2015-11-12T06:00:00Z'>06:00</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
(obviously)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308060' id='436133'>
<a class='timestamp' href='#436133'><time timestamp='2015-11-12T06:01:00Z'>06:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Right but then you could still use this node to e.g. relay transactions created by an offline wallet behind it and such.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308060' id='436134'>
<a class='timestamp' href='#436134'><time timestamp='2015-11-12T06:01:00Z'>06:01</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: or as I was thinking, have multiple relay nodes with decent bandwidth, but low memory, backed by a [lower] bandwidth blockchain node
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308120' id='436135'>
<a class='timestamp' href='#436135'><time timestamp='2015-11-12T06:02:00Z'>06:02</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
assuming you had a service big enough where that is warranted anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308120' id='436136'>
<a class='timestamp' href='#436136'><time timestamp='2015-11-12T06:02:00Z'>06:02</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
hmmm, though, its the mempool that takes all the memory anyway haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308180' id='436137'>
<a class='timestamp' href='#436137'><time timestamp='2015-11-12T06:03:00Z'>06:03</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
well, it&#x27;ll be interesting to play with for sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308180' id='436138'>
<a class='timestamp' href='#436138'><time timestamp='2015-11-12T06:03:00Z'>06:03</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
dcousens, im dropping them in AcceptToMempool to prevent leaking which transactions are yours
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308180' id='436139'>
<a class='timestamp' href='#436139'><time timestamp='2015-11-12T06:03:00Z'>06:03</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
im not sure i did a thorough job of that though
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308240' id='436140'>
<a class='timestamp' href='#436140'><time timestamp='2015-11-12T06:04:00Z'>06:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: nah, don&#x27;t do that. Turning off wallet broadcast (already an option) is how thats achieved.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308300' id='436141'>
<a class='timestamp' href='#436141'><time timestamp='2015-11-12T06:05:00Z'>06:05</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: what about if it was submitted via RPC?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308300' id='436142'>
<a class='timestamp' href='#436142'><time timestamp='2015-11-12T06:05:00Z'>06:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Then we want to relay it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308300' id='436143'>
<a class='timestamp' href='#436143'><time timestamp='2015-11-12T06:05:00Z'>06:05</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: sure, but, that seems counter to the point of preventing leakage
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308360' id='436144'>
<a class='timestamp' href='#436144'><time timestamp='2015-11-12T06:06:00Z'>06:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
blocksonly shouldn&#x27;t refuse to relay transactions when you&#x27;ve specifically asked it to so. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308360' id='436145'>
<a class='timestamp' href='#436145'><time timestamp='2015-11-12T06:06:00Z'>06:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
dcousens: if you don&#x27;t want it to broadcast a transaction then don&#x27;t ask it to!
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308360' id='436146'>
<a class='timestamp' href='#436146'><time timestamp='2015-11-12T06:06:00Z'>06:06</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: sure, but, you could say the same about using it as a wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308360' id='436147'>
<a class='timestamp' href='#436147'><time timestamp='2015-11-12T06:06:00Z'>06:06</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, well then it&#x27;s a one line patch
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308420' id='436148'>
<a class='timestamp' href='#436148'><time timestamp='2015-11-12T06:07:00Z'>06:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: I think not, you need to avoid getdataing if they ignore your flags.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308420' id='436149'>
<a class='timestamp' href='#436149'><time timestamp='2015-11-12T06:07:00Z'>06:07</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: I agree with you, just pointing out the logic didn&#x27;t work with what phantomcircuit logic said &quot;preventing leaking [of] transactions which are yours&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308480' id='436150'>
<a class='timestamp' href='#436150'><time timestamp='2015-11-12T06:08:00Z'>06:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
dcousens: his current behavior will not relay a sendrawtransaction.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308480' id='436151'>
<a class='timestamp' href='#436151'><time timestamp='2015-11-12T06:08:00Z'>06:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I thought you were asking what would happen in my proposed change.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308480' id='436152'>
<a class='timestamp' href='#436152'><time timestamp='2015-11-12T06:08:00Z'>06:08</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
dw, I was
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308540' id='436153'>
<a class='timestamp' href='#436153'><time timestamp='2015-11-12T06:09:00Z'>06:09</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
unimportant, semantics are clear either way ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308600' id='436154'>
<a class='timestamp' href='#436154'><time timestamp='2015-11-12T06:10:00Z'>06:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: so I think behavior should be when set, you will set the flag (to suppress inv announcements), and ignore getdatas.  But only from non-white peers.  And then anything sendraw/wallet will still work like normal, and if you don&#x27;t want that for privacy reasons..then disable wallet broadcast and don&#x27;t use sendraw. :) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308600' id='436155'>
<a class='timestamp' href='#436155'><time timestamp='2015-11-12T06:10:00Z'>06:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I imagine post 0.12 we&#x27;ll also make this behavior one of the things we do in response to running into bandwidth limits.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308660' id='436156'>
<a class='timestamp' href='#436156'><time timestamp='2015-11-12T06:11:00Z'>06:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(e.g. if you get too close to your limit, go into blocks only mode.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308720' id='436157'>
<a class='timestamp' href='#436157'><time timestamp='2015-11-12T06:12:00Z'>06:12</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, that reminds me, thoughts on having a global settings object? (something that ya know.. actually acquired a lock)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308780' id='436158'>
<a class='timestamp' href='#436158'><time timestamp='2015-11-12T06:13:00Z'>06:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Big lock protecting bag-of-assorted things isn&#x27;t generally great.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308840' id='436159'>
<a class='timestamp' href='#436159'><time timestamp='2015-11-12T06:14:00Z'>06:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case, not needed here, auto-blocks only I think is out of scope for 0.12.  It&#x27;s a pretty big behavior change, and we&#x27;d have to do something about the transaction privacy loss. (hopefully fix that via a seperate private announcement mechenism)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308900' id='436160'>
<a class='timestamp' href='#436160'><time timestamp='2015-11-12T06:15:00Z'>06:15</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: by auto, do you mean default?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308900' id='436161'>
<a class='timestamp' href='#436161'><time timestamp='2015-11-12T06:15:00Z'>06:15</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
oh, you mean auto bandwidth response
<br>
</div>

<div class='talk op-msg' data-timestamp='1447308900' id='436162'>
<a class='timestamp' href='#436162'><time timestamp='2015-11-12T06:15:00Z'>06:15</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
nvm
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309020' id='436163'>
<a class='timestamp' href='#436163'><time timestamp='2015-11-12T06:17:00Z'>06:17</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, could equally be a separate lock on each of the settings
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309080' id='436164'>
<a class='timestamp' href='#436164'><time timestamp='2015-11-12T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: right for settings that should chang at runtime the setting should be read in init and set in a datastructure with its own lock for further changes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309200' id='436165'>
<a class='timestamp' href='#436165'><time timestamp='2015-11-12T06:20:00Z'>06:20</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, well and most of them can just be atomic ints
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309260' id='436166'>
<a class='timestamp' href='#436166'><time timestamp='2015-11-12T06:21:00Z'>06:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We are not yet using C++ new enough to have standard atomic types.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309260' id='436167'>
<a class='timestamp' href='#436167'><time timestamp='2015-11-12T06:21:00Z'>06:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
And plain integers ARE NOT ATOMIC.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309380' id='436168'>
<a class='timestamp' href='#436168'><time timestamp='2015-11-12T06:23:00Z'>06:23</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
without help
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309440' id='436169'>
<a class='timestamp' href='#436169'><time timestamp='2015-11-12T06:24:00Z'>06:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sure, you can use locks. Or custom asm or what not.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309500' id='436170'>
<a class='timestamp' href='#436170'><time timestamp='2015-11-12T06:25:00Z'>06:25</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
gcc &amp; clang provide atomic intrinsics to give C/C++ level access to cmpxchg, ints with lock prefixes and more.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309500' id='436171'>
<a class='timestamp' href='#436171'><time timestamp='2015-11-12T06:25:00Z'>06:25</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
not C++ standard but it is available on all our platforms
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309500' id='436172'>
<a class='timestamp' href='#436172'><time timestamp='2015-11-12T06:25:00Z'>06:25</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, something something boost atomic
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309560' id='436173'>
<a class='timestamp' href='#436173'><time timestamp='2015-11-12T06:26:00Z'>06:26</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
(im opposed to using boost in places where replacing it would be a giant headache, this is not one of them)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309560' id='436174'>
<a class='timestamp' href='#436174'><time timestamp='2015-11-12T06:26:00Z'>06:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Well we&#x27;ll upgrade to C++11 probably sooner rather than later and pick up language standard atomics.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309620' id='436175'>
<a class='timestamp' href='#436175'><time timestamp='2015-11-12T06:27:00Z'>06:27</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
phantomcircuit, nod, <a href="http://www.boost.org/doc/libs/1_59_0/doc/html/atomic.html" class="link" target="_blank">http://www.boost.org/doc/libs/1_59_0/doc/html/atomic.html</a> 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309620' id='436176'>
<a class='timestamp' href='#436176'><time timestamp='2015-11-12T06:27:00Z'>06:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
/usually/ one shouldn&#x27;t be directly using atomics in any case except in performance crticial algorithims or when building lower level constructs to be used from other things. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309680' id='436177'>
<a class='timestamp' href='#436177'><time timestamp='2015-11-12T06:28:00Z'>06:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If the boost stuff is drop in for c++11 too than thats not so bad.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309680' id='436178'>
<a class='timestamp' href='#436178'><time timestamp='2015-11-12T06:28:00Z'>06:28</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
that&#x27;s the idea
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309740' id='436179'>
<a class='timestamp' href='#436179'><time timestamp='2015-11-12T06:29:00Z'>06:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think we&#x27;re already in a mode of only using boost features that aren&#x27;t in C++11 if we have reason good enough to justify reimplementing them internally in any case. (e.g. mempool indexing)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447309920' id='436180'>
<a class='timestamp' href='#436180'><time timestamp='2015-11-12T06:32:00Z'>06:32</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
<a href="https://gcc.gnu.org/onlinedocs/gcc/_005f_005fatomic-Builtins.html" class="link" target="_blank">https://gcc.gnu.org/onlinedocs/gcc/_005f_005fatomic-Builtins.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311120' id='436181'>
<a class='timestamp' href='#436181'><time timestamp='2015-11-12T06:52:00Z'>06:52</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, hmm so im thinking blocksonly should be undocumented as there are actually very few people who should be running such a thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311180' id='436182'>
<a class='timestamp' href='#436182'><time timestamp='2015-11-12T06:53:00Z'>06:53</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
the privacy loss form running with blocksonly and walletbroadcast=1 is potentially huge
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311300' id='436183'>
<a class='timestamp' href='#436183'><time timestamp='2015-11-12T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
phantomcircuit: that seems wrong
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311300' id='436184'>
<a class='timestamp' href='#436184'><time timestamp='2015-11-12T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
maybe a compile flag to allow it
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311300' id='436185'>
<a class='timestamp' href='#436185'><time timestamp='2015-11-12T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
or something
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311360' id='436186'>
<a class='timestamp' href='#436186'><time timestamp='2015-11-12T06:56:00Z'>06:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
just disable walletbroadcast by default if it&#x27;s enabled?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311360' id='436187'>
<a class='timestamp' href='#436187'><time timestamp='2015-11-12T06:56:00Z'>06:56</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
but not undocumented
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311360' id='436188'>
<a class='timestamp' href='#436188'><time timestamp='2015-11-12T06:56:00Z'>06:56</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
or that ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311360' id='436189'>
<a class='timestamp' href='#436189'><time timestamp='2015-11-12T06:56:00Z'>06:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and emit a warning to the log
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311420' id='436190'>
<a class='timestamp' href='#436190'><time timestamp='2015-11-12T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
PRIVACYWARNING: wallet broadcasting has been disabled, because any transaction you send while not relaying transactions will stand out like a sore thumb
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311420' id='436191'>
<a class='timestamp' href='#436191'><time timestamp='2015-11-12T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
wumpus, maybe... that&#x27;s just what we need a more complicated tree of which settings are compatible :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311420' id='436192'>
<a class='timestamp' href='#436192'><time timestamp='2015-11-12T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if you are sure you want to enable this, use -walletbroadcast
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311420' id='436193'>
<a class='timestamp' href='#436193'><time timestamp='2015-11-12T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: yea, you can imply walletbroadcast off for that case. We have handling like this for many options related to privacy.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311420' id='436194'>
<a class='timestamp' href='#436194'><time timestamp='2015-11-12T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
you call that complicated?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311420' id='436195'>
<a class='timestamp' href='#436195'><time timestamp='2015-11-12T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: wallet broadcasting and whitelisting are already inherently a privacy leak
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311480' id='436196'>
<a class='timestamp' href='#436196'><time timestamp='2015-11-12T06:58:00Z'>06:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
though I think you are GREATLY overestimating the improvement relay has on privacy.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311480' id='436197'>
<a class='timestamp' href='#436197'><time timestamp='2015-11-12T06:58:00Z'>06:58</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
wumpus: he just doesn&#x27;t want to make it more than 1 or 2 lines
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311480' id='436198'>
<a class='timestamp' href='#436198'><time timestamp='2015-11-12T06:58:00Z'>06:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think either way (defaulting walletbroadcast off or on) is okay with me, though I would leave it defaulting on.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311540' id='436199'>
<a class='timestamp' href='#436199'><time timestamp='2015-11-12T06:59:00Z'>06:59</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i uh dcousens <b>*shhhh*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311540' id='436200'>
<a class='timestamp' href='#436200'><time timestamp='2015-11-12T06:59:00Z'>06:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
&#x27;it is a already bad&#x27; is no excuse for allowing things to get silently even worse, hence the warning.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311600' id='436201'>
<a class='timestamp' href='#436201'><time timestamp='2015-11-12T07:00:00Z'>07:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s the problem with privacy everywhere, people think well we have no privacy already anyway, so why not do this and this also, it&#x27;s not like it could get any worse. Yes, it can get worse.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311600' id='436202'>
<a class='timestamp' href='#436202'><time timestamp='2015-11-12T07:00:00Z'>07:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: agree, but to someone already listening on many nodes in the network, if they&#x27;re connected to the original broadcaster too, they have a fairly good chance of finding you
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311600' id='436203'>
<a class='timestamp' href='#436203'><time timestamp='2015-11-12T07:00:00Z'>07:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: I don&#x27;t know if it makes it worse or not, it might-- so fair enough.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311660' id='436204'>
<a class='timestamp' href='#436204'><time timestamp='2015-11-12T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not relaying transactions otherwise just reduces the noticed; it doesn&#x27;t fix the fact that information is being leaked
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311660' id='436205'>
<a class='timestamp' href='#436205'><time timestamp='2015-11-12T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: well if you never send transactions then suddenlly send one, that makes it extremely clear it&#x27;s yours, doesn&#x27;t it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311660' id='436206'>
<a class='timestamp' href='#436206'><time timestamp='2015-11-12T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: research so far suggests that its currently about 100% effective if you transact more than once. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311660' id='436207'>
<a class='timestamp' href='#436207'><time timestamp='2015-11-12T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: well with whitebind, perhaps not! (also if we start turning this on dynamically in the future e.g. when low on bandwidth) perhaps not.  But fair enough.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311660' id='436208'>
<a class='timestamp' href='#436208'><time timestamp='2015-11-12T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
s/noticed/noise/ i do not comprehend how i made that typo
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311720' id='436209'>
<a class='timestamp' href='#436209'><time timestamp='2015-11-12T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: so go softset off wallet broadcast and log, see the other examples in init.cpp.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311720' id='436210'>
<a class='timestamp' href='#436210'><time timestamp='2015-11-12T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I just don&#x27;t like a setting that can silently make your privacy worse
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311720' id='436211'>
<a class='timestamp' href='#436211'><time timestamp='2015-11-12T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: yup easily avoided, I agree.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311720' id='436212'>
<a class='timestamp' href='#436212'><time timestamp='2015-11-12T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m fine with default off
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311720' id='436213'>
<a class='timestamp' href='#436213'><time timestamp='2015-11-12T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the other option would be to indeed not document the option
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311780' id='436214'>
<a class='timestamp' href='#436214'><time timestamp='2015-11-12T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but I think a warning + disable wallet broadcast by default is good enough
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311780' id='436215'>
<a class='timestamp' href='#436215'><time timestamp='2015-11-12T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what about whitebind?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311780' id='436216'>
<a class='timestamp' href='#436216'><time timestamp='2015-11-12T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
what&#x27;s with whitebind?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311780' id='436217'>
<a class='timestamp' href='#436217'><time timestamp='2015-11-12T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
you mean - do relay transactions for whitelisters?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311780' id='436218'>
<a class='timestamp' href='#436218'><time timestamp='2015-11-12T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
whitelisted peers that relay transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311840' id='436219'>
<a class='timestamp' href='#436219'><time timestamp='2015-11-12T07:04:00Z'>07:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think it&#x27;ll be a nice bandwidth reduction feature for watching wallets. It&#x27;s a &gt;2x reduction in bandwidth (probably more like 3x typically) and also saves you from a number of dos attacks. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311840' id='436220'>
<a class='timestamp' href='#436220'><time timestamp='2015-11-12T07:04:00Z'>07:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think it should relay for whitelisted peers. So you can use a node configured like this as a gateway to get your transactions to the outside world.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311840' id='436221'>
<a class='timestamp' href='#436221'><time timestamp='2015-11-12T07:04:00Z'>07:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: it is a great feature, but the catch is that you have to make sure you&#x27;re silent yourself, as there is no noise to hide in. That&#x27;s acceptable, but needs to be transparent.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311900' id='436222'>
<a class='timestamp' href='#436222'><time timestamp='2015-11-12T07:05:00Z'>07:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how is whitelisting different from wallet broadcasting yourself?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311960' id='436223'>
<a class='timestamp' href='#436223'><time timestamp='2015-11-12T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
because you choose and configure whitelists, it&#x27;s like setting broadcast=1
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311960' id='436224'>
<a class='timestamp' href='#436224'><time timestamp='2015-11-12T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
even if it doesn&#x27;t disclose the ip of the actual sender anymore, they do know an ip address that the sender trusts
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311960' id='436225'>
<a class='timestamp' href='#436225'><time timestamp='2015-11-12T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right it&#x27;s something you have to explicitly enable
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311960' id='436226'>
<a class='timestamp' href='#436226'><time timestamp='2015-11-12T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
That could be a seperate setting. I&#x27;ve wanted that before, to control the forced relay for whitehosts.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447311960' id='436227'>
<a class='timestamp' href='#436227'><time timestamp='2015-11-12T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
... which could come with a warning, of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312020' id='436228'>
<a class='timestamp' href='#436228'><time timestamp='2015-11-12T07:07:00Z'>07:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: then how is it different from walletbroadcast?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312020' id='436229'>
<a class='timestamp' href='#436229'><time timestamp='2015-11-12T07:07:00Z'>07:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: my proposal is that walletbroadcast would be disabled by default if block-only
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312020' id='436230'>
<a class='timestamp' href='#436230'><time timestamp='2015-11-12T07:07:00Z'>07:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
whitelist already <b>*is*</b> disabled by default
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312020' id='436231'>
<a class='timestamp' href='#436231'><time timestamp='2015-11-12T07:07:00Z'>07:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hmm, ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312020' id='436232'>
<a class='timestamp' href='#436232'><time timestamp='2015-11-12T07:07:00Z'>07:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
walletbroadcast is enabled by default
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312020' id='436233'>
<a class='timestamp' href='#436233'><time timestamp='2015-11-12T07:07:00Z'>07:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok, that is a fair point
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312080' id='436234'>
<a class='timestamp' href='#436234'><time timestamp='2015-11-12T07:08:00Z'>07:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Whitelist is a bot too overloaded. We might want to add a whiterelay that controls the forced relay for whitelisted hosts, which defaults on, but is soft-off with blocksonly
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312080' id='436235'>
<a class='timestamp' href='#436235'><time timestamp='2015-11-12T07:08:00Z'>07:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there are probably more ways that whitelisted peers can screw up your privacy :D
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312080' id='436236'>
<a class='timestamp' href='#436236'><time timestamp='2015-11-12T07:08:00Z'>07:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
s/bot/bit/
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312080' id='436237'>
<a class='timestamp' href='#436237'><time timestamp='2015-11-12T07:08:00Z'>07:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
they&#x27;re sort of trusted
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312080' id='436238'>
<a class='timestamp' href='#436238'><time timestamp='2015-11-12T07:08:00Z'>07:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea, we already bypass mempool policy
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312080' id='436239'>
<a class='timestamp' href='#436239'><time timestamp='2015-11-12T07:08:00Z'>07:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: they are very trusted... but you yourself are also trusted
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312140' id='436240'>
<a class='timestamp' href='#436240'><time timestamp='2015-11-12T07:09:00Z'>07:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you do a wallet transaction, you expect it to be relayed; if a whitelisted peer relays a transaction, you also expect it to be relayed
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312200' id='436241'>
<a class='timestamp' href='#436241'><time timestamp='2015-11-12T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the wallet may also rebroadcast old transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312200' id='436242'>
<a class='timestamp' href='#436242'><time timestamp='2015-11-12T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s the scary part
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312200' id='436243'>
<a class='timestamp' href='#436243'><time timestamp='2015-11-12T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
whitelisted peers will also rebroadcast old transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312200' id='436244'>
<a class='timestamp' href='#436244'><time timestamp='2015-11-12T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
even transactions sent to you
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312200' id='436245'>
<a class='timestamp' href='#436245'><time timestamp='2015-11-12T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok  -I feel this is not constructive anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312200' id='436246'>
<a class='timestamp' href='#436246'><time timestamp='2015-11-12T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
don&#x27;t introduce features that may silently reduce user&#x27;s privacy even more, that&#x27;s all I ask
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312260' id='436247'>
<a class='timestamp' href='#436247'><time timestamp='2015-11-12T07:11:00Z'>07:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312260' id='436248'>
<a class='timestamp' href='#436248'><time timestamp='2015-11-12T07:11:00Z'>07:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if there is warning, or a knob that has to be explicitly enabled, I&#x27;m ok with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312320' id='436249'>
<a class='timestamp' href='#436249'><time timestamp='2015-11-12T07:12:00Z'>07:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea, seems simple enough, softset off walletbroadcast when this is set.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312320' id='436250'>
<a class='timestamp' href='#436250'><time timestamp='2015-11-12T07:12:00Z'>07:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312320' id='436251'>
<a class='timestamp' href='#436251'><time timestamp='2015-11-12T07:12:00Z'>07:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and yes, whitelisted peers have to be careful, we should document that
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312380' id='436252'>
<a class='timestamp' href='#436252'><time timestamp='2015-11-12T07:13:00Z'>07:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea, we should document that already because they are already deanonymizing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312440' id='436253'>
<a class='timestamp' href='#436253'><time timestamp='2015-11-12T07:14:00Z'>07:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(not even the primary reason I really don&#x27;t like the whitepeer relay rules--)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312440' id='436254'>
<a class='timestamp' href='#436254'><time timestamp='2015-11-12T07:14:00Z'>07:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and yeah we could have an option to not relay transactions from whitelisted peers...
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312440' id='436255'>
<a class='timestamp' href='#436255'><time timestamp='2015-11-12T07:14:00Z'>07:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(I mostly don&#x27;t like them because I whitebinded the relaynetwork client and p2pool for obvious reasons, and then found they were blowing past my relay policy :-/ )
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312440' id='436256'>
<a class='timestamp' href='#436256'><time timestamp='2015-11-12T07:14:00Z'>07:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i think the rebroadcasting is fundamentally the problem, because nobody but the owner of the transaction will rebroadcast
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312500' id='436257'>
<a class='timestamp' href='#436257'><time timestamp='2015-11-12T07:15:00Z'>07:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
an alternative is peers syncing the mempool with each other...
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312500' id='436258'>
<a class='timestamp' href='#436258'><time timestamp='2015-11-12T07:15:00Z'>07:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: It&#x27;s fairly busted without that, in fact. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312500' id='436259'>
<a class='timestamp' href='#436259'><time timestamp='2015-11-12T07:15:00Z'>07:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so transaction owners don&#x27;t need to rebroadcast randomly
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312500' id='436260'>
<a class='timestamp' href='#436260'><time timestamp='2015-11-12T07:15:00Z'>07:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
policy 192.168.1.* { allow relay; bypass relaypolicy; } policy bind :1234 { ... }   <b>*ducks*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312560' id='436261'>
<a class='timestamp' href='#436261'><time timestamp='2015-11-12T07:16:00Z'>07:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it is... in theory you can end up with a cordon of nodes that already know your transaction between you and miners
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312560' id='436262'>
<a class='timestamp' href='#436262'><time timestamp='2015-11-12T07:16:00Z'>07:16</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Right now on any given publically accessible node &gt;=15 peers are spynodes that connect to everyone. They also use addr behavior to infer things about the non-listening peers behind them; and research shows high success rates for even single transaction origins. If you make a couple transactions in the current network you should assume your origin WILL be idenfied.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312620' id='436263'>
<a class='timestamp' href='#436263'><time timestamp='2015-11-12T07:17:00Z'>07:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
To avoid this we need an actually private broadcast mechenism.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312620' id='436264'>
<a class='timestamp' href='#436264'><time timestamp='2015-11-12T07:17:00Z'>07:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312680' id='436265'>
<a class='timestamp' href='#436265'><time timestamp='2015-11-12T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and once we have that, it would work just as well for rebroadcast. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312680' id='436266'>
<a class='timestamp' href='#436266'><time timestamp='2015-11-12T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
we need a private transaction mechanism badly, but we already knew that I think :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312680' id='436267'>
<a class='timestamp' href='#436267'><time timestamp='2015-11-12T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and also would remove some of these discussions since then the p2p protocol would not have any privacy implications for full nodes (beyond running a node at all. :) )
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312740' id='436268'>
<a class='timestamp' href='#436268'><time timestamp='2015-11-12T07:19:00Z'>07:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right, it would, but it doesn&#x27;t affect our decisions right now because it&#x27;s entirely hypothetical :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312740' id='436269'>
<a class='timestamp' href='#436269'><time timestamp='2015-11-12T07:19:00Z'>07:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Just another benefit. It&#x27;s really nice to not have to consider privacy implications for things; especially when the current state is bad enough that it can be hard to tell if you&#x27;re making it worse. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312800' id='436270'>
<a class='timestamp' href='#436270'><time timestamp='2015-11-12T07:20:00Z'>07:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
E.g. one of the problems with peer rotation, ... in privacy.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312800' id='436271'>
<a class='timestamp' href='#436271'><time timestamp='2015-11-12T07:20:00Z'>07:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
er is privacy.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312800' id='436272'>
<a class='timestamp' href='#436272'><time timestamp='2015-11-12T07:20:00Z'>07:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we just need separate networks for block relay and tx relay :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312800' id='436273'>
<a class='timestamp' href='#436273'><time timestamp='2015-11-12T07:20:00Z'>07:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
One of the problems with pruning ... is privacy (makes nodes more fingerprintable; so you can track nodes across tor and then correlate transactions they originate)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312860' id='436274'>
<a class='timestamp' href='#436274'><time timestamp='2015-11-12T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well... i guess the same arguments apply to mining actually, it&#x27;s just much less data to analyse, but ideally you also don&#x27;t want to be able to pinpoint block creators
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312860' id='436275'>
<a class='timestamp' href='#436275'><time timestamp='2015-11-12T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yadda yadda. All becomes more tidy if these things are seperated.  In one sense you can see that privacy and partition resistance are actually in conflict.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312860' id='436276'>
<a class='timestamp' href='#436276'><time timestamp='2015-11-12T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
For privacy you want to tell your transactions to very few parties, hopefully not attackers. For partition resistance you want to talk to everyone. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312920' id='436277'>
<a class='timestamp' href='#436277'><time timestamp='2015-11-12T07:22:00Z'>07:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: yea, though different problems; mining is very latency sensntive; tx broadcast is not.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312920' id='436278'>
<a class='timestamp' href='#436278'><time timestamp='2015-11-12T07:22:00Z'>07:22</time></a>
&lt;<span class='nick nick-13'> GitHub183</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/cbf9609c71c6...5fcc14ee0562" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/cbf9609c71c6...5fcc14ee0562</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312920' id='436279'>
<a class='timestamp' href='#436279'><time timestamp='2015-11-12T07:22:00Z'>07:22</time></a>
&lt;<span class='nick nick-13'> GitHub183</span>&gt;
bitcoin/master b5cbd39 James O&#x27;Beirne: Add basic coverage reporting for RPC tests...
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312920' id='436280'>
<a class='timestamp' href='#436280'><time timestamp='2015-11-12T07:22:00Z'>07:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and partitioning for tx relay is less of a problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312920' id='436281'>
<a class='timestamp' href='#436281'><time timestamp='2015-11-12T07:22:00Z'>07:22</time></a>
&lt;<span class='nick nick-13'> GitHub183</span>&gt;
bitcoin/master 5fcc14e Wladimir J. van der Laan: Merge pull request #6804...
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312920' id='436282'>
<a class='timestamp' href='#436282'><time timestamp='2015-11-12T07:22:00Z'>07:22</time></a>
&lt;<span class='nick nick-6'> GitHub198</span>&gt;
[bitcoin] laanwj closed pull request #6804: [tests] Add basic coverage reporting for RPC tests (master...rpc_coverage) <a href="https://github.com/bitcoin/bitcoin/pull/6804" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6804</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447312980' id='436283'>
<a class='timestamp' href='#436283'><time timestamp='2015-11-12T07:23:00Z'>07:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
even dropping off your transactions to a random node over Tor is better than publicly broadcasting your transaction from your own node
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313340' id='436284'>
<a class='timestamp' href='#436284'><time timestamp='2015-11-12T07:29:00Z'>07:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea, but requires having a tor client. :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313400' id='436285'>
<a class='timestamp' href='#436285'><time timestamp='2015-11-12T07:30:00Z'>07:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it does, having a tor client seems more and more a requirement for any kind of privacy unfortunately
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313460' id='436286'>
<a class='timestamp' href='#436286'><time timestamp='2015-11-12T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it&#x27;s just a lot of code and exposure, hate having reason to mix things like that with other things that have critical security requirements.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313460' id='436287'>
<a class='timestamp' href='#436287'><time timestamp='2015-11-12T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
a tor bitcoin bundle would be pretty nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313460' id='436288'>
<a class='timestamp' href='#436288'><time timestamp='2015-11-12T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well at least it gives plenty of noise to hide in
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313520' id='436289'>
<a class='timestamp' href='#436289'><time timestamp='2015-11-12T07:32:00Z'>07:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if you were to say, set up an onion routing network just for transactions, even partaking in it would still leak a lot information about you. Also, if you write it yourself doesn&#x27;t make it any less &#x27;code and exposure&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313580' id='436290'>
<a class='timestamp' href='#436290'><time timestamp='2015-11-12T07:33:00Z'>07:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It&#x27;s true, for tx broadcast though, one could send a transaction through a high latency mixmaster like system entered via normal internet. And the daemon could just send an empty message an interior hop one ever couple minutes to hide the traffic. Doing the first hop over tor is superior, but I think not strictly needed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313640' id='436291'>
<a class='timestamp' href='#436291'><time timestamp='2015-11-12T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I agree that such a solution could theoretically be better, the problem as we&#x27;ve seen for years is that no one is implementing such a thing, and tor already exists
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313640' id='436292'>
<a class='timestamp' href='#436292'><time timestamp='2015-11-12T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: the client could be quite simple relative to tor (which at the very begining immediately needs a full SSL stack)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313640' id='436293'>
<a class='timestamp' href='#436293'><time timestamp='2015-11-12T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Indeed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313640' id='436294'>
<a class='timestamp' href='#436294'><time timestamp='2015-11-12T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Actually someone contacted me recently about implementing such a thing, but I don&#x27;t know if they will.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313700' id='436295'>
<a class='timestamp' href='#436295'><time timestamp='2015-11-12T07:35:00Z'>07:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(well they said they will, and asked if I&#x27;d be willing/able to review; but you know most things don&#x27;t actually happen :) )
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313760' id='436296'>
<a class='timestamp' href='#436296'><time timestamp='2015-11-12T07:36:00Z'>07:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: e.g. sending client for such a thing could encrypt a message, connect to a TCP socket, and send it over. Never reading a byte off the socket even. Attack surface would be incompariable to tor. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313880' id='436297'>
<a class='timestamp' href='#436297'><time timestamp='2015-11-12T07:38:00Z'>07:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the reason that Tor uses SSL, by the way, is that that masquerading as SSL is one of the few feasible ways to hide an encrypted connection in plain sight
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313940' id='436298'>
<a class='timestamp' href='#436298'><time timestamp='2015-11-12T07:39:00Z'>07:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Indeed, for good reason. I don&#x27;t think you&#x27;re going to manage to hide that you&#x27;re sending a transaction at all unless you use tor... but you well could hide which transaction you were sending. Esp if you don&#x27;t mind broadcast taking a minute.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447313940' id='436299'>
<a class='timestamp' href='#436299'><time timestamp='2015-11-12T07:39:00Z'>07:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if you start with your own such system you&#x27;d very soon run against the same issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314060' id='436300'>
<a class='timestamp' href='#436300'><time timestamp='2015-11-12T07:41:00Z'>07:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(in particular it&#x27;s completely reasonable to have high cover traffic, if you don&#x27;t mind latency... just send a 100k message into the routing network every N minutes, containing some random assortment of transactions from the public network, and any of your own).  If you&#x27;re not running this over tor, you&#x27;ll stand out as a user of the software but not more than that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314060' id='436301'>
<a class='timestamp' href='#436301'><time timestamp='2015-11-12T07:41:00Z'>07:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314120' id='436302'>
<a class='timestamp' href='#436302'><time timestamp='2015-11-12T07:42:00Z'>07:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well you could still hide that you&#x27;re sending a transaction by hiding in noise, e.g. also using the system to automatically send other people&#x27;s transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314180' id='436303'>
<a class='timestamp' href='#436303'><time timestamp='2015-11-12T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
just like the relaying system we have now but encrypted, and high-latency, and with padding so that you can&#x27;t look at the envelope and identify by the size, etc etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314180' id='436304'>
<a class='timestamp' href='#436304'><time timestamp='2015-11-12T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
exactly. which is also good in that if someone finds out how to distinguish transactions exiting the system they might seek to punish their authors, but if you&#x27;re sending random other transactions into the system, what exits will not just be from witting users.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314300' id='436305'>
<a class='timestamp' href='#436305'><time timestamp='2015-11-12T07:45:00Z'>07:45</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
we are still missing out on a high-latency mixnet of some kind
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314300' id='436306'>
<a class='timestamp' href='#436306'><time timestamp='2015-11-12T07:45:00Z'>07:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but anyhow - just like 5 years ago, I&#x27;d be pleasantly surprised if someone build something like that
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314300' id='436307'>
<a class='timestamp' href='#436307'><time timestamp='2015-11-12T07:45:00Z'>07:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
exactly kanzure
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314300' id='436308'>
<a class='timestamp' href='#436308'><time timestamp='2015-11-12T07:45:00Z'>07:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
prior to bitcoin they were hard(er) because of flooding attacks, but we have a one-two punch here: we have highly valuable tiny messages AND mechenisms to stop flooding attacks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314720' id='436309'>
<a class='timestamp' href='#436309'><time timestamp='2015-11-12T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
lol &quot;On January 23, 2006, the Russian FSB accused Britain of using wireless dead drops concealed inside hollowed-out rocks to collect espionage information from agents in Russia. According to the Russian authorities, the agent delivering information would approach the rock and transmit data wirelessly into it from a hand-held device, and later his British handlers would   pick up the stored data by similar means.&quot; If 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314720' id='436310'>
<a class='timestamp' href='#436310'><time timestamp='2015-11-12T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
everything fails, we could always use fake rocks :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314780' id='436311'>
<a class='timestamp' href='#436311'><time timestamp='2015-11-12T07:53:00Z'>07:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
&quot;some of us already are&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314840' id='436312'>
<a class='timestamp' href='#436312'><time timestamp='2015-11-12T07:54:00Z'>07:54</time></a>
&lt;<span class='nick nick-7'> randy-waterhouse</span>&gt;
yes, btcoin has been accused of using &quot;fake rocks&quot; many times already
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314900' id='436313'>
<a class='timestamp' href='#436313'><time timestamp='2015-11-12T07:55:00Z'>07:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
randy-waterhouse: any links?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314900' id='436314'>
<a class='timestamp' href='#436314'><time timestamp='2015-11-12T07:55:00Z'>07:55</time></a>
&lt;<span class='nick nick-3'> * phantomcircuit</span>&gt;
looks at scrollback
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314960' id='436315'>
<a class='timestamp' href='#436315'><time timestamp='2015-11-12T07:56:00Z'>07:56</time></a>
&lt;<span class='nick nick-7'> randy-waterhouse</span>&gt;
wumpus: tongue-in-cheek reference to &quot;fake gold&quot; accusations
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314960' id='436316'>
<a class='timestamp' href='#436316'><time timestamp='2015-11-12T07:56:00Z'>07:56</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
wumpus, using `-proxy` I get &quot;2015-11-12 07:43:06 ERROR: Proxy error: connection not allowed
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314960' id='436317'>
<a class='timestamp' href='#436317'><time timestamp='2015-11-12T07:56:00Z'>07:56</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
&quot; for .onion and &quot;2015-11-12 07:43:56 ERROR: Proxy error: host unreachable
<br>
</div>

<div class='talk op-msg' data-timestamp='1447314960' id='436318'>
<a class='timestamp' href='#436318'><time timestamp='2015-11-12T07:56:00Z'>07:56</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
&quot; for the seeds
<br>
</div>

<div class='talk op-msg' data-timestamp='1447315020' id='436319'>
<a class='timestamp' href='#436319'><time timestamp='2015-11-12T07:57:00Z'>07:57</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Are those implying censorship?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447315020' id='436320'>
<a class='timestamp' href='#436320'><time timestamp='2015-11-12T07:57:00Z'>07:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
randy-waterhouse: ahh old pyrite, or fool&#x27;s gold :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447315020' id='436321'>
<a class='timestamp' href='#436321'><time timestamp='2015-11-12T07:57:00Z'>07:57</time></a>
&lt;<span class='nick nick-7'> randy-waterhouse</span>&gt;
heh, right
<br>
</div>

<div class='talk op-msg' data-timestamp='1447315080' id='436322'>
<a class='timestamp' href='#436322'><time timestamp='2015-11-12T07:58:00Z'>07:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
MarcoFalke: it may just mean what it says - the proxy cannot reach those hosts
<br>
</div>

<div class='talk op-msg' data-timestamp='1447315080' id='436323'>
<a class='timestamp' href='#436323'><time timestamp='2015-11-12T07:58:00Z'>07:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
MarcoFalke: sometimes hosts are truly unreachable. I think you need to look at tor&#x27;s logging to see if it can reach the first hop to troubleshoot this
<br>
</div>

<div class='talk op-msg' data-timestamp='1447315140' id='436324'>
<a class='timestamp' href='#436324'><time timestamp='2015-11-12T07:59:00Z'>07:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but at least you&#x27;re one step further- you get errors from the proxy, instead of the level before of connecting to the proxy
<br>
</div>

<div class='talk op-msg' data-timestamp='1447315200' id='436325'>
<a class='timestamp' href='#436325'><time timestamp='2015-11-12T08:00:00Z'>08:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it may just have a hard time finding a working .onion peer here try this one: nns4r54x3lfbrkq5.onion
<br>
</div>

<div class='talk op-msg' data-timestamp='1447315980' id='436326'>
<a class='timestamp' href='#436326'><time timestamp='2015-11-12T08:13:00Z'>08:13</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
It only connects to  nkf5e6b7pl4jfd4a.onion (TheBlueMatt)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447316040' id='436327'>
<a class='timestamp' href='#436327'><time timestamp='2015-11-12T08:14:00Z'>08:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok, in that case it&#x27;s at least not censorship, if it can connect to one onion it can in principle connect to all without your ISP knowing anything
<br>
</div>

<div class='talk op-msg' data-timestamp='1447316760' id='436328'>
<a class='timestamp' href='#436328'><time timestamp='2015-11-12T08:26:00Z'>08:26</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I don&#x27;t have to set `-proxy=127...`?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447316760' id='436329'>
<a class='timestamp' href='#436329'><time timestamp='2015-11-12T08:26:00Z'>08:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
you do have to set a proxy
<br>
</div>

<div class='talk op-msg' data-timestamp='1447316760' id='436330'>
<a class='timestamp' href='#436330'><time timestamp='2015-11-12T08:26:00Z'>08:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
otherwise it won&#x27;t know how to connect to onions
<br>
</div>

<div class='talk op-msg' data-timestamp='1447316760' id='436331'>
<a class='timestamp' href='#436331'><time timestamp='2015-11-12T08:26:00Z'>08:26</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Right now I am doing `-onlynet=onion  -torpassword=`
<br>
</div>

<div class='talk op-msg' data-timestamp='1447316760' id='436332'>
<a class='timestamp' href='#436332'><time timestamp='2015-11-12T08:26:00Z'>08:26</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
and I can `-connect=` to it
<br>
</div>

<div class='talk op-msg' data-timestamp='1447316820' id='436333'>
<a class='timestamp' href='#436333'><time timestamp='2015-11-12T08:27:00Z'>08:27</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
but not sync
<br>
</div>

<div class='talk op-msg' data-timestamp='1447316820' id='436334'>
<a class='timestamp' href='#436334'><time timestamp='2015-11-12T08:27:00Z'>08:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it isn&#x27;t able to derive the Tor proxy from the control port. Maybe this is possible, but it is not implemented.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447316880' id='436335'>
<a class='timestamp' href='#436335'><time timestamp='2015-11-12T08:28:00Z'>08:28</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I am doing `-connect=moheur3skn7jbca4.onion   -proxy=127.0.0.1:9050 -testnet` locally and get the connection
<br>
</div>

<div class='talk op-msg' data-timestamp='1447316940' id='436336'>
<a class='timestamp' href='#436336'><time timestamp='2015-11-12T08:29:00Z'>08:29</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
But I need the proxy for outgoing connections, I see.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447316940' id='436337'>
<a class='timestamp' href='#436337'><time timestamp='2015-11-12T08:29:00Z'>08:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ohh testnet
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317000' id='436338'>
<a class='timestamp' href='#436338'><time timestamp='2015-11-12T08:30:00Z'>08:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
probably very, very few onion testnet peers
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317000' id='436339'>
<a class='timestamp' href='#436339'><time timestamp='2015-11-12T08:30:00Z'>08:30</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Still, why wouldn&#x27;t they sync each others blocks if connected?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317120' id='436340'>
<a class='timestamp' href='#436340'><time timestamp='2015-11-12T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Could you try  `-connect=moheur3skn7jbca4.onion -proxy=127.0.0.1:9050 -testnet` on your machine?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317120' id='436341'>
<a class='timestamp' href='#436341'><time timestamp='2015-11-12T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317120' id='436342'>
<a class='timestamp' href='#436342'><time timestamp='2015-11-12T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
with an empty datadir?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317180' id='436343'>
<a class='timestamp' href='#436343'><time timestamp='2015-11-12T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
yes, I have 2400 blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317180' id='436344'>
<a class='timestamp' href='#436344'><time timestamp='2015-11-12T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
*47762
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317240' id='436345'>
<a class='timestamp' href='#436345'><time timestamp='2015-11-12T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
2015-11-12 08:34:02 SOCKS5 connecting moheur3skn7jbca4.onion / 2015-11-12 08:34:08 SOCKS5 connected moheur3skn7jbca4.onion/ 2015-11-12 08:34:08 receive version message: /Satoshi:0.11.99/: version 70011, blocks=47762, us=0.0.0.0:0, peer=1
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317240' id='436346'>
<a class='timestamp' href='#436346'><time timestamp='2015-11-12T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and nothing after that
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317240' id='436347'>
<a class='timestamp' href='#436347'><time timestamp='2015-11-12T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
could mean two things a) I&#x27;m not sending getheaders b) peer is ignoring my getheaders
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317300' id='436348'>
<a class='timestamp' href='#436348'><time timestamp='2015-11-12T08:35:00Z'>08:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
as for (b) I know this issue all too well: <a href="https://github.com/bitcoin/bitcoin/issues/6971" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/6971</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317360' id='436349'>
<a class='timestamp' href='#436349'><time timestamp='2015-11-12T08:36:00Z'>08:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but this required P2P-level debugging, it&#x27;s not tor&#x27;s fault :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317420' id='436350'>
<a class='timestamp' href='#436350'><time timestamp='2015-11-12T08:37:00Z'>08:37</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I don&#x27;t run master. Still running `f1d548d squashme: mention torcontrol in doc/tor.md
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317420' id='436351'>
<a class='timestamp' href='#436351'><time timestamp='2015-11-12T08:37:00Z'>08:37</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
` with no merge
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317420' id='436352'>
<a class='timestamp' href='#436352'><time timestamp='2015-11-12T08:37:00Z'>08:37</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I guess thats an tested ACK on 6639, then?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317420' id='436353'>
<a class='timestamp' href='#436353'><time timestamp='2015-11-12T08:37:00Z'>08:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that doesn&#x27;t matter - if it&#x27;s the <b>*other*</b> peer that&#x27;s ignoring you, nothing you can do
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317480' id='436354'>
<a class='timestamp' href='#436354'><time timestamp='2015-11-12T08:38:00Z'>08:38</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
We are both in IBD?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317540' id='436355'>
<a class='timestamp' href='#436355'><time timestamp='2015-11-12T08:39:00Z'>08:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
using debug=net I can see that I&#x27;m sending getheaders, but he&#x27;s not responding
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317540' id='436356'>
<a class='timestamp' href='#436356'><time timestamp='2015-11-12T08:39:00Z'>08:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
or he&#x27;s forked off the chain completely
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317540' id='436357'>
<a class='timestamp' href='#436357'><time timestamp='2015-11-12T08:39:00Z'>08:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
anything that would make the tip older than 24 hours old will preent him from sending headers
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317600' id='436358'>
<a class='timestamp' href='#436358'><time timestamp='2015-11-12T08:40:00Z'>08:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I remember there were some issues on testnet
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317660' id='436359'>
<a class='timestamp' href='#436359'><time timestamp='2015-11-12T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
block 47762 is Jan 2013
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317660' id='436360'>
<a class='timestamp' href='#436360'><time timestamp='2015-11-12T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but he seems stuck there. blocks=... doesn&#x27;t go up after reconnecting :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317720' id='436361'>
<a class='timestamp' href='#436361'><time timestamp='2015-11-12T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so we&#x27;ll have to find a good testnet onion peer to check this
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317720' id='436362'>
<a class='timestamp' href='#436362'><time timestamp='2015-11-12T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
one sec...
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317720' id='436363'>
<a class='timestamp' href='#436363'><time timestamp='2015-11-12T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
going to sync and then `-connect=` again
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317780' id='436364'>
<a class='timestamp' href='#436364'><time timestamp='2015-11-12T08:43:00Z'>08:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I can spin up one, after catching up (or I&#x27;ll just comment out that check in #6971, so anyone-can-getheaders)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447317840' id='436365'>
<a class='timestamp' href='#436365'><time timestamp='2015-11-12T08:44:00Z'>08:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok one min
<br>
</div>

<div class='talk op-msg' data-timestamp='1447318200' id='436366'>
<a class='timestamp' href='#436366'><time timestamp='2015-11-12T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
MarcoFalke:  tor: Got service ID vbzzvljohcyzlfzg, advertizing service vbzzvljohcyzlfzg.onion:8333   you should be able to sync from that
<br>
</div>

<div class='talk op-msg' data-timestamp='1447318200' id='436367'>
<a class='timestamp' href='#436367'><time timestamp='2015-11-12T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
eh wait that&#x27;s not testnet
<br>
</div>

<div class='talk op-msg' data-timestamp='1447318260' id='436368'>
<a class='timestamp' href='#436368'><time timestamp='2015-11-12T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it is: ytiwtue6no6c3cit.onion:18333
<br>
</div>

<div class='talk op-msg' data-timestamp='1447318260' id='436369'>
<a class='timestamp' href='#436369'><time timestamp='2015-11-12T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
may take some seconds for the new service id to propagate over the tor network
<br>
</div>

<div class='talk op-msg' data-timestamp='1447318380' id='436370'>
<a class='timestamp' href='#436370'><time timestamp='2015-11-12T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Could you make that `-connect=moheur3skn7jbca4.onion -proxy=127.0.0.1:9050 -testnet` and then sync me?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447318380' id='436371'>
<a class='timestamp' href='#436371'><time timestamp='2015-11-12T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
because I am still running with no `-proxy` to prevent outgoing connections
<br>
</div>

<div class='talk op-msg' data-timestamp='1447318500' id='436372'>
<a class='timestamp' href='#436372'><time timestamp='2015-11-12T08:55:00Z'>08:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1447318620' id='436373'>
<a class='timestamp' href='#436373'><time timestamp='2015-11-12T08:57:00Z'>08:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I can connect, but I cannot sync from you, because your node is in IBD
<br>
</div>

<div class='talk op-msg' data-timestamp='1447318680' id='436374'>
<a class='timestamp' href='#436374'><time timestamp='2015-11-12T08:58:00Z'>08:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
/Satoshi:0.11.99(hi_wumpus)/ hehe
<br>
</div>

<div class='talk op-msg' data-timestamp='1447318800' id='436375'>
<a class='timestamp' href='#436375'><time timestamp='2015-11-12T09:00:00Z'>09:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
anyhow yes that&#x27;s a tested ACK on #6639 - it&#x27;s clear that creating the hidden service and makng it connectible works
<br>
</div>

<div class='talk op-msg' data-timestamp='1447319340' id='436376'>
<a class='timestamp' href='#436376'><time timestamp='2015-11-12T09:09:00Z'>09:09</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Ok, then. Will do some more testing and comment on the pull. ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447324680' id='436377'>
<a class='timestamp' href='#436377'><time timestamp='2015-11-12T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, so im (soft) disabling walletbroadcast but what am i doing about whitelisted peers
<br>
</div>

<div class='talk op-msg' data-timestamp='1447324680' id='436378'>
<a class='timestamp' href='#436378'><time timestamp='2015-11-12T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
it seems that there&#x27;s an argument to be made both ways
<br>
</div>

<div class='talk op-msg' data-timestamp='1447324800' id='436379'>
<a class='timestamp' href='#436379'><time timestamp='2015-11-12T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: relay for them; and add an option to control their relay special casing (e.g. so you can turn off the behavior that irritates me too. :) ) and then you can soft set that off too when blocksonly is on.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447324860' id='436380'>
<a class='timestamp' href='#436380'><time timestamp='2015-11-12T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that seems neat
<br>
</div>

<div class='talk op-msg' data-timestamp='1447324860' id='436381'>
<a class='timestamp' href='#436381'><time timestamp='2015-11-12T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
-relaywhitelisted ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447324980' id='436382'>
<a class='timestamp' href='#436382'><time timestamp='2015-11-12T10:43:00Z'>10:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
whitelistalwaysrelay  might be more descriptive.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447325040' id='436383'>
<a class='timestamp' href='#436383'><time timestamp='2015-11-12T10:44:00Z'>10:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
since turning it off should turn off the current behavior where we will accept txn from a whitelisted peer that we wouldn&#x27;t otherwise.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447325040' id='436384'>
<a class='timestamp' href='#436384'><time timestamp='2015-11-12T10:44:00Z'>10:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right, normal relay for whitelisted peers would keep working even without the special case behaviour
<br>
</div>

<div class='talk op-msg' data-timestamp='1447325100' id='436385'>
<a class='timestamp' href='#436385'><time timestamp='2015-11-12T10:45:00Z'>10:45</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
default to true or false?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447325100' id='436386'>
<a class='timestamp' href='#436386'><time timestamp='2015-11-12T10:45:00Z'>10:45</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i guess default to true unless blocksonly=1
<br>
</div>

<div class='talk op-msg' data-timestamp='1447325100' id='436387'>
<a class='timestamp' href='#436387'><time timestamp='2015-11-12T10:45:00Z'>10:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
default to true (current behavior) and soft-off it in blocksonly mode.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447325160' id='436388'>
<a class='timestamp' href='#436388'><time timestamp='2015-11-12T10:46:00Z'>10:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
then people who want to relay for nodes behind them while in blocksonly can turn it on.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447325760' id='436389'>
<a class='timestamp' href='#436389'><time timestamp='2015-11-12T10:56:00Z'>10:56</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, bleh it&#x27;s now a hideously huge 13 loc patch
<br>
</div>

<div class='talk op-msg' data-timestamp='1447325760' id='436390'>
<a class='timestamp' href='#436390'><time timestamp='2015-11-12T10:56:00Z'>10:56</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
:P
<br>
</div>

<div class='talk op-msg' data-timestamp='1447325820' id='436391'>
<a class='timestamp' href='#436391'><time timestamp='2015-11-12T10:57:00Z'>10:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
obviously you have to find some unrelated code to remove at the same time... (heh no not really)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447326000' id='436392'>
<a class='timestamp' href='#436392'><time timestamp='2015-11-12T11:00:00Z'>11:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
phantomcircuit: we don&#x27;t make it easy to make a small patch, do we :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447326060' id='436393'>
<a class='timestamp' href='#436393'><time timestamp='2015-11-12T11:01:00Z'>11:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we need patches that are C++-neutral
<br>
</div>

<div class='talk op-msg' data-timestamp='1447326120' id='436394'>
<a class='timestamp' href='#436394'><time timestamp='2015-11-12T11:02:00Z'>11:02</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
wumpus, lol @ constant
<br>
</div>

<div class='talk op-msg' data-timestamp='1447326120' id='436395'>
<a class='timestamp' href='#436395'><time timestamp='2015-11-12T11:02:00Z'>11:02</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
BUT BUT
<br>
</div>

<div class='talk op-msg' data-timestamp='1447326180' id='436396'>
<a class='timestamp' href='#436396'><time timestamp='2015-11-12T11:03:00Z'>11:03</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
wumpus, main.h or net.h?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447326180' id='436397'>
<a class='timestamp' href='#436397'><time timestamp='2015-11-12T11:03:00Z'>11:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
phantomcircuit: depends on where it&#x27;s used
<br>
</div>

<div class='talk op-msg' data-timestamp='1447326180' id='436398'>
<a class='timestamp' href='#436398'><time timestamp='2015-11-12T11:03:00Z'>11:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I thought main.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1447326300' id='436399'>
<a class='timestamp' href='#436399'><time timestamp='2015-11-12T11:05:00Z'>11:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: your patch will go into history books as the one with the higher discussion per lines of code patch ever that got merged
<br>
</div>

<div class='talk op-msg' data-timestamp='1447326360' id='436400'>
<a class='timestamp' href='#436400'><time timestamp='2015-11-12T11:06:00Z'>11:06</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1447326420' id='436401'>
<a class='timestamp' href='#436401'><time timestamp='2015-11-12T11:07:00Z'>11:07</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
if it will be merged at all! :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447327560' id='436402'>
<a class='timestamp' href='#436402'><time timestamp='2015-11-12T11:26:00Z'>11:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: pfft. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447327620' id='436403'>
<a class='timestamp' href='#436403'><time timestamp='2015-11-12T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/commit/b196b685c9089b74fd4ff3d9a28ea847ab36179b" class="link" target="_blank">https://github.com/bitcoin/bitcoin/commit/b196b685c9089b74fd4ff3d9a28ea847ab36179b</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328160' id='436404'>
<a class='timestamp' href='#436404'><time timestamp='2015-11-12T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
oy the mix of logic between net.cpp and main.cpp is super annoying
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328160' id='436405'>
<a class='timestamp' href='#436405'><time timestamp='2015-11-12T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: the certainties of life :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328220' id='436406'>
<a class='timestamp' href='#436406'><time timestamp='2015-11-12T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
net.cpp:454:89: error: â€˜DEFAULT_BLOCKSONLYâ€™ was not declared in this scope
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328220' id='436407'>
<a class='timestamp' href='#436407'><time timestamp='2015-11-12T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
well yes because it&#x27;s defined in main.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328220' id='436408'>
<a class='timestamp' href='#436408'><time timestamp='2015-11-12T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
&gt;.&gt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328220' id='436409'>
<a class='timestamp' href='#436409'><time timestamp='2015-11-12T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
put it in the node state in main
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328280' id='436410'>
<a class='timestamp' href='#436410'><time timestamp='2015-11-12T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, put it in CNode ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328280' id='436411'>
<a class='timestamp' href='#436411'><time timestamp='2015-11-12T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328280' id='436412'>
<a class='timestamp' href='#436412'><time timestamp='2015-11-12T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in CNodeState
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328340' id='436413'>
<a class='timestamp' href='#436413'><time timestamp='2015-11-12T11:39:00Z'>11:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CNode is the network layer&#x27;s kitchen sink
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328340' id='436414'>
<a class='timestamp' href='#436414'><time timestamp='2015-11-12T11:39:00Z'>11:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(with a ton of state from processing)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328340' id='436415'>
<a class='timestamp' href='#436415'><time timestamp='2015-11-12T11:39:00Z'>11:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CNodeState is just processing
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328400' id='436416'>
<a class='timestamp' href='#436416'><time timestamp='2015-11-12T11:40:00Z'>11:40</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, is that accessible from CNode::Cnode ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328400' id='436417'>
<a class='timestamp' href='#436417'><time timestamp='2015-11-12T11:40:00Z'>11:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328400' id='436418'>
<a class='timestamp' href='#436418'><time timestamp='2015-11-12T11:40:00Z'>11:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s the point
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328400' id='436419'>
<a class='timestamp' href='#436419'><time timestamp='2015-11-12T11:40:00Z'>11:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
none of this should be in net
<br>
</div>

<div class='talk op-msg' data-timestamp='1447328700' id='436420'>
<a class='timestamp' href='#436420'><time timestamp='2015-11-12T11:45:00Z'>11:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
<a href="http://blog.nordeus.com/dev-ops/power-failure-testing-with-ssds.htm" class="link" target="_blank">http://blog.nordeus.com/dev-ops/power-failure-testing-with-ssds.htm</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329120' id='436421'>
<a class='timestamp' href='#436421'><time timestamp='2015-11-12T11:52:00Z'>11:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
&lt;phantomcircuit&gt; oy the mix of logic between net.cpp and main.cpp is super annoying &lt;- oh, you&#x27;re only now discovering that? :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329120' id='436422'>
<a class='timestamp' href='#436422'><time timestamp='2015-11-12T11:52:00Z'>11:52</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, ok then i have to move PushVerison out of Cnode::CNode :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329120' id='436423'>
<a class='timestamp' href='#436423'><time timestamp='2015-11-12T11:52:00Z'>11:52</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
(it actually shouldn&#x27;t be there anyways so i guess net win... horray)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329540' id='436424'>
<a class='timestamp' href='#436424'><time timestamp='2015-11-12T11:59:00Z'>11:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but yes, the split between net.cpp and main.cpp is not optimal, it left too many P2P related code in main
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329540' id='436425'>
<a class='timestamp' href='#436425'><time timestamp='2015-11-12T11:59:00Z'>11:59</time></a>
&lt;<span class='nick nick-10'> GitHub139</span>&gt;
[bitcoin] sipa opened pull request #6996: Add preciousblock RPC (master...preciousblock) <a href="https://github.com/bitcoin/bitcoin/pull/6996" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6996</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329600' id='436426'>
<a class='timestamp' href='#436426'><time timestamp='2015-11-12T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: and too much processing in net
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329600' id='436427'>
<a class='timestamp' href='#436427'><time timestamp='2015-11-12T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
vRecvGetData has no business in CNode, for example
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329660' id='436428'>
<a class='timestamp' href='#436428'><time timestamp='2015-11-12T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329660' id='436429'>
<a class='timestamp' href='#436429'><time timestamp='2015-11-12T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how do i run the python tests from the command line?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329660' id='436430'>
<a class='timestamp' href='#436430'><time timestamp='2015-11-12T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cd qa/pulltester; ./rpc-tests.py
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329720' id='436431'>
<a class='timestamp' href='#436431'><time timestamp='2015-11-12T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ha, ok!
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329840' id='436432'>
<a class='timestamp' href='#436432'><time timestamp='2015-11-12T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and if you want to run a seperate test you can execute it manually from qa/rpc-tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329900' id='436433'>
<a class='timestamp' href='#436433'><time timestamp='2015-11-12T12:05:00Z'>12:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh lol, i can&#x27;t remember it being so easy
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329960' id='436434'>
<a class='timestamp' href='#436434'><time timestamp='2015-11-12T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
whoa does anyone ever read README.md? :-) it still mentions the pull-tester
<br>
</div>

<div class='talk op-msg' data-timestamp='1447329960' id='436435'>
<a class='timestamp' href='#436435'><time timestamp='2015-11-12T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-13'> GitHub93</span>&gt;
[bitcoin] sturles opened pull request #6997: Don&#x27;t use hard-coded AllowFree, as this is usually far too low. (master...no-default-free-priority) <a href="https://github.com/bitcoin/bitcoin/pull/6997" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6997</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330140' id='436436'>
<a class='timestamp' href='#436436'><time timestamp='2015-11-12T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-6'> GitHub55</span>&gt;
[bitcoin] laanwj opened pull request #6998: doc: Remove mention of pulltester from README.md (master...2015_11_readme_pull_pulltester) <a href="https://github.com/bitcoin/bitcoin/pull/6998" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6998</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330380' id='436437'>
<a class='timestamp' href='#436437'><time timestamp='2015-11-12T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I also think the &quot;Manual Quality Assurance (QA) Testing&quot; is very much out of date
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330500' id='436438'>
<a class='timestamp' href='#436438'><time timestamp='2015-11-12T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-3'> GitHub86</span>&gt;
[bitcoin] jonasschnelli opened pull request #6999: add (max)uploadtarget infos to getnetinfos RPC help (master...2015/11/maxuploadtarget_rpc_help) <a href="https://github.com/bitcoin/bitcoin/pull/6999" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6999</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330500' id='436439'>
<a class='timestamp' href='#436439'><time timestamp='2015-11-12T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-10'> GitHub29</span>&gt;
[bitcoin] jonasschnelli opened pull request #7000: [Qt] add shortcurts for debug-/console-window (master...2015/11/qt_shortcuts) <a href="https://github.com/bitcoin/bitcoin/pull/7000" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7000</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330500' id='436440'>
<a class='timestamp' href='#436440'><time timestamp='2015-11-12T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yeah. PR #7000!
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330560' id='436441'>
<a class='timestamp' href='#436441'><time timestamp='2015-11-12T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, where else would vRecvGetData be?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330560' id='436442'>
<a class='timestamp' href='#436442'><time timestamp='2015-11-12T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: CNodeState
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330560' id='436443'>
<a class='timestamp' href='#436443'><time timestamp='2015-11-12T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330620' id='436444'>
<a class='timestamp' href='#436444'><time timestamp='2015-11-12T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, is the distinction you&#x27;re thinking between the socket and the protocol things?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330620' id='436445'>
<a class='timestamp' href='#436445'><time timestamp='2015-11-12T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
if so maybe CBitcoinNode : CNode
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330680' id='436446'>
<a class='timestamp' href='#436446'><time timestamp='2015-11-12T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: the idea (well, my idea... i don&#x27;t know how many people share it) is that CNode should hold pointers to various module-specific state objects
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330680' id='436447'>
<a class='timestamp' href='#436447'><time timestamp='2015-11-12T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: and that when invoking code from one module, it just gets its own state objected handed to it
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330740' id='436448'>
<a class='timestamp' href='#436448'><time timestamp='2015-11-12T12:19:00Z'>12:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so ping handling can be entirely separate from block synchronization for example, and use completely independent locks, and even be totally unaware of the other&#x27;s existance
<br>
</div>

<div class='talk op-msg' data-timestamp='1447330980' id='436449'>
<a class='timestamp' href='#436449'><time timestamp='2015-11-12T12:23:00Z'>12:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sounds like a sensible way to handle a protocol with different (mostly) independent concerns
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331280' id='436450'>
<a class='timestamp' href='#436450'><time timestamp='2015-11-12T12:28:00Z'>12:28</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
yes except for the part where we decided to maintain the order of responses
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331340' id='436451'>
<a class='timestamp' href='#436451'><time timestamp='2015-11-12T12:29:00Z'>12:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
uhm, you mean that responses come in the same order as commands that trigger them?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331400' id='436452'>
<a class='timestamp' href='#436452'><time timestamp='2015-11-12T12:30:00Z'>12:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s a pretty sane assumption that holds for most network protocols AFAIK
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331400' id='436453'>
<a class='timestamp' href='#436453'><time timestamp='2015-11-12T12:30:00Z'>12:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: that&#x27;s not incompatible
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331460' id='436454'>
<a class='timestamp' href='#436454'><time timestamp='2015-11-12T12:31:00Z'>12:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: the ping module could be processing a message from node A, while the block sync logic is processing a message from node B
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331520' id='436455'>
<a class='timestamp' href='#436455'><time timestamp='2015-11-12T12:32:00Z'>12:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331580' id='436456'>
<a class='timestamp' href='#436456'><time timestamp='2015-11-12T12:33:00Z'>12:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
wumpus, there&#x27;s afaict no really good reason to enforce ordering of the responses actually
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331580' id='436457'>
<a class='timestamp' href='#436457'><time timestamp='2015-11-12T12:33:00Z'>12:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
the only thing that relies on it in anyway is the initial block download thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331640' id='436458'>
<a class='timestamp' href='#436458'><time timestamp='2015-11-12T12:34:00Z'>12:34</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
and im not sure it really does anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331640' id='436459'>
<a class='timestamp' href='#436459'><time timestamp='2015-11-12T12:34:00Z'>12:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it does
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331640' id='436460'>
<a class='timestamp' href='#436460'><time timestamp='2015-11-12T12:34:00Z'>12:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
normal block sync does too
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331640' id='436461'>
<a class='timestamp' href='#436461'><time timestamp='2015-11-12T12:34:00Z'>12:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
bip37-based downloading does too
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331640' id='436462'>
<a class='timestamp' href='#436462'><time timestamp='2015-11-12T12:34:00Z'>12:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
phantomcircuit: I don&#x27;t see a reason to make it different though
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331640' id='436463'>
<a class='timestamp' href='#436463'><time timestamp='2015-11-12T12:34:00Z'>12:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and a ton of test infrastructure relies on it
<br>
</div>

<div class='talk op-msg' data-timestamp='1447331760' id='436464'>
<a class='timestamp' href='#436464'><time timestamp='2015-11-12T12:36:00Z'>12:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
is there anything specific that could be done better if it was not the case?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447335420' id='436465'>
<a class='timestamp' href='#436465'><time timestamp='2015-11-12T13:37:00Z'>13:37</time></a>
&lt;<span class='nick nick-9'> GitHub129</span>&gt;
[bitcoin] sipa pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/5fcc14ee0562...54e8bfec8387" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/5fcc14ee0562...54e8bfec8387</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447335420' id='436466'>
<a class='timestamp' href='#436466'><time timestamp='2015-11-12T13:37:00Z'>13:37</time></a>
&lt;<span class='nick nick-9'> GitHub129</span>&gt;
bitcoin/master 06d81ad Alex Morcos: Skip BIP30 check after BIP34 activation
<br>
</div>

<div class='talk op-msg' data-timestamp='1447335420' id='436467'>
<a class='timestamp' href='#436467'><time timestamp='2015-11-12T13:37:00Z'>13:37</time></a>
&lt;<span class='nick nick-9'> GitHub129</span>&gt;
bitcoin/master 33c90cf Alex Morcos: Make skipping BIP30 check chain agnostic
<br>
</div>

<div class='talk op-msg' data-timestamp='1447335420' id='436468'>
<a class='timestamp' href='#436468'><time timestamp='2015-11-12T13:37:00Z'>13:37</time></a>
&lt;<span class='nick nick-9'> GitHub129</span>&gt;
bitcoin/master 54e8bfe Pieter Wuille: Merge pull request #6931...
<br>
</div>

<div class='talk op-msg' data-timestamp='1447335420' id='436469'>
<a class='timestamp' href='#436469'><time timestamp='2015-11-12T13:37:00Z'>13:37</time></a>
&lt;<span class='nick nick-14'> GitHub166</span>&gt;
[bitcoin] sipa closed pull request #6931: Skip BIP 30 verification where not necessary (master...skipBIP30) <a href="https://github.com/bitcoin/bitcoin/pull/6931" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6931</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337040' id='436470'>
<a class='timestamp' href='#436470'><time timestamp='2015-11-12T14:04:00Z'>14:04</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
wumpus, yes we could improve the throughput of getdata requests if they were out of order
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337100' id='436471'>
<a class='timestamp' href='#436471'><time timestamp='2015-11-12T14:05:00Z'>14:05</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
as it is there&#x27;s a large latency hit if the block requested isn&#x27;t in cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337100' id='436472'>
<a class='timestamp' href='#436472'><time timestamp='2015-11-12T14:05:00Z'>14:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
how?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337160' id='436473'>
<a class='timestamp' href='#436473'><time timestamp='2015-11-12T14:06:00Z'>14:06</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
wumpus, parallel fetch from disk
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337160' id='436474'>
<a class='timestamp' href='#436474'><time timestamp='2015-11-12T14:06:00Z'>14:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
getdata is already enough of a i/o DoS attack as it is, thank you
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337160' id='436475'>
<a class='timestamp' href='#436475'><time timestamp='2015-11-12T14:06:00Z'>14:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t think we should go write our own optimizer for disk fetches
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337160' id='436476'>
<a class='timestamp' href='#436476'><time timestamp='2015-11-12T14:06:00Z'>14:06</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
hell we could even rewrite the requests so that they hit disk sequentially
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337220' id='436477'>
<a class='timestamp' href='#436477'><time timestamp='2015-11-12T14:07:00Z'>14:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: you&#x27;d also need a reorganizer that rewrites the block files to be sequential
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337220' id='436478'>
<a class='timestamp' href='#436478'><time timestamp='2015-11-12T14:07:00Z'>14:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
please don&#x27;t go there
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337220' id='436479'>
<a class='timestamp' href='#436479'><time timestamp='2015-11-12T14:07:00Z'>14:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
TBH this doesn&#x27;t sound very reasonable nor useful, please profile first before you think about optimizing anything
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337280' id='436480'>
<a class='timestamp' href='#436480'><time timestamp='2015-11-12T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, parallel fetch isn&#x27;t anywhere near as complex as writing our own optimizer.... but it might need one if it&#x27;s not to completely break hdds
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337280' id='436481'>
<a class='timestamp' href='#436481'><time timestamp='2015-11-12T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
optimizing the disk component of getdata doesn&#x27;t rank anywhere in the &#x27;concerns that slow down bitcoin core in practice&#x27; I&#x27;m sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337400' id='436482'>
<a class='timestamp' href='#436482'><time timestamp='2015-11-12T14:10:00Z'>14:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: so if that&#x27;s really a concern at a time when the protocol too strongly relies on the ordering to meaningfully change it, we can always add a pargetdata which allows answers in any order. fixed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337400' id='436483'>
<a class='timestamp' href='#436483'><time timestamp='2015-11-12T14:10:00Z'>14:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
we already do parallel getdata on different nodes, that&#x27;s even better paralleism thanks to sipa :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337580' id='436484'>
<a class='timestamp' href='#436484'><time timestamp='2015-11-12T14:13:00Z'>14:13</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
wumpus, it basically only effects people like me syncing over gigabit lans from systems with the entire thing in page cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337580' id='436485'>
<a class='timestamp' href='#436485'><time timestamp='2015-11-12T14:13:00Z'>14:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
... right
<br>
</div>

<div class='talk op-msg' data-timestamp='1447337580' id='436486'>
<a class='timestamp' href='#436486'><time timestamp='2015-11-12T14:13:00Z'>14:13</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
increasing the fetch depth to 100 mostly fixes it
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338480' id='436487'>
<a class='timestamp' href='#436487'><time timestamp='2015-11-12T14:28:00Z'>14:28</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: ha, i was chasing my own tail on that insecure_rand.  Ok so should I fix the extra 30 bits of randomness or take our chances on only 32.  I vote take our chances.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338540' id='436488'>
<a class='timestamp' href='#436488'><time timestamp='2015-11-12T14:29:00Z'>14:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: will the test fail if it actually is identical?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338600' id='436489'>
<a class='timestamp' href='#436489'><time timestamp='2015-11-12T14:30:00Z'>14:30</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i was going to consider testing that.  i was thinking that it might allow you to spend a duplicate coinbase which has already been spent
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338660' id='436490'>
<a class='timestamp' href='#436490'><time timestamp='2015-11-12T14:31:00Z'>14:31</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but maybe even thats ok, unless you randomly spend the second copy in exactly the same way.  in which case it would break
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338660' id='436491'>
<a class='timestamp' href='#436491'><time timestamp='2015-11-12T14:31:00Z'>14:31</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338720' id='436492'>
<a class='timestamp' href='#436492'><time timestamp='2015-11-12T14:32:00Z'>14:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: hmm, your cache will be very slow
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338720' id='436493'>
<a class='timestamp' href='#436493'><time timestamp='2015-11-12T14:32:00Z'>14:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
eh, small
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338720' id='436494'>
<a class='timestamp' href='#436494'><time timestamp='2015-11-12T14:32:00Z'>14:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it is slow, but what do you mean small?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338780' id='436495'>
<a class='timestamp' href='#436495'><time timestamp='2015-11-12T14:33:00Z'>14:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
eh, for some reason i was assuming that normal transactions decreased the number of entries... but they create a new output too of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338780' id='436496'>
<a class='timestamp' href='#436496'><time timestamp='2015-11-12T14:33:00Z'>14:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it about triples the time of that test from 300ms to 1sec
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338840' id='436497'>
<a class='timestamp' href='#436497'><time timestamp='2015-11-12T14:34:00Z'>14:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i guess you grow to around 4000 entries
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338840' id='436498'>
<a class='timestamp' href='#436498'><time timestamp='2015-11-12T14:34:00Z'>14:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah so on a typical test you generate around 4000 coinbases about 40 of which are duplicate and you end up towards the end of the test, failing on about 40 of them (if you have the broken fix)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338840' id='436499'>
<a class='timestamp' href='#436499'><time timestamp='2015-11-12T14:34:00Z'>14:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
that should be right
<br>
</div>

<div class='talk op-msg' data-timestamp='1447338900' id='436500'>
<a class='timestamp' href='#436500'><time timestamp='2015-11-12T14:35:00Z'>14:35</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sorry around 400 of which are duplicate
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339020' id='436501'>
<a class='timestamp' href='#436501'><time timestamp='2015-11-12T14:37:00Z'>14:37</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
b/c you only fail on the duplicate if it happens to get spent before its flushed.   so i didn&#x27;t check for coverage of that, since its a bit tricky, but that seemed a high enough failure rate that slight tweaks to the test shouldn&#x27;t affect it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339080' id='436502'>
<a class='timestamp' href='#436502'><time timestamp='2015-11-12T14:38:00Z'>14:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you have around 1.7% chance to hit a duplicate during a test run :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339080' id='436503'>
<a class='timestamp' href='#436503'><time timestamp='2015-11-12T14:38:00Z'>14:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, wait, that&#x27;s assuming there are only coinbases
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339260' id='436504'>
<a class='timestamp' href='#436504'><time timestamp='2015-11-12T14:41:00Z'>14:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
around 0.2% chance per run; i think you need 64-bit amounts :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339260' id='436505'>
<a class='timestamp' href='#436505'><time timestamp='2015-11-12T14:41:00Z'>14:41</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
how did you get 1.7%?  does that sound really high?  do you have to have the same random 32 bit number in 4000 tries (or 40k for the calculation you did)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339320' id='436506'>
<a class='timestamp' href='#436506'><time timestamp='2015-11-12T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i calculated 1 - multiply(1 - x/2^32, x=1..4000)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339320' id='436507'>
<a class='timestamp' href='#436507'><time timestamp='2015-11-12T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s 0.2%
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339320' id='436508'>
<a class='timestamp' href='#436508'><time timestamp='2015-11-12T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
oh silly me
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339380' id='436509'>
<a class='timestamp' href='#436509'><time timestamp='2015-11-12T14:43:00Z'>14:43</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yes i calculated that wrong
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339440' id='436510'>
<a class='timestamp' href='#436510'><time timestamp='2015-11-12T14:44:00Z'>14:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
ok i&#x27;ll make it a 64-bit number with the cast. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339440' id='436511'>
<a class='timestamp' href='#436511'><time timestamp='2015-11-12T14:44:00Z'>14:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
of course, you could just use the iteration counter instead :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339500' id='436512'>
<a class='timestamp' href='#436512'><time timestamp='2015-11-12T14:45:00Z'>14:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
good even easier
<br>
</div>

<div class='talk op-msg' data-timestamp='1447339500' id='436513'>
<a class='timestamp' href='#436513'><time timestamp='2015-11-12T14:45:00Z'>14:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
in a car now..  i&#x27;ll push it in a bit
<br>
</div>

<div class='talk op-msg' data-timestamp='1447340280' id='436514'>
<a class='timestamp' href='#436514'><time timestamp='2015-11-12T14:58:00Z'>14:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
ok lots of traffic, squashed the fix in.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447340340' id='436515'>
<a class='timestamp' href='#436515'><time timestamp='2015-11-12T14:59:00Z'>14:59</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Hopefully not while driving :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447340340' id='436516'>
<a class='timestamp' href='#436516'><time timestamp='2015-11-12T14:59:00Z'>14:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
heh, no...
<br>
</div>

<div class='talk op-msg' data-timestamp='1447340400' id='436517'>
<a class='timestamp' href='#436517'><time timestamp='2015-11-12T15:00:00Z'>15:00</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
heh
<br>
</div>

<div class='talk op-msg' data-timestamp='1447340400' id='436518'>
<a class='timestamp' href='#436518'><time timestamp='2015-11-12T15:00:00Z'>15:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Hopefully not while trafficking
<br>
</div>

<div class='talk op-msg' data-timestamp='1447340580' id='436519'>
<a class='timestamp' href='#436519'><time timestamp='2015-11-12T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
with Uber &amp; self driving cars, non stop hacking is possible :)  Ah, the future.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447340580' id='436520'>
<a class='timestamp' href='#436520'><time timestamp='2015-11-12T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Where is my hoverboard?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447341900' id='436521'>
<a class='timestamp' href='#436521'><time timestamp='2015-11-12T15:25:00Z'>15:25</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
sipa, <a href="http://hendohover.com" class="link" target="_blank">http://hendohover.com</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447341960' id='436522'>
<a class='timestamp' href='#436522'><time timestamp='2015-11-12T15:26:00Z'>15:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jgarzik: ha, yes, i&#x27;ve heard about that
<br>
</div>

<div class='talk op-msg' data-timestamp='1447342020' id='436523'>
<a class='timestamp' href='#436523'><time timestamp='2015-11-12T15:27:00Z'>15:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
hah
<br>
</div>

<div class='talk op-msg' data-timestamp='1447346280' id='436524'>
<a class='timestamp' href='#436524'><time timestamp='2015-11-12T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-12'> GitHub77</span>&gt;
[bitcoin] laanwj pushed 4 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/54e8bfec8387...eb6172a8ca7e" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/54e8bfec8387...eb6172a8ca7e</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447346280' id='436525'>
<a class='timestamp' href='#436525'><time timestamp='2015-11-12T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-12'> GitHub77</span>&gt;
bitcoin/master 830e3f3 Pieter Wuille: Make sigcache faster and more efficient
<br>
</div>

<div class='talk op-msg' data-timestamp='1447346280' id='436526'>
<a class='timestamp' href='#436526'><time timestamp='2015-11-12T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-12'> GitHub77</span>&gt;
bitcoin/master 0b9e9dc Pieter Wuille: Evict sigcache entries that are seen in a block
<br>
</div>

<div class='talk op-msg' data-timestamp='1447346280' id='436527'>
<a class='timestamp' href='#436527'><time timestamp='2015-11-12T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-12'> GitHub77</span>&gt;
bitcoin/master 69d373f Pieter Wuille: Don&#x27;t wipe the sigcache in TestBlockValidity
<br>
</div>

<div class='talk op-msg' data-timestamp='1447346280' id='436528'>
<a class='timestamp' href='#436528'><time timestamp='2015-11-12T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-9'> GitHub101</span>&gt;
[bitcoin] laanwj closed pull request #6918: Make sigcache faster, more efficient, larger (master...smallsigcache) <a href="https://github.com/bitcoin/bitcoin/pull/6918" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6918</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447353180' id='436529'>
<a class='timestamp' href='#436529'><time timestamp='2015-11-12T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-13'> GitHub51</span>&gt;
[bitcoin] laanwj pushed 6 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/eb6172a8ca7e...bd629d77edbe" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/eb6172a8ca7e...bd629d77edbe</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447353180' id='436530'>
<a class='timestamp' href='#436530'><time timestamp='2015-11-12T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-7'> GitHub33</span>&gt;
[bitcoin] laanwj closed pull request #6639: net: Automatically create hidden service, listen on Tor (master...2015_08_tor_hs_v2) <a href="https://github.com/bitcoin/bitcoin/pull/6639" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6639</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447353180' id='436531'>
<a class='timestamp' href='#436531'><time timestamp='2015-11-12T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-13'> GitHub51</span>&gt;
bitcoin/master 8f4e67f Wladimir J. van der Laan: net: Automatically create hidden service, listen on Tor...
<br>
</div>

<div class='talk op-msg' data-timestamp='1447353180' id='436532'>
<a class='timestamp' href='#436532'><time timestamp='2015-11-12T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-13'> GitHub51</span>&gt;
bitcoin/master 2f796e5 Peter Todd: Better error message if Tor version too old
<br>
</div>

<div class='talk op-msg' data-timestamp='1447353180' id='436533'>
<a class='timestamp' href='#436533'><time timestamp='2015-11-12T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-13'> GitHub51</span>&gt;
bitcoin/master 09c1ae1 Wladimir J. van der Laan: torcontrol improvements and fixes...
<br>
</div>

<div class='talk op-msg' data-timestamp='1447354920' id='436534'>
<a class='timestamp' href='#436534'><time timestamp='2015-11-12T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-8'> jcorgan</span>&gt;
wow, i missed this PR entirely.  what a great idea, glad it is merged.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447355520' id='436535'>
<a class='timestamp' href='#436535'><time timestamp='2015-11-12T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
yes, good to see this in 0.12!
<br>
</div>

<div class='talk op-msg' data-timestamp='1447356900' id='436536'>
<a class='timestamp' href='#436536'><time timestamp='2015-11-12T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-16'> GitHub56</span>&gt;
[bitcoin] sdaftuar closed pull request #6992: [WIP] [Mempool] Add space for priority transactions (master...add-priority-to-mempool) <a href="https://github.com/bitcoin/bitcoin/pull/6992" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6992</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358220' id='436537'>
<a class='timestamp' href='#436537'><time timestamp='2015-11-12T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
morcos: ok, so back to your stuff? :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358280' id='436538'>
<a class='timestamp' href='#436538'><time timestamp='2015-11-12T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Luke-Jr: on priority. the exact current behavior requires walking all inputs for all transactioin in the mempool on every CNB to update priorities. With large mempools this is an enormous amount of time, and we cannot continue doing this.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358280' id='436539'>
<a class='timestamp' href='#436539'><time timestamp='2015-11-12T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
morcos: can you make it so the accurate priority gets used with a policy option miners can enable? that makes current policy possible, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358280' id='436540'>
<a class='timestamp' href='#436540'><time timestamp='2015-11-12T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
There are multiple alternatives but most result in lots of software complexity, which we also probably don&#x27;t want.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358280' id='436541'>
<a class='timestamp' href='#436541'><time timestamp='2015-11-12T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Hmm.. I think that would be possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358280' id='436542'>
<a class='timestamp' href='#436542'><time timestamp='2015-11-12T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
gmaxwell: it can be disabled by default
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358280' id='436543'>
<a class='timestamp' href='#436543'><time timestamp='2015-11-12T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
The original version of my pull did the expensive calculation
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358340' id='436544'>
<a class='timestamp' href='#436544'><time timestamp='2015-11-12T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it&#x27;ll make the code slightly uglier casing that out
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358340' id='436545'>
<a class='timestamp' href='#436545'><time timestamp='2015-11-12T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Luke-Jr: I think miners would be stupid to enable something that makes CNB 10x + slower, and we&#x27;d be stupid to offer it since slow CNB means more &#x27;spv mining&#x27; and other bad effects.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358340' id='436546'>
<a class='timestamp' href='#436546'><time timestamp='2015-11-12T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but yes, i agree with that concern
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358340' id='436547'>
<a class='timestamp' href='#436547'><time timestamp='2015-11-12T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
what&#x27;s the motivation to keep the current version of priority rather than starting priority as the metric?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358340' id='436548'>
<a class='timestamp' href='#436548'><time timestamp='2015-11-12T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
gmaxwell: CNB is not time-critical with Eloipool, and doesn&#x27;t imply SPV mining
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358340' id='436549'>
<a class='timestamp' href='#436549'><time timestamp='2015-11-12T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I wouldn&#x27;t <u>_oppose_</u> an option, default off, except on the basis of carrying around code, and lack of testing (but I assume you&#x27;ll test)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358340' id='436550'>
<a class='timestamp' href='#436550'><time timestamp='2015-11-12T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Luke-Jr: it may be something you can just easily patch in yourself 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358400' id='436551'>
<a class='timestamp' href='#436551'><time timestamp='2015-11-12T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
sdaftuar: I think for most uses of priority, updating every time shouldn&#x27;t make much of a difference - we&#x27;re talking about old inputs after all
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358400' id='436552'>
<a class='timestamp' href='#436552'><time timestamp='2015-11-12T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
sdaftuar: whats the difference betweek 1 month and 1 month + 1 hour?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358400' id='436553'>
<a class='timestamp' href='#436553'><time timestamp='2015-11-12T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
I suggest we have it in Core for 0.12, and try to optimise (or remove) by 0.13
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358400' id='436554'>
<a class='timestamp' href='#436554'><time timestamp='2015-11-12T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: I think starting priority is a pretty poor approximation, though on the basis that I wouldn&#x27;t be too opposed to ditching priority entirely, using a poor approximation isn&#x27;t so bad. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358400' id='436555'>
<a class='timestamp' href='#436555'><time timestamp='2015-11-12T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
it just seems pretty arbitrary to me to decide to age inputs rather than use the age when relayed to you
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358460' id='436556'>
<a class='timestamp' href='#436556'><time timestamp='2015-11-12T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so given two arbitrary calculations, might as well do the faster one
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358460' id='436557'>
<a class='timestamp' href='#436557'><time timestamp='2015-11-12T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: age inputs has a property that the tx shouldn&#x27;t hang around forever, but will actually bubble up and get mined at some point.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358460' id='436558'>
<a class='timestamp' href='#436558'><time timestamp='2015-11-12T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
sdaftuar: well, aging inputs properly may in some cases be necessary for txns to confirm ever
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358460' id='436559'>
<a class='timestamp' href='#436559'><time timestamp='2015-11-12T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
well we&#x27;re about to deploy RBF and expiry
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358460' id='436560'>
<a class='timestamp' href='#436560'><time timestamp='2015-11-12T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
the only time this matters is very high value outputs which we&#x27;re expecting to accumulate priority quickly, and why incentivise people to put everything in on etxout? can have bad privacy implications
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358520' id='436561'>
<a class='timestamp' href='#436561'><time timestamp='2015-11-12T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
sdaftuar: as optional policies
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358520' id='436562'>
<a class='timestamp' href='#436562'><time timestamp='2015-11-12T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
Luke-Jr, then write a background thread to update priority
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358520' id='436563'>
<a class='timestamp' href='#436563'><time timestamp='2015-11-12T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
phantomcircuit: +1
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358520' id='436564'>
<a class='timestamp' href='#436564'><time timestamp='2015-11-12T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Luke-Jr: I&#x27;ll see if I can whip up a dependent PR that adds back in the accurate calculation with an option, that could be included.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358520' id='436565'>
<a class='timestamp' href='#436565'><time timestamp='2015-11-12T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
phantomcircuit: that would be one way to optimise it, but I hope to have something better for 0.13 anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358580' id='436566'>
<a class='timestamp' href='#436566'><time timestamp='2015-11-12T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I do agree if the functionality was retained update in the background would be prudent.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358580' id='436567'>
<a class='timestamp' href='#436567'><time timestamp='2015-11-12T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
morcos: well, I don&#x27;t want to merge the existing PR without that included, so might as well put it in the same PR..
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358580' id='436568'>
<a class='timestamp' href='#436568'><time timestamp='2015-11-12T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
If you want to properly calculate priority, you need to do it dynamicalyl as in 6357 otherwise you destroy your UTXO cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358580' id='436569'>
<a class='timestamp' href='#436569'><time timestamp='2015-11-12T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
6357 is strictly better than that
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358580' id='436570'>
<a class='timestamp' href='#436570'><time timestamp='2015-11-12T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Luke-Jr: yes but that may not be the prevailing view.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358580' id='436571'>
<a class='timestamp' href='#436571'><time timestamp='2015-11-12T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Well lets argue about it when we see what it looks like anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358640' id='436572'>
<a class='timestamp' href='#436572'><time timestamp='2015-11-12T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
Luke-Jr, the priority calculation as it existed before mempool limiting cannot be reasonably calculated in realtime, the only way to do it is as a background thread
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358640' id='436573'>
<a class='timestamp' href='#436573'><time timestamp='2015-11-12T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
 * [new tag]         v0.11.2 -&gt; v0.11.2
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358640' id='436574'>
<a class='timestamp' href='#436574'><time timestamp='2015-11-12T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
wumpus: +1
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358640' id='436575'>
<a class='timestamp' href='#436575'><time timestamp='2015-11-12T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
First I have to fix the existing pull, it uses the wrong calculation now anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358640' id='436576'>
<a class='timestamp' href='#436576'><time timestamp='2015-11-12T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
wumpus: or really, -rc
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358640' id='436577'>
<a class='timestamp' href='#436577'><time timestamp='2015-11-12T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
petertodd: you missed the rc
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358640' id='436578'>
<a class='timestamp' href='#436578'><time timestamp='2015-11-12T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
phantomcircuit: no, background thread is bad b/c of cache.  see 6357
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358640' id='436579'>
<a class='timestamp' href='#436579'><time timestamp='2015-11-12T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
Luke-Jr: lol, I mean, we&#x27;re taking the rc off of v0.11.2rc1 :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358700' id='436580'>
<a class='timestamp' href='#436580'><time timestamp='2015-11-12T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
o
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358700' id='436581'>
<a class='timestamp' href='#436581'><time timestamp='2015-11-12T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
morcos, a background thread is equally as bad as any other way of doing it in that regard
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358760' id='436582'>
<a class='timestamp' href='#436582'><time timestamp='2015-11-12T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
6357 does not destroy your cache, and is way less computational complexity
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358760' id='436583'>
<a class='timestamp' href='#436583'><time timestamp='2015-11-12T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
as far as this priority discussion, I think people are being far too dismissive about priority. In particular, this idea of fee competition vs dos attacks is a situation where the defender has no advantage on an attacker at all... they spend the same. Having a tie breaker that rewards coins that haven&#x27;t recently moved is, I think, an elegent way to create a gap so that attackers don&#x27;t merely nee
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358760' id='436584'>
<a class='timestamp' href='#436584'><time timestamp='2015-11-12T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
d to pay market rate but slightly above.  And impact to miner income can be made negligible. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358820' id='436585'>
<a class='timestamp' href='#436585'><time timestamp='2015-11-12T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: that argument doesn&#x27;t make sense to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358820' id='436586'>
<a class='timestamp' href='#436586'><time timestamp='2015-11-12T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think the HOV/fast lane arguement makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358820' id='436587'>
<a class='timestamp' href='#436587'><time timestamp='2015-11-12T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but to have priority boost fee doesn&#x27;t make sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358880' id='436588'>
<a class='timestamp' href='#436588'><time timestamp='2015-11-12T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
gmaxwell: why do we assume the defender always has more old coins than the attacker?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358880' id='436589'>
<a class='timestamp' href='#436589'><time timestamp='2015-11-12T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so it boosts it by delta.  then attackers just have to pay market rate + delta, who cares, unless delta is large, in which case then you have prioirty txs crowding out fee paying txs and hurting miners profits
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358880' id='436590'>
<a class='timestamp' href='#436590'><time timestamp='2015-11-12T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: right now the attacker need only bid episilon more than market rate to replace the honest users at market rate in the mempool.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358880' id='436591'>
<a class='timestamp' href='#436591'><time timestamp='2015-11-12T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
petertodd: it&#x27;s a hurestic, and it maps to the actual attack pattern in that by their nature an attack requires making lots of transactions. Honest use may or may not have that property; but it remains a distinguisher, if not a super strong one.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358880' id='436592'>
<a class='timestamp' href='#436592'><time timestamp='2015-11-12T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
its impossible to pick the conversion so that it accomplishes exactly your goal.. unless you reserve only a certain amount of space for priority, which is what the existing code does
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358940' id='436593'>
<a class='timestamp' href='#436593'><time timestamp='2015-11-12T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
e.g. IIRC in lightning you can be in a situation where you need to get a recently mined tx spent, and the attacker may be trying to flood mempools to keep you from doing that
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358940' id='436594'>
<a class='timestamp' href='#436594'><time timestamp='2015-11-12T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
the existing code makes sense for that purpose, i agree.  but combining to just one bucket filled on a combined metric does not
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358940' id='436595'>
<a class='timestamp' href='#436595'><time timestamp='2015-11-12T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
petertodd: I&#x27;m sure there are lightning-optimised policies that are possible?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358940' id='436596'>
<a class='timestamp' href='#436596'><time timestamp='2015-11-12T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
morcos: and <b>*that*</b> can be easily done with two separate mempools, each separately limited, which keeps the codebase simple
<br>
</div>

<div class='talk op-msg' data-timestamp='1447358940' id='436597'>
<a class='timestamp' href='#436597'><time timestamp='2015-11-12T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
Luke-Jr: better for privacy if you can&#x27;t distingish lightning txs from othre txs
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359000' id='436598'>
<a class='timestamp' href='#436598'><time timestamp='2015-11-12T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
â€¦
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359000' id='436599'>
<a class='timestamp' href='#436599'><time timestamp='2015-11-12T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: Okay, you&#x27;re right there. I was thinking that even having the attacker have to pay the extra delta is a benefit, but you&#x27;re right that its probably negligible.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359000' id='436600'>
<a class='timestamp' href='#436600'><time timestamp='2015-11-12T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
but you can
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359060' id='436601'>
<a class='timestamp' href='#436601'><time timestamp='2015-11-12T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
morcos, 6357 is less computationally complex, but significantly more complex code
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359060' id='436602'>
<a class='timestamp' href='#436602'><time timestamp='2015-11-12T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and another: * [new tag]         v0.10.4 -&gt; v0.10.4
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359060' id='436603'>
<a class='timestamp' href='#436603'><time timestamp='2015-11-12T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
phantomcircuit: ok that i will agree with!
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359060' id='436604'>
<a class='timestamp' href='#436604'><time timestamp='2015-11-12T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The two pools approach can also resolve the repricing cost issue, I think, if transactions cannot move back from the feerate pool to the priority pool, and if the priority pool is small.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359060' id='436605'>
<a class='timestamp' href='#436605'><time timestamp='2015-11-12T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sdaftuar&#x27;s pull was 2 pools 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359120' id='436606'>
<a class='timestamp' href='#436606'><time timestamp='2015-11-12T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
maintained in the same structure
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359120' id='436607'>
<a class='timestamp' href='#436607'><time timestamp='2015-11-12T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
morcos, and it&#x27;s a bunch of caching of values which is genuinely hard to get right
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359120' id='436608'>
<a class='timestamp' href='#436608'><time timestamp='2015-11-12T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(as you could limit repricing to the priority pool if the above assumptions are kept)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359180' id='436609'>
<a class='timestamp' href='#436609'><time timestamp='2015-11-12T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
maybe I just need to come around to bluematt&#x27;s thinking that priority is not worth maintaining...
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359180' id='436610'>
<a class='timestamp' href='#436610'><time timestamp='2015-11-12T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-3'> dgenr8</span>&gt;
different-sized mempools mean that attacker doesn&#x27;t have a perfectly defined function to erase a tx with a given fee
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359180' id='436611'>
<a class='timestamp' href='#436611'><time timestamp='2015-11-12T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: i mostly agree, i wanted to keep priority, but it is a lot of complication, and maybe its better to realize that if we can come up with some incentive compatible metric like priority
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359180' id='436612'>
<a class='timestamp' href='#436612'><time timestamp='2015-11-12T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
then we can just add that back in in a clean way
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359180' id='436613'>
<a class='timestamp' href='#436613'><time timestamp='2015-11-12T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
we dont&#x27; have to permanently shut the door on a metric like this
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359240' id='436614'>
<a class='timestamp' href='#436614'><time timestamp='2015-11-12T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-3'> dgenr8</span>&gt;
also, attacker has to erase 299M of transactions to affect the lowest-feerate tx that&#x27;s going into the next block
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359240' id='436615'>
<a class='timestamp' href='#436615'><time timestamp='2015-11-12T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-3'> dgenr8</span>&gt;
at default mempool setting
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359240' id='436616'>
<a class='timestamp' href='#436616'><time timestamp='2015-11-12T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
dgenr8: highest
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359300' id='436617'>
<a class='timestamp' href='#436617'><time timestamp='2015-11-12T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-3'> dgenr8</span>&gt;
300M to affect highest, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359360' id='436618'>
<a class='timestamp' href='#436618'><time timestamp='2015-11-12T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: yes, if block costing is changed, then it becomes incentive compatible and works better; though I am really really not fond of multi-metric block costs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359360' id='436619'>
<a class='timestamp' href='#436619'><time timestamp='2015-11-12T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but block costs are inherently multi-metric with sig-op limit
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359360' id='436620'>
<a class='timestamp' href='#436620'><time timestamp='2015-11-12T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
you could buy extra block size with older age coins even
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359420' id='436621'>
<a class='timestamp' href='#436621'><time timestamp='2015-11-12T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
morcos, the sigop/byte limit is so high that no legitimate user is going to hit it
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359420' id='436622'>
<a class='timestamp' href='#436622'><time timestamp='2015-11-12T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
removing policy actually increases maintenance costs
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359420' id='436623'>
<a class='timestamp' href='#436623'><time timestamp='2015-11-12T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
dgenr8: oh, i see what you&#x27;re saying; in theory, yes, but in practice chains of transactions are harder to kick out and tend to linger, making it more spread out
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359420' id='436624'>
<a class='timestamp' href='#436624'><time timestamp='2015-11-12T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: yes, and I want that to go away (it&#x27;s busted anyways. :) )  fortunately the sigop limit is high enough that under ordinary use it&#x27;s never hit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359420' id='436625'>
<a class='timestamp' href='#436625'><time timestamp='2015-11-12T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
you basically need to have a transaction that consists of OP_DUP OP_DUP OP_CHECKSIG  repeated 100+ times to hit the limit
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359420' id='436626'>
<a class='timestamp' href='#436626'><time timestamp='2015-11-12T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: ha, but you&#x27;re the one tryign to worry about hitting it now b/c of the flood
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359480' id='436627'>
<a class='timestamp' href='#436627'><time timestamp='2015-11-12T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if you dont&#x27; have multi metrics, then you have conversion factors between metrics which are hard to get right
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359480' id='436628'>
<a class='timestamp' href='#436628'><time timestamp='2015-11-12T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea I know, I know, short term effects because of people specifically trying to exploit it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359480' id='436629'>
<a class='timestamp' href='#436629'><time timestamp='2015-11-12T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I don&#x27;t know if for incentive reasons it matters if they&#x27;re &quot;right&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359480' id='436630'>
<a class='timestamp' href='#436630'><time timestamp='2015-11-12T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in that I think mostly the sign matters.  &quot;oh I should prefer to make transactions that do X because it&#x27;ll cost less&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359480' id='436631'>
<a class='timestamp' href='#436631'><time timestamp='2015-11-12T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
or at least only matters to within an order of magnitude.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359480' id='436632'>
<a class='timestamp' href='#436632'><time timestamp='2015-11-12T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: fair enough, but i&#x27;d say heuristics for optimizing multi metrics are also good enough for mining 
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359540' id='436633'>
<a class='timestamp' href='#436633'><time timestamp='2015-11-12T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: but will anyone ever implement them?  Multiple limits also complicate the implementation of fraud proofs, making it less likely that we&#x27;ll ever have them.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359600' id='436634'>
<a class='timestamp' href='#436634'><time timestamp='2015-11-12T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sure i will!  but fraud proofs, hmm...  because you ahve to be able to prove any one of those things?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359600' id='436635'>
<a class='timestamp' href='#436635'><time timestamp='2015-11-12T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i don&#x27;t understand enough about how fraud proofs work
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359660' id='436636'>
<a class='timestamp' href='#436636'><time timestamp='2015-11-12T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, and efficiently proving a global limit requires commiting to a tree over its computation.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359720' id='436637'>
<a class='timestamp' href='#436637'><time timestamp='2015-11-12T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-12'> * michagogo</span>&gt;
has his gitian-build script already running
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359780' id='436638'>
<a class='timestamp' href='#436638'><time timestamp='2015-11-12T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
E.g. you commit to the value of of each input and output, and hashtree it, and in the interior nodes include the sum fees of the children. Now you can make an efficient proof that a block creates inflation.   This can be done for any limit, e.g. sigops, whatever, but the interior nodes in the hashtree have to track each limit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359840' id='436639'>
<a class='timestamp' href='#436639'><time timestamp='2015-11-12T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I worry less that you won&#x27;t implement it, and more that miners won&#x27;t bother running code that almost never fires. &quot;Morcos solved it&quot; is a stable solution only if we assume people are running your code, which they might not for smarter or dumber reasons.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447359960' id='436640'>
<a class='timestamp' href='#436640'><time timestamp='2015-11-12T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: also I think seperate limits are somewhat backwards in the sense that what we really seek to limit is &quot;cost&quot;; and turning cost into seperate limits is something we do because we don&#x27;t know how to weigh for cost, but we do know what demand looks like, and demand uses a little of each dimension.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360020' id='436641'>
<a class='timestamp' href='#436641'><time timestamp='2015-11-12T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case the issue with fraud proofs is mostly just making things even more complex reduces the odds that they get correctly implemented.  Mempool hurestics are one thing-- they&#x27;re not consensus critical, but limits are.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360020' id='436642'>
<a class='timestamp' href='#436642'><time timestamp='2015-11-12T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-12'> wangchun</span>&gt;
Luke-Jr: We have priority size set to 0 for maybe one year. But I have blockminsize set to 250 KB.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360080' id='436643'>
<a class='timestamp' href='#436643'><time timestamp='2015-11-12T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wangchun: good to know!
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360080' id='436644'>
<a class='timestamp' href='#436644'><time timestamp='2015-11-12T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Also, I found out I&#x27;m a bit of an idiot. The issue I was having where as soon as I upgraded the LXC base, I had to keep it updated or the build would fail?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360080' id='436645'>
<a class='timestamp' href='#436645'><time timestamp='2015-11-12T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
wangchun: let&#x27;s chat in #bitcoin since there is conversation here already
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360080' id='436646'>
<a class='timestamp' href='#436646'><time timestamp='2015-11-12T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
The fix is just to on-target -u root rm /var/cache/gitian/initial-upgrade
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360140' id='436647'>
<a class='timestamp' href='#436647'><time timestamp='2015-11-12T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
(on the target, before copying it back over the base)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360140' id='436648'>
<a class='timestamp' href='#436648'><time timestamp='2015-11-12T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
(That&#x27;s just a flag file that the upgrade script touches)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360200' id='436649'>
<a class='timestamp' href='#436649'><time timestamp='2015-11-12T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
fraud proofs require each unique validation rule has separate fraud proof implementation to check <a href="https://bitcointalk.org/index.php?topic=1103281.msg11743498#msg11743498" class="link" target="_blank">https://bitcointalk.org/index.php?topic=1103281.msg11743498#msg11743498</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360260' id='436650'>
<a class='timestamp' href='#436650'><time timestamp='2015-11-12T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: ok, i&#x27;m not against weighted cost, i just worry about getting the weights right..  especially if those are consensus rules!
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360260' id='436651'>
<a class='timestamp' href='#436651'><time timestamp='2015-11-12T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
giving #6771 (chain limits) one last test run
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360260' id='436652'>
<a class='timestamp' href='#436652'><time timestamp='2015-11-12T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
kanzure: that link is not correct in the details fwiw.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360260' id='436653'>
<a class='timestamp' href='#436653'><time timestamp='2015-11-12T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Hm, weird lines from configure:
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360260' id='436654'>
<a class='timestamp' href='#436654'><time timestamp='2015-11-12T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
quick overview of wrongness?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360320' id='436655'>
<a class='timestamp' href='#436655'><time timestamp='2015-11-12T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(like saying utxo commitments are required, they&#x27;re not)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360320' id='436656'>
<a class='timestamp' href='#436656'><time timestamp='2015-11-12T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Checking for QT... no
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360320' id='436657'>
<a class='timestamp' href='#436657'><time timestamp='2015-11-12T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Checking for QT... yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360320' id='436658'>
<a class='timestamp' href='#436658'><time timestamp='2015-11-12T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
okay, i&#x27;ll keep that in mind.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360320' id='436659'>
<a class='timestamp' href='#436659'><time timestamp='2015-11-12T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
One right after the other
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360320' id='436660'>
<a class='timestamp' href='#436660'><time timestamp='2015-11-12T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: until a few days ago i would have claimed that utxo commitments are required too :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360380' id='436661'>
<a class='timestamp' href='#436661'><time timestamp='2015-11-12T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: pshaw, I&#x27;ve known they were for like ... months now. You need to spend more time in my head. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360380' id='436662'>
<a class='timestamp' href='#436662'><time timestamp='2015-11-12T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<b>*walks back slowly*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360380' id='436663'>
<a class='timestamp' href='#436663'><time timestamp='2015-11-12T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
why few days ago?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360440' id='436664'>
<a class='timestamp' href='#436664'><time timestamp='2015-11-12T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
kanzure: because that&#x27;s when gmaxwell told me how to do it without commitments in a PM :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360440' id='436665'>
<a class='timestamp' href='#436665'><time timestamp='2015-11-12T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
PMs don&#x27;t count
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360440' id='436666'>
<a class='timestamp' href='#436666'><time timestamp='2015-11-12T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
that&#x27;s cheating
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360440' id='436667'>
<a class='timestamp' href='#436667'><time timestamp='2015-11-12T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it&#x27;s been discussed in #bitcoin-wizards.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360440' id='436668'>
<a class='timestamp' href='#436668'><time timestamp='2015-11-12T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Oh.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360440' id='436669'>
<a class='timestamp' href='#436669'><time timestamp='2015-11-12T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
ah okay
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360440' id='436670'>
<a class='timestamp' href='#436670'><time timestamp='2015-11-12T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
great
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360500' id='436671'>
<a class='timestamp' href='#436671'><time timestamp='2015-11-12T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case, you do them without a utxo commitment by instead commiting to the input block and offset that the input came from.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360500' id='436672'>
<a class='timestamp' href='#436672'><time timestamp='2015-11-12T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
then fraud can be proven by simply showing whatever is at that location, if its not the thing its supposted to be.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360680' id='436673'>
<a class='timestamp' href='#436673'><time timestamp='2015-11-12T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I mean, I&#x27;m probably at fault for making people think that its the only way to get a fraud proof for spending non-existing coins, since in the very first writeup I suggest that <a href="https://en.bitcoin.it/wiki/User:Gmaxwell/features#Proofs" class="link" target="_blank">https://en.bitcoin.it/wiki/User:Gmaxwell/features#Proofs</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360680' id='436674'>
<a class='timestamp' href='#436674'><time timestamp='2015-11-12T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but always things like that should be considered necessary, back then I didn&#x27;t give it more than a moment&#x27;s thought.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360680' id='436675'>
<a class='timestamp' href='#436675'><time timestamp='2015-11-12T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
er considered sufficient not necessary.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360800' id='436676'>
<a class='timestamp' href='#436676'><time timestamp='2015-11-12T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
ok, just posted follow-up to that thread linking to this explanation.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447360920' id='436677'>
<a class='timestamp' href='#436677'><time timestamp='2015-11-12T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(and obviously, spends of already spent coins proven by showing the other spend)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447361280' id='436678'>
<a class='timestamp' href='#436678'><time timestamp='2015-11-12T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
morcos, i dont really see the point of using a complex cost metric today as the principle limiting factor is bandwidth (and presumably will remain that way for many years)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447361340' id='436679'>
<a class='timestamp' href='#436679'><time timestamp='2015-11-12T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
if i was building a cost function is would be weighted to size so heavily as to be redundant
<br>
</div>

<div class='talk op-msg' data-timestamp='1447361400' id='436680'>
<a class='timestamp' href='#436680'><time timestamp='2015-11-12T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
morcos, currently waiting on travis for #6771, then go for launch
<br>
</div>

<div class='talk op-msg' data-timestamp='1447361460' id='436681'>
<a class='timestamp' href='#436681'><time timestamp='2015-11-12T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: uh, even with libsecp256k1 dsa signature validation run at something like only 9mbit/sec/core (in terms of transaction size).
<br>
</div>

<div class='talk op-msg' data-timestamp='1447361460' id='436682'>
<a class='timestamp' href='#436682'><time timestamp='2015-11-12T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
phantomcircuit: i thought you were arguing otherwise?  but yes personally i think the biggest costs are bandwidth and utxo bloat.  my idea was the metric should be something simple like .5 * total_bytes + 1 * output_bytes, but then maybe discounting provably unspendable output bytes
<br>
</div>

<div class='talk op-msg' data-timestamp='1447361520' id='436683'>
<a class='timestamp' href='#436683'><time timestamp='2015-11-12T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
jgarzik: did it have a problem or you just rerun it for completeness
<br>
</div>

<div class='talk op-msg' data-timestamp='1447361520' id='436684'>
<a class='timestamp' href='#436684'><time timestamp='2015-11-12T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
morcos, the latter - I always travis in jgarzik/bitcoin on the merged tree before pushing
<br>
</div>

<div class='talk op-msg' data-timestamp='1447361580' id='436685'>
<a class='timestamp' href='#436685'><time timestamp='2015-11-12T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
travis results get stale rapidly
<br>
</div>

<div class='talk op-msg' data-timestamp='1447361640' id='436686'>
<a class='timestamp' href='#436686'><time timestamp='2015-11-12T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: and those figures are without multisig, it&#x27;s worse with multisig. (like 2 of 3 is like 6mb/s/core)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447361700' id='436687'>
<a class='timestamp' href='#436687'><time timestamp='2015-11-12T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: but you&#x27;re saying that number is too low?  
<br>
</div>

<div class='talk op-msg' data-timestamp='1447361760' id='436688'>
<a class='timestamp' href='#436688'><time timestamp='2015-11-12T20:56:00Z'>20:56</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
oh, i guess for a degenerate block that has all new sigs...   
<br>
</div>

<div class='talk op-msg' data-timestamp='1447361760' id='436689'>
<a class='timestamp' href='#436689'><time timestamp='2015-11-12T20:56:00Z'>20:56</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so maybe there is a standard cost metric, and then separate limits like sig op is now for the degenerate cases
<br>
</div>

<div class='talk op-msg' data-timestamp='1447363560' id='436690'>
<a class='timestamp' href='#436690'><time timestamp='2015-11-12T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, hmm that&#x27;s slower than i was thinking
<br>
</div>

<div class='talk op-msg' data-timestamp='1447363560' id='436691'>
<a class='timestamp' href='#436691'><time timestamp='2015-11-12T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
why was i thinking it was faster?
<br>
</div>

<div class='talk op-msg' data-timestamp='1447363560' id='436692'>
<a class='timestamp' href='#436692'><time timestamp='2015-11-12T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-3'> * phantomcircuit</span>&gt;
doesn&#x27;t know
<br>
</div>

<div class='talk op-msg' data-timestamp='1447363680' id='436693'>
<a class='timestamp' href='#436693'><time timestamp='2015-11-12T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: thats the only reason I mentioned it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447363680' id='436694'>
<a class='timestamp' href='#436694'><time timestamp='2015-11-12T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Not that I thought it was super important here, but just because you were clearly thinking it was faster than that; you&#x27;re probably thinking in terms of IBD with signature checking disabled.
<br>
</div>

<div class='talk op-msg' data-timestamp='1447363980' id='436695'>
<a class='timestamp' href='#436695'><time timestamp='2015-11-12T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, hmm maybe
<br>
</div>

<div class='talk op-msg' data-timestamp='1447363980' id='436696'>
<a class='timestamp' href='#436696'><time timestamp='2015-11-12T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, i know that we cant do &gt;50mbps for that
<br>
</div>

<div class='talk op-msg' data-timestamp='1447363980' id='436697'>
<a class='timestamp' href='#436697'><time timestamp='2015-11-12T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
possibly with some of the recent performance improvements we can improve on that significantly though
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364340' id='436698'>
<a class='timestamp' href='#436698'><time timestamp='2015-11-12T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
CXX    test/test_test_bitcoin-Checkpoints_tests.o
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364340' id='436699'>
<a class='timestamp' href='#436699'><time timestamp='2015-11-12T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
That capital C seems out of place
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364400' id='436700'>
<a class='timestamp' href='#436700'><time timestamp='2015-11-12T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
So does _DoS just below
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364400' id='436701'>
<a class='timestamp' href='#436701'><time timestamp='2015-11-12T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
-DoS*
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364460' id='436702'>
<a class='timestamp' href='#436702'><time timestamp='2015-11-12T21:41:00Z'>21:41</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
(Contrast to -pow which is kept lowercase)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364460' id='436703'>
<a class='timestamp' href='#436703'><time timestamp='2015-11-12T21:41:00Z'>21:41</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Okay, 0.11.2 built, PR imminent
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364520' id='436704'>
<a class='timestamp' href='#436704'><time timestamp='2015-11-12T21:42:00Z'>21:42</time></a>
&lt;<span class='nick nick-12'> * michagogo</span>&gt;
starts the script to build 0.10.;
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364520' id='436705'>
<a class='timestamp' href='#436705'><time timestamp='2015-11-12T21:42:00Z'>21:42</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
.4*
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364580' id='436706'>
<a class='timestamp' href='#436706'><time timestamp='2015-11-12T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-14'> GitHub107</span>&gt;
[bitcoin] jgarzik pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/bd629d77edbe...38ed190eefcc" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/bd629d77edbe...38ed190eefcc</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364580' id='436707'>
<a class='timestamp' href='#436707'><time timestamp='2015-11-12T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-14'> GitHub107</span>&gt;
bitcoin/master 971a4e6 Alex Morcos: Lower default policy limits...
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364580' id='436708'>
<a class='timestamp' href='#436708'><time timestamp='2015-11-12T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-14'> GitHub107</span>&gt;
bitcoin/master 38ed190 Jeff Garzik: Merge #6771 from branch &#x27;lowerLimits&#x27; of git://github.com/morcos/bitcoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364580' id='436709'>
<a class='timestamp' href='#436709'><time timestamp='2015-11-12T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-5'> GitHub188</span>&gt;
[bitcoin] jgarzik closed pull request #6771: Policy: Lower default limits for tx chains (master...lowerLimits) <a href="https://github.com/bitcoin/bitcoin/pull/6771" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6771</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364580' id='436710'>
<a class='timestamp' href='#436710'><time timestamp='2015-11-12T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
morcos, email req :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364700' id='436711'>
<a class='timestamp' href='#436711'><time timestamp='2015-11-12T21:45:00Z'>21:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
jgarzik: sent
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364700' id='436712'>
<a class='timestamp' href='#436712'><time timestamp='2015-11-12T21:45:00Z'>21:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I think I have 2 backed up in moderation queue now
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364760' id='436713'>
<a class='timestamp' href='#436713'><time timestamp='2015-11-12T21:46:00Z'>21:46</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Hm, I wonder if my script will break if there&#x27;s an outstanding PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364820' id='436714'>
<a class='timestamp' href='#436714'><time timestamp='2015-11-12T21:47:00Z'>21:47</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Actually, probably not. The Ruby oneliner that makes the PR is the last line in the script, so even if it fails and exits non-zero, the script is over anyway and there&#x27;s nothing to abort
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364880' id='436715'>
<a class='timestamp' href='#436715'><time timestamp='2015-11-12T21:48:00Z'>21:48</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
gmaxwell: &quot;utxo commitment by instead commiting to the input block and offset&quot; &lt;- that falls into the category of !@#$ why didn&#x27;t I think of that :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447364940' id='436716'>
<a class='timestamp' href='#436716'><time timestamp='2015-11-12T21:49:00Z'>21:49</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
(set -ex)
<br>
</div>

<div class='talk op-msg' data-timestamp='1447365360' id='436717'>
<a class='timestamp' href='#436717'><time timestamp='2015-11-12T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
petertodd: that was actually my stumbling block to not fully getting some of the potential advantages of MMR trees
<br>
</div>

<div class='talk op-msg' data-timestamp='1447365480' id='436718'>
<a class='timestamp' href='#436718'><time timestamp='2015-11-12T21:58:00Z'>21:58</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
in retrospect, it makes a lot more sense to index outputs that way
<br>
</div>

<div class='talk op-msg' data-timestamp='1447365540' id='436719'>
<a class='timestamp' href='#436719'><time timestamp='2015-11-12T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
at least for existence/nonexistence proofs - obviously for spending we need to reference the transaction in some way
<br>
</div>

</div>
</section>

</body>
</html>
