<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2018-08-14
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2018-08-14' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:21 UTC</pre>
<pre><a href="/bitcoin-core-dev/2018-07-14">&lt;</a><span class='header'>   August 2018    </span><a href="/bitcoin-core-dev/2018-09-14">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;          <a class="" href="/bitcoin-core-dev/2018-08-01">1</a>  <a class="" href="/bitcoin-core-dev/2018-08-02">2</a>  <a class="" href="/bitcoin-core-dev/2018-08-03">3</a>  <a class="" href="/bitcoin-core-dev/2018-08-04">4</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2018-08-05">5</a>  <a class="" href="/bitcoin-core-dev/2018-08-06">6</a>  <a class="" href="/bitcoin-core-dev/2018-08-07">7</a>  <a class="" href="/bitcoin-core-dev/2018-08-08">8</a>  <a class="" href="/bitcoin-core-dev/2018-08-09">9</a> <a class="" href="/bitcoin-core-dev/2018-08-10">10</a> <a class="" href="/bitcoin-core-dev/2018-08-11">11</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-08-12">12</a> <a class="" href="/bitcoin-core-dev/2018-08-13">13</a> <a class="current" href="/bitcoin-core-dev/2018-08-14">14</a> <a class="" href="/bitcoin-core-dev/2018-08-15">15</a> <a class="" href="/bitcoin-core-dev/2018-08-16">16</a> <a class="" href="/bitcoin-core-dev/2018-08-17">17</a> <a class="" href="/bitcoin-core-dev/2018-08-18">18</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-08-19">19</a> <a class="" href="/bitcoin-core-dev/2018-08-20">20</a> <a class="" href="/bitcoin-core-dev/2018-08-21">21</a> <a class="" href="/bitcoin-core-dev/2018-08-22">22</a> <a class="" href="/bitcoin-core-dev/2018-08-23">23</a> <a class="" href="/bitcoin-core-dev/2018-08-24">24</a> <a class="" href="/bitcoin-core-dev/2018-08-25">25</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-08-26">26</a> <a class="" href="/bitcoin-core-dev/2018-08-27">27</a> <a class="" href="/bitcoin-core-dev/2018-08-28">28</a> <a class="" href="/bitcoin-core-dev/2018-08-29">29</a> <a class="" href="/bitcoin-core-dev/2018-08-30">30</a> <a class="" href="/bitcoin-core-dev/2018-08-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1534215120' id='624960'>
<a class='timestamp' href='#624960'><time timestamp='2018-08-14T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-12'> waiting2compile</span>&gt;
hi, could someone walk me a bit through running Bitcoin&#x27;s tests? I tried following the instructions in the README.md, though I suspect there&#x27;s some extra setup that needs to be done that&#x27;s missing, since running the command just gives make errors and the like (pardon me, I&#x27;m new to this and am trying to fix one of the good first bugs :))
<br>
</div>

<div class='talk op-msg' data-timestamp='1534215420' id='624961'>
<a class='timestamp' href='#624961'><time timestamp='2018-08-14T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
have you looked at build-unix.md (or windows/osx, based on your environement)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534215420' id='624962'>
<a class='timestamp' href='#624962'><time timestamp='2018-08-14T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534215660' id='624963'>
<a class='timestamp' href='#624963'><time timestamp='2018-08-14T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-12'> waiting2compile</span>&gt;
Ah I had not, I&#x27;ll try following the instructions there and see if I have any luck
<br>
</div>

<div class='talk op-msg' data-timestamp='1534221120' id='624964'>
<a class='timestamp' href='#624964'><time timestamp='2018-08-14T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
Fetching qtbase-opensource-src-5.9.6.tar.xz from <a href="https://download.qt.io/official_releases/qt/5.9/5.9.6/submodules" class="link" target="_blank">https://download.qt.io/official_releases/qt/5.9/5.9.6/submodules</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534221120' id='624965'>
<a class='timestamp' href='#624965'><time timestamp='2018-08-14T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
<br>
</div>

<div class='talk op-msg' data-timestamp='1534221120' id='624966'>
<a class='timestamp' href='#624966'><time timestamp='2018-08-14T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
                                 Dload  Upload   Total   Spent    Left  Speed
<br>
</div>

<div class='talk op-msg' data-timestamp='1534221120' id='624967'>
<a class='timestamp' href='#624967'><time timestamp='2018-08-14T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
  0     0    0     0    0     0      0      0 --:--:--  0:00:05 --:--:--     0curl: (7) Failed to connect to download.qt.io port 443: No route to host
<br>
</div>

<div class='talk op-msg' data-timestamp='1534221120' id='624968'>
<a class='timestamp' href='#624968'><time timestamp='2018-08-14T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
Fetching qtbase-opensource-src-5.9.6.tar.xz from <a href="https://bitcoincore.org/depends-sources" class="link" target="_blank">https://bitcoincore.org/depends-sources</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534221120' id='624969'>
<a class='timestamp' href='#624969'><time timestamp='2018-08-14T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
<br>
</div>

<div class='talk op-msg' data-timestamp='1534221120' id='624970'>
<a class='timestamp' href='#624970'><time timestamp='2018-08-14T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
                                 Dload  Upload   Total   Spent    Left  Speed
<br>
</div>

<div class='talk op-msg' data-timestamp='1534221120' id='624971'>
<a class='timestamp' href='#624971'><time timestamp='2018-08-14T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0
<br>
</div>

<div class='talk op-msg' data-timestamp='1534221120' id='624972'>
<a class='timestamp' href='#624972'><time timestamp='2018-08-14T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
curl: (22) The requested URL returned error: 404 Not Found
<br>
</div>

<div class='talk op-msg' data-timestamp='1534221180' id='624973'>
<a class='timestamp' href='#624973'><time timestamp='2018-08-14T04:33:00Z'>04:33</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
download.qt.io is down, also there is no backup at bitcoincore.org 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534221300' id='624974'>
<a class='timestamp' href='#624974'><time timestamp='2018-08-14T04:35:00Z'>04:35</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
not sure who maintains the bitcoincore.org mirrors
<br>
</div>

<div class='talk op-msg' data-timestamp='1534221360' id='624975'>
<a class='timestamp' href='#624975'><time timestamp='2018-08-14T04:36:00Z'>04:36</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
fwiw there&#x27;s a mirror here <a href="http://distfiles.gentoo.org/distfiles/qtbase-opensource-src-5.9.6.tar.xz" class="link" target="_blank">http://distfiles.gentoo.org/distfiles/qtbase-opensource-src-5.9.6.tar.xz</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534223400' id='624976'>
<a class='timestamp' href='#624976'><time timestamp='2018-08-14T05:10:00Z'>05:10</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
luke-jr: thanks, that works
<br>
</div>

<div class='talk op-msg' data-timestamp='1534223520' id='624977'>
<a class='timestamp' href='#624977'><time timestamp='2018-08-14T05:12:00Z'>05:12</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
But I think I&#x27;ll need to rebuild qt once I change back to download.qt.io site site
<br>
</div>

<div class='talk op-msg' data-timestamp='1534223580' id='624978'>
<a class='timestamp' href='#624978'><time timestamp='2018-08-14T05:13:00Z'>05:13</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534225020' id='624979'>
<a class='timestamp' href='#624979'><time timestamp='2018-08-14T05:37:00Z'>05:37</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
luke-jr: Since I changed the link in .mk file
<br>
</div>

<div class='talk op-msg' data-timestamp='1534225080' id='624980'>
<a class='timestamp' href='#624980'><time timestamp='2018-08-14T05:38:00Z'>05:38</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
hash does not match the previous built one.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534231440' id='624981'>
<a class='timestamp' href='#624981'><time timestamp='2018-08-14T07:24:00Z'>07:24</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus 13963, 13962 and 13948 are a few trivial merges.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534231980' id='624982'>
<a class='timestamp' href='#624982'><time timestamp='2018-08-14T07:33:00Z'>07:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: thanks, agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1534232040' id='624983'>
<a class='timestamp' href='#624983'><time timestamp='2018-08-14T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
we really need a replacement for the IRC merges bot
<br>
</div>

<div class='talk op-msg' data-timestamp='1534232100' id='624984'>
<a class='timestamp' href='#624984'><time timestamp='2018-08-14T07:35:00Z'>07:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ken2812221_: problems with bitcoincore.org you can file at <a href="https://github.com/bitcoin-core/bitcoincore.org" class="link" target="_blank">https://github.com/bitcoin-core/bitcoincore.org</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534232940' id='624985'>
<a class='timestamp' href='#624985'><time timestamp='2018-08-14T07:49:00Z'>07:49</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
wumpus: Thanks, I&#x27;ll check that out.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534239120' id='624986'>
<a class='timestamp' href='#624986'><time timestamp='2018-08-14T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
time to update my build infrastructure so I can finally build the 0.17 branch in gitian
<br>
</div>

<div class='talk op-msg' data-timestamp='1534239420' id='624987'>
<a class='timestamp' href='#624987'><time timestamp='2018-08-14T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
starting with building the most recent lxc, 3.0.1 apparently
<br>
</div>

<div class='talk op-msg' data-timestamp='1534240620' id='624988'>
<a class='timestamp' href='#624988'><time timestamp='2018-08-14T09:57:00Z'>09:57</time></a>
&lt;<span class='nick nick-11'> Gnappuraz</span>&gt;
Hi, I was going through the bitcoin documentation but I can&#x27;t find the rationale behind the fact of using the prevTx.scriptPubKey in the place of curTx.scriptSig when creating the signature
<br>
</div>

<div class='talk op-msg' data-timestamp='1534249140' id='624989'>
<a class='timestamp' href='#624989'><time timestamp='2018-08-14T12:19:00Z'>12:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
$ bin/make-base-vm --lxc --suite bionic --arch amd64                                                                                              
<br>
</div>

<div class='talk op-msg' data-timestamp='1534249140' id='624990'>
<a class='timestamp' href='#624990'><time timestamp='2018-08-14T12:19:00Z'>12:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
E: No such script: /usr/share/debootstrap/scripts/bionic
<br>
</div>

<div class='talk op-msg' data-timestamp='1534249140' id='624991'>
<a class='timestamp' href='#624991'><time timestamp='2018-08-14T12:19:00Z'>12:19</time></a>
&lt;<span class='nick nick-3'> * wumpus</span>&gt;
wonders where to get this file
<br>
</div>

<div class='talk op-msg' data-timestamp='1534249380' id='624992'>
<a class='timestamp' href='#624992'><time timestamp='2018-08-14T12:23:00Z'>12:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
seemingly the ubuntu package of debootstrap has it, but I don&#x27;t think I can just install that on debian
<br>
</div>

<div class='talk op-msg' data-timestamp='1534249560' id='624993'>
<a class='timestamp' href='#624993'><time timestamp='2018-08-14T12:26:00Z'>12:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
found the source download @ <a href="http://archive.ubuntu.com/ubuntu/pool/main/d/debootstrap/debootstrap_1.0.95.tar.gz" class="link" target="_blank">http://archive.ubuntu.com/ubuntu/pool/main/d/debootstrap/debootstrap_1.0.95.tar.gz</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534249740' id='624994'>
<a class='timestamp' href='#624994'><time timestamp='2018-08-14T12:29:00Z'>12:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
nice, removing the debootstrap debian package and simply installing that seems to have worked
<br>
</div>

<div class='talk op-msg' data-timestamp='1534249920' id='624995'>
<a class='timestamp' href='#624995'><time timestamp='2018-08-14T12:32:00Z'>12:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luckily it&#x27;s only a VM so I don&#x27;t care about the mess
<br>
</div>

<div class='talk op-msg' data-timestamp='1534250820' id='624996'>
<a class='timestamp' href='#624996'><time timestamp='2018-08-14T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
Failed run an application inside container
<br>
</div>

<div class='talk op-msg' data-timestamp='1534250820' id='624997'>
<a class='timestamp' href='#624997'><time timestamp='2018-08-14T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
bin/gbuild:21:in `system!&#x27;: failed to run make-clean-vm --suite bionic --arch amd64 (RuntimeError)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534250820' id='624998'>
<a class='timestamp' href='#624998'><time timestamp='2018-08-14T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ouch--can&#x27;t build 0.16.x nor 0.17.x anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1534252020' id='624999'>
<a class='timestamp' href='#624999'><time timestamp='2018-08-14T13:07:00Z'>13:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
apparently I&#x27;m missing init.lxc.static
<br>
</div>

<div class='talk op-msg' data-timestamp='1534252140' id='625000'>
<a class='timestamp' href='#625000'><time timestamp='2018-08-14T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
can someone close #13826 and #13901 as dup&#x27;s (sorry, wasnt able to fix it last week, will fix it soon)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534252140' id='625001'>
<a class='timestamp' href='#625001'><time timestamp='2018-08-14T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13826" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13826</a> | packaging: Auto-change datadir in ubuntu ppa · Issue #13826 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1534252140' id='625002'>
<a class='timestamp' href='#625002'><time timestamp='2018-08-14T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13901" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13901</a> | adduser: The user `bitcoin already exists. Exiting. · Issue #13901 · bitcoin/bitcoin · GitHubAsset 1Asset 1
<br>
</div>

<div class='talk op-msg' data-timestamp='1534252260' id='625003'>
<a class='timestamp' href='#625003'><time timestamp='2018-08-14T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wait, no I misread the first one, I have no idea what they&#x27;re even saying
<br>
</div>

<div class='talk op-msg' data-timestamp='1534252380' id='625004'>
<a class='timestamp' href='#625004'><time timestamp='2018-08-14T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
apparently I needed &quot;apt-get libcap-dev&quot;,  please work now
<br>
</div>

<div class='talk op-msg' data-timestamp='1534252380' id='625005'>
<a class='timestamp' href='#625005'><time timestamp='2018-08-14T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1534252440' id='625006'>
<a class='timestamp' href='#625006'><time timestamp='2018-08-14T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
closed the second one
<br>
</div>

<div class='talk op-msg' data-timestamp='1534255500' id='625007'>
<a class='timestamp' href='#625007'><time timestamp='2018-08-14T14:05:00Z'>14:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
phew, 0.16.2 build succesfully, let&#x27;s see about 0.17
<br>
</div>

<div class='talk op-msg' data-timestamp='1534257240' id='625008'>
<a class='timestamp' href='#625008'><time timestamp='2018-08-14T14:34:00Z'>14:34</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
did the irc spam stop?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534257240' id='625009'>
<a class='timestamp' href='#625009'><time timestamp='2018-08-14T14:34:00Z'>14:34</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
If so could we set the irc flags to what they were a few weeks ago?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534257300' id='625010'>
<a class='timestamp' href='#625010'><time timestamp='2018-08-14T14:35:00Z'>14:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
done
<br>
</div>

<div class='talk op-msg' data-timestamp='1534257300' id='625011'>
<a class='timestamp' href='#625011'><time timestamp='2018-08-14T14:35:00Z'>14:35</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
thx
<br>
</div>

<div class='talk op-msg' data-timestamp='1534258320' id='625012'>
<a class='timestamp' href='#625012'><time timestamp='2018-08-14T14:52:00Z'>14:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
does this mean...
<br>
</div>

<div class='talk op-msg' data-timestamp='1534258380' id='625013'>
<a class='timestamp' href='#625013'><time timestamp='2018-08-14T14:53:00Z'>14:53</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/dabfcb03071e...3e5424faf6ff" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/dabfcb03071e...3e5424faf6ff</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534258380' id='625014'>
<a class='timestamp' href='#625014'><time timestamp='2018-08-14T14:53:00Z'>14:53</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 43811e6 Andrew Chow: Fix PSBT deserialization of 0-input transactions...
<br>
</div>

<div class='talk op-msg' data-timestamp='1534258380' id='625015'>
<a class='timestamp' href='#625015'><time timestamp='2018-08-14T14:53:00Z'>14:53</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master bd19cc7 Andrew Chow: Serialize non-witness utxo as a non-witness tx but always deserialize as witness...
<br>
</div>

<div class='talk op-msg' data-timestamp='1534258380' id='625016'>
<a class='timestamp' href='#625016'><time timestamp='2018-08-14T14:53:00Z'>14:53</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 3e5424f Wladimir J. van der Laan: Merge #13960: Fix PSBT deserialization of 0-input transactions...
<br>
</div>

<div class='talk op-msg' data-timestamp='1534258380' id='625017'>
<a class='timestamp' href='#625017'><time timestamp='2018-08-14T14:53:00Z'>14:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
YESSSSS
<br>
</div>

<div class='talk op-msg' data-timestamp='1534258440' id='625018'>
<a class='timestamp' href='#625018'><time timestamp='2018-08-14T14:54:00Z'>14:54</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #13960: Fix PSBT deserialization of 0-input transactions (master...fix-decodepsbt-no-in) <a href="https://github.com/bitcoin/bitcoin/pull/13960" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13960</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534258680' id='625019'>
<a class='timestamp' href='#625019'><time timestamp='2018-08-14T14:58:00Z'>14:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1534259400' id='625020'>
<a class='timestamp' href='#625020'><time timestamp='2018-08-14T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-10'> ben_zen1</span>&gt;
 ­ ­ ­ ­ ­  <a href="http://magaimg.net/img/wqz.jpg" class="link" target="_blank">http://magaimg.net/img/wqz.jpg</a>  ­  ­ ­ ­ ­ ­ ­ ­ ­ ­ <a href="http://magaimg.net/img/wqz.jpg" class="link" target="_blank">http://magaimg.net/img/wqz.jpg</a>  ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­
<br>
</div>

<div class='talk op-msg' data-timestamp='1534259400' id='625021'>
<a class='timestamp' href='#625021'><time timestamp='2018-08-14T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-10'> ben_zen1</span>&gt;
 ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­  ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­  ­ <a href="https://i.redd.it/8w0r915sm1ty.jpg" class="link" target="_blank">https://i.redd.it/8w0r915sm1ty.jpg</a>  ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­
<br>
</div>

<div class='talk op-msg' data-timestamp='1534259400' id='625022'>
<a class='timestamp' href='#625022'><time timestamp='2018-08-14T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-10'> ben_zen1</span>&gt;
 ­ ­  <a href="https://i.imgur.com/FZ5iI6Y.jpg" class="link" target="_blank">https://i.imgur.com/FZ5iI6Y.jpg</a> ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­
<br>
</div>

<div class='talk op-msg' data-timestamp='1534259400' id='625023'>
<a class='timestamp' href='#625023'><time timestamp='2018-08-14T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-10'> ben_zen1</span>&gt;
 ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­  ­ <a href="https://i.redd.it/el0p0os7u7fz.jpg" class="link" target="_blank">https://i.redd.it/el0p0os7u7fz.jpg</a>  ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­
<br>
</div>

<div class='talk op-msg' data-timestamp='1534259400' id='625024'>
<a class='timestamp' href='#625024'><time timestamp='2018-08-14T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-10'> ben_zen1</span>&gt;
 ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ <a href="https://i.redd.it/r2n8a788qs211.jpg" class="link" target="_blank">https://i.redd.it/r2n8a788qs211.jpg</a>  ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534259400' id='625025'>
<a class='timestamp' href='#625025'><time timestamp='2018-08-14T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-10'> ben_zen1</span>&gt;
<a href="http://i.imgur.com/DfZdPTy.jpg" class="link" target="_blank">http://i.imgur.com/DfZdPTy.jpg</a>  ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534259400' id='625026'>
<a class='timestamp' href='#625026'><time timestamp='2018-08-14T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-10'> ben_zen1</span>&gt;
<a href="http://magaimg.net/img/5xpf.jpg" class="link" target="_blank">http://magaimg.net/img/5xpf.jpg</a>  ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­
<br>
</div>

<div class='talk op-msg' data-timestamp='1534259460' id='625027'>
<a class='timestamp' href='#625027'><time timestamp='2018-08-14T15:11:00Z'>15:11</time></a>
&lt;<span class='nick nick-10'> ben_zen1</span>&gt;
 ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ <a href="https://i.imgur.com/AaQg3Pp.jpg" class="link" target="_blank">https://i.imgur.com/AaQg3Pp.jpg</a>  ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­ ­
<br>
</div>

<div class='talk op-msg' data-timestamp='1534259520' id='625028'>
<a class='timestamp' href='#625028'><time timestamp='2018-08-14T15:12:00Z'>15:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sorry :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1534260540' id='625029'>
<a class='timestamp' href='#625029'><time timestamp='2018-08-14T15:29:00Z'>15:29</time></a>
&lt;<span class='nick nick-2'>@sipa</span>&gt;
wumpus: i&#x27;m going to clear the &#x27;needs release notes&#x27; for all PRs merged before 0.17
<br>
</div>

<div class='talk op-msg' data-timestamp='1534260540' id='625030'>
<a class='timestamp' href='#625030'><time timestamp='2018-08-14T15:29:00Z'>15:29</time></a>
&lt;<span class='nick nick-2'>@sipa</span>&gt;
or are there things in the 0.16 branch that haven&#x27;t been in a release yet?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534261380' id='625031'>
<a class='timestamp' href='#625031'><time timestamp='2018-08-14T15:43:00Z'>15:43</time></a>
&lt;<span class='nick nick-2'>@sipa</span>&gt;
are we going to include qt arm builds in 0.17 releases?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534262880' id='625032'>
<a class='timestamp' href='#625032'><time timestamp='2018-08-14T16:08:00Z'>16:08</time></a>
&lt;<span class='nick nick-2'>@sipa</span>&gt;
i went through the list of merged PRs, and added &quot;Needs Release Notes&quot; here and there where i felt it was useful
<br>
</div>

<div class='talk op-msg' data-timestamp='1534262940' id='625033'>
<a class='timestamp' href='#625033'><time timestamp='2018-08-14T16:09:00Z'>16:09</time></a>
&lt;<span class='nick nick-2'>@sipa</span>&gt;
some of these already have release notes, but i think it&#x27;s useful to have such a list to compare with the notes when they are finished
<br>
</div>

<div class='talk op-msg' data-timestamp='1534265940' id='625034'>
<a class='timestamp' href='#625034'><time timestamp='2018-08-14T16:59:00Z'>16:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: make ssense
<br>
</div>

<div class='talk op-msg' data-timestamp='1534265940' id='625035'>
<a class='timestamp' href='#625035'><time timestamp='2018-08-14T16:59:00Z'>16:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
+s
<br>
</div>

<div class='talk op-msg' data-timestamp='1534266000' id='625036'>
<a class='timestamp' href='#625036'><time timestamp='2018-08-14T17:00:00Z'>17:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
nothing has been merged after 0.16.2 that needs release notes
<br>
</div>

<div class='talk op-msg' data-timestamp='1534268820' id='625037'>
<a class='timestamp' href='#625037'><time timestamp='2018-08-14T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gitian build--at least for linux--of 0.17 branch worked, phew
<br>
</div>

<div class='talk op-msg' data-timestamp='1534268880' id='625038'>
<a class='timestamp' href='#625038'><time timestamp='2018-08-14T17:48:00Z'>17:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
going to test at least the ARM executables
<br>
</div>

<div class='talk op-msg' data-timestamp='1534269420' id='625039'>
<a class='timestamp' href='#625039'><time timestamp='2018-08-14T17:57:00Z'>17:57</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
anyone else getting github.com domain name res failure for git
<br>
</div>

<div class='talk op-msg' data-timestamp='1534269480' id='625040'>
<a class='timestamp' href='#625040'><time timestamp='2018-08-14T17:58:00Z'>17:58</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
oh sike, i just have no internet on the device
<br>
</div>

<div class='talk op-msg' data-timestamp='1534269480' id='625041'>
<a class='timestamp' href='#625041'><time timestamp='2018-08-14T17:58:00Z'>17:58</time></a>
&lt;<span class='nick nick-2'>@sipa</span>&gt;
i confirm your IRC client is on the internet
<br>
</div>

<div class='talk op-msg' data-timestamp='1534269540' id='625042'>
<a class='timestamp' href='#625042'><time timestamp='2018-08-14T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
the burdens of running multiple computing devices...
<br>
</div>

<div class='talk op-msg' data-timestamp='1534273980' id='625043'>
<a class='timestamp' href='#625043'><time timestamp='2018-08-14T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmmm, MarcoFalke points out that it looks like we may be undercounting mempool memory usage by sizeof(CTransaction)*txcount
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274040' id='625044'>
<a class='timestamp' href='#625044'><time timestamp='2018-08-14T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: so fix it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274040' id='625045'>
<a class='timestamp' href='#625045'><time timestamp='2018-08-14T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, wait, nvm, I&#x27;m misreading it
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274100' id='625046'>
<a class='timestamp' href='#625046'><time timestamp='2018-08-14T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: I was hoping for someone to double-check me, but I found myself to be wrong faster :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274100' id='625047'>
<a class='timestamp' href='#625047'><time timestamp='2018-08-14T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
fixing it also has the property of showing you that you&#x27;re wrong fast. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274160' id='625048'>
<a class='timestamp' href='#625048'><time timestamp='2018-08-14T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lol true
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274460' id='625049'>
<a class='timestamp' href='#625049'><time timestamp='2018-08-14T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli_</span>&gt;
hmm... manually added nodes with -connect have no service flags?!
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274580' id='625050'>
<a class='timestamp' href='#625050'><time timestamp='2018-08-14T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
If its unknown if the peer supports NODE_ENCRYPTION, I guess just trying and ^NODE_ENCRYPTION if failed seems accptable 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274700' id='625051'>
<a class='timestamp' href='#625051'><time timestamp='2018-08-14T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
probably just try. maybe in a couple years we mandate encryption for connect and addnode (and add something for a connect that doesn&#x27;t support it)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274820' id='625052'>
<a class='timestamp' href='#625052'><time timestamp='2018-08-14T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: you mean also trying on peers not signalling NODE_ENCRYPTION via the service flags (and eventually update addrman&#x27;s service flags if failed to encrypt)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274880' id='625053'>
<a class='timestamp' href='#625053'><time timestamp='2018-08-14T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i would only try it for things that signal encryption
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274880' id='625054'>
<a class='timestamp' href='#625054'><time timestamp='2018-08-14T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if it doesn&#x27;t work, drop the flag in your addrman and disconnect
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274880' id='625055'>
<a class='timestamp' href='#625055'><time timestamp='2018-08-14T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I was specifically talking about connect and addnode, where there are no &#x27;flags&#x27; before we connect.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274880' id='625056'>
<a class='timestamp' href='#625056'><time timestamp='2018-08-14T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274880' id='625057'>
<a class='timestamp' href='#625057'><time timestamp='2018-08-14T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
uh, that means trying twice :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274940' id='625058'>
<a class='timestamp' href='#625058'><time timestamp='2018-08-14T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
if they don&#x27;t support it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274940' id='625059'>
<a class='timestamp' href='#625059'><time timestamp='2018-08-14T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Do you see an alternative?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274940' id='625060'>
<a class='timestamp' href='#625060'><time timestamp='2018-08-14T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We could immediately introduce flags to connect and addnode to say that crypto isn&#x27;t in use.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274940' id='625061'>
<a class='timestamp' href='#625061'><time timestamp='2018-08-14T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
-encaddnode -encconnect :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534274940' id='625062'>
<a class='timestamp' href='#625062'><time timestamp='2018-08-14T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
encryption should be the default.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275000' id='625063'>
<a class='timestamp' href='#625063'><time timestamp='2018-08-14T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Ignoring the initial deployment catch22,  I dont think there is much reason to even support connect/addnode to non-encryption supporting things...
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275000' id='625064'>
<a class='timestamp' href='#625064'><time timestamp='2018-08-14T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
indeed...
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275000' id='625065'>
<a class='timestamp' href='#625065'><time timestamp='2018-08-14T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275000' id='625066'>
<a class='timestamp' href='#625066'><time timestamp='2018-08-14T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but you don&#x27;t want existing addnode=IP lines in bitcoin.conf files suddenly fail 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275060' id='625067'>
<a class='timestamp' href='#625067'><time timestamp='2018-08-14T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think if -netconnection is enabled (which could be the default), addnode (and friends) should enforce encrypted peers
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275060' id='625068'>
<a class='timestamp' href='#625068'><time timestamp='2018-08-14T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: Major versions can break things, thats what release notes are for.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275120' id='625069'>
<a class='timestamp' href='#625069'><time timestamp='2018-08-14T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or we could add encryption support, and a way to add flags to addnode/connect in one version
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275120' id='625070'>
<a class='timestamp' href='#625070'><time timestamp='2018-08-14T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think failing on addnodes that are non encrypted is probably a good thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275120' id='625071'>
<a class='timestamp' href='#625071'><time timestamp='2018-08-14T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and then change the default to encryption in a later version
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275120' id='625072'>
<a class='timestamp' href='#625072'><time timestamp='2018-08-14T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
or that,.. yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275120' id='625073'>
<a class='timestamp' href='#625073'><time timestamp='2018-08-14T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we could make connect and addnode able to take an parameter e.g. connect=1.2.3.4$nocrypto 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275120' id='625074'>
<a class='timestamp' href='#625074'><time timestamp='2018-08-14T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, that would be okay.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275120' id='625075'>
<a class='timestamp' href='#625075'><time timestamp='2018-08-14T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that may be necessary regardless, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275180' id='625076'>
<a class='timestamp' href='#625076'><time timestamp='2018-08-14T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i wonder if we should call it encryption
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275180' id='625077'>
<a class='timestamp' href='#625077'><time timestamp='2018-08-14T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
enciphering? *duck*?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275180' id='625078'>
<a class='timestamp' href='#625078'><time timestamp='2018-08-14T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
connect=1.2.3.4$crypto  connect=1.2.3.4$nocrypto   ... and the default if no specified starts out no and gets switched later.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275180' id='625079'>
<a class='timestamp' href='#625079'><time timestamp='2018-08-14T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe it should just be &quot;v2 protocol&quot; (which happens to encrypt, but it&#x27;s really a new non-backward compatible protocol encoding
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275240' id='625080'>
<a class='timestamp' href='#625080'><time timestamp='2018-08-14T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. That sounds good... I just fear scope creeping if we label it like that
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275240' id='625081'>
<a class='timestamp' href='#625081'><time timestamp='2018-08-14T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
okay
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275240' id='625082'>
<a class='timestamp' href='#625082'><time timestamp='2018-08-14T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just an idea
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275240' id='625083'>
<a class='timestamp' href='#625083'><time timestamp='2018-08-14T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
&quot;Ah. v2 protocol, why don&#x27;t use change the inv that way&quot;,. etc.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275300' id='625084'>
<a class='timestamp' href='#625084'><time timestamp='2018-08-14T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but encryption isn&#x27;t something that should be advertized really
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275300' id='625085'>
<a class='timestamp' href='#625085'><time timestamp='2018-08-14T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But since it&#x27;s a new protocol (kind-of a one time chance), those ideas are maybe welcome
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275300' id='625086'>
<a class='timestamp' href='#625086'><time timestamp='2018-08-14T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or &quot;v2 transport&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275360' id='625087'>
<a class='timestamp' href='#625087'><time timestamp='2018-08-14T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s not really the protocol that changes, just the encoding
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275360' id='625088'>
<a class='timestamp' href='#625088'><time timestamp='2018-08-14T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: what do you mean with &quot;advertised&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275360' id='625089'>
<a class='timestamp' href='#625089'><time timestamp='2018-08-14T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: Yes. &quot;v2 transport&quot; is more accurate
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275360' id='625090'>
<a class='timestamp' href='#625090'><time timestamp='2018-08-14T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you use the term &#x27;encryption&#x27; to describe the feature there may be a false sense of security risk
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275420' id='625091'>
<a class='timestamp' href='#625091'><time timestamp='2018-08-14T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Hm... you mean by not protecting from an active MITM?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275480' id='625092'>
<a class='timestamp' href='#625092'><time timestamp='2018-08-14T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess using the word encryption when it comes to the v2 transport would not be entirely wrong though
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275480' id='625093'>
<a class='timestamp' href='#625093'><time timestamp='2018-08-14T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well encryption certainly protects against certain attacks, but not nearly all the ones that people think of when you say encryption :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275540' id='625094'>
<a class='timestamp' href='#625094'><time timestamp='2018-08-14T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yea, it&#x27;s more than encrypion, also encryption implies properties that it doesn&#x27;t provide.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275540' id='625095'>
<a class='timestamp' href='#625095'><time timestamp='2018-08-14T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
e.g. the oppturnistic encryption does not prevent MITM.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275600' id='625096'>
<a class='timestamp' href='#625096'><time timestamp='2018-08-14T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
It eventually does prevent from MITM because an MITM would be easy to detect, but it does not protect from MITM
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275660' id='625097'>
<a class='timestamp' href='#625097'><time timestamp='2018-08-14T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not without somewhat deployed authentication
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275660' id='625098'>
<a class='timestamp' href='#625098'><time timestamp='2018-08-14T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275660' id='625099'>
<a class='timestamp' href='#625099'><time timestamp='2018-08-14T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case, we&#x27;ll want to be able to provide arguments to addnode and connect later for auth keys.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275720' id='625100'>
<a class='timestamp' href='#625100'><time timestamp='2018-08-14T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
With the &quot;stealth handshake&quot; (the very first 32byte message/key exchange), is there anything we should plan for in case we want to add something like RLWE to the handshake
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275720' id='625101'>
<a class='timestamp' href='#625101'><time timestamp='2018-08-14T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
+?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275720' id='625102'>
<a class='timestamp' href='#625102'><time timestamp='2018-08-14T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If we did something like add rwle we could establish the secp256k1 handshake first and then inside that stream upgrade.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275840' id='625103'>
<a class='timestamp' href='#625103'><time timestamp='2018-08-14T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: wouldn&#x27;t that partially break the &quot;stealth&quot; component (if we assume ecdh in secp256k1 is broken) since the inner 2nd handshake would probably require standard p2p message encryption?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275900' id='625104'>
<a class='timestamp' href='#625104'><time timestamp='2018-08-14T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: not more than the current secp stealth component is broken by being sent in cleartest
<br>
</div>

<div class='talk op-msg' data-timestamp='1534275900' id='625105'>
<a class='timestamp' href='#625105'><time timestamp='2018-08-14T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
^ plus the &#x27;stealth&#x27;s is pretty weak, it&#x27;s mostly just making harder to use dumb pattern matching to block.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276020' id='625106'>
<a class='timestamp' href='#625106'><time timestamp='2018-08-14T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
We could allow additional dummy data in the encryption handshake as we do in the v2 message encoding protocol to make DPI harder
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276020' id='625107'>
<a class='timestamp' href='#625107'><time timestamp='2018-08-14T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
hm. it really would be much easier if the initial handshake had a flag. e.g. [ecdh key][byte]  it could still block dumb pattern matching by making the byte xored with the last byte of the pubkey.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276080' id='625108'>
<a class='timestamp' href='#625108'><time timestamp='2018-08-14T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
kinda irritating to add RLWE after the fact, sadly.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276080' id='625109'>
<a class='timestamp' href='#625109'><time timestamp='2018-08-14T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think the change is already pretty huge,... I think adding more should be avoided
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276140' id='625110'>
<a class='timestamp' href='#625110'><time timestamp='2018-08-14T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
The tor argument &quot;collect now, decrypt later&quot; may not be applicable 1:1 to bitcoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276140' id='625111'>
<a class='timestamp' href='#625111'><time timestamp='2018-08-14T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Especially as long as there are no private p2p extensions and an internal auth mechanism
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276140' id='625112'>
<a class='timestamp' href='#625112'><time timestamp='2018-08-14T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
IMO deploying RLWE together with auth could make sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276200' id='625113'>
<a class='timestamp' href='#625113'><time timestamp='2018-08-14T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how much code is it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276260' id='625114'>
<a class='timestamp' href='#625114'><time timestamp='2018-08-14T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Right now +1,563/-178 (incomplete, missing tests)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276260' id='625115'>
<a class='timestamp' href='#625115'><time timestamp='2018-08-14T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
RWLE is small, one sec.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276320' id='625116'>
<a class='timestamp' href='#625116'><time timestamp='2018-08-14T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess the new code is very critical. Must be review profound
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276560' id='625117'>
<a class='timestamp' href='#625117'><time timestamp='2018-08-14T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: the ref implementation of newhope appears to be Total Physical Source Lines of Code (SLOC)                = 1,347
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276560' id='625118'>
<a class='timestamp' href='#625118'><time timestamp='2018-08-14T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
which includes some tests and stuff.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276560' id='625119'>
<a class='timestamp' href='#625119'><time timestamp='2018-08-14T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
obviously it&#x27;s bigger with the AVX versions and whatnot.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276620' id='625120'>
<a class='timestamp' href='#625120'><time timestamp='2018-08-14T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess AVX for Chacha, Poly1305 and newhope could follow later?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276680' id='625121'>
<a class='timestamp' href='#625121'><time timestamp='2018-08-14T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
as far as security goes, the interfaces is really trivial, so it&#x27;s easy to review that the worst risk it presents is not adding security, leaking something about its randomness, or being slow.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276680' id='625122'>
<a class='timestamp' href='#625122'><time timestamp='2018-08-14T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It also has been deployed in <u>_chrome_</u> as part of an expirement with ssl.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276680' id='625123'>
<a class='timestamp' href='#625123'><time timestamp='2018-08-14T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(they made an expiremental handshake for SSL that did the H(ECDH||newhope) thing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276680' id='625124'>
<a class='timestamp' href='#625124'><time timestamp='2018-08-14T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
implementation is here: <a href="https://github.com/newhopecrypto/newhope-usenix/tree/master/ref" class="link" target="_blank">https://github.com/newhopecrypto/newhope-usenix/tree/master/ref</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276740' id='625125'>
<a class='timestamp' href='#625125'><time timestamp='2018-08-14T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think the worst outcome from deploying it is that a month after wide deployment, the security is broken completely and we&#x27;re stuck carrying it around (and wasting cpu cycles on it) even though it does nothing. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276800' id='625126'>
<a class='timestamp' href='#625126'><time timestamp='2018-08-14T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I somehow would prefer a two step implementation (and eventually also specification) approach from current v1 non encrypted network protocol to a quantum safe v2 (or v2.1) protocol
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276800' id='625127'>
<a class='timestamp' href='#625127'><time timestamp='2018-08-14T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
ah, the torref/toravx implementations are apparently constant time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276860' id='625128'>
<a class='timestamp' href='#625128'><time timestamp='2018-08-14T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Is there an anti DPI argument for using 32byte keyhandshakes rather then 64byte?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276860' id='625129'>
<a class='timestamp' href='#625129'><time timestamp='2018-08-14T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: sad thing is that the quantum safe thing is probably not worth doing on its own. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276860' id='625130'>
<a class='timestamp' href='#625130'><time timestamp='2018-08-14T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: what would the extra 64 bytes be?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276860' id='625131'>
<a class='timestamp' href='#625131'><time timestamp='2018-08-14T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
er extra 32.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276920' id='625132'>
<a class='timestamp' href='#625132'><time timestamp='2018-08-14T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
if we want to add a flag but want to avoid 33bytes (or 34) due to DPI issues, we could pad up to 64? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534276980' id='625133'>
<a class='timestamp' href='#625133'><time timestamp='2018-08-14T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t think we want to avoid 33. We want to avoid fixed bytes. E.g. &quot;if bytes 32-45 are 0xdeadbeef... reject&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277040' id='625134'>
<a class='timestamp' href='#625134'><time timestamp='2018-08-14T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Oh that. So the xoring with the last pubkey byte for the flag could then be accptable... I think
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277040' id='625135'>
<a class='timestamp' href='#625135'><time timestamp='2018-08-14T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
right.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277100' id='625136'>
<a class='timestamp' href='#625136'><time timestamp='2018-08-14T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: why is upgrading the handshake later to include newhope be &quot;not worth doing on its own&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277100' id='625137'>
<a class='timestamp' href='#625137'><time timestamp='2018-08-14T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
you mean the additional (questionable) security versus the deployment hassle?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277100' id='625138'>
<a class='timestamp' href='#625138'><time timestamp='2018-08-14T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think upgrading the transport can be upgraded later easily enough that we don&#x27;t need to rush including it right now
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277160' id='625139'>
<a class='timestamp' href='#625139'><time timestamp='2018-08-14T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
because the security benefit is quite conjectural. so taking a network upgrade cycle, with incompatiblities and stuff, to maybe gain nothing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277160' id='625140'>
<a class='timestamp' href='#625140'><time timestamp='2018-08-14T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So for example I think to do newhope nicely later, just a flag isn&#x27;t enough.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277160' id='625141'>
<a class='timestamp' href='#625141'><time timestamp='2018-08-14T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
because you want the initator to send their DH value in the first message.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277220' id='625142'>
<a class='timestamp' href='#625142'><time timestamp='2018-08-14T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well I don&#x27;t think we need to rush for sure. But if nothing else it&#x27;s useful to think about how we would take the next step.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277220' id='625143'>
<a class='timestamp' href='#625143'><time timestamp='2018-08-14T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So lemme talk though my thought process a bit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277220' id='625144'>
<a class='timestamp' href='#625144'><time timestamp='2018-08-14T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
what if the flag comes first to the message content and length can change later?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277280' id='625145'>
<a class='timestamp' href='#625145'><time timestamp='2018-08-14T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
earlier today I was thinking &quot;we could deploy newhope by just brining up the secp256k1 encryption, then sending a rekey message that triggers upgrading.&quot;  but then I realized that runs into the problem we had before of having to do the keying twice-- once for each direction.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277340' id='625146'>
<a class='timestamp' href='#625146'><time timestamp='2018-08-14T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: how does the recipent even know the length?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277340' id='625147'>
<a class='timestamp' href='#625147'><time timestamp='2018-08-14T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(if its not fixed)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277340' id='625148'>
<a class='timestamp' href='#625148'><time timestamp='2018-08-14T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wahaha, the low-security version of newhope is called jarjar
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277340' id='625149'>
<a class='timestamp' href='#625149'><time timestamp='2018-08-14T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: right now,... is just looks for 32bytes, if it matches a version message, it transforms the bytes into a legacy v1 message container
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277400' id='625150'>
<a class='timestamp' href='#625150'><time timestamp='2018-08-14T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(and continues with legacy protocol)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277400' id='625151'>
<a class='timestamp' href='#625151'><time timestamp='2018-08-14T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
if not a version message, it tried the handshake
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277400' id='625152'>
<a class='timestamp' href='#625152'><time timestamp='2018-08-14T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
*tries
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277460' id='625153'>
<a class='timestamp' href='#625153'><time timestamp='2018-08-14T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that seems overly complicated
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277460' id='625154'>
<a class='timestamp' href='#625154'><time timestamp='2018-08-14T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
okay, so your point is that there could be extra data, but how does a current client know to ignore the extradata? e.g. why won&#x27;t that just look like an invalid encryption once the handshake completes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277460' id='625155'>
<a class='timestamp' href='#625155'><time timestamp='2018-08-14T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: idea how to make this simpler?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277460' id='625156'>
<a class='timestamp' href='#625156'><time timestamp='2018-08-14T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think you should just assume a connection is encrypted if the flag is set, and it will fail if it turns out it wasn&#x27;t encrypted
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277460' id='625157'>
<a class='timestamp' href='#625157'><time timestamp='2018-08-14T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
at which point you just disconnect and try another peer
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277520' id='625158'>
<a class='timestamp' href='#625158'><time timestamp='2018-08-14T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: I thought we want a mode where encryption is optional
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277520' id='625159'>
<a class='timestamp' href='#625159'><time timestamp='2018-08-14T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It is optional.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277520' id='625160'>
<a class='timestamp' href='#625160'><time timestamp='2018-08-14T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: how does this avoid an attack where the first peer you connect to gives you the encryption flag set for everyone, causing you to be unable to connect to most of the network?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277640' id='625161'>
<a class='timestamp' href='#625161'><time timestamp='2018-08-14T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I can&#x27;t follow. That would mean we drop every connection that failes to do a handshake (think of SPV clients, etc.)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277640' id='625162'>
<a class='timestamp' href='#625162'><time timestamp='2018-08-14T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: ah, for incoming connections!
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277640' id='625163'>
<a class='timestamp' href='#625163'><time timestamp='2018-08-14T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ugh
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277640' id='625164'>
<a class='timestamp' href='#625164'><time timestamp='2018-08-14T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I had the same confusion as sipa.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277640' id='625165'>
<a class='timestamp' href='#625165'><time timestamp='2018-08-14T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Outgoind is easy
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277640' id='625166'>
<a class='timestamp' href='#625166'><time timestamp='2018-08-14T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Incomming IMHO must be ready to detect a handshake OR a version legacy msg
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277700' id='625167'>
<a class='timestamp' href='#625167'><time timestamp='2018-08-14T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
unless they&#x27;re separate ports or something like that... but yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277700' id='625168'>
<a class='timestamp' href='#625168'><time timestamp='2018-08-14T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But code wise its simple: buffer the first 32bytes, check if it is (very likely) a version message and migrate the message type to a legacy message
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277700' id='625169'>
<a class='timestamp' href='#625169'><time timestamp='2018-08-14T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/commit/edfbd082af48f3a8f4447083e847e67aa4b2a40b#diff-9a82240fe7dfe86564178691cc57f2f1R791" class="link" target="_blank">https://github.com/bitcoin/bitcoin/commit/edfbd082af48f3a8f4447083e847e67aa4b2a40b#diff-9a82240fe7dfe86564178691cc57f2f1R791</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277760' id='625170'>
<a class='timestamp' href='#625170'><time timestamp='2018-08-14T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(&amp; avoid pubkeys that start with the network magic &amp; &#x27;version&#x27;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277760' id='625171'>
<a class='timestamp' href='#625171'><time timestamp='2018-08-14T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah yes, that seems reasonable
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277820' id='625172'>
<a class='timestamp' href='#625172'><time timestamp='2018-08-14T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
If the handshake flag would be the first byte, and the xor key the second, we could read to bytes and figure out if we need to buffer 64 or 32
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277820' id='625173'>
<a class='timestamp' href='#625173'><time timestamp='2018-08-14T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think it could just be &quot;pubkeys cannot start with the network magic&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277880' id='625174'>
<a class='timestamp' href='#625174'><time timestamp='2018-08-14T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Wouldn&#x27;t that reduce the possible key-space by 2^28?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277880' id='625175'>
<a class='timestamp' href='#625175'><time timestamp='2018-08-14T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess I&#x27;m wrong though. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277940' id='625176'>
<a class='timestamp' href='#625176'><time timestamp='2018-08-14T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
from 255 bits to 254.999999999664 bits of entropy
<br>
</div>

<div class='talk op-msg' data-timestamp='1534277940' id='625177'>
<a class='timestamp' href='#625177'><time timestamp='2018-08-14T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and not in a useful way that helps attacks regardless.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278000' id='625178'>
<a class='timestamp' href='#625178'><time timestamp='2018-08-14T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Okay. I see
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278000' id='625179'>
<a class='timestamp' href='#625179'><time timestamp='2018-08-14T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Is using the first pubkey bytes as flag xor key reasonable?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278060' id='625180'>
<a class='timestamp' href='#625180'><time timestamp='2018-08-14T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
can&#x27;t the flag be inside the encrypted stream?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278060' id='625181'>
<a class='timestamp' href='#625181'><time timestamp='2018-08-14T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
It can, but we then would assume that ECDH must always be done
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278060' id='625182'>
<a class='timestamp' href='#625182'><time timestamp='2018-08-14T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think that&#x27;s fine
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278060' id='625183'>
<a class='timestamp' href='#625183'><time timestamp='2018-08-14T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
now we wind back to my prior comment about upgrading and synchronizing both directions.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278120' id='625184'>
<a class='timestamp' href='#625184'><time timestamp='2018-08-14T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t mean a flag to signal upgrading
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278120' id='625185'>
<a class='timestamp' href='#625185'><time timestamp='2018-08-14T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess then we don&#x27;t need a flag, we can handle it with messages then
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278120' id='625186'>
<a class='timestamp' href='#625186'><time timestamp='2018-08-14T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just a flag that says &quot;this is protocol version X&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278120' id='625187'>
<a class='timestamp' href='#625187'><time timestamp='2018-08-14T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think it&#x27;s fine if ECDH is always done.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278120' id='625188'>
<a class='timestamp' href='#625188'><time timestamp='2018-08-14T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you don&#x27;t understand the flag, disconnect
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278120' id='625189'>
<a class='timestamp' href='#625189'><time timestamp='2018-08-14T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: why is re-keying in both directions a problem?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278120' id='625190'>
<a class='timestamp' href='#625190'><time timestamp='2018-08-14T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and in a new version, the RWLE can be mandatory in both directions, with no synchronization issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278120' id='625191'>
<a class='timestamp' href='#625191'><time timestamp='2018-08-14T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
twice the computation and overhead.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278180' id='625192'>
<a class='timestamp' href='#625192'><time timestamp='2018-08-14T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
AFAIK the current rekeying can only be initiated by the encryption responder (server) by sending a &quot;rekey&quot; message
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278180' id='625193'>
<a class='timestamp' href='#625193'><time timestamp='2018-08-14T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
both parties should be able to rekey
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278180' id='625194'>
<a class='timestamp' href='#625194'><time timestamp='2018-08-14T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or it should be automatic after a certain amount of data
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278180' id='625195'>
<a class='timestamp' href='#625195'><time timestamp='2018-08-14T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. 1GB is currently the specs and not below 10s
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278180' id='625196'>
<a class='timestamp' href='#625196'><time timestamp='2018-08-14T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: I pointed out before that we ought to support time based so that we get forward compromise resistance on low traffic links.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278240' id='625197'>
<a class='timestamp' href='#625197'><time timestamp='2018-08-14T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
also, is rekeying just hashing the existing encryption key, or is it a new ECDH negotiation?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278240' id='625198'>
<a class='timestamp' href='#625198'><time timestamp='2018-08-14T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
just hashing
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278240' id='625199'>
<a class='timestamp' href='#625199'><time timestamp='2018-08-14T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it should be the former.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278240' id='625200'>
<a class='timestamp' href='#625200'><time timestamp='2018-08-14T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
right.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278240' id='625201'>
<a class='timestamp' href='#625201'><time timestamp='2018-08-14T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
okay
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278240' id='625202'>
<a class='timestamp' href='#625202'><time timestamp='2018-08-14T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t see any value in repeating ECDH for incremental rekeying.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278240' id='625203'>
<a class='timestamp' href='#625203'><time timestamp='2018-08-14T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278300' id='625204'>
<a class='timestamp' href='#625204'><time timestamp='2018-08-14T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case, if your intention is to encrypt the protocol version that means the initator cannot send a version without an extra roundtrip.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278300' id='625205'>
<a class='timestamp' href='#625205'><time timestamp='2018-08-14T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t think that matters
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278300' id='625206'>
<a class='timestamp' href='#625206'><time timestamp='2018-08-14T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I guess we don&#x27;t really care too much about roundtrips, but it&#x27;s the consequence.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278300' id='625207'>
<a class='timestamp' href='#625207'><time timestamp='2018-08-14T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the responder picks the version of the protocl
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278300' id='625208'>
<a class='timestamp' href='#625208'><time timestamp='2018-08-14T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
of the initiator doesn&#x27;t like it, disconnect
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278300' id='625209'>
<a class='timestamp' href='#625209'><time timestamp='2018-08-14T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but the initator has to offer.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278360' id='625210'>
<a class='timestamp' href='#625210'><time timestamp='2018-08-14T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
or the responder will pick something the initator doesn&#x27;t support, gratitiously.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278360' id='625211'>
<a class='timestamp' href='#625211'><time timestamp='2018-08-14T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s no different than now
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278360' id='625212'>
<a class='timestamp' href='#625212'><time timestamp='2018-08-14T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So say, for example, you deploy newhope on your node... now you lose crypto to all existing peers? because you pick newhope and then they drop you?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278420' id='625213'>
<a class='timestamp' href='#625213'><time timestamp='2018-08-14T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah yes, i see; there is an assymetry in knowledge
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278420' id='625214'>
<a class='timestamp' href='#625214'><time timestamp='2018-08-14T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the initiator can be expected to know what the responder supports beforehand, but not the other way around
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278480' id='625215'>
<a class='timestamp' href='#625215'><time timestamp='2018-08-14T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Would that be an argument for the flag at the very beginning of the handshake?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278540' id='625216'>
<a class='timestamp' href='#625216'><time timestamp='2018-08-14T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
or, it&#x27;s just something that we&#x27;d have to handle with an additional round trip.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278540' id='625217'>
<a class='timestamp' href='#625217'><time timestamp='2018-08-14T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think that&#x27;s fine
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278600' id='625218'>
<a class='timestamp' href='#625218'><time timestamp='2018-08-14T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
e.g. ecdh-&gt;   &lt;-ecdh,enc(&lt;flags&gt;, extradata like a new hope handshake)  -&gt;enc(flags, payload)...
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278600' id='625219'>
<a class='timestamp' href='#625219'><time timestamp='2018-08-14T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But I currently don&#x27;t know how to handle the re-key sync problem,.. I guess dropping all messages after peer has sent the &quot;rekey&quot; message until it gots the &quot;rekey-ack&quot; response is a no go
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278660' id='625220'>
<a class='timestamp' href='#625220'><time timestamp='2018-08-14T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the rekey is determinstic.  it should just be you send a rekey message and then the very next byte is encrypted with the next key.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278660' id='625221'>
<a class='timestamp' href='#625221'><time timestamp='2018-08-14T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and do it separately for both directions
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278660' id='625222'>
<a class='timestamp' href='#625222'><time timestamp='2018-08-14T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
And have the rekey operate independantly for each direction.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278660' id='625223'>
<a class='timestamp' href='#625223'><time timestamp='2018-08-14T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rekeys are cheap, they&#x27;re fine to do independantly.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278660' id='625224'>
<a class='timestamp' href='#625224'><time timestamp='2018-08-14T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Ah yes. That would work.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278660' id='625225'>
<a class='timestamp' href='#625225'><time timestamp='2018-08-14T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I want to avoid doing DH protocols independantly even for a newhope upgrade though.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278720' id='625226'>
<a class='timestamp' href='#625226'><time timestamp='2018-08-14T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there could also be a reqrekey message message, which requests that the other party do a rekey, but it has no effect on the protocol until they respond with a rekey
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278720' id='625227'>
<a class='timestamp' href='#625227'><time timestamp='2018-08-14T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: I think instead you can just say that you have to do at least one rekey between two rekeys by the other side.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278780' id='625228'>
<a class='timestamp' href='#625228'><time timestamp='2018-08-14T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
or could an initiated rekey from peer A requires an rekeying from peer B within a timeout of X?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278780' id='625229'>
<a class='timestamp' href='#625229'><time timestamp='2018-08-14T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: then you get into a rekey looop for a link with latency higher than X. :P :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278780' id='625230'>
<a class='timestamp' href='#625230'><time timestamp='2018-08-14T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
But just saying that you must rekey if you have seen two rekeys in the other direction since the last time you rekeyed, I think doesn&#x27;t have that problem.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278780' id='625231'>
<a class='timestamp' href='#625231'><time timestamp='2018-08-14T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
heh... on dump implementations, yes. But point taken.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278840' id='625232'>
<a class='timestamp' href='#625232'><time timestamp='2018-08-14T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
or don&#x27;t even worry about it and just specify that you must rekey after 1hr or 1GB (whichever comes first). And anyone who doesn&#x27;t is non-conforming and if anyone cares, they could start banning based on the behavior.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278900' id='625233'>
<a class='timestamp' href='#625233'><time timestamp='2018-08-14T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. Seems the be required anyways.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534278960' id='625234'>
<a class='timestamp' href='#625234'><time timestamp='2018-08-14T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Okay. Thanks. Going back to the &quot;drawing board&quot; (specs and impl.).
<br>
</div>

<div class='talk op-msg' data-timestamp='1534279020' id='625235'>
<a class='timestamp' href='#625235'><time timestamp='2018-08-14T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i guess a rekey request is pointless; the other party could obey the request, but still keep the old encryption key in memory
<br>
</div>

<div class='talk op-msg' data-timestamp='1534279140' id='625236'>
<a class='timestamp' href='#625236'><time timestamp='2018-08-14T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yep.
<br>
</div>

</div>
</section>

</body>
</html>
