<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2020-11-08
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2020-11-08' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:17 UTC</pre>
<pre><a href="/bitcoin-core-dev/2020-10-08">&lt;</a><span class='header'>  November 2020   </span><a href="/bitcoin-core-dev/2020-12-08">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2020-11-01">1</a>  <a class="" href="/bitcoin-core-dev/2020-11-02">2</a>  <a class="" href="/bitcoin-core-dev/2020-11-03">3</a>  <a class="" href="/bitcoin-core-dev/2020-11-04">4</a>  <a class="" href="/bitcoin-core-dev/2020-11-05">5</a>  <a class="" href="/bitcoin-core-dev/2020-11-06">6</a>  <a class="" href="/bitcoin-core-dev/2020-11-07">7</a>  &#x000A; <a class="current" href="/bitcoin-core-dev/2020-11-08">8</a>  <a class="" href="/bitcoin-core-dev/2020-11-09">9</a> <a class="" href="/bitcoin-core-dev/2020-11-10">10</a> <a class="" href="/bitcoin-core-dev/2020-11-11">11</a> <a class="" href="/bitcoin-core-dev/2020-11-12">12</a> <a class="" href="/bitcoin-core-dev/2020-11-13">13</a> <a class="" href="/bitcoin-core-dev/2020-11-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-11-15">15</a> <a class="" href="/bitcoin-core-dev/2020-11-16">16</a> <a class="" href="/bitcoin-core-dev/2020-11-17">17</a> <a class="" href="/bitcoin-core-dev/2020-11-18">18</a> <a class="" href="/bitcoin-core-dev/2020-11-19">19</a> <a class="" href="/bitcoin-core-dev/2020-11-20">20</a> <a class="" href="/bitcoin-core-dev/2020-11-21">21</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-11-22">22</a> <a class="" href="/bitcoin-core-dev/2020-11-23">23</a> <a class="" href="/bitcoin-core-dev/2020-11-24">24</a> <a class="" href="/bitcoin-core-dev/2020-11-25">25</a> <a class="" href="/bitcoin-core-dev/2020-11-26">26</a> <a class="" href="/bitcoin-core-dev/2020-11-27">27</a> <a class="" href="/bitcoin-core-dev/2020-11-28">28</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-11-29">29</a> <a class="" href="/bitcoin-core-dev/2020-11-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1604813700' id='412094'>
<a class='timestamp' href='#412094'><time timestamp='2020-11-08T05:35:00Z'>05:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
d/query gwillen 
<br>
</div>

<div class='talk op-msg' data-timestamp='1604813700' id='412095'>
<a class='timestamp' href='#412095'><time timestamp='2020-11-08T05:35:00Z'>05:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oops
<br>
</div>

<div class='talk op-msg' data-timestamp='1604820120' id='412096'>
<a class='timestamp' href='#412096'><time timestamp='2020-11-08T07:22:00Z'>07:22</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake opened pull request #20336: build: automatically determine macOS base translations (master...auto_find_translations) <a href="https://github.com/bitcoin/bitcoin/pull/20336" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20336</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1604837700' id='412097'>
<a class='timestamp' href='#412097'><time timestamp='2020-11-08T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #20339: ci: Run macos ci config on cirrus (master...2011-moreCirrus) <a href="https://github.com/bitcoin/bitcoin/pull/20339" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20339</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1604859420' id='412098'>
<a class='timestamp' href='#412098'><time timestamp='2020-11-08T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanliao1989 opened pull request #20343: Update README.md (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/20343" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20343</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1604860380' id='412099'>
<a class='timestamp' href='#412099'><time timestamp='2020-11-08T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #20343: Update README.md (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/20343" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20343</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1604862000' id='412100'>
<a class='timestamp' href='#412100'><time timestamp='2020-11-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theStack opened pull request #20344: wallet: fix scanning progress calculation for single block range (master...20201108-wallet-avoid_div_by_zero_on_single_block_rescan) <a href="https://github.com/bitcoin/bitcoin/pull/20344" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20344</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1604865480' id='412101'>
<a class='timestamp' href='#412101'><time timestamp='2020-11-08T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] SatoshiBitcoin opened pull request #20345: Update README.md (master...Version1) <a href="https://github.com/bitcoin/bitcoin/pull/20345" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20345</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1604865540' id='412102'>
<a class='timestamp' href='#412102'><time timestamp='2020-11-08T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] SatoshiBitcoin closed pull request #20345: Update README.md (master...Version1) <a href="https://github.com/bitcoin/bitcoin/pull/20345" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20345</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1604866860' id='412103'>
<a class='timestamp' href='#412103'><time timestamp='2020-11-08T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
achow101: i think there is a bug in CreateTransaction related to bnb .. can you sanity check me before i file a bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1604866860' id='412104'>
<a class='timestamp' href='#412104'><time timestamp='2020-11-08T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
andytoshi: what&#x27;s the bug?
<br>
</div>

<div class='talk op-msg' data-timestamp='1604866860' id='412105'>
<a class='timestamp' href='#412105'><time timestamp='2020-11-08T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
one sec, typing
<br>
</div>

<div class='talk op-msg' data-timestamp='1604866920' id='412106'>
<a class='timestamp' href='#412106'><time timestamp='2020-11-08T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
the problem is that when we create txNew for the purpose of getting a tx size to estimate the fee required, in this line <a href="https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L2940" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L2940</a> we selectively add a change output based on whether bnb was used by SelectCoins
<br>
</div>

<div class='talk op-msg' data-timestamp='1604866920' id='412107'>
<a class='timestamp' href='#412107'><time timestamp='2020-11-08T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
so far so good
<br>
</div>

<div class='talk op-msg' data-timestamp='1604866980' id='412108'>
<a class='timestamp' href='#412108'><time timestamp='2020-11-08T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
but .. if we use bnb, but we don&#x27;t get enough fees, and we have subtractfeefromeamount on, we hit this line <a href="https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L3038" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L3038</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1604866980' id='412109'>
<a class='timestamp' href='#412109'><time timestamp='2020-11-08T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
which says &quot;SelectCoins succeeded, we didn&#x27;t hit the fee we needed, but that&#x27;s fine, we can increase the fee by subtracting from outputs. turn off pick_new_inputs and loop again&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867040' id='412110'>
<a class='timestamp' href='#412110'><time timestamp='2020-11-08T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
but then, when we do the next loop iteration, we skip SelectCoins and just set bnb_used to false <a href="https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L2928" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L2928</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867100' id='412111'>
<a class='timestamp' href='#412111'><time timestamp='2020-11-08T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
which means that when we recalculate nFeeRequired, we&#x27;ll get a higher number than we did before. we set nFeeRet to nFeeRequired at the end of the previous iteration. so now this check will fail <a href="https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L2984" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L2984</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867100' id='412112'>
<a class='timestamp' href='#412112'><time timestamp='2020-11-08T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
..and the whole loop will fail, because we say &quot;well, we didn&#x27;t hit our fee target, and pick_new_inputs was off, so we must be screwed&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867160' id='412113'>
<a class='timestamp' href='#412113'><time timestamp='2020-11-08T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
but actually the problem is just that we didn&#x27;t compute nFeeRequired consistently from one iteration to the next
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867160' id='412114'>
<a class='timestamp' href='#412114'><time timestamp='2020-11-08T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
(end of description)
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867160' id='412115'>
<a class='timestamp' href='#412115'><time timestamp='2020-11-08T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
how is bnb used but not enough fees?
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867160' id='412116'>
<a class='timestamp' href='#412116'><time timestamp='2020-11-08T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ARGH, google has decided &quot;dnsseed.bitcoin.dashjr.org&quot; has deceptive content is now blacklisting all of dashjr.org -.-
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867160' id='412117'>
<a class='timestamp' href='#412117'><time timestamp='2020-11-08T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
with subtractfeefromamount, unless the amount is less than the fees?
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867220' id='412118'>
<a class='timestamp' href='#412118'><time timestamp='2020-11-08T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
lemme take a look
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867220' id='412119'>
<a class='timestamp' href='#412119'><time timestamp='2020-11-08T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: bluematt: cdecker: jonasschnelli: petertodd: sjors: emzy: this will probably hit you soon too
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867460' id='412120'>
<a class='timestamp' href='#412120'><time timestamp='2020-11-08T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
luke-jr: confirmed
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867460' id='412121'>
<a class='timestamp' href='#412121'><time timestamp='2020-11-08T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
&quot;Deceptive site ahead. Firefox blocked this page because it may trick you into doing something dangerous like installing software or revealing personal information like passwords or credit cards. Advisory provided by Google Safe Browsing.&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867460' id='412122'>
<a class='timestamp' href='#412122'><time timestamp='2020-11-08T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-16'> emzy</span>&gt;
luke-jr: benause of the dnsseed. It has nothing to do with http...
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867520' id='412123'>
<a class='timestamp' href='#412123'><time timestamp='2020-11-08T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-16'> emzy</span>&gt;
<a href="https://dashjr.org/" class="link" target="_blank">https://dashjr.org/</a> works vor me in Firefox.
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867580' id='412124'>
<a class='timestamp' href='#412124'><time timestamp='2020-11-08T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
dnsseed.bitcoin.dashjr.org has been reported as a deceptive site. You can report a detection problem -&gt; I filed an report
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867580' id='412125'>
<a class='timestamp' href='#412125'><time timestamp='2020-11-08T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
andytoshi: regardless, i&#x27;m trying to get at least the effective value pr for the next release so there won&#x27;t be any such bug as the loop is removed
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867760' id='412126'>
<a class='timestamp' href='#412126'><time timestamp='2020-11-08T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-16'> emzy</span>&gt;
luke-jr: you are sure that they will blacklist all of dashjr.org? I think the http(s) blacklist of dnsseed.bitcoin.dashjr.org is right. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867760' id='412127'>
<a class='timestamp' href='#412127'><time timestamp='2020-11-08T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
luke-jr: is the warning part of chrome or is it some dns thing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867760' id='412128'>
<a class='timestamp' href='#412128'><time timestamp='2020-11-08T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
or something else?
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867820' id='412129'>
<a class='timestamp' href='#412129'><time timestamp='2020-11-08T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
My DNS seed runs no http site (I guess).
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867820' id='412130'>
<a class='timestamp' href='#412130'><time timestamp='2020-11-08T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
achow101: cool, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867820' id='412131'>
<a class='timestamp' href='#412131'><time timestamp='2020-11-08T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Or does it even matter what runs on the seed machine?
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867820' id='412132'>
<a class='timestamp' href='#412132'><time timestamp='2020-11-08T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
though there&#x27;s maybe an 80% chance this is actually some elements weirdness related to how we account for change in coin selection
<br>
</div>

<div class='talk op-msg' data-timestamp='1604867880' id='412133'>
<a class='timestamp' href='#412133'><time timestamp='2020-11-08T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-16'> emzy</span>&gt;
jonasschnelli: the A records you deliver are not your IP addresses anyways.
<br>
</div>

<div class='talk op-msg' data-timestamp='1604868000' id='412134'>
<a class='timestamp' href='#412134'><time timestamp='2020-11-08T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-16'> emzy</span>&gt;
As long as only the whole domain is blacklisted for browsing it is totaly fine.
<br>
</div>

<div class='talk op-msg' data-timestamp='1604868120' id='412135'>
<a class='timestamp' href='#412135'><time timestamp='2020-11-08T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-16'> emzy</span>&gt;
I would argue it is right to do it. Because it could lead to a malicious site.
<br>
</div>

<div class='talk op-msg' data-timestamp='1604868300' id='412136'>
<a class='timestamp' href='#412136'><time timestamp='2020-11-08T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
achow101: oh i think my issue may have been resolved in <a href="https://github.com/bitcoin/bitcoin/pull/17458" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/17458</a> 
<br>
</div>

<div class='talk op-msg' data-timestamp='1604868300' id='412137'>
<a class='timestamp' href='#412137'><time timestamp='2020-11-08T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
certainly the logic before that PR is way harder to understand
<br>
</div>

<div class='talk op-msg' data-timestamp='1604868360' id='412138'>
<a class='timestamp' href='#412138'><time timestamp='2020-11-08T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonatack: well, the dnsseed domain probably should get flagged - the problem is they&#x27;re extending it to my entire domain :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1604868420' id='412139'>
<a class='timestamp' href='#412139'><time timestamp='2020-11-08T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
achow101: I assume it&#x27;s part of Google&#x27;s existing censorship framework
<br>
</div>

<div class='talk op-msg' data-timestamp='1604868420' id='412140'>
<a class='timestamp' href='#412140'><time timestamp='2020-11-08T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: it points at random IPs, which may be running malicious webservers..
<br>
</div>

<div class='talk op-msg' data-timestamp='1604869140' id='412141'>
<a class='timestamp' href='#412141'><time timestamp='2020-11-08T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. That. But it has always been that way.
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871420' id='412142'>
<a class='timestamp' href='#412142'><time timestamp='2020-11-08T21:37:00Z'>21:37</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
achow101: i think i&#x27;m right, this is a core thing not an elements thing ... <a href="https://github.com/bitcoin/bitcoin/blob/7e373294a5ae819099c39d9d03d1f5a311d63cfc/src/wallet/wallet.cpp#L3016-L3019" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/7e373294a5ae819099c39d9d03d1f5a311d63cfc/src/wallet/wallet.cpp#L3016-L3019</a> this comment says &quot;nFeeNeeded should not have changed&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871420' id='412143'>
<a class='timestamp' href='#412143'><time timestamp='2020-11-08T21:37:00Z'>21:37</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
20:26 &lt; achow101&gt; how is bnb used but not enough fees?
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871420' id='412144'>
<a class='timestamp' href='#412144'><time timestamp='2020-11-08T21:37:00Z'>21:37</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
what&#x27;s happening here is that bnb is used and it gives us -some- fees, but if we&#x27;re subtracting fees from outputs it doesn&#x27;t bother trying to give us enough
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871480' id='412145'>
<a class='timestamp' href='#412145'><time timestamp='2020-11-08T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I suppose bnb assumes that the output is enough to cover the fees
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871480' id='412146'>
<a class='timestamp' href='#412146'><time timestamp='2020-11-08T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
but that may not be the case
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871480' id='412147'>
<a class='timestamp' href='#412147'><time timestamp='2020-11-08T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
the logic is that we&#x27;ll fail the nFeesRet &gt;= nFeesNeeded check, but then we&#x27;ll go around the loop again
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871480' id='412148'>
<a class='timestamp' href='#412148'><time timestamp='2020-11-08T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
it is the case
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871480' id='412149'>
<a class='timestamp' href='#412149'><time timestamp='2020-11-08T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
but the code is still wrong
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871540' id='412150'>
<a class='timestamp' href='#412150'><time timestamp='2020-11-08T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
in my code the output is more than enough to cover the fees, the problem is that we don&#x27;t subtract enough (or rather, we subtract enough but then incorrectly think we should&#x27;ve subtracted more)
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871540' id='412151'>
<a class='timestamp' href='#412151'><time timestamp='2020-11-08T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
do you have a particular test case I can try?
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871540' id='412152'>
<a class='timestamp' href='#412152'><time timestamp='2020-11-08T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
sorta, i can give you an elements functional test from before #17458
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871540' id='412153'>
<a class='timestamp' href='#412153'><time timestamp='2020-11-08T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/17458" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/17458</a> | Refactor OutputGroup effective value calculations and filtering to occur within the struct by achow101 · Pull Request #17458 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871540' id='412154'>
<a class='timestamp' href='#412154'><time timestamp='2020-11-08T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
let me try to extract a bitcoin example
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871600' id='412155'>
<a class='timestamp' href='#412155'><time timestamp='2020-11-08T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
because i&#x27;m pretty confident that the issue has nothingh to do with elements
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871720' id='412156'>
<a class='timestamp' href='#412156'><time timestamp='2020-11-08T21:42:00Z'>21:42</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
Are you hitting the &quot;Transaction fee and change calculation failed&quot; error?
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871720' id='412157'>
<a class='timestamp' href='#412157'><time timestamp='2020-11-08T21:42:00Z'>21:42</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
yep
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871780' id='412158'>
<a class='timestamp' href='#412158'><time timestamp='2020-11-08T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] tylerchambers opened pull request #20346: script: modify security-check.py to use &quot;==&quot; instead of &quot;is&quot; for literal comparison (master...literal-comparison-update) <a href="https://github.com/bitcoin/bitcoin/pull/20346" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20346</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1604871780' id='412159'>
<a class='timestamp' href='#412159'><time timestamp='2020-11-08T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
i think, if you have a wallet where bnb can solve exactly (say you have two 10btc inputs and want a 20btc output) and you put subtractfeesfromoutput on, you&#x27;ll trigger this
<br>
</div>

<div class='talk op-msg' data-timestamp='1604872260' id='412160'>
<a class='timestamp' href='#412160'><time timestamp='2020-11-08T21:51:00Z'>21:51</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
andytoshi: just tried, and nope
<br>
</div>

<div class='talk op-msg' data-timestamp='1604872440' id='412161'>
<a class='timestamp' href='#412161'><time timestamp='2020-11-08T21:54:00Z'>21:54</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
hmmmm, i don&#x27;t understand. i&#x27;ll have to run it myself with a pile of logging added
<br>
</div>

<div class='talk op-msg' data-timestamp='1604872500' id='412162'>
<a class='timestamp' href='#412162'><time timestamp='2020-11-08T21:55:00Z'>21:55</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
can you push a diff somewhere to add a test case?
<br>
</div>

<div class='talk op-msg' data-timestamp='1604872500' id='412163'>
<a class='timestamp' href='#412163'><time timestamp='2020-11-08T21:55:00Z'>21:55</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
since you have one
<br>
</div>

<div class='talk op-msg' data-timestamp='1604872860' id='412164'>
<a class='timestamp' href='#412164'><time timestamp='2020-11-08T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
can i get log output from unit tests?
<br>
</div>

<div class='talk op-msg' data-timestamp='1604872860' id='412165'>
<a class='timestamp' href='#412165'><time timestamp='2020-11-08T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
unit tests make a dir in /tmp that should have logs
<br>
</div>

<div class='talk op-msg' data-timestamp='1604874000' id='412166'>
<a class='timestamp' href='#412166'><time timestamp='2020-11-08T22:20:00Z'>22:20</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
andytoshi: <a href="https://github.com/achow101/bitcoin/commit/2c08a27ea062e4247b3f53bcd296429a4ca9b4a3" class="link" target="_blank">https://github.com/achow101/bitcoin/commit/2c08a27ea062e4247b3f53bcd296429a4ca9b4a3</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1604874540' id='412167'>
<a class='timestamp' href='#412167'><time timestamp='2020-11-08T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1604874540' id='412168'>
<a class='timestamp' href='#412168'><time timestamp='2020-11-08T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
i almost have a unit test, i am just trying to set a non-zero feerate without segfaulting..
<br>
</div>

</div>
</section>

</body>
</html>
