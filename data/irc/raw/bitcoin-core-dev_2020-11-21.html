<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2020-11-21
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2020-11-21' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:17 UTC</pre>
<pre><a href="/bitcoin-core-dev/2020-10-21">&lt;</a><span class='header'>  November 2020   </span><a href="/bitcoin-core-dev/2020-12-21">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2020-11-01">1</a>  <a class="" href="/bitcoin-core-dev/2020-11-02">2</a>  <a class="" href="/bitcoin-core-dev/2020-11-03">3</a>  <a class="" href="/bitcoin-core-dev/2020-11-04">4</a>  <a class="" href="/bitcoin-core-dev/2020-11-05">5</a>  <a class="" href="/bitcoin-core-dev/2020-11-06">6</a>  <a class="" href="/bitcoin-core-dev/2020-11-07">7</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2020-11-08">8</a>  <a class="" href="/bitcoin-core-dev/2020-11-09">9</a> <a class="" href="/bitcoin-core-dev/2020-11-10">10</a> <a class="" href="/bitcoin-core-dev/2020-11-11">11</a> <a class="" href="/bitcoin-core-dev/2020-11-12">12</a> <a class="" href="/bitcoin-core-dev/2020-11-13">13</a> <a class="" href="/bitcoin-core-dev/2020-11-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-11-15">15</a> <a class="" href="/bitcoin-core-dev/2020-11-16">16</a> <a class="" href="/bitcoin-core-dev/2020-11-17">17</a> <a class="" href="/bitcoin-core-dev/2020-11-18">18</a> <a class="" href="/bitcoin-core-dev/2020-11-19">19</a> <a class="" href="/bitcoin-core-dev/2020-11-20">20</a> <a class="current" href="/bitcoin-core-dev/2020-11-21">21</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-11-22">22</a> <a class="" href="/bitcoin-core-dev/2020-11-23">23</a> <a class="" href="/bitcoin-core-dev/2020-11-24">24</a> <a class="" href="/bitcoin-core-dev/2020-11-25">25</a> <a class="" href="/bitcoin-core-dev/2020-11-26">26</a> <a class="" href="/bitcoin-core-dev/2020-11-27">27</a> <a class="" href="/bitcoin-core-dev/2020-11-28">28</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-11-29">29</a> <a class="" href="/bitcoin-core-dev/2020-11-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1605927480' id='414620'>
<a class='timestamp' href='#414620'><time timestamp='2020-11-21T02:58:00Z'>02:58</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake closed pull request #20251: Move major version to first version integer as specified by SemVer (master...semver2) <a href="https://github.com/bitcoin/bitcoin/pull/20251" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20251</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1605941340' id='414621'>
<a class='timestamp' href='#414621'><time timestamp='2020-11-21T06:49:00Z'>06:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 4 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/d4159984c360...816132e6eb23" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/d4159984c360...816132e6eb23</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1605941340' id='414622'>
<a class='timestamp' href='#414622'><time timestamp='2020-11-21T06:49:00Z'>06:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 1b3d700 Jon Atack: Allow zero-fee fundrawtxn and walletcreatefundedpsbt calls
<br>
</div>

<div class='talk op-msg' data-timestamp='1605941340' id='414623'>
<a class='timestamp' href='#414623'><time timestamp='2020-11-21T06:49:00Z'>06:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 3f1e10b Jon Atack: Update feeRate (BTC/kvB) to fee_rate (sat/vB) in wallet_bumpfee
<br>
</div>

<div class='talk op-msg' data-timestamp='1605941340' id='414624'>
<a class='timestamp' href='#414624'><time timestamp='2020-11-21T06:49:00Z'>06:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 9f08780 Jon Atack: Use the correct incremental fee constant in bumpfee help
<br>
</div>

<div class='talk op-msg' data-timestamp='1605941400' id='414625'>
<a class='timestamp' href='#414625'><time timestamp='2020-11-21T06:50:00Z'>06:50</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #20426: wallet: allow zero-fee fundrawtransaction/walletcreatefundedpsbt and other fixes (master...fee_rate_followups) <a href="https://github.com/bitcoin/bitcoin/pull/20426" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20426</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1605948060' id='414626'>
<a class='timestamp' href='#414626'><time timestamp='2020-11-21T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
achow101: if you wanted  to run a test build, I have a branch here that seems to achieve the same thing as 20436, but maybe slightly less &quot;nasty&quot;: <a href="https://github.com/fanquake/bitcoin/commits/no_echo_fix_clang_qt_determinism_backported" class="link" target="_blank">https://github.com/fanquake/bitcoin/commits/no_echo_fix_clang_qt_determinism_backported</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1605948600' id='414627'>
<a class='timestamp' href='#414627'><time timestamp='2020-11-21T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
O3 is the default?
<br>
</div>

<div class='talk op-msg' data-timestamp='1605948720' id='414628'>
<a class='timestamp' href='#414628'><time timestamp='2020-11-21T08:52:00Z'>08:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the highest optimization level also has the highest risk of exposing compiler issues, wouldn&#x27;t mind turning down the whole thing to O2
<br>
</div>

<div class='talk op-msg' data-timestamp='1605950280' id='414629'>
<a class='timestamp' href='#414629'><time timestamp='2020-11-21T09:18:00Z'>09:18</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus: I havenâ€™t looked at the qt code, but yes apparently so.
<br>
</div>

<div class='talk op-msg' data-timestamp='1605951660' id='414630'>
<a class='timestamp' href='#414630'><time timestamp='2020-11-21T09:41:00Z'>09:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: but making it macos scoped is a good idea at least I guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1605951840' id='414631'>
<a class='timestamp' href='#414631'><time timestamp='2020-11-21T09:44:00Z'>09:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it looks like mypy is not running on the python scripts in contrib/devtools in the CI
<br>
</div>

<div class='talk op-msg' data-timestamp='1605951840' id='414632'>
<a class='timestamp' href='#414632'><time timestamp='2020-11-21T09:44:00Z'>09:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
my glaring mistake in read_symbols in #20434 just passed (I&#x27;ve tried with mypy locally and did complain there)
<br>
</div>

<div class='talk op-msg' data-timestamp='1605951900' id='414633'>
<a class='timestamp' href='#414633'><time timestamp='2020-11-21T09:45:00Z'>09:45</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/20434" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/20434</a> | contrib: Parse ELF directly for symbol and security checks by laanwj Â· Pull Request #20434 Â· bitcoin/bitcoin Â· GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1605951960' id='414634'>
<a class='timestamp' href='#414634'><time timestamp='2020-11-21T09:46:00Z'>09:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
not a very important concern but I guess if we have these type specifications and don&#x27;t check them they&#x27;ll be out of whack complately in no time
<br>
</div>

<div class='talk op-msg' data-timestamp='1605952260' id='414635'>
<a class='timestamp' href='#414635'><time timestamp='2020-11-21T09:51:00Z'>09:51</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus: yea I added most of the annotations, but we never hooked up a linter. Probably worth it now that you&#x27;re writing pixie from scratch
<br>
</div>

<div class='talk op-msg' data-timestamp='1605952380' id='414636'>
<a class='timestamp' href='#414636'><time timestamp='2020-11-21T09:53:00Z'>09:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;ve tried to change the linter to mypy all .py files it gives a weird error about a duplicate module &#x27;test_runner&#x27; (which should be allowed they&#x27;re in different directories), so I see why it&#x27;s only enabled for specific paths
<br>
</div>

<div class='talk op-msg' data-timestamp='1605952440' id='414637'>
<a class='timestamp' href='#414637'><time timestamp='2020-11-21T09:54:00Z'>09:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
aha it needs to be run per package you can&#x27;t just run it over the whole tree <a href="https://github.com/python/mypy/issues/4008" class="link" target="_blank">https://github.com/python/mypy/issues/4008</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1605952500' id='414638'>
<a class='timestamp' href='#414638'><time timestamp='2020-11-21T09:55:00Z'>09:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fair enough I&#x27;ll just add contrib/devtools though there are some more things that need to be fixed before it passes (not caused by my PR)
<br>
</div>

<div class='talk op-msg' data-timestamp='1605952560' id='414639'>
<a class='timestamp' href='#414639'><time timestamp='2020-11-21T09:56:00Z'>09:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and I don&#x27;t even have type annotations in pixie itself yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1605952620' id='414640'>
<a class='timestamp' href='#414640'><time timestamp='2020-11-21T09:57:00Z'>09:57</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
I&#x27;m happy to fix up anything else in there
<br>
</div>

<div class='talk op-msg' data-timestamp='1605952800' id='414641'>
<a class='timestamp' href='#414641'><time timestamp='2020-11-21T10:00:00Z'>10:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
two in circular-dependencies and one in security-check.py to do with macos: <a href="https://0bin.net/paste/TbGa7dzE#1zLWR4E0d6EA04YtkIEq5Ss3ZuGUljw7Hru9PxEkvMZ" class="link" target="_blank">https://0bin.net/paste/TbGa7dzE#1zLWR4E0d6EA04YtkIEq5Ss3ZuGUljw7Hru9PxEkvMZ</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1605952800' id='414642'>
<a class='timestamp' href='#414642'><time timestamp='2020-11-21T10:00:00Z'>10:00</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/1" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/1</a> | JSON-RPC support for mobile devices (&quot;ultra-lightweight&quot; clients) Â· Issue #1 Â· bitcoin/bitcoin Â· GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1605952980' id='414643'>
<a class='timestamp' href='#414643'><time timestamp='2020-11-21T10:03:00Z'>10:03</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
cool
<br>
</div>

<div class='talk op-msg' data-timestamp='1605956940' id='414644'>
<a class='timestamp' href='#414644'><time timestamp='2020-11-21T11:09:00Z'>11:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gah adding type hints to pixie turns out to kind of annoying as all the structures are dynamically generated, so you get all kinds of errors like error: &quot;Symbol&quot; has no attribute &quot;st_name&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1605957000' id='414645'>
<a class='timestamp' href='#414645'><time timestamp='2020-11-21T11:10:00Z'>11:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and adding manual hints for all of those would make the code three times longer or so, which feels like fighting python instead of using it
<br>
</div>

<div class='talk op-msg' data-timestamp='1605957660' id='414646'>
<a class='timestamp' href='#414646'><time timestamp='2020-11-21T11:21:00Z'>11:21</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Oh nooo
<br>
</div>

<div class='talk op-msg' data-timestamp='1605958320' id='414647'>
<a class='timestamp' href='#414647'><time timestamp='2020-11-21T11:32:00Z'>11:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;m thinking of something quite evil: are the <u>__annotations__</u> ordered? if so, I could do it the other way around and generate the Structs() from them by defining the various Elf integer types, this would even make the code more similar to elf.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1605958440' id='414648'>
<a class='timestamp' href='#414648'><time timestamp='2020-11-21T11:34:00Z'>11:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
nah don&#x27;t know if I&#x27;m actually gonig to do it, I think the code is fine as-is, could just add a workaround to ElfRecord for mypy to ignore it
<br>
</div>

<div class='talk op-msg' data-timestamp='1605958560' id='414649'>
<a class='timestamp' href='#414649'><time timestamp='2020-11-21T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
_base = None  # type: Any
<br>
</div>

<div class='talk op-msg' data-timestamp='1605958560' id='414650'>
<a class='timestamp' href='#414650'><time timestamp='2020-11-21T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
class ELFRecord(_base):
<br>
</div>

<div class='talk op-msg' data-timestamp='1605958560' id='414651'>
<a class='timestamp' href='#414651'><time timestamp='2020-11-21T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
tada
<br>
</div>

<div class='talk op-msg' data-timestamp='1605958920' id='414652'>
<a class='timestamp' href='#414652'><time timestamp='2020-11-21T11:42:00Z'>11:42</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
hehe
<br>
</div>

<div class='talk op-msg' data-timestamp='1605958920' id='414653'>
<a class='timestamp' href='#414653'><time timestamp='2020-11-21T11:42:00Z'>11:42</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Any is the get out of jail free card
<br>
</div>

<div class='talk op-msg' data-timestamp='1605959160' id='414654'>
<a class='timestamp' href='#414654'><time timestamp='2020-11-21T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fwiw it <b>*does seem*</b> <u>__annotations__</u> is guaranteed to be ordered as in the definitions so you can use type annotations for defining ordered records <a href="https://stackoverflow.com/questions/64444638/is-the-order-of-entries-in-class-annotations-consistent-with-their-definitio" class="link" target="_blank">https://stackoverflow.com/questions/64444638/is-the-order-of-entries-in-class-annotations-consistent-with-their-definitio</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1605960180' id='414655'>
<a class='timestamp' href='#414655'><time timestamp='2020-11-21T12:03:00Z'>12:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
inheriting from types.SimpleNamespace works too
<br>
</div>

<div class='talk op-msg' data-timestamp='1605960240' id='414656'>
<a class='timestamp' href='#414656'><time timestamp='2020-11-21T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
much less ugly
<br>
</div>

<div class='talk op-msg' data-timestamp='1605960300' id='414657'>
<a class='timestamp' href='#414657'><time timestamp='2020-11-21T12:05:00Z'>12:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and you get a sensible <u>__repr__</u> for free, yippie
<br>
</div>

<div class='talk op-msg' data-timestamp='1605964800' id='414658'>
<a class='timestamp' href='#414658'><time timestamp='2020-11-21T13:20:00Z'>13:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
pushed the mypy annotations; modern python is pretty neat, I may still do the annotation-based structure generation but we already went a long way from parsing the humongous elfread output to this, I think what would be nice is tests that it works for the range of architectures we support, although the guix/gitian run will help at least a bit there
<br>
</div>

<div class='talk op-msg' data-timestamp='1605964920' id='414659'>
<a class='timestamp' href='#414659'><time timestamp='2020-11-21T13:22:00Z'>13:22</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus: sounds good. Looking forward to having a review
<br>
</div>

<div class='talk op-msg' data-timestamp='1605964920' id='414660'>
<a class='timestamp' href='#414660'><time timestamp='2020-11-21T13:22:00Z'>13:22</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
This new code should be must nicer going forward
<br>
</div>

<div class='talk op-msg' data-timestamp='1605965400' id='414661'>
<a class='timestamp' href='#414661'><time timestamp='2020-11-21T13:30:00Z'>13:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1605966420' id='414662'>
<a class='timestamp' href='#414662'><time timestamp='2020-11-21T13:47:00Z'>13:47</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh apparently there is typing.Annotated / PEP 593 to do exactly what I wanted to do (e.g. for annotate fields as struct types, it even has a hypothetical &#x27;struct2&#x27; as exmple), buuut it&#x27;s python 3.9+ ðŸ¤¦ 
<br>
</div>

<div class='talk op-msg' data-timestamp='1605966540' id='414663'>
<a class='timestamp' href='#414663'><time timestamp='2020-11-21T13:49:00Z'>13:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;ll leave it for a future TODO
<br>
</div>

<div class='talk op-msg' data-timestamp='1605966840' id='414664'>
<a class='timestamp' href='#414664'><time timestamp='2020-11-21T13:54:00Z'>13:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
let&#x27;s see if I can create a lxc environment with alll the cross compilers and create some testing for the symbols/versions detection
<br>
</div>

<div class='talk op-msg' data-timestamp='1605966960' id='414665'>
<a class='timestamp' href='#414665'><time timestamp='2020-11-21T13:56:00Z'>13:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake opened pull request #20440: build: fix determinism issue when building qt with Clang 8 (master...no_echo_fix_clang_qt_determinism) <a href="https://github.com/bitcoin/bitcoin/pull/20440" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20440</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1605967020' id='414666'>
<a class='timestamp' href='#414666'><time timestamp='2020-11-21T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
That&#x27;s enough Qt for one Saturday. Good chance we wont even use that patch heh
<br>
</div>

<div class='talk op-msg' data-timestamp='1605967140' id='414667'>
<a class='timestamp' href='#414667'><time timestamp='2020-11-21T13:59:00Z'>13:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
nice! yeah I still think the most effortless and straightforward &quot;fix&quot; seems be to bite the bullet and use llvm 9, but, dunno what the risks of being out of whack with apple&#x27;s compiler entail really
<br>
</div>

<div class='talk op-msg' data-timestamp='1605967200' id='414668'>
<a class='timestamp' href='#414668'><time timestamp='2020-11-21T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Yea, that&#x27;s probably what we&#x27;ll end  up doing for 22.0. Don&#x27;t think we want to be swapping compilers last minute pre-release though.
<br>
</div>

<div class='talk op-msg' data-timestamp='1605967200' id='414669'>
<a class='timestamp' href='#414669'><time timestamp='2020-11-21T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well it&#x27;s rc1 :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1605967260' id='414670'>
<a class='timestamp' href='#414670'><time timestamp='2020-11-21T14:01:00Z'>14:01</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
the first of many perhaps
<br>
</div>

<div class='talk op-msg' data-timestamp='1605967260' id='414671'>
<a class='timestamp' href='#414671'><time timestamp='2020-11-21T14:01:00Z'>14:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s what I mean, we don&#x27;t actually have a release yet, rc1 can be considered non-existent so rc2 is rc1
<br>
</div>

<div class='talk op-msg' data-timestamp='1605967260' id='414672'>
<a class='timestamp' href='#414672'><time timestamp='2020-11-21T14:01:00Z'>14:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
effectively
<br>
</div>

<div class='talk op-msg' data-timestamp='1605976440' id='414673'>
<a class='timestamp' href='#414673'><time timestamp='2020-11-21T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
fanquake: I have a third solution. I have a patch to qt_intersect_spans that doesn&#x27;t trigger the bug in llvm. I did 40 or so gitian builds overnight and they all get the same result. <a href="https://github.com/achow101/bitcoin/tree/0.21-qpainter-fix" class="link" target="_blank">https://github.com/achow101/bitcoin/tree/0.21-qpainter-fix</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1605977220' id='414674'>
<a class='timestamp' href='#414674'><time timestamp='2020-11-21T16:47:00Z'>16:47</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] achow101 opened pull request #20447: depends: Patch qt_intersect_spans to avoid non-deterministic behavior in LLVM 8 (master...0.21-qpainter-fix) <a href="https://github.com/bitcoin/bitcoin/pull/20447" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20447</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1605977280' id='414675'>
<a class='timestamp' href='#414675'><time timestamp='2020-11-21T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
can&#x27;t we patch or wrap LLVM instead? what&#x27;s to stop us from accidentally hitting this in our own code in 22.0?
<br>
</div>

<div class='talk op-msg' data-timestamp='1605977280' id='414676'>
<a class='timestamp' href='#414676'><time timestamp='2020-11-21T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
or do we expect LLVM to backport a fix by then?
<br>
</div>

<div class='talk op-msg' data-timestamp='1605977340' id='414677'>
<a class='timestamp' href='#414677'><time timestamp='2020-11-21T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
luke-jr: I think the plan is to bump to LLVM 9 which fixes this problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1605977340' id='414678'>
<a class='timestamp' href='#414678'><time timestamp='2020-11-21T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
i c
<br>
</div>

<div class='talk op-msg' data-timestamp='1605977400' id='414679'>
<a class='timestamp' href='#414679'><time timestamp='2020-11-21T16:50:00Z'>16:50</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I guess that makes sense - probbly need it for macOS ARM too
<br>
</div>

<div class='talk op-msg' data-timestamp='1605979020' id='414680'>
<a class='timestamp' href='#414680'><time timestamp='2020-11-21T17:17:00Z'>17:17</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
wait, are we all supposed to submit a qt proposal? i missed the memo :D
<br>
</div>

<div class='talk op-msg' data-timestamp='1605979200' id='414681'>
<a class='timestamp' href='#414681'><time timestamp='2020-11-21T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
(great work though)
<br>
</div>

<div class='talk op-msg' data-timestamp='1605981360' id='414682'>
<a class='timestamp' href='#414682'><time timestamp='2020-11-21T17:56:00Z'>17:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gah ubuntu bionic gcc-8 with -Wl,-z,separate-code seems to make a printf hello world program about 4MB (from 8kB without), did we notice any size ballooning for bitcoin? (no such problem for gcc 9.3 on focal)
<br>
</div>

<div class='talk op-msg' data-timestamp='1605981600' id='414683'>
<a class='timestamp' href='#414683'><time timestamp='2020-11-21T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
looks like it aligns the separated sections to increments of 2MB (and actually stores the zeroes) instead of the page size, only for x86_64 though not other architectures
<br>
</div>

<div class='talk op-msg' data-timestamp='1605981960' id='414684'>
<a class='timestamp' href='#414684'><time timestamp='2020-11-21T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
bitcoind x86_64-linux-gnu went from 9.9M to 15M from 0.20.1 to 0.21.0rc1 ... I doubt this is actual code growth, will check another arch just to be sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1605982260' id='414685'>
<a class='timestamp' href='#414685'><time timestamp='2020-11-21T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
for comparison: aarch64 went from 9.1M to 11M in the same span
<br>
</div>

<div class='talk op-msg' data-timestamp='1605982260' id='414686'>
<a class='timestamp' href='#414686'><time timestamp='2020-11-21T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
doesn&#x27;t seem really worrying anyway but I just noticed
<br>
</div>

<div class='talk op-msg' data-timestamp='1605982380' id='414687'>
<a class='timestamp' href='#414687'><time timestamp='2020-11-21T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s more visible, relatively, for bitcoin-cli which went from 2.8M to 4.6M for x86_64 and 1.8M to 1.9M for aarch64
<br>
</div>

<div class='talk op-msg' data-timestamp='1605982380' id='414688'>
<a class='timestamp' href='#414688'><time timestamp='2020-11-21T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
at least it&#x27;s zeroes so it compresses very well in the tar.gz :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1605982620' id='414689'>
<a class='timestamp' href='#414689'><time timestamp='2020-11-21T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
bitcoin-cli did see additions of -netinfo and -generate, but wow o_O
<br>
</div>

<div class='talk op-msg' data-timestamp='1605983040' id='414690'>
<a class='timestamp' href='#414690'><time timestamp='2020-11-21T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I don&#x27;t think it matters for memory usage in practice, paging operating systems are never going to read the empty, unreferenced pages; the virtual memory usage doesn&#x27;t matter on 64 bit; it&#x27;s just more disk space
<br>
</div>

<div class='talk op-msg' data-timestamp='1605983040' id='414691'>
<a class='timestamp' href='#414691'><time timestamp='2020-11-21T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-2'> * jonatack</span>&gt;
thinks back to when software was delivered with constraints of 4/16/48 KB of RAM
<br>
</div>

<div class='talk op-msg' data-timestamp='1605983100' id='414692'>
<a class='timestamp' href='#414692'><time timestamp='2020-11-21T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
heh the times entire games fit into that
<br>
</div>

<div class='talk op-msg' data-timestamp='1605983100' id='414693'>
<a class='timestamp' href='#414693'><time timestamp='2020-11-21T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
exactly
<br>
</div>

<div class='talk op-msg' data-timestamp='1605983100' id='414694'>
<a class='timestamp' href='#414694'><time timestamp='2020-11-21T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and to realize that on average, compilers became <b>*better*</b> at optimizing since then
<br>
</div>

<div class='talk op-msg' data-timestamp='1605983160' id='414695'>
<a class='timestamp' href='#414695'><time timestamp='2020-11-21T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
abstractions tend to break those optimisations tho
<br>
</div>

<div class='talk op-msg' data-timestamp='1605983220' id='414696'>
<a class='timestamp' href='#414696'><time timestamp='2020-11-21T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1605984600' id='414697'>
<a class='timestamp' href='#414697'><time timestamp='2020-11-21T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I&#x27;m confused about unloadwallet&#x27;s intended behaviour. It looks broken.
<br>
</div>

<div class='talk op-msg' data-timestamp='1605984600' id='414698'>
<a class='timestamp' href='#414698'><time timestamp='2020-11-21T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
it appears that if the RPC request specifies a wallet, AND a wallet is named in the param, it errors even if those two match?
<br>
</div>

<div class='talk op-msg' data-timestamp='1605984660' id='414699'>
<a class='timestamp' href='#414699'><time timestamp='2020-11-21T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I can see erroring if they differ, but even then the error message doesn&#x27;t make sense for that scenario
<br>
</div>

<div class='talk op-msg' data-timestamp='1605984660' id='414700'>
<a class='timestamp' href='#414700'><time timestamp='2020-11-21T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
and the docs don&#x27;t help
<br>
</div>

<div class='talk op-msg' data-timestamp='1605985020' id='414701'>
<a class='timestamp' href='#414701'><time timestamp='2020-11-21T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
Hm, with unloadwallet I see the log printing &quot;Releasing wallet&quot;... but then no confirmation when the operation is completed, nor if it was successful.
<br>
</div>

<div class='talk op-msg' data-timestamp='1605985140' id='414702'>
<a class='timestamp' href='#414702'><time timestamp='2020-11-21T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
and the rpc result object only says &quot;warning&quot;: &quot;&quot;. i guess this can be improved to be more reassuring for users with funds.
<br>
</div>

<div class='talk op-msg' data-timestamp='1605985260' id='414703'>
<a class='timestamp' href='#414703'><time timestamp='2020-11-21T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hrm, probabyl warning should be null or absent
<br>
</div>

<div class='talk op-msg' data-timestamp='1605985320' id='414704'>
<a class='timestamp' href='#414704'><time timestamp='2020-11-21T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
i&#x27;d not show a warning field unless there was a warning to display, and otherwise print &quot;result&quot;: &quot;Wallet xyz was successfully unloaded.&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1605985380' id='414705'>
<a class='timestamp' href='#414705'><time timestamp='2020-11-21T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
like with the upgradewallet fixes PR tagged for 0.21 
<br>
</div>

<div class='talk op-msg' data-timestamp='1605985440' id='414706'>
<a class='timestamp' href='#414706'><time timestamp='2020-11-21T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
it&#x27;s easy to add, if you&#x27;re fixing things...happy to review if you do
<br>
</div>

<div class='talk op-msg' data-timestamp='1605985440' id='414707'>
<a class='timestamp' href='#414707'><time timestamp='2020-11-21T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
(i agree with you)
<br>
</div>

<div class='talk op-msg' data-timestamp='1605985860' id='414708'>
<a class='timestamp' href='#414708'><time timestamp='2020-11-21T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
even better, a &quot;wallet_name&quot;: string field and a &quot;result&quot;: &quot;Wallet successfully unloaded.&quot;, see #20403
<br>
</div>

<div class='talk op-msg' data-timestamp='1605985860' id='414709'>
<a class='timestamp' href='#414709'><time timestamp='2020-11-21T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/20403" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/20403</a> | wallet: upgradewallet fixes, improvements, test coverage by jonatack Â· Pull Request #20403 Â· bitcoin/bitcoin Â· GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1605986100' id='414710'>
<a class='timestamp' href='#414710'><time timestamp='2020-11-21T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] luke-jr opened pull request #20448: RPC/Wallet: unloadwallet: Allow specifying wallet_name param matching RPC request, and document behaviour (master...unloadwallet_namematch) <a href="https://github.com/bitcoin/bitcoin/pull/20448" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20448</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1605986880' id='414711'>
<a class='timestamp' href='#414711'><time timestamp='2020-11-21T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] achow101 opened pull request #20449: build: Fix Windows installer build (master...fix-gitian-installers) <a href="https://github.com/bitcoin/bitcoin/pull/20449" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20449</a>
<br>
</div>

</div>
</section>

</body>
</html>
