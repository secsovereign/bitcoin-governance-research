<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2020-09-07
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2020-09-07' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:17 UTC</pre>
<pre><a href="/bitcoin-core-dev/2020-08-07">&lt;</a><span class='header'>  September 2020  </span><a href="/bitcoin-core-dev/2020-10-07">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;       <a class="" href="/bitcoin-core-dev/2020-09-01">1</a>  <a class="" href="/bitcoin-core-dev/2020-09-02">2</a>  <a class="" href="/bitcoin-core-dev/2020-09-03">3</a>  <a class="" href="/bitcoin-core-dev/2020-09-04">4</a>  <a class="" href="/bitcoin-core-dev/2020-09-05">5</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2020-09-06">6</a>  <a class="current" href="/bitcoin-core-dev/2020-09-07">7</a>  <a class="" href="/bitcoin-core-dev/2020-09-08">8</a>  <a class="" href="/bitcoin-core-dev/2020-09-09">9</a> <a class="" href="/bitcoin-core-dev/2020-09-10">10</a> <a class="" href="/bitcoin-core-dev/2020-09-11">11</a> <a class="" href="/bitcoin-core-dev/2020-09-12">12</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-09-13">13</a> <a class="" href="/bitcoin-core-dev/2020-09-14">14</a> <a class="" href="/bitcoin-core-dev/2020-09-15">15</a> <a class="" href="/bitcoin-core-dev/2020-09-16">16</a> <a class="" href="/bitcoin-core-dev/2020-09-17">17</a> <a class="" href="/bitcoin-core-dev/2020-09-18">18</a> <a class="" href="/bitcoin-core-dev/2020-09-19">19</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-09-20">20</a> <a class="" href="/bitcoin-core-dev/2020-09-21">21</a> <a class="" href="/bitcoin-core-dev/2020-09-22">22</a> <a class="" href="/bitcoin-core-dev/2020-09-23">23</a> <a class="" href="/bitcoin-core-dev/2020-09-24">24</a> <a class="" href="/bitcoin-core-dev/2020-09-25">25</a> <a class="" href="/bitcoin-core-dev/2020-09-26">26</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-09-27">27</a> <a class="" href="/bitcoin-core-dev/2020-09-28">28</a> <a class="" href="/bitcoin-core-dev/2020-09-29">29</a> <a class="" href="/bitcoin-core-dev/2020-09-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1599443160' id='402317'>
<a class='timestamp' href='#402317'><time timestamp='2020-09-07T01:46:00Z'>01:46</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
will that kill the db4 dependency?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599443280' id='402318'>
<a class='timestamp' href='#402318'><time timestamp='2020-09-07T01:48:00Z'>01:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no
<br>
</div>

<div class='talk op-msg' data-timestamp='1599443280' id='402319'>
<a class='timestamp' href='#402319'><time timestamp='2020-09-07T01:48:00Z'>01:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe in a few years, but we need to remain compatible with old wallet files
<br>
</div>

<div class='talk op-msg' data-timestamp='1599443340' id='402320'>
<a class='timestamp' href='#402320'><time timestamp='2020-09-07T01:49:00Z'>01:49</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
ah, and I guess there&#x27;s no such thing as a import-only db4 hollowed out shell
<br>
</div>

<div class='talk op-msg' data-timestamp='1599443400' id='402321'>
<a class='timestamp' href='#402321'><time timestamp='2020-09-07T01:50:00Z'>01:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
even if there was, we couldn&#x27;t use it
<br>
</div>

<div class='talk op-msg' data-timestamp='1599443400' id='402322'>
<a class='timestamp' href='#402322'><time timestamp='2020-09-07T01:50:00Z'>01:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
people downgrade after upgrading sometimes
<br>
</div>

<div class='talk op-msg' data-timestamp='1599443460' id='402323'>
<a class='timestamp' href='#402323'><time timestamp='2020-09-07T01:51:00Z'>01:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s of course hard to guarantee that being possible arbitrarily long, but 1 or 2 major versions at least makes sense (which matches our support window)
<br>
</div>

<div class='talk op-msg' data-timestamp='1599443520' id='402324'>
<a class='timestamp' href='#402324'><time timestamp='2020-09-07T01:52:00Z'>01:52</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
But will new wallets from here on out be made using sqlite?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599445980' id='402325'>
<a class='timestamp' href='#402325'><time timestamp='2020-09-07T02:33:00Z'>02:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] grubles opened pull request #19903: Update build-openbsd.md with GUI support (master...update-openbsd-build-instructions) <a href="https://github.com/bitcoin/bitcoin/pull/19903" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19903</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446040' id='402326'>
<a class='timestamp' href='#402326'><time timestamp='2020-09-07T02:34:00Z'>02:34</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I think I prefer bdb over sqlite
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446400' id='402327'>
<a class='timestamp' href='#402327'><time timestamp='2020-09-07T02:40:00Z'>02:40</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
how come?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446400' id='402328'>
<a class='timestamp' href='#402328'><time timestamp='2020-09-07T02:40:00Z'>02:40</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
also, why isn&#x27;t bdb4.8 in the tree, but leveldb is?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446460' id='402329'>
<a class='timestamp' href='#402329'><time timestamp='2020-09-07T02:41:00Z'>02:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
leveldb is consensus critical
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446520' id='402330'>
<a class='timestamp' href='#402330'><time timestamp='2020-09-07T02:42:00Z'>02:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
though for release builds it doesn&#x27;t really matter, gitian uses pinned versions of all dependencies
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446640' id='402331'>
<a class='timestamp' href='#402331'><time timestamp='2020-09-07T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
yanmaani: bdb is time-proven to work reliably and simpler I think
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446640' id='402332'>
<a class='timestamp' href='#402332'><time timestamp='2020-09-07T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
yanmaani: sqlite brings nothing much to the table IMO, and it&#x27;s closed development
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446640' id='402333'>
<a class='timestamp' href='#402333'><time timestamp='2020-09-07T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-4'> * sipa</span>&gt;
could not disagree more
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446640' id='402334'>
<a class='timestamp' href='#402334'><time timestamp='2020-09-07T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
bdb reliable? simple?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446640' id='402335'>
<a class='timestamp' href='#402335'><time timestamp='2020-09-07T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: when was the last time someone had a wallet lost due to bdb?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446700' id='402336'>
<a class='timestamp' href='#402336'><time timestamp='2020-09-07T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
and simplicity is compared to sqlite: there isn&#x27;t a whole SQL layer involved
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446700' id='402337'>
<a class='timestamp' href='#402337'><time timestamp='2020-09-07T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: me, very recently, after an unclean shutdown... thankfully one without any coins in it
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446700' id='402338'>
<a class='timestamp' href='#402338'><time timestamp='2020-09-07T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: !
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446700' id='402339'>
<a class='timestamp' href='#402339'><time timestamp='2020-09-07T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: 4.8?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446700' id='402340'>
<a class='timestamp' href='#402340'><time timestamp='2020-09-07T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
5.3
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446700' id='402341'>
<a class='timestamp' href='#402341'><time timestamp='2020-09-07T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446760' id='402342'>
<a class='timestamp' href='#402342'><time timestamp='2020-09-07T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, i agree something like sqlite without the sql layer would be even better
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446760' id='402343'>
<a class='timestamp' href='#402343'><time timestamp='2020-09-07T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but sqlite is incredibly well tested
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446760' id='402344'>
<a class='timestamp' href='#402344'><time timestamp='2020-09-07T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so that&#x27;s a feature i&#x27;m happy to take along, we can just ignore it 
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446820' id='402345'>
<a class='timestamp' href='#402345'><time timestamp='2020-09-07T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
can we?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446820' id='402346'>
<a class='timestamp' href='#402346'><time timestamp='2020-09-07T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
at the very least we need to figure out safe escaping of stuff (though I suspect sqlite includes that)
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446820' id='402347'>
<a class='timestamp' href='#402347'><time timestamp='2020-09-07T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no, prepared statements
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446820' id='402348'>
<a class='timestamp' href='#402348'><time timestamp='2020-09-07T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
anyway, time will show if sqlite works well
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446820' id='402349'>
<a class='timestamp' href='#402349'><time timestamp='2020-09-07T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you pass in the data as arguments, rather than serialized as strings
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446880' id='402350'>
<a class='timestamp' href='#402350'><time timestamp='2020-09-07T02:48:00Z'>02:48</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: I thought that just let sqlite turn them into strings?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599446880' id='402351'>
<a class='timestamp' href='#402351'><time timestamp='2020-09-07T02:48:00Z'>02:48</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
but I haven&#x27;t read sqlite code lately so maybe I&#x27;m outdated
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447000' id='402352'>
<a class='timestamp' href='#402352'><time timestamp='2020-09-07T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: i suspect no conversion to string and back is done, but i don&#x27;t think it matters... regardless of what it does, it means we don&#x27;t need to deal with the complexity of it
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447000' id='402353'>
<a class='timestamp' href='#402353'><time timestamp='2020-09-07T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
sqlite is extremely well tested
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447000' id='402354'>
<a class='timestamp' href='#402354'><time timestamp='2020-09-07T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
IIRC, it uses int representations internally for ints
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447060' id='402355'>
<a class='timestamp' href='#402355'><time timestamp='2020-09-07T02:51:00Z'>02:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well we&#x27;d pass everything as byte arrays
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447060' id='402356'>
<a class='timestamp' href='#402356'><time timestamp='2020-09-07T02:51:00Z'>02:51</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
It&#x27;s not so big, and I think you can use compile flags to gut the SQL engine by some fraction
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447120' id='402357'>
<a class='timestamp' href='#402357'><time timestamp='2020-09-07T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
If you&#x27;re looking to switch database though, why specifically sqlite, and not say lmdb? Or leveldb?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447180' id='402358'>
<a class='timestamp' href='#402358'><time timestamp='2020-09-07T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yanmaani: <a href="https://github.com/bitcoin/bitcoin/issues/18916#issuecomment-670696563" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18916#issuecomment-670696563</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447300' id='402359'>
<a class='timestamp' href='#402359'><time timestamp='2020-09-07T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
Are wallets big?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447300' id='402360'>
<a class='timestamp' href='#402360'><time timestamp='2020-09-07T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
In terms of file size
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447300' id='402361'>
<a class='timestamp' href='#402361'><time timestamp='2020-09-07T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
or we can go the KDE route and use MySQL
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447360' id='402362'>
<a class='timestamp' href='#402362'><time timestamp='2020-09-07T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: aaaargh
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447360' id='402363'>
<a class='timestamp' href='#402363'><time timestamp='2020-09-07T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
:)
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447360' id='402364'>
<a class='timestamp' href='#402364'><time timestamp='2020-09-07T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
[screams internally]
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447360' id='402365'>
<a class='timestamp' href='#402365'><time timestamp='2020-09-07T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wait, let&#x27;s stick to sqlite and just use MySQL for the cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447360' id='402366'>
<a class='timestamp' href='#402366'><time timestamp='2020-09-07T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
[screams externally]
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447360' id='402367'>
<a class='timestamp' href='#402367'><time timestamp='2020-09-07T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
(KDE literally uses MySQL for caches)
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447360' id='402368'>
<a class='timestamp' href='#402368'><time timestamp='2020-09-07T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yanmaani: 100s of KB to megabytes, typically
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447360' id='402369'>
<a class='timestamp' href='#402369'><time timestamp='2020-09-07T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
can&#x27;t you just use both?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402370'>
<a class='timestamp' href='#402370'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
That would have pretty much all the desiderata
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402371'>
<a class='timestamp' href='#402371'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
both what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402372'>
<a class='timestamp' href='#402372'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
keys in bdb and metadata in sqlite?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402373'>
<a class='timestamp' href='#402373'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
databases
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402374'>
<a class='timestamp' href='#402374'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
at once
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402375'>
<a class='timestamp' href='#402375'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
both what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402376'>
<a class='timestamp' href='#402376'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
* Reliable - SQLite is reliable
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402377'>
<a class='timestamp' href='#402377'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what are the two options
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402378'>
<a class='timestamp' href='#402378'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
Both databases
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402379'>
<a class='timestamp' href='#402379'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sqlite and ...?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402380'>
<a class='timestamp' href='#402380'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
Both SQLite and BDB4.8 for wallet storage
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402381'>
<a class='timestamp' href='#402381'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
w t f would you want that
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402382'>
<a class='timestamp' href='#402382'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402383'>
<a class='timestamp' href='#402383'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
Lots of reasons 
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402384'>
<a class='timestamp' href='#402384'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
worst of all worlds
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447420' id='402385'>
<a class='timestamp' href='#402385'><time timestamp='2020-09-07T02:57:00Z'>02:57</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
upgrades are seamless - old versions just disregard the sqlite files
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447480' id='402386'>
<a class='timestamp' href='#402386'><time timestamp='2020-09-07T02:58:00Z'>02:58</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
downgrades are seamless too
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447480' id='402387'>
<a class='timestamp' href='#402387'><time timestamp='2020-09-07T02:58:00Z'>02:58</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
the reliability is sqlite&#x27;s, of course, since those would be used as master by newer versions
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447480' id='402388'>
<a class='timestamp' href='#402388'><time timestamp='2020-09-07T02:58:00Z'>02:58</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
so you&#x27;d have full ACID
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447480' id='402389'>
<a class='timestamp' href='#402389'><time timestamp='2020-09-07T02:58:00Z'>02:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m not sure what you&#x27;re suggesting
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447480' id='402390'>
<a class='timestamp' href='#402390'><time timestamp='2020-09-07T02:58:00Z'>02:58</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
you get a shorter time to tear out db4
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447480' id='402391'>
<a class='timestamp' href='#402391'><time timestamp='2020-09-07T02:58:00Z'>02:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if what you mean is use bdb for old wallets and sqlite for new ones... that&#x27;s what the PR does
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447540' id='402392'>
<a class='timestamp' href='#402392'><time timestamp='2020-09-07T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
You use both databases (SQLite3 and BDB4.8) at once. You do not have any internal distinction between &quot;new&quot; and &quot;old&quot; wallets.
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447540' id='402393'>
<a class='timestamp' href='#402393'><time timestamp='2020-09-07T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
...
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447540' id='402394'>
<a class='timestamp' href='#402394'><time timestamp='2020-09-07T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wtf does that mean
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447540' id='402395'>
<a class='timestamp' href='#402395'><time timestamp='2020-09-07T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
Whenever you open a BDB-only wallet file, it automatically creates a corresponding sqlite wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447540' id='402396'>
<a class='timestamp' href='#402396'><time timestamp='2020-09-07T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
When you create a new wallet, it creates a sqlite and a bdb wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447540' id='402397'>
<a class='timestamp' href='#402397'><time timestamp='2020-09-07T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
good lord
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447540' id='402398'>
<a class='timestamp' href='#402398'><time timestamp='2020-09-07T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
No, this has lots of good properties!
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447540' id='402399'>
<a class='timestamp' href='#402399'><time timestamp='2020-09-07T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
backs away slowly
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447540' id='402400'>
<a class='timestamp' href='#402400'><time timestamp='2020-09-07T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
go away, please
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447540' id='402401'>
<a class='timestamp' href='#402401'><time timestamp='2020-09-07T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
So, first off, you get the nice properties of SQLite.
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447600' id='402402'>
<a class='timestamp' href='#402402'><time timestamp='2020-09-07T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
...
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447600' id='402403'>
<a class='timestamp' href='#402403'><time timestamp='2020-09-07T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
You wouldn&#x27;t have the data problems that bdb has. If BDB crashes, too bad, who cares.
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447600' id='402404'>
<a class='timestamp' href='#402404'><time timestamp='2020-09-07T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
But the old versions can still read the BDB version of the database.
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447600' id='402405'>
<a class='timestamp' href='#402405'><time timestamp='2020-09-07T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
whyyyyyyy
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447600' id='402406'>
<a class='timestamp' href='#402406'><time timestamp='2020-09-07T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
so you basically mean switch to sqlite, but keep a BDB copy updated in case of sudden urge to downgrade?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447600' id='402407'>
<a class='timestamp' href='#402407'><time timestamp='2020-09-07T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
The code complexity is about the same.
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447600' id='402408'>
<a class='timestamp' href='#402408'><time timestamp='2020-09-07T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
luke-jr: Yes. Because then you can tear out db4 faster.
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447600' id='402409'>
<a class='timestamp' href='#402409'><time timestamp='2020-09-07T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i wish you good luck
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447600' id='402410'>
<a class='timestamp' href='#402410'><time timestamp='2020-09-07T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I don&#x27;t think that follows
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447600' id='402411'>
<a class='timestamp' href='#402411'><time timestamp='2020-09-07T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
If you do this, then everyone switches to the new version, there will be a sqlite file.
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447660' id='402412'>
<a class='timestamp' href='#402412'><time timestamp='2020-09-07T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
Unless they migrate from v_nosqlite to v_onlysqlite directly
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447660' id='402413'>
<a class='timestamp' href='#402413'><time timestamp='2020-09-07T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447660' id='402414'>
<a class='timestamp' href='#402414'><time timestamp='2020-09-07T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
all the management issues get multiplied
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447660' id='402415'>
<a class='timestamp' href='#402415'><time timestamp='2020-09-07T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what if files are out of sync?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447660' id='402416'>
<a class='timestamp' href='#402416'><time timestamp='2020-09-07T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
as long as they migrate through one of the intermediate sqlite versions, there will be a sqlite wallet created
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447660' id='402417'>
<a class='timestamp' href='#402417'><time timestamp='2020-09-07T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what if people migrated one, but not the other, from one system to another?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447660' id='402418'>
<a class='timestamp' href='#402418'><time timestamp='2020-09-07T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
How would you migrate only one of them?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447660' id='402419'>
<a class='timestamp' href='#402419'><time timestamp='2020-09-07T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
If there&#x27;s only one file, use that
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447660' id='402420'>
<a class='timestamp' href='#402420'><time timestamp='2020-09-07T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
users are stupid
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447720' id='402421'>
<a class='timestamp' href='#402421'><time timestamp='2020-09-07T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if every user was a system administrator, BDB would be an awesome choice
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447720' id='402422'>
<a class='timestamp' href='#402422'><time timestamp='2020-09-07T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
If there&#x27;s two files, load both and take the one last modified
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447720' id='402423'>
<a class='timestamp' href='#402423'><time timestamp='2020-09-07T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s what it&#x27;s designed for
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447720' id='402424'>
<a class='timestamp' href='#402424'><time timestamp='2020-09-07T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but users aren&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447720' id='402425'>
<a class='timestamp' href='#402425'><time timestamp='2020-09-07T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
If the users only copy one database file, there&#x27;s no problem though
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447780' id='402426'>
<a class='timestamp' href='#402426'><time timestamp='2020-09-07T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
seriously, i can&#x27;t comprehend how you think that makes anything better
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447780' id='402427'>
<a class='timestamp' href='#402427'><time timestamp='2020-09-07T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
It makes cross-version migration more seamless
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447780' id='402428'>
<a class='timestamp' href='#402428'><time timestamp='2020-09-07T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
all the issues with the mental overhead of understanding what a wallet is get worse
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447780' id='402429'>
<a class='timestamp' href='#402429'><time timestamp='2020-09-07T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
a wallet is the wallet_dat/ folder
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447780' id='402430'>
<a class='timestamp' href='#402430'><time timestamp='2020-09-07T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s specifially what we should get rid of
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447780' id='402431'>
<a class='timestamp' href='#402431'><time timestamp='2020-09-07T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
among other things
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447840' id='402432'>
<a class='timestamp' href='#402432'><time timestamp='2020-09-07T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
Yes, when db4 is retired you can get rid of it
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447840' id='402433'>
<a class='timestamp' href='#402433'><time timestamp='2020-09-07T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
and return to wallet.dat(sqlite)
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447840' id='402434'>
<a class='timestamp' href='#402434'><time timestamp='2020-09-07T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yay, great
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447840' id='402435'>
<a class='timestamp' href='#402435'><time timestamp='2020-09-07T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
But with this approach, you&#x27;ll never have the problem of &quot;user installed sqlite version but didn&#x27;t upgrade his wallet&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447840' id='402436'>
<a class='timestamp' href='#402436'><time timestamp='2020-09-07T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t see how making our database a frankenstein-monster-of-bdb-and-sqlite helps with that
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447840' id='402437'>
<a class='timestamp' href='#402437'><time timestamp='2020-09-07T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
because wallet upgrades will be done transparently in the background
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447900' id='402438'>
<a class='timestamp' href='#402438'><time timestamp='2020-09-07T03:05:00Z'>03:05</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
because it&#x27;s only temporary - once everyone has upgraded, you can rip out db4 entirely
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447900' id='402439'>
<a class='timestamp' href='#402439'><time timestamp='2020-09-07T03:05:00Z'>03:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no you can&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447900' id='402440'>
<a class='timestamp' href='#402440'><time timestamp='2020-09-07T03:05:00Z'>03:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
backups need to keep working
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447900' id='402441'>
<a class='timestamp' href='#402441'><time timestamp='2020-09-07T03:05:00Z'>03:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
even years old ones
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447900' id='402442'>
<a class='timestamp' href='#402442'><time timestamp='2020-09-07T03:05:00Z'>03:05</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
With &quot;old wallet&quot; and &quot;new wallet&quot;, if you&#x27;re to rip out db4, users will at some point in time have to convert them
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447900' id='402443'>
<a class='timestamp' href='#402443'><time timestamp='2020-09-07T03:05:00Z'>03:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447960' id='402444'>
<a class='timestamp' href='#402444'><time timestamp='2020-09-07T03:06:00Z'>03:06</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
can&#x27;t they just be asked to download an old version? But yes, that&#x27;s a good point otherwise
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447960' id='402445'>
<a class='timestamp' href='#402445'><time timestamp='2020-09-07T03:06:00Z'>03:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i don&#x27;t see how doing what you suggests allows doing this any earlier
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447960' id='402446'>
<a class='timestamp' href='#402446'><time timestamp='2020-09-07T03:06:00Z'>03:06</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
In my model, users would never have to upgrade formats manually
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447960' id='402447'>
<a class='timestamp' href='#402447'><time timestamp='2020-09-07T03:06:00Z'>03:06</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
first they have db4-only wallets
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447960' id='402448'>
<a class='timestamp' href='#402448'><time timestamp='2020-09-07T03:06:00Z'>03:06</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
then they have db4+sqlite wallets
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447960' id='402449'>
<a class='timestamp' href='#402449'><time timestamp='2020-09-07T03:06:00Z'>03:06</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
then db4 is dropped, and they have &lt;garbage&gt;+sqlite wallets
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447960' id='402450'>
<a class='timestamp' href='#402450'><time timestamp='2020-09-07T03:06:00Z'>03:06</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
the conversion would be done silently and transparently to the user
<br>
</div>

<div class='talk op-msg' data-timestamp='1599447960' id='402451'>
<a class='timestamp' href='#402451'><time timestamp='2020-09-07T03:06:00Z'>03:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i really really don&#x27;t see the advantage
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448020' id='402452'>
<a class='timestamp' href='#402452'><time timestamp='2020-09-07T03:07:00Z'>03:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
even ignoring all the disadvantages
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448020' id='402453'>
<a class='timestamp' href='#402453'><time timestamp='2020-09-07T03:07:00Z'>03:07</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
easier migration process, no need for users to make the effort of upgrading wallet from sqlite to db4
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448020' id='402454'>
<a class='timestamp' href='#402454'><time timestamp='2020-09-07T03:07:00Z'>03:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
unless they missed the window during which versions with mixed support existed
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448080' id='402455'>
<a class='timestamp' href='#402455'><time timestamp='2020-09-07T03:08:00Z'>03:08</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
yeah, but that&#x27;s still much less user effort isn&#x27;t it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448080' id='402456'>
<a class='timestamp' href='#402456'><time timestamp='2020-09-07T03:08:00Z'>03:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
eh
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448080' id='402457'>
<a class='timestamp' href='#402457'><time timestamp='2020-09-07T03:08:00Z'>03:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s something that i expect will happen in 5 years or so
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448080' id='402458'>
<a class='timestamp' href='#402458'><time timestamp='2020-09-07T03:08:00Z'>03:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe more
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448140' id='402459'>
<a class='timestamp' href='#402459'><time timestamp='2020-09-07T03:09:00Z'>03:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m more concerned about things working in the next release than what happens then
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448140' id='402460'>
<a class='timestamp' href='#402460'><time timestamp='2020-09-07T03:09:00Z'>03:09</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
You might also just say &quot;we&#x27;re done with db4, if you load a db4 wallet you will be given the option to convert or exit, you can&#x27;t just load it&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448200' id='402461'>
<a class='timestamp' href='#402461'><time timestamp='2020-09-07T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
whenever you get fed up with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448200' id='402462'>
<a class='timestamp' href='#402462'><time timestamp='2020-09-07T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and i really don&#x27;t want to think about all the things that can go wrong with duplicated bdb+sqlite wallets
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448200' id='402463'>
<a class='timestamp' href='#402463'><time timestamp='2020-09-07T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
Will you be using sqlite&#x27;s encryption layer too?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448200' id='402464'>
<a class='timestamp' href='#402464'><time timestamp='2020-09-07T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
look at the PR, i&#x27;m not the author :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1599448200' id='402465'>
<a class='timestamp' href='#402465'><time timestamp='2020-09-07T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t think so
<br>
</div>

<div class='talk op-msg' data-timestamp='1599451020' id='402466'>
<a class='timestamp' href='#402466'><time timestamp='2020-09-07T03:57:00Z'>03:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] meshcollider pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/56d47e19edca...78cb45d72251" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/56d47e19edca...78cb45d72251</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599451020' id='402467'>
<a class='timestamp' href='#402467'><time timestamp='2020-09-07T03:57:00Z'>03:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master abac436 João Barbosa: wallet: Avoid multiple BerkeleyBatch in DelAddressBook
<br>
</div>

<div class='talk op-msg' data-timestamp='1599451020' id='402468'>
<a class='timestamp' href='#402468'><time timestamp='2020-09-07T03:57:00Z'>03:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 78cb45d Samuel Dobson: Merge #19738: wallet: Avoid multiple BerkeleyBatch in DelAddressBook
<br>
</div>

<div class='talk op-msg' data-timestamp='1599451020' id='402469'>
<a class='timestamp' href='#402469'><time timestamp='2020-09-07T03:57:00Z'>03:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] meshcollider merged pull request #19738: wallet: Avoid multiple BerkeleyBatch in DelAddressBook (master...2020-08-deladdressbook) <a href="https://github.com/bitcoin/bitcoin/pull/19738" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19738</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599451380' id='402470'>
<a class='timestamp' href='#402470'><time timestamp='2020-09-07T04:03:00Z'>04:03</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
yanmaani: no, not using their encryption stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1599453480' id='402471'>
<a class='timestamp' href='#402471'><time timestamp='2020-09-07T04:38:00Z'>04:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sipa, yanmaani: armory does something like that. they use some custom binary format that isn&#x27;t super upgradeable. So to migrate to the new storage method, they make a copy of the wallet in the new storage
<br>
</div>

<div class='talk op-msg' data-timestamp='1599453540' id='402472'>
<a class='timestamp' href='#402472'><time timestamp='2020-09-07T04:39:00Z'>04:39</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yanmaani: migrating a bdb wallet to sqlite could be done without bdb. The database structure is known, so it wouldn&#x27;t be too hard to write something that just deserializes the database to fetch the records, then writes them to a new sqlite wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1599457620' id='402473'>
<a class='timestamp' href='#402473'><time timestamp='2020-09-07T05:47:00Z'>05:47</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #19905: Remove dead CheckForkWarningConditionsOnNewFork (master...2009-noFork) <a href="https://github.com/bitcoin/bitcoin/pull/19905" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19905</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599462660' id='402474'>
<a class='timestamp' href='#402474'><time timestamp='2020-09-07T07:11:00Z'>07:11</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
sipa: <a href="https://github.com/bitcoin/bitcoin/pull/19728#pullrequestreview-469679233" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19728#pullrequestreview-469679233</a> &quot;Why not treat all addresses equally (ie relay always to 2 nodes, even addresses from unreachable networks)?&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1599463020' id='402475'>
<a class='timestamp' href='#402475'><time timestamp='2020-09-07T07:17:00Z'>07:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
vasild: maybe that&#x27;s what will be needed, but i&#x27;d like to retain the existing behavior of primarily relaying reachable addresses
<br>
</div>

<div class='talk op-msg' data-timestamp='1599463080' id='402476'>
<a class='timestamp' href='#402476'><time timestamp='2020-09-07T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so that ipv6 nodes find eachother preferentially etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1599463080' id='402477'>
<a class='timestamp' href='#402477'><time timestamp='2020-09-07T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
ack
<br>
</div>

<div class='talk op-msg' data-timestamp='1599465120' id='402478'>
<a class='timestamp' href='#402478'><time timestamp='2020-09-07T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 4 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/78cb45d72251...07087051afe9" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/78cb45d72251...07087051afe9</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599465120' id='402479'>
<a class='timestamp' href='#402479'><time timestamp='2020-09-07T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master eeee110 MarcoFalke: Remove mempool global from init
<br>
</div>

<div class='talk op-msg' data-timestamp='1599465120' id='402480'>
<a class='timestamp' href='#402480'><time timestamp='2020-09-07T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fa0359c MarcoFalke: Remove mempool global from p2p
<br>
</div>

<div class='talk op-msg' data-timestamp='1599465120' id='402481'>
<a class='timestamp' href='#402481'><time timestamp='2020-09-07T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fafb381 MarcoFalke: Remove mempool global
<br>
</div>

<div class='talk op-msg' data-timestamp='1599465120' id='402482'>
<a class='timestamp' href='#402482'><time timestamp='2020-09-07T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #19556: Remove mempool global (master...Mf1808-txpoolGlobal) <a href="https://github.com/bitcoin/bitcoin/pull/19556" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19556</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599472860' id='402483'>
<a class='timestamp' href='#402483'><time timestamp='2020-09-07T10:01:00Z'>10:01</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
Great stuff Marco. Really good to see progress being made there. Thanks for getting it done.
<br>
</div>

<div class='talk op-msg' data-timestamp='1599473400' id='402484'>
<a class='timestamp' href='#402484'><time timestamp='2020-09-07T10:10:00Z'>10:10</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 3 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/07087051afe9...25839661305e" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/07087051afe9...25839661305e</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599473400' id='402485'>
<a class='timestamp' href='#402485'><time timestamp='2020-09-07T10:10:00Z'>10:10</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 46d955d Jeremy Rubin: Remove mapLinks in favor of entry inlined structs with iterator type erasu...
<br>
</div>

<div class='talk op-msg' data-timestamp='1599473400' id='402486'>
<a class='timestamp' href='#402486'><time timestamp='2020-09-07T10:10:00Z'>10:10</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 296be8f Jeremy Rubin: Get rid of unused functions CTxMemPool::GetMemPoolChildren, CTxMemPool::Ge...
<br>
</div>

<div class='talk op-msg' data-timestamp='1599473400' id='402487'>
<a class='timestamp' href='#402487'><time timestamp='2020-09-07T10:10:00Z'>10:10</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 2583966 MarcoFalke: Merge #19478: Remove CTxMempool::mapLinks data structure member
<br>
</div>

<div class='talk op-msg' data-timestamp='1599473400' id='402488'>
<a class='timestamp' href='#402488'><time timestamp='2020-09-07T10:10:00Z'>10:10</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #19478: Remove CTxMempool::mapLinks data structure member (master...epoch-mempool-clean-split-3) <a href="https://github.com/bitcoin/bitcoin/pull/19478" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19478</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599475320' id='402489'>
<a class='timestamp' href='#402489'><time timestamp='2020-09-07T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] naumenkogs opened pull request #19906: Bugfix: don&#x27;t make collision from &quot;tried&quot; a feeler  (master...2020-09-feeler-no-collisions) <a href="https://github.com/bitcoin/bitcoin/pull/19906" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19906</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599481020' id='402490'>
<a class='timestamp' href='#402490'><time timestamp='2020-09-07T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] dr-orlovsky opened pull request #19907: util: add psbt combiner role (master...feat/psbt-combiner) <a href="https://github.com/bitcoin/bitcoin/pull/19907" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19907</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599483480' id='402491'>
<a class='timestamp' href='#402491'><time timestamp='2020-09-07T12:58:00Z'>12:58</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
achow101: If that&#x27;s the case then maybe you could do it like: have a bdb database, open it, move all the stuff into a sqlite database
<br>
</div>

<div class='talk op-msg' data-timestamp='1599483540' id='402492'>
<a class='timestamp' href='#402492'><time timestamp='2020-09-07T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
on a clean shutdown, copy the data back into bdb, sync, exit
<br>
</div>

<div class='talk op-msg' data-timestamp='1599483540' id='402493'>
<a class='timestamp' href='#402493'><time timestamp='2020-09-07T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
(and remove sqlite)
<br>
</div>

<div class='talk op-msg' data-timestamp='1599483540' id='402494'>
<a class='timestamp' href='#402494'><time timestamp='2020-09-07T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-6'> yanmaani</span>&gt;
on a dirty shutdown, sqlite will still persist
<br>
</div>

<div class='talk op-msg' data-timestamp='1599489960' id='402495'>
<a class='timestamp' href='#402495'><time timestamp='2020-09-07T14:46:00Z'>14:46</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] naumenkogs closed pull request #19906: Bugfix: don&#x27;t make collision from &quot;tried&quot; a feeler  (master...2020-09-feeler-no-collisions) <a href="https://github.com/bitcoin/bitcoin/pull/19906" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19906</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599489960' id='402496'>
<a class='timestamp' href='#402496'><time timestamp='2020-09-07T14:46:00Z'>14:46</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] naumenkogs reopened pull request #19906: Bugfix: don&#x27;t make collision from &quot;tried&quot; a feeler  (master...2020-09-feeler-no-collisions) <a href="https://github.com/bitcoin/bitcoin/pull/19906" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19906</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599490080' id='402497'>
<a class='timestamp' href='#402497'><time timestamp='2020-09-07T14:48:00Z'>14:48</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #19909: txmempool: Remove unused clear() member function (master...2009-noTxpoolClear) <a href="https://github.com/bitcoin/bitcoin/pull/19909" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19909</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599493740' id='402498'>
<a class='timestamp' href='#402498'><time timestamp='2020-09-07T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yanmaani: copying everything back into bdb is way harder than just reading data from it
<br>
</div>

<div class='talk op-msg' data-timestamp='1599495120' id='402499'>
<a class='timestamp' href='#402499'><time timestamp='2020-09-07T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 11 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/25839661305e...147d50d63e07" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/25839661305e...147d50d63e07</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599495120' id='402500'>
<a class='timestamp' href='#402500'><time timestamp='2020-09-07T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 824bbd1 John Newbery: [move only] Collect all private members of PeerLogicValidation together
<br>
</div>

<div class='talk op-msg' data-timestamp='1599495120' id='402501'>
<a class='timestamp' href='#402501'><time timestamp='2020-09-07T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 2297b26 John Newbery: [net_processing] Pass chainparams to PeerLogicValidation constructor
<br>
</div>

<div class='talk op-msg' data-timestamp='1599495120' id='402502'>
<a class='timestamp' href='#402502'><time timestamp='2020-09-07T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 58bd369 John Newbery: scripted-diff: [net processing] Rename PeerLogicValidation to PeerManager
<br>
</div>

<div class='talk op-msg' data-timestamp='1599495120' id='402503'>
<a class='timestamp' href='#402503'><time timestamp='2020-09-07T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #19791: [net processing] Move Misbehaving() to PeerManager (master...2020-08-misbehaving-in-plv) <a href="https://github.com/bitcoin/bitcoin/pull/19791" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19791</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599495840' id='402504'>
<a class='timestamp' href='#402504'><time timestamp='2020-09-07T16:24:00Z'>16:24</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
achow101: btw, have you looked into if sqlite ever leaves stale/deleted data in db files?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599495900' id='402505'>
<a class='timestamp' href='#402505'><time timestamp='2020-09-07T16:25:00Z'>16:25</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
luke-jr: it does, but there&#x27;s an option that can be enabled to overwrite the data
<br>
</div>

<div class='talk op-msg' data-timestamp='1599495900' id='402506'>
<a class='timestamp' href='#402506'><time timestamp='2020-09-07T16:25:00Z'>16:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
cool
<br>
</div>

<div class='talk op-msg' data-timestamp='1599495900' id='402507'>
<a class='timestamp' href='#402507'><time timestamp='2020-09-07T16:25:00Z'>16:25</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
that operation can also be done as a one time thing. IIRC I have set it to do that after encrypting
<br>
</div>

<div class='talk op-msg' data-timestamp='1599496380' id='402508'>
<a class='timestamp' href='#402508'><time timestamp='2020-09-07T16:33:00Z'>16:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
achow101, you going to use wal or no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599496380' id='402509'>
<a class='timestamp' href='#402509'><time timestamp='2020-09-07T16:33:00Z'>16:33</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
phantomcircuit: no
<br>
</div>

<div class='talk op-msg' data-timestamp='1599496440' id='402510'>
<a class='timestamp' href='#402510'><time timestamp='2020-09-07T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
wal is the cause of a bunch of bdb issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1599496440' id='402511'>
<a class='timestamp' href='#402511'><time timestamp='2020-09-07T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1599496440' id='402512'>
<a class='timestamp' href='#402512'><time timestamp='2020-09-07T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
it&#x27;s why there&#x27;s flush&#x27;s everywhere and those do i think 3 fsync each call
<br>
</div>

<div class='talk op-msg' data-timestamp='1599496500' id='402513'>
<a class='timestamp' href='#402513'><time timestamp='2020-09-07T16:35:00Z'>16:35</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yeah, the PR explicitly disables wal too
<br>
</div>

<div class='talk op-msg' data-timestamp='1599496620' id='402514'>
<a class='timestamp' href='#402514'><time timestamp='2020-09-07T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
achow101, should set application_id as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1599496620' id='402515'>
<a class='timestamp' href='#402515'><time timestamp='2020-09-07T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1599496620' id='402516'>
<a class='timestamp' href='#402516'><time timestamp='2020-09-07T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I suppose so
<br>
</div>

<div class='talk op-msg' data-timestamp='1599497280' id='402517'>
<a class='timestamp' href='#402517'><time timestamp='2020-09-07T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
achow101, is there manual vacuum being done? i dont see it
<br>
</div>

<div class='talk op-msg' data-timestamp='1599497340' id='402518'>
<a class='timestamp' href='#402518'><time timestamp='2020-09-07T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
It&#x27;s in the Rewrite() function
<br>
</div>

<div class='talk op-msg' data-timestamp='1599497520' id='402519'>
<a class='timestamp' href='#402519'><time timestamp='2020-09-07T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
also need to set checkpoint_fullfsync if you want real fsync on osx
<br>
</div>

<div class='talk op-msg' data-timestamp='1599497580' id='402520'>
<a class='timestamp' href='#402520'><time timestamp='2020-09-07T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
wait no you want fullfsync
<br>
</div>

<div class='talk op-msg' data-timestamp='1599497700' id='402521'>
<a class='timestamp' href='#402521'><time timestamp='2020-09-07T16:55:00Z'>16:55</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
You should leave comments on the PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498300' id='402522'>
<a class='timestamp' href='#402522'><time timestamp='2020-09-07T17:05:00Z'>17:05</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
achow101, btw i think sqlite in it&#x27;s normal, non wal operation does create a separate journal file, but only for the time between the transaction commit and the fsync completing
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498300' id='402523'>
<a class='timestamp' href='#402523'><time timestamp='2020-09-07T17:05:00Z'>17:05</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
phantomcircuit: yes, but it deletes it later
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498360' id='402524'>
<a class='timestamp' href='#402524'><time timestamp='2020-09-07T17:06:00Z'>17:06</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
everything still ends up in the database file after the write
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498360' id='402525'>
<a class='timestamp' href='#402525'><time timestamp='2020-09-07T17:06:00Z'>17:06</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
yeah immediately after the fsync completes
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498360' id='402526'>
<a class='timestamp' href='#402526'><time timestamp='2020-09-07T17:06:00Z'>17:06</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
achow101, did you consider opening the file with an exclusive lock?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498420' id='402527'>
<a class='timestamp' href='#402527'><time timestamp='2020-09-07T17:07:00Z'>17:07</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yes, but we already lock the .walletlock file in the directory so I don&#x27;t think it&#x27;s needed
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498420' id='402528'>
<a class='timestamp' href='#402528'><time timestamp='2020-09-07T17:07:00Z'>17:07</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
im writting a comment on the pr with some of this stuff btw
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498600' id='402529'>
<a class='timestamp' href='#402529'><time timestamp='2020-09-07T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
achow101, also i notice that you implemented EraseKey which is called by nothing
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498600' id='402530'>
<a class='timestamp' href='#402530'><time timestamp='2020-09-07T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
eh? Isn&#x27;t it called by EraseIC?
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498720' id='402531'>
<a class='timestamp' href='#402531'><time timestamp='2020-09-07T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
achow101, once again github search lies to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498720' id='402532'>
<a class='timestamp' href='#402532'><time timestamp='2020-09-07T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498780' id='402533'>
<a class='timestamp' href='#402533'><time timestamp='2020-09-07T17:13:00Z'>17:13</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
it feels like an elastic search cluster that&#x27;s missing a server constantly
<br>
</div>

<div class='talk op-msg' data-timestamp='1599498780' id='402534'>
<a class='timestamp' href='#402534'><time timestamp='2020-09-07T17:13:00Z'>17:13</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
(i think it&#x27;s literally that, but azure)
<br>
</div>

<div class='talk op-msg' data-timestamp='1599499020' id='402535'>
<a class='timestamp' href='#402535'><time timestamp='2020-09-07T17:17:00Z'>17:17</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #19910: net processing: Move peer_map to PeerManager (master...2020-08-peer-plv2) <a href="https://github.com/bitcoin/bitcoin/pull/19910" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19910</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599507180' id='402536'>
<a class='timestamp' href='#402536'><time timestamp='2020-09-07T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] narula opened pull request #19911: net: guard vRecvGetData with cs_vRecv and orphan_work_set with g_cs_orphans (master...cs_vRecv) <a href="https://github.com/bitcoin/bitcoin/pull/19911" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19911</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599510840' id='402537'>
<a class='timestamp' href='#402537'><time timestamp='2020-09-07T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
hi folks. Reminder that tomorrow at 15:00 UTC is the next p2p meeting. We have one proposed topic so far: <a href="https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-IRC-meetings#8-sept-2020" class="link" target="_blank">https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-IRC-meetings#8-sept-2020</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1599510840' id='402538'>
<a class='timestamp' href='#402538'><time timestamp='2020-09-07T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8</a> | RPC command to sign text with wallet private key · Issue #8 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1599510840' id='402539'>
<a class='timestamp' href='#402539'><time timestamp='2020-09-07T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
Feel free to add proposed topics to the wiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1599516000' id='402540'>
<a class='timestamp' href='#402540'><time timestamp='2020-09-07T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto opened pull request #19913: refactor: Drop unused `UniqueLock(Mutex*, ...)` constructor in sync.h (master...200907-sync) <a href="https://github.com/bitcoin/bitcoin/pull/19913" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19913</a>
<br>
</div>

</div>
</section>

</body>
</html>
