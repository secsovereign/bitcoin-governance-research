<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-01-13
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-01-13' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:25 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-12-13">&lt;</a><span class='header'>   January 2017   </span><a href="/bitcoin-core-dev/2017-02-13">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2017-01-01">1</a>  <a class="" href="/bitcoin-core-dev/2017-01-02">2</a>  <a class="" href="/bitcoin-core-dev/2017-01-03">3</a>  <a class="" href="/bitcoin-core-dev/2017-01-04">4</a>  <a class="" href="/bitcoin-core-dev/2017-01-05">5</a>  <a class="" href="/bitcoin-core-dev/2017-01-06">6</a>  <a class="" href="/bitcoin-core-dev/2017-01-07">7</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-01-08">8</a>  <a class="" href="/bitcoin-core-dev/2017-01-09">9</a> <a class="" href="/bitcoin-core-dev/2017-01-10">10</a> <a class="" href="/bitcoin-core-dev/2017-01-11">11</a> <a class="" href="/bitcoin-core-dev/2017-01-12">12</a> <a class="current" href="/bitcoin-core-dev/2017-01-13">13</a> <a class="" href="/bitcoin-core-dev/2017-01-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-01-15">15</a> <a class="" href="/bitcoin-core-dev/2017-01-16">16</a> <a class="" href="/bitcoin-core-dev/2017-01-17">17</a> <a class="" href="/bitcoin-core-dev/2017-01-18">18</a> <a class="" href="/bitcoin-core-dev/2017-01-19">19</a> <a class="" href="/bitcoin-core-dev/2017-01-20">20</a> <a class="" href="/bitcoin-core-dev/2017-01-21">21</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-01-22">22</a> <a class="" href="/bitcoin-core-dev/2017-01-23">23</a> <a class="" href="/bitcoin-core-dev/2017-01-24">24</a> <a class="" href="/bitcoin-core-dev/2017-01-25">25</a> <a class="" href="/bitcoin-core-dev/2017-01-26">26</a> <a class="" href="/bitcoin-core-dev/2017-01-27">27</a> <a class="" href="/bitcoin-core-dev/2017-01-28">28</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-01-29">29</a> <a class="" href="/bitcoin-core-dev/2017-01-30">30</a> <a class="" href="/bitcoin-core-dev/2017-01-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1484267460' id='523414'>
<a class='timestamp' href='#523414'><time timestamp='2017-01-13T00:31:00Z'>00:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: want to review #9535 as well?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484267460' id='523415'>
<a class='timestamp' href='#523415'><time timestamp='2017-01-13T00:31:00Z'>00:31</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9535" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9535</a> | Split CNode::cs_vSend: message processing and message sending by TheBlueMatt · Pull Request #9535 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484268240' id='523416'>
<a class='timestamp' href='#523416'><time timestamp='2017-01-13T00:44:00Z'>00:44</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
#9535 seems easy to review for those familiar with the network code
<br>
</div>

<div class='talk op-msg' data-timestamp='1484268240' id='523417'>
<a class='timestamp' href='#523417'><time timestamp='2017-01-13T00:44:00Z'>00:44</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9535" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9535</a> | Split CNode::cs_vSend: message processing and message sending by TheBlueMatt · Pull Request #9535 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484268240' id='523418'>
<a class='timestamp' href='#523418'><time timestamp='2017-01-13T00:44:00Z'>00:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(its also a big performance bump)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484268300' id='523419'>
<a class='timestamp' href='#523419'><time timestamp='2017-01-13T00:45:00Z'>00:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
or, well, easy to review for anyone who can read a list of variable names and trace their usage :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1484268420' id='523420'>
<a class='timestamp' href='#523420'><time timestamp='2017-01-13T00:47:00Z'>00:47</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
yeah, I wish I could review that, but never paid much attention to the network code above processMessages and I wasn&#x27;t able to keep up with the recent changes (I still greatly appreciate the separation and look forward studying it better after all these improvements)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484268540' id='523421'>
<a class='timestamp' href='#523421'><time timestamp='2017-01-13T00:49:00Z'>00:49</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
well #9535 is just a lock split, so just going through each variable that is accessed in one side and making sure its not accessed on the other is a pretty good (though admittedly not 100% sufficient) review
<br>
</div>

<div class='talk op-msg' data-timestamp='1484268540' id='523422'>
<a class='timestamp' href='#523422'><time timestamp='2017-01-13T00:49:00Z'>00:49</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9535" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9535</a> | Split CNode::cs_vSend: message processing and message sending by TheBlueMatt · Pull Request #9535 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484268600' id='523423'>
<a class='timestamp' href='#523423'><time timestamp='2017-01-13T00:50:00Z'>00:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and one one of the sides in this case there are relatively few variables accessed, so its not so hard
<br>
</div>

<div class='talk op-msg' data-timestamp='1484268600' id='523424'>
<a class='timestamp' href='#523424'><time timestamp='2017-01-13T00:50:00Z'>00:50</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I just meant the code changes are small
<br>
</div>

<div class='talk op-msg' data-timestamp='1484268720' id='523425'>
<a class='timestamp' href='#523425'><time timestamp='2017-01-13T00:52:00Z'>00:52</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I guess I could do a mechanical review like what you propose
<br>
</div>

<div class='talk op-msg' data-timestamp='1484268720' id='523426'>
<a class='timestamp' href='#523426'><time timestamp='2017-01-13T00:52:00Z'>00:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: yep, will do after dinner
<br>
</div>

<div class='talk op-msg' data-timestamp='1484268840' id='523427'>
<a class='timestamp' href='#523427'><time timestamp='2017-01-13T00:54:00Z'>00:54</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jtimon: yea, it&#x27;s sane, just needs manual review of what&#x27;s accessed under the locks before/after
<br>
</div>

<div class='talk op-msg' data-timestamp='1484269140' id='523428'>
<a class='timestamp' href='#523428'><time timestamp='2017-01-13T00:59:00Z'>00:59</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(note that you can treat it as non-recursive, so very simple)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484269140' id='523429'>
<a class='timestamp' href='#523429'><time timestamp='2017-01-13T00:59:00Z'>00:59</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
yeah, I considered it as the network-related PR I was more likely to be able to review, but then I tried to estimate how much would it take to do that and my answer was &quot;no idea, let&#x27;s move to another PR for now&quot;, if you say it&#x27;s easy, thanks, I&#x27;ll gladly do that (maybe not today, was hoping to at least utACK some individual commits in #9512)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484269140' id='523430'>
<a class='timestamp' href='#523430'><time timestamp='2017-01-13T00:59:00Z'>00:59</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9512" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9512</a> | Fix various things -fsanitize complains about by sipa · Pull Request #9512 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484269260' id='523431'>
<a class='timestamp' href='#523431'><time timestamp='2017-01-13T01:01:00Z'>01:01</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jtimon: np. no obligation, was just echoing what matt said
<br>
</div>

<div class='talk op-msg' data-timestamp='1484269560' id='523432'>
<a class='timestamp' href='#523432'><time timestamp='2017-01-13T01:06:00Z'>01:06</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
cfields: sure, it&#x27;s a good tip, if you guys tell me it shouldn&#x27;t take long to do that manual review I think it&#x27;s a good use of my time, hey, it&#x27;s dividing an important lock into 2! I guess I cs_main got me too scared about reviewing concurrency unless it was cs_args, cs_mempool (encapsulated in its class), or maybe even a 10-line singleton for libsecp&#x27;s context or something
<br>
</div>

<div class='talk op-msg' data-timestamp='1484269620' id='523433'>
<a class='timestamp' href='#523433'><time timestamp='2017-01-13T01:07:00Z'>01:07</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
will review #9535
<br>
</div>

<div class='talk op-msg' data-timestamp='1484269620' id='523434'>
<a class='timestamp' href='#523434'><time timestamp='2017-01-13T01:07:00Z'>01:07</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9535" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9535</a> | Split CNode::cs_vSend: message processing and message sending by TheBlueMatt · Pull Request #9535 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484273640' id='523435'>
<a class='timestamp' href='#523435'><time timestamp='2017-01-13T02:14:00Z'>02:14</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
in case someone gets bored among so many things to review somehow...#8855 has been needing review for so long...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484273640' id='523436'>
<a class='timestamp' href='#523436'><time timestamp='2017-01-13T02:14:00Z'>02:14</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8855" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8855</a> | Use a proper factory for creating chainparams by jtimon · Pull Request #8855 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484273880' id='523437'>
<a class='timestamp' href='#523437'><time timestamp='2017-01-13T02:18:00Z'>02:18</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
about a previous version of it gmaxwell once said &quot;This adds news without frees&quot;, and I believe I removed all the non-frees many rebases ago...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484274180' id='523438'>
<a class='timestamp' href='#523438'><time timestamp='2017-01-13T02:23:00Z'>02:23</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
also, how should I benchmark #8498 to make it attractive?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484274180' id='523439'>
<a class='timestamp' href='#523439'><time timestamp='2017-01-13T02:23:00Z'>02:23</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8498" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8498</a> | Optimization: Minimize the number of times it is checked that no money... by jtimon · Pull Request #8498 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484274240' id='523440'>
<a class='timestamp' href='#523440'><time timestamp='2017-01-13T02:24:00Z'>02:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
jtimon: do a few reindexes with and without it on a relatively unused machine
<br>
</div>

<div class='talk op-msg' data-timestamp='1484274540' id='523441'>
<a class='timestamp' href='#523441'><time timestamp='2017-01-13T02:29:00Z'>02:29</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
BlueMatt: that will show some improvement (since connectblock is still calculating the tx fee twice), but the most interesting effect should be with acceptToMemoryPool...oh,wait, now that&#x27;s only calculating it twice per tx too (it used to be much more), yeah, thanks, can try that (probably after 0.14)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484274720' id='523442'>
<a class='timestamp' href='#523442'><time timestamp='2017-01-13T02:32:00Z'>02:32</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
should probably have a look at src/bench and maybe try to do the reindex from there
<br>
</div>

<div class='talk op-msg' data-timestamp='1484274960' id='523443'>
<a class='timestamp' href='#523443'><time timestamp='2017-01-13T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
luke-jr: re: FlexVer...talos failed to get the (crazy high) funding they were trying to raise, so thats not gonna happen
<br>
</div>

<div class='talk op-msg' data-timestamp='1484274960' id='523444'>
<a class='timestamp' href='#523444'><time timestamp='2017-01-13T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
BlueMatt: no, FlexVer survives beyond Talos
<br>
</div>

<div class='talk op-msg' data-timestamp='1484274960' id='523445'>
<a class='timestamp' href='#523445'><time timestamp='2017-01-13T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
without more funding
<br>
</div>

<div class='talk op-msg' data-timestamp='1484274960' id='523446'>
<a class='timestamp' href='#523446'><time timestamp='2017-01-13T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh? are they putting it in something else?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275020' id='523447'>
<a class='timestamp' href='#523447'><time timestamp='2017-01-13T02:37:00Z'>02:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(my understanding was the raptor folks were essentially saying &quot;ok, well we didnt get the funding, so if you want any pieces of talos you have to come pay us for them&quot;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275020' id='523448'>
<a class='timestamp' href='#523448'><time timestamp='2017-01-13T02:37:00Z'>02:37</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
non-workstation/servers
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275020' id='523449'>
<a class='timestamp' href='#523449'><time timestamp='2017-01-13T02:37:00Z'>02:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
well, ok, technically they have another 48 hours to raise the missing 3.something million USD.....
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275080' id='523450'>
<a class='timestamp' href='#523450'><time timestamp='2017-01-13T02:38:00Z'>02:38</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
FlexVer-based VPS is their fallback after Talos failing
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275080' id='523451'>
<a class='timestamp' href='#523451'><time timestamp='2017-01-13T02:38:00Z'>02:38</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
that funding target was pretty nuts. :-(
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275080' id='523452'>
<a class='timestamp' href='#523452'><time timestamp='2017-01-13T02:38:00Z'>02:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh? link?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275080' id='523453'>
<a class='timestamp' href='#523453'><time timestamp='2017-01-13T02:38:00Z'>02:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
midnightmagic: yea...real shame, too
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275140' id='523454'>
<a class='timestamp' href='#523454'><time timestamp='2017-01-13T02:39:00Z'>02:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
they should have done the shit the ORWL folks did - raise a modest amount and assume you can sell more of the hardware later to make up the missing costs
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275140' id='523455'>
<a class='timestamp' href='#523455'><time timestamp='2017-01-13T02:39:00Z'>02:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
of course its a big risk, but at least we&#x27;d get cool stuff out of it :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275140' id='523456'>
<a class='timestamp' href='#523456'><time timestamp='2017-01-13T02:39:00Z'>02:39</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
Perhaps they just didn&#x27;t have the money to do it to begin with.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275140' id='523457'>
<a class='timestamp' href='#523457'><time timestamp='2017-01-13T02:39:00Z'>02:39</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
BlueMatt: #talos-workstation discussion
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275140' id='523458'>
<a class='timestamp' href='#523458'><time timestamp='2017-01-13T02:39:00Z'>02:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
luke-jr: oh? link?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275200' id='523459'>
<a class='timestamp' href='#523459'><time timestamp='2017-01-13T02:40:00Z'>02:40</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
Similar failures have happened many times in the past e.g. phase5&#x27;s attempt to resurrect the Amiga with the A\Box
<br>
</div>

<div class='talk op-msg' data-timestamp='1484275200' id='523460'>
<a class='timestamp' href='#523460'><time timestamp='2017-01-13T02:40:00Z'>02:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ooo, didnt know about that
<br>
</div>

<div class='talk op-msg' data-timestamp='1484276460' id='523461'>
<a class='timestamp' href='#523461'><time timestamp='2017-01-13T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-4'> * sipa</span>&gt;
googles
<br>
</div>

<div class='talk op-msg' data-timestamp='1484276580' id='523462'>
<a class='timestamp' href='#523462'><time timestamp='2017-01-13T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: I dunno, maybe, will have to think; but if you&#x27;re concerned about security here there are many better things to do that would harden it that wouldn&#x27;t change performance.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484276640' id='523463'>
<a class='timestamp' href='#523463'><time timestamp='2017-01-13T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: e.g. make it so that it can&#x27;t skip signatures in a reorg.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484276640' id='523464'>
<a class='timestamp' href='#523464'><time timestamp='2017-01-13T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: thanks for fixing up the const. I think my gripe wasn&#x27;t really justified. The const rules for pointers/references still trip me up sometimes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484276640' id='523465'>
<a class='timestamp' href='#523465'><time timestamp='2017-01-13T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: hadnt thought about that one...came up with a few things which addressed the specific scenario I described above, though figured that would be very scenario-specific :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1484276700' id='523466'>
<a class='timestamp' href='#523466'><time timestamp='2017-01-13T03:05:00Z'>03:05</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: I agree it was super hard to read what was going on there, and why it wasnt some crazy const_cast unsafe bullshit the way it read
<br>
</div>

<div class='talk op-msg' data-timestamp='1484276700' id='523467'>
<a class='timestamp' href='#523467'><time timestamp='2017-01-13T03:05:00Z'>03:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: another one is to not skip signatures when there is a long fork that doesn&#x27;t cointain this block.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484276760' id='523468'>
<a class='timestamp' href='#523468'><time timestamp='2017-01-13T03:06:00Z'>03:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(both of these were security features I recommended for the hashpower only decision-- but I didn&#x27;t think their complexity was worthwhile with a static hash.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484276760' id='523469'>
<a class='timestamp' href='#523469'><time timestamp='2017-01-13T03:06:00Z'>03:06</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: right, that. const_cast usually just sets off alarms to me that something&#x27;s fishy. The change makes it easy to reason about.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484276760' id='523470'>
<a class='timestamp' href='#523470'><time timestamp='2017-01-13T03:06:00Z'>03:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: yea, I wanted to avoid suggesting adding twenty ways it could be hardened and risk it slipping for 0.14
<br>
</div>

<div class='talk op-msg' data-timestamp='1484276820' id='523471'>
<a class='timestamp' href='#523471'><time timestamp='2017-01-13T03:07:00Z'>03:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think both are more powerful than just burriedness, I even only did the burriedness because it was ~1 LOC. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1484276940' id='523472'>
<a class='timestamp' href='#523472'><time timestamp='2017-01-13T03:09:00Z'>03:09</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: both assume you actually see the other branch, which isnt a crazy assumption, but is different from burriedness
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277000' id='523473'>
<a class='timestamp' href='#523473'><time timestamp='2017-01-13T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
well, reorg less so
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277000' id='523474'>
<a class='timestamp' href='#523474'><time timestamp='2017-01-13T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but either way, I&#x27;m happy if 2 weeks meets your performance goals
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277000' id='523475'>
<a class='timestamp' href='#523475'><time timestamp='2017-01-13T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
if we come up with fun ways to strengthen it in the future (eg when jl2012&#x27;s fork warning stuff gets fixed it would be easy to combine that), then we can do that
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277000' id='523476'>
<a class='timestamp' href='#523476'><time timestamp='2017-01-13T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: essentially DRM that allows selling encrypted VPSs that the physical-access/datacentre/host-manager cannot see into or control (beyond poweroff/delete)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277060' id='523477'>
<a class='timestamp' href='#523477'><time timestamp='2017-01-13T03:11:00Z'>03:11</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli: I&#x27;m going through #9294, though I&#x27;m afraid I don&#x27;t know the code well enough to give any helpful review. So nits is the best I can do :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277060' id='523478'>
<a class='timestamp' href='#523478'><time timestamp='2017-01-13T03:11:00Z'>03:11</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9294" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9294</a> | Use internal HD chain for change outputs (hd split) by jonasschnelli · Pull Request #9294 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277120' id='523479'>
<a class='timestamp' href='#523479'><time timestamp='2017-01-13T03:12:00Z'>03:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: the forkwarning stuff &#x27;brokenness&#x27; actually wouldn&#x27;t effect that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277120' id='523480'>
<a class='timestamp' href='#523480'><time timestamp='2017-01-13T03:12:00Z'>03:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
because in that case you&#x27;d be on the attack chain, which is best header, but there would be a long valid fork that doesn&#x27;t contain your block.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277420' id='523481'>
<a class='timestamp' href='#523481'><time timestamp='2017-01-13T03:17:00Z'>03:17</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: am I going to throw you off if I go ahead and squash 9441? Not sure if you want to have another look after the last few cleanups
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277420' id='523482'>
<a class='timestamp' href='#523482'><time timestamp='2017-01-13T03:17:00Z'>03:17</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: ok, so do you want to add that? I do not think it is a replacement for setting the time to 2 weeks, plus setting the time to 2 weeks avoids the need to get re-reviews when we&#x27;re already not gonna make our goals
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277420' id='523483'>
<a class='timestamp' href='#523483'><time timestamp='2017-01-13T03:17:00Z'>03:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
14:52 &lt; jtimon&gt; regarding the 5.5 vs 7.5 h benchmark, that&#x27;s only for fresh releases or people setting the arg manually right before the  limit, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277420' id='523484'>
<a class='timestamp' href='#523484'><time timestamp='2017-01-13T03:17:00Z'>03:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
14:52 &lt; BlueMatt&gt; yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277420' id='523485'>
<a class='timestamp' href='#523485'><time timestamp='2017-01-13T03:17:00Z'>03:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
no increasing the offset increases the total sync time for that software forever.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277480' id='523486'>
<a class='timestamp' href='#523486'><time timestamp='2017-01-13T03:18:00Z'>03:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
huh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277480' id='523487'>
<a class='timestamp' href='#523487'><time timestamp='2017-01-13T03:18:00Z'>03:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
did i misread the code?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277540' id='523488'>
<a class='timestamp' href='#523488'><time timestamp='2017-01-13T03:19:00Z'>03:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh no I&#x27;m being momentarily stupid.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277540' id='523489'>
<a class='timestamp' href='#523489'><time timestamp='2017-01-13T03:19:00Z'>03:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
the software is updated with some assumevalid....at that time all blocks a week before that assumevalid arent validated...one week later all blocks up to that assumevalid are validated
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277540' id='523490'>
<a class='timestamp' href='#523490'><time timestamp='2017-01-13T03:19:00Z'>03:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ok, phew
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277540' id='523491'>
<a class='timestamp' href='#523491'><time timestamp='2017-01-13T03:19:00Z'>03:19</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
huh? +1 (I bet the answer is in GetBlockProofEquivalentTime which is the part I didn&#x27;t fully read because it wasn&#x27;t being changed in that PR)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277600' id='523492'>
<a class='timestamp' href='#523492'><time timestamp='2017-01-13T03:20:00Z'>03:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: I&#x27;m referring to the case where the user updates it. Which I expect people to do on low power devices.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277600' id='523493'>
<a class='timestamp' href='#523493'><time timestamp='2017-01-13T03:20:00Z'>03:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ahh, yes, ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277600' id='523494'>
<a class='timestamp' href='#523494'><time timestamp='2017-01-13T03:20:00Z'>03:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it basically says you can&#x27;t sync without processing N-back no matter what you set. So if you&#x27;re on a low power device where a month of blocks takes hours, thats what you&#x27;re left with.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277720' id='523495'>
<a class='timestamp' href='#523495'><time timestamp='2017-01-13T03:22:00Z'>03:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
how long does it take to sync a week&#x27;s blocks on an rpi?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277720' id='523496'>
<a class='timestamp' href='#523496'><time timestamp='2017-01-13T03:22:00Z'>03:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
or, cdecker you were complaining about stuff on the cheapest digitalocean thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277720' id='523497'>
<a class='timestamp' href='#523497'><time timestamp='2017-01-13T03:22:00Z'>03:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
how slow was that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277780' id='523498'>
<a class='timestamp' href='#523498'><time timestamp='2017-01-13T03:23:00Z'>03:23</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
but the user doesn&#x27;t have to do anything right? just wait for the program to fully  the N last blocks, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277780' id='523499'>
<a class='timestamp' href='#523499'><time timestamp='2017-01-13T03:23:00Z'>03:23</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
s/fully  the/fully verify the/
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277780' id='523500'>
<a class='timestamp' href='#523500'><time timestamp='2017-01-13T03:23:00Z'>03:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: a lot of people just copy the chain from another system; instead they could copy the assume block.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277840' id='523501'>
<a class='timestamp' href='#523501'><time timestamp='2017-01-13T03:24:00Z'>03:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
on the flip side, a lot of setup guides will tell you to copy blockchain.info&#x27;s latest hash as the assumeblock the day after release :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277900' id='523502'>
<a class='timestamp' href='#523502'><time timestamp='2017-01-13T03:25:00Z'>03:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I also worry that making this too slow increases the occurance of people copying the state. E.g. there is someone on reddit that responds to every thread about slow sync with a download for a synced node.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277900' id='523503'>
<a class='timestamp' href='#523503'><time timestamp='2017-01-13T03:25:00Z'>03:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, agreed, but there is a line to walk there
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277900' id='523504'>
<a class='timestamp' href='#523504'><time timestamp='2017-01-13T03:25:00Z'>03:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: thats better than taking a whole download of the state which people are already being told to do.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277900' id='523505'>
<a class='timestamp' href='#523505'><time timestamp='2017-01-13T03:25:00Z'>03:25</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
re N blocks vs time: I definitely like height more, for everything related to time in consensus
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277960' id='523506'>
<a class='timestamp' href='#523506'><time timestamp='2017-01-13T03:26:00Z'>03:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(I&#x27;d tend to agree that a week is sufficient to keep stupidity of random block explorers from creeping into consensus)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277960' id='523507'>
<a class='timestamp' href='#523507'><time timestamp='2017-01-13T03:26:00Z'>03:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
just prefer &gt; 1 week for other reasons
<br>
</div>

<div class='talk op-msg' data-timestamp='1484277960' id='523508'>
<a class='timestamp' href='#523508'><time timestamp='2017-01-13T03:26:00Z'>03:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I&#x27;m open to being convinced if it really is prohibitively slow (compared to the rest of chainsync w/o sig-checks)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484278080' id='523509'>
<a class='timestamp' href='#523509'><time timestamp='2017-01-13T03:28:00Z'>03:28</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
To reiterate, I don&#x27;t see the danger with doing a month either: advanced users that look for top performance can compile the code changing the month to a week or 2 blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1484278080' id='523510'>
<a class='timestamp' href='#523510'><time timestamp='2017-01-13T03:28:00Z'>03:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I dont think thats a realistic request
<br>
</div>

<div class='talk op-msg' data-timestamp='1484278320' id='523511'>
<a class='timestamp' href='#523511'><time timestamp='2017-01-13T03:32:00Z'>03:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jtimon: none of this should involve time or height.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484278320' id='523512'>
<a class='timestamp' href='#523512'><time timestamp='2017-01-13T03:32:00Z'>03:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
<u>__sigh__</u> both are trivially controlled by miners.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484278320' id='523513'>
<a class='timestamp' href='#523513'><time timestamp='2017-01-13T03:32:00Z'>03:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the test in the code involves work.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484278380' id='523514'>
<a class='timestamp' href='#523514'><time timestamp='2017-01-13T03:33:00Z'>03:33</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I guess my point is that &quot;I want to resync faster than the assumevalid by default in the last release&quot; use case is not very compeling
<br>
</div>

<div class='talk op-msg' data-timestamp='1484278380' id='523515'>
<a class='timestamp' href='#523515'><time timestamp='2017-01-13T03:33:00Z'>03:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jtimon: it is very compelling when it&#x27;s taking days to sync and can be fixed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484278440' id='523516'>
<a class='timestamp' href='#523516'><time timestamp='2017-01-13T03:34:00Z'>03:34</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
gmaxwell: the week sounds like time, but sorry, I admited I don&#x27;t fully understand GetBlockProofEquivalentTime so I shouldn&#x27;t have made the time vs height comment and I bet you&#x27;re right it was irrelevant
<br>
</div>

<div class='talk op-msg' data-timestamp='1484280360' id='523517'>
<a class='timestamp' href='#523517'><time timestamp='2017-01-13T04:06:00Z'>04:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
uhhh, wut....just fetched from github and compared my local branch between my two machines as always....except this time they&#x27;re different
<br>
</div>

<div class='talk op-msg' data-timestamp='1484280360' id='523518'>
<a class='timestamp' href='#523518'><time timestamp='2017-01-13T04:06:00Z'>04:06</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
huh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484280360' id='523519'>
<a class='timestamp' href='#523519'><time timestamp='2017-01-13T04:06:00Z'>04:06</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
same commit hashes?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484280360' id='523520'>
<a class='timestamp' href='#523520'><time timestamp='2017-01-13T04:06:00Z'>04:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
different commit hash, same tree
<br>
</div>

<div class='talk op-msg' data-timestamp='1484280420' id='523521'>
<a class='timestamp' href='#523521'><time timestamp='2017-01-13T04:07:00Z'>04:07</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
goes to read git-log to see if github is fucking with shit or if I&#x27;m confused
<br>
</div>

<div class='talk op-msg' data-timestamp='1484280420' id='523522'>
<a class='timestamp' href='#523522'><time timestamp='2017-01-13T04:07:00Z'>04:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, nvm, false alarm
<br>
</div>

<div class='talk op-msg' data-timestamp='1484280420' id='523523'>
<a class='timestamp' href='#523523'><time timestamp='2017-01-13T04:07:00Z'>04:07</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
was testing git commit --amen and forgot that i changed the commithash on the top commit
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281320' id='523524'>
<a class='timestamp' href='#523524'><time timestamp='2017-01-13T04:22:00Z'>04:22</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: I suppose you just added cs_sendProcessing for general correctness? afaik, with the current single-threaded processing, there&#x27;s no actual need for it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281380' id='523525'>
<a class='timestamp' href='#523525'><time timestamp='2017-01-13T04:23:00Z'>04:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/pull/9535/commits/11290734ca7261f732c9f43f152c69de3a42546c" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9535/commits/11290734ca7261f732c9f43f152c69de3a42546c</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281380' id='523526'>
<a class='timestamp' href='#523526'><time timestamp='2017-01-13T04:23:00Z'>04:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
see commit body :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281380' id='523527'>
<a class='timestamp' href='#523527'><time timestamp='2017-01-13T04:23:00Z'>04:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
&quot;Technically cs_sendProcessing is entirely useless now because it
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281380' id='523528'>
<a class='timestamp' href='#523528'><time timestamp='2017-01-13T04:23:00Z'>04:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
is only ever taken on the one MessageHandler thread, but because
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281380' id='523529'>
<a class='timestamp' href='#523529'><time timestamp='2017-01-13T04:23:00Z'>04:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
there may be multiple of those in the future, it is left in place&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281380' id='523530'>
<a class='timestamp' href='#523530'><time timestamp='2017-01-13T04:23:00Z'>04:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but, yea, its for correctness
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281380' id='523531'>
<a class='timestamp' href='#523531'><time timestamp='2017-01-13T04:23:00Z'>04:23</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281380' id='523532'>
<a class='timestamp' href='#523532'><time timestamp='2017-01-13T04:23:00Z'>04:23</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
at least we agree :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281380' id='523533'>
<a class='timestamp' href='#523533'><time timestamp='2017-01-13T04:23:00Z'>04:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
true
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281380' id='523534'>
<a class='timestamp' href='#523534'><time timestamp='2017-01-13T04:23:00Z'>04:23</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
serves me right for not reading. thanks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281500' id='523535'>
<a class='timestamp' href='#523535'><time timestamp='2017-01-13T04:25:00Z'>04:25</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
it&#x27;d be nice if github emphasized the display of full individual commit messages better. I&#x27;m well aware that I put much more effort into writing them than reviewers put into reading them. And I&#x27;m equally guilty in my own reviews.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281560' id='523536'>
<a class='timestamp' href='#523536'><time timestamp='2017-01-13T04:26:00Z'>04:26</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
generally tries to avoid reading too much author-written text during review
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281560' id='523537'>
<a class='timestamp' href='#523537'><time timestamp='2017-01-13T04:26:00Z'>04:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
too easy to see what the author intended instead of what it actually does
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281560' id='523538'>
<a class='timestamp' href='#523538'><time timestamp='2017-01-13T04:26:00Z'>04:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I tend to read the commit message if I&#x27;m confused to see if it helps me understand, but only if I have an idea that it might be broken
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281620' id='523539'>
<a class='timestamp' href='#523539'><time timestamp='2017-01-13T04:27:00Z'>04:27</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
fair point
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281620' id='523540'>
<a class='timestamp' href='#523540'><time timestamp='2017-01-13T04:27:00Z'>04:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ok, I&#x27;m down to 4 prs to review tomorrow...should be fun
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281800' id='523541'>
<a class='timestamp' href='#523541'><time timestamp='2017-01-13T04:30:00Z'>04:30</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
heh     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281800' id='523542'>
<a class='timestamp' href='#523542'><time timestamp='2017-01-13T04:30:00Z'>04:30</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
feeling better, i hope?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281800' id='523543'>
<a class='timestamp' href='#523543'><time timestamp='2017-01-13T04:30:00Z'>04:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, well enough to review, at least
<br>
</div>

<div class='talk op-msg' data-timestamp='1484281800' id='523544'>
<a class='timestamp' href='#523544'><time timestamp='2017-01-13T04:30:00Z'>04:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
taking a day off to lie in bed helped a ton
<br>
</div>

<div class='talk op-msg' data-timestamp='1484282100' id='523545'>
<a class='timestamp' href='#523545'><time timestamp='2017-01-13T04:35:00Z'>04:35</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
good
<br>
</div>

<div class='talk op-msg' data-timestamp='1484282100' id='523546'>
<a class='timestamp' href='#523546'><time timestamp='2017-01-13T04:35:00Z'>04:35</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
those days are helpful even when you&#x27;re not sick :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484282160' id='523547'>
<a class='timestamp' href='#523547'><time timestamp='2017-01-13T04:36:00Z'>04:36</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
maybe not in bed all day, but disconnected enough to make you crave code again
<br>
</div>

<div class='talk op-msg' data-timestamp='1484282160' id='523548'>
<a class='timestamp' href='#523548'><time timestamp='2017-01-13T04:36:00Z'>04:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, didnt mean to imply I didnt have email to respond to all day :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1484282220' id='523549'>
<a class='timestamp' href='#523549'><time timestamp='2017-01-13T04:37:00Z'>04:37</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
oh, heh
<br>
</div>

<div class='talk op-msg' data-timestamp='1484292900' id='523550'>
<a class='timestamp' href='#523550'><time timestamp='2017-01-13T07:35:00Z'>07:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: is this (<a href="https://github.com/sipa/bitcoin-seeder/pull/42)" class="link" target="_blank">https://github.com/sipa/bitcoin-seeder/pull/42)</a> related to the seeder silent crash we recently encountered?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484294220' id='523551'>
<a class='timestamp' href='#523551'><time timestamp='2017-01-13T07:57:00Z'>07:57</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Has anyone running master noticed sync/reindex stalling just prior to getting a connection refused message in the debug.log?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484294280' id='523552'>
<a class='timestamp' href='#523552'><time timestamp='2017-01-13T07:58:00Z'>07:58</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Have just had one instance of the GUI freezing/lagging, and no debug output for ~10 seconds. Then a few UpdateTip messages followed by a Connection refused.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484294340' id='523553'>
<a class='timestamp' href='#523553'><time timestamp='2017-01-13T07:59:00Z'>07:59</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Testing 9484 btw, I think I&#x27;ll get a full sync in just less than 2 hours.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484294340' id='523554'>
<a class='timestamp' href='#523554'><time timestamp='2017-01-13T07:59:00Z'>07:59</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
1hr40m to block 424&#x27;000
<br>
</div>

<div class='talk op-msg' data-timestamp='1484294400' id='523555'>
<a class='timestamp' href='#523555'><time timestamp='2017-01-13T08:00:00Z'>08:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
fanquake: my first guess is the connection refused is just that the sleep that drove it hit its timeout while the slow operation happened, so it happened immediately after update tip.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484294460' id='523556'>
<a class='timestamp' href='#523556'><time timestamp='2017-01-13T08:01:00Z'>08:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
fanquake: and I would assume the updatetip took a while whole holding CS main because it was processing a bunch of blocks at once due to a reodering.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484294460' id='523557'>
<a class='timestamp' href='#523557'><time timestamp='2017-01-13T08:01:00Z'>08:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
e.g. you get a bunch of blocks with one massively out of order, when you finally fill in that missing block it goes and connects 100 at a time holding locks the whole time, which stalls the gui and causes some loss of network transfer speed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484294880' id='523558'>
<a class='timestamp' href='#523558'><time timestamp='2017-01-13T08:08:00Z'>08:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
fanquake: there may be some more interesting bug lurking for sure... but if so I wouldn&#x27;t notice it because I&#x27;d discount it because we already know that ProcessNewBlock can have very high latency.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484297520' id='523559'>
<a class='timestamp' href='#523559'><time timestamp='2017-01-13T08:52:00Z'>08:52</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
gmaxwell thanks for the explanation. I&#x27;ll collect a few more details and open an issue to track it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484297580' id='523560'>
<a class='timestamp' href='#523560'><time timestamp='2017-01-13T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
gmaxwell btw, final sync time with 9484 -dbcache=4096 -par=8 was 2h12m
<br>
</div>

<div class='talk op-msg' data-timestamp='1484297580' id='523561'>
<a class='timestamp' href='#523561'><time timestamp='2017-01-13T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
s/sync/-reindex-chainstate
<br>
</div>

<div class='talk op-msg' data-timestamp='1484297580' id='523562'>
<a class='timestamp' href='#523562'><time timestamp='2017-01-13T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
you might want to add some logs around proceessnew block, e.g. enter and exit times. to try to validate my theory.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484297580' id='523563'>
<a class='timestamp' href='#523563'><time timestamp='2017-01-13T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
fanquake: fantastic.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484297640' id='523564'>
<a class='timestamp' href='#523564'><time timestamp='2017-01-13T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
That was to block 447885.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484297760' id='523565'>
<a class='timestamp' href='#523565'><time timestamp='2017-01-13T08:56:00Z'>08:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we could also consider adding a locking debug mode that saves the time of lock/unlock and prints if a lock is held more than (say) 1 second by a single piece of code.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484307000' id='523566'>
<a class='timestamp' href='#523566'><time timestamp='2017-01-13T11:30:00Z'>11:30</time></a>
&lt;<span class='nick nick-8'> cjamthagen</span>&gt;
Are timelocked transactions included in your mempool if they are not yet valid?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484314320' id='523567'>
<a class='timestamp' href='#523567'><time timestamp='2017-01-13T13:32:00Z'>13:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
cjamthagen: no, they are not
<br>
</div>

<div class='talk op-msg' data-timestamp='1484316360' id='523568'>
<a class='timestamp' href='#523568'><time timestamp='2017-01-13T14:06:00Z'>14:06</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
luke-jr: just want to be sure you realize in #9519 it&#x27;s not all txs that signal opt-in RBF that are excluded, but only actual replacements, regardless of whether they themselves signal opt-in RBF.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484316360' id='523569'>
<a class='timestamp' href='#523569'><time timestamp='2017-01-13T14:06:00Z'>14:06</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9519" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9519</a> | Exclude RBF replacement txs from fee estimation by morcos · Pull Request #9519 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484318940' id='523570'>
<a class='timestamp' href='#523570'><time timestamp='2017-01-13T14:49:00Z'>14:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #9542: Docs: Update CONTRIBUTING.md (master...CONTRIBUTINGcomponents) <a href="https://github.com/bitcoin/bitcoin/pull/9542" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9542</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484319000' id='523571'>
<a class='timestamp' href='#523571'><time timestamp='2017-01-13T14:50:00Z'>14:50</time></a>
&lt;<span class='nick nick-9'> jeremyru1in</span>&gt;
This is not really critical, but as jtimon points out there is a lot of confusion over &quot;Trivial&quot; tags for PR&#x27;s. <a href="https://github.com/bitcoin/bitcoin/blob/03dd707dc027fbf6f24120213f8eb66571600374/CONTRIBUTING.md" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/03dd707dc027fbf6f24120213f8eb66571600374/CONTRIBUTING.md</a> is the closest thing to a specification of what Trivial means. I think that we&#x27;d save ourselves a lot of confusion if we adopted a policy that was more in line with how people typically (and in many other projects) use &quot;trivial
<br>
</div>

<div class='talk op-msg' data-timestamp='1484319000' id='523572'>
<a class='timestamp' href='#523572'><time timestamp='2017-01-13T14:50:00Z'>14:50</time></a>
&lt;<span class='nick nick-9'> jeremyru1in</span>&gt;
oops
<br>
</div>

<div class='talk op-msg' data-timestamp='1484319000' id='523573'>
<a class='timestamp' href='#523573'><time timestamp='2017-01-13T14:50:00Z'>14:50</time></a>
&lt;<span class='nick nick-9'> jeremyru1in</span>&gt;
I see jnewbery has just opened something on that, will move my message there
<br>
</div>

<div class='talk op-msg' data-timestamp='1484320020' id='523574'>
<a class='timestamp' href='#523574'><time timestamp='2017-01-13T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laudaa opened pull request #9543: [Trivial] Grammar and typo correction (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/9543" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9543</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484320560' id='523575'>
<a class='timestamp' href='#523575'><time timestamp='2017-01-13T15:16:00Z'>15:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jeremyru1in: i&#x27;m sure we had that written down somewhere, but i can&#x27;t find it anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1484320560' id='523576'>
<a class='timestamp' href='#523576'><time timestamp='2017-01-13T15:16:00Z'>15:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i also can&#x27;t find the description of utACK etc anymore, which used to be in some document
<br>
</div>

<div class='talk op-msg' data-timestamp='1484320620' id='523577'>
<a class='timestamp' href='#523577'><time timestamp='2017-01-13T15:17:00Z'>15:17</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sipa: it&#x27;s still there: <a href="https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#peer-review" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#peer-review</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484320620' id='523578'>
<a class='timestamp' href='#523578'><time timestamp='2017-01-13T15:17:00Z'>15:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah!     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484320860' id='523579'>
<a class='timestamp' href='#523579'><time timestamp='2017-01-13T15:21:00Z'>15:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
is the sync overlay thing supposed to show up on windows? because I don&#x27;t see it
<br>
</div>

<div class='talk op-msg' data-timestamp='1484321220' id='523580'>
<a class='timestamp' href='#523580'><time timestamp='2017-01-13T15:27:00Z'>15:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cjamthagen: only if they&#x27;ll be valid at the next block or sooner.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484321280' id='523581'>
<a class='timestamp' href='#523581'><time timestamp='2017-01-13T15:28:00Z'>15:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: yes, that patch fixes the lack of dns response
<br>
</div>

<div class='talk op-msg' data-timestamp='1484321340' id='523582'>
<a class='timestamp' href='#523582'><time timestamp='2017-01-13T15:29:00Z'>15:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: Great.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484322240' id='523583'>
<a class='timestamp' href='#523583'><time timestamp='2017-01-13T15:44:00Z'>15:44</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
can I PR directly against a BIP or should I bug the author?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484322540' id='523584'>
<a class='timestamp' href='#523584'><time timestamp='2017-01-13T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
instagibbs: not sure what&#x27;s the norm, but you definitely can technically, I received some PRs to my PR for bip99
<br>
</div>

<div class='talk op-msg' data-timestamp='1484322540' id='523585'>
<a class='timestamp' href='#523585'><time timestamp='2017-01-13T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
instagibbs: I think you can PR but don&#x27;t expect a merge without authors ack
<br>
</div>

<div class='talk op-msg' data-timestamp='1484322600' id='523586'>
<a class='timestamp' href='#523586'><time timestamp='2017-01-13T15:50:00Z'>15:50</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
oh, you mean PR directly to the repo, not his own PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1484322600' id='523587'>
<a class='timestamp' href='#523587'><time timestamp='2017-01-13T15:50:00Z'>15:50</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
yeah then what jonasschnelli said
<br>
</div>

<div class='talk op-msg' data-timestamp='1484323200' id='523588'>
<a class='timestamp' href='#523588'><time timestamp='2017-01-13T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
BlueMatt: not sure you saw my comment in #9375 -- i suggested adding a &quot;to do&quot; comment in ProcessGetData, to remind us of the issues we discussed in requests for invalid blocks.  thoughts?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484323200' id='523589'>
<a class='timestamp' href='#523589'><time timestamp='2017-01-13T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9375" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9375</a> | Relay compact block messages prior to full block connection by TheBlueMatt · Pull Request #9375 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484323800' id='523590'>
<a class='timestamp' href='#523590'><time timestamp='2017-01-13T16:10:00Z'>16:10</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
Unicorn...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484323860' id='523591'>
<a class='timestamp' href='#523591'><time timestamp='2017-01-13T16:11:00Z'>16:11</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
morcos: oh, I didn&#x27;t realise that. But we can&#x27;t know if they are or aren&#x27;t replacements necessarily?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484323920' id='523592'>
<a class='timestamp' href='#523592'><time timestamp='2017-01-13T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
RIP github
<br>
</div>

<div class='talk op-msg' data-timestamp='1484323920' id='523593'>
<a class='timestamp' href='#523593'><time timestamp='2017-01-13T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
annnddd github down
<br>
</div>

<div class='talk op-msg' data-timestamp='1484323920' id='523594'>
<a class='timestamp' href='#523594'><time timestamp='2017-01-13T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
anyone need coffee
<br>
</div>

<div class='talk op-msg' data-timestamp='1484323920' id='523595'>
<a class='timestamp' href='#523595'><time timestamp='2017-01-13T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes!
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324040' id='523596'>
<a class='timestamp' href='#523596'><time timestamp='2017-01-13T16:14:00Z'>16:14</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
good idea!
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324040' id='523597'>
<a class='timestamp' href='#523597'><time timestamp='2017-01-13T16:14:00Z'>16:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: hum, I did miss that comment
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324100' id='523598'>
<a class='timestamp' href='#523598'><time timestamp='2017-01-13T16:15:00Z'>16:15</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: remind me of the context again?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324220' id='523599'>
<a class='timestamp' href='#523599'><time timestamp='2017-01-13T16:17:00Z'>16:17</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
just got hot cocoa
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324280' id='523600'>
<a class='timestamp' href='#523600'><time timestamp='2017-01-13T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
for those bored during the github outage, <a href="https://0bin.net/paste/gPzFQpbXtDj9hQO8#NG" class="link" target="_blank">https://0bin.net/paste/gPzFQpbXtDj9hQO8#NG</a>+mcjz5Xuro4XPK4ZijCtV0sE4U-nFdoi8AWBL1IZX is #9535 and while its not tagged 0.14, its itself a big win and it would be swell if it could go in
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324280' id='523601'>
<a class='timestamp' href='#523601'><time timestamp='2017-01-13T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9535" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9535</a> | HTTP Error 503: Service Unavailable
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324280' id='523602'>
<a class='timestamp' href='#523602'><time timestamp='2017-01-13T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
:p     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324340' id='523603'>
<a class='timestamp' href='#523603'><time timestamp='2017-01-13T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(is also super easy to review)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324700' id='523604'>
<a class='timestamp' href='#523604'><time timestamp='2017-01-13T16:25:00Z'>16:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
BlueMatt: general issue is that we don&#x27;t have a way to tell a peer that we&#x27;re intentionally ignoring a request, so our peer can&#x27;t distinguish stalling from &quot;sorry i now think this block is invalid&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324700' id='523605'>
<a class='timestamp' href='#523605'><time timestamp='2017-01-13T16:25:00Z'>16:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think we talked about eventually extending the p2p protocol to communicate this, potentially?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324700' id='523606'>
<a class='timestamp' href='#523606'><time timestamp='2017-01-13T16:25:00Z'>16:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but documenting that we might announce a block and then ignore the request in ProcessGetData() seems prudent 
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324760' id='523607'>
<a class='timestamp' href='#523607'><time timestamp='2017-01-13T16:26:00Z'>16:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I&#x27;m not sure we talked about it, but, yea, thats something to consider...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324760' id='523608'>
<a class='timestamp' href='#523608'><time timestamp='2017-01-13T16:26:00Z'>16:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
if github is down a day, do we defer the freeze a day too? :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324760' id='523609'>
<a class='timestamp' href='#523609'><time timestamp='2017-01-13T16:26:00Z'>16:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
we do, technically, have reject messages, but ignore them because they&#x27;re already not serialized with the rest of the p2p protocol
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324760' id='523610'>
<a class='timestamp' href='#523610'><time timestamp='2017-01-13T16:26:00Z'>16:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
luke-jr: I vote yes (and will do review today either way :p)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324760' id='523611'>
<a class='timestamp' href='#523611'><time timestamp='2017-01-13T16:26:00Z'>16:26</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
right, we could extend the reject message generation to also apply to getdata messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324820' id='523612'>
<a class='timestamp' href='#523612'><time timestamp='2017-01-13T16:27:00Z'>16:27</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
rather than just block/tx messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324820' id='523613'>
<a class='timestamp' href='#523613'><time timestamp='2017-01-13T16:27:00Z'>16:27</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I wish GitHub&#x27;s review thing worked offline
<br>
</div>

<div class='talk op-msg' data-timestamp='1484324940' id='523614'>
<a class='timestamp' href='#523614'><time timestamp='2017-01-13T16:29:00Z'>16:29</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it looks like they&#x27;re back
<br>
</div>

<div class='talk op-msg' data-timestamp='1484325000' id='523615'>
<a class='timestamp' href='#523615'><time timestamp='2017-01-13T16:30:00Z'>16:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: we&#x27;d probably have to also fix the reject messages so that they are serialized
<br>
</div>

<div class='talk op-msg' data-timestamp='1484325000' id='523616'>
<a class='timestamp' href='#523616'><time timestamp='2017-01-13T16:30:00Z'>16:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
instead of at some random time in the future, who knows
<br>
</div>

<div class='talk op-msg' data-timestamp='1484325180' id='523617'>
<a class='timestamp' href='#523617'><time timestamp='2017-01-13T16:33:00Z'>16:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
luke-jr: yes we do know that... look at the code when GitHub is back
<br>
</div>

<div class='talk op-msg' data-timestamp='1484325240' id='523618'>
<a class='timestamp' href='#523618'><time timestamp='2017-01-13T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
going over 9441 a last time
<br>
</div>

<div class='talk op-msg' data-timestamp='1484325900' id='523619'>
<a class='timestamp' href='#523619'><time timestamp='2017-01-13T16:45:00Z'>16:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: actually, if we&#x27;re gonna extend it, we should just throw out the reject messages we have now entirely (no one uses them, they have some simple design flaws, and they are a big anonymity issue)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484325900' id='523620'>
<a class='timestamp' href='#523620'><time timestamp='2017-01-13T16:45:00Z'>16:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: then we can add something that says &quot;I will not respond to your block request&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1484325900' id='523621'>
<a class='timestamp' href='#523621'><time timestamp='2017-01-13T16:45:00Z'>16:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but we will send such a message only if we already announced said block
<br>
</div>

<div class='talk op-msg' data-timestamp='1484325900' id='523622'>
<a class='timestamp' href='#523622'><time timestamp='2017-01-13T16:45:00Z'>16:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(and this would not apply to transactions)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484326920' id='523623'>
<a class='timestamp' href='#523623'><time timestamp='2017-01-13T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
someone wanna kick travis for #9484? sipa or wumpus, though I think gmaxwell can do it too
<br>
</div>

<div class='talk op-msg' data-timestamp='1484326980' id='523624'>
<a class='timestamp' href='#523624'><time timestamp='2017-01-13T17:03:00Z'>17:03</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9484" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9484</a> | Introduce assumevalid setting to skip validation presumed valid scripts. by gmaxwell · Pull Request #9484 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484327760' id='523625'>
<a class='timestamp' href='#523625'><time timestamp='2017-01-13T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;ll do so in a bit
<br>
</div>

<div class='talk op-msg' data-timestamp='1484329800' id='523626'>
<a class='timestamp' href='#523626'><time timestamp='2017-01-13T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] JeremyRubin closed pull request #9503: listreceivedbyaddress Filter Address (master...listreceivedbyaddress-filtered) <a href="https://github.com/bitcoin/bitcoin/pull/9503" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9503</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484329920' id='523627'>
<a class='timestamp' href='#523627'><time timestamp='2017-01-13T17:52:00Z'>17:52</time></a>
&lt;<span class='nick nick-9'> jeremyru1in</span>&gt;
Ugh that&#x27;s annoying that it reports that here ^^; just did that to force travis to restart Z(failed during the github downtime due to not being able to hit github)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330340' id='523628'>
<a class='timestamp' href='#523628'><time timestamp='2017-01-13T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: would it help if I go over my suggestions for 9294 and do them myself?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330460' id='523629'>
<a class='timestamp' href='#523629'><time timestamp='2017-01-13T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: restart
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330520' id='523630'>
<a class='timestamp' href='#523630'><time timestamp='2017-01-13T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jeremyru1in: force push also does that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330520' id='523631'>
<a class='timestamp' href='#523631'><time timestamp='2017-01-13T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa pushed 17 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/02e5308c1b9f...8b66bf74e2a3" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/02e5308c1b9f...8b66bf74e2a3</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330520' id='523632'>
<a class='timestamp' href='#523632'><time timestamp='2017-01-13T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 53ad9a1 Cory Fields: net: fix typo causing the wrong receive buffer size...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330520' id='523633'>
<a class='timestamp' href='#523633'><time timestamp='2017-01-13T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master e5bcd9c Cory Fields: net: make vRecvMsg a list so that we can use splice()
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330520' id='523634'>
<a class='timestamp' href='#523634'><time timestamp='2017-01-13T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 5b4a8ac Cory Fields: net: make GetReceiveFloodSize public...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330520' id='523635'>
<a class='timestamp' href='#523635'><time timestamp='2017-01-13T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wooooo
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330520' id='523636'>
<a class='timestamp' href='#523636'><time timestamp='2017-01-13T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #9441: Net: Massive speedup. Net locks overhaul (master...connman-locks) <a href="https://github.com/bitcoin/bitcoin/pull/9441" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9441</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330580' id='523637'>
<a class='timestamp' href='#523637'><time timestamp='2017-01-13T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
c-c-c-combo-breaker
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330580' id='523638'>
<a class='timestamp' href='#523638'><time timestamp='2017-01-13T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-9'> jeremyru1in</span>&gt;
nooo matt now nothing will get merged
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330640' id='523639'>
<a class='timestamp' href='#523639'><time timestamp='2017-01-13T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: I&#x27;m too lazy to squash #9375 (and each commit passes the &quot;it works, and passes test&quot; rule), fyi, in case you were planning on waiting for that
<br>
</div>

<div class='talk op-msg' data-timestamp='1484330640' id='523640'>
<a class='timestamp' href='#523640'><time timestamp='2017-01-13T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9375" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9375</a> | Relay compact block messages prior to full block connection by TheBlueMatt · Pull Request #9375 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484331180' id='523641'>
<a class='timestamp' href='#523641'><time timestamp='2017-01-13T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: yeah, I was just lazy and on github.com at the moment :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1484332080' id='523642'>
<a class='timestamp' href='#523642'><time timestamp='2017-01-13T18:28:00Z'>18:28</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
\o/     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484332140' id='523643'>
<a class='timestamp' href='#523643'><time timestamp='2017-01-13T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: 9535 needs rebase
<br>
</div>

<div class='talk op-msg' data-timestamp='1484332500' id='523644'>
<a class='timestamp' href='#523644'><time timestamp='2017-01-13T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: done
<br>
</div>

<div class='talk op-msg' data-timestamp='1484332500' id='523645'>
<a class='timestamp' href='#523645'><time timestamp='2017-01-13T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1484334960' id='523646'>
<a class='timestamp' href='#523646'><time timestamp='2017-01-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ugh, master broken in p2p-segwit?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484334960' id='523647'>
<a class='timestamp' href='#523647'><time timestamp='2017-01-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-4'> * sipa</span>&gt;
restarts
<br>
</div>

<div class='talk op-msg' data-timestamp='1484334960' id='523648'>
<a class='timestamp' href='#523648'><time timestamp='2017-01-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i tested locally before merge
<br>
</div>

<div class='talk op-msg' data-timestamp='1484335440' id='523649'>
<a class='timestamp' href='#523649'><time timestamp='2017-01-13T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #9544: Add end of namespace comments. Improve consistency for anonymous namespaces. (master...consistent-use-of-end-of-namespace-comments) <a href="https://github.com/bitcoin/bitcoin/pull/9544" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9544</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484335680' id='523650'>
<a class='timestamp' href='#523650'><time timestamp='2017-01-13T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #9545: Add override:s where appropriate (master...add-overrides-where-appropriate) <a href="https://github.com/bitcoin/bitcoin/pull/9545" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9545</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484335800' id='523651'>
<a class='timestamp' href='#523651'><time timestamp='2017-01-13T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: pebkac, i hope?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484335860' id='523652'>
<a class='timestamp' href='#523652'><time timestamp='2017-01-13T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484335920' id='523653'>
<a class='timestamp' href='#523653'><time timestamp='2017-01-13T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
&lt;sipa&gt; ugh, master broken in p2p-segwit?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484336100' id='523654'>
<a class='timestamp' href='#523654'><time timestamp='2017-01-13T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i assume it&#x27;s somehow a spurious travis error
<br>
</div>

<div class='talk op-msg' data-timestamp='1484336100' id='523655'>
<a class='timestamp' href='#523655'><time timestamp='2017-01-13T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not pebcak
<br>
</div>

<div class='talk op-msg' data-timestamp='1484336160' id='523656'>
<a class='timestamp' href='#523656'><time timestamp='2017-01-13T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
oh, i didn&#x27;t see the failure, thought you were seeing it locally. got a link?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484336520' id='523657'>
<a class='timestamp' href='#523657'><time timestamp='2017-01-13T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you don&#x27;t get an email?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484336520' id='523658'>
<a class='timestamp' href='#523658'><time timestamp='2017-01-13T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<a href="https://travis-ci.org/bitcoin/bitcoin/builds/191711996" class="link" target="_blank">https://travis-ci.org/bitcoin/bitcoin/builds/191711996</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484336520' id='523659'>
<a class='timestamp' href='#523659'><time timestamp='2017-01-13T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
though i think the log may be unavailable as i&#x27;ve restarted
<br>
</div>

<div class='talk op-msg' data-timestamp='1484337600' id='523660'>
<a class='timestamp' href='#523660'><time timestamp='2017-01-13T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
grrr, I hate reviewing wallet changes
<br>
</div>

<div class='talk op-msg' data-timestamp='1484337780' id='523661'>
<a class='timestamp' href='#523661'><time timestamp='2017-01-13T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: why? it use to be more obnoxious but I think it&#x27;s no big deal now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484337780' id='523662'>
<a class='timestamp' href='#523662'><time timestamp='2017-01-13T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
because unlike some of our other codepaths, any change to eg spendability (like bumpfee) means reviewing like 20 functions which use spendability in slightly different ways
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338260' id='523663'>
<a class='timestamp' href='#523663'><time timestamp='2017-01-13T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: I think its useful to look at it similar to how sdaftuar suggested.  imagine you stop your node, you restart it, and before your wallet can try to reaccept your old transaction an external replacement comes in.  its not required to <u>_do anything_</u> to affect whether your orig tx affects spendability.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338320' id='523664'>
<a class='timestamp' href='#523664'><time timestamp='2017-01-13T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
All bumpfee is doing is adding an extra layer of conservativeness on top...  You know what... if you replace a tx, you&#x27;re never going to be allowed to chain unconfirmed txs on the original tx again..
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338680' id='523665'>
<a class='timestamp' href='#523665'><time timestamp='2017-01-13T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos, sdaftuar: I&#x27;m not convinced that not allowing a user to spend an input they removed from a replacement is The Right Behavior, especially as we move towards more loose replacement policies, but I&#x27;m fine with that for now. I don&#x27;t see how thats massively different from an abandon (which means &quot;pretend this isnt here, unless it somehow gets confirmed&quot;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338800' id='523666'>
<a class='timestamp' href='#523666'><time timestamp='2017-01-13T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: bumpfee doesn&#x27;t change the inputs. And any released inputs should not be spendable until the other spend is clearly conflicted.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338800' id='523667'>
<a class='timestamp' href='#523667'><time timestamp='2017-01-13T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I think we&#x27;re conflating two different things here...  Whether you can chain transactions off the original tx (the only change made in bumpfee) and whether any inputs spent by the original tx are still considered spent by the original tx (this is treated the same way any double spend is, both spends are spends)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338800' id='523668'>
<a class='timestamp' href='#523668'><time timestamp='2017-01-13T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: yes, this was essentially all theoretical as it cant happen yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338800' id='523669'>
<a class='timestamp' href='#523669'><time timestamp='2017-01-13T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
since bumpfee can&#x27;t do that right now we can ignore having to handle the case where it does become spendable yet..
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338800' id='523670'>
<a class='timestamp' href='#523670'><time timestamp='2017-01-13T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
If you want inputs spent by the original tx to not count as spent, there is nothing stopping you from manually abandoning the original tx, but i can&#x27;t possibly imagine thinking it was a good idea to happen in an automatic fashion
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338920' id='523671'>
<a class='timestamp' href='#523671'><time timestamp='2017-01-13T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: well it should abandon the replacement or replaced txn automatically once it is well conflicted, I think? (doesn&#x27;t need to now, but eventual functionality)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338980' id='523672'>
<a class='timestamp' href='#523672'><time timestamp='2017-01-13T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: I think eventually if we have some super fancy gui that allows you to replace a transaction, and you swap the inputs selected, it woud be weird to not be able to re-spend them, as you can for abandon
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338980' id='523673'>
<a class='timestamp' href='#523673'><time timestamp='2017-01-13T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but, agreed, lets table for now
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338980' id='523674'>
<a class='timestamp' href='#523674'><time timestamp='2017-01-13T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
the thing it does now is the more conservative option
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338980' id='523675'>
<a class='timestamp' href='#523675'><time timestamp='2017-01-13T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which is good, and its a moot point unless we have other features added
<br>
</div>

<div class='talk op-msg' data-timestamp='1484338980' id='523676'>
<a class='timestamp' href='#523676'><time timestamp='2017-01-13T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: are you saying you should be immediately able to respend them in that case?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339040' id='523677'>
<a class='timestamp' href='#523677'><time timestamp='2017-01-13T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: dunno, probably not? unclear to me...but, lets table for now
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339040' id='523678'>
<a class='timestamp' href='#523678'><time timestamp='2017-01-13T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: if so that would be a huge footgun, I think, as it would assume the user has a better mental model for what gets confirmed than we know they do. (than even many of us do much of the time).  
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339040' id='523679'>
<a class='timestamp' href='#523679'><time timestamp='2017-01-13T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but should be able to respend them after the replacement confirms, which you cannot do now
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339040' id='523680'>
<a class='timestamp' href='#523680'><time timestamp='2017-01-13T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: yea, well abandon is the same thing :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339040' id='523681'>
<a class='timestamp' href='#523681'><time timestamp='2017-01-13T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: but that happens automatically right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339100' id='523682'>
<a class='timestamp' href='#523682'><time timestamp='2017-01-13T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: my reading of the code now, you cannot ever respend the inputs which are no longer being replaced
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339100' id='523683'>
<a class='timestamp' href='#523683'><time timestamp='2017-01-13T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if A spends inputs 1 , 2, 3 and you use futurebumpfee to replace A with A&#x27; which spends inputs 2, 3, 4
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339100' id='523684'>
<a class='timestamp' href='#523684'><time timestamp='2017-01-13T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yeah when the replacement confirms, the original will be cobnflicted, freeing up the inputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339100' id='523685'>
<a class='timestamp' href='#523685'><time timestamp='2017-01-13T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
then until either are confirmed, 1,2,3, and 4 will appear spent.  When A&#x27; confirms, input 1 will automatically become spendable again because A is conflicted.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339160' id='523686'>
<a class='timestamp' href='#523686'><time timestamp='2017-01-13T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
this seems like roughly the right behavior, and more importantly not a change from the existing behavior
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339220' id='523687'>
<a class='timestamp' href='#523687'><time timestamp='2017-01-13T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but maybe BlueMatt is saying there is a bug and thats not happening?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339220' id='523688'>
<a class='timestamp' href='#523688'><time timestamp='2017-01-13T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: oh, youre right, sorry missed that
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339220' id='523689'>
<a class='timestamp' href='#523689'><time timestamp='2017-01-13T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: nope, misreading, I think
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339280' id='523690'>
<a class='timestamp' href='#523690'><time timestamp='2017-01-13T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: I do think we need the RelayWalletTransaction isReplaced gate: <a href="https://github.com/bitcoin/bitcoin/pull/8456#discussion_r96068068" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8456#discussion_r96068068</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339280' id='523691'>
<a class='timestamp' href='#523691'><time timestamp='2017-01-13T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
if we ever change the min relay fee it could blow up
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339280' id='523692'>
<a class='timestamp' href='#523692'><time timestamp='2017-01-13T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
need morcos feesplit
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339340' id='523693'>
<a class='timestamp' href='#523693'><time timestamp='2017-01-13T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: was that a please-review reminder?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339340' id='523694'>
<a class='timestamp' href='#523694'><time timestamp='2017-01-13T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(for #9380)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339340' id='523695'>
<a class='timestamp' href='#523695'><time timestamp='2017-01-13T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9380" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9380</a> | Separate different uses of minimum fees by morcos · Pull Request #9380 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339340' id='523696'>
<a class='timestamp' href='#523696'><time timestamp='2017-01-13T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
:p     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339340' id='523697'>
<a class='timestamp' href='#523697'><time timestamp='2017-01-13T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: I&#x27;m not sure I agree with that either...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339340' id='523698'>
<a class='timestamp' href='#523698'><time timestamp='2017-01-13T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
In the case A
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339340' id='523699'>
<a class='timestamp' href='#523699'><time timestamp='2017-01-13T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339400' id='523700'>
<a class='timestamp' href='#523700'><time timestamp='2017-01-13T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
In the case A&#x27; becomes conflicted... you want to Relay A, so I think that means you always want to relay A
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339400' id='523701'>
<a class='timestamp' href='#523701'><time timestamp='2017-01-13T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it would be nice if you first try to reaccept everything and then only relay them if they are in your mempool at the end
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339400' id='523702'>
<a class='timestamp' href='#523702'><time timestamp='2017-01-13T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we shouldn&#x27;t be relaying multiple verions of conflicting transactions at a time. but the mempool will make sure we don&#x27;t.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339460' id='523703'>
<a class='timestamp' href='#523703'><time timestamp='2017-01-13T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I <u>_think_</u> that&#x27;ll be mostly what happens in practice, but i guess its not guaranteed.. (so assuming you have both A and A&#x27; probably only the second will be relayeD)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339520' id='523704'>
<a class='timestamp' href='#523704'><time timestamp='2017-01-13T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lets say you have A and its been replaced by A&#x27; -&gt; normally you restart, A (might be) accepted first, then A&#x27; replaces it, like normal
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339520' id='523705'>
<a class='timestamp' href='#523705'><time timestamp='2017-01-13T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I think this does mean we&#x27;ll announce A, but proobably not if its been delayed-announced
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339520' id='523706'>
<a class='timestamp' href='#523706'><time timestamp='2017-01-13T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
however, if the user restarts with a higher min relay fee, A&#x27; might not meet the replacement requirements
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339520' id='523707'>
<a class='timestamp' href='#523707'><time timestamp='2017-01-13T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and so A ends up in your mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339520' id='523708'>
<a class='timestamp' href='#523708'><time timestamp='2017-01-13T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which sucks
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339520' id='523709'>
<a class='timestamp' href='#523709'><time timestamp='2017-01-13T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
isn&#x27;t it always delayed-announced
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339520' id='523710'>
<a class='timestamp' href='#523710'><time timestamp='2017-01-13T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
dont think so?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339580' id='523711'>
<a class='timestamp' href='#523711'><time timestamp='2017-01-13T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
BlueMatt: i agree that is a possible edge case
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339580' id='523712'>
<a class='timestamp' href='#523712'><time timestamp='2017-01-13T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i mean you&#x27;re almost right.. A&#x27; by definition has a higher relay fee
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339580' id='523713'>
<a class='timestamp' href='#523713'><time timestamp='2017-01-13T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but you could restart with a higher dust limit, which could cause A to be accepted and not A&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339580' id='523714'>
<a class='timestamp' href='#523714'><time timestamp='2017-01-13T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: huh? relay fee is a property of your software, not the transacion?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339580' id='523715'>
<a class='timestamp' href='#523715'><time timestamp='2017-01-13T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but in that case you probably want A to be relayed!
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339580' id='523716'>
<a class='timestamp' href='#523716'><time timestamp='2017-01-13T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes, dust limit is calculated from minrelayfee, iirc
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339580' id='523717'>
<a class='timestamp' href='#523717'><time timestamp='2017-01-13T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we probably should sort the unconfirmed transaction by dependency/relay fee before inserting, instead of just by order. but I don&#x27;t think thats urgent now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339580' id='523718'>
<a class='timestamp' href='#523718'><time timestamp='2017-01-13T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
A&#x27; by definition has a higher feerate
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339640' id='523719'>
<a class='timestamp' href='#523719'><time timestamp='2017-01-13T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: agreed.. not urgent...  this is like rare edge case
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339640' id='523720'>
<a class='timestamp' href='#523720'><time timestamp='2017-01-13T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
and even if both get relayed or the wrong one, its not necessarily a BAD thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339640' id='523721'>
<a class='timestamp' href='#523721'><time timestamp='2017-01-13T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I think its an easy solution to just add a replaced_by check prior to relay?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339640' id='523722'>
<a class='timestamp' href='#523722'><time timestamp='2017-01-13T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but that has downsides
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339640' id='523723'>
<a class='timestamp' href='#523723'><time timestamp='2017-01-13T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
that opens the door to morcos&#x27; edge case 
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339640' id='523724'>
<a class='timestamp' href='#523724'><time timestamp='2017-01-13T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ehh...I mean I think once you&#x27;ve replaced you probably want the replacement relayed
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339700' id='523725'>
<a class='timestamp' href='#523725'><time timestamp='2017-01-13T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
like, if you restart and it has a lower feerate that gets stuck in your mempool, that sucks and just means you&#x27;re gonna have to replace again
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339700' id='523726'>
<a class='timestamp' href='#523726'><time timestamp='2017-01-13T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
plus you might&#x27;ve done something else in the replace, like set it to not-replaceable
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339700' id='523727'>
<a class='timestamp' href='#523727'><time timestamp='2017-01-13T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
or whatever
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339700' id='523728'>
<a class='timestamp' href='#523728'><time timestamp='2017-01-13T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but the only reason the old one is stuck is there is something wrong wiht the new one
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339700' id='523729'>
<a class='timestamp' href='#523729'><time timestamp='2017-01-13T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
in that case you are basically just screwed anyway, unless you replace the new one
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339760' id='523730'>
<a class='timestamp' href='#523730'><time timestamp='2017-01-13T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
not really...? the new one is just as fine as the old one
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339760' id='523731'>
<a class='timestamp' href='#523731'><time timestamp='2017-01-13T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
then why is that not replacing the old one in your mempool?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339760' id='523732'>
<a class='timestamp' href='#523732'><time timestamp='2017-01-13T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
just maybe that the new one wont auto-replace the old one in peoples&#x27; mempool across the network
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339760' id='523733'>
<a class='timestamp' href='#523733'><time timestamp='2017-01-13T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
don&#x27;t you have chicken soup to eat?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339760' id='523734'>
<a class='timestamp' href='#523734'><time timestamp='2017-01-13T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
heh     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339760' id='523735'>
<a class='timestamp' href='#523735'><time timestamp='2017-01-13T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
oh b/c of the incremental relay fee getting raised
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339820' id='523736'>
<a class='timestamp' href='#523736'><time timestamp='2017-01-13T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i missed that that was your point
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339820' id='523737'>
<a class='timestamp' href='#523737'><time timestamp='2017-01-13T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
because either a) you&#x27;re manually setting a higher -minrelayfee (for some reason...)...or b) you updated to a new version with a higher -minrelayfee default
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339820' id='523738'>
<a class='timestamp' href='#523738'><time timestamp='2017-01-13T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, sorrry, yes, that was my point
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339820' id='523739'>
<a class='timestamp' href='#523739'><time timestamp='2017-01-13T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
so maybe the replacement wont relay that well depending on how much the rest of the network has upgraded
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339820' id='523740'>
<a class='timestamp' href='#523740'><time timestamp='2017-01-13T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sure.. but look.. you shouldn&#x27;t NEED to rerelay either of them
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339820' id='523741'>
<a class='timestamp' href='#523741'><time timestamp='2017-01-13T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
just b/c you restarted your node, doesn&#x27;t mean everyone else did
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339820' id='523742'>
<a class='timestamp' href='#523742'><time timestamp='2017-01-13T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
huh???
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339820' id='523743'>
<a class='timestamp' href='#523743'><time timestamp='2017-01-13T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and if you&#x27;re (bumped) fee is low enough that it&#x27;ll take a few days to get in?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339880' id='523744'>
<a class='timestamp' href='#523744'><time timestamp='2017-01-13T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
we cant break re-announce???
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339880' id='523745'>
<a class='timestamp' href='#523745'><time timestamp='2017-01-13T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
eg a key use-case for bumpfee is setting the fee super low and bumping it eventually if it doesnt get in for a few days
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339880' id='523746'>
<a class='timestamp' href='#523746'><time timestamp='2017-01-13T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
we&#x27;re not breaking it.. we&#x27;re just saying there is a contrived edge case where it might not be super effective
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339880' id='523747'>
<a class='timestamp' href='#523747'><time timestamp='2017-01-13T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
or a week
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339880' id='523748'>
<a class='timestamp' href='#523748'><time timestamp='2017-01-13T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
whats the downside of adding the check to relay???
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339880' id='523749'>
<a class='timestamp' href='#523749'><time timestamp='2017-01-13T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
it fixes an edge case, and....?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339940' id='523750'>
<a class='timestamp' href='#523750'><time timestamp='2017-01-13T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
eg I use bumpfee in greenaddress to send transactions with super low feerate to transfer between my wallets cause I dont care about conf time
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339940' id='523751'>
<a class='timestamp' href='#523751'><time timestamp='2017-01-13T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if you have upgraded settings so that the new tx is not sufficiently above the old one&#x27;s feerate to relay through your own node, you might as well assume that you have to fee bump again to get it to relay across the network
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339940' id='523752'>
<a class='timestamp' href='#523752'><time timestamp='2017-01-13T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think the right way to do it is what gmaxwell said...  some sort of sort..  where you follow the chain of A-&gt;A&#x27;-&gt;A&#x27;&#x27; to the end and then start by trying to rebroadcast A&#x27;&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339940' id='523753'>
<a class='timestamp' href='#523753'><time timestamp='2017-01-13T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and if it never gets in, i just bump it slightly
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339940' id='523754'>
<a class='timestamp' href='#523754'><time timestamp='2017-01-13T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: nope, it could time out, or maybe you&#x27;re on a new version that much of the network isnt
<br>
</div>

<div class='talk op-msg' data-timestamp='1484339940' id='523755'>
<a class='timestamp' href='#523755'><time timestamp='2017-01-13T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but thats an improvement that can be done later
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340000' id='523756'>
<a class='timestamp' href='#523756'><time timestamp='2017-01-13T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(or you manually set -minrelayfee higher, which a bunch of folks did when we didnt have limited mempool and likely still have)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340000' id='523757'>
<a class='timestamp' href='#523757'><time timestamp='2017-01-13T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
just blindly saying skip A if we have A&#x27; is not obviously better to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340000' id='523758'>
<a class='timestamp' href='#523758'><time timestamp='2017-01-13T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
what would you have done if you upgraded before the bumpfee call?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340000' id='523759'>
<a class='timestamp' href='#523759'><time timestamp='2017-01-13T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: so you announce all three txn potentially to your peers? that blows
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340060' id='523760'>
<a class='timestamp' href='#523760'><time timestamp='2017-01-13T20:41:00Z'>20:41</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
BlueMatt: that is already what your recipient(s) will do
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340060' id='523761'>
<a class='timestamp' href='#523761'><time timestamp='2017-01-13T20:41:00Z'>20:41</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
how so... relay happens to run in the middle of reacceptWalletTransactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340060' id='523762'>
<a class='timestamp' href='#523762'><time timestamp='2017-01-13T20:41:00Z'>20:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, also what about announce? I&#x27;m pretty sure there are a few not-delayed-announce cases?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340060' id='523763'>
<a class='timestamp' href='#523763'><time timestamp='2017-01-13T20:41:00Z'>20:41</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
ok, how about this for a fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340060' id='523764'>
<a class='timestamp' href='#523764'><time timestamp='2017-01-13T20:41:00Z'>20:41</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
its hacky but i think strictly better
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340060' id='523765'>
<a class='timestamp' href='#523765'><time timestamp='2017-01-13T20:41:00Z'>20:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(also because we&#x27;re likely to change relay in the future to do some fast-path&#x27;ing stuff through some nodes)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340120' id='523766'>
<a class='timestamp' href='#523766'><time timestamp='2017-01-13T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
on startup only, we call ReaccpetWalletTransactions with a bool which skips txs that have been replaced
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340120' id='523767'>
<a class='timestamp' href='#523767'><time timestamp='2017-01-13T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
is still super confused as to why y&#x27;all want to try to add a replaced transaction to mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340120' id='523768'>
<a class='timestamp' href='#523768'><time timestamp='2017-01-13T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: maybe the replacement is non-standard?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340120' id='523769'>
<a class='timestamp' href='#523769'><time timestamp='2017-01-13T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
bc the replacement might be bad/conflicted/soemthing wrong with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340120' id='523770'>
<a class='timestamp' href='#523770'><time timestamp='2017-01-13T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it could, btw with bumpfee... dust limit changing between restarts.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340180' id='523771'>
<a class='timestamp' href='#523771'><time timestamp='2017-01-13T20:43:00Z'>20:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: fair...i suppose if the replacement fails to get accepted into our mempool we would want to try the original
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340180' id='523772'>
<a class='timestamp' href='#523772'><time timestamp='2017-01-13T20:43:00Z'>20:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
In that case you get to keep both pieces, but ... it&#x27;s worth discussing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340180' id='523773'>
<a class='timestamp' href='#523773'><time timestamp='2017-01-13T20:43:00Z'>20:43</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yes this is the point...  but if we skip the replacees the first time through..  then they&#x27;ll get skipped by virtue of the replacer already being in the mempool on future runs, and if for some reason it isn&#x27;t.. then they&#x27;ll get broadcast
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340240' id='523774'>
<a class='timestamp' href='#523774'><time timestamp='2017-01-13T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
will lead to this order A&#x27;&#x27;, A, A&#x27;   but that&#x27;s an improvement
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340240' id='523775'>
<a class='timestamp' href='#523775'><time timestamp='2017-01-13T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: so you mean only do this on initial run? not on the timer-based one?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340240' id='523776'>
<a class='timestamp' href='#523776'><time timestamp='2017-01-13T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340240' id='523777'>
<a class='timestamp' href='#523777'><time timestamp='2017-01-13T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I&#x27;m happy with that
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340240' id='523778'>
<a class='timestamp' href='#523778'><time timestamp='2017-01-13T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I&#x27;m compromisey with that
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340240' id='523779'>
<a class='timestamp' href='#523779'><time timestamp='2017-01-13T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
it is super hacky
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340240' id='523780'>
<a class='timestamp' href='#523780'><time timestamp='2017-01-13T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
that we can agree on
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340240' id='523781'>
<a class='timestamp' href='#523781'><time timestamp='2017-01-13T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
seems like a nice optimization for a futre pr
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340240' id='523782'>
<a class='timestamp' href='#523782'><time timestamp='2017-01-13T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but should at least fix the issue while not (really) risking anything
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340300' id='523783'>
<a class='timestamp' href='#523783'><time timestamp='2017-01-13T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: yea, which will be so chock-full of edge cases......
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340300' id='523784'>
<a class='timestamp' href='#523784'><time timestamp='2017-01-13T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but, ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340300' id='523785'>
<a class='timestamp' href='#523785'><time timestamp='2017-01-13T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sounds good
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340300' id='523786'>
<a class='timestamp' href='#523786'><time timestamp='2017-01-13T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah can we make that a bugfix PR to 8456
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340300' id='523787'>
<a class='timestamp' href='#523787'><time timestamp='2017-01-13T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so we can just get 8456 merged
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340300' id='523788'>
<a class='timestamp' href='#523788'><time timestamp='2017-01-13T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340360' id='523789'>
<a class='timestamp' href='#523789'><time timestamp='2017-01-13T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: note how I did that to you when you asked me to change the logprints in #9375 :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340360' id='523790'>
<a class='timestamp' href='#523790'><time timestamp='2017-01-13T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9375" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9375</a> | Relay compact block messages prior to full block connection by TheBlueMatt · Pull Request #9375 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340420' id='523791'>
<a class='timestamp' href='#523791'><time timestamp='2017-01-13T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
good, i had no objection to that!
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340660' id='523792'>
<a class='timestamp' href='#523792'><time timestamp='2017-01-13T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: just looking at the code.. there is actually no way for relay to happen before all the txs have tried to be accepted to the mempool right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340840' id='523793'>
<a class='timestamp' href='#523793'><time timestamp='2017-01-13T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: mind fixing up the mempool minReasonableRelayFee while you&#x27;re messing around there? as i read the code, it doesn&#x27;t respect -minrelaytxfee
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340840' id='523794'>
<a class='timestamp' href='#523794'><time timestamp='2017-01-13T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(i&#x27;m not familiar enough with all of the interactions to know if that matters much)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340900' id='523795'>
<a class='timestamp' href='#523795'><time timestamp='2017-01-13T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: not sure? havent looked in a while?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340900' id='523796'>
<a class='timestamp' href='#523796'><time timestamp='2017-01-13T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
doesnt really fully address the issue, though
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340900' id='523797'>
<a class='timestamp' href='#523797'><time timestamp='2017-01-13T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
right still your edge case of A&#x27; no longer being able to replace A, but you think its better if you try to rebroadcast only A&#x27; in that case?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484340960' id='523798'>
<a class='timestamp' href='#523798'><time timestamp='2017-01-13T20:56:00Z'>20:56</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it seems to me if that happens, then its likely b/c you raised the required increment (probably b/c a lot of other people did too) so even if you broadcast A&#x27; it might not propagate and you might be more likely to figure that out if you have A in your mempool instead of A&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341080' id='523799'>
<a class='timestamp' href='#523799'><time timestamp='2017-01-13T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
cfields: you are right it doesn&#x27;t respect it...  but it actually is better that it doesn&#x27;t i think...  it should probably just be cleaned up separtely in another fee estimation clean up.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341080' id='523800'>
<a class='timestamp' href='#523800'><time timestamp='2017-01-13T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: hmmmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341140' id='523801'>
<a class='timestamp' href='#523801'><time timestamp='2017-01-13T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: ok good, I was hoping you&#x27;d say that. So it should just take DEFAULT_MIN_RELAY_TX_FEE instead?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341140' id='523802'>
<a class='timestamp' href='#523802'><time timestamp='2017-01-13T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i thought through what i thought it should be a couple of weeks ago, but now i can&#x27;t exactly remember....   
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341140' id='523803'>
<a class='timestamp' href='#523803'><time timestamp='2017-01-13T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
almost.... i think if you ever want a minrelaytxfee less than DEFAULT, then you&#x27;d probably want that number to be less
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341200' id='523804'>
<a class='timestamp' href='#523804'><time timestamp='2017-01-13T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but maybe we can just worry abou tthat when it happens...  and probably best to just change it to DEFAULT_MIN_RELAY_TX_FEE for now
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341260' id='523805'>
<a class='timestamp' href='#523805'><time timestamp='2017-01-13T21:01:00Z'>21:01</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
or its own fee estimation constant... its basically used for determining the bucket sizes... so don&#x27;t want to change it b/c then your old data file is useless
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341260' id='523806'>
<a class='timestamp' href='#523806'><time timestamp='2017-01-13T21:01:00Z'>21:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #9547: Avoid potential division by zero in benchmark::State::KeepRunning() (master...avoid-potential-division-by-zero-in-benchmark-state-keeprunning) <a href="https://github.com/bitcoin/bitcoin/pull/9547" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9547</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341260' id='523807'>
<a class='timestamp' href='#523807'><time timestamp='2017-01-13T21:01:00Z'>21:01</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
ok maybe i should PR a change for it while we&#x27;re thinking about it
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341320' id='523808'>
<a class='timestamp' href='#523808'><time timestamp='2017-01-13T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: heh, yes please :). No problem with doing it later, i just see it now and then and make a mental note to ask you, and have never managed to do so.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341320' id='523809'>
<a class='timestamp' href='#523809'><time timestamp='2017-01-13T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: I mean there&#x27;s a strong argument for both - if you replaced a transaction, you really dont want to be relaying an old version out...on the flip side, if you replace a transaction and you wouldn&#x27;t have accepted the replacement, maybe you want to know that...I think for my use-case (slowly bumping fee on a tx that I dont care when it confirms), I prefer the second - keep relaying the bumped one, especially because if the 
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341320' id='523810'>
<a class='timestamp' href='#523810'><time timestamp='2017-01-13T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
original eventually times out on other folks&#x27; mempool&#x27;s, I&#x27;d want the one with ever-so-sligly-higher fee to relay out and try to get confirmed
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341320' id='523811'>
<a class='timestamp' href='#523811'><time timestamp='2017-01-13T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
instead of the original one
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341320' id='523812'>
<a class='timestamp' href='#523812'><time timestamp='2017-01-13T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
because I obviously bumped it for a reason
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341380' id='523813'>
<a class='timestamp' href='#523813'><time timestamp='2017-01-13T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
heh timeout is 2 weeks now..  you&#x27;re a patient man
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341440' id='523814'>
<a class='timestamp' href='#523814'><time timestamp='2017-01-13T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, i thought we set it to 1
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341440' id='523815'>
<a class='timestamp' href='#523815'><time timestamp='2017-01-13T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh well
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341440' id='523816'>
<a class='timestamp' href='#523816'><time timestamp='2017-01-13T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
there goes that argument
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341620' id='523817'>
<a class='timestamp' href='#523817'><time timestamp='2017-01-13T21:07:00Z'>21:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: so technically the first add-all-wallet-txn-to-mempool is after CConnmanStart
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341620' id='523818'>
<a class='timestamp' href='#523818'><time timestamp='2017-01-13T21:07:00Z'>21:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(its in postInitProcess, the very last thing called in AppInit
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341620' id='523819'>
<a class='timestamp' href='#523819'><time timestamp='2017-01-13T21:07:00Z'>21:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
)     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341620' id='523820'>
<a class='timestamp' href='#523820'><time timestamp='2017-01-13T21:07:00Z'>21:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
so you could relay out old transactions if you get connections fast and have a massive wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341620' id='523821'>
<a class='timestamp' href='#523821'><time timestamp='2017-01-13T21:07:00Z'>21:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
theoretically, at least
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341680' id='523822'>
<a class='timestamp' href='#523822'><time timestamp='2017-01-13T21:08:00Z'>21:08</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if we did that after the load mempool from disk finishes, that might solve a lot of the problem?  m aybe messy to do that way, i haven&#x27;t looked
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341740' id='523823'>
<a class='timestamp' href='#523823'><time timestamp='2017-01-13T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmm? dont think that would make it better?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341740' id='523824'>
<a class='timestamp' href='#523824'><time timestamp='2017-01-13T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, i see your point
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341740' id='523825'>
<a class='timestamp' href='#523825'><time timestamp='2017-01-13T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i mean problem is that mempool-load is so super slow...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341740' id='523826'>
<a class='timestamp' href='#523826'><time timestamp='2017-01-13T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341740' id='523827'>
<a class='timestamp' href='#523827'><time timestamp='2017-01-13T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but there&#x27;s kind of no hurry for this is there?  i was more concerned about layer violations
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341800' id='523828'>
<a class='timestamp' href='#523828'><time timestamp='2017-01-13T21:10:00Z'>21:10</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it looks to me like the first resendwallettransactions doesn&#x27;t happen for 30 mins
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341860' id='523829'>
<a class='timestamp' href='#523829'><time timestamp='2017-01-13T21:11:00Z'>21:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I mean I started by seeing the fact that your wallet might accept the pre-bump transaction into mempool after the bump as a bug....but y&#x27;all&#x27;ve convinced me that its at least conceivably the right outcome depending on what the user wants
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341860' id='523830'>
<a class='timestamp' href='#523830'><time timestamp='2017-01-13T21:11:00Z'>21:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
and thats the only way they get relayed
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341860' id='523831'>
<a class='timestamp' href='#523831'><time timestamp='2017-01-13T21:11:00Z'>21:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
just accepting them to the mempool doesn&#x27;t relaythem
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341980' id='523832'>
<a class='timestamp' href='#523832'><time timestamp='2017-01-13T21:13:00Z'>21:13</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i think reaccepting post-mempool-disk-load still carries risk, though - some of the wallet logic depends on mempool-reading
<br>
</div>

<div class='talk op-msg' data-timestamp='1484341980' id='523833'>
<a class='timestamp' href='#523833'><time timestamp='2017-01-13T21:13:00Z'>21:13</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
so I wouldnt feel comfortable making that change without more than 2 days of review....
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342340' id='523834'>
<a class='timestamp' href='#523834'><time timestamp='2017-01-13T21:19:00Z'>21:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: we already try to reaccept wallet transactions continually.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342400' id='523835'>
<a class='timestamp' href='#523835'><time timestamp='2017-01-13T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342400' id='523836'>
<a class='timestamp' href='#523836'><time timestamp='2017-01-13T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea. at the rebroadcast times.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342400' id='523837'>
<a class='timestamp' href='#523837'><time timestamp='2017-01-13T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I&#x27;m aware?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342460' id='523838'>
<a class='timestamp' href='#523838'><time timestamp='2017-01-13T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
whats your point?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342460' id='523839'>
<a class='timestamp' href='#523839'><time timestamp='2017-01-13T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and the wallet &#x27;works&#x27; without transactions in mempool... e.g. you can setup so that all transactions are rejected from the mempool.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342460' id='523840'>
<a class='timestamp' href='#523840'><time timestamp='2017-01-13T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
my point was that we have wallet logic which depends on whether a transaction is in mempool, and if we&#x27;re gonna change it so that you could spend a bunch more time at load with transactions not yet in mempool, that would require audit and careful thought about those places
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342520' id='523841'>
<a class='timestamp' href='#523841'><time timestamp='2017-01-13T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I mean, yes, it works, but some things in it wont work
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342520' id='523842'>
<a class='timestamp' href='#523842'><time timestamp='2017-01-13T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
at least last I checked
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342520' id='523843'>
<a class='timestamp' href='#523843'><time timestamp='2017-01-13T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
even blocksonly puts wallet transactions in mempool, i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342520' id='523844'>
<a class='timestamp' href='#523844'><time timestamp='2017-01-13T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
just doenst relay them
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342580' id='523845'>
<a class='timestamp' href='#523845'><time timestamp='2017-01-13T21:23:00Z'>21:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: no it doesn&#x27;t. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342580' id='523846'>
<a class='timestamp' href='#523846'><time timestamp='2017-01-13T21:23:00Z'>21:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(unless you&#x27;ve enabled that specifically)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342580' id='523847'>
<a class='timestamp' href='#523847'><time timestamp='2017-01-13T21:23:00Z'>21:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, heh, indeed it doesnt
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342700' id='523848'>
<a class='timestamp' href='#523848'><time timestamp='2017-01-13T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, ok, looking at it again it looks like it would only disable features, not enable you to do anything you shouldnt be able to
<br>
</div>

<div class='talk op-msg' data-timestamp='1484342760' id='523849'>
<a class='timestamp' href='#523849'><time timestamp='2017-01-13T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
anywayyyy
<br>
</div>

<div class='talk op-msg' data-timestamp='1484344380' id='523850'>
<a class='timestamp' href='#523850'><time timestamp='2017-01-13T21:53:00Z'>21:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: anywayyy.......... -&gt;  ACK ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484344680' id='523851'>
<a class='timestamp' href='#523851'><time timestamp='2017-01-13T21:58:00Z'>21:58</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: getting there
<br>
</div>

<div class='talk op-msg' data-timestamp='1484344740' id='523852'>
<a class='timestamp' href='#523852'><time timestamp='2017-01-13T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: ran out of steam so had to take a coffee break...digging into the meat now :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1484344860' id='523853'>
<a class='timestamp' href='#523853'><time timestamp='2017-01-13T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] morcos opened pull request #9548: Remove min reasonable fee (master...removeMinReasonableFee) <a href="https://github.com/bitcoin/bitcoin/pull/9548" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9548</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346120' id='523854'>
<a class='timestamp' href='#523854'><time timestamp='2017-01-13T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
would it be terrible, if wallets upon encounting a transaction they sent yet is still unconfirmed but is being spent already, were to double-spend their transaction to the latter destination(s)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346180' id='523855'>
<a class='timestamp' href='#523855'><time timestamp='2017-01-13T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
eg, if I pay morcos, and see morcos paying BlueMatt before mine confirms, double-spend it to BlueMatt (and morcos&#x27;s change address) directly
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346180' id='523856'>
<a class='timestamp' href='#523856'><time timestamp='2017-01-13T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lol, lets not do that, I think
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346180' id='523857'>
<a class='timestamp' href='#523857'><time timestamp='2017-01-13T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
that has all kinds of fun potentials
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346180' id='523858'>
<a class='timestamp' href='#523858'><time timestamp='2017-01-13T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
&quot;no, you didnt pay me, look at the blockchain!&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346240' id='523859'>
<a class='timestamp' href='#523859'><time timestamp='2017-01-13T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
:D     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346240' id='523860'>
<a class='timestamp' href='#523860'><time timestamp='2017-01-13T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
save their transaction as proof
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346240' id='523861'>
<a class='timestamp' href='#523861'><time timestamp='2017-01-13T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
of course I&#x27;d appreciate that particular scenario, because I get all the btc :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346240' id='523862'>
<a class='timestamp' href='#523862'><time timestamp='2017-01-13T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
can we just hardcode my pubkey?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346240' id='523863'>
<a class='timestamp' href='#523863'><time timestamp='2017-01-13T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346540' id='523864'>
<a class='timestamp' href='#523864'><time timestamp='2017-01-13T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
would be a pain to implement in Core; maybe I&#x27;ll make a highly experimental wallet that does crazy things like this if I ever get time
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346600' id='523865'>
<a class='timestamp' href='#523865'><time timestamp='2017-01-13T22:30:00Z'>22:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ACK hardcoding BlueMatt&#x27;s pubkey
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346660' id='523866'>
<a class='timestamp' href='#523866'><time timestamp='2017-01-13T22:31:00Z'>22:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos/ryanofsky: ok, so lets say you have tx A, then you bumpfee it to get A&#x27;....BUT someone has already built a tx on A (called B) (which you hadnt seen at the time of bump)....great, so now we have a scenario where, if A&#x27; times out of your mempool, it might get replaced with A (because you might see A+B from a peer prior to rebroadcasting A&#x27;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346660' id='523867'>
<a class='timestamp' href='#523867'><time timestamp='2017-01-13T22:31:00Z'>22:31</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
only if I get a copy of his privkey
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346660' id='523868'>
<a class='timestamp' href='#523868'><time timestamp='2017-01-13T22:31:00Z'>22:31</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346660' id='523869'>
<a class='timestamp' href='#523869'><time timestamp='2017-01-13T22:31:00Z'>22:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
now you have a few goofy things - like qt&#x27;s getBalance is different from wallet&#x27;s GetBalance (because AvailableCoins is different from pcoin-&gt;IsTrusted())
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346720' id='523870'>
<a class='timestamp' href='#523870'><time timestamp='2017-01-13T22:32:00Z'>22:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I know, I&#x27;m coming up with crazy edge cases now
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346720' id='523871'>
<a class='timestamp' href='#523871'><time timestamp='2017-01-13T22:32:00Z'>22:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: autocuttrhough could be done, I suppose but you&#x27;d want to only do it with parties that opted into it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346780' id='523872'>
<a class='timestamp' href='#523872'><time timestamp='2017-01-13T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
don&#x27;t understand the problem. if A gets added to a block then A&#x27; is conflicted and we don&#x27;t care about it
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346780' id='523873'>
<a class='timestamp' href='#523873'><time timestamp='2017-01-13T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
no, not in a block
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346780' id='523874'>
<a class='timestamp' href='#523874'><time timestamp='2017-01-13T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
A&#x27; gets replaced in your mempool with A
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346780' id='523875'>
<a class='timestamp' href='#523875'><time timestamp='2017-01-13T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
so?     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346780' id='523876'>
<a class='timestamp' href='#523876'><time timestamp='2017-01-13T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(I came up with a convoluted case where that might happen, so now I&#x27;m gonna pretend we have to handle it gracefully :p)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346840' id='523877'>
<a class='timestamp' href='#523877'><time timestamp='2017-01-13T22:34:00Z'>22:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
luke-jr: well I dont think we handle that case gracefully
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346840' id='523878'>
<a class='timestamp' href='#523878'><time timestamp='2017-01-13T22:34:00Z'>22:34</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
there&#x27;s nothing you can really do right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346900' id='523879'>
<a class='timestamp' href='#523879'><time timestamp='2017-01-13T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I think in this case qt&#x27;s balance will suddenly forget about both txn
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346900' id='523880'>
<a class='timestamp' href='#523880'><time timestamp='2017-01-13T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
CWallet::GetBalance will just trust whatever&#x27;s in your mempool, I think
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346900' id='523881'>
<a class='timestamp' href='#523881'><time timestamp='2017-01-13T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if A has a high fee child spend, then A might well be more likely to be be mined than A&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346900' id='523882'>
<a class='timestamp' href='#523882'><time timestamp='2017-01-13T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I don&#x27;t see what the problem is?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346900' id='523883'>
<a class='timestamp' href='#523883'><time timestamp='2017-01-13T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: sure, but your balance shouldnt be different getween rpc and gui
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346900' id='523884'>
<a class='timestamp' href='#523884'><time timestamp='2017-01-13T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: which change will it show in your balance?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346900' id='523885'>
<a class='timestamp' href='#523885'><time timestamp='2017-01-13T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
let alone should the gui suddenly think the balance of both options will be 0
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346900' id='523886'>
<a class='timestamp' href='#523886'><time timestamp='2017-01-13T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
neither
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346900' id='523887'>
<a class='timestamp' href='#523887'><time timestamp='2017-01-13T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346900' id='523888'>
<a class='timestamp' href='#523888'><time timestamp='2017-01-13T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
?     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346960' id='523889'>
<a class='timestamp' href='#523889'><time timestamp='2017-01-13T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
oh, i am not sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346960' id='523890'>
<a class='timestamp' href='#523890'><time timestamp='2017-01-13T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but CWallet::GetBalance will show the one which is in your mempoo
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346960' id='523891'>
<a class='timestamp' href='#523891'><time timestamp='2017-01-13T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
l     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346960' id='523892'>
<a class='timestamp' href='#523892'><time timestamp='2017-01-13T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
E.g. A, A&#x27;  then A ends up back in your mempool.   Your balance doesn&#x27;t go to zero when you spend coins and have change.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346960' id='523893'>
<a class='timestamp' href='#523893'><time timestamp='2017-01-13T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(if it did users would freak often)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346960' id='523894'>
<a class='timestamp' href='#523894'><time timestamp='2017-01-13T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
rpc will list the balance assuming the one in your mempool gets confirmed, I /think/ gui would be 0
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346960' id='523895'>
<a class='timestamp' href='#523895'><time timestamp='2017-01-13T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
or, at least, WalletModel::getBalance would be 0
<br>
</div>

<div class='talk op-msg' data-timestamp='1484346960' id='523896'>
<a class='timestamp' href='#523896'><time timestamp='2017-01-13T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
need to figure out what calls that
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347020' id='523897'>
<a class='timestamp' href='#523897'><time timestamp='2017-01-13T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think it&#x27;s fine if balance reads a bit low, e.g. assumes you paid the largest of the fees. It&#x27;s not okay if it goes to zero.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347020' id='523898'>
<a class='timestamp' href='#523898'><time timestamp='2017-01-13T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, no, its inconsistent, now I have no idea what this effects
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347080' id='523899'>
<a class='timestamp' href='#523899'><time timestamp='2017-01-13T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Because it will cause someone to freak -- &quot;I sent 1 bitcoin and by 10 BTC balance went to zero! where are all my coins! please help. I tried deleting my wallet 5 times and they haven&#x27;t come back!&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347080' id='523900'>
<a class='timestamp' href='#523900'><time timestamp='2017-01-13T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ahh, ok, so nvm, what i think it does (because getBalance() is normally called without a coinControl) is that if you try to create a transaction it&#x27;ll refuse to spend from either
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347080' id='523901'>
<a class='timestamp' href='#523901'><time timestamp='2017-01-13T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and give you an &quot;insufficient funds&quot; error
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347080' id='523902'>
<a class='timestamp' href='#523902'><time timestamp='2017-01-13T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but the display will be right
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347080' id='523903'>
<a class='timestamp' href='#523903'><time timestamp='2017-01-13T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, thats fine. it&#x27;s like spendzeroconfchange=0 for those inputs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347080' id='523904'>
<a class='timestamp' href='#523904'><time timestamp='2017-01-13T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which is strange, but probably fine given its a crazy edge case
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347140' id='523905'>
<a class='timestamp' href='#523905'><time timestamp='2017-01-13T22:39:00Z'>22:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: you asked why I hated reviewing wallet prs? :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347140' id='523906'>
<a class='timestamp' href='#523906'><time timestamp='2017-01-13T22:39:00Z'>22:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
billion and one possible corner cases
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347140' id='523907'>
<a class='timestamp' href='#523907'><time timestamp='2017-01-13T22:39:00Z'>22:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
if you think this is easier that reviewing network or consensus changes, I am frightened. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347200' id='523908'>
<a class='timestamp' href='#523908'><time timestamp='2017-01-13T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
harder than network? yea it is
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347200' id='523909'>
<a class='timestamp' href='#523909'><time timestamp='2017-01-13T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
consensus, ok, maybe not
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347200' id='523910'>
<a class='timestamp' href='#523910'><time timestamp='2017-01-13T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
there are just as many corner cases! we just mishandle them more often. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347200' id='523911'>
<a class='timestamp' href='#523911'><time timestamp='2017-01-13T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
heh, ok, fair point
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347380' id='523912'>
<a class='timestamp' href='#523912'><time timestamp='2017-01-13T22:43:00Z'>22:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
note: I still havent even fucking looked at the rpc code for bumpfee :&#x27;(
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347380' id='523913'>
<a class='timestamp' href='#523913'><time timestamp='2017-01-13T22:43:00Z'>22:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
do we document that listunspent will not list the outputs from bumped transactions (they will dissapear after you bump and neither the bumped or unbumped version&#x27;s outputs will show up)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347380' id='523914'>
<a class='timestamp' href='#523914'><time timestamp='2017-01-13T22:43:00Z'>22:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which is super strange because it normally lists everything except abandoned outputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347620' id='523915'>
<a class='timestamp' href='#523915'><time timestamp='2017-01-13T22:47:00Z'>22:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
outputs disappear anytime they&#x27;re used in a spend, ... bumpfee is no behavior change there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347620' id='523916'>
<a class='timestamp' href='#523916'><time timestamp='2017-01-13T22:47:00Z'>22:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
not in listunspent, no, I dont think so?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347620' id='523917'>
<a class='timestamp' href='#523917'><time timestamp='2017-01-13T22:47:00Z'>22:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
any output thats spent (including in an unconfirmed txn) is not included in list_un_spent. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347620' id='523918'>
<a class='timestamp' href='#523918'><time timestamp='2017-01-13T22:47:00Z'>22:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh do you mean the change?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347680' id='523919'>
<a class='timestamp' href='#523919'><time timestamp='2017-01-13T22:48:00Z'>22:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes, change, sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347680' id='523920'>
<a class='timestamp' href='#523920'><time timestamp='2017-01-13T22:48:00Z'>22:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the change should probably still be there but marked held. :-/ basically anything in the balance computation sould be there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347680' id='523921'>
<a class='timestamp' href='#523921'><time timestamp='2017-01-13T22:48:00Z'>22:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I believe its also not listed in the gui&#x27;s coincontrol options for inputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347740' id='523922'>
<a class='timestamp' href='#523922'><time timestamp='2017-01-13T22:49:00Z'>22:49</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but I&#x27;m guessing there because I&#x27;d need to go read a whole &#x27;nother pile of code to double-check
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347860' id='523923'>
<a class='timestamp' href='#523923'><time timestamp='2017-01-13T22:51:00Z'>22:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes, but which one should show up in that list?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347860' id='523924'>
<a class='timestamp' href='#523924'><time timestamp='2017-01-13T22:51:00Z'>22:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
:p     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347860' id='523925'>
<a class='timestamp' href='#523925'><time timestamp='2017-01-13T22:51:00Z'>22:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
replaced or original?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347920' id='523926'>
<a class='timestamp' href='#523926'><time timestamp='2017-01-13T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa pushed 15 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/8b66bf74e2a3...3908fc472805" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/8b66bf74e2a3...3908fc472805</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347920' id='523927'>
<a class='timestamp' href='#523927'><time timestamp='2017-01-13T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 8017547 Matt Corallo: Make CBlockIndex*es in net_processing const
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347920' id='523928'>
<a class='timestamp' href='#523928'><time timestamp='2017-01-13T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 9a0b2f4 Matt Corallo: [qa] Make compact blocks test construction using fetch methods
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347920' id='523929'>
<a class='timestamp' href='#523929'><time timestamp='2017-01-13T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 8baaba6 Matt Corallo: [qa] Avoid race in preciousblock test....
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347920' id='523930'>
<a class='timestamp' href='#523930'><time timestamp='2017-01-13T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
woooo
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347980' id='523931'>
<a class='timestamp' href='#523931'><time timestamp='2017-01-13T22:53:00Z'>22:53</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #9375: Relay compact block messages prior to full block connection (master...2016-12-compact-fast-relay) <a href="https://github.com/bitcoin/bitcoin/pull/9375" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9375</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484347980' id='523932'>
<a class='timestamp' href='#523932'><time timestamp='2017-01-13T22:53:00Z'>22:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
one more down for 0.14
<br>
</div>

<div class='talk op-msg' data-timestamp='1484348280' id='523933'>
<a class='timestamp' href='#523933'><time timestamp='2017-01-13T22:58:00Z'>22:58</time></a>
&lt;<span class='nick nick-10'> owowo</span>&gt;
how about skipping 0.14 and got directly to 0.15? I mean <u>_4_</u> sounds like death in Chinese. ;0)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484348280' id='523934'>
<a class='timestamp' href='#523934'><time timestamp='2017-01-13T22:58:00Z'>22:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: ok i admit, that&#x27;s some good finds.  i did test some of this stuff both in RPC and GUI, but I dont think I fully thought through all the ways different balances might differ
<br>
</div>

<div class='talk op-msg' data-timestamp='1484348340' id='523935'>
<a class='timestamp' href='#523935'><time timestamp='2017-01-13T22:59:00Z'>22:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Indeed change from bumper txs do not appear in coin control (as they shouldn&#x27;t i think b/c you can&#x27;t spend them)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484348340' id='523936'>
<a class='timestamp' href='#523936'><time timestamp='2017-01-13T22:59:00Z'>22:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: i think we should detect whether the compiler supports -fsanitize (gcc 4.8 added -fsanitize=address, 4.9 added -fsanitize=undefined, 5.0 added -fsanitize=leak), and build test/production binaries with it to run unit tests with
<br>
</div>

<div class='talk op-msg' data-timestamp='1484348340' id='523937'>
<a class='timestamp' href='#523937'><time timestamp='2017-01-13T22:59:00Z'>22:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Perhaps you are right that some of these new behaviors need to be more clearly documented
<br>
</div>

<div class='talk op-msg' data-timestamp='1484348400' id='523938'>
<a class='timestamp' href='#523938'><time timestamp='2017-01-13T23:00:00Z'>23:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: there is also -fsanitize=thread, which cannot be used in conjunction with any of the others
<br>
</div>

<div class='talk op-msg' data-timestamp='1484348400' id='523939'>
<a class='timestamp' href='#523939'><time timestamp='2017-01-13T23:00:00Z'>23:00</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I&#x27;m not sure about listing the outputs in listunspent though...   hmm..  Will take a look at any more comments you have tomorrow
<br>
</div>

<div class='talk op-msg' data-timestamp='1484348520' id='523940'>
<a class='timestamp' href='#523940'><time timestamp='2017-01-13T23:02:00Z'>23:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: downside is that both compilation and running is much slower
<br>
</div>

<div class='talk op-msg' data-timestamp='1484348580' id='523941'>
<a class='timestamp' href='#523941'><time timestamp='2017-01-13T23:03:00Z'>23:03</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] kallewoof closed pull request #9235: [WIP] Refactor: Remove all uses of using namespace in all source files. (master...no-using-ns2) <a href="https://github.com/bitcoin/bitcoin/pull/9235" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9235</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484349000' id='523942'>
<a class='timestamp' href='#523942'><time timestamp='2017-01-13T23:10:00Z'>23:10</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: I&#x27;m not sure about listing either, thats why my first request was to just document it
<br>
</div>

</div>
</section>

</body>
</html>
