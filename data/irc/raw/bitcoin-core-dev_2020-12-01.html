<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2020-12-01
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2020-12-01' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:17 UTC</pre>
<pre><a href="/bitcoin-core-dev/2020-11-01">&lt;</a><span class='header'>  December 2020   </span><a href="/bitcoin-core-dev/2021-01-01">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;       <a class="current" href="/bitcoin-core-dev/2020-12-01">1</a>  <a class="" href="/bitcoin-core-dev/2020-12-02">2</a>  <a class="" href="/bitcoin-core-dev/2020-12-03">3</a>  <a class="" href="/bitcoin-core-dev/2020-12-04">4</a>  <a class="" href="/bitcoin-core-dev/2020-12-05">5</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2020-12-06">6</a>  <a class="" href="/bitcoin-core-dev/2020-12-07">7</a>  <a class="" href="/bitcoin-core-dev/2020-12-08">8</a>  <a class="" href="/bitcoin-core-dev/2020-12-09">9</a> <a class="" href="/bitcoin-core-dev/2020-12-10">10</a> <a class="" href="/bitcoin-core-dev/2020-12-11">11</a> <a class="" href="/bitcoin-core-dev/2020-12-12">12</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-12-13">13</a> <a class="" href="/bitcoin-core-dev/2020-12-14">14</a> <a class="" href="/bitcoin-core-dev/2020-12-15">15</a> <a class="" href="/bitcoin-core-dev/2020-12-16">16</a> <a class="" href="/bitcoin-core-dev/2020-12-17">17</a> <a class="" href="/bitcoin-core-dev/2020-12-18">18</a> <a class="" href="/bitcoin-core-dev/2020-12-19">19</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-12-20">20</a> <a class="" href="/bitcoin-core-dev/2020-12-21">21</a> <a class="" href="/bitcoin-core-dev/2020-12-22">22</a> <a class="" href="/bitcoin-core-dev/2020-12-23">23</a> <a class="" href="/bitcoin-core-dev/2020-12-24">24</a> <a class="" href="/bitcoin-core-dev/2020-12-25">25</a> <a class="" href="/bitcoin-core-dev/2020-12-26">26</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-12-27">27</a> <a class="" href="/bitcoin-core-dev/2020-12-28">28</a> <a class="" href="/bitcoin-core-dev/2020-12-29">29</a> <a class="" href="/bitcoin-core-dev/2020-12-30">30</a> <a class="" href="/bitcoin-core-dev/2020-12-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1606783020' id='415935'>
<a class='timestamp' href='#415935'><time timestamp='2020-12-01T00:37:00Z'>00:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theStack opened pull request #20537: refactor: replace manual Satoshis-to-BTC conversions with FormatMoney() (master...20201129-use-formatmoney) <a href="https://github.com/bitcoin/bitcoin/pull/20537" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20537</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606788600' id='415936'>
<a class='timestamp' href='#415936'><time timestamp='2020-12-01T02:10:00Z'>02:10</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
holy shit the taproot python tests are extensive
<br>
</div>

<div class='talk op-msg' data-timestamp='1606788600' id='415937'>
<a class='timestamp' href='#415937'><time timestamp='2020-12-01T02:10:00Z'>02:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
:)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606788780' id='415938'>
<a class='timestamp' href='#415938'><time timestamp='2020-12-01T02:13:00Z'>02:13</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
XD
<br>
</div>

<div class='talk op-msg' data-timestamp='1606807860' id='415939'>
<a class='timestamp' href='#415939'><time timestamp='2020-12-01T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 3 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/81d5af42f4db...ffd5e7a8567d" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/81d5af42f4db...ffd5e7a8567d</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606807860' id='415940'>
<a class='timestamp' href='#415940'><time timestamp='2020-12-01T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 9429a39 practicalswift: Handle rename failure in DumpMempool(...) by using RenameOver(...) return ...
<br>
</div>

<div class='talk op-msg' data-timestamp='1606807860' id='415941'>
<a class='timestamp' href='#415941'><time timestamp='2020-12-01T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ce9dd45 practicalswift: Add [[nodiscard]] to RenameOver(...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606807860' id='415942'>
<a class='timestamp' href='#415942'><time timestamp='2020-12-01T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ffd5e7a MarcoFalke: Merge #20519: Handle rename failure in DumpMempool(...) by using the Renam...
<br>
</div>

<div class='talk op-msg' data-timestamp='1606807860' id='415943'>
<a class='timestamp' href='#415943'><time timestamp='2020-12-01T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #20519: Handle rename failure in DumpMempool(...) by using the RenameOver(...) return value. Add [[nodiscard]] to RenameOver(...). (master...renameover-nodiscard) <a href="https://github.com/bitcoin/bitcoin/pull/20519" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20519</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606810860' id='415944'>
<a class='timestamp' href='#415944'><time timestamp='2020-12-01T08:21:00Z'>08:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] naumenkogs opened pull request #20539: Avoid rebucketing on restart when it&#x27;s not necessary (master...2020-12-01-rebucket-asmap-fix) <a href="https://github.com/bitcoin/bitcoin/pull/20539" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20539</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606812120' id='415945'>
<a class='timestamp' href='#415945'><time timestamp='2020-12-01T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 4 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/ffd5e7a8567d...24e4857b29b3" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/ffd5e7a8567d...24e4857b29b3</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606812120' id='415946'>
<a class='timestamp' href='#415946'><time timestamp='2020-12-01T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 12bd0fc Russell Yanofsky: Move NodeImpl from interfaces/node.cpp to node/interfaces.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1606812120' id='415947'>
<a class='timestamp' href='#415947'><time timestamp='2020-12-01T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 2a26771 Russell Yanofsky: Move ChainImpl from interfaces/chain.cpp to node/interfaces.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1606812120' id='415948'>
<a class='timestamp' href='#415948'><time timestamp='2020-12-01T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 629a929 Russell Yanofsky: Move WalletImpl from interfaces/wallet.cpp to wallet/interfaces.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1606812120' id='415949'>
<a class='timestamp' href='#415949'><time timestamp='2020-12-01T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #20494: refactor: Move node and wallet code out of src/interfaces (master...pr/ipc-mv) <a href="https://github.com/bitcoin/bitcoin/pull/20494" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20494</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606813500' id='415950'>
<a class='timestamp' href='#415950'><time timestamp='2020-12-01T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 4 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/24e4857b29b3...cd720337fe9c" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/24e4857b29b3...cd720337fe9c</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606813500' id='415951'>
<a class='timestamp' href='#415951'><time timestamp='2020-12-01T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 9d4b4b2 Elle Mouton: refactor: Avoid double to int cast for nCheckFrequency
<br>
</div>

<div class='talk op-msg' data-timestamp='1606813500' id='415952'>
<a class='timestamp' href='#415952'><time timestamp='2020-12-01T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master e331069 Elle Mouton: refactor: Make CTxMemPool::m_check_ratio a const and a constructor argumen...
<br>
</div>

<div class='talk op-msg' data-timestamp='1606813500' id='415953'>
<a class='timestamp' href='#415953'><time timestamp='2020-12-01T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master f15e780 Elle Mouton: refactor: Clean up CTxMemPool initializer list
<br>
</div>

<div class='talk op-msg' data-timestamp='1606813500' id='415954'>
<a class='timestamp' href='#415954'><time timestamp='2020-12-01T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #20222: refactor: CTxMempool constructor clean up (master...ctxmempool_refactor) <a href="https://github.com/bitcoin/bitcoin/pull/20222" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20222</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606816740' id='415955'>
<a class='timestamp' href='#415955'><time timestamp='2020-12-01T09:59:00Z'>09:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/cd720337fe9c...f2a673f15b51" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/cd720337fe9c...f2a673f15b51</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606816740' id='415956'>
<a class='timestamp' href='#415956'><time timestamp='2020-12-01T09:59:00Z'>09:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 86b1ab6 Hennadii Stepanov: refactor: Replace deprecated Qt::SystemLocale{Short,Long}Date
<br>
</div>

<div class='talk op-msg' data-timestamp='1606816740' id='415957'>
<a class='timestamp' href='#415957'><time timestamp='2020-12-01T09:59:00Z'>09:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master f2a673f Jonas Schnelli: Merge bitcoin-core/gui#137: refactor: Replace deprecated Qt::SystemLocale{...
<br>
</div>

<div class='talk op-msg' data-timestamp='1606816740' id='415958'>
<a class='timestamp' href='#415958'><time timestamp='2020-12-01T09:59:00Z'>09:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[gui] jonasschnelli merged pull request #137: refactor: Replace deprecated Qt::SystemLocale{Short,Long}Date (master...201127-locale) <a href="https://github.com/bitcoin-core/gui/pull/137" class="link" target="_blank">https://github.com/bitcoin-core/gui/pull/137</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818180' id='415959'>
<a class='timestamp' href='#415959'><time timestamp='2020-12-01T10:23:00Z'>10:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/f2a673f15b51...335d27d08141" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/f2a673f15b51...335d27d08141</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818180' id='415960'>
<a class='timestamp' href='#415960'><time timestamp='2020-12-01T10:23:00Z'>10:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 1d578c0 Emil Engler: doc: Add bash as an OpenBSD dependency
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818180' id='415961'>
<a class='timestamp' href='#415961'><time timestamp='2020-12-01T10:23:00Z'>10:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 335d27d Jonas Schnelli: Merge #20512: doc: Add bash as an OpenBSD dependency
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818240' id='415962'>
<a class='timestamp' href='#415962'><time timestamp='2020-12-01T10:24:00Z'>10:24</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli merged pull request #20512: doc: Add bash as an OpenBSD dependency (master...2020-11-doc-build-openbsd-bash-dependency) <a href="https://github.com/bitcoin/bitcoin/pull/20512" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20512</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818420' id='415963'>
<a class='timestamp' href='#415963'><time timestamp='2020-12-01T10:27:00Z'>10:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli pushed 3 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/335d27d08141...dcb7518067cd" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/335d27d08141...dcb7518067cd</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818420' id='415964'>
<a class='timestamp' href='#415964'><time timestamp='2020-12-01T10:27:00Z'>10:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 65afe4c Hennadii Stepanov: build: Drop unneeded ApplicationServices framework dependency
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818420' id='415965'>
<a class='timestamp' href='#415965'><time timestamp='2020-12-01T10:27:00Z'>10:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ec4a46d Hennadii Stepanov: build: Drop unneeded IOKit framework dependency
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818420' id='415966'>
<a class='timestamp' href='#415966'><time timestamp='2020-12-01T10:27:00Z'>10:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master dcb7518 Jonas Schnelli: Merge #20496: build: Drop unneeded macOS framework dependencies
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818480' id='415967'>
<a class='timestamp' href='#415967'><time timestamp='2020-12-01T10:28:00Z'>10:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli merged pull request #20496: build: Drop unneeded macOS framework dependencies (master...201125-as) <a href="https://github.com/bitcoin/bitcoin/pull/20496" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20496</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818540' id='415968'>
<a class='timestamp' href='#415968'><time timestamp='2020-12-01T10:29:00Z'>10:29</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/dcb7518067cd...277c225b8421" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/dcb7518067cd...277c225b8421</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818540' id='415969'>
<a class='timestamp' href='#415969'><time timestamp='2020-12-01T10:29:00Z'>10:29</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 982e548 Jonas Schnelli: Don&#x27;t set BDB flags when configuring without
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818540' id='415970'>
<a class='timestamp' href='#415970'><time timestamp='2020-12-01T10:29:00Z'>10:29</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 277c225 Jonas Schnelli: Merge #20478: Don&#x27;t set BDB flags when configuring without
<br>
</div>

<div class='talk op-msg' data-timestamp='1606818540' id='415971'>
<a class='timestamp' href='#415971'><time timestamp='2020-12-01T10:29:00Z'>10:29</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli merged pull request #20478: Don&#x27;t set BDB flags when configuring without (master...2020/11/bdbless_mac) <a href="https://github.com/bitcoin/bitcoin/pull/20478" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20478</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606826340' id='415972'>
<a class='timestamp' href='#415972'><time timestamp='2020-12-01T12:39:00Z'>12:39</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #20540: test: Fix wallet_multiwallet issue on windows (master...2012-testmw) <a href="https://github.com/bitcoin/bitcoin/pull/20540" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20540</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606827960' id='415973'>
<a class='timestamp' href='#415973'><time timestamp='2020-12-01T13:06:00Z'>13:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/277c225b8421...dfd0b700886c" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/277c225b8421...dfd0b700886c</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606827960' id='415974'>
<a class='timestamp' href='#415974'><time timestamp='2020-12-01T13:06:00Z'>13:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 17a5f17 practicalswift: fuzz: Make addrman fuzzing harness deterministic
<br>
</div>

<div class='talk op-msg' data-timestamp='1606827960' id='415975'>
<a class='timestamp' href='#415975'><time timestamp='2020-12-01T13:06:00Z'>13:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master dfd0b70 MarcoFalke: Merge #20425: fuzz: Make CAddrMan fuzzing harness deterministic
<br>
</div>

<div class='talk op-msg' data-timestamp='1606827960' id='415976'>
<a class='timestamp' href='#415976'><time timestamp='2020-12-01T13:06:00Z'>13:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #20425: fuzz: Make CAddrMan fuzzing harness deterministic (master...fuzzers-make-addrman-harness-deterministic) <a href="https://github.com/bitcoin/bitcoin/pull/20425" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20425</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829040' id='415977'>
<a class='timestamp' href='#415977'><time timestamp='2020-12-01T13:24:00Z'>13:24</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
michaelfolkson: Let&#x27;s take this here
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829100' id='415978'>
<a class='timestamp' href='#415978'><time timestamp='2020-12-01T13:25:00Z'>13:25</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
MarcoFalke: Sure, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829220' id='415979'>
<a class='timestamp' href='#415979'><time timestamp='2020-12-01T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
I think I&#x27;m misunderstanding terminology. So seeds will be randomly generated...
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829280' id='415980'>
<a class='timestamp' href='#415980'><time timestamp='2020-12-01T13:28:00Z'>13:28</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Some fuzz engines have command line switches to make them deterministic
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829280' id='415981'>
<a class='timestamp' href='#415981'><time timestamp='2020-12-01T13:28:00Z'>13:28</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
But if a fuzz tester finds an issue with a randomly generated seed a different fuzz tester who tries that same input needs to get the same result
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829340' id='415982'>
<a class='timestamp' href='#415982'><time timestamp='2020-12-01T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829340' id='415983'>
<a class='timestamp' href='#415983'><time timestamp='2020-12-01T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
if you can&#x27;t reproduce, it will be hard to debug and fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829400' id='415984'>
<a class='timestamp' href='#415984'><time timestamp='2020-12-01T13:30:00Z'>13:30</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
But you can reproduce as long as you know what the inputs were. Whether they were randomly generated or not is surely irrelevant?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829460' id='415985'>
<a class='timestamp' href='#415985'><time timestamp='2020-12-01T13:31:00Z'>13:31</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
It is surely a logging issue rather than a choice of deterministic/random?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829520' id='415986'>
<a class='timestamp' href='#415986'><time timestamp='2020-12-01T13:32:00Z'>13:32</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
int main() { if (rand() &gt; 2) crash(); }
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829580' id='415987'>
<a class='timestamp' href='#415987'><time timestamp='2020-12-01T13:33:00Z'>13:33</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
how would you reliably reproduce a crash here, knowing the input?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829580' id='415988'>
<a class='timestamp' href='#415988'><time timestamp='2020-12-01T13:33:00Z'>13:33</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
how the input was generated is irrelevant to how to reproduce a bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829640' id='415989'>
<a class='timestamp' href='#415989'><time timestamp='2020-12-01T13:34:00Z'>13:34</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
logging helps to debug intermittent (non-reproducible) bugs better
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829700' id='415990'>
<a class='timestamp' href='#415990'><time timestamp='2020-12-01T13:35:00Z'>13:35</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
we have a lot of them, which is why logging is cranked up in all tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829760' id='415991'>
<a class='timestamp' href='#415991'><time timestamp='2020-12-01T13:36:00Z'>13:36</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
In your example one fuzz tester would crash the program with say an input of 3. For another fuzz tester to reproduce it they would need to know the other fuzz tester tried an input of 3
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829820' id='415992'>
<a class='timestamp' href='#415992'><time timestamp='2020-12-01T13:37:00Z'>13:37</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
But how the fuzz tester initially generated 3 is irrelevant. It could have been deterministic or random
<br>
</div>

<div class='talk op-msg' data-timestamp='1606829940' id='415993'>
<a class='timestamp' href='#415993'><time timestamp='2020-12-01T13:39:00Z'>13:39</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
So in the PR there is a CAddrMan fuzzing harness. Again I&#x27;m not entirely sure how &quot;harness&quot; is defined
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830000' id='415994'>
<a class='timestamp' href='#415994'><time timestamp='2020-12-01T13:40:00Z'>13:40</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
But fuzz testers should be able to randomly generate addrs and try different addrs to other fuzz testers. As long as they log which addrs they tried and which addrs created issues?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830060' id='415995'>
<a class='timestamp' href='#415995'><time timestamp='2020-12-01T13:41:00Z'>13:41</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
whether the above example crashes is <b>*independent*</b> of the input
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830060' id='415996'>
<a class='timestamp' href='#415996'><time timestamp='2020-12-01T13:41:00Z'>13:41</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
the progam takes no input, assuming that rand will ask the OS for randomness
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830120' id='415997'>
<a class='timestamp' href='#415997'><time timestamp='2020-12-01T13:42:00Z'>13:42</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
and in most cases the OS randomness is not reproducible
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830180' id='415998'>
<a class='timestamp' href='#415998'><time timestamp='2020-12-01T13:43:00Z'>13:43</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
And the problem is that we don&#x27;t log what the OS supplied for randomness? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830180' id='415999'>
<a class='timestamp' href='#415999'><time timestamp='2020-12-01T13:43:00Z'>13:43</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
the problem is that we ask the os for randomness
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830240' id='416000'>
<a class='timestamp' href='#416000'><time timestamp='2020-12-01T13:44:00Z'>13:44</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
tests should supply the randomness. Either with a hardcoded seed or letting the fuzz engine pick one
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830240' id='416001'>
<a class='timestamp' href='#416001'><time timestamp='2020-12-01T13:44:00Z'>13:44</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Ah so the problem is an external source of randomness rather than an internal source from within the tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830300' id='416002'>
<a class='timestamp' href='#416002'><time timestamp='2020-12-01T13:45:00Z'>13:45</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
It is still random but it is generated within the tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830300' id='416003'>
<a class='timestamp' href='#416003'><time timestamp='2020-12-01T13:45:00Z'>13:45</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
as long as the source is reproducible/deterministic, it can be from anywhere
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830360' id='416004'>
<a class='timestamp' href='#416004'><time timestamp='2020-12-01T13:46:00Z'>13:46</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
And by that you mean a reproducible source of randomness is one that supplies the same inputs when it is asked for randomness
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830360' id='416005'>
<a class='timestamp' href='#416005'><time timestamp='2020-12-01T13:46:00Z'>13:46</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Everytime it is asked for randomness it provides say inputs of 7,2,3 as the first three random inputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830420' id='416006'>
<a class='timestamp' href='#416006'><time timestamp='2020-12-01T13:47:00Z'>13:47</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
The problem becomes when you ask it for randomness twice and it provides different inputs on the second time vs the first
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830600' id='416007'>
<a class='timestamp' href='#416007'><time timestamp='2020-12-01T13:50:00Z'>13:50</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
yes, when &quot;s/time/program execution/&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830600' id='416008'>
<a class='timestamp' href='#416008'><time timestamp='2020-12-01T13:50:00Z'>13:50</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Gotcha. Thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830660' id='416009'>
<a class='timestamp' href='#416009'><time timestamp='2020-12-01T13:51:00Z'>13:51</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
How would you explain what a fuzzing &quot;harness&quot; is?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830780' id='416010'>
<a class='timestamp' href='#416010'><time timestamp='2020-12-01T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
a test case or one test target
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830840' id='416011'>
<a class='timestamp' href='#416011'><time timestamp='2020-12-01T13:54:00Z'>13:54</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
OK &quot;entry-point executable&quot; from this <a href="https://vdalabs.com/2019/02/01/microsoft-security-risk-detection-writing-a-custom-test-harness-to-fuzz-libraries/" class="link" target="_blank">https://vdalabs.com/2019/02/01/microsoft-security-risk-detection-writing-a-custom-test-harness-to-fuzz-libraries/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606830840' id='416012'>
<a class='timestamp' href='#416012'><time timestamp='2020-12-01T13:54:00Z'>13:54</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Ok thanks for the help
<br>
</div>

<div class='talk op-msg' data-timestamp='1606831020' id='416013'>
<a class='timestamp' href='#416013'><time timestamp='2020-12-01T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
hi folks. It&#x27;s p2p irc meeting day. There aren&#x27;t currently any topics in <a href="https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-IRC-meetings#1-dec-2020" class="link" target="_blank">https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-IRC-meetings#1-dec-2020</a>. Feel free to add anything you want to discuss. The meeting starts in just over an hour.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606831020' id='416014'>
<a class='timestamp' href='#416014'><time timestamp='2020-12-01T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/1" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/1</a> | JSON-RPC support for mobile devices (&quot;ultra-lightweight&quot; clients) · Issue #1 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1606832040' id='416015'>
<a class='timestamp' href='#416015'><time timestamp='2020-12-01T14:14:00Z'>14:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 9 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/dfd0b700886c...f17e8ba3a17b" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/dfd0b700886c...f17e8ba3a17b</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606832040' id='416016'>
<a class='timestamp' href='#416016'><time timestamp='2020-12-01T14:14:00Z'>14:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 18246ed Pieter Wuille: Fix and improve taproot_construct comments
<br>
</div>

<div class='talk op-msg' data-timestamp='1606832040' id='416017'>
<a class='timestamp' href='#416017'><time timestamp='2020-12-01T14:14:00Z'>14:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master cdf900c Pieter Wuille: Document need_vin_vout_mismatch argument to make_spender
<br>
</div>

<div class='talk op-msg' data-timestamp='1606832040' id='416018'>
<a class='timestamp' href='#416018'><time timestamp='2020-12-01T14:14:00Z'>14:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 8dbb7de Pieter Wuille: Add comments to VerifyTaprootCommitment
<br>
</div>

<div class='talk op-msg' data-timestamp='1606832040' id='416019'>
<a class='timestamp' href='#416019'><time timestamp='2020-12-01T14:14:00Z'>14:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #20207: Follow-up extra comments on taproot code and tests (master...202010_taproot-comments) <a href="https://github.com/bitcoin/bitcoin/pull/20207" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20207</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606832880' id='416020'>
<a class='timestamp' href='#416020'><time timestamp='2020-12-01T14:28:00Z'>14:28</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
How does one do that jnewbery? Just manually edit that dev wiki page?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834260' id='416021'>
<a class='timestamp' href='#416021'><time timestamp='2020-12-01T14:51:00Z'>14:51</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
has anyone looked at m_addr_known to see if we should be manually clearing it every day? from a quick look at my logs, i estimate that my addr messages to my peers average substantially less than 5000 messages per day, which i think means that our daily self-announcements would propagate less frequently than we&#x27;d expect (maybe once every few days, instead of once per day)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834440' id='416022'>
<a class='timestamp' href='#416022'><time timestamp='2020-12-01T14:54:00Z'>14:54</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
michaelfolkson: yes, just edit the page
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834800' id='416023'>
<a class='timestamp' href='#416023'><time timestamp='2020-12-01T15:00:00Z'>15:00</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#startmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834800' id='416024'>
<a class='timestamp' href='#416024'><time timestamp='2020-12-01T15:00:00Z'>15:00</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
Meeting started Tue Dec  1 15:00:17 2020 UTC.  The chair is jnewbery. Information about MeetBot at <a href="https://bitcoin.jonasschnelli.ch/ircmeetings" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/ircmeetings</a>.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834800' id='416025'>
<a class='timestamp' href='#416025'><time timestamp='2020-12-01T15:00:00Z'>15:00</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
Available commands: action commands idea info link nick
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834800' id='416026'>
<a class='timestamp' href='#416026'><time timestamp='2020-12-01T15:00:00Z'>15:00</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#bitcoin-core-dev P2P Meeting: wumpus sipa gmaxwell jonasschnelli morcos luke-jr sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier jl2012 achow101 meshcollider jnewbery maaku fanquake promag provoostenator aj Chris_Stewart_5 dongcarl gwillen jamesob ken281221 ryanofsky gleb moneyball kvaciral ariard digi_james 
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834800' id='416027'>
<a class='timestamp' href='#416027'><time timestamp='2020-12-01T15:00:00Z'>15:00</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
amiti fjahr jeremyrubin lightlike emilengler jonatack hebasto jb55 elichai2
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834860' id='416028'>
<a class='timestamp' href='#416028'><time timestamp='2020-12-01T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-9'> glozow</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834860' id='416029'>
<a class='timestamp' href='#416029'><time timestamp='2020-12-01T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834860' id='416030'>
<a class='timestamp' href='#416030'><time timestamp='2020-12-01T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834860' id='416031'>
<a class='timestamp' href='#416031'><time timestamp='2020-12-01T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834860' id='416032'>
<a class='timestamp' href='#416032'><time timestamp='2020-12-01T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
hi folks. No proposed topics in <a href="https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-IRC-meetings#1-dec-2020" class="link" target="_blank">https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-IRC-meetings#1-dec-2020</a> so could be a short meeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834860' id='416033'>
<a class='timestamp' href='#416033'><time timestamp='2020-12-01T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834860' id='416034'>
<a class='timestamp' href='#416034'><time timestamp='2020-12-01T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/1" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/1</a> | JSON-RPC support for mobile devices (&quot;ultra-lightweight&quot; clients) · Issue #1 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834860' id='416035'>
<a class='timestamp' href='#416035'><time timestamp='2020-12-01T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-15'> ajonas</span>&gt;
Hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834860' id='416036'>
<a class='timestamp' href='#416036'><time timestamp='2020-12-01T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834920' id='416037'>
<a class='timestamp' href='#416037'><time timestamp='2020-12-01T15:02:00Z'>15:02</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
anyone have any proposed topics, or anything they want to share with the group?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834920' id='416038'>
<a class='timestamp' href='#416038'><time timestamp='2020-12-01T15:02:00Z'>15:02</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
I&#x27;d like to chat about people&#x27;s thoughts on current P2P fuzzing and whether they do it. And if not why not
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834980' id='416039'>
<a class='timestamp' href='#416039'><time timestamp='2020-12-01T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#topic p2p fuzzing
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834980' id='416040'>
<a class='timestamp' href='#416040'><time timestamp='2020-12-01T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
topic: p2p fuzzing
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834980' id='416041'>
<a class='timestamp' href='#416041'><time timestamp='2020-12-01T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
fuzzing is just a new concept to me, I don&#x27;t do it because I need to take time to learn it first :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834980' id='416042'>
<a class='timestamp' href='#416042'><time timestamp='2020-12-01T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if someone pointed me to an idiot&#x27;s guide to fuzzing, i might do it.  but i&#x27;m pretty clueless.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606834980' id='416043'>
<a class='timestamp' href='#416043'><time timestamp='2020-12-01T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835040' id='416044'>
<a class='timestamp' href='#416044'><time timestamp='2020-12-01T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Ok so it is a basic understanding issue?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835040' id='416045'>
<a class='timestamp' href='#416045'><time timestamp='2020-12-01T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
i think so.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835040' id='416046'>
<a class='timestamp' href='#416046'><time timestamp='2020-12-01T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Don&#x27;t really get what it is trying to do
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835040' id='416047'>
<a class='timestamp' href='#416047'><time timestamp='2020-12-01T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
find bugs
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835040' id='416048'>
<a class='timestamp' href='#416048'><time timestamp='2020-12-01T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
There were a couple of good PR review club meetings hosted by Marco about fuzzing: <a href="https://bitcoincore.reviews/17860" class="link" target="_blank">https://bitcoincore.reviews/17860</a> <a href="https://bitcoincore.reviews/18521" class="link" target="_blank">https://bitcoincore.reviews/18521</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835100' id='416049'>
<a class='timestamp' href='#416049'><time timestamp='2020-12-01T15:05:00Z'>15:05</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
they contain lots of references to further reading for anyone who&#x27;s curious
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835100' id='416050'>
<a class='timestamp' href='#416050'><time timestamp='2020-12-01T15:05:00Z'>15:05</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
you can start with the docs of AFL/libfuzzer/hongfuzz and look for talk of their authors :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835100' id='416051'>
<a class='timestamp' href='#416051'><time timestamp='2020-12-01T15:05:00Z'>15:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
michaelfolkson: what do you mean by p2p fuzzing btw?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835100' id='416052'>
<a class='timestamp' href='#416052'><time timestamp='2020-12-01T15:05:00Z'>15:05</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
there are already p2p fuzzers
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835160' id='416053'>
<a class='timestamp' href='#416053'><time timestamp='2020-12-01T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-16'> emzy</span>&gt;
Hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835160' id='416054'>
<a class='timestamp' href='#416054'><time timestamp='2020-12-01T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Yeah there is P2P code. And P2P experts in this meeting. It would be good eventually to bring that expertise on what should be fuzzed in a P2P context
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835160' id='416055'>
<a class='timestamp' href='#416055'><time timestamp='2020-12-01T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
(I think)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835160' id='416056'>
<a class='timestamp' href='#416056'><time timestamp='2020-12-01T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I am working on increasing their coverage
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835220' id='416057'>
<a class='timestamp' href='#416057'><time timestamp='2020-12-01T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
IIRC practicalswift added coverage for a part of the p2p stack a while ago ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835220' id='416058'>
<a class='timestamp' href='#416058'><time timestamp='2020-12-01T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
I guess it is an issue of whether fuzz coverage is something the expert fuzzers do or something that everyone thinks about when they open PR etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835220' id='416059'>
<a class='timestamp' href='#416059'><time timestamp='2020-12-01T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
michaelfolkson: The ci does it on every PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835280' id='416060'>
<a class='timestamp' href='#416060'><time timestamp='2020-12-01T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I don&#x27;t run the fuzzers locally because of the extra overhead of building them. I also expect most bugs except the very shallow ones to be discovered by fuzzers running continuously on dedicated machines.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835280' id='416061'>
<a class='timestamp' href='#416061'><time timestamp='2020-12-01T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835280' id='416062'>
<a class='timestamp' href='#416062'><time timestamp='2020-12-01T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
michaelfolkson: i think you need to distintuish between &quot;writing fuzzers&quot; and &quot;,running fuzzers&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835280' id='416063'>
<a class='timestamp' href='#416063'><time timestamp='2020-12-01T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Presumably say the P2P experts should also think about what should be fuzzed in a P2P contexts
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835280' id='416064'>
<a class='timestamp' href='#416064'><time timestamp='2020-12-01T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
sipa: and &quot;generating seeds&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835280' id='416065'>
<a class='timestamp' href='#416065'><time timestamp='2020-12-01T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
sipa: Right, could discuss both
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835280' id='416066'>
<a class='timestamp' href='#416066'><time timestamp='2020-12-01T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
running fuzzers is something everyone can do
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835340' id='416067'>
<a class='timestamp' href='#416067'><time timestamp='2020-12-01T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
writing fuzzers... that&#x27;s just one way among dozens of how you can increasy confidence in code you&#x27;re writing
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835340' id='416068'>
<a class='timestamp' href='#416068'><time timestamp='2020-12-01T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
up to the author and what people believe is important in that context
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835340' id='416069'>
<a class='timestamp' href='#416069'><time timestamp='2020-12-01T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Should we be thinking about writing fuzzers in the same way as we do writing unit tests and writing functional tests? Everybody should be thinking about adding them? Or just the fuzz test experts/team
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835400' id='416070'>
<a class='timestamp' href='#416070'><time timestamp='2020-12-01T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
I guess that&#x27;s my question on the writing them side
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835400' id='416071'>
<a class='timestamp' href='#416071'><time timestamp='2020-12-01T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
And then on the running them side it is how do we get more people to run them as part of their workflow
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835400' id='416072'>
<a class='timestamp' href='#416072'><time timestamp='2020-12-01T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I don&#x27;t think there&#x27;s a problem that needs to be solved here
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835400' id='416073'>
<a class='timestamp' href='#416073'><time timestamp='2020-12-01T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-10'> nehan</span>&gt;
hi. i found the PR club extremely helpful in learning how to fuzz. i was able to relatively quickly doing it having zero experience with it before.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835460' id='416074'>
<a class='timestamp' href='#416074'><time timestamp='2020-12-01T15:11:00Z'>15:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
obbiously?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835460' id='416075'>
<a class='timestamp' href='#416075'><time timestamp='2020-12-01T15:11:00Z'>15:11</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
michaelfolkson: I guess it is up to the author. Not everyone is adding unit tests or functional tests.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835460' id='416076'>
<a class='timestamp' href='#416076'><time timestamp='2020-12-01T15:11:00Z'>15:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
michaelfolkson: again, it&#x27;s one way among many of increasing confidence incyour code. some things lend themselves well for fuzz testing, others not so much
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835520' id='416077'>
<a class='timestamp' href='#416077'><time timestamp='2020-12-01T15:12:00Z'>15:12</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
MarcoFalke: Not everyone is but everyone should at least be considering whether to or not. Right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835520' id='416078'>
<a class='timestamp' href='#416078'><time timestamp='2020-12-01T15:12:00Z'>15:12</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
michaelfolkson: Ideally, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835580' id='416079'>
<a class='timestamp' href='#416079'><time timestamp='2020-12-01T15:13:00Z'>15:13</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Ok thanks, that&#x27;s helpful
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835580' id='416080'>
<a class='timestamp' href='#416080'><time timestamp='2020-12-01T15:13:00Z'>15:13</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
any other topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835580' id='416081'>
<a class='timestamp' href='#416081'><time timestamp='2020-12-01T15:13:00Z'>15:13</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
I think the jnewbery point on what should be done on dedicated machines is something I have also wondered
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835640' id='416082'>
<a class='timestamp' href='#416082'><time timestamp='2020-12-01T15:14:00Z'>15:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
michaelfolkson: run the fuzzers
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835640' id='416083'>
<a class='timestamp' href='#416083'><time timestamp='2020-12-01T15:14:00Z'>15:14</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
a short note on state of tx-pinning/package-relay and discussion on the LN-side?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835640' id='416084'>
<a class='timestamp' href='#416084'><time timestamp='2020-12-01T15:14:00Z'>15:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
like our CI runs the tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835640' id='416085'>
<a class='timestamp' href='#416085'><time timestamp='2020-12-01T15:14:00Z'>15:14</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
michaelfolkson: ./test/fuzz/test_runner.py --help
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835700' id='416086'>
<a class='timestamp' href='#416086'><time timestamp='2020-12-01T15:15:00Z'>15:15</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
anyone can do it. It supports single run (ci) and generation (long running)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835700' id='416087'>
<a class='timestamp' href='#416087'><time timestamp='2020-12-01T15:15:00Z'>15:15</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#topic tx pinning / package relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835700' id='416088'>
<a class='timestamp' href='#416088'><time timestamp='2020-12-01T15:15:00Z'>15:15</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
topic: tx pinning / package relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835700' id='416089'>
<a class='timestamp' href='#416089'><time timestamp='2020-12-01T15:15:00Z'>15:15</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
so we had this discussion few irc meeting ago with LN devs
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835760' id='416090'>
<a class='timestamp' href='#416090'><time timestamp='2020-12-01T15:16:00Z'>15:16</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
we found yet-another case of tx-pinning after the new anchor spec
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835760' id='416091'>
<a class='timestamp' href='#416091'><time timestamp='2020-12-01T15:16:00Z'>15:16</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
<a href="https://github.com/lightningnetwork/lightning-rfc/pull/803" class="link" target="_blank">https://github.com/lightningnetwork/lightning-rfc/pull/803</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835760' id='416092'>
<a class='timestamp' href='#416092'><time timestamp='2020-12-01T15:16:00Z'>15:16</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
we would like to demo the attack actually explained here: <a href="https://github.com/t-bast/lightning-docs/blob/master/pinning-attacks.md" class="link" target="_blank">https://github.com/t-bast/lightning-docs/blob/master/pinning-attacks.md</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835760' id='416093'>
<a class='timestamp' href='#416093'><time timestamp='2020-12-01T15:16:00Z'>15:16</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
before to know exactly what we would be cool to ask as a change on the p2p layer 
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835820' id='416094'>
<a class='timestamp' href='#416094'><time timestamp='2020-12-01T15:17:00Z'>15:17</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
so right now I&#x27;m spending time hacking with RL to have the necessary toolchain
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835820' id='416095'>
<a class='timestamp' href='#416095'><time timestamp='2020-12-01T15:17:00Z'>15:17</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
and that&#x27;s all :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835820' id='416096'>
<a class='timestamp' href='#416096'><time timestamp='2020-12-01T15:17:00Z'>15:17</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
*the attacks, we have multiple scenarios
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835820' id='416097'>
<a class='timestamp' href='#416097'><time timestamp='2020-12-01T15:17:00Z'>15:17</time></a>
&lt;<span class='nick nick-9'> glozow</span>&gt;
what&#x27;s the SIGHASH_SINGLE malleability? sorry i&#x27;m unfamiliar
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835880' id='416098'>
<a class='timestamp' href='#416098'><time timestamp='2020-12-01T15:18:00Z'>15:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
RL?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835880' id='416099'>
<a class='timestamp' href='#416099'><time timestamp='2020-12-01T15:18:00Z'>15:18</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
rust lightning
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835880' id='416100'>
<a class='timestamp' href='#416100'><time timestamp='2020-12-01T15:18:00Z'>15:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835880' id='416101'>
<a class='timestamp' href='#416101'><time timestamp='2020-12-01T15:18:00Z'>15:18</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
glozow: it lets you sign only the index of the output, thus adding any output without cooperation of your LN counterparty (IIRC)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835940' id='416102'>
<a class='timestamp' href='#416102'><time timestamp='2020-12-01T15:19:00Z'>15:19</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
glozow: <a href="https://bitcoinops.org/en/newsletters/2020/09/16/#stealing-onchain-fees-from-ln-htlcs" class="link" target="_blank">https://bitcoinops.org/en/newsletters/2020/09/16/#stealing-onchain-fees-from-ln-htlcs</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835940' id='416103'>
<a class='timestamp' href='#416103'><time timestamp='2020-12-01T15:19:00Z'>15:19</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
And by case of tx-pinning you mean another scenario in Lightning where tx pinning is a problem. Rather than a new way to tx pin in Core
<br>
</div>

<div class='talk op-msg' data-timestamp='1606835940' id='416104'>
<a class='timestamp' href='#416104'><time timestamp='2020-12-01T15:19:00Z'>15:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
glozow: all sighash modes are effecrively <b>*intentional*</b> malleability, they&#x27;re there so soke tgings can be changed in a tx without affecting the sig
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836000' id='416105'>
<a class='timestamp' href='#416105'><time timestamp='2020-12-01T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
michaelfolkson: yes we discovered another vulnerability but it wasn&#x27;t mentinonned on the ML
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836000' id='416106'>
<a class='timestamp' href='#416106'><time timestamp='2020-12-01T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-9'> glozow</span>&gt;
ahhhh thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836000' id='416107'>
<a class='timestamp' href='#416107'><time timestamp='2020-12-01T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
michaelfolkson: note also that pinning doesn&#x27;t only affect LN but also bitcoin protocol like vaults, DLC
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836000' id='416108'>
<a class='timestamp' href='#416108'><time timestamp='2020-12-01T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-10'> nehan</span>&gt;
nit ariard: I don&#x27;t think you should use the term &quot;split brains&quot; to describe differing mempools. as you point out in the doc, mempools are different *by design*. saying it&#x27;s a &quot;split brain&quot; implies there should be an unsplit (single) brain.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836060' id='416109'>
<a class='timestamp' href='#416109'><time timestamp='2020-12-01T15:21:00Z'>15:21</time></a>
&lt;<span class='nick nick-10'> nehan</span>&gt;
ariard: &quot;split brain&quot; is usually used to describe a temporary network partition in distributed systems.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836060' id='416110'>
<a class='timestamp' href='#416110'><time timestamp='2020-12-01T15:21:00Z'>15:21</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
nehan: thanks, I think the expression is from zeeman and was just reused at it is by t-bast
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836060' id='416111'>
<a class='timestamp' href='#416111'><time timestamp='2020-12-01T15:21:00Z'>15:21</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
So the messaging is like tx pinning should be even more of a priority to solve in Core than we already knew it was
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836060' id='416112'>
<a class='timestamp' href='#416112'><time timestamp='2020-12-01T15:21:00Z'>15:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t think it can be solved in general
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836060' id='416113'>
<a class='timestamp' href='#416113'><time timestamp='2020-12-01T15:21:00Z'>15:21</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
nehan: I think I used mempool-partition to describe the same phenomena but if you have a better distributed system expression?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836120' id='416114'>
<a class='timestamp' href='#416114'><time timestamp='2020-12-01T15:22:00Z'>15:22</time></a>
&lt;<span class='nick nick-10'> nehan</span>&gt;
ariard: not off the top of my head! will think about it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836120' id='416115'>
<a class='timestamp' href='#416115'><time timestamp='2020-12-01T15:22:00Z'>15:22</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
inconsistent mempools
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836120' id='416116'>
<a class='timestamp' href='#416116'><time timestamp='2020-12-01T15:22:00Z'>15:22</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
sipa: define general ? if you mean for any bitcoin protocol without care of protocol designer I likely agree with you
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836240' id='416117'>
<a class='timestamp' href='#416117'><time timestamp='2020-12-01T15:24:00Z'>15:24</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
michaelfolkson: note that cdecker proposed a new tx-relay overlay to solve pinning instead of change to p2p tx-relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836240' id='416118'>
<a class='timestamp' href='#416118'><time timestamp='2020-12-01T15:24:00Z'>15:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ariard: i think dos protection will always result in an inability to accept transactions in some scenarios where that transaction would have been accepted from p2p in another state
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836300' id='416119'>
<a class='timestamp' href='#416119'><time timestamp='2020-12-01T15:25:00Z'>15:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we can reduce the set of situations under which that can happen using better algorithms
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836300' id='416120'>
<a class='timestamp' href='#416120'><time timestamp='2020-12-01T15:25:00Z'>15:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but the problem in a generic sense seems inherent
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836300' id='416121'>
<a class='timestamp' href='#416121'><time timestamp='2020-12-01T15:25:00Z'>15:25</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
ariard: So that would potentially be run by the Core nodes that care about Lightning? And the Core nodes that don&#x27;t care wouldn&#x27;t run it
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836300' id='416122'>
<a class='timestamp' href='#416122'><time timestamp='2020-12-01T15:25:00Z'>15:25</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
sipa: yes I agree on this! I describe such scenario here <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-June/002758.html" class="link" target="_blank">https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-June/002758.html</a> (the 3rd one)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836360' id='416123'>
<a class='timestamp' href='#416123'><time timestamp='2020-12-01T15:26:00Z'>15:26</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
but for the other something like RBF-package relay <u>_or_</u> rejecting low-fee pinning transaction might be a solution
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836360' id='416124'>
<a class='timestamp' href='#416124'><time timestamp='2020-12-01T15:26:00Z'>15:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ariard: my poijt is you&#x27;ll always be able to find more things like that
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836420' id='416125'>
<a class='timestamp' href='#416125'><time timestamp='2020-12-01T15:27:00Z'>15:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and no solution (that doesn&#x27;t introduce DOs attacks) is going to leave (possibly complicated) forms of pinning enabled
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836480' id='416126'>
<a class='timestamp' href='#416126'><time timestamp='2020-12-01T15:28:00Z'>15:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if it&#x27;s only speaking forms of pinning that pose problems to you then it&#x27;d be good to know what those are
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836480' id='416127'>
<a class='timestamp' href='#416127'><time timestamp='2020-12-01T15:28:00Z'>15:28</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
ariard: I don&#x27;t understand fully your last sentence, if you mean we&#x27;ll always have complicated cases of pinning I agree?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836480' id='416128'>
<a class='timestamp' href='#416128'><time timestamp='2020-12-01T15:28:00Z'>15:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836540' id='416129'>
<a class='timestamp' href='#416129'><time timestamp='2020-12-01T15:29:00Z'>15:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok, then we agree :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836540' id='416130'>
<a class='timestamp' href='#416130'><time timestamp='2020-12-01T15:29:00Z'>15:29</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
okay so we agree on this, what I&#x27;m more interested to solve are the easy-to-execute pinning describe as scenario 1) and 2) in my june mail
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836540' id='416131'>
<a class='timestamp' href='#416131'><time timestamp='2020-12-01T15:29:00Z'>15:29</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
All pinning is a problem. There are no specific forms of pinning that are particularly problematic I think...
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836600' id='416132'>
<a class='timestamp' href='#416132'><time timestamp='2020-12-01T15:30:00Z'>15:30</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
to mitigate more complicated scenario we had this disccusion with matt about redundant tx-relay broadcast, but that&#x27;s outside the tx-relay model
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836660' id='416133'>
<a class='timestamp' href='#416133'><time timestamp='2020-12-01T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
michaelfolkson: not all the pinning have the same level of difficulty :) I invite you to read this mail <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-June/002758.html" class="link" target="_blank">https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-June/002758.html</a> 
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836660' id='416134'>
<a class='timestamp' href='#416134'><time timestamp='2020-12-01T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
redundant as in LN would do relay?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836660' id='416135'>
<a class='timestamp' href='#416135'><time timestamp='2020-12-01T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or something else!
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836660' id='416136'>
<a class='timestamp' href='#416136'><time timestamp='2020-12-01T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836660' id='416137'>
<a class='timestamp' href='#416137'><time timestamp='2020-12-01T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-9'> cdecker</span>&gt;
Notice that the alternative transport over the lightning overlay is not intended to be a complete solution, just reduce the effectiveness of pinning by making it less likely to succeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836660' id='416138'>
<a class='timestamp' href='#416138'><time timestamp='2020-12-01T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
like some broadcast your transaction over DNS or radio :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836660' id='416139'>
<a class='timestamp' href='#416139'><time timestamp='2020-12-01T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836720' id='416140'>
<a class='timestamp' href='#416140'><time timestamp='2020-12-01T15:32:00Z'>15:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i was hoping LN, because it&#x27;s an inherently different situation than bitcoin&#x27;s identityless P2P
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836720' id='416141'>
<a class='timestamp' href='#416141'><time timestamp='2020-12-01T15:32:00Z'>15:32</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
like it&#x27;s easy to pin a LN transaction if you know the full-node, but if this victim has another entry point to the p2p network you won&#x27;t succeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836780' id='416142'>
<a class='timestamp' href='#416142'><time timestamp='2020-12-01T15:33:00Z'>15:33</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
sipa: yes, we had this discussion about embedding transaction in LN&#x27;s onion, it does fit in the standard onion size
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836780' id='416143'>
<a class='timestamp' href='#416143'><time timestamp='2020-12-01T15:33:00Z'>15:33</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
more you have redundant tx-relay network, better you&#x27;re :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836840' id='416144'>
<a class='timestamp' href='#416144'><time timestamp='2020-12-01T15:34:00Z'>15:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
better you&#x27;re what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836840' id='416145'>
<a class='timestamp' href='#416145'><time timestamp='2020-12-01T15:34:00Z'>15:34</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
harder it is for an attacker to jam with your tx-relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836840' id='416146'>
<a class='timestamp' href='#416146'><time timestamp='2020-12-01T15:34:00Z'>15:34</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
&quot;the more redundant networks you have, the better off you are&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836900' id='416147'>
<a class='timestamp' href='#416147'><time timestamp='2020-12-01T15:35:00Z'>15:35</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
cdecker: yeah and it was relying on such lighthning overlay being adopted by miners? or what was the state of the discussion :) ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836900' id='416148'>
<a class='timestamp' href='#416148'><time timestamp='2020-12-01T15:35:00Z'>15:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jnewbery: ah thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836900' id='416149'>
<a class='timestamp' href='#416149'><time timestamp='2020-12-01T15:35:00Z'>15:35</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
jnewbery: ah, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836960' id='416150'>
<a class='timestamp' href='#416150'><time timestamp='2020-12-01T15:36:00Z'>15:36</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
anyway I didn&#x27;t intend to occupy the spot, I&#x27;m working on demoing the tx-pinning LN attack we know about and learn from it 
<br>
</div>

<div class='talk op-msg' data-timestamp='1606836960' id='416151'>
<a class='timestamp' href='#416151'><time timestamp='2020-12-01T15:36:00Z'>15:36</time></a>
&lt;<span class='nick nick-9'> cdecker</span>&gt;
Yeah, I was hoping that it&#x27;d be attractive for miners to listen to the overlay since the feerate is higher (even though they don&#x27;t beat absolute fee, which is really not the miner&#x27;s main motivation)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837020' id='416152'>
<a class='timestamp' href='#416152'><time timestamp='2020-12-01T15:37:00Z'>15:37</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
that might be a way to align incentives, but still I&#x27;m not sure miners are great at maintaining an extended software stack
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837140' id='416153'>
<a class='timestamp' href='#416153'><time timestamp='2020-12-01T15:39:00Z'>15:39</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
is anyone wants to do p2p review beg ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837200' id='416154'>
<a class='timestamp' href='#416154'><time timestamp='2020-12-01T15:40:00Z'>15:40</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
What do you mean? You want to discuss the beg process?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837200' id='416155'>
<a class='timestamp' href='#416155'><time timestamp='2020-12-01T15:40:00Z'>15:40</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Or beg for particular PRs?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837200' id='416156'>
<a class='timestamp' href='#416156'><time timestamp='2020-12-01T15:40:00Z'>15:40</time></a>
&lt;<span class='nick nick-9'> cdecker</span>&gt;
If there&#x27;s interest from miners to get access I can write up a faux-bitcoin-node that acts as a bridge between bitcoin p2p and the ln overlay relay network
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837260' id='416157'>
<a class='timestamp' href='#416157'><time timestamp='2020-12-01T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
michaelfolkson: I mean p2p meetings are a nice spot for people to ask for reviews on their PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837260' id='416158'>
<a class='timestamp' href='#416158'><time timestamp='2020-12-01T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Ah ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837260' id='416159'>
<a class='timestamp' href='#416159'><time timestamp='2020-12-01T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Feel free to beg :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837260' id='416160'>
<a class='timestamp' href='#416160'><time timestamp='2020-12-01T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
any other topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837260' id='416161'>
<a class='timestamp' href='#416161'><time timestamp='2020-12-01T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gleb: want to mention the erlay bip updates?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837320' id='416162'>
<a class='timestamp' href='#416162'><time timestamp='2020-12-01T15:42:00Z'>15:42</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
Oh yeah sure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837320' id='416163'>
<a class='timestamp' href='#416163'><time timestamp='2020-12-01T15:42:00Z'>15:42</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#topic erlay bip updates
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837320' id='416164'>
<a class='timestamp' href='#416164'><time timestamp='2020-12-01T15:42:00Z'>15:42</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
topic: erlay bip updates
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837320' id='416165'>
<a class='timestamp' href='#416165'><time timestamp='2020-12-01T15:42:00Z'>15:42</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
So sometimes reconciliation fails initially (first sketch is insufficient, because it&#x27;s too small and allows to decode up to N differences)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837320' id='416166'>
<a class='timestamp' href='#416166'><time timestamp='2020-12-01T15:42:00Z'>15:42</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
We then don&#x27;t give up, but make one more attempt.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837380' id='416167'>
<a class='timestamp' href='#416167'><time timestamp='2020-12-01T15:43:00Z'>15:43</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
There are 2 ways to make one more attempt while *still being 100% efficient*: bisection and extension. They are independent alternatives.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837380' id='416168'>
<a class='timestamp' href='#416168'><time timestamp='2020-12-01T15:43:00Z'>15:43</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
We used to do bisection, because it allows to spend a bit less CPU cycles on computing sketches (and just a cool trick I guess)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837440' id='416169'>
<a class='timestamp' href='#416169'><time timestamp='2020-12-01T15:44:00Z'>15:44</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
In practice, the implementation turned out to be too complicated on the Bitcoin Core p2p protocol side.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837440' id='416170'>
<a class='timestamp' href='#416170'><time timestamp='2020-12-01T15:44:00Z'>15:44</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
So I switched the code to do sketch extensions instead. It&#x27;s much less code, and the code complexity is now more aligned with general Bitcoin project complexity.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837440' id='416171'>
<a class='timestamp' href='#416171'><time timestamp='2020-12-01T15:44:00Z'>15:44</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
And the fact it&#x27;s a bit more CPU expensive doesn&#x27;t matter because we expect sketches of very low capacity.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837500' id='416172'>
<a class='timestamp' href='#416172'><time timestamp='2020-12-01T15:45:00Z'>15:45</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
For more rationale see the updated BIP, lemme give you a link.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837500' id='416173'>
<a class='timestamp' href='#416173'><time timestamp='2020-12-01T15:45:00Z'>15:45</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
<a href="https://github.com/bitcoin/bips/pull/899" class="link" target="_blank">https://github.com/bitcoin/bips/pull/899</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837500' id='416174'>
<a class='timestamp' href='#416174'><time timestamp='2020-12-01T15:45:00Z'>15:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s also easier to extend to allow doing multiple tikes, if need be
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837500' id='416175'>
<a class='timestamp' href='#416175'><time timestamp='2020-12-01T15:45:00Z'>15:45</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
And it&#x27;s all in the #18261 now, fully ready for review, please review :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837500' id='416176'>
<a class='timestamp' href='#416176'><time timestamp='2020-12-01T15:45:00Z'>15:45</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18261" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18261</a> | Erlay: bandwidth-efficient transaction relay protocol by naumenkogs · Pull Request #18261 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837500' id='416177'>
<a class='timestamp' href='#416177'><time timestamp='2020-12-01T15:45:00Z'>15:45</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
I&#x27;m willing to do any help for review facilitation.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837500' id='416178'>
<a class='timestamp' href='#416178'><time timestamp='2020-12-01T15:45:00Z'>15:45</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
Including 1-1 sessions over voice chat or something with code walkthrough.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837560' id='416179'>
<a class='timestamp' href='#416179'><time timestamp='2020-12-01T15:46:00Z'>15:46</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gleb: sounds good, i will take a look
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837560' id='416180'>
<a class='timestamp' href='#416180'><time timestamp='2020-12-01T15:46:00Z'>15:46</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sipa: I assume you mean &#x27;multiple times&#x27;. Why would you want to do that? Is that part of the erlay BIP?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837620' id='416181'>
<a class='timestamp' href='#416181'><time timestamp='2020-12-01T15:47:00Z'>15:47</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
I don&#x27;t really see why we&#x27;d need more than 1 extra round for now, especially with our transaction volumes and block size :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837620' id='416182'>
<a class='timestamp' href='#416182'><time timestamp='2020-12-01T15:47:00Z'>15:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jnewbery: no it&#x27;s not; the current bip allows for extending exactly once
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837620' id='416183'>
<a class='timestamp' href='#416183'><time timestamp='2020-12-01T15:47:00Z'>15:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but if we ever determine that doing it multiple times is beneficial, that&#x27;d be a trivial change for extending
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837620' id='416184'>
<a class='timestamp' href='#416184'><time timestamp='2020-12-01T15:47:00Z'>15:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but not simple at all for bisection
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837680' id='416185'>
<a class='timestamp' href='#416185'><time timestamp='2020-12-01T15:48:00Z'>15:48</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sipa: makes sense. Thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837740' id='416186'>
<a class='timestamp' href='#416186'><time timestamp='2020-12-01T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
any final topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837740' id='416187'>
<a class='timestamp' href='#416187'><time timestamp='2020-12-01T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
Thanks all!
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837740' id='416188'>
<a class='timestamp' href='#416188'><time timestamp='2020-12-01T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#endmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837740' id='416189'>
<a class='timestamp' href='#416189'><time timestamp='2020-12-01T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
topic: Bitcoin Core development discussion and commit log | Feel free to watch, but please take commentary and usage questions to #bitcoin | Channel logs: <a href="http://www.erisian.com.au/bitcoin-core-dev/" class="link" target="_blank">http://www.erisian.com.au/bitcoin-core-dev/</a>, <a href="http://gnusha.org/bitcoin-core-dev/" class="link" target="_blank">http://gnusha.org/bitcoin-core-dev/</a> | Meeting topics <a href="http://gnusha.org/bitcoin-core-dev/proposedmeetingtopics.txt" class="link" target="_blank">http://gnusha.org/bitcoin-core-dev/proposedmeetingtopics.txt</a> / <a href="http://gnusha.org/bitcoin-core-dev/proposedwalletmeetingtopics.txt" class="link" target="_blank">http://gnusha.org/bitcoin-core-dev/proposedwalletmeetingtopics.txt</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837740' id='416190'>
<a class='timestamp' href='#416190'><time timestamp='2020-12-01T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
Meeting ended Tue Dec  1 15:49:39 2020 UTC.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1606837740' id='416191'>
<a class='timestamp' href='#416191'><time timestamp='2020-12-01T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
Minutes:        <a href="https://bitcoin.jonasschnelli.ch/ircmeetings/logs/bitcoin-core-dev/2020/bitcoin-core-dev.2020-12-01-15.00.moin.txt" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/ircmeetings/logs/bitcoin-core-dev/2020/bitcoin-core-dev.2020-12-01-15.00.moin.txt</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606838520' id='416192'>
<a class='timestamp' href='#416192'><time timestamp='2020-12-01T16:02:00Z'>16:02</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: if you&#x27;re still around, I have a question about addrv2 support negotiation. There seems to be a discrepency between the bip and the implementation in Bitcoin Core
<br>
</div>

<div class='talk op-msg' data-timestamp='1606838520' id='416193'>
<a class='timestamp' href='#416193'><time timestamp='2020-12-01T16:02:00Z'>16:02</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606838520' id='416194'>
<a class='timestamp' href='#416194'><time timestamp='2020-12-01T16:02:00Z'>16:02</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
in BIP 155, it says &quot;sendaddrv2 SHOULD be sent after receiving the verack message from the peer&quot;: <a href="https://github.com/bitcoin/bips/blob/7e3284dafda168da34888977dbf4a55519b0c54d/bip-0155.mediawiki#L137" class="link" target="_blank">https://github.com/bitcoin/bips/blob/7e3284dafda168da34888977dbf4a55519b0c54d/bip-0155.mediawiki#L137</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606838580' id='416195'>
<a class='timestamp' href='#416195'><time timestamp='2020-12-01T16:03:00Z'>16:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
&quot;if the documentation and the code disagree, then both are probably wrong&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1606838580' id='416196'>
<a class='timestamp' href='#416196'><time timestamp='2020-12-01T16:03:00Z'>16:03</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
in the implementation, we send it on receiving the version message: <a href="https://github.com/bitcoin/bitcoin/blob/f17e8ba3a17b6516a1b1fb7f45d506a339e99f90/src/net_processing.cpp#L2368" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/f17e8ba3a17b6516a1b1fb7f45d506a339e99f90/src/net_processing.cpp#L2368</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606838580' id='416197'>
<a class='timestamp' href='#416197'><time timestamp='2020-12-01T16:03:00Z'>16:03</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
(which may be before the peer has sent verack)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606838640' id='416198'>
<a class='timestamp' href='#416198'><time timestamp='2020-12-01T16:04:00Z'>16:04</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I think ideally, it&#x27;d be sent between version and verack, like the wtxidrelay message
<br>
</div>

<div class='talk op-msg' data-timestamp='1606838760' id='416199'>
<a class='timestamp' href='#416199'><time timestamp='2020-12-01T16:06:00Z'>16:06</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1606838760' id='416200'>
<a class='timestamp' href='#416200'><time timestamp='2020-12-01T16:06:00Z'>16:06</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
they seem to disagree indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1606838940' id='416201'>
<a class='timestamp' href='#416201'><time timestamp='2020-12-01T16:09:00Z'>16:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
that reminds me - i noticed that we send &quot;sendaddrv2&quot; messages to block-relay-only peers.  is that intentional or desirable?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839060' id='416202'>
<a class='timestamp' href='#416202'><time timestamp='2020-12-01T16:11:00Z'>16:11</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
for the implementation it does not matter when sendaddrv2 is sent and received, but I think there were considerations that no messages should be sent before sending verack (and WTXIDRELAY is somehow an exception to this)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839120' id='416203'>
<a class='timestamp' href='#416203'><time timestamp='2020-12-01T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jnewbery: hmm, so really we have in practice two different styles of negotiation (after sending version, and after sending verack), and the bip actually suggests a third (after receiving verack)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839120' id='416204'>
<a class='timestamp' href='#416204'><time timestamp='2020-12-01T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
and since it is not necessary to send sendaddrv2 before sending verack I chose to send it after (don&#x27;t add to the exception of WTXIDRELAY)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839120' id='416205'>
<a class='timestamp' href='#416205'><time timestamp='2020-12-01T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
if we tie addrv2 to the same p2p version as wtxidrelay (70016) we can change it to send between version and verack
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839180' id='416206'>
<a class='timestamp' href='#416206'><time timestamp='2020-12-01T16:13:00Z'>16:13</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
sdaftuar: it is not intentional
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839180' id='416207'>
<a class='timestamp' href='#416207'><time timestamp='2020-12-01T16:13:00Z'>16:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, for addrv2 it doesn&#x27;t matter
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839180' id='416208'>
<a class='timestamp' href='#416208'><time timestamp='2020-12-01T16:13:00Z'>16:13</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sdaftuar: we could skip sending the message to block-relay-only peers, but I don&#x27;t think it does any harm to send it
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839240' id='416209'>
<a class='timestamp' href='#416209'><time timestamp='2020-12-01T16:14:00Z'>16:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jnewbery, sdaftuar: agree; it seems pointless but harmless
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839240' id='416210'>
<a class='timestamp' href='#416210'><time timestamp='2020-12-01T16:14:00Z'>16:14</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i guess the ship has sailed on adding a flag to that message to indicate whether we participate in addr relay?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839240' id='416211'>
<a class='timestamp' href='#416211'><time timestamp='2020-12-01T16:14:00Z'>16:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839300' id='416212'>
<a class='timestamp' href='#416212'><time timestamp='2020-12-01T16:15:00Z'>16:15</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
there are other pointless-but-harmless messages during negotiation. We&#x27;ll send wtxidrelay and sendaddrv2 to feeler connections before immediately disconnecting
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839300' id='416213'>
<a class='timestamp' href='#416213'><time timestamp='2020-12-01T16:15:00Z'>16:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m happy we got bip154 in 0.21, but this isn&#x27;t the time to change it anymore...
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839300' id='416214'>
<a class='timestamp' href='#416214'><time timestamp='2020-12-01T16:15:00Z'>16:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*bip155
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839360' id='416215'>
<a class='timestamp' href='#416215'><time timestamp='2020-12-01T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i&#x27;m just trying to figure out what to do with my block-relay-only peer negotiation proposal
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839360' id='416216'>
<a class='timestamp' href='#416216'><time timestamp='2020-12-01T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
previously i had thoguht about requiring that turning on block-relay-only would turn off addr-relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839360' id='416217'>
<a class='timestamp' href='#416217'><time timestamp='2020-12-01T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
maybe bip155 should be corrected: &quot;sendaddrv2 SHOULD be sent after receiving the verack message&quot; s/receiving/sending/
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839360' id='416218'>
<a class='timestamp' href='#416218'><time timestamp='2020-12-01T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but it seemed overly prescriptive in some ways, and addr-relay should perhaps be negotiated separately
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839360' id='416219'>
<a class='timestamp' href='#416219'><time timestamp='2020-12-01T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but if we
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839420' id='416220'>
<a class='timestamp' href='#416220'><time timestamp='2020-12-01T16:17:00Z'>16:17</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but if we&#x27;re giving up on addr-relay changes now, then perhaps i&#x27;ll go back to my initial proposal
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839420' id='416221'>
<a class='timestamp' href='#416221'><time timestamp='2020-12-01T16:17:00Z'>16:17</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sdaftuar: is there any benefit in turning off addr relay? We can just ignore any addr messages we get from that peer
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839420' id='416222'>
<a class='timestamp' href='#416222'><time timestamp='2020-12-01T16:17:00Z'>16:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
vasild: i think that&#x27;s the simplest fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839480' id='416223'>
<a class='timestamp' href='#416223'><time timestamp='2020-12-01T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think it would helpful for the peer to know it shouldn&#x27;t relay addresses to us because we&#x27;re a black hole
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839480' id='416224'>
<a class='timestamp' href='#416224'><time timestamp='2020-12-01T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so that it can relay addrs to other peers instead
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839480' id='416225'>
<a class='timestamp' href='#416225'><time timestamp='2020-12-01T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
we already send addrs to light clients, which are addr relay black holes, I think
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839480' id='416226'>
<a class='timestamp' href='#416226'><time timestamp='2020-12-01T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
seems a shame that &quot;honest&quot; behavior results in somewhat worse addr propagation
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839480' id='416227'>
<a class='timestamp' href='#416227'><time timestamp='2020-12-01T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think that should be fixed or improved as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839480' id='416228'>
<a class='timestamp' href='#416228'><time timestamp='2020-12-01T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
sdaftuar: I think &quot;I participate in addr relay&quot; and &quot;I maintain a usable/complete addr database&quot; should be negotiated/announced separately from sendaddrv2 (I support addrv2 format), even if we could change sendaddrv2 now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839540' id='416229'>
<a class='timestamp' href='#416229'><time timestamp='2020-12-01T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
vasild: worth adding a new p2p message for it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839540' id='416230'>
<a class='timestamp' href='#416230'><time timestamp='2020-12-01T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
we could go that route as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839540' id='416231'>
<a class='timestamp' href='#416231'><time timestamp='2020-12-01T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i just was afraid that adding more p2p messages seems to raise complaints about the protocol being confusing or redundant
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839540' id='416232'>
<a class='timestamp' href='#416232'><time timestamp='2020-12-01T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
though it&#x27;s free
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839540' id='416233'>
<a class='timestamp' href='#416233'><time timestamp='2020-12-01T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: your suggested change to BIP155 isn&#x27;t what Bitcoin Core is doing. It sends the message after receiving a version message
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839540' id='416234'>
<a class='timestamp' href='#416234'><time timestamp='2020-12-01T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jnewbery: and after sending the verack, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839600' id='416235'>
<a class='timestamp' href='#416235'><time timestamp='2020-12-01T16:20:00Z'>16:20</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sipa: ah yes, you&#x27;re right.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839600' id='416236'>
<a class='timestamp' href='#416236'><time timestamp='2020-12-01T16:20:00Z'>16:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: how do you suggest dealing with spv clients being black holes?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839600' id='416237'>
<a class='timestamp' href='#416237'><time timestamp='2020-12-01T16:20:00Z'>16:20</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
do we really want to allow peers to switch from addrv1 to addrv2 at any point?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839660' id='416238'>
<a class='timestamp' href='#416238'><time timestamp='2020-12-01T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
sdaftuar: what about introducing one generic message for announcing capabilities, like &quot;I can do X, Y, Z&quot;. That idea was shot last time I mentioned it, IIRC...
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839660' id='416239'>
<a class='timestamp' href='#416239'><time timestamp='2020-12-01T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jnewbery: we already do, i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839660' id='416240'>
<a class='timestamp' href='#416240'><time timestamp='2020-12-01T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
jnewbery: is there any problem with peers switching from addrv1 to addrv2?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839720' id='416241'>
<a class='timestamp' href='#416241'><time timestamp='2020-12-01T16:22:00Z'>16:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jnewbery: addrv2 negotiation is really simple, it&#x27;s just a message indicating &quot;you&#x27;re as of now allowed to send me addrv2 instead of addrv1&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839720' id='416242'>
<a class='timestamp' href='#416242'><time timestamp='2020-12-01T16:22:00Z'>16:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: my first thought was that if we allowed peers to opt-in (or out) of addr-relay, then we should just treat spv clients as honest network participants
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839720' id='416243'>
<a class='timestamp' href='#416243'><time timestamp='2020-12-01T16:22:00Z'>16:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: which means?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839780' id='416244'>
<a class='timestamp' href='#416244'><time timestamp='2020-12-01T16:23:00Z'>16:23</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if they want to participate in addr-relay, they can; the problem becomes one of software being broken for not implementing a negotiation feature if they don&#x27;t relay addresses but indicate that they do
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839840' id='416245'>
<a class='timestamp' href='#416245'><time timestamp='2020-12-01T16:24:00Z'>16:24</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
which we can&#x27;t control anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839840' id='416246'>
<a class='timestamp' href='#416246'><time timestamp='2020-12-01T16:24:00Z'>16:24</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
the problem in my view is that honest software has no way to communicate not to send addr messages because they will get dropped
<br>
</div>

<div class='talk op-msg' data-timestamp='1606839960' id='416247'>
<a class='timestamp' href='#416247'><time timestamp='2020-12-01T16:26:00Z'>16:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: i guess my question is: with this new addr relay negotiation... do you make it &quot;addr relay is by default on for NODE_NETWORK(_LIMITED) peers, off otherwise&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840020' id='416248'>
<a class='timestamp' href='#416248'><time timestamp='2020-12-01T16:27:00Z'>16:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or something like that, so that old spv software is set off by default
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840020' id='416249'>
<a class='timestamp' href='#416249'><time timestamp='2020-12-01T16:27:00Z'>16:27</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
It just seems easier to think about if we don&#x27;t need to worry about addrv2 support changing during a peer&#x27;s lifetime. I&#x27;ve had a quick skim of the code and agree that it&#x27;s simple, but still think that the ability to effectively renegotiate addrv2 support is an unnecessary complexity.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840020' id='416250'>
<a class='timestamp' href='#416250'><time timestamp='2020-12-01T16:27:00Z'>16:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jnewbery: i agree, but i also think it&#x27;s a cost we&#x27;ve already paid effectively
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840020' id='416251'>
<a class='timestamp' href='#416251'><time timestamp='2020-12-01T16:27:00Z'>16:27</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
jnewbery: it only goes in one direction right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840080' id='416252'>
<a class='timestamp' href='#416252'><time timestamp='2020-12-01T16:28:00Z'>16:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it works
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840080' id='416253'>
<a class='timestamp' href='#416253'><time timestamp='2020-12-01T16:28:00Z'>16:28</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
put another way: if we weren&#x27;t currently able to renegotiate from addrv1 to addrv2 during a peer&#x27;s lifetime, and I proposed that we added that as a feature, I think the suggestion would be NACKed immediately
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840080' id='416254'>
<a class='timestamp' href='#416254'><time timestamp='2020-12-01T16:28:00Z'>16:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840080' id='416255'>
<a class='timestamp' href='#416255'><time timestamp='2020-12-01T16:28:00Z'>16:28</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
jnewbery: only because unnecessary changes are, well, unnecessary :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840080' id='416256'>
<a class='timestamp' href='#416256'><time timestamp='2020-12-01T16:28:00Z'>16:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but the same may be true in the other direction :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840140' id='416257'>
<a class='timestamp' href='#416257'><time timestamp='2020-12-01T16:29:00Z'>16:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
making it impossible to renegotiate would need more code, not less
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840140' id='416258'>
<a class='timestamp' href='#416258'><time timestamp='2020-12-01T16:29:00Z'>16:29</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sipa: code complexity isn&#x27;t a one-off cost. It&#x27;s an ongoing burden for all current and future contributors
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840140' id='416259'>
<a class='timestamp' href='#416259'><time timestamp='2020-12-01T16:29:00Z'>16:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jnewbery: of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840140' id='416260'>
<a class='timestamp' href='#416260'><time timestamp='2020-12-01T16:29:00Z'>16:29</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sipa: no it wouldn&#x27;t. The spec would say: &quot;send sendaddrv2 between version and verack&quot;. Receiving the message at any other time would be ignored
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840200' id='416261'>
<a class='timestamp' href='#416261'><time timestamp='2020-12-01T16:30:00Z'>16:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jnewbery: and right now, it doesn&#x27;t need code ro decide whether to ignore it or not
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840200' id='416262'>
<a class='timestamp' href='#416262'><time timestamp='2020-12-01T16:30:00Z'>16:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s all trivial changes of course, but i don&#x27;t think it&#x27;s clear cut that one alternative is obviously simpler than the other
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840260' id='416263'>
<a class='timestamp' href='#416263'><time timestamp='2020-12-01T16:31:00Z'>16:31</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sipa: yes, the burden is placed on the developer to audit whether it&#x27;s safe to make that transition during the peer&#x27;s lifetime, instead of it just being const
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840260' id='416264'>
<a class='timestamp' href='#416264'><time timestamp='2020-12-01T16:31:00Z'>16:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you might have a point if <b>*all*</b> negotiation were between version and verack, but that&#x27;s already not the case and won&#x27;t be
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840320' id='416265'>
<a class='timestamp' href='#416265'><time timestamp='2020-12-01T16:32:00Z'>16:32</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
and the burden is also placed on any future developer who makes changes to the way addr relay works, to be aware that addrv2 support can change at any point
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840320' id='416266'>
<a class='timestamp' href='#416266'><time timestamp='2020-12-01T16:32:00Z'>16:32</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: i think defaulting addr relay to off for non-NODE_NETWORK(_LIMITED) peers would be fine. (or eventually make that the default to give spv client authors sufficient warning, inc ase it&#x27;s a surprise)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840440' id='416267'>
<a class='timestamp' href='#416267'><time timestamp='2020-12-01T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jnewbery: i agree that&#x27;s something to keep in mind... but is that really worth changing the code (and spec) for, given that there are several other things that behave in exactly the same way already?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840500' id='416268'>
<a class='timestamp' href='#416268'><time timestamp='2020-12-01T16:35:00Z'>16:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as opposed to say, add a code comment to clarify addrv2 status can change af any point
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840500' id='416269'>
<a class='timestamp' href='#416269'><time timestamp='2020-12-01T16:35:00Z'>16:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(and sendheaders, and filter status, and ...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840560' id='416270'>
<a class='timestamp' href='#416270'><time timestamp='2020-12-01T16:36:00Z'>16:36</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
&quot;send sendaddrv2 between version and verack&quot; --&gt; &quot;send sendaddrv2 between sending version and sending verack&quot; or &quot;send sendaddrv2 between receiving version and receiving verack&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840560' id='416271'>
<a class='timestamp' href='#416271'><time timestamp='2020-12-01T16:36:00Z'>16:36</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sipa: one or both have to change anyway, and we now know the right way to negotiate features, so if there&#x27;s another rc, I think we should take advantage of that
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840560' id='416272'>
<a class='timestamp' href='#416272'><time timestamp='2020-12-01T16:36:00Z'>16:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i strongly disagree
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840620' id='416273'>
<a class='timestamp' href='#416273'><time timestamp='2020-12-01T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there is no bug here
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840620' id='416274'>
<a class='timestamp' href='#416274'><time timestamp='2020-12-01T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the time for something like this has passed
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840620' id='416275'>
<a class='timestamp' href='#416275'><time timestamp='2020-12-01T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: &quot;send addrv2 between sending version and sending verack&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840620' id='416276'>
<a class='timestamp' href='#416276'><time timestamp='2020-12-01T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
there&#x27;s either a bug in the spec or the implementation
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840680' id='416277'>
<a class='timestamp' href='#416277'><time timestamp='2020-12-01T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hmm, right
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840680' id='416278'>
<a class='timestamp' href='#416278'><time timestamp='2020-12-01T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s fair
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840680' id='416279'>
<a class='timestamp' href='#416279'><time timestamp='2020-12-01T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i was treating it as a typo in the spec, and assuked it was intended to mimick the existing feature negotiations
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840740' id='416280'>
<a class='timestamp' href='#416280'><time timestamp='2020-12-01T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and i think because of that, the spec makes no sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840740' id='416281'>
<a class='timestamp' href='#416281'><time timestamp='2020-12-01T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but you could see it differently
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840740' id='416282'>
<a class='timestamp' href='#416282'><time timestamp='2020-12-01T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
to me it looks like a bug/typo in the spec and should s/receiving/sending/
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840740' id='416283'>
<a class='timestamp' href='#416283'><time timestamp='2020-12-01T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah, exactly
<br>
</div>

<div class='talk op-msg' data-timestamp='1606840980' id='416284'>
<a class='timestamp' href='#416284'><time timestamp='2020-12-01T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I don&#x27;t think it&#x27;s worth making an rc for this
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841040' id='416285'>
<a class='timestamp' href='#416285'><time timestamp='2020-12-01T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841040' id='416286'>
<a class='timestamp' href='#416286'><time timestamp='2020-12-01T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think the simplest solution is fixing the spec
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841040' id='416287'>
<a class='timestamp' href='#416287'><time timestamp='2020-12-01T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I think my preferred change to the spec would be to s/after receiving the verack/after receiving the version/. That means that at least we can send our message between version and verack.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841100' id='416288'>
<a class='timestamp' href='#416288'><time timestamp='2020-12-01T16:45:00Z'>16:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(not because it mismatches the implementation, but because it appears unintentional)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841100' id='416289'>
<a class='timestamp' href='#416289'><time timestamp='2020-12-01T16:45:00Z'>16:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
does the current 0.21rc code work correctly if it receives addrv2 before verack?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841160' id='416290'>
<a class='timestamp' href='#416290'><time timestamp='2020-12-01T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
Oh, no we can&#x27;t because we&#x27;ll only process a sendaddrv2 after receiving a verack.
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841160' id='416291'>
<a class='timestamp' href='#416291'><time timestamp='2020-12-01T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sipa: snap
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841160' id='416292'>
<a class='timestamp' href='#416292'><time timestamp='2020-12-01T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
&quot;does the current 0.21rc code work correctly if it receives addrv2 before verack?&quot; -- yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841160' id='416293'>
<a class='timestamp' href='#416293'><time timestamp='2020-12-01T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: no, we&#x27;ll drop the message if we receive it before verack
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841220' id='416294'>
<a class='timestamp' href='#416294'><time timestamp='2020-12-01T16:47:00Z'>16:47</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/blob/f17e8ba3a17b6516a1b1fb7f45d506a339e99f90/src/net_processing.cpp#L2538-L2541" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/f17e8ba3a17b6516a1b1fb7f45d506a339e99f90/src/net_processing.cpp#L2538-L2541</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841220' id='416295'>
<a class='timestamp' href='#416295'><time timestamp='2020-12-01T16:47:00Z'>16:47</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
It&#x27;d be nice if we could consolidate all these feature negotiation messages to one place, but that seems impossible at this point
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841220' id='416296'>
<a class='timestamp' href='#416296'><time timestamp='2020-12-01T16:47:00Z'>16:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, i should perhaps hage brought this up during the meeting: should torv3 anchors work in 0.21?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841280' id='416297'>
<a class='timestamp' href='#416297'><time timestamp='2020-12-01T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
do we consider that a missing feature or a bug?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841280' id='416298'>
<a class='timestamp' href='#416298'><time timestamp='2020-12-01T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: right, sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841280' id='416299'>
<a class='timestamp' href='#416299'><time timestamp='2020-12-01T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sipa: I&#x27;d say missing feature
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841340' id='416300'>
<a class='timestamp' href='#416300'><time timestamp='2020-12-01T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jnewbery: i&#x27;m beginning to lean in that direction too, and it seems hebasto agrees as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841340' id='416301'>
<a class='timestamp' href='#416301'><time timestamp='2020-12-01T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
we didn&#x27;t have either before v0.21, so people aren&#x27;t depending on them working together
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841340' id='416302'>
<a class='timestamp' href='#416302'><time timestamp='2020-12-01T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah, and they&#x27;re mostly an unobservable feature anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841340' id='416303'>
<a class='timestamp' href='#416303'><time timestamp='2020-12-01T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
seems like a good thing to &quot;fix&quot; in 0.21.1
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841400' id='416304'>
<a class='timestamp' href='#416304'><time timestamp='2020-12-01T16:50:00Z'>16:50</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
(torv3 anchors)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841460' id='416305'>
<a class='timestamp' href='#416305'><time timestamp='2020-12-01T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
vasild: saw #20516?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841460' id='416306'>
<a class='timestamp' href='#416306'><time timestamp='2020-12-01T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/20516" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/20516</a> | Well-defined CAddress disk serialization, and addrv2 anchors.dat by sipa · Pull Request #20516 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841460' id='416307'>
<a class='timestamp' href='#416307'><time timestamp='2020-12-01T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
sipa: yes, but did not dive in it yet in order to comment
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841460' id='416308'>
<a class='timestamp' href='#416308'><time timestamp='2020-12-01T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sure, no rush
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841460' id='416309'>
<a class='timestamp' href='#416309'><time timestamp='2020-12-01T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
I did not get it why did you close the other small pr
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841520' id='416310'>
<a class='timestamp' href='#416310'><time timestamp='2020-12-01T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
vasild: it was intended as a quick fix for 0.21
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841520' id='416311'>
<a class='timestamp' href='#416311'><time timestamp='2020-12-01T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
it would get torv3 anchors
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841520' id='416312'>
<a class='timestamp' href='#416312'><time timestamp='2020-12-01T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not as-is, it needed your patch or 20516 as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841520' id='416313'>
<a class='timestamp' href='#416313'><time timestamp='2020-12-01T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
yes, + the patch I posted in the comments
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841580' id='416314'>
<a class='timestamp' href='#416314'><time timestamp='2020-12-01T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
would the small pr + my patch in the comments cause any trouble for 20516? I think no
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841580' id='416315'>
<a class='timestamp' href='#416315'><time timestamp='2020-12-01T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
201516 does exactly the same thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841580' id='416316'>
<a class='timestamp' href='#416316'><time timestamp='2020-12-01T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just cleaner
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841580' id='416317'>
<a class='timestamp' href='#416317'><time timestamp='2020-12-01T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(imo)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841640' id='416318'>
<a class='timestamp' href='#416318'><time timestamp='2020-12-01T16:54:00Z'>16:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but it&#x27;s not something i feel is worth it for 0.21 anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841640' id='416319'>
<a class='timestamp' href='#416319'><time timestamp='2020-12-01T16:54:00Z'>16:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so i&#x27;d rather do it properly instead in 0.21.1 or 22
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841640' id='416320'>
<a class='timestamp' href='#416320'><time timestamp='2020-12-01T16:54:00Z'>16:54</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841700' id='416321'>
<a class='timestamp' href='#416321'><time timestamp='2020-12-01T16:55:00Z'>16:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
20516 makes it also fail deserialization if the on-disk version is unexpected, and adds more tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841760' id='416322'>
<a class='timestamp' href='#416322'><time timestamp='2020-12-01T16:56:00Z'>16:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(i wrote that before you commemted with your patch, otherwise i&#x27;d have based it on yours)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841880' id='416323'>
<a class='timestamp' href='#416323'><time timestamp='2020-12-01T16:58:00Z'>16:58</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
aha, since you mention &quot;fail deserialization&quot;...
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841940' id='416324'>
<a class='timestamp' href='#416324'><time timestamp='2020-12-01T16:59:00Z'>16:59</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
should we compare the stream version with ondisk version in CAddress deserialization
<br>
</div>

<div class='talk op-msg' data-timestamp='1606841940' id='416325'>
<a class='timestamp' href='#416325'><time timestamp='2020-12-01T16:59:00Z'>16:59</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
and if one has ADDRV2_FORMAT set but the other does not then throw?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842000' id='416326'>
<a class='timestamp' href='#416326'><time timestamp='2020-12-01T17:00:00Z'>17:00</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
is this what you mean by &quot;unexpected&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842000' id='416327'>
<a class='timestamp' href='#416327'><time timestamp='2020-12-01T17:00:00Z'>17:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;ll break anchors
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842000' id='416328'>
<a class='timestamp' href='#416328'><time timestamp='2020-12-01T17:00:00Z'>17:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
once v2 is used for those, but an old anchors.dar is read
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842000' id='416329'>
<a class='timestamp' href='#416329'><time timestamp='2020-12-01T17:00:00Z'>17:00</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
oh, right
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842060' id='416330'>
<a class='timestamp' href='#416330'><time timestamp='2020-12-01T17:01:00Z'>17:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the semantics in 20516 is that the ADDRV2_FORMAT in the stream version enables/disables the use of addrv2 in the disk version
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842060' id='416331'>
<a class='timestamp' href='#416331'><time timestamp='2020-12-01T17:01:00Z'>17:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so you get an error if it is set in the disk version, but not in the stream version, on deserialize
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842060' id='416332'>
<a class='timestamp' href='#416332'><time timestamp='2020-12-01T17:01:00Z'>17:01</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
during serialization?
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842120' id='416333'>
<a class='timestamp' href='#416333'><time timestamp='2020-12-01T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but the other direction works
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842120' id='416334'>
<a class='timestamp' href='#416334'><time timestamp='2020-12-01T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
I see
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842180' id='416335'>
<a class='timestamp' href='#416335'><time timestamp='2020-12-01T17:03:00Z'>17:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i have a follow-up (the serializarion parameter stuff) that just splits all the different serialization types out, and removes ADDRV2_FORMAT from stream versions (but it remains inside the CAddress disk serializer)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842420' id='416336'>
<a class='timestamp' href='#416336'><time timestamp='2020-12-01T17:07:00Z'>17:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
unfortunately, that means at least 4 versions
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842420' id='416337'>
<a class='timestamp' href='#416337'><time timestamp='2020-12-01T17:07:00Z'>17:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
DISK, NETWORK_NOTIME, NETWORK_V1, NETWORK_V2
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842480' id='416338'>
<a class='timestamp' href='#416338'><time timestamp='2020-12-01T17:08:00Z'>17:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but probably 5; so you have DISK_V1 and DISK_V1_OR_V2 (where pre-v3 addrman would set DISK_V1 which causes an error if a v2 addr on disk is in it)
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842780' id='416339'>
<a class='timestamp' href='#416339'><time timestamp='2020-12-01T17:13:00Z'>17:13</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
:-|
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842900' id='416340'>
<a class='timestamp' href='#416340'><time timestamp='2020-12-01T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hmm, maybe we should just remove the &quot;notime&quot; functionality from CAddress
<br>
</div>

<div class='talk op-msg' data-timestamp='1606842960' id='416341'>
<a class='timestamp' href='#416341'><time timestamp='2020-12-01T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and just invoke it as serializing nServices and CService spearately
<br>
</div>

<div class='talk op-msg' data-timestamp='1606849500' id='416342'>
<a class='timestamp' href='#416342'><time timestamp='2020-12-01T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa opened pull request #20541: Move special CAddress-without-nTime logic to net_processing (master...202012_addr_without_time_is_no_addr) <a href="https://github.com/bitcoin/bitcoin/pull/20541" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20541</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1606849500' id='416343'>
<a class='timestamp' href='#416343'><time timestamp='2020-12-01T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
vasild: ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1606864200' id='416344'>
<a class='timestamp' href='#416344'><time timestamp='2020-12-01T23:10:00Z'>23:10</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
quick question, does it makes sense to limit cookie auth to loopback? anyone using it in other ways?
<br>
</div>

</div>
</section>

</body>
</html>
