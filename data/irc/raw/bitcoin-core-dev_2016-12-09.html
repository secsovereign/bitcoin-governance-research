<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2016-12-09
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2016-12-09' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:25 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-11-09">&lt;</a><span class='header'>  December 2016   </span><a href="/bitcoin-core-dev/2017-01-09">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;             <a class="" href="/bitcoin-core-dev/2016-12-01">1</a>  <a class="" href="/bitcoin-core-dev/2016-12-02">2</a>  <a class="" href="/bitcoin-core-dev/2016-12-03">3</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-12-04">4</a>  <a class="" href="/bitcoin-core-dev/2016-12-05">5</a>  <a class="" href="/bitcoin-core-dev/2016-12-06">6</a>  <a class="" href="/bitcoin-core-dev/2016-12-07">7</a>  <a class="" href="/bitcoin-core-dev/2016-12-08">8</a>  <a class="current" href="/bitcoin-core-dev/2016-12-09">9</a> <a class="" href="/bitcoin-core-dev/2016-12-10">10</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-12-11">11</a> <a class="" href="/bitcoin-core-dev/2016-12-12">12</a> <a class="" href="/bitcoin-core-dev/2016-12-13">13</a> <a class="" href="/bitcoin-core-dev/2016-12-14">14</a> <a class="" href="/bitcoin-core-dev/2016-12-15">15</a> <a class="" href="/bitcoin-core-dev/2016-12-16">16</a> <a class="" href="/bitcoin-core-dev/2016-12-17">17</a>  &#x000A;18 <a class="" href="/bitcoin-core-dev/2016-12-19">19</a> <a class="" href="/bitcoin-core-dev/2016-12-20">20</a> <a class="" href="/bitcoin-core-dev/2016-12-21">21</a> <a class="" href="/bitcoin-core-dev/2016-12-22">22</a> <a class="" href="/bitcoin-core-dev/2016-12-23">23</a> <a class="" href="/bitcoin-core-dev/2016-12-24">24</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-12-25">25</a> <a class="" href="/bitcoin-core-dev/2016-12-26">26</a> <a class="" href="/bitcoin-core-dev/2016-12-27">27</a> <a class="" href="/bitcoin-core-dev/2016-12-28">28</a> <a class="" href="/bitcoin-core-dev/2016-12-29">29</a> <a class="" href="/bitcoin-core-dev/2016-12-30">30</a> <a class="" href="/bitcoin-core-dev/2016-12-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1481242020' id='517166'>
<a class='timestamp' href='#517166'><time timestamp='2016-12-09T00:07:00Z'>00:07</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
I had a repeat of my node stalling when trying to sync a couple of days ago. Recent version of Ubuntu, 13.1, and basically nothing else on the machine. It was about 6 days behind, and promptly caught up to about 40 hours remaining.  Then it just stopped. CPU was idle, only relaying traffic was seemingly being passed. After about 10 minutes I restarted the node, and syncing was completed within just a coup
<br>
</div>

<div class='talk op-msg' data-timestamp='1481242020' id='517167'>
<a class='timestamp' href='#517167'><time timestamp='2016-12-09T00:07:00Z'>00:07</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
le minutes of he restart.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481242140' id='517168'>
<a class='timestamp' href='#517168'><time timestamp='2016-12-09T00:09:00Z'>00:09</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
I did try booting peers, but that didn&#x27;t help anything.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481242140' id='517169'>
<a class='timestamp' href='#517169'><time timestamp='2016-12-09T00:09:00Z'>00:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
this is a known issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1481242140' id='517170'>
<a class='timestamp' href='#517170'><time timestamp='2016-12-09T00:09:00Z'>00:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it is resolved automatically if you wait for the next block
<br>
</div>

<div class='talk op-msg' data-timestamp='1481242140' id='517171'>
<a class='timestamp' href='#517171'><time timestamp='2016-12-09T00:09:00Z'>00:09</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
I&#x27;m glad it&#x27;s know :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481245800' id='517172'>
<a class='timestamp' href='#517172'><time timestamp='2016-12-09T01:10:00Z'>01:10</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa opened pull request #9303: Update comments in ctaes (master...ctaes) <a href="https://github.com/bitcoin/bitcoin/pull/9303" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9303</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481246220' id='517173'>
<a class='timestamp' href='#517173'><time timestamp='2016-12-09T01:17:00Z'>01:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
CubicEarth: it&#x27;s due to nodes (usually spy nodes) that break the protocol and don&#x27;t respond to headers requests interacting poorly with the sync logic. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1481246700' id='517174'>
<a class='timestamp' href='#517174'><time timestamp='2016-12-09T01:25:00Z'>01:25</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
I was wondering...  Seems like my node ought to be a little bit more selfish, a little bit more aggressive, in requesting the data it needs. At least I wish it was. I&#x27;m guessing what you are describing is due to the fact Core codes nodes to be good network citizens, and non-standard nodes can disrupt that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481246940' id='517175'>
<a class='timestamp' href='#517175'><time timestamp='2016-12-09T01:29:00Z'>01:29</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
Once payment channels and LN become a reality, I foresee the P2P layer integrating lots of micro-fees, charging for serving block data, for relaying TX, etc.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481247360' id='517176'>
<a class='timestamp' href='#517176'><time timestamp='2016-12-09T01:36:00Z'>01:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
CubicEarth: no, it&#x27;s not due to that, pretty much the opposite.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481247420' id='517177'>
<a class='timestamp' href='#517177'><time timestamp='2016-12-09T01:37:00Z'>01:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
if it requests redundant data, then it might knock itself off the network if otherwise it only has enough bandwidth available to only fetch one copy.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481247540' id='517178'>
<a class='timestamp' href='#517178'><time timestamp='2016-12-09T01:39:00Z'>01:39</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
So my node requests a piece of data, what happens?  A peer says &quot;yes, I have it, I&#x27;ll give it to you&quot; and then never does? And my node sites there, waiting, because if it asked another peer for data they could both end up providing it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481247720' id='517179'>
<a class='timestamp' href='#517179'><time timestamp='2016-12-09T01:42:00Z'>01:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
CubicEarth: right. It will eventually give up-- but for this particular request its triggered by a new block showing up on the network.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481247780' id='517180'>
<a class='timestamp' href='#517180'><time timestamp='2016-12-09T01:43:00Z'>01:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Smarter would be dynamic timeouts, -- the tricky thing is that care has to be taken to avoid unstable algorithins that can suffer congestion collapse. E.g. you have a limited bandwith network with 5 nodes on it... and then they fall behind and start agressively rerequesting and never recover.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481247780' id='517181'>
<a class='timestamp' href='#517181'><time timestamp='2016-12-09T01:43:00Z'>01:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It&#x27;s not <u>_that_</u> hard, but ... so many other things going on...
<br>
</div>

<div class='talk op-msg' data-timestamp='1481248200' id='517182'>
<a class='timestamp' href='#517182'><time timestamp='2016-12-09T01:50:00Z'>01:50</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
Other priorities for sure. It&#x27;s nice that it respects bandwidth limits currently.  It makes sense for it to be conservative by default, but perhaps there should / could be a setting where you tell how much bandwidth you would like it make use of, not just an &quot;upper limit&quot; for inbound connections, but &quot;please use this much to make things happen faster&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1481248260' id='517183'>
<a class='timestamp' href='#517183'><time timestamp='2016-12-09T01:51:00Z'>01:51</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
Onto the back burner...
<br>
</div>

<div class='talk op-msg' data-timestamp='1481248320' id='517184'>
<a class='timestamp' href='#517184'><time timestamp='2016-12-09T01:52:00Z'>01:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well it&#x27;s not that it respects, it just has no idea what they are, so it assumes it&#x27;s operating with very little, since thats consderative. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1481248380' id='517185'>
<a class='timestamp' href='#517185'><time timestamp='2016-12-09T01:53:00Z'>01:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
RE manual setting, I think very few users will use that correctly--  we should have settings, but they&#x27;re way less important than better default behavior. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1481248800' id='517186'>
<a class='timestamp' href='#517186'><time timestamp='2016-12-09T02:00:00Z'>02:00</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
The funny thing is the software is already &#x27;aware&#x27; in the sense that it can generate a graph of network activity, but I get that it&#x27;s probably not &#x27;hardened code&#x27;.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481248860' id='517187'>
<a class='timestamp' href='#517187'><time timestamp='2016-12-09T02:01:00Z'>02:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Past performance doesn&#x27;t indicate future results. Assuming that it does is how you get schemes that suffer congestion collapse. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1481248980' id='517188'>
<a class='timestamp' href='#517188'><time timestamp='2016-12-09T02:03:00Z'>02:03</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
gmaxwell: so a node dosent DDoS itself?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481249280' id='517189'>
<a class='timestamp' href='#517189'><time timestamp='2016-12-09T02:08:00Z'>02:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
CubicEarth: e.g. you have 5 nodes on a 1 mbit connection. They each observe 1mbit available.. but then they all try to use it at once and there will be far less than 1mbit available.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481249340' id='517190'>
<a class='timestamp' href='#517190'><time timestamp='2016-12-09T02:09:00Z'>02:09</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
got it
<br>
</div>

<div class='talk op-msg' data-timestamp='1481254740' id='517191'>
<a class='timestamp' href='#517191'><time timestamp='2016-12-09T03:39:00Z'>03:39</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] droark opened pull request #9304: Allow linearization scripts to support little endian hashes (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/9304" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9304</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481257320' id='517192'>
<a class='timestamp' href='#517192'><time timestamp='2016-12-09T04:22:00Z'>04:22</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] kallewoof opened pull request #9305: Refactor: Removed begin/end_ptr functions. (master...remove-begin-end_ptr-usage) <a href="https://github.com/bitcoin/bitcoin/pull/9305" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9305</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481275380' id='517193'>
<a class='timestamp' href='#517193'><time timestamp='2016-12-09T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/86017842d6ef...72bf1b3d0962" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/86017842d6ef...72bf1b3d0962</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481275380' id='517194'>
<a class='timestamp' href='#517194'><time timestamp='2016-12-09T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 8501bed Pieter Wuille: Squashed &#x27;src/crypto/ctaes/&#x27; changes from cd3c3ac..003a4ac...
<br>
</div>

<div class='talk op-msg' data-timestamp='1481275380' id='517195'>
<a class='timestamp' href='#517195'><time timestamp='2016-12-09T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 760765d Pieter Wuille: Update ctaes
<br>
</div>

<div class='talk op-msg' data-timestamp='1481275380' id='517196'>
<a class='timestamp' href='#517196'><time timestamp='2016-12-09T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 72bf1b3 MarcoFalke: Merge #9303: Update comments in ctaes...
<br>
</div>

<div class='talk op-msg' data-timestamp='1481275380' id='517197'>
<a class='timestamp' href='#517197'><time timestamp='2016-12-09T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #9303: Update comments in ctaes (master...ctaes) <a href="https://github.com/bitcoin/bitcoin/pull/9303" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9303</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481289780' id='517198'>
<a class='timestamp' href='#517198'><time timestamp='2016-12-09T13:23:00Z'>13:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmmmmmm....I&#x27;m pretty sure CheckForkWarningConditionsOnNewFork is completely useless atm...
<br>
</div>

<div class='talk op-msg' data-timestamp='1481289840' id='517199'>
<a class='timestamp' href='#517199'><time timestamp='2016-12-09T13:24:00Z'>13:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
it looks like it was written assuming pindexNewForkTip would be a CBlockIndex* to the highest block on a new fork (which I think is the case in the original code, and I&#x27;m not just saying it because I originally wrote it)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481289840' id='517200'>
<a class='timestamp' href='#517200'><time timestamp='2016-12-09T13:24:00Z'>13:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but in the current code its given the last block which ActivateBestChainStep wanted to connect (but failed because either it, or a previous block) was invalid
<br>
</div>

<div class='talk op-msg' data-timestamp='1481289900' id='517201'>
<a class='timestamp' href='#517201'><time timestamp='2016-12-09T13:25:00Z'>13:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and that last block is always either current chain + 1 unless its a reorg
<br>
</div>

<div class='talk op-msg' data-timestamp='1481290620' id='517202'>
<a class='timestamp' href='#517202'><time timestamp='2016-12-09T13:37:00Z'>13:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ehh, excuse me...CheckForkWarningConditionsOnNewFork is called with a larger vector which isnt exactly the things ABCS tries, but what it might&#x27;ve tried if it didnt want to give up cs_main earlier
<br>
</div>

<div class='talk op-msg' data-timestamp='1481290620' id='517203'>
<a class='timestamp' href='#517203'><time timestamp='2016-12-09T13:37:00Z'>13:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
still, i think due to headers first this stuff is horribly broken
<br>
</div>

<div class='talk op-msg' data-timestamp='1481294220' id='517204'>
<a class='timestamp' href='#517204'><time timestamp='2016-12-09T14:37:00Z'>14:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
nah it does work.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481294520' id='517205'>
<a class='timestamp' href='#517205'><time timestamp='2016-12-09T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
you sure? that code doesnt look sane to me now
<br>
</div>

<div class='talk op-msg' data-timestamp='1481294520' id='517206'>
<a class='timestamp' href='#517206'><time timestamp='2016-12-09T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(do we have any tests for it? couldnt find any)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481294580' id='517207'>
<a class='timestamp' href='#517207'><time timestamp='2016-12-09T14:43:00Z'>14:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and jl2012 was saying he tried to trigger it by sending invalid blocks with valid headers and couldnt
<br>
</div>

<div class='talk op-msg' data-timestamp='1481295120' id='517208'>
<a class='timestamp' href='#517208'><time timestamp='2016-12-09T14:52:00Z'>14:52</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
-&gt; out
<br>
</div>

<div class='talk op-msg' data-timestamp='1481296200' id='517209'>
<a class='timestamp' href='#517209'><time timestamp='2016-12-09T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ryanofsky opened pull request #9306: Make CCoinsViewCache::Cursor() return latest data (master...pr/coins-cursor) <a href="https://github.com/bitcoin/bitcoin/pull/9306" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9306</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481297580' id='517210'>
<a class='timestamp' href='#517210'><time timestamp='2016-12-09T15:33:00Z'>15:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ryanofsky opened pull request #9307: [trivial] Remove undefined FetchCoins method declaration (master...pr/coins-delfetch) <a href="https://github.com/bitcoin/bitcoin/pull/9307" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9307</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481297760' id='517211'>
<a class='timestamp' href='#517211'><time timestamp='2016-12-09T15:36:00Z'>15:36</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ryanofsky opened pull request #9308: [test] Add CCoinsViewCache Access/Modify/Write tests (master...pr/coins-test) <a href="https://github.com/bitcoin/bitcoin/pull/9308" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9308</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481298840' id='517212'>
<a class='timestamp' href='#517212'><time timestamp='2016-12-09T15:54:00Z'>15:54</time></a>
&lt;<span class='nick nick-11'> Teroxice</span>&gt;
Hello
<br>
</div>

<div class='talk op-msg' data-timestamp='1481298840' id='517213'>
<a class='timestamp' href='#517213'><time timestamp='2016-12-09T15:54:00Z'>15:54</time></a>
&lt;<span class='nick nick-11'> Teroxice</span>&gt;
I build an ATM software and right now its sending money from a centralized bitcore server with just one wallet.  I will offer my software to the market but I would like that every client has their own independent wallet in my centralized bitcore server.  That is why I&#x27;m asking if it is posible to have more than one wallet on the same bitcore server.  Anyone knows?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481298900' id='517214'>
<a class='timestamp' href='#517214'><time timestamp='2016-12-09T15:55:00Z'>15:55</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
Teroxice: bitcore or bitcoin core? There is a difference.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481298900' id='517215'>
<a class='timestamp' href='#517215'><time timestamp='2016-12-09T15:55:00Z'>15:55</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
also, wrong channel
<br>
</div>

<div class='talk op-msg' data-timestamp='1481298900' id='517216'>
<a class='timestamp' href='#517216'><time timestamp='2016-12-09T15:55:00Z'>15:55</time></a>
&lt;<span class='nick nick-11'> Teroxice</span>&gt;
bitcoin core
<br>
</div>

<div class='talk op-msg' data-timestamp='1481298960' id='517217'>
<a class='timestamp' href='#517217'><time timestamp='2016-12-09T15:56:00Z'>15:56</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
bitcoin core does not have multiwallet support
<br>
</div>

<div class='talk op-msg' data-timestamp='1481298960' id='517218'>
<a class='timestamp' href='#517218'><time timestamp='2016-12-09T15:56:00Z'>15:56</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Teroxice, try #bitcoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1481301960' id='517219'>
<a class='timestamp' href='#517219'><time timestamp='2016-12-09T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] morcos opened pull request #9309: Spurious RPC test failure (master...rarerpcfail) <a href="https://github.com/bitcoin/bitcoin/pull/9309" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9309</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481306940' id='517220'>
<a class='timestamp' href='#517220'><time timestamp='2016-12-09T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ryanofsky opened pull request #9310: Assert FRESH validity in CCoinsViewCache::BatchWrite (on top of #9308) (master...pr/coins-batch-assert) <a href="https://github.com/bitcoin/bitcoin/pull/9310" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9310</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481309580' id='517221'>
<a class='timestamp' href='#517221'><time timestamp='2016-12-09T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] morcos opened pull request #9311: Flush wallet after abandontransaction (master...flushwalletonabandon) <a href="https://github.com/bitcoin/bitcoin/pull/9311" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9311</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310180' id='517222'>
<a class='timestamp' href='#517222'><time timestamp='2016-12-09T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: maybe easier to explain what&#x27;s happening in #9167 here
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310180' id='517223'>
<a class='timestamp' href='#517223'><time timestamp='2016-12-09T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9167" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9167</a> | IsAllFromMe by morcos · Pull Request #9167 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310240' id='517224'>
<a class='timestamp' href='#517224'><time timestamp='2016-12-09T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if you ran that same command on the old code your grep would find fee twice
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310240' id='517225'>
<a class='timestamp' href='#517225'><time timestamp='2016-12-09T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it prints an overall fee for the transaction and it prints a fee for each accounting entry
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310300' id='517226'>
<a class='timestamp' href='#517226'><time timestamp='2016-12-09T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it was already the case that if it didn&#x27;t think the tx was from you (meaning none of it was from you) it would leave off the overall fee for the tx
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310300' id='517227'>
<a class='timestamp' href='#517227'><time timestamp='2016-12-09T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
ah, I see. what the heck is the fee for the accounting entries for?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310300' id='517228'>
<a class='timestamp' href='#517228'><time timestamp='2016-12-09T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i changed that logic to be whether all of it was from you
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310360' id='517229'>
<a class='timestamp' href='#517229'><time timestamp='2016-12-09T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
don&#x27;t get me started on that
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310360' id='517230'>
<a class='timestamp' href='#517230'><time timestamp='2016-12-09T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
getbalance(&quot;*&quot;) uses those random incorrect negative fees to offset other errors in tracking balances
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310360' id='517231'>
<a class='timestamp' href='#517231'><time timestamp='2016-12-09T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so it was not possible to fix those
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310360' id='517232'>
<a class='timestamp' href='#517232'><time timestamp='2016-12-09T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i suppose we could not print them, but that seems like an api change
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310420' id='517233'>
<a class='timestamp' href='#517233'><time timestamp='2016-12-09T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We should probably be telling the wallet about the actual values of all the inputs... we know them (we&#x27;re a full node, after all!). then the fees it displays can be correct.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310480' id='517234'>
<a class='timestamp' href='#517234'><time timestamp='2016-12-09T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but thats a bigger change.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310480' id='517235'>
<a class='timestamp' href='#517235'><time timestamp='2016-12-09T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah i don&#x27;t think we should try to make any changes of that behavior until we remove accounts
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310480' id='517236'>
<a class='timestamp' href='#517236'><time timestamp='2016-12-09T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
then we can clean up a lot
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310480' id='517237'>
<a class='timestamp' href='#517237'><time timestamp='2016-12-09T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
which reminds me i need to be participating in wumpus&#x27;s labels discussion
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310540' id='517238'>
<a class='timestamp' href='#517238'><time timestamp='2016-12-09T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: +1 on telling the wallet!
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310540' id='517239'>
<a class='timestamp' href='#517239'><time timestamp='2016-12-09T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
er, about al the fees
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310540' id='517240'>
<a class='timestamp' href='#517240'><time timestamp='2016-12-09T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think it&#x27;s nuts the way that works now
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310540' id='517241'>
<a class='timestamp' href='#517241'><time timestamp='2016-12-09T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we&#x27;ve let the accounts stuff deadlock us for a long time, I believe that this was also the reason we didn&#x27;t fix the absurd handling wrt fees when it was first noticed. :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310600' id='517242'>
<a class='timestamp' href='#517242'><time timestamp='2016-12-09T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think my proposal would just be to pass fee information through SyncTransaction().  we have it during ATMP, and we could cache it while validating a block
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310660' id='517243'>
<a class='timestamp' href='#517243'><time timestamp='2016-12-09T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
that doesn&#x27;t go as far as all input values, but i think it&#x27;d be a simple improvement
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310720' id='517244'>
<a class='timestamp' href='#517244'><time timestamp='2016-12-09T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it would be.  full input values are needed if we want to create detailed corrective accounting entries for txn with inputs which aren&#x27;t fromme.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310780' id='517245'>
<a class='timestamp' href='#517245'><time timestamp='2016-12-09T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
e.g. txid 1234  spend 1000 of our coins, spent 4001 coins from {these sources}, paid 5000 coins, and 1 coin fee.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310780' id='517246'>
<a class='timestamp' href='#517246'><time timestamp='2016-12-09T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
if {these sources} is just &quot;from outside this wallet&quot; then we don&#x27;t need per input amounts.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481310840' id='517247'>
<a class='timestamp' href='#517247'><time timestamp='2016-12-09T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we just need the fee.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311020' id='517248'>
<a class='timestamp' href='#517248'><time timestamp='2016-12-09T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
well i definitely agree that with the goal of per-input amounts being passed through!  maybe that&#x27;s not so hard to implement either, actually...
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311080' id='517249'>
<a class='timestamp' href='#517249'><time timestamp='2016-12-09T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
we can probably come up with some reasonable data structure and pass that through to the wallet as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311140' id='517250'>
<a class='timestamp' href='#517250'><time timestamp='2016-12-09T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: do we have a philosophical opposition to decoderawtransaction using the UTXO set, telling you if each of the inputs is unspent,  and if they all are-- displaying the fee?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311140' id='517251'>
<a class='timestamp' href='#517251'><time timestamp='2016-12-09T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i think that should be a separate rpc call
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311200' id='517252'>
<a class='timestamp' href='#517252'><time timestamp='2016-12-09T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: what would it be called?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311200' id='517253'>
<a class='timestamp' href='#517253'><time timestamp='2016-12-09T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: decoderawtransaction is purely a utility function now, and i think it should stay that way
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311200' id='517254'>
<a class='timestamp' href='#517254'><time timestamp='2016-12-09T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
analyserawtransaction ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311200' id='517255'>
<a class='timestamp' href='#517255'><time timestamp='2016-12-09T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
please no more words with different en_gb/en_us spelling!
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311200' id='517256'>
<a class='timestamp' href='#517256'><time timestamp='2016-12-09T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
:P     
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311260' id='517257'>
<a class='timestamp' href='#517257'><time timestamp='2016-12-09T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rawtransactionanalysis
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311260' id='517258'>
<a class='timestamp' href='#517258'><time timestamp='2016-12-09T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
:p     
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311260' id='517259'>
<a class='timestamp' href='#517259'><time timestamp='2016-12-09T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
could we add memory-only per-input values to CTransaction(), so that they get filled in and passed through to the wallet in SyncTransaction()?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311320' id='517260'>
<a class='timestamp' href='#517260'><time timestamp='2016-12-09T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
evaluaterawtransaction
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311320' id='517261'>
<a class='timestamp' href='#517261'><time timestamp='2016-12-09T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: bleh... what if they aren&#x27;t known? the consensus logic (which uses CTransaction) shouldn&#x27;t need such values
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311380' id='517262'>
<a class='timestamp' href='#517262'><time timestamp='2016-12-09T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
right, consensus wouldn&#x27;t use it.  but it would be convenient to fill in for downstream consumers
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311380' id='517263'>
<a class='timestamp' href='#517263'><time timestamp='2016-12-09T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well consensus certantly does eventually need to know the input values! :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311380' id='517264'>
<a class='timestamp' href='#517264'><time timestamp='2016-12-09T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
we could do outside of CTransaction() of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311380' id='517265'>
<a class='timestamp' href='#517265'><time timestamp='2016-12-09T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: but CTransaction is by design now immutable
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311380' id='517266'>
<a class='timestamp' href='#517266'><time timestamp='2016-12-09T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
the witness is not?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311380' id='517267'>
<a class='timestamp' href='#517267'><time timestamp='2016-12-09T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: it will be
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311440' id='517268'>
<a class='timestamp' href='#517268'><time timestamp='2016-12-09T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
ah! didn&#x27;t realize that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311440' id='517269'>
<a class='timestamp' href='#517269'><time timestamp='2016-12-09T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(also, CTransactionRef is a ref to a <u>_const_</u> CTransaction, which includes the witness)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311440' id='517270'>
<a class='timestamp' href='#517270'><time timestamp='2016-12-09T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
ok so i guess stuffing data into that just won&#x27;t work
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311440' id='517271'>
<a class='timestamp' href='#517271'><time timestamp='2016-12-09T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but we could have a wrapper around CTransaction that adds some metadata, which is used by ATMP and wallet code
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311500' id='517272'>
<a class='timestamp' href='#517272'><time timestamp='2016-12-09T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or just pass along a separate object that contains that metadata
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311500' id='517273'>
<a class='timestamp' href='#517273'><time timestamp='2016-12-09T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but speakign of that idea... lets imagine inputs were part of CTxMempoolEntry, then maybe you don&#x27;t need a UTXO cache anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311500' id='517274'>
<a class='timestamp' href='#517274'><time timestamp='2016-12-09T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: though it makes the mempool&#x27;s correctness now consensus critical
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311500' id='517275'>
<a class='timestamp' href='#517275'><time timestamp='2016-12-09T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
nack
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311500' id='517276'>
<a class='timestamp' href='#517276'><time timestamp='2016-12-09T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
thats what we&#x27;re arguign about
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311560' id='517277'>
<a class='timestamp' href='#517277'><time timestamp='2016-12-09T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
eventually the fast that txn are already verified in the mempool will have to be exploited for performance reasons.  :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311620' id='517278'>
<a class='timestamp' href='#517278'><time timestamp='2016-12-09T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i would like that to be the last change that goes in before i stop working on the codebase :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311620' id='517279'>
<a class='timestamp' href='#517279'><time timestamp='2016-12-09T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
hah. yea. :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311620' id='517280'>
<a class='timestamp' href='#517280'><time timestamp='2016-12-09T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
or we&#x27;ll just end up with miners using Joe-Marketers-Recklessly-Optimized-Fork that &quot;validates blocks 5x faster&quot;... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311680' id='517281'>
<a class='timestamp' href='#517281'><time timestamp='2016-12-09T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and then all the care in not being reckless didn&#x27;t matter because relevant parties aren&#x27;t using it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311860' id='517282'>
<a class='timestamp' href='#517282'><time timestamp='2016-12-09T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: even if we had that, we&#x27;d need to apply utxo changes to the chainstate... which is perhaps harder if we haven&#x27;t previously looked up the entry (because it&#x27;s missing from intermediate cache layers, we don&#x27;t know if it&#x27;s fresh...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481311980' id='517283'>
<a class='timestamp' href='#517283'><time timestamp='2016-12-09T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;d prefer something weak-block based to have pre-evaluated sets of transactions to apply to the chainstate
<br>
</div>

<div class='talk op-msg' data-timestamp='1481312040' id='517284'>
<a class='timestamp' href='#517284'><time timestamp='2016-12-09T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: so assuming the set that gets mined is identical to something you were expecting, you can have very fast validation?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481312100' id='517285'>
<a class='timestamp' href='#517285'><time timestamp='2016-12-09T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: yup
<br>
</div>

<div class='talk op-msg' data-timestamp='1481312100' id='517286'>
<a class='timestamp' href='#517286'><time timestamp='2016-12-09T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you can basically have the utxo set diff cached
<br>
</div>

<div class='talk op-msg' data-timestamp='1481312160' id='517287'>
<a class='timestamp' href='#517287'><time timestamp='2016-12-09T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(not just that but you can have the block template for the next block you&#x27;d mine after it cached)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481312880' id='517288'>
<a class='timestamp' href='#517288'><time timestamp='2016-12-09T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] morcos opened pull request #9312: Increase mempool expiry time to 2 weeks (master...longerexpiry) <a href="https://github.com/bitcoin/bitcoin/pull/9312" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9312</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481315640' id='517289'>
<a class='timestamp' href='#517289'><time timestamp='2016-12-09T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
#9295 is an obvious simply bugfix that really would like to be merged (and backported)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481315640' id='517290'>
<a class='timestamp' href='#517290'><time timestamp='2016-12-09T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9295" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9295</a> | An error has occurred and has been logged. Please contact this bot&#x27;s administrator for more information.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316240' id='517291'>
<a class='timestamp' href='#517291'><time timestamp='2016-12-09T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: the whole requesting parents of orphans functionality...  i didn&#x27;t realize it basically doesn&#x27;t work when your peer is a core node.  were you aware of that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316240' id='517292'>
<a class='timestamp' href='#517292'><time timestamp='2016-12-09T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
b/c you won&#x27;t let a peer getdata a tx that&#x27;s not in your relay map
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316240' id='517293'>
<a class='timestamp' href='#517293'><time timestamp='2016-12-09T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: it works so long as the parents are still in the relay pool, or if they&#x27;re an older version.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316300' id='517294'>
<a class='timestamp' href='#517294'><time timestamp='2016-12-09T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(which will answer out of the mempool)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316300' id='517295'>
<a class='timestamp' href='#517295'><time timestamp='2016-12-09T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yes, I knew that when I did it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316300' id='517296'>
<a class='timestamp' href='#517296'><time timestamp='2016-12-09T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
In particular it&#x27;s helpful for older versions that still do the trickling.. they&#x27;re the source of most orphans I see, and they also answer out of the mempool.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316300' id='517297'>
<a class='timestamp' href='#517297'><time timestamp='2016-12-09T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
ok.. i just noticed it on a new node i started up
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316360' id='517298'>
<a class='timestamp' href='#517298'><time timestamp='2016-12-09T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;m glad someone else noticed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316420' id='517299'>
<a class='timestamp' href='#517299'><time timestamp='2016-12-09T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i&#x27;m about to PR a small fix to fee filter your minrelaytxfee if your limitfreerelay is 0..  will save some unnecessary free tx requesting/rejecting
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316420' id='517300'>
<a class='timestamp' href='#517300'><time timestamp='2016-12-09T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
thank god.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316480' id='517301'>
<a class='timestamp' href='#517301'><time timestamp='2016-12-09T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Re the minrelayfee decay,  did much thought or testing go into it?  ISTM it looks like it goes too low. e.g. continues dropping at a relatively high speed even once its past a level where your mempool will fill again, given enough time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316720' id='517302'>
<a class='timestamp' href='#517302'><time timestamp='2016-12-09T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] morcos opened pull request #9313: If we don&#x27;t allow free txs, always send a fee filter (master...minminfee) <a href="https://github.com/bitcoin/bitcoin/pull/9313" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9313</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316780' id='517303'>
<a class='timestamp' href='#517303'><time timestamp='2016-12-09T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: much thought went into it, there is a bit of a discussion on #6722 on my reasoning behind the half-life of 12 hours...   But its certainly possible that the tradeoff has changed a bit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316780' id='517304'>
<a class='timestamp' href='#517304'><time timestamp='2016-12-09T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/6722" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/6722</a> | Limit mempool by throwing away the cheapest txn and setting min relay fee to it by TheBlueMatt · Pull Request #6722 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1481316840' id='517305'>
<a class='timestamp' href='#517305'><time timestamp='2016-12-09T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
The idea behind the min fee was to protect the limited resource of your memory, so it wasn&#x27;t meant to be smart enough to know that certain fees are really never going to be worth it..  
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317020' id='517306'>
<a class='timestamp' href='#517306'><time timestamp='2016-12-09T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Actually rereading the justification now, I think if anything we&#x27;d move it the other way..   Packages are limited to much smaller than the 2.5MB envisioned in that argument...  So the amount of &quot;free relay&quot; is really small.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317020' id='517307'>
<a class='timestamp' href='#517307'><time timestamp='2016-12-09T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I guess what trips it up is that it decays at a constant rate but the supply of transactions is not uniform (or even 1/rate). 
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317080' id='517308'>
<a class='timestamp' href='#517308'><time timestamp='2016-12-09T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
what exactly is the behavior you are seeing that you think is not good
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317140' id='517309'>
<a class='timestamp' href='#517309'><time timestamp='2016-12-09T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
that it drops it back down to nothing and then one of these clowns that relays old transactions connects, fills me back to 300mb... then 72 hours later, these expire, and it slides back down.... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317200' id='517310'>
<a class='timestamp' href='#517310'><time timestamp='2016-12-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
At least in my mind what it should be trying to do is find a value that results in the mempool being close to full-- but it ends up far lower than that; maybe I&#x27;m thinking of the wrong goal.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317260' id='517311'>
<a class='timestamp' href='#517311'><time timestamp='2016-12-09T21:01:00Z'>21:01</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah but even if it didn&#x27;t go down at all, he could do the exact same thing at 2 sat/byte.  They still wouldn&#x27;t be mined within 82 hours
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317260' id='517312'>
<a class='timestamp' href='#517312'><time timestamp='2016-12-09T21:01:00Z'>21:01</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
72     
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317260' id='517313'>
<a class='timestamp' href='#517313'><time timestamp='2016-12-09T21:01:00Z'>21:01</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think modeling the arrival rate of transactions is hard
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317320' id='517314'>
<a class='timestamp' href='#517314'><time timestamp='2016-12-09T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think what I&#x27;m talking about is as much a question of the distribution of feerates in the supply of unconfirmed transactions, as it is arrival. (more so, because at the 2sat byte level, they&#x27;re never getting mined.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317380' id='517315'>
<a class='timestamp' href='#517315'><time timestamp='2016-12-09T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think if you look at tx supply..  there is a backlog of between 1MB - 100MB of txs that pay &gt; 1 sat/byte   and there is a backlog of 100-1000MB additional of txs that pay 1 sat/byte   it just happens to be the distribution of txs now i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317380' id='517316'>
<a class='timestamp' href='#517316'><time timestamp='2016-12-09T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: ah, but thats wrong
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317440' id='517317'>
<a class='timestamp' href='#517317'><time timestamp='2016-12-09T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
for txs that pay between 1.5-2 sat/byte  95% of them are mined within 1000 blocks and 75% of them are mined within 256 blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317440' id='517318'>
<a class='timestamp' href='#517318'><time timestamp='2016-12-09T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
crazy right
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317500' id='517319'>
<a class='timestamp' href='#517319'><time timestamp='2016-12-09T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
bleh. okay. Crazy.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481317560' id='517320'>
<a class='timestamp' href='#517320'><time timestamp='2016-12-09T21:06:00Z'>21:06</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it&#x27;s just there are sooo many in the 1-1.5 range that only about 10% of them get mined within 1000 blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320560' id='517321'>
<a class='timestamp' href='#517321'><time timestamp='2016-12-09T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: hmm, I wonder if we should be rescanning for conflicts then (#9290)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320560' id='517322'>
<a class='timestamp' href='#517322'><time timestamp='2016-12-09T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9290" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9290</a> | Make RelayWalletTransaction attempt to AcceptToMemoryPool. by gmaxwell · Pull Request #9290 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320620' id='517323'>
<a class='timestamp' href='#517323'><time timestamp='2016-12-09T21:57:00Z'>21:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: make rescan take less than N hours? :-/
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320620' id='517324'>
<a class='timestamp' href='#517324'><time timestamp='2016-12-09T21:57:00Z'>21:57</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hours now? :o
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320620' id='517325'>
<a class='timestamp' href='#517325'><time timestamp='2016-12-09T21:57:00Z'>21:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think it takes 5 on my laptop.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320620' id='517326'>
<a class='timestamp' href='#517326'><time timestamp='2016-12-09T21:57:00Z'>21:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
on a really fast machine it&#x27;s not so terrible.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320680' id='517327'>
<a class='timestamp' href='#517327'><time timestamp='2016-12-09T21:58:00Z'>21:58</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I guess ideally we should be waiting until the blockchain is synced, checking if we have unconfirmed txns, checking a wallet flag, and rescanning at runtime
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320680' id='517328'>
<a class='timestamp' href='#517328'><time timestamp='2016-12-09T21:58:00Z'>21:58</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sounds complex though :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320740' id='517329'>
<a class='timestamp' href='#517329'><time timestamp='2016-12-09T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
(oh, and then we could simply not broadcast unconfirmed txns until it finishes the rescan)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320740' id='517330'>
<a class='timestamp' href='#517330'><time timestamp='2016-12-09T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the &#x27;getting real fee info&#x27; will be another reason to rescan the chain for all wallets.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320740' id='517331'>
<a class='timestamp' href='#517331'><time timestamp='2016-12-09T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so it would be worth giving some thought to adding an extra kinda of versioning to the wallet (metadata-rescanned-since).. and making rescan faster...
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320740' id='517332'>
<a class='timestamp' href='#517332'><time timestamp='2016-12-09T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320800' id='517333'>
<a class='timestamp' href='#517333'><time timestamp='2016-12-09T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
&quot;rescan depth&quot; or something
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320800' id='517334'>
<a class='timestamp' href='#517334'><time timestamp='2016-12-09T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
luke-jr: it&#x27;s in general not really possible to always know that a transaction is conflicted.  i think we should keep that in mind before doing anything expensive...
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320800' id='517335'>
<a class='timestamp' href='#517335'><time timestamp='2016-12-09T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well they won&#x27;t broadcast if conflicted-- they&#x27;ll fail for mempool add. so the only harm is wasting a little time trying to look up utxos that aren&#x27;t there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320800' id='517336'>
<a class='timestamp' href='#517336'><time timestamp='2016-12-09T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
to be happy with downgrading+upgrading, we&#x27;d need a timestamp per each depth, but that seems unnecessarily over-compatible
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320860' id='517337'>
<a class='timestamp' href='#517337'><time timestamp='2016-12-09T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: rescan is for private keys no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320860' id='517338'>
<a class='timestamp' href='#517338'><time timestamp='2016-12-09T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
or is it UTXO?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320860' id='517339'>
<a class='timestamp' href='#517339'><time timestamp='2016-12-09T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: oh, right. that&#x27;s not too bad compared to hours rescanning
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320860' id='517340'>
<a class='timestamp' href='#517340'><time timestamp='2016-12-09T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sdaftuar: ah, parent conflicts
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320920' id='517341'>
<a class='timestamp' href='#517341'><time timestamp='2016-12-09T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yes, though we won&#x27;t spend non-wallet inputs (ignoring coinjoins because stupid) until they are six confirms old.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320920' id='517342'>
<a class='timestamp' href='#517342'><time timestamp='2016-12-09T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So it&#x27;s really hard to end up in a case where there is an undetectable conflict in your wallet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320920' id='517343'>
<a class='timestamp' href='#517343'><time timestamp='2016-12-09T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: if someone else sends you a payment using coins later conflicted?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320980' id='517344'>
<a class='timestamp' href='#517344'><time timestamp='2016-12-09T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
why is rescan so slow? is it because it tries to match all possible scripts or?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320980' id='517345'>
<a class='timestamp' href='#517345'><time timestamp='2016-12-09T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: you won&#x27;t spend that payment until it is 6 confirmed. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1481320980' id='517346'>
<a class='timestamp' href='#517346'><time timestamp='2016-12-09T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
dcousens: I think much (most?) of the time is spent hashing the blocks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321040' id='517347'>
<a class='timestamp' href='#517347'><time timestamp='2016-12-09T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: but you&#x27;ll try to mempool-add the receive, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321040' id='517348'>
<a class='timestamp' href='#517348'><time timestamp='2016-12-09T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: okay, sure nevermind me.. that payment itself will be an undetectable conflict, I was only thinking about IsFromMe transactions.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321040' id='517349'>
<a class='timestamp' href='#517349'><time timestamp='2016-12-09T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: why is it hashing blocks? (i&#x27;ll look into the code ooi)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321100' id='517350'>
<a class='timestamp' href='#517350'><time timestamp='2016-12-09T22:05:00Z'>22:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
dcousens: side-effect of deseralization.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321220' id='517351'>
<a class='timestamp' href='#517351'><time timestamp='2016-12-09T22:07:00Z'>22:07</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: still weir,t I use similar enough deserialization code (lib/consensus) in my own parser and it does a full parse purely bottlenecked at IO, so 3-4 minutes on an SSD, script checking shouldn&#x27;t be much more on that i&#x27;d of though... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321220' id='517352'>
<a class='timestamp' href='#517352'><time timestamp='2016-12-09T22:07:00Z'>22:07</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
but I guess I&#x27;d have to look into the code to find out why
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321340' id='517353'>
<a class='timestamp' href='#517353'><time timestamp='2016-12-09T22:09:00Z'>22:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
At least my vague recollection of profiling it before was that the time was all in the heap allocator and sha256.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321520' id='517354'>
<a class='timestamp' href='#517354'><time timestamp='2016-12-09T22:12:00Z'>22:12</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: hmmm, by hashing do you mean the merkle tree generation?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321580' id='517355'>
<a class='timestamp' href='#517355'><time timestamp='2016-12-09T22:13:00Z'>22:13</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
well, merkle root calculation***
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321580' id='517356'>
<a class='timestamp' href='#517356'><time timestamp='2016-12-09T22:13:00Z'>22:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I assume, I don&#x27;t know what else sha256 would be used for while scanning blocks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321640' id='517357'>
<a class='timestamp' href='#517357'><time timestamp='2016-12-09T22:14:00Z'>22:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the checksum?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321700' id='517358'>
<a class='timestamp' href='#517358'><time timestamp='2016-12-09T22:15:00Z'>22:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
blocks on disk have a checksum, i think?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321700' id='517359'>
<a class='timestamp' href='#517359'><time timestamp='2016-12-09T22:15:00Z'>22:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or am i confusing it with peers.day
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321700' id='517360'>
<a class='timestamp' href='#517360'><time timestamp='2016-12-09T22:15:00Z'>22:15</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
sipa: they have a magic byte
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321700' id='517361'>
<a class='timestamp' href='#517361'><time timestamp='2016-12-09T22:15:00Z'>22:15</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
no checksum afaik
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321700' id='517362'>
<a class='timestamp' href='#517362'><time timestamp='2016-12-09T22:15:00Z'>22:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
fun random graph <a href="https://people.xiph.org/~greg/temp/blk-sizes-windowed.png" class="link" target="_blank">https://people.xiph.org/~greg/temp/blk-sizes-windowed.png</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321760' id='517363'>
<a class='timestamp' href='#517363'><time timestamp='2016-12-09T22:16:00Z'>22:16</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
a checksum would probably work wonders in bypassing that
<br>
</div>

<div class='talk op-msg' data-timestamp='1481321760' id='517364'>
<a class='timestamp' href='#517364'><time timestamp='2016-12-09T22:16:00Z'>22:16</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
esp. given the situation of all the zero padding in the files
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325060' id='517365'>
<a class='timestamp' href='#517365'><time timestamp='2016-12-09T23:11:00Z'>23:11</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
RE: 9312, 2 week expiration time,  won&#x27;t that further prevent parties from attempting broadcast a conflict of a stuck transaction 2.1 days after the first broadcast, and having a high chance of the other transaction being &quot;mostly&quot; out of the network by then?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325060' id='517366'>
<a class='timestamp' href='#517366'><time timestamp='2016-12-09T23:11:00Z'>23:11</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
of course, that is what RBF is for, but
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325180' id='517367'>
<a class='timestamp' href='#517367'><time timestamp='2016-12-09T23:13:00Z'>23:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
dcousens: not really. (1) right now those conflicts are pretty successful immediately; due to nodes restarting, full-rbf miners, etc.  (2) there are people who go around connecting to everyone constantly rebroadcasting old transactions... so they&#x27;re already defeating that timeout.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325180' id='517368'>
<a class='timestamp' href='#517368'><time timestamp='2016-12-09T23:13:00Z'>23:13</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: in practice it works though?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325240' id='517369'>
<a class='timestamp' href='#517369'><time timestamp='2016-12-09T23:14:00Z'>23:14</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
oh wait, misread what you wrote
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325240' id='517370'>
<a class='timestamp' href='#517370'><time timestamp='2016-12-09T23:14:00Z'>23:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in practice it works even in 1 hour, so it works-- but not because of the 72 hour timeout.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325240' id='517371'>
<a class='timestamp' href='#517371'><time timestamp='2016-12-09T23:14:00Z'>23:14</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325360' id='517372'>
<a class='timestamp' href='#517372'><time timestamp='2016-12-09T23:16:00Z'>23:16</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we could also consider adding a new datastructure, a blacklist: if something hits the expire time, that txid becomes blacklisted for n-months.  That would actually make things much easier to replace with a double spend after two weeks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325420' id='517373'>
<a class='timestamp' href='#517373'><time timestamp='2016-12-09T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: is there a way to &quot;push out&quot; a transaction from the mempool using the RPC? aka, &quot;oops, forget the last one, use this instead&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325420' id='517374'>
<a class='timestamp' href='#517374'><time timestamp='2016-12-09T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
aka, ignore conflicts, or drop conflicts
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325480' id='517375'>
<a class='timestamp' href='#517375'><time timestamp='2016-12-09T23:18:00Z'>23:18</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
just thinking about you could by-pass that timeout without wiping your local mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325480' id='517376'>
<a class='timestamp' href='#517376'><time timestamp='2016-12-09T23:18:00Z'>23:18</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
obviously that wouldn&#x27;t help others
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325480' id='517377'>
<a class='timestamp' href='#517377'><time timestamp='2016-12-09T23:18:00Z'>23:18</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
but, as you say, others are quite the dynamic
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325720' id='517378'>
<a class='timestamp' href='#517378'><time timestamp='2016-12-09T23:22:00Z'>23:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
dcousens: kinda useless to do something locally, it won&#x27;t do it to anyone else... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325900' id='517379'>
<a class='timestamp' href='#517379'><time timestamp='2016-12-09T23:25:00Z'>23:25</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: depending on their expiration timeout, mempool size &amp; fee filter, full-RBF, etc, could go either way no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481325960' id='517380'>
<a class='timestamp' href='#517380'><time timestamp='2016-12-09T23:26:00Z'>23:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
dcousens: you can send things that aren&#x27;t in your mempool, the whitelisting stuff does that already.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481326020' id='517381'>
<a class='timestamp' href='#517381'><time timestamp='2016-12-09T23:27:00Z'>23:27</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: true
<br>
</div>

</div>
</section>

</body>
</html>
