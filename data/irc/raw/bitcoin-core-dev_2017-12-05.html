<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-12-05
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-12-05' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:23 UTC</pre>
<pre><a href="/bitcoin-core-dev/2017-11-05">&lt;</a><span class='header'>  December 2017   </span><a href="/bitcoin-core-dev/2018-01-05">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                <a class="" href="/bitcoin-core-dev/2017-12-01">1</a>  <a class="" href="/bitcoin-core-dev/2017-12-02">2</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-12-03">3</a>  <a class="" href="/bitcoin-core-dev/2017-12-04">4</a>  <a class="current" href="/bitcoin-core-dev/2017-12-05">5</a>  <a class="" href="/bitcoin-core-dev/2017-12-06">6</a>  <a class="" href="/bitcoin-core-dev/2017-12-07">7</a>  <a class="" href="/bitcoin-core-dev/2017-12-08">8</a>  <a class="" href="/bitcoin-core-dev/2017-12-09">9</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-12-10">10</a> <a class="" href="/bitcoin-core-dev/2017-12-11">11</a> <a class="" href="/bitcoin-core-dev/2017-12-12">12</a> <a class="" href="/bitcoin-core-dev/2017-12-13">13</a> <a class="" href="/bitcoin-core-dev/2017-12-14">14</a> <a class="" href="/bitcoin-core-dev/2017-12-15">15</a> <a class="" href="/bitcoin-core-dev/2017-12-16">16</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-12-17">17</a> <a class="" href="/bitcoin-core-dev/2017-12-18">18</a> <a class="" href="/bitcoin-core-dev/2017-12-19">19</a> <a class="" href="/bitcoin-core-dev/2017-12-20">20</a> <a class="" href="/bitcoin-core-dev/2017-12-21">21</a> <a class="" href="/bitcoin-core-dev/2017-12-22">22</a> <a class="" href="/bitcoin-core-dev/2017-12-23">23</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-12-24">24</a> <a class="" href="/bitcoin-core-dev/2017-12-25">25</a> <a class="" href="/bitcoin-core-dev/2017-12-26">26</a> <a class="" href="/bitcoin-core-dev/2017-12-27">27</a> <a class="" href="/bitcoin-core-dev/2017-12-28">28</a> <a class="" href="/bitcoin-core-dev/2017-12-29">29</a> <a class="" href="/bitcoin-core-dev/2017-12-30">30</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-12-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1512432000' id='584326'>
<a class='timestamp' href='#584326'><time timestamp='2017-12-05T00:00:00Z'>00:00</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
achow101: give 11824 a spin?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432000' id='584327'>
<a class='timestamp' href='#584327'><time timestamp='2017-12-05T00:00:00Z'>00:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] TheBlueMatt opened pull request #11824:  Block ActivateBestChain to empty validationinterface queue (master...2017-12-11822-debug) <a href="https://github.com/bitcoin/bitcoin/pull/11824" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11824</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432000' id='584328'>
<a class='timestamp' href='#584328'><time timestamp='2017-12-05T00:00:00Z'>00:00</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
seems to be working for me
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432000' id='584329'>
<a class='timestamp' href='#584329'><time timestamp='2017-12-05T00:00:00Z'>00:00</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
pulling now
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432060' id='584330'>
<a class='timestamp' href='#584330'><time timestamp='2017-12-05T00:01:00Z'>00:01</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
why&#x27;s it so big?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432300' id='584331'>
<a class='timestamp' href='#584331'><time timestamp='2017-12-05T00:05:00Z'>00:05</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cause you cant call the callbacks themselves with cs_main held...I mean the first commit is just a nice-to-have that makes the queue drain faster, the third commit adds DEBUG_LOCKORDER annotations and removes spurious locks in tests, and the last two should probably be squashed
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432300' id='584332'>
<a class='timestamp' href='#584332'><time timestamp='2017-12-05T00:05:00Z'>00:05</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
BlueMatt: build error ---&gt; validation.cpp:2480:18: error: ‘promise’ is not a member of ‘std’
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432300' id='584333'>
<a class='timestamp' href='#584333'><time timestamp='2017-12-05T00:05:00Z'>00:05</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
its not as bad as it looks
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432300' id='584334'>
<a class='timestamp' href='#584334'><time timestamp='2017-12-05T00:05:00Z'>00:05</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
achow101: oops, try now, forgot to commit that line
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432420' id='584335'>
<a class='timestamp' href='#584335'><time timestamp='2017-12-05T00:07:00Z'>00:07</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
what&#x27;s the queue depth set to?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432480' id='584336'>
<a class='timestamp' href='#584336'><time timestamp='2017-12-05T00:08:00Z'>00:08</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
max is 10
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432480' id='584337'>
<a class='timestamp' href='#584337'><time timestamp='2017-12-05T00:08:00Z'>00:08</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
feel free to play with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432540' id='584338'>
<a class='timestamp' href='#584338'><time timestamp='2017-12-05T00:09:00Z'>00:09</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
well it compiled and it&#x27;s running
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432600' id='584339'>
<a class='timestamp' href='#584339'><time timestamp='2017-12-05T00:10:00Z'>00:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ship it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432600' id='584340'>
<a class='timestamp' href='#584340'><time timestamp='2017-12-05T00:10:00Z'>00:10</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
someone should tag 11822 as 0.16
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432660' id='584341'>
<a class='timestamp' href='#584341'><time timestamp='2017-12-05T00:11:00Z'>00:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I&#x27;ll let you know how it goes, so far so good.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432660' id='584342'>
<a class='timestamp' href='#584342'><time timestamp='2017-12-05T00:11:00Z'>00:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I mean it definitely fixes the obvious infite-queue issue, but there could be other gremlins hiding
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432660' id='584343'>
<a class='timestamp' href='#584343'><time timestamp='2017-12-05T00:11:00Z'>00:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I doubt it
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432720' id='584344'>
<a class='timestamp' href='#584344'><time timestamp='2017-12-05T00:12:00Z'>00:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
my bigger worry with that patch is future lockorder violations, but not a ton to be done about it, honestly
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432720' id='584345'>
<a class='timestamp' href='#584345'><time timestamp='2017-12-05T00:12:00Z'>00:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
tagged
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432900' id='584346'>
<a class='timestamp' href='#584346'><time timestamp='2017-12-05T00:15:00Z'>00:15</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: i think it&#x27;d make for a smoother transition if a fence was inserted after each block&#x27;s callbacks had been queued, rather than stalling at an arbitrary depth
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432960' id='584347'>
<a class='timestamp' href='#584347'><time timestamp='2017-12-05T00:16:00Z'>00:16</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
that way we could still work with the same assumptions as before, while we work out any remaining out-of-sync issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1512432960' id='584348'>
<a class='timestamp' href='#584348'><time timestamp='2017-12-05T00:16:00Z'>00:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: ugh, we started the fence-removal process two releases ago, I&#x27;d rather not add it back if we can avoid it :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433080' id='584349'>
<a class='timestamp' href='#584349'><time timestamp='2017-12-05T00:18:00Z'>00:18</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: the PR is the same thing, I&#x27;m just suggesting using a block-callback-depth (depth == 1 initially) rather than an individual callback depth.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433080' id='584350'>
<a class='timestamp' href='#584350'><time timestamp='2017-12-05T00:18:00Z'>00:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmm, that patch may not be sufficient :/ achow101 you see it staying low?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433080' id='584351'>
<a class='timestamp' href='#584351'><time timestamp='2017-12-05T00:18:00Z'>00:18</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
BlueMatt: it&#x27;s reasonable given my current dbcache of 8000
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433140' id='584352'>
<a class='timestamp' href='#584352'><time timestamp='2017-12-05T00:19:00Z'>00:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: well if you want to do that we should move the blocking to the end and not the beginning and set it to 1 right before release/on the backport branch, not on master, please
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433200' id='584353'>
<a class='timestamp' href='#584353'><time timestamp='2017-12-05T00:20:00Z'>00:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: 90% of the reason to merge this stuff sooner rather than later is to get testing cycles on it
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433200' id='584354'>
<a class='timestamp' href='#584354'><time timestamp='2017-12-05T00:20:00Z'>00:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
otherwise its never gonna happen
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433260' id='584355'>
<a class='timestamp' href='#584355'><time timestamp='2017-12-05T00:21:00Z'>00:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
BlueMatt: I&#x27;d like this to be merged so I can run my fucking node :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433320' id='584356'>
<a class='timestamp' href='#584356'><time timestamp='2017-12-05T00:22:00Z'>00:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
achow101: lol, you dont carry patches on your node?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433380' id='584357'>
<a class='timestamp' href='#584357'><time timestamp='2017-12-05T00:23:00Z'>00:23</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
BlueMatt: my node is also what I test and develop on and I would like to be able to test the other stuff I&#x27;m working on and PR it without extra patches
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433440' id='584358'>
<a class='timestamp' href='#584358'><time timestamp='2017-12-05T00:24:00Z'>00:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
heh, well feel free to review
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433560' id='584359'>
<a class='timestamp' href='#584359'><time timestamp='2017-12-05T00:26:00Z'>00:26</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: to be clear, i was suggesting that we let it run a full block ahead (depth of single block&#x27;s callbacks). I wasn&#x27;t suggesting that we use an actual depth of 1.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433560' id='584360'>
<a class='timestamp' href='#584360'><time timestamp='2017-12-05T00:26:00Z'>00:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
well res size seems to have stabilized on my reindex-chainstate node
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433560' id='584361'>
<a class='timestamp' href='#584361'><time timestamp='2017-12-05T00:26:00Z'>00:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: I dont know how much that&#x27;d do aside from hide bugs?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433620' id='584362'>
<a class='timestamp' href='#584362'><time timestamp='2017-12-05T00:27:00Z'>00:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
if we want to neuter it cause we&#x27;re worried, we should make ProcessNewBlock/ActivateBestChain block until callbacks finish for the latest action
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433620' id='584363'>
<a class='timestamp' href='#584363'><time timestamp='2017-12-05T00:27:00Z'>00:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
letting it run ahead but heavily limiting how much it can run ahead just sounds like it&#x27;ll hide more bugs than anything, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433740' id='584364'>
<a class='timestamp' href='#584364'><time timestamp='2017-12-05T00:29:00Z'>00:29</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
well yes, but it&#x27;d ensure that we&#x27;re only introducing one class of bugs at a time
<br>
</div>

<div class='talk op-msg' data-timestamp='1512433980' id='584365'>
<a class='timestamp' href='#584365'><time timestamp='2017-12-05T00:33:00Z'>00:33</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
for each extra item in the queue, how much extra memory does that use
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434100' id='584366'>
<a class='timestamp' href='#584366'><time timestamp='2017-12-05T00:35:00Z'>00:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
a few MB, i expect
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434220' id='584367'>
<a class='timestamp' href='#584367'><time timestamp='2017-12-05T00:37:00Z'>00:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
achow101: (or not reindex)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434220' id='584368'>
<a class='timestamp' href='#584368'><time timestamp='2017-12-05T00:37:00Z'>00:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
achow101: its (during IBD, mostly just) a shared_ptr&lt;const CBlock&gt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434280' id='584369'>
<a class='timestamp' href='#584369'><time timestamp='2017-12-05T00:38:00Z'>00:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
BlueMatt: I&#x27;m not sure if the problem I saw was limited to reindex only though
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434280' id='584370'>
<a class='timestamp' href='#584370'><time timestamp='2017-12-05T00:38:00Z'>00:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: I&#x27;m not sure which class of bugs is resolved by your suggestion, tbh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434280' id='584371'>
<a class='timestamp' href='#584371'><time timestamp='2017-12-05T00:38:00Z'>00:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
achow101: it should almost entirely be
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434280' id='584372'>
<a class='timestamp' href='#584372'><time timestamp='2017-12-05T00:38:00Z'>00:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
your wallet shouldnt take 10 minutes to process a new block....
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434280' id='584373'>
<a class='timestamp' href='#584373'><time timestamp='2017-12-05T00:38:00Z'>00:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
BlueMatt: the node crashed at some point before I had to reindex, and I think that was because of an OOM to (had to do the whole reboot computer stuff as I did when it crashed during reindex)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434280' id='584374'>
<a class='timestamp' href='#584374'><time timestamp='2017-12-05T00:38:00Z'>00:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: blocking before return may fix some stuff, but....
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434340' id='584375'>
<a class='timestamp' href='#584375'><time timestamp='2017-12-05T00:39:00Z'>00:39</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
that crash caused me to need to reindex it now
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434340' id='584376'>
<a class='timestamp' href='#584376'><time timestamp='2017-12-05T00:39:00Z'>00:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
achow101: thats.....weird
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434340' id='584377'>
<a class='timestamp' href='#584377'><time timestamp='2017-12-05T00:39:00Z'>00:39</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it&#x27;s possible that that was unrelated, but I&#x27;m not sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434460' id='584378'>
<a class='timestamp' href='#584378'><time timestamp='2017-12-05T00:41:00Z'>00:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
was that like right after a restart where you needed to catch up a few days blocks?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434460' id='584379'>
<a class='timestamp' href='#584379'><time timestamp='2017-12-05T00:41:00Z'>00:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
though even that shouldnt use all that much memory....
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434460' id='584380'>
<a class='timestamp' href='#584380'><time timestamp='2017-12-05T00:41:00Z'>00:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i mean this has been on master a while...
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434520' id='584381'>
<a class='timestamp' href='#584381'><time timestamp='2017-12-05T00:42:00Z'>00:42</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
no, it had been up for a few days at that point, and I had it running for several weeks with a build of master prior to that
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434520' id='584382'>
<a class='timestamp' href='#584382'><time timestamp='2017-12-05T00:42:00Z'>00:42</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
although it is possible that the build I was running before did not have your PR merged
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434640' id='584383'>
<a class='timestamp' href='#584383'><time timestamp='2017-12-05T00:44:00Z'>00:44</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I can grep through my log file to see what was running before I started on this build. although it may take a while since that log file is 42 GB because I forgot to turn of debug=net
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434700' id='584384'>
<a class='timestamp' href='#584384'><time timestamp='2017-12-05T00:45:00Z'>00:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmm, I mean I did a read-through of the queue logic and didnt see any obvious races
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434700' id='584385'>
<a class='timestamp' href='#584385'><time timestamp='2017-12-05T00:45:00Z'>00:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ls -lh ~/.bitcoin/debug.log
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434700' id='584386'>
<a class='timestamp' href='#584386'><time timestamp='2017-12-05T00:45:00Z'>00:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
-rw------- 1 matt matt 6.5T Dec  4 19:45 /home/matt/.bitcoin/debug.log
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434700' id='584387'>
<a class='timestamp' href='#584387'><time timestamp='2017-12-05T00:45:00Z'>00:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
errr, s/races/leaks/
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434760' id='584388'>
<a class='timestamp' href='#584388'><time timestamp='2017-12-05T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
BlueMatt: do you have your node patched to not shrink the debug.log at each restart?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434760' id='584389'>
<a class='timestamp' href='#584389'><time timestamp='2017-12-05T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i believe it does not shrink by default if -debug? or something like that
<br>
</div>

<div class='talk op-msg' data-timestamp='1512434820' id='584390'>
<a class='timestamp' href='#584390'><time timestamp='2017-12-05T00:47:00Z'>00:47</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
-&gt; out, if bug is still there, do a heap profile
<br>
</div>

<div class='talk op-msg' data-timestamp='1512435780' id='584391'>
<a class='timestamp' href='#584391'><time timestamp='2017-12-05T01:03:00Z'>01:03</time></a>
&lt;<span class='nick nick-4'> jamesob</span>&gt;
going to test #11824 with -reindex
<br>
</div>

<div class='talk op-msg' data-timestamp='1512435780' id='584392'>
<a class='timestamp' href='#584392'><time timestamp='2017-12-05T01:03:00Z'>01:03</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/11824" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/11824</a> | Block ActivateBestChain to empty validationinterface queue by TheBlueMatt · Pull Request #11824 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1512440100' id='584393'>
<a class='timestamp' href='#584393'><time timestamp='2017-12-05T02:15:00Z'>02:15</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
please give feedback to #11826, ty
<br>
</div>

<div class='talk op-msg' data-timestamp='1512440100' id='584394'>
<a class='timestamp' href='#584394'><time timestamp='2017-12-05T02:15:00Z'>02:15</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/11826" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/11826</a> | RFC: Activity feature · Issue #11826 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1512449040' id='584395'>
<a class='timestamp' href='#584395'><time timestamp='2017-12-05T04:44:00Z'>04:44</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] kallewoof closed pull request #11489: [wallet] sendtoaddress style argument (master...201709_segwitwallet2_sendtoaddress) <a href="https://github.com/bitcoin/bitcoin/pull/11489" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11489</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451320' id='584396'>
<a class='timestamp' href='#584396'><time timestamp='2017-12-05T05:22:00Z'>05:22</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
I&#x27;ve been asked about address index on top of bitcoin core (to replace the unmaintained fork that exists somewhere else). What are people&#x27;s opinions on this? I know some people prefer a minimal code base, but having an address index option seems like it would alleviate a lot of problems in a lot of places.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451620' id='584397'>
<a class='timestamp' href='#584397'><time timestamp='2017-12-05T05:27:00Z'>05:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
a history address index is unsustainable; anyone who uses it is eventually going to be forced to use trust a third party service.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451620' id='584398'>
<a class='timestamp' href='#584398'><time timestamp='2017-12-05T05:27:00Z'>05:27</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451680' id='584399'>
<a class='timestamp' href='#584399'><time timestamp='2017-12-05T05:28:00Z'>05:28</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Too much space, or..?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451680' id='584400'>
<a class='timestamp' href='#584400'><time timestamp='2017-12-05T05:28:00Z'>05:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t see any problems with having hooks to support such things, but directly incorporating an index of history wouldn&#x27;t just be a waste of our review and maintaince resources, it would be actively harmful to the ecosystem.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451680' id='584401'>
<a class='timestamp' href='#584401'><time timestamp='2017-12-05T05:28:00Z'>05:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yes too much space, too much seek load, and incompatible with pruning; or any kind of pruned sync.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451740' id='584402'>
<a class='timestamp' href='#584402'><time timestamp='2017-12-05T05:29:00Z'>05:29</time></a>
&lt;<span class='nick nick-9'> * kallewoof</span>&gt;
nods
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451740' id='584403'>
<a class='timestamp' href='#584403'><time timestamp='2017-12-05T05:29:00Z'>05:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we&#x27;ve also already seen that behavior where people using such indexes constructed via abe or other tools that created them, failed back to blockchain.info and similar.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451740' id='584404'>
<a class='timestamp' href='#584404'><time timestamp='2017-12-05T05:29:00Z'>05:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
They&#x27;re also not required except for unusual cases (like making an explorer, which also requires spent-position indexes).   An index of unspent outputs would be far more reasonable.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451800' id='584405'>
<a class='timestamp' href='#584405'><time timestamp='2017-12-05T05:30:00Z'>05:30</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Yeah, this would be used by explorers, I would expect. I think some (lots?) of them use the unmaintained fork I mentioned earlier.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451800' id='584406'>
<a class='timestamp' href='#584406'><time timestamp='2017-12-05T05:30:00Z'>05:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I sure hope not.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451860' id='584407'>
<a class='timestamp' href='#584407'><time timestamp='2017-12-05T05:31:00Z'>05:31</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Rumor says it is so. Part of why I was asked to look into it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451860' id='584408'>
<a class='timestamp' href='#584408'><time timestamp='2017-12-05T05:31:00Z'>05:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I know with absolute certanty that that old index patch could lose data, I just don&#x27;t know _how_.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451920' id='584409'>
<a class='timestamp' href='#584409'><time timestamp='2017-12-05T05:32:00Z'>05:32</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
I think having hooks in bitcoin core that let such a system exist separately is a good plan. It would only rely on API breakage, which bitcoin core is very careful about.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451920' id='584410'>
<a class='timestamp' href='#584410'><time timestamp='2017-12-05T05:32:00Z'>05:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
As in I had a node with it where it was faliing to actual spendable outputs connected to an address, and I tested that it was incorrect quite throughly. I assumed the bad data was some gotcha with reorgs or likewise, but no one investigated.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451920' id='584411'>
<a class='timestamp' href='#584411'><time timestamp='2017-12-05T05:32:00Z'>05:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yes, hooks for such things seem fine to me.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512451920' id='584412'>
<a class='timestamp' href='#584412'><time timestamp='2017-12-05T05:32:00Z'>05:32</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Ah.. yeah, reorgs is definitely a challenge.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452100' id='584413'>
<a class='timestamp' href='#584413'><time timestamp='2017-12-05T05:35:00Z'>05:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if i had infinite time i&#x27;d write a separate efficient indexing service, which just speaks the p2p protocol
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452160' id='584414'>
<a class='timestamp' href='#584414'><time timestamp='2017-12-05T05:36:00Z'>05:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which you then can connect to bitcoind 
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452280' id='584415'>
<a class='timestamp' href='#584415'><time timestamp='2017-12-05T05:38:00Z'>05:38</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
sipa: I guess that would have the obvious benefit of not actually needing a node at all if it could just sync from the network?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452280' id='584416'>
<a class='timestamp' href='#584416'><time timestamp='2017-12-05T05:38:00Z'>05:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452340' id='584417'>
<a class='timestamp' href='#584417'><time timestamp='2017-12-05T05:39:00Z'>05:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it would be nice to reuse some of the headers sync logic in core, but if you assume you&#x27;re connected to a trusted peer anyway, i don&#x27;t think it needs to be allthat complicated
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452340' id='584418'>
<a class='timestamp' href='#584418'><time timestamp='2017-12-05T05:39:00Z'>05:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just deal with reorgs
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452400' id='584419'>
<a class='timestamp' href='#584419'><time timestamp='2017-12-05T05:40:00Z'>05:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
from an arch perspective you&#x27;d even want it to just keep a SQL database in sync, unfortunately the performance would be horrible except on gold plated system. (massive nvem raid 1 arrays and gobs of ram or whatever)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452520' id='584420'>
<a class='timestamp' href='#584420'><time timestamp='2017-12-05T05:42:00Z'>05:42</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
SQL db sounds like it would be kinda slow yeah.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452520' id='584421'>
<a class='timestamp' href='#584421'><time timestamp='2017-12-05T05:42:00Z'>05:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
thats how abe worked.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452520' id='584422'>
<a class='timestamp' href='#584422'><time timestamp='2017-12-05T05:42:00Z'>05:42</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
I was thinking of using redis, but I think I&#x27;m gonna have to do profiling to find a good solution.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452580' id='584423'>
<a class='timestamp' href='#584423'><time timestamp='2017-12-05T05:43:00Z'>05:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
last I heard of anyone successfully running it, it required well over 1TB state and would take a month to sync or something.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452580' id='584424'>
<a class='timestamp' href='#584424'><time timestamp='2017-12-05T05:43:00Z'>05:43</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Wow..
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452580' id='584425'>
<a class='timestamp' href='#584425'><time timestamp='2017-12-05T05:43:00Z'>05:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think it&#x27;s been unusably slow for the better part of 5 years now
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452640' id='584426'>
<a class='timestamp' href='#584426'><time timestamp='2017-12-05T05:44:00Z'>05:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
this was years ago, it would presumably be some multiple of that now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512452940' id='584427'>
<a class='timestamp' href='#584427'><time timestamp='2017-12-05T05:49:00Z'>05:49</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
It would be address -&gt; tx list, tx -&gt; address list, block -&gt; tx list.. tx&#x27;es could be compressed as block height + index (so ~8b). Not sure what else neat stuff you could do. sipa&#x27;s work on tx format should be inspiring.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453000' id='584428'>
<a class='timestamp' href='#584428'><time timestamp='2017-12-05T05:50:00Z'>05:50</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
blockheight + index doesn&#x27;t work well at all, what about reorgs
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453060' id='584429'>
<a class='timestamp' href='#584429'><time timestamp='2017-12-05T05:51:00Z'>05:51</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Maybe keep track of last 1000 entries and undo all based on shared fork point height?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453060' id='584430'>
<a class='timestamp' href='#584430'><time timestamp='2017-12-05T05:51:00Z'>05:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
works fine, so long as you&#x27;re only tracking a single chain at a time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453060' id='584431'>
<a class='timestamp' href='#584431'><time timestamp='2017-12-05T05:51:00Z'>05:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
you have to back out the index and reapply.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453060' id='584432'>
<a class='timestamp' href='#584432'><time timestamp='2017-12-05T05:51:00Z'>05:51</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Could just look at block again and undo, yeah.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453180' id='584433'>
<a class='timestamp' href='#584433'><time timestamp='2017-12-05T05:53:00Z'>05:53</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
eh I suppose that&#x27;s right. SQL is a bit abstracted for me i&#x27;m not sure how it stores repeated data internally. f.ex. if you have a ton of tables with foreign keys do they store the keys repeatedly or use a more space efficient method.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453300' id='584434'>
<a class='timestamp' href='#584434'><time timestamp='2017-12-05T05:55:00Z'>05:55</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
for example on chain you might have a 256bit txid used hundreds of times if it has a bunch of outputs but you can probably just store that as a 32bit(?) incrementing integer on every tx you&#x27;ve seen since genesis.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453300' id='584435'>
<a class='timestamp' href='#584435'><time timestamp='2017-12-05T05:55:00Z'>05:55</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
I really doubt SQL would work well for this, but I could be wrong.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453360' id='584436'>
<a class='timestamp' href='#584436'><time timestamp='2017-12-05T05:56:00Z'>05:56</time></a>
&lt;<span class='nick nick-14'> Randolf</span>&gt;
esotericnonsense:  It depends on the SQL server software being used.  As far as I know, whatever you choose to store in the columns is what&#x27;s stored there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453420' id='584437'>
<a class='timestamp' href='#584437'><time timestamp='2017-12-05T05:57:00Z'>05:57</time></a>
&lt;<span class='nick nick-14'> Randolf</span>&gt;
esotericnonsense:  Usually it&#x27;s up to the DBA to choose to set up smaller IDs that reference more data in a separate row.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453480' id='584438'>
<a class='timestamp' href='#584438'><time timestamp='2017-12-05T05:58:00Z'>05:58</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
We&#x27;ve used up 6.5% of a uint32 (278236762/4294967295), but it could work for awhile at least.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453480' id='584439'>
<a class='timestamp' href='#584439'><time timestamp='2017-12-05T05:58:00Z'>05:58</time></a>
&lt;<span class='nick nick-14'> Randolf</span>&gt;
esotericnonsense:  For Bitcoin stuff, I&#x27;d create custom datatypes that save the data in binary format.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453540' id='584440'>
<a class='timestamp' href='#584440'><time timestamp='2017-12-05T05:59:00Z'>05:59</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
basically what i&#x27;m thinking is that these indexes can easily multiply the blockchain size by five  and possibly more depending on how you do it if you store the full data.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453540' id='584441'>
<a class='timestamp' href='#584441'><time timestamp='2017-12-05T05:59:00Z'>05:59</time></a>
&lt;<span class='nick nick-14'> Randolf</span>&gt;
It&#x27;s possible.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453600' id='584442'>
<a class='timestamp' href='#584442'><time timestamp='2017-12-05T06:00:00Z'>06:00</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
address -&gt; txlist, block -&gt; txlist, and tx (unless you don&#x27;t store tx but pull it out of a stored blockchain) is 3x txid
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453600' id='584443'>
<a class='timestamp' href='#584443'><time timestamp='2017-12-05T06:00:00Z'>06:00</time></a>
&lt;<span class='nick nick-14'> Randolf</span>&gt;
An index normally refers to an internal reference that&#x27;s usually smaller than the column data it&#x27;s indexing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453660' id='584444'>
<a class='timestamp' href='#584444'><time timestamp='2017-12-05T06:01:00Z'>06:01</time></a>
&lt;<span class='nick nick-14'> Randolf</span>&gt;
Can arrays help?  In PostgreSQL a column type can be an array.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453660' id='584445'>
<a class='timestamp' href='#584445'><time timestamp='2017-12-05T06:01:00Z'>06:01</time></a>
&lt;<span class='nick nick-14'> Randolf</span>&gt;
These can also be indexed efficiently.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512453720' id='584446'>
<a class='timestamp' href='#584446'><time timestamp='2017-12-05T06:02:00Z'>06:02</time></a>
&lt;<span class='nick nick-14'> Randolf</span>&gt;
While you&#x27;d still be storing TX data, you could cut down on the number of rows.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454080' id='584447'>
<a class='timestamp' href='#584447'><time timestamp='2017-12-05T06:08:00Z'>06:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
this sort of speculation isn&#x27;t so useful.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454140' id='584448'>
<a class='timestamp' href='#584448'><time timestamp='2017-12-05T06:09:00Z'>06:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
IIRC the abe schema wasn&#x27;t too offensively inefficienct, but there are overheads and billions of records add up... but nothing is really learned from this discussion.  just &quot;I think this would be not efficienct&quot; and &quot;I think it would be, maybe&quot; :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454140' id='584449'>
<a class='timestamp' href='#584449'><time timestamp='2017-12-05T06:09:00Z'>06:09</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
yeah agree.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454140' id='584450'>
<a class='timestamp' href='#584450'><time timestamp='2017-12-05T06:09:00Z'>06:09</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
I&#x27;ll just try a bunch of stuff I guess.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454200' id='584451'>
<a class='timestamp' href='#584451'><time timestamp='2017-12-05T06:10:00Z'>06:10</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
it sounds to me like what might be useful is to have a seperate service that only maintains the set of things core doesn&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454260' id='584452'>
<a class='timestamp' href='#584452'><time timestamp='2017-12-05T06:11:00Z'>06:11</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
so basically addrindex but as an external thing. all it needs is addr-&gt;[txids]. if you want the transactions just ask core rpc with txindex on
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454320' id='584453'>
<a class='timestamp' href='#584453'><time timestamp='2017-12-05T06:12:00Z'>06:12</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
that&#x27;d only need the core rpc api to remain (relatively) static and not have to be maintained as a thing on an ongoing basis if internals shuffle around.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454320' id='584454'>
<a class='timestamp' href='#584454'><time timestamp='2017-12-05T06:12:00Z'>06:12</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
If txs are stored as height+index you don&#x27;t even need txindex, at least if #10275 is merged.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454320' id='584455'>
<a class='timestamp' href='#584455'><time timestamp='2017-12-05T06:12:00Z'>06:12</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10275" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10275</a> | [rpc] Allow fetching tx directly from specified block in getrawtransaction by kallewoof · Pull Request #10275 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454380' id='584456'>
<a class='timestamp' href='#584456'><time timestamp='2017-12-05T06:13:00Z'>06:13</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
And yeah, we agreed this should be an external thing that either uses hooks in bitcoin or implements the p2p protocol and talks to the network directly.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454500' id='584457'>
<a class='timestamp' href='#584457'><time timestamp='2017-12-05T06:15:00Z'>06:15</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
i guess i was commenting on &quot;address -&gt; tx list, tx -&gt; address list, block -&gt; tx list&quot; and how i don&#x27;t think you need the latter two because bitcoind does it
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454500' id='584458'>
<a class='timestamp' href='#584458'><time timestamp='2017-12-05T06:15:00Z'>06:15</time></a>
&lt;<span class='nick nick-9'> * kallewoof</span>&gt;
nods
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454560' id='584459'>
<a class='timestamp' href='#584459'><time timestamp='2017-12-05T06:16:00Z'>06:16</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
I wasn&#x27;t assuming the person running had a local synced node. Maybe I should.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454620' id='584460'>
<a class='timestamp' href='#584460'><time timestamp='2017-12-05T06:17:00Z'>06:17</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
eh? addrindex implies that no? (well that or that you have rpc access anyway).
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454680' id='584461'>
<a class='timestamp' href='#584461'><time timestamp='2017-12-05T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
sipa had the idea of an efficient indexing service which speaks the p2p protocol.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454740' id='584462'>
<a class='timestamp' href='#584462'><time timestamp='2017-12-05T06:19:00Z'>06:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
that assumption saves you basically 1x copy of the blockchain at most, but then means you can&#x27;t run the indexer on the seperate hardware from the node or fail over between multiple nodes, etc.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454740' id='584463'>
<a class='timestamp' href='#584463'><time timestamp='2017-12-05T06:19:00Z'>06:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
or upgrade the node independantly from the indexer
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454920' id='584464'>
<a class='timestamp' href='#584464'><time timestamp='2017-12-05T06:22:00Z'>06:22</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454920' id='584465'>
<a class='timestamp' href='#584465'><time timestamp='2017-12-05T06:22:00Z'>06:22</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
(to not assume local node)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512454980' id='584466'>
<a class='timestamp' href='#584466'><time timestamp='2017-12-05T06:23:00Z'>06:23</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
i&#x27;m confused. you can run the indexer on seperate hardware just fine. failover works in the same way anyway (you can have multiple bitcoinds if you want)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512455040' id='584467'>
<a class='timestamp' href='#584467'><time timestamp='2017-12-05T06:24:00Z'>06:24</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
height+index storing of transactions becomes complicated in that case sure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512455100' id='584468'>
<a class='timestamp' href='#584468'><time timestamp='2017-12-05T06:25:00Z'>06:25</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Ultimately it doesn&#x27;t matter to the indexer if you have a local node or not. It won&#x27;t use it directly, it will use the p2p network. The only time it needs the RPC is when it wants to convert e.g. block height+index into a tx, but it might just as well give you the height+index pairs and let you deal yourself.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512455340' id='584469'>
<a class='timestamp' href='#584469'><time timestamp='2017-12-05T06:29:00Z'>06:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
also if the node the indexer is behind is pruned then the overhead of a redundant copy mostly goes away.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512455880' id='584470'>
<a class='timestamp' href='#584470'><time timestamp='2017-12-05T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
If the node is pruned, the indexer will not be able to use it for any lookups of block height &lt;= pruned height
<br>
</div>

<div class='talk op-msg' data-timestamp='1512455880' id='584471'>
<a class='timestamp' href='#584471'><time timestamp='2017-12-05T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-16'> * esotericnonsense</span>&gt;
is in a state of befuddlement
<br>
</div>

<div class='talk op-msg' data-timestamp='1512455940' id='584472'>
<a class='timestamp' href='#584472'><time timestamp='2017-12-05T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
if it has p2p logic (basically it&#x27;s a node) then what is the seperate bitcoind node being used for at all
<br>
</div>

<div class='talk op-msg' data-timestamp='1512455940' id='584473'>
<a class='timestamp' href='#584473'><time timestamp='2017-12-05T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
trusted verifier i guess?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512455940' id='584474'>
<a class='timestamp' href='#584474'><time timestamp='2017-12-05T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
The indexer doesn&#x27;t store anything but the indexing parts, so it needs a node to resolve the 8 byte (block height + tx index) into actual transactions. It could store the entire block chain while at it, but that seems a bit redundant.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512456000' id='584475'>
<a class='timestamp' href='#584475'><time timestamp='2017-12-05T06:40:00Z'>06:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
kallewoof: that seems inefficient
<br>
</div>

<div class='talk op-msg' data-timestamp='1512456000' id='584476'>
<a class='timestamp' href='#584476'><time timestamp='2017-12-05T06:40:00Z'>06:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
relying on a node for storage won&#x27;t gove the kind of performance a blockexplorer needs
<br>
</div>

<div class='talk op-msg' data-timestamp='1512456060' id='584477'>
<a class='timestamp' href='#584477'><time timestamp='2017-12-05T06:41:00Z'>06:41</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
I thought you were suggesting a p2p indexer that doesn&#x27;t depend on a local node. Why not use RPC then?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512456120' id='584478'>
<a class='timestamp' href='#584478'><time timestamp='2017-12-05T06:42:00Z'>06:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rpc is slow
<br>
</div>

<div class='talk op-msg' data-timestamp='1512456120' id='584479'>
<a class='timestamp' href='#584479'><time timestamp='2017-12-05T06:42:00Z'>06:42</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Or are you saying store the entire transaction in the indexer db?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512456120' id='584480'>
<a class='timestamp' href='#584480'><time timestamp='2017-12-05T06:42:00Z'>06:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1512456120' id='584481'>
<a class='timestamp' href='#584481'><time timestamp='2017-12-05T06:42:00Z'>06:42</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Ah     
<br>
</div>

<div class='talk op-msg' data-timestamp='1512465660' id='584482'>
<a class='timestamp' href='#584482'><time timestamp='2017-12-05T09:21:00Z'>09:21</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Hum. I could avoid a lot of reinventing wheels by simply requiring libbitcoin_[x].a in the indexer to link p2p stuff in. Potential minefield, but would be super easy to keep up to date with bitcoin core if it worked.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512465780' id='584483'>
<a class='timestamp' href='#584483'><time timestamp='2017-12-05T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Rewriting a minimal p2p codebase could be useful for lots of cases, but would need to be maintained to a greater degree.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512465840' id='584484'>
<a class='timestamp' href='#584484'><time timestamp='2017-12-05T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
also less important if its out of date... p2p protocol intentionally does not change frequently.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512465900' id='584485'>
<a class='timestamp' href='#584485'><time timestamp='2017-12-05T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
an indexer written against 0.2.10 would likely still work (though wouldn&#x27;t index p2sh/segwit, but that may not matter if you&#x27;re not using those things)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512465900' id='584486'>
<a class='timestamp' href='#584486'><time timestamp='2017-12-05T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
That&#x27;s a good point.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512466020' id='584487'>
<a class='timestamp' href='#584487'><time timestamp='2017-12-05T09:27:00Z'>09:27</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
I guess I&#x27;ll try linking directly and see how far that gets me. I suspect there will be a lot of issues where the bitcoin code expects a fully fledged bitcoin instance running.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512466080' id='584488'>
<a class='timestamp' href='#584488'><time timestamp='2017-12-05T09:28:00Z'>09:28</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
If not, not regularly maintained would not be a critical issue as you noted.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512473280' id='584489'>
<a class='timestamp' href='#584489'><time timestamp='2017-12-05T11:28:00Z'>11:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MeshCollider opened pull request #11829: Test datadir specified in conf file exists (master...201712_datadir_crash) <a href="https://github.com/bitcoin/bitcoin/pull/11829" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11829</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1512473400' id='584490'>
<a class='timestamp' href='#584490'><time timestamp='2017-12-05T11:30:00Z'>11:30</time></a>
&lt;<span class='nick nick-7'> luihuidui</span>&gt;
Hi core devs
<br>
</div>

<div class='talk op-msg' data-timestamp='1512483780' id='584491'>
<a class='timestamp' href='#584491'><time timestamp='2017-12-05T14:23:00Z'>14:23</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
ping jnewbery
<br>
</div>

<div class='talk op-msg' data-timestamp='1512483840' id='584492'>
<a class='timestamp' href='#584492'><time timestamp='2017-12-05T14:24:00Z'>14:24</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
is it possible to test .conf file?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512483840' id='584493'>
<a class='timestamp' href='#584493'><time timestamp='2017-12-05T14:24:00Z'>14:24</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
ref #11829
<br>
</div>

<div class='talk op-msg' data-timestamp='1512483840' id='584494'>
<a class='timestamp' href='#584494'><time timestamp='2017-12-05T14:24:00Z'>14:24</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/11829" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/11829</a> | Test datadir specified in conf file exists by MeshCollider · Pull Request #11829 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1512484140' id='584495'>
<a class='timestamp' href='#584495'><time timestamp='2017-12-05T14:29:00Z'>14:29</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
promag: do stuff like <a href="https://github.com/bitcoin/bitcoin/pull/10996/files#diff-7814a1916d2f12f31509d33370931974" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10996/files#diff-7814a1916d2f12f31509d33370931974</a> ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512484140' id='584496'>
<a class='timestamp' href='#584496'><time timestamp='2017-12-05T14:29:00Z'>14:29</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
aj: \m/
<br>
</div>

<div class='talk op-msg' data-timestamp='1512485640' id='584497'>
<a class='timestamp' href='#584497'><time timestamp='2017-12-05T14:54:00Z'>14:54</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hkjn opened pull request #11830: rpcuser.py: Use &#x27;python&#x27; not &#x27;python2&#x27; (master...rpcuser-py) <a href="https://github.com/bitcoin/bitcoin/pull/11830" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11830</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1512488460' id='584498'>
<a class='timestamp' href='#584498'><time timestamp='2017-12-05T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] TheBlueMatt opened pull request #11831: Always return true if AppInitMain got to the end (master...2017-12-startup-exit-return-code-race) <a href="https://github.com/bitcoin/bitcoin/pull/11831" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11831</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1512489360' id='584499'>
<a class='timestamp' href='#584499'><time timestamp='2017-12-05T15:56:00Z'>15:56</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
BlueMatt: I didn&#x27;t realise main thread was sitting there in WaitForShutdown
<br>
</div>

<div class='talk op-msg' data-timestamp='1512489360' id='584500'>
<a class='timestamp' href='#584500'><time timestamp='2017-12-05T15:56:00Z'>15:56</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmm?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512489420' id='584501'>
<a class='timestamp' href='#584501'><time timestamp='2017-12-05T15:57:00Z'>15:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ohoh, yea, we have a global thread that sits there and does nothing :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1512489420' id='584502'>
<a class='timestamp' href='#584502'><time timestamp='2017-12-05T15:57:00Z'>15:57</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
actually it does.. are we there yet? are we there yet? are we there yet? ..
<br>
</div>

<div class='talk op-msg' data-timestamp='1512489480' id='584503'>
<a class='timestamp' href='#584503'><time timestamp='2017-12-05T15:58:00Z'>15:58</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
heh     
<br>
</div>

<div class='talk op-msg' data-timestamp='1512489480' id='584504'>
<a class='timestamp' href='#584504'><time timestamp='2017-12-05T15:58:00Z'>15:58</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea...that
<br>
</div>

<div class='talk op-msg' data-timestamp='1512489540' id='584505'>
<a class='timestamp' href='#584505'><time timestamp='2017-12-05T15:59:00Z'>15:59</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
so zapwallettxes causes the process to exit with non-zero
<br>
</div>

<div class='talk op-msg' data-timestamp='1512489540' id='584506'>
<a class='timestamp' href='#584506'><time timestamp='2017-12-05T15:59:00Z'>15:59</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
Ive never seen that failure before, but I think its the race with ReacceptWalletTransactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1512489600' id='584507'>
<a class='timestamp' href='#584507'><time timestamp='2017-12-05T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
if nothing else that pr should be an improvement
<br>
</div>

<div class='talk op-msg' data-timestamp='1512489600' id='584508'>
<a class='timestamp' href='#584508'><time timestamp='2017-12-05T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
its crazy to have that race
<br>
</div>

<div class='talk op-msg' data-timestamp='1512495180' id='584509'>
<a class='timestamp' href='#584509'><time timestamp='2017-12-05T17:33:00Z'>17:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
off topic for at least 5 years: c++17 is now officia
<br>
</div>

<div class='talk op-msg' data-timestamp='1512496020' id='584510'>
<a class='timestamp' href='#584510'><time timestamp='2017-12-05T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
sipa: With these new C++ standards I&#x27;ll soon playing fast and loose with the word &quot;know&quot; when I say that I know C++
<br>
</div>

<div class='talk op-msg' data-timestamp='1512496020' id='584511'>
<a class='timestamp' href='#584511'><time timestamp='2017-12-05T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
*soon be
<br>
</div>

<div class='talk op-msg' data-timestamp='1512496200' id='584512'>
<a class='timestamp' href='#584512'><time timestamp='2017-12-05T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1512497880' id='584513'>
<a class='timestamp' href='#584513'><time timestamp='2017-12-05T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
BlueMatt, wait doesn&#x27;t WaitForShutdown wait in the kernel?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512498000' id='584514'>
<a class='timestamp' href='#584514'><time timestamp='2017-12-05T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
phantomcircuit: because signal handlers cant do &quot;things&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1512498000' id='584515'>
<a class='timestamp' href='#584515'><time timestamp='2017-12-05T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
so eg we cant do a cv notify in the SIGTERM signal handler
<br>
</div>

<div class='talk op-msg' data-timestamp='1512498000' id='584516'>
<a class='timestamp' href='#584516'><time timestamp='2017-12-05T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which is what we&#x27;d prefer to do
<br>
</div>

<div class='talk op-msg' data-timestamp='1512498060' id='584517'>
<a class='timestamp' href='#584517'><time timestamp='2017-12-05T18:21:00Z'>18:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
so <b>*something*</b> has to check for fShutdownRequested regularly
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501240' id='584518'>
<a class='timestamp' href='#584518'><time timestamp='2017-12-05T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: did i do something wrong when merging #10773? All travis master builds since report &#x27;HEAD was not signed with a trusted key!&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501240' id='584519'>
<a class='timestamp' href='#584519'><time timestamp='2017-12-05T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10773" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10773</a> | Shell script cleanups by practicalswift · Pull Request #10773 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501240' id='584520'>
<a class='timestamp' href='#584520'><time timestamp='2017-12-05T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
almost certainly, then
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501240' id='584521'>
<a class='timestamp' href='#584521'><time timestamp='2017-12-05T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
:p     
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501240' id='584522'>
<a class='timestamp' href='#584522'><time timestamp='2017-12-05T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: this is why you&#x27;re supposed to use the verify-commits pre-push-hook :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501300' id='584523'>
<a class='timestamp' href='#584523'><time timestamp='2017-12-05T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well where is the error?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501360' id='584524'>
<a class='timestamp' href='#584524'><time timestamp='2017-12-05T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s signed with the same key as all my previous merges
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501480' id='584525'>
<a class='timestamp' href='#584525'><time timestamp='2017-12-05T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: also, please document the pre-push things in developer-notes.md or so
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501480' id='584526'>
<a class='timestamp' href='#584526'><time timestamp='2017-12-05T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: well the pre-push-hook is only for the committers...and I could have sworn I&#x27;ve yelled at all of y&#x27;all about it
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501540' id='584527'>
<a class='timestamp' href='#584527'><time timestamp='2017-12-05T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
then create a committers.md or so
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501600' id='584528'>
<a class='timestamp' href='#584528'><time timestamp='2017-12-05T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cp contrib/verify-commits/pre-push-hook.sh .git/hooks/pre-push
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501600' id='584529'>
<a class='timestamp' href='#584529'><time timestamp='2017-12-05T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
or, if you prefer, echo &#x27;cp contrib/verify-commits/pre-push-hook.sh .git/hooks/pre-push&#x27; &gt; committers.md
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501660' id='584530'>
<a class='timestamp' href='#584530'><time timestamp='2017-12-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
please document it somewhere more permanently than IRC :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501660' id='584531'>
<a class='timestamp' href='#584531'><time timestamp='2017-12-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501660' id='584532'>
<a class='timestamp' href='#584532'><time timestamp='2017-12-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
as for travis, cant reproduce, so need to dig more, hold on
<br>
</div>

<div class='talk op-msg' data-timestamp='1512501840' id='584533'>
<a class='timestamp' href='#584533'><time timestamp='2017-12-05T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1512503880' id='584534'>
<a class='timestamp' href='#584534'><time timestamp='2017-12-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: ping?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512503880' id='584535'>
<a class='timestamp' href='#584535'><time timestamp='2017-12-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: did you extend your key&#x27;s (or subkey&#x27;s) expiry period?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512503880' id='584536'>
<a class='timestamp' href='#584536'><time timestamp='2017-12-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: for some reason travis keeps getting a copy where the A636E97631F767E0 subkey expires on oct 19, 2017
<br>
</div>

<div class='talk op-msg' data-timestamp='1512503880' id='584537'>
<a class='timestamp' href='#584537'><time timestamp='2017-12-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: no
<br>
</div>

<div class='talk op-msg' data-timestamp='1512503880' id='584538'>
<a class='timestamp' href='#584538'><time timestamp='2017-12-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
heh     
<br>
</div>

<div class='talk op-msg' data-timestamp='1512503940' id='584539'>
<a class='timestamp' href='#584539'><time timestamp='2017-12-05T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i can&#x27;t remember changing that, at least
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505020' id='584540'>
<a class='timestamp' href='#584540'><time timestamp='2017-12-05T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: lol, did you know POSIX echo is poorly-defined?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505020' id='584541'>
<a class='timestamp' href='#584541'><time timestamp='2017-12-05T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
?     
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505080' id='584542'>
<a class='timestamp' href='#584542'><time timestamp='2017-12-05T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sec     
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505140' id='584543'>
<a class='timestamp' href='#584543'><time timestamp='2017-12-05T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
BlueMatt: &quot;echo -e hi&quot; ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505140' id='584544'>
<a class='timestamp' href='#584544'><time timestamp='2017-12-05T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
aj: -e is implied for (some) \ things in dash, and you cant turn it off
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505260' id='584545'>
<a class='timestamp' href='#584545'><time timestamp='2017-12-05T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
BlueMatt: yeah. use printf or printf &quot;%s&quot; &quot;what you actually want to print&quot; ...
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505260' id='584546'>
<a class='timestamp' href='#584546'><time timestamp='2017-12-05T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
BlueMatt: That is why I always use python -c &quot;print(*__import__(\&quot;sys\&quot;).argv[1:])&quot; in my shell scripts
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505260' id='584547'>
<a class='timestamp' href='#584547'><time timestamp='2017-12-05T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505260' id='584548'>
<a class='timestamp' href='#584548'><time timestamp='2017-12-05T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
spudowiar: lolwat
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505320' id='584549'>
<a class='timestamp' href='#584549'><time timestamp='2017-12-05T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
BlueMatt: :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505380' id='584550'>
<a class='timestamp' href='#584550'><time timestamp='2017-12-05T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
I wonder if we should discuss #11833 here as it&#x27;s turned into a conversation that might be easier to have on IRC :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505380' id='584551'>
<a class='timestamp' href='#584551'><time timestamp='2017-12-05T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/11833" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/11833</a> | [Net] WebSocket support · Issue #11833 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505380' id='584552'>
<a class='timestamp' href='#584552'><time timestamp='2017-12-05T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] TheBlueMatt opened pull request #11834: [verify-commits] Fix gpg.sh&#x27;s echoing for commits with &#x27;\n&#x27; (master...2017-12-verify-commits-fix) <a href="https://github.com/bitcoin/bitcoin/pull/11834" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11834</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505620' id='584553'>
<a class='timestamp' href='#584553'><time timestamp='2017-12-05T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
spudowiar: lots of folks seem  like the &quot;bitcoin has a p2p network, lets shove more features in it so that <b>*everything*</b> can use it!&quot; approach, cause its easy, but it also doesnt scale....ultimately the bitcoin p2p network is full of garbage evil nodes anyway, its not magic...
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505620' id='584554'>
<a class='timestamp' href='#584554'><time timestamp='2017-12-05T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #11835: Add Travis check for unused Python imports (master...lint-python) <a href="https://github.com/bitcoin/bitcoin/pull/11835" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11835</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505680' id='584555'>
<a class='timestamp' href='#584555'><time timestamp='2017-12-05T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
BlueMatt: Awww, but I was trying to run bitcoind in the browser though :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505740' id='584556'>
<a class='timestamp' href='#584556'><time timestamp='2017-12-05T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
spudowiar: please build second network of servers which provide blockchain data, it&#x27;d be useful to have redundancy for bitcoind to sync from them, even
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505740' id='584557'>
<a class='timestamp' href='#584557'><time timestamp='2017-12-05T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(or...whats the wallet for that again? electrum?)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505800' id='584558'>
<a class='timestamp' href='#584558'><time timestamp='2017-12-05T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
huh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505920' id='584559'>
<a class='timestamp' href='#584559'><time timestamp='2017-12-05T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
Does --with-sysroot= work with Bitcoin Core?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505920' id='584560'>
<a class='timestamp' href='#584560'><time timestamp='2017-12-05T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
spudowiar: why the hell would you want to run bitcoind in the browser
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505920' id='584561'>
<a class='timestamp' href='#584561'><time timestamp='2017-12-05T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
achow101: Because I can, I guess?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505920' id='584562'>
<a class='timestamp' href='#584562'><time timestamp='2017-12-05T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
I&#x27;m a weird guy
<br>
</div>

<div class='talk op-msg' data-timestamp='1512505980' id='584563'>
<a class='timestamp' href='#584563'><time timestamp='2017-12-05T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
do you mean... compile with emscripten?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506040' id='584564'>
<a class='timestamp' href='#584564'><time timestamp='2017-12-05T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
sipa: Yeah, I&#x27;m using Emscripten and I have Bitcoin-Qt mostly working (except networking is disabled)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506040' id='584565'>
<a class='timestamp' href='#584565'><time timestamp='2017-12-05T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
And some graphics are acting wierd
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506040' id='584566'>
<a class='timestamp' href='#584566'><time timestamp='2017-12-05T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
*weird
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506040' id='584567'>
<a class='timestamp' href='#584567'><time timestamp='2017-12-05T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
neveraskedifheshould.gif
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506040' id='584568'>
<a class='timestamp' href='#584568'><time timestamp='2017-12-05T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
spudowiar: that&#x27;s pretty cool :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506580' id='584569'>
<a class='timestamp' href='#584569'><time timestamp='2017-12-05T20:43:00Z'>20:43</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: <a href="https://github.com/bitcoin/bitcoin/pull/11740/commits/f9cc6dcc65a9cd9ce72c7fbb6bde9d2efb71a8f7#r154686982" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11740/commits/f9cc6dcc65a9cd9ce72c7fbb6bde9d2efb71a8f7#r154686982</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506580' id='584570'>
<a class='timestamp' href='#584570'><time timestamp='2017-12-05T20:43:00Z'>20:43</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
can you elaborate? Can&#x27;t follow
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506640' id='584571'>
<a class='timestamp' href='#584571'><time timestamp='2017-12-05T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
jonasschnelli: the buffer comment?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506640' id='584572'>
<a class='timestamp' href='#584572'><time timestamp='2017-12-05T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506640' id='584573'>
<a class='timestamp' href='#584573'><time timestamp='2017-12-05T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
So accepting blocks up to NODE_NETWORK_LIMITED_MIN_BLOCKS(288)+2?`
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506700' id='584574'>
<a class='timestamp' href='#584574'><time timestamp='2017-12-05T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, that
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506820' id='584575'>
<a class='timestamp' href='#584575'><time timestamp='2017-12-05T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: current impl.: if you tip is 1000 and someone requests height 713, you will disconnect because (1000-713 == 289)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506820' id='584576'>
<a class='timestamp' href='#584576'><time timestamp='2017-12-05T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But you want disconnect 712 (==288 == within the treshold)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506820' id='584577'>
<a class='timestamp' href='#584577'><time timestamp='2017-12-05T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: I don&#x27;t see whats wrong with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506880' id='584578'>
<a class='timestamp' href='#584578'><time timestamp='2017-12-05T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: We already have a buffer of 144 (we have 144 additional blocks for the reorg buffer)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506880' id='584579'>
<a class='timestamp' href='#584579'><time timestamp='2017-12-05T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(goal is 144 [one day], +144 reorg buffer = 288)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506880' id='584580'>
<a class='timestamp' href='#584580'><time timestamp='2017-12-05T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
the service bit seems to imply that you can/will serve the top 288 blocks, but if you request a block, and then they get a new block before they respond to you, you get disconnected
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506880' id='584581'>
<a class='timestamp' href='#584581'><time timestamp='2017-12-05T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
even though you didnt violate the bip
<br>
</div>

<div class='talk op-msg' data-timestamp='1512506940' id='584582'>
<a class='timestamp' href='#584582'><time timestamp='2017-12-05T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess if a client detects that he will request at the very bottom of NODE_NETWORK_LIMITED_MIN_BLOCKS he needs to expect a disconnect
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507000' id='584583'>
<a class='timestamp' href='#584583'><time timestamp='2017-12-05T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I&#x27;d call the current implementation a violation of the BIP
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507000' id='584584'>
<a class='timestamp' href='#584584'><time timestamp='2017-12-05T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: what you propose would essentially increase the 144 block buffer leading to a similar event just two blocks higher?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507000' id='584585'>
<a class='timestamp' href='#584585'><time timestamp='2017-12-05T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
&quot;If signaled, the peer MUST be capable of serving at least the last 288 blocks &quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507000' id='584586'>
<a class='timestamp' href='#584586'><time timestamp='2017-12-05T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
the current implementation is clearly not capable of doign so
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507000' id='584587'>
<a class='timestamp' href='#584587'><time timestamp='2017-12-05T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: hmm? why? I can serve the last 288 blocks?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507000' id='584588'>
<a class='timestamp' href='#584588'><time timestamp='2017-12-05T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
if I request block at 288 deep, I do not expect to get disconnected for it, even if there is a race and you get another block at that same time
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507000' id='584589'>
<a class='timestamp' href='#584589'><time timestamp='2017-12-05T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
hmm..
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507060' id='584590'>
<a class='timestamp' href='#584590'><time timestamp='2017-12-05T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
while we&#x27;re on the bip (cause I just pulled it up): &quot;A safety buffer of additional 144 blocks to handle chain reorganizations SHOULD be taken into account when connecting to a peer signaling the NODE_NETWORK_LIMITED service bit.&quot; &lt;-- I have absolutely no idea what in the hell that means
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507060' id='584591'>
<a class='timestamp' href='#584591'><time timestamp='2017-12-05T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
<a href="https://github.com/bitcoin/bips/blob/master/bip-0159.mediawiki#counter-measures-for-peer-fingerprinting" class="link" target="_blank">https://github.com/bitcoin/bips/blob/master/bip-0159.mediawiki#counter-measures-for-peer-fingerprinting</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507060' id='584592'>
<a class='timestamp' href='#584592'><time timestamp='2017-12-05T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Okay... your right. Got your point!
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507120' id='584593'>
<a class='timestamp' href='#584593'><time timestamp='2017-12-05T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I mean you&#x27;re not <b>*really*</b> serving deeper, maybe one or two, but its certainly not a fingerprinting attack if everyone does it
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507120' id='584594'>
<a class='timestamp' href='#584594'><time timestamp='2017-12-05T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Though...
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507120' id='584595'>
<a class='timestamp' href='#584595'><time timestamp='2017-12-05T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But what if we use two blocks and other implementation would use a single block as additional buffer?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507120' id='584596'>
<a class='timestamp' href='#584596'><time timestamp='2017-12-05T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But... meh,.. doesn&#x27;t matter
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507120' id='584597'>
<a class='timestamp' href='#584597'><time timestamp='2017-12-05T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
then they&#x27;d already be fingerprintable because they have a different subver :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507120' id='584598'>
<a class='timestamp' href='#584598'><time timestamp='2017-12-05T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
let me just add two blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507120' id='584599'>
<a class='timestamp' href='#584599'><time timestamp='2017-12-05T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507180' id='584600'>
<a class='timestamp' href='#584600'><time timestamp='2017-12-05T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I&#x27;m still confused as to what you meant by that sentence in the BIP
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507180' id='584601'>
<a class='timestamp' href='#584601'><time timestamp='2017-12-05T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
&quot;A safety buffer of additional 144 blocks to handle chain reorganizations SHOULD be taken into account when connecting to a peer signaling the NODE_NETWORK_LIMITED service bit.&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507180' id='584602'>
<a class='timestamp' href='#584602'><time timestamp='2017-12-05T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I have no idea what that means
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507180' id='584603'>
<a class='timestamp' href='#584603'><time timestamp='2017-12-05T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
144? I thought that was supposted to advise 12.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507180' id='584604'>
<a class='timestamp' href='#584604'><time timestamp='2017-12-05T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think it means you should only connect out to a LIMITED peer if you don&#x27;t think you need more than 144 blocks (rather than 288)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507180' id='584605'>
<a class='timestamp' href='#584605'><time timestamp='2017-12-05T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: assume you are a light client and what to fetch a block within the last 144
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507240' id='584606'>
<a class='timestamp' href='#584606'><time timestamp='2017-12-05T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
what sipa said
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507240' id='584607'>
<a class='timestamp' href='#584607'><time timestamp='2017-12-05T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: elaborate? I&#x27;m still lost...
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507240' id='584608'>
<a class='timestamp' href='#584608'><time timestamp='2017-12-05T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: wat?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507240' id='584609'>
<a class='timestamp' href='#584609'><time timestamp='2017-12-05T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh jesus people.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507240' id='584610'>
<a class='timestamp' href='#584610'><time timestamp='2017-12-05T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: i think it means that you should only signal LIMITED if you keep the last 288 blocks, but only fetch from a peer if you think you don&#x27;t need more than 144
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507300' id='584611'>
<a class='timestamp' href='#584611'><time timestamp='2017-12-05T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: yea, sorry, that half I got, the <b>*why*</b> part I&#x27;m still missing...
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507300' id='584612'>
<a class='timestamp' href='#584612'><time timestamp='2017-12-05T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t know!
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507300' id='584613'>
<a class='timestamp' href='#584613'><time timestamp='2017-12-05T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: what&#x27;d we blow up?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507360' id='584614'>
<a class='timestamp' href='#584614'><time timestamp='2017-12-05T20:56:00Z'>20:56</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: It&#x27;s a kindly reminder for a reorg buffer...
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507360' id='584615'>
<a class='timestamp' href='#584615'><time timestamp='2017-12-05T20:56:00Z'>20:56</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: if you have a light client app, you need tip-150, don&#x27;t connect to LIMITED
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507360' id='584616'>
<a class='timestamp' href='#584616'><time timestamp='2017-12-05T20:56:00Z'>20:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: please read the prior discussions.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507360' id='584617'>
<a class='timestamp' href='#584617'><time timestamp='2017-12-05T20:56:00Z'>20:56</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: but do if you need block TIP-144
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507420' id='584618'>
<a class='timestamp' href='#584618'><time timestamp='2017-12-05T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(it&#x27;s pure informative)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507420' id='584619'>
<a class='timestamp' href='#584619'><time timestamp='2017-12-05T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it shouldn&#x27;t be just informative
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507420' id='584620'>
<a class='timestamp' href='#584620'><time timestamp='2017-12-05T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Technically, it&#x27;s always 288
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507420' id='584621'>
<a class='timestamp' href='#584621'><time timestamp='2017-12-05T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
gah     
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507420' id='584622'>
<a class='timestamp' href='#584622'><time timestamp='2017-12-05T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i vaguely remember discussions about shorter windows, but i wouldn&#x27;t know where to find them
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507420' id='584623'>
<a class='timestamp' href='#584623'><time timestamp='2017-12-05T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
look, the BIP requires you keep your last 288.  Thats it, the rest is advice.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507480' id='584624'>
<a class='timestamp' href='#584624'><time timestamp='2017-12-05T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
&quot;A safety buffer of additional 144 blocks to handle chain reorganizations SHOULD be taken into account when connecting to a peer signaling the NODE_NETWORK_LIMITED service bit.&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507480' id='584625'>
<a class='timestamp' href='#584625'><time timestamp='2017-12-05T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Is purely advice... you can&#x27;t set a MUST there IMO
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507480' id='584626'>
<a class='timestamp' href='#584626'><time timestamp='2017-12-05T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it can be a SHOULD
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507480' id='584627'>
<a class='timestamp' href='#584627'><time timestamp='2017-12-05T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If a client <u>_guesses_</u> it&#x27;s going to need blocks 285 ago, then a LIMITED peer is quite possibly useless to it: one, it&#x27;s estimate of how many it will need will not be accurate (there could have been more blocks) and even it if is, they could be on a fork from where the peer is.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507540' id='584628'>
<a class='timestamp' href='#584628'><time timestamp='2017-12-05T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes, that much I get, I&#x27;m just really confused as to where the N/2 came from there
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507540' id='584629'>
<a class='timestamp' href='#584629'><time timestamp='2017-12-05T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
why does the buffer need to be 2x what you want?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507540' id='584630'>
<a class='timestamp' href='#584630'><time timestamp='2017-12-05T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The actual correct behavior is complicated; if you&#x27;re estimating your need based on nothing but time you should be pretty conservative (n/2 for example).  If you have headers and know what you need, that doesn&#x27;t exist.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507600' id='584631'>
<a class='timestamp' href='#584631'><time timestamp='2017-12-05T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ok, it just seemed to be weird to be so specific...
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507720' id='584632'>
<a class='timestamp' href='#584632'><time timestamp='2017-12-05T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think the 144 number comes more out of &quot;if we want to be able to reliably serve 144, then our target will need to be higher, e.g. 288)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507780' id='584633'>
<a class='timestamp' href='#584633'><time timestamp='2017-12-05T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ok, fair
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507960' id='584634'>
<a class='timestamp' href='#584634'><time timestamp='2017-12-05T21:06:00Z'>21:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
it just reads funny, was my point :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1512507960' id='584635'>
<a class='timestamp' href='#584635'><time timestamp='2017-12-05T21:06:00Z'>21:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
jonasschnelli: wanna just squash and I&#x27;ll ack
<br>
</div>

<div class='talk op-msg' data-timestamp='1512508020' id='584636'>
<a class='timestamp' href='#584636'><time timestamp='2017-12-05T21:07:00Z'>21:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: Yeah. Just squashing (had to rebase anyways)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512508020' id='584637'>
<a class='timestamp' href='#584637'><time timestamp='2017-12-05T21:07:00Z'>21:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Give me a min
<br>
</div>

<div class='talk op-msg' data-timestamp='1512508260' id='584638'>
<a class='timestamp' href='#584638'><time timestamp='2017-12-05T21:11:00Z'>21:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
suresure
<br>
</div>

<div class='talk op-msg' data-timestamp='1512508860' id='584639'>
<a class='timestamp' href='#584639'><time timestamp='2017-12-05T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: done
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509160' id='584640'>
<a class='timestamp' href='#584640'><time timestamp='2017-12-05T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lol, how&#x27;s this for an idea: try to load libsensors and if it loads write cpu temperateure to debug.log on a regular basis
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509580' id='584641'>
<a class='timestamp' href='#584641'><time timestamp='2017-12-05T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/91eeaa03354b...5bea05bc1d17" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/91eeaa03354b...5bea05bc1d17</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509580' id='584642'>
<a class='timestamp' href='#584642'><time timestamp='2017-12-05T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master a38686c Matt Corallo: [verify-commits] Fix gpg.sh&#x27;s echoing for commits with &#x27;\n&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509580' id='584643'>
<a class='timestamp' href='#584643'><time timestamp='2017-12-05T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 5bea05b Pieter Wuille: Merge #11834: [verify-commits] Fix gpg.sh&#x27;s echoing for commits with &#x27;\n&#x27;...
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509580' id='584644'>
<a class='timestamp' href='#584644'><time timestamp='2017-12-05T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #11834: [verify-commits] Fix gpg.sh&#x27;s echoing for commits with &#x27;\n&#x27; (master...2017-12-verify-commits-fix) <a href="https://github.com/bitcoin/bitcoin/pull/11834" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11834</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509640' id='584645'>
<a class='timestamp' href='#584645'><time timestamp='2017-12-05T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: oh no, moar dependencies.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509640' id='584646'>
<a class='timestamp' href='#584646'><time timestamp='2017-12-05T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-13'> jimpo</span>&gt;
Is there a preferred implementation of union/variant types? I know about boost::variant, but I&#x27;ve heard Core is trying to use boost less.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509640' id='584647'>
<a class='timestamp' href='#584647'><time timestamp='2017-12-05T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: well you could do a if-you-cant-find-dep-dont-print-temp
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509640' id='584648'>
<a class='timestamp' href='#584648'><time timestamp='2017-12-05T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: but it&#x27;d be so nice in debugging peoples&#x27; rejecting-chain issues to see debug.log entries that say &quot;WARNING: My hardware is overheating garbage, dont trust output&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509640' id='584649'>
<a class='timestamp' href='#584649'><time timestamp='2017-12-05T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jimpo: std::variant in c++17 ? :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509700' id='584650'>
<a class='timestamp' href='#584650'><time timestamp='2017-12-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-13'> jimpo</span>&gt;
Oh, is C++17 allowed/enabled?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509700' id='584651'>
<a class='timestamp' href='#584651'><time timestamp='2017-12-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lol no
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509700' id='584652'>
<a class='timestamp' href='#584652'><time timestamp='2017-12-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-13'> jimpo</span>&gt;
derp
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509700' id='584653'>
<a class='timestamp' href='#584653'><time timestamp='2017-12-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no     
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509700' id='584654'>
<a class='timestamp' href='#584654'><time timestamp='2017-12-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it was just officially published... today
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509700' id='584655'>
<a class='timestamp' href='#584655'><time timestamp='2017-12-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
is it even in debian-testing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509700' id='584656'>
<a class='timestamp' href='#584656'><time timestamp='2017-12-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i think clang supports it
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509700' id='584657'>
<a class='timestamp' href='#584657'><time timestamp='2017-12-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
needs GCC 7
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509760' id='584658'>
<a class='timestamp' href='#584658'><time timestamp='2017-12-05T21:36:00Z'>21:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and Clang 5
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509760' id='584659'>
<a class='timestamp' href='#584659'><time timestamp='2017-12-05T21:36:00Z'>21:36</time></a>
&lt;<span class='nick nick-13'> jimpo</span>&gt;
Ah, that explains why std::variant came up in searches today and I didn&#x27;t see it a month ago
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509820' id='584660'>
<a class='timestamp' href='#584660'><time timestamp='2017-12-05T21:37:00Z'>21:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
to be fair, the last month or so was just formally for ISO to publish it
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509820' id='584661'>
<a class='timestamp' href='#584661'><time timestamp='2017-12-05T21:37:00Z'>21:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it was exactly known what the spec would be
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509820' id='584662'>
<a class='timestamp' href='#584662'><time timestamp='2017-12-05T21:37:00Z'>21:37</time></a>
&lt;<span class='nick nick-13'> jimpo</span>&gt;
So is a ghetto struct with an enum + union preferred to boost::variant?
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509880' id='584663'>
<a class='timestamp' href='#584663'><time timestamp='2017-12-05T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think you can use boost::variant, as we&#x27;re already using it anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509880' id='584664'>
<a class='timestamp' href='#584664'><time timestamp='2017-12-05T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-13'> jimpo</span>&gt;
k     
<br>
</div>

<div class='talk op-msg' data-timestamp='1512509880' id='584665'>
<a class='timestamp' href='#584665'><time timestamp='2017-12-05T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
if you can keep it in a cpp, use boost::variant, if its in an infection header....ugh, but maybe ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1512513420' id='584666'>
<a class='timestamp' href='#584666'><time timestamp='2017-12-05T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jimpo: boost is fine outside of libconsensus I think
<br>
</div>

<div class='talk op-msg' data-timestamp='1512513480' id='584667'>
<a class='timestamp' href='#584667'><time timestamp='2017-12-05T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-2'> GAit</span>&gt;
patches to get core to build with the ndk (working on android shell with no deps or glibc/LD_LIBRARY_PATH hacks) if anyone is interested can be reviewed at <a href="https://github.com/greenaddress/bitcoin_ndk" class="link" target="_blank">https://github.com/greenaddress/bitcoin_ndk</a>  - warning, just like abcore, these patches are also very alpha and currently I don&#x27;t think there&#x27;s anything worth making an upstream PR for. and fwiw later ndk releases seem to fail.
<br>
</div>

<div class='talk op-msg' data-timestamp='1512513600' id='584668'>
<a class='timestamp' href='#584668'><time timestamp='2017-12-05T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-2'> GAit</span>&gt;
mostly deals with setting up the toolchain and patching some different headers or things missing in android (ifaddrs for example)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512515400' id='584669'>
<a class='timestamp' href='#584669'><time timestamp='2017-12-05T23:10:00Z'>23:10</time></a>
&lt;<span class='nick nick-6'> TD-Linux</span>&gt;
BlueMatt, I think a built-in memtest would be a better use of time :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1512515460' id='584670'>
<a class='timestamp' href='#584670'><time timestamp='2017-12-05T23:11:00Z'>23:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
TD-Linux: that is almost certainly true
<br>
</div>

<div class='talk op-msg' data-timestamp='1512516480' id='584671'>
<a class='timestamp' href='#584671'><time timestamp='2017-12-05T23:28:00Z'>23:28</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
iirc there are user space memtest utilities but i dont see how they can actually be effective unless they use all available memory
<br>
</div>

<div class='talk op-msg' data-timestamp='1512516600' id='584672'>
<a class='timestamp' href='#584672'><time timestamp='2017-12-05T23:30:00Z'>23:30</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
BlueMatt, ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1512516660' id='584673'>
<a class='timestamp' href='#584673'><time timestamp='2017-12-05T23:31:00Z'>23:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I think, or at least have a suspicion, that half our user-memory-corruption errors are due to cpu overheating and writing garbage
<br>
</div>

<div class='talk op-msg' data-timestamp='1512516660' id='584674'>
<a class='timestamp' href='#584674'><time timestamp='2017-12-05T23:31:00Z'>23:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but that isnt based on much and may be very bogus
<br>
</div>

<div class='talk op-msg' data-timestamp='1512516720' id='584675'>
<a class='timestamp' href='#584675'><time timestamp='2017-12-05T23:32:00Z'>23:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
hmm     
<br>
</div>

<div class='talk op-msg' data-timestamp='1512516720' id='584676'>
<a class='timestamp' href='#584676'><time timestamp='2017-12-05T23:32:00Z'>23:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
indeed that would be caught with a pretty simple test
<br>
</div>

<div class='talk op-msg' data-timestamp='1512516720' id='584677'>
<a class='timestamp' href='#584677'><time timestamp='2017-12-05T23:32:00Z'>23:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
just load some test vectors and check siphash results
<br>
</div>

<div class='talk op-msg' data-timestamp='1512516780' id='584678'>
<a class='timestamp' href='#584678'><time timestamp='2017-12-05T23:33:00Z'>23:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, I mean its a shame we have assumevalid now...otherwise I&#x27;d suggest just busywaiting one or two of the script check threads with something like that
<br>
</div>

<div class='talk op-msg' data-timestamp='1512518160' id='584679'>
<a class='timestamp' href='#584679'><time timestamp='2017-12-05T23:56:00Z'>23:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we could make block validation fails sleep for a second then try again... and log&amp;crash if successful the second time.
<br>
</div>

</div>
</section>

</body>
</html>
