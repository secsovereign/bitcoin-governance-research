<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-05-12
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-05-12' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:24 UTC</pre>
<pre><a href="/bitcoin-core-dev/2017-04-12">&lt;</a><span class='header'>     May 2017     </span><a href="/bitcoin-core-dev/2017-06-12">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;    <a class="" href="/bitcoin-core-dev/2017-05-01">1</a>  <a class="" href="/bitcoin-core-dev/2017-05-02">2</a>  <a class="" href="/bitcoin-core-dev/2017-05-03">3</a>  <a class="" href="/bitcoin-core-dev/2017-05-04">4</a>  <a class="" href="/bitcoin-core-dev/2017-05-05">5</a>  <a class="" href="/bitcoin-core-dev/2017-05-06">6</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-05-07">7</a>  <a class="" href="/bitcoin-core-dev/2017-05-08">8</a>  <a class="" href="/bitcoin-core-dev/2017-05-09">9</a> <a class="" href="/bitcoin-core-dev/2017-05-10">10</a> <a class="" href="/bitcoin-core-dev/2017-05-11">11</a> <a class="current" href="/bitcoin-core-dev/2017-05-12">12</a> <a class="" href="/bitcoin-core-dev/2017-05-13">13</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-05-14">14</a> <a class="" href="/bitcoin-core-dev/2017-05-15">15</a> <a class="" href="/bitcoin-core-dev/2017-05-16">16</a> <a class="" href="/bitcoin-core-dev/2017-05-17">17</a> <a class="" href="/bitcoin-core-dev/2017-05-18">18</a> <a class="" href="/bitcoin-core-dev/2017-05-19">19</a> <a class="" href="/bitcoin-core-dev/2017-05-20">20</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-05-21">21</a> <a class="" href="/bitcoin-core-dev/2017-05-22">22</a> <a class="" href="/bitcoin-core-dev/2017-05-23">23</a> <a class="" href="/bitcoin-core-dev/2017-05-24">24</a> <a class="" href="/bitcoin-core-dev/2017-05-25">25</a> <a class="" href="/bitcoin-core-dev/2017-05-26">26</a> <a class="" href="/bitcoin-core-dev/2017-05-27">27</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-05-28">28</a> <a class="" href="/bitcoin-core-dev/2017-05-29">29</a> <a class="" href="/bitcoin-core-dev/2017-05-30">30</a> <a class="" href="/bitcoin-core-dev/2017-05-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1494549300' id='545311'>
<a class='timestamp' href='#545311'><time timestamp='2017-05-12T00:35:00Z'>00:35</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
sipa, could you plot as CDF?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494549360' id='545312'>
<a class='timestamp' href='#545312'><time timestamp='2017-05-12T00:36:00Z'>00:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
instagibbs: <a href="https://bitcoin.sipa.be/depths.xz" class="link" target="_blank">https://bitcoin.sipa.be/depths.xz</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1494549360' id='545313'>
<a class='timestamp' href='#545313'><time timestamp='2017-05-12T00:36:00Z'>00:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
have fun :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494549480' id='545314'>
<a class='timestamp' href='#545314'><time timestamp='2017-05-12T00:38:00Z'>00:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;ve been chewing on that data, and I don&#x27;t think it really supports the 144 block target very much.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494550920' id='545315'>
<a class='timestamp' href='#545315'><time timestamp='2017-05-12T01:02:00Z'>01:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: do you have more detailed data?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494551280' id='545316'>
<a class='timestamp' href='#545316'><time timestamp='2017-05-12T01:08:00Z'>01:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i have timestamps + depth for each block transfer
<br>
</div>

<div class='talk op-msg' data-timestamp='1494551400' id='545317'>
<a class='timestamp' href='#545317'><time timestamp='2017-05-12T01:10:00Z'>01:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
logically we&#x27;d want to put our breakpoints at peaks in the second derivative of the total blocks served (the cumulative version of that data).  Which would in peaks of the derivative of your data.. but it&#x27;s measurements so getting a useful derivative is hard.   working from a smoothed spline it looks like the peaks are at 29, 199, and then there is so much periodic behavior that its hard to see 
<br>
</div>

<div class='talk op-msg' data-timestamp='1494551400' id='545318'>
<a class='timestamp' href='#545318'><time timestamp='2017-05-12T01:10:00Z'>01:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
any other trend.   What I think I&#x27;m seeing is 24 hour-ish cycles,  but they&#x27;re spread out in block count due to difficulty changing. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1494551400' id='545319'>
<a class='timestamp' href='#545319'><time timestamp='2017-05-12T01:10:00Z'>01:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
e.g. if you want to fully capture a 24-hour sycle then perhaps you need 200 blocks, because there can be 200 blocks in a day.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494551520' id='545320'>
<a class='timestamp' href='#545320'><time timestamp='2017-05-12T01:12:00Z'>01:12</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
gmaxwell: when have I last responded to a post that you think wasn&#x27;t worth responding too?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494552120' id='545321'>
<a class='timestamp' href='#545321'><time timestamp='2017-05-12T01:22:00Z'>01:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
petertodd: I can&#x27;t think of a recent example, remark wasn&#x27;t intended to criticize your behavior. Sorry if it came off that way.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494553620' id='545322'>
<a class='timestamp' href='#545322'><time timestamp='2017-05-12T01:47:00Z'>01:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: so from this data, I&#x27;m not seeing a lot of justification for anything but a single level at around 200 blocks +plus a dozen or so blocks for headroom (so, e.g. 288 would be fine).    If I use a cumulative maximum from the end to estimate how many transfers are due to fullsync-- there are 107, if then subtract those off, 90% of the cumulative transfer is met by depth 244, and 99% by 410.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494556680' id='545323'>
<a class='timestamp' href='#545323'><time timestamp='2017-05-12T02:38:00Z'>02:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] instagibbs opened pull request #10390: [wallet] remove minimum total fee option (master...killminfee) <a href="https://github.com/bitcoin/bitcoin/pull/10390" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10390</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1494562560' id='545324'>
<a class='timestamp' href='#545324'><time timestamp='2017-05-12T04:16:00Z'>04:16</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] luke-jr opened pull request #10391: OP_CHECKBLOCKATHEIGHT anti-replay (BIP 115; logic only) (master...cbah) <a href="https://github.com/bitcoin/bitcoin/pull/10391" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10391</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1494569400' id='545325'>
<a class='timestamp' href='#545325'><time timestamp='2017-05-12T06:10:00Z'>06:10</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: Agree on what you said about the bitcoin-dev list. I refuse to answer.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494569760' id='545326'>
<a class='timestamp' href='#545326'><time timestamp='2017-05-12T06:16:00Z'>06:16</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
jonasschnelli: here I was thinking about the &quot;2048&quot; of coin selection
<br>
</div>

<div class='talk op-msg' data-timestamp='1494569760' id='545327'>
<a class='timestamp' href='#545327'><time timestamp='2017-05-12T06:16:00Z'>06:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
2048?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494569820' id='545328'>
<a class='timestamp' href='#545328'><time timestamp='2017-05-12T06:17:00Z'>06:17</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
<a href="https://gabrielecirulli.github.io/2048/" class="link" target="_blank">https://gabrielecirulli.github.io/2048/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1494569880' id='545329'>
<a class='timestamp' href='#545329'><time timestamp='2017-05-12T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I wasn&#x27;t aware of that game,...
<br>
</div>

<div class='talk op-msg' data-timestamp='1494569880' id='545330'>
<a class='timestamp' href='#545330'><time timestamp='2017-05-12T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-12'> * jonasschnelli</span>&gt;
&#x27;s productive goes rapidly down
<br>
</div>

<div class='talk op-msg' data-timestamp='1494569880' id='545331'>
<a class='timestamp' href='#545331'><time timestamp='2017-05-12T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
jonasschnelli: ha, my bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1494569940' id='545332'>
<a class='timestamp' href='#545332'><time timestamp='2017-05-12T06:19:00Z'>06:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
;-)     
<br>
</div>

<div class='talk op-msg' data-timestamp='1494570180' id='545333'>
<a class='timestamp' href='#545333'><time timestamp='2017-05-12T06:23:00Z'>06:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: oh god, i lost about 6 months of my life to that game
<br>
</div>

<div class='talk op-msg' data-timestamp='1494585900' id='545334'>
<a class='timestamp' href='#545334'><time timestamp='2017-05-12T10:45:00Z'>10:45</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
gmaxwell: no worries, I was just wondering if there was something I missed :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494585900' id='545335'>
<a class='timestamp' href='#545335'><time timestamp='2017-05-12T10:45:00Z'>10:45</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
gmaxwell: I&#x27;m sure I&#x27;ve done that in the far past! :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494590400' id='545336'>
<a class='timestamp' href='#545336'><time timestamp='2017-05-12T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-7'> SopaXorzTaker</span>&gt;
the possibility of ASICBOOST is a vulnerability in the PoW
<br>
</div>

<div class='talk op-msg' data-timestamp='1494590400' id='545337'>
<a class='timestamp' href='#545337'><time timestamp='2017-05-12T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-7'> SopaXorzTaker</span>&gt;
let&#x27;s fix it now
<br>
</div>

<div class='talk op-msg' data-timestamp='1494590460' id='545338'>
<a class='timestamp' href='#545338'><time timestamp='2017-05-12T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-7'> SopaXorzTaker</span>&gt;
then Bitmain would finally move their fat lazy... uhm and accept SegWit
<br>
</div>

<div class='talk op-msg' data-timestamp='1494590520' id='545339'>
<a class='timestamp' href='#545339'><time timestamp='2017-05-12T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-7'> SopaXorzTaker</span>&gt;
I mean, that&#x27;s suggested on Reddit and is definitely about the Core
<br>
</div>

<div class='talk op-msg' data-timestamp='1494593700' id='545340'>
<a class='timestamp' href='#545340'><time timestamp='2017-05-12T12:55:00Z'>12:55</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: what do you think about ryanofsky comment here? <a href="https://github.com/bitcoin/bitcoin/pull/8501#discussion_r115811850" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8501#discussion_r115811850</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1494593760' id='545341'>
<a class='timestamp' href='#545341'><time timestamp='2017-05-12T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess the 26bytes may be padded to 32... so I guess ryanofsky is right here.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494597420' id='545342'>
<a class='timestamp' href='#545342'><time timestamp='2017-05-12T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-7'> SopaXorzTaker</span>&gt;
jonasschnelli, hey
<br>
</div>

<div class='talk op-msg' data-timestamp='1494597480' id='545343'>
<a class='timestamp' href='#545343'><time timestamp='2017-05-12T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-7'> SopaXorzTaker</span>&gt;
could I ask for some offtopic help?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494597660' id='545344'>
<a class='timestamp' href='#545344'><time timestamp='2017-05-12T14:01:00Z'>14:01</time></a>
&lt;<span class='nick nick-10'> vedochiaro</span>&gt;
ciao
<br>
</div>

<div class='talk op-msg' data-timestamp='1494597660' id='545345'>
<a class='timestamp' href='#545345'><time timestamp='2017-05-12T14:01:00Z'>14:01</time></a>
&lt;<span class='nick nick-10'> vedochiaro</span>&gt;
musica anni 80
<br>
</div>

<div class='talk op-msg' data-timestamp='1494600060' id='545346'>
<a class='timestamp' href='#545346'><time timestamp='2017-05-12T14:41:00Z'>14:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
SopaXorzTaker: shoot
<br>
</div>

<div class='talk op-msg' data-timestamp='1494600060' id='545347'>
<a class='timestamp' href='#545347'><time timestamp='2017-05-12T14:41:00Z'>14:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
If its offtopic use a on-topic channel or PM me
<br>
</div>

<div class='talk op-msg' data-timestamp='1494600300' id='545348'>
<a class='timestamp' href='#545348'><time timestamp='2017-05-12T14:45:00Z'>14:45</time></a>
&lt;<span class='nick nick-8'> cchadwicka</span>&gt;
i need to find an online wallet that allows me to buy bitcoin from within the wallet with a credit card, like coinbase, but a different one
<br>
</div>

<div class='talk op-msg' data-timestamp='1494600300' id='545349'>
<a class='timestamp' href='#545349'><time timestamp='2017-05-12T14:45:00Z'>14:45</time></a>
&lt;<span class='nick nick-8'> cchadwicka</span>&gt;
any ideas
<br>
</div>

<div class='talk op-msg' data-timestamp='1494600360' id='545350'>
<a class='timestamp' href='#545350'><time timestamp='2017-05-12T14:46:00Z'>14:46</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
cchadwicka, #bitcoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1494600360' id='545351'>
<a class='timestamp' href='#545351'><time timestamp='2017-05-12T14:46:00Z'>14:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
cchadwicka: please no cross posts... use #bitcoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1494600420' id='545352'>
<a class='timestamp' href='#545352'><time timestamp='2017-05-12T14:47:00Z'>14:47</time></a>
&lt;<span class='nick nick-8'> cchadwicka</span>&gt;
i am banned from bitcoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1494600420' id='545353'>
<a class='timestamp' href='#545353'><time timestamp='2017-05-12T14:47:00Z'>14:47</time></a>
&lt;<span class='nick nick-8'> cchadwicka</span>&gt;
im new here and they kicked me out yesterday
<br>
</div>

<div class='talk op-msg' data-timestamp='1494600420' id='545354'>
<a class='timestamp' href='#545354'><time timestamp='2017-05-12T14:47:00Z'>14:47</time></a>
&lt;<span class='nick nick-8'> cchadwicka</span>&gt;
because i was off topic
<br>
</div>

<div class='talk op-msg' data-timestamp='1494600480' id='545355'>
<a class='timestamp' href='#545355'><time timestamp='2017-05-12T14:48:00Z'>14:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and if you keep posting offtopic things here, i&#x27;ll ban you too
<br>
</div>

<div class='talk op-msg' data-timestamp='1494600900' id='545356'>
<a class='timestamp' href='#545356'><time timestamp='2017-05-12T14:55:00Z'>14:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: absolutely, you need to pack the bytes if you want to save space on it
<br>
</div>

<div class='talk op-msg' data-timestamp='1494600900' id='545357'>
<a class='timestamp' href='#545357'><time timestamp='2017-05-12T14:55:00Z'>14:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: but don&#x27;t bother, saving 2 bytes in such a structure is negligablr
<br>
</div>

<div class='talk op-msg' data-timestamp='1494606000' id='545358'>
<a class='timestamp' href='#545358'><time timestamp='2017-05-12T16:20:00Z'>16:20</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
jonasschnelli: fundrawtransaction complains about minimum fee policy when i set feeRate to 0; i have an output with the fee and i was just going to delete the output later...
<br>
</div>

<div class='talk op-msg' data-timestamp='1494606120' id='545359'>
<a class='timestamp' href='#545359'><time timestamp='2017-05-12T16:22:00Z'>16:22</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
&quot;Note that all inputs selected must be of standard form and P2SH scripts must be in the wallet using importaddress or addmultisigaddress (to calculate fees).&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1494606180' id='545360'>
<a class='timestamp' href='#545360'><time timestamp='2017-05-12T16:23:00Z'>16:23</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
does that mean that if i&#x27;m spending p2sh inputs that my wallet doesn&#x27;t know about (except by importaddress p2sh-address) in my fundrawtransaction input transaction, do i need to first run importaddress redeemscript?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494606360' id='545361'>
<a class='timestamp' href='#545361'><time timestamp='2017-05-12T16:26:00Z'>16:26</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
really i just want it to ignore my existing inputs-- i could easily pass my estimate of the final transaction size, if necessary.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494607080' id='545362'>
<a class='timestamp' href='#545362'><time timestamp='2017-05-12T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
this seems related <a href="https://github.com/bitcoin/bitcoin/pull/9965" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9965</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1494607140' id='545363'>
<a class='timestamp' href='#545363'><time timestamp='2017-05-12T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
this claims to override minimum estimated fee but i get error &quot;Transaction too large for fee policy&quot; with feeRate=0 <a href="https://github.com/bitcoin/bitcoin/pull/7967" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7967</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1494607920' id='545364'>
<a class='timestamp' href='#545364'><time timestamp='2017-05-12T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
kanzure, ah, yes that&#x27;s a check I&#x27;ve always wondered about, that sounds like a sharp edge
<br>
</div>

<div class='talk op-msg' data-timestamp='1494607920' id='545365'>
<a class='timestamp' href='#545365'><time timestamp='2017-05-12T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
It&#x27;s checking the fee you&#x27;re getting against the entire transaction size once constructed
<br>
</div>

<div class='talk op-msg' data-timestamp='1494607920' id='545366'>
<a class='timestamp' href='#545366'><time timestamp='2017-05-12T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
sure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494608280' id='545367'>
<a class='timestamp' href='#545367'><time timestamp='2017-05-12T16:58:00Z'>16:58</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I don&#x27;t totally get the check&#x27;s reasoning tbh.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494608280' id='545368'>
<a class='timestamp' href='#545368'><time timestamp='2017-05-12T16:58:00Z'>16:58</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
/ If we made it here and we aren&#x27;t even able to meet the relay fee on the next pass, give up
<br>
</div>

<div class='talk op-msg' data-timestamp='1494608280' id='545369'>
<a class='timestamp' href='#545369'><time timestamp='2017-05-12T16:58:00Z'>16:58</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
                // because we must be at the maximum allowed fee.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494608520' id='545370'>
<a class='timestamp' href='#545370'><time timestamp='2017-05-12T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
workaround: create a fake transaction of the same size as the estimated final size of my unsigned watchonly-p2sh-spending transaction, and then use fundrawtransaction and i&#x27;ll pass a realistic feeRate value.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494608520' id='545371'>
<a class='timestamp' href='#545371'><time timestamp='2017-05-12T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I think the check is just supposed to be reversed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494608520' id='545372'>
<a class='timestamp' href='#545372'><time timestamp='2017-05-12T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
and then i&#x27;ll delete the fake inputs/outputs from the fundrawtransaction output.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494608700' id='545373'>
<a class='timestamp' href='#545373'><time timestamp='2017-05-12T17:05:00Z'>17:05</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
specifically my problem is that fundrawtransaction gives me &quot;Signing transaction failed&quot; when i directly pass my unsigned watcholy-p2sh-spending transaction as the input to fundrawtransaction.  so i figured hey i&#x27;ll just set feeRate to 0 on a dummy transaction, add a change output that i&#x27;ll delete later, and then use fundrawtransaction... which also has problems.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494608700' id='545374'>
<a class='timestamp' href='#545374'><time timestamp='2017-05-12T17:05:00Z'>17:05</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
*watchonly
<br>
</div>

<div class='talk op-msg' data-timestamp='1494608820' id='545375'>
<a class='timestamp' href='#545375'><time timestamp='2017-05-12T17:07:00Z'>17:07</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
possibly related: <a href="https://github.com/bitcoin/bitcoin/pull/10202" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10202</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1494609180' id='545376'>
<a class='timestamp' href='#545376'><time timestamp='2017-05-12T17:13:00Z'>17:13</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
replied, <a href="https://github.com/bitcoin/bitcoin/pull/10202#issuecomment-301134038" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10202#issuecomment-301134038</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1494609840' id='545377'>
<a class='timestamp' href='#545377'><time timestamp='2017-05-12T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
instagibbs: okay here is my new workaround.   createrawtransaction with a change output spending back to myself the total fee that i would like to spend. fundrawtransaction with reasonable feeRate.  using fundrawtransaction output dictionary, i&#x27;ll switch the &quot;change&quot; output amount to be the fundrawtransaction fee amount, so ultimately there is no extra fee and my original &quot;fee&quot; request shou...
<br>
</div>

<div class='talk op-msg' data-timestamp='1494609840' id='545378'>
<a class='timestamp' href='#545378'><time timestamp='2017-05-12T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
...ld be satisfied.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494609900' id='545379'>
<a class='timestamp' href='#545379'><time timestamp='2017-05-12T17:25:00Z'>17:25</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
and the final transaction will have two change outputs (unless i consolidate).
<br>
</div>

<div class='talk op-msg' data-timestamp='1494612120' id='545380'>
<a class='timestamp' href='#545380'><time timestamp='2017-05-12T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
Are GetDustThreshold and IsDust expected to be called with dustRelayFee other than ::dustRelayFee?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494612660' id='545381'>
<a class='timestamp' href='#545381'><time timestamp='2017-05-12T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
It seems surprising behavior to me to have the wallet simply reduce the fee if it hits maxTxFee, other than panic and abort.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494612780' id='545382'>
<a class='timestamp' href='#545382'><time timestamp='2017-05-12T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
rather than*
<br>
</div>

<div class='talk op-msg' data-timestamp='1494613560' id='545383'>
<a class='timestamp' href='#545383'><time timestamp='2017-05-12T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
huh, signrawtransaction also gives me an error (&quot;Operation not valid with the current stack size&quot;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494613560' id='545384'>
<a class='timestamp' href='#545384'><time timestamp='2017-05-12T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Hmm, I think I have had that problem when I forgot to call fundrawtransaction first? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1494613620' id='545385'>
<a class='timestamp' href='#545385'><time timestamp='2017-05-12T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
i have definitely called fundrawtransaction; i excised the inputs and outputs, and added them to my unsigned p2sh-spending transaction.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494613860' id='545386'>
<a class='timestamp' href='#545386'><time timestamp='2017-05-12T18:31:00Z'>18:31</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
with watch-only p2sh spending txs the redeemScript is imported right? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1494613920' id='545387'>
<a class='timestamp' href='#545387'><time timestamp='2017-05-12T18:32:00Z'>18:32</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
i am spending watch-only p2sh transactions, however i did not pass includeWatching to fundrawtransaction -- i supplied an unsigned transaction to start with.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494613980' id='545388'>
<a class='timestamp' href='#545388'><time timestamp='2017-05-12T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
also, i did not import the redeemscripts, is that important
<br>
</div>

<div class='talk op-msg' data-timestamp='1494613980' id='545389'>
<a class='timestamp' href='#545389'><time timestamp='2017-05-12T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
(why would that be important for signrawtransaction? i want to sign only the inputs i&#x27;m able to sign.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614280' id='545390'>
<a class='timestamp' href='#545390'><time timestamp='2017-05-12T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
oh, that&#x27;s a misleading error message, that&#x27;s how it reports the transaction is incompletely signed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614340' id='545391'>
<a class='timestamp' href='#545391'><time timestamp='2017-05-12T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
No, it returns a bool indicating if it is fully signed: <a href="https://bitcoin.org/en/developer-reference#signrawtransaction" class="link" target="_blank">https://bitcoin.org/en/developer-reference#signrawtransaction</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614400' id='545392'>
<a class='timestamp' href='#545392'><time timestamp='2017-05-12T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Why are you adding a watch-only output to a tx you are creating? You can&#x27;t fullfill the spending conditions of it by definition
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614460' id='545393'>
<a class='timestamp' href='#545393'><time timestamp='2017-05-12T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
fundrawtransaction will add inputs to the tx until it <b>*fully*</b> funds the outputs of that tx
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614640' id='545394'>
<a class='timestamp' href='#545394'><time timestamp='2017-05-12T18:44:00Z'>18:44</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
the transaction is fully funded by my inputs, to my knowledge, prior to calling fundrawtransaction with the exception of any extra fee i&#x27;m trying to add.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614700' id='545395'>
<a class='timestamp' href='#545395'><time timestamp='2017-05-12T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
Chris_Stewart_5: yeah i was overly focused on &quot;errors&quot; that i overlooked &quot;complete: False&quot; and that it had a new scriptsig :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614820' id='545396'>
<a class='timestamp' href='#545396'><time timestamp='2017-05-12T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
so fundrawtransaction isn&#x27;t giving you a large enough fee? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614820' id='545397'>
<a class='timestamp' href='#545397'><time timestamp='2017-05-12T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
fundrawtransaction is giving me an error &quot;Signing transaction failed&quot; if i try to directly call it with my transaction
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614820' id='545398'>
<a class='timestamp' href='#545398'><time timestamp='2017-05-12T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
probably because it&#x27;s using dummy signatures somewhere-- i dunno- and yeah i have not imported the redeemscripts (if that&#x27;s necessary- which is still unclear to me)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614880' id='545399'>
<a class='timestamp' href='#545399'><time timestamp='2017-05-12T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Well, if you (or some one else) is trying to spend a p2sh output the redeem script must be provided in the scriptSig
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614880' id='545400'>
<a class='timestamp' href='#545400'><time timestamp='2017-05-12T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
i may not have put the reedemScripts in the scriptSigs yet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614880' id='545401'>
<a class='timestamp' href='#545401'><time timestamp='2017-05-12T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
But since it seems like the p2sh output isn&#x27;t yours, your counterparty will have to sign the p2sh output and provide the redeem script
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614940' id='545402'>
<a class='timestamp' href='#545402'><time timestamp='2017-05-12T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
kanzure, that would explain it as it&#x27;s expecting more stack items
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614940' id='545403'>
<a class='timestamp' href='#545403'><time timestamp='2017-05-12T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
^     
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614940' id='545404'>
<a class='timestamp' href='#545404'><time timestamp='2017-05-12T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
i&#x27;d like to add fee first, sign for the fee, then sign the other outputs-- it&#x27;s exceedingly inconvenient for me to do this in another order.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494614940' id='545405'>
<a class='timestamp' href='#545405'><time timestamp='2017-05-12T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
*sign for the other inputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615000' id='545406'>
<a class='timestamp' href='#545406'><time timestamp='2017-05-12T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
You should be able to do it that way, then just pass the partially signed tx to your counterparty 
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615000' id='545407'>
<a class='timestamp' href='#545407'><time timestamp='2017-05-12T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
i think we&#x27;ve already confirmed that i can&#x27;t because of the error?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615060' id='545408'>
<a class='timestamp' href='#545408'><time timestamp='2017-05-12T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
oh, yes.. hmm.. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615060' id='545409'>
<a class='timestamp' href='#545409'><time timestamp='2017-05-12T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
anyway, my workaround seems to be working for me, where i use createrawtransaction with an output that represents my fee, then later i remove the output, copy the inputs and any extra outputs added by fundrawtransaction to my actual transaction, and then i call signrawtransaction.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615180' id='545410'>
<a class='timestamp' href='#545410'><time timestamp='2017-05-12T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
(also i&#x27;m adding the &quot;fee&quot; reported by fundrawtransaction to the change output reported by fundrawtransaction, since i have deleted the output that has my actual fee)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615180' id='545411'>
<a class='timestamp' href='#545411'><time timestamp='2017-05-12T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
kanzure: Can&#x27;t your counter party just add the p2sh output to the transaction? If you remove that outpoint your wallet can sign the tx right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615240' id='545412'>
<a class='timestamp' href='#545412'><time timestamp='2017-05-12T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
er, maybe. but keep in mind that i was calling fundrawtransaction not signrawtransaction-- it&#x27;s something about dummy sigs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615240' id='545413'>
<a class='timestamp' href='#545413'><time timestamp='2017-05-12T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
is the problem that fundrawtransactrion can&#x27;t determine the feerate of your overall transaction as it does not know how large the scriptSigs of some inputs will need to be?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615240' id='545414'>
<a class='timestamp' href='#545414'><time timestamp='2017-05-12T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
so you&#x27;re saying that i have a partial outpoint and that fundrawtransaction should not report &quot;Signing transaction failed&quot; once i remove the incompete outpoint?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615240' id='545415'>
<a class='timestamp' href='#545415'><time timestamp='2017-05-12T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
but in the hex transaction you provided to fundrawtransaction you had specified the watch-only p2sh output?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615300' id='545416'>
<a class='timestamp' href='#545416'><time timestamp='2017-05-12T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and as a result can&#x27;t determine how much fee to use?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615300' id='545417'>
<a class='timestamp' href='#545417'><time timestamp='2017-05-12T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
sipa: right, that seems likely to me. i am also interested in confirming/denying with someone whether i need to &quot;importpubkey redeemscript&quot; to overcome that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615360' id='545418'>
<a class='timestamp' href='#545418'><time timestamp='2017-05-12T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or importscript
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615360' id='545419'>
<a class='timestamp' href='#545419'><time timestamp='2017-05-12T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if fundrawtransaction doesn&#x27;t know what kind of redeemscript a P2SH output that&#x27;s being spent has, it can&#x27;t determine feerate
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615420' id='545420'>
<a class='timestamp' href='#545420'><time timestamp='2017-05-12T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it may need both, unsure
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615420' id='545421'>
<a class='timestamp' href='#545421'><time timestamp='2017-05-12T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
i added a comment here explaining that perhaps a better design would be to let user specify the final transaction size (if the user knows it) or allowing feeRate=0 if the user plans to delete an output later <a href="https://github.com/bitcoin/bitcoin/pull/10202#issuecomment-301134038" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10202#issuecomment-301134038</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615540' id='545422'>
<a class='timestamp' href='#545422'><time timestamp='2017-05-12T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
perhaps CreateTransaction is overloaded at this point :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1494615600' id='545423'>
<a class='timestamp' href='#545423'><time timestamp='2017-05-12T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just slightly
<br>
</div>

<div class='talk op-msg' data-timestamp='1494616080' id='545424'>
<a class='timestamp' href='#545424'><time timestamp='2017-05-12T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-7'> SopaXorzTaker</span>&gt;
sipa, can you provide some secp256k1 test cases?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494616140' id='545425'>
<a class='timestamp' href='#545425'><time timestamp='2017-05-12T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-7'> SopaXorzTaker</span>&gt;
such as, &quot;for private key 0xdeadbeef, z=0xabcd, k=0x1337, r=0x1234 and s=0x5678
<br>
</div>

<div class='talk op-msg' data-timestamp='1494625200' id='545426'>
<a class='timestamp' href='#545426'><time timestamp='2017-05-12T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
general question: how useful is gettxoutsetinfo&#x27;s serialized_bytes field?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494625200' id='545427'>
<a class='timestamp' href='#545427'><time timestamp='2017-05-12T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it does not correspond to actual disk usage, and is highly database dependent
<br>
</div>

<div class='talk op-msg' data-timestamp='1494625260' id='545428'>
<a class='timestamp' href='#545428'><time timestamp='2017-05-12T21:41:00Z'>21:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s also impossible to even give a reasonable estimate for after pertxout, except by iterating over the whole database (which I&#x27;d like to get rid of)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494625740' id='545429'>
<a class='timestamp' href='#545429'><time timestamp='2017-05-12T21:49:00Z'>21:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think it&#x27;s not useful, or rather the only thing I&#x27;ve ever used it for is taking about how big the utxo set is on reddit, and an on-disk size would be <u>_better_</u> for that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1494626940' id='545430'>
<a class='timestamp' href='#545430'><time timestamp='2017-05-12T22:09:00Z'>22:09</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: heh, I have some reivew comments noting it seems out of sync with everything....
<br>
</div>

<div class='talk op-msg' data-timestamp='1494626940' id='545431'>
<a class='timestamp' href='#545431'><time timestamp='2017-05-12T22:09:00Z'>22:09</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: gah, why did you kill Accessors?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627180' id='545432'>
<a class='timestamp' href='#545432'><time timestamp='2017-05-12T22:13:00Z'>22:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: i didn&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627180' id='545433'>
<a class='timestamp' href='#545433'><time timestamp='2017-05-12T22:13:00Z'>22:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how do you mean out of sync?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627600' id='545434'>
<a class='timestamp' href='#545434'><time timestamp='2017-05-12T22:20:00Z'>22:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ehh, meant Modifiers not Accessors
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627600' id='545435'>
<a class='timestamp' href='#545435'><time timestamp='2017-05-12T22:20:00Z'>22:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: what is serialized_bytes /supposed/ to show? it seems to not represent anything that actually means something (both before and especially, as you note, after)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627660' id='545436'>
<a class='timestamp' href='#545436'><time timestamp='2017-05-12T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: i&#x27;m very happy to get rid of Modifiers :D
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627660' id='545437'>
<a class='timestamp' href='#545437'><time timestamp='2017-05-12T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
they&#x27;re so complicated to reason about
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627660' id='545438'>
<a class='timestamp' href='#545438'><time timestamp='2017-05-12T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
they were there to prevent footgun incidents :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627660' id='545439'>
<a class='timestamp' href='#545439'><time timestamp='2017-05-12T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, if you have modifiable references
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627660' id='545440'>
<a class='timestamp' href='#545440'><time timestamp='2017-05-12T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
now you can take a AccessCoins, then add something to the cache, then blow your face off
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627660' id='545441'>
<a class='timestamp' href='#545441'><time timestamp='2017-05-12T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
AccessCoins returns a const reference
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627660' id='545442'>
<a class='timestamp' href='#545442'><time timestamp='2017-05-12T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
AccessCoins gives you such a reference, though?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627720' id='545443'>
<a class='timestamp' href='#545443'><time timestamp='2017-05-12T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the only way to modify is through AddCoin and SpendCoin (and BatchWrite)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627720' id='545444'>
<a class='timestamp' href='#545444'><time timestamp='2017-05-12T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes, but if you add something to the cache the reference is still invalid? or are unordered_map refs still valid?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627720' id='545445'>
<a class='timestamp' href='#545445'><time timestamp='2017-05-12T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ofc if you remove from cache the same element you&#x27;ve still blown your face off
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627780' id='545446'>
<a class='timestamp' href='#545446'><time timestamp='2017-05-12T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
adding something to the cache may always invalidate references
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627780' id='545447'>
<a class='timestamp' href='#545447'><time timestamp='2017-05-12T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Modifiers didn&#x27;t help with that
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627780' id='545448'>
<a class='timestamp' href='#545448'><time timestamp='2017-05-12T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
didnt add assert(!fHasModifier)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627780' id='545449'>
<a class='timestamp' href='#545449'><time timestamp='2017-05-12T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which is what you want if you&#x27;re returning refs from inside the object
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627780' id='545450'>
<a class='timestamp' href='#545450'><time timestamp='2017-05-12T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(or, it should have, if it didnt)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627780' id='545451'>
<a class='timestamp' href='#545451'><time timestamp='2017-05-12T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, there could be at most be one modifier at a time
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627840' id='545452'>
<a class='timestamp' href='#545452'><time timestamp='2017-05-12T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but that didn&#x27;t prevent any concurrent references
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627840' id='545453'>
<a class='timestamp' href='#545453'><time timestamp='2017-05-12T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
well we could trivially fix that - reintroduce modifiers and allow multiple ones, but assert when you actually modify the cache that there are no other ones
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627840' id='545454'>
<a class='timestamp' href='#545454'><time timestamp='2017-05-12T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that won&#x27;t do anything
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627840' id='545455'>
<a class='timestamp' href='#545455'><time timestamp='2017-05-12T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
they did prevent some footguns, though, like you couldnt take two at a time because that implies you&#x27;re possibly modifying the cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627900' id='545456'>
<a class='timestamp' href='#545456'><time timestamp='2017-05-12T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: I meant modifier here as accessor, really, from AccessCoins
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627900' id='545457'>
<a class='timestamp' href='#545457'><time timestamp='2017-05-12T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
since its returning a possibly-invalidated-by-other-action reference
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627900' id='545458'>
<a class='timestamp' href='#545458'><time timestamp='2017-05-12T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
they prevented exactly the same footguns as are now prevented by just having explicit modification methods
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627900' id='545459'>
<a class='timestamp' href='#545459'><time timestamp='2017-05-12T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
easy to accidentally have one stick around too long
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627900' id='545460'>
<a class='timestamp' href='#545460'><time timestamp='2017-05-12T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, we could make AccessCoin return something like a modifier... but that seems an independent change
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627900' id='545461'>
<a class='timestamp' href='#545461'><time timestamp='2017-05-12T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
fair
<br>
</div>

<div class='talk op-msg' data-timestamp='1494627900' id='545462'>
<a class='timestamp' href='#545462'><time timestamp='2017-05-12T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I&#x27;d like to see that (or just not return a ref, have you checked the performance overhead of doing that copy everywhere?)
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628020' id='545463'>
<a class='timestamp' href='#545463'><time timestamp='2017-05-12T22:27:00Z'>22:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i really don&#x27;t like copying potentially large data structures where it&#x27;s unneeded
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628020' id='545464'>
<a class='timestamp' href='#545464'><time timestamp='2017-05-12T22:27:00Z'>22:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s also imcompatible with reducing some of the duplicate output lookups during block/tx validation
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628080' id='545465'>
<a class='timestamp' href='#545465'><time timestamp='2017-05-12T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
fair, I am worried about the footgun potential there, though
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628080' id='545466'>
<a class='timestamp' href='#545466'><time timestamp='2017-05-12T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
maybe we can do the copy for now and introduce an accessor in a separate pr?
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628080' id='545467'>
<a class='timestamp' href='#545467'><time timestamp='2017-05-12T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
please
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628080' id='545468'>
<a class='timestamp' href='#545468'><time timestamp='2017-05-12T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
doesnt want to audit for this case :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628080' id='545469'>
<a class='timestamp' href='#545469'><time timestamp='2017-05-12T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you don&#x27;t have to
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628080' id='545470'>
<a class='timestamp' href='#545470'><time timestamp='2017-05-12T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
nothing has changed wrt that case
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628080' id='545471'>
<a class='timestamp' href='#545471'><time timestamp='2017-05-12T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
nothing that was prevented is no longer prevent
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628140' id='545472'>
<a class='timestamp' href='#545472'><time timestamp='2017-05-12T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and nothing that wasn&#x27;t prevent is prevented now
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628140' id='545473'>
<a class='timestamp' href='#545473'><time timestamp='2017-05-12T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmm, maybe i missed part of how it used to work, though i vaguely recall you doing some AccessCoins in place of old modifiers
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628140' id='545474'>
<a class='timestamp' href='#545474'><time timestamp='2017-05-12T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
maybe im wrong
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628200' id='545475'>
<a class='timestamp' href='#545475'><time timestamp='2017-05-12T22:30:00Z'>22:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
modifiers were only used when a modification was expected
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628380' id='545476'>
<a class='timestamp' href='#545476'><time timestamp='2017-05-12T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok, so in the rpc signing code and in bitcoin-tx, there used to be a Modifier that was both used check whether an output already existed, and then add it
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628380' id='545477'>
<a class='timestamp' href='#545477'><time timestamp='2017-05-12T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which is now turned into an AccessCoin + AddCoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628500' id='545478'>
<a class='timestamp' href='#545478'><time timestamp='2017-05-12T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, i mean its probably no big deal, just more shit to review, would be good to also add some kind of checker later so that it doesnt blow up in our face
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628500' id='545479'>
<a class='timestamp' href='#545479'><time timestamp='2017-05-12T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cause it&#x27;d be easy to slip a change in later that breaks that
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628620' id='545480'>
<a class='timestamp' href='#545480'><time timestamp='2017-05-12T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
FWIW, i&#x27;m adding a commit that adds a disk_size to gettexoutsetinfo instead, which just asks LevelDB for the actual size
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628620' id='545481'>
<a class='timestamp' href='#545481'><time timestamp='2017-05-12T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
that sounds much better
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628800' id='545482'>
<a class='timestamp' href='#545482'><time timestamp='2017-05-12T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: std::unordered_map references are only invalidated when the corresponding entry is deleted
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628800' id='545483'>
<a class='timestamp' href='#545483'><time timestamp='2017-05-12T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
they remain valid under addition, including when rehashing occurs
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628980' id='545484'>
<a class='timestamp' href='#545484'><time timestamp='2017-05-12T22:43:00Z'>22:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, heh, i thought you said no earlier, ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1494628980' id='545485'>
<a class='timestamp' href='#545485'><time timestamp='2017-05-12T22:43:00Z'>22:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1494629040' id='545486'>
<a class='timestamp' href='#545486'><time timestamp='2017-05-12T22:44:00Z'>22:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
iterators are invalidated, but iterators from the underlying CCoinsViewCache are never exposed anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1494629040' id='545487'>
<a class='timestamp' href='#545487'><time timestamp='2017-05-12T22:44:00Z'>22:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ohoh, ok
<br>
</div>

</div>
</section>

</body>
</html>
