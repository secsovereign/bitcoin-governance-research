<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2018-08-05
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2018-08-05' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:21 UTC</pre>
<pre><a href="/bitcoin-core-dev/2018-07-05">&lt;</a><span class='header'>   August 2018    </span><a href="/bitcoin-core-dev/2018-09-05">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;          <a class="" href="/bitcoin-core-dev/2018-08-01">1</a>  <a class="" href="/bitcoin-core-dev/2018-08-02">2</a>  <a class="" href="/bitcoin-core-dev/2018-08-03">3</a>  <a class="" href="/bitcoin-core-dev/2018-08-04">4</a>  &#x000A; <a class="current" href="/bitcoin-core-dev/2018-08-05">5</a>  <a class="" href="/bitcoin-core-dev/2018-08-06">6</a>  <a class="" href="/bitcoin-core-dev/2018-08-07">7</a>  <a class="" href="/bitcoin-core-dev/2018-08-08">8</a>  <a class="" href="/bitcoin-core-dev/2018-08-09">9</a> <a class="" href="/bitcoin-core-dev/2018-08-10">10</a> <a class="" href="/bitcoin-core-dev/2018-08-11">11</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-08-12">12</a> <a class="" href="/bitcoin-core-dev/2018-08-13">13</a> <a class="" href="/bitcoin-core-dev/2018-08-14">14</a> <a class="" href="/bitcoin-core-dev/2018-08-15">15</a> <a class="" href="/bitcoin-core-dev/2018-08-16">16</a> <a class="" href="/bitcoin-core-dev/2018-08-17">17</a> <a class="" href="/bitcoin-core-dev/2018-08-18">18</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-08-19">19</a> <a class="" href="/bitcoin-core-dev/2018-08-20">20</a> <a class="" href="/bitcoin-core-dev/2018-08-21">21</a> <a class="" href="/bitcoin-core-dev/2018-08-22">22</a> <a class="" href="/bitcoin-core-dev/2018-08-23">23</a> <a class="" href="/bitcoin-core-dev/2018-08-24">24</a> <a class="" href="/bitcoin-core-dev/2018-08-25">25</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-08-26">26</a> <a class="" href="/bitcoin-core-dev/2018-08-27">27</a> <a class="" href="/bitcoin-core-dev/2018-08-28">28</a> <a class="" href="/bitcoin-core-dev/2018-08-29">29</a> <a class="" href="/bitcoin-core-dev/2018-08-30">30</a> <a class="" href="/bitcoin-core-dev/2018-08-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1533474300' id='623773'>
<a class='timestamp' href='#623773'><time timestamp='2018-08-05T13:05:00Z'>13:05</time></a>
&lt;<span class='nick nick-13'> devmob</span>&gt;
hi everyone
<br>
</div>

<div class='talk op-msg' data-timestamp='1533474300' id='623774'>
<a class='timestamp' href='#623774'><time timestamp='2018-08-05T13:05:00Z'>13:05</time></a>
&lt;<span class='nick nick-13'> devmob</span>&gt;
anyone here I can talk to about bitcoin&#x27;s p2p layer ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533474360' id='623775'>
<a class='timestamp' href='#623775'><time timestamp='2018-08-05T13:06:00Z'>13:06</time></a>
&lt;<span class='nick nick-13'> devmob</span>&gt;
dns seeds, peer discovery and so on..
<br>
</div>

<div class='talk op-msg' data-timestamp='1533480960' id='623776'>
<a class='timestamp' href='#623776'><time timestamp='2018-08-05T14:56:00Z'>14:56</time></a>
&lt;<span class='nick nick-10'> grubles</span>&gt;
ask your question :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1533482640' id='623777'>
<a class='timestamp' href='#623777'><time timestamp='2018-08-05T15:24:00Z'>15:24</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
devmob: yes, sure, ask ahead
<br>
</div>

<div class='talk op-msg' data-timestamp='1533482700' id='623778'>
<a class='timestamp' href='#623778'><time timestamp='2018-08-05T15:25:00Z'>15:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
depending on how technical the question is, #bitcoin might be a better place to ask if it&#x27;s about high-level concepts and not implementation
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491340' id='623779'>
<a class='timestamp' href='#623779'><time timestamp='2018-08-05T17:49:00Z'>17:49</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
is it possible to return the index of a tx in a block, using getrawtransaction with -txindex?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491400' id='623780'>
<a class='timestamp' href='#623780'><time timestamp='2018-08-05T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jl2012: the interface doesn&#x27;t do that, but the data is there and it could.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491400' id='623781'>
<a class='timestamp' href='#623781'><time timestamp='2018-08-05T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jl2012: the txindex tells the node what block the tx is in, it reads the whole block to give the result.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491460' id='623782'>
<a class='timestamp' href='#623782'><time timestamp='2018-08-05T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
gmaxwell: should I look at GetTransaction() ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491460' id='623783'>
<a class='timestamp' href='#623783'><time timestamp='2018-08-05T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491460' id='623784'>
<a class='timestamp' href='#623784'><time timestamp='2018-08-05T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the index also has the position, i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491460' id='623785'>
<a class='timestamp' href='#623785'><time timestamp='2018-08-05T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh it does? hm.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491520' id='623786'>
<a class='timestamp' href='#623786'><time timestamp='2018-08-05T17:52:00Z'>17:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah no, it has the byte offset w.r.t. the block position
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491520' id='623787'>
<a class='timestamp' href='#623787'><time timestamp='2018-08-05T17:52:00Z'>17:52</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
CDiskTxPos postx is the byte offset?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491580' id='623788'>
<a class='timestamp' href='#623788'><time timestamp='2018-08-05T17:53:00Z'>17:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491640' id='623789'>
<a class='timestamp' href='#623789'><time timestamp='2018-08-05T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes also checked, it only has the byte index
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491640' id='623790'>
<a class='timestamp' href='#623790'><time timestamp='2018-08-05T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
is it possible to turn this into the tx index?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491640' id='623791'>
<a class='timestamp' href='#623791'><time timestamp='2018-08-05T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491700' id='623792'>
<a class='timestamp' href='#623792'><time timestamp='2018-08-05T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what do you need it for?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491700' id='623793'>
<a class='timestamp' href='#623793'><time timestamp='2018-08-05T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
I have some txids and need to know their order in the chain
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491700' id='623794'>
<a class='timestamp' href='#623794'><time timestamp='2018-08-05T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well if you only need to know their order, ... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491760' id='623795'>
<a class='timestamp' href='#623795'><time timestamp='2018-08-05T17:56:00Z'>17:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
only if you&#x27;d read the entire block from disk, and parse that, you can figure out what the transaction index in the block is
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491760' id='623796'>
<a class='timestamp' href='#623796'><time timestamp='2018-08-05T17:56:00Z'>17:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
then byte index will work just as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491760' id='623797'>
<a class='timestamp' href='#623797'><time timestamp='2018-08-05T17:56:00Z'>17:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well   block number || byte offset in the block    gives you the ordering of transactions.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491820' id='623798'>
<a class='timestamp' href='#623798'><time timestamp='2018-08-05T17:57:00Z'>17:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491820' id='623799'>
<a class='timestamp' href='#623799'><time timestamp='2018-08-05T17:57:00Z'>17:57</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
yes, that&#x27;s enough for my purpose. Do you think it&#x27;s a good idea to return the byte order in getrawtransaction?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491880' id='623800'>
<a class='timestamp' href='#623800'><time timestamp='2018-08-05T17:58:00Z'>17:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think getrawtransaction should just return the raw transaction
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491940' id='623801'>
<a class='timestamp' href='#623801'><time timestamp='2018-08-05T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
sipa....yeah....but we could have a different name for that....
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491940' id='623802'>
<a class='timestamp' href='#623802'><time timestamp='2018-08-05T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jl2012: we probably shouldn&#x27;t return anything that is implementation dependant unless we have a good reason.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491940' id='623803'>
<a class='timestamp' href='#623803'><time timestamp='2018-08-05T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
gmaxwell: yes, that&#x27;s why I wonder if I could get the tx index
<br>
</div>

<div class='talk op-msg' data-timestamp='1533491940' id='623804'>
<a class='timestamp' href='#623804'><time timestamp='2018-08-05T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
E.g. we shouldn&#x27;t add things to our API that would get in the way of changing to a better txindex or block storage design, unless there is a clear reason.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492000' id='623805'>
<a class='timestamp' href='#623805'><time timestamp='2018-08-05T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
at least if you do it, return the byte index relative to the block, not to the file start
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492000' id='623806'>
<a class='timestamp' href='#623806'><time timestamp='2018-08-05T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
otherwise it&#x27;ll be used to directly seek into the block files, it was tried before to add block filename/offsets to getblock and rejected for the same reason
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492060' id='623807'>
<a class='timestamp' href='#623807'><time timestamp='2018-08-05T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
even that, for example we know that it&#x27;s possible to store txn a lot more compactly than we do, and save maybe 25% of block storage. If we switch to storing blocks that way, those numbers either all change around or to keep them the same we&#x27;ll have to store extra data or reseralize the block to return a result. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492120' id='623808'>
<a class='timestamp' href='#623808'><time timestamp='2018-08-05T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: what if we add a warning to only use it as opaque ordering token
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492120' id='623809'>
<a class='timestamp' href='#623809'><time timestamp='2018-08-05T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
don&#x27;t call it byte offset
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492180' id='623810'>
<a class='timestamp' href='#623810'><time timestamp='2018-08-05T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s also not available for mempool txn
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492180' id='623811'>
<a class='timestamp' href='#623811'><time timestamp='2018-08-05T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
unless that would reorder the transactions as well of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492180' id='623812'>
<a class='timestamp' href='#623812'><time timestamp='2018-08-05T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
for the mempool it certainly wouldn&#x27;t make sense, what would offset into the mempool even mean
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492180' id='623813'>
<a class='timestamp' href='#623813'><time timestamp='2018-08-05T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: that would be fine.  Nah, using a more efficient serialization wouldn&#x27;t reorder anything.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492240' id='623814'>
<a class='timestamp' href='#623814'><time timestamp='2018-08-05T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: (uint64)txn* :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492240' id='623815'>
<a class='timestamp' href='#623815'><time timestamp='2018-08-05T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
gmaxwell: and the order itself is consensus-critical so you need to store it somehow
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492300' id='623816'>
<a class='timestamp' href='#623816'><time timestamp='2018-08-05T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jl2012: consensus enforcement doesn&#x27;t even require storing the blocks at all :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492300' id='623817'>
<a class='timestamp' href='#623817'><time timestamp='2018-08-05T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
let alone an index
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492360' id='623818'>
<a class='timestamp' href='#623818'><time timestamp='2018-08-05T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and more practically, it would not be outrageous i think to store the entire block by gzipping it in its entirety, at which point there is no more per-tx access possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492420' id='623819'>
<a class='timestamp' href='#623819'><time timestamp='2018-08-05T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(i&#x27;m not actually suggesting this; we can do much better than that without giving up the ability to access txn individually)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492420' id='623820'>
<a class='timestamp' href='#623820'><time timestamp='2018-08-05T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
you&#x27;d still need an the offset after unzipping
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492420' id='623821'>
<a class='timestamp' href='#623821'><time timestamp='2018-08-05T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
to retrieve it
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492420' id='623822'>
<a class='timestamp' href='#623822'><time timestamp='2018-08-05T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jl2012: to serve up old blocks we need to be able to recover the order, that doesn&#x27;t necessarily mean that it&#x27;s easily accessible at random. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492420' id='623823'>
<a class='timestamp' href='#623823'><time timestamp='2018-08-05T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: well, only if we care about retaining the ability to find individual txn
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492480' id='623824'>
<a class='timestamp' href='#623824'><time timestamp='2018-08-05T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I think some compression algorithms do allow for seeking by storing more decompressor state
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492480' id='623825'>
<a class='timestamp' href='#623825'><time timestamp='2018-08-05T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: which is really just to speed up getrawtransaction 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492480' id='623826'>
<a class='timestamp' href='#623826'><time timestamp='2018-08-05T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sure...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492480' id='623827'>
<a class='timestamp' href='#623827'><time timestamp='2018-08-05T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: yes, but in doing so more or less eliminates the gains from compressing things as a unit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492480' id='623828'>
<a class='timestamp' href='#623828'><time timestamp='2018-08-05T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sorry, too many hypotheticals here :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492480' id='623829'>
<a class='timestamp' href='#623829'><time timestamp='2018-08-05T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
anyhow I don&#x27;t think forever API compatibility is so important for this, if we can&#x27;t provide it anymore ,drop it then
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492480' id='623830'>
<a class='timestamp' href='#623830'><time timestamp='2018-08-05T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
sipa: generating SPV proof is also a consensus-critical process
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492540' id='623831'>
<a class='timestamp' href='#623831'><time timestamp='2018-08-05T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jl2012: unclear what you mean by that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492540' id='623832'>
<a class='timestamp' href='#623832'><time timestamp='2018-08-05T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jl2012: no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492540' id='623833'>
<a class='timestamp' href='#623833'><time timestamp='2018-08-05T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
validating of new blocks doesn&#x27;t need SPV proofs
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492540' id='623834'>
<a class='timestamp' href='#623834'><time timestamp='2018-08-05T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: right, and the problem is that the decompressor state can be quite big compared to just a pointer, maybe bigger than the tx itself :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492540' id='623835'>
<a class='timestamp' href='#623835'><time timestamp='2018-08-05T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The bitcoin protocol doesn&#x27;t generate SPV proofs for arbritary transactions, it certantly isn&#x27;t consensus critical to do so! :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492600' id='623836'>
<a class='timestamp' href='#623836'><time timestamp='2018-08-05T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case, other than potentially bulk compressing a whole block at a time, I don&#x27;t see why a &quot;this isn&#x27;t the size but it is ordered&quot; value would get invalidated.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492720' id='623837'>
<a class='timestamp' href='#623837'><time timestamp='2018-08-05T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right, potentially you could still store it if you want to keep it available on the RPC API, even if you don&#x27;t <b>*need*</b> it for the index
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492780' id='623838'>
<a class='timestamp' href='#623838'><time timestamp='2018-08-05T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
right, and that would be totally worth doing if there were a known usecase for the interface... :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492780' id='623839'>
<a class='timestamp' href='#623839'><time timestamp='2018-08-05T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492780' id='623840'>
<a class='timestamp' href='#623840'><time timestamp='2018-08-05T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
though at that point, it would probably be best to just store a plain total order number.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492840' id='623841'>
<a class='timestamp' href='#623841'><time timestamp='2018-08-05T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
gmaxwell, sipa: maybe I&#x27;m using a wrong term.....anyway, I mean the index is critical for a full node to properly function (e.g. serving SPV proof, helping other nodes for IBD)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492900' id='623842'>
<a class='timestamp' href='#623842'><time timestamp='2018-08-05T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no it isn&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492900' id='623843'>
<a class='timestamp' href='#623843'><time timestamp='2018-08-05T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s optional
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492900' id='623844'>
<a class='timestamp' href='#623844'><time timestamp='2018-08-05T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the index isn&#x27;t even used when helping other nodes IBD
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492900' id='623845'>
<a class='timestamp' href='#623845'><time timestamp='2018-08-05T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(which on itself is optional)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492960' id='623846'>
<a class='timestamp' href='#623846'><time timestamp='2018-08-05T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
sipa: when you transmit a block, you also transmit the index (implicitly)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533492960' id='623847'>
<a class='timestamp' href='#623847'><time timestamp='2018-08-05T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1533493020' id='623848'>
<a class='timestamp' href='#623848'><time timestamp='2018-08-05T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
by index you mean transaction position
<br>
</div>

<div class='talk op-msg' data-timestamp='1533493020' id='623849'>
<a class='timestamp' href='#623849'><time timestamp='2018-08-05T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not &quot;the txindex database&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1533493020' id='623850'>
<a class='timestamp' href='#623850'><time timestamp='2018-08-05T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sorry!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533493020' id='623851'>
<a class='timestamp' href='#623851'><time timestamp='2018-08-05T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jl2012: bitcoin core doesn&#x27;t even serve SPV proofs for arbritary transactions today!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533493080' id='623852'>
<a class='timestamp' href='#623852'><time timestamp='2018-08-05T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jl2012: and yes, to serve out a block you must be able to recover the order, but that doesn&#x27;t mean that its stored in a way that allows efficient random access to it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533493140' id='623853'>
<a class='timestamp' href='#623853'><time timestamp='2018-08-05T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
E.g. we could store groups of blocks 100 at a time, gzipped. We could still serve up access for syncing peers.  But order wouldn&#x27;t be efficiently accessible for a txindex.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533493200' id='623854'>
<a class='timestamp' href='#623854'><time timestamp='2018-08-05T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(and any ability to serve a spv proof at all was only added in v0.8 and can be disabled with a commandline flag)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533493200' id='623855'>
<a class='timestamp' href='#623855'><time timestamp='2018-08-05T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
also a full node doesn&#x27;t even need to have historic blocks at all.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533493260' id='623856'>
<a class='timestamp' href='#623856'><time timestamp='2018-08-05T18:21:00Z'>18:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Full node means that it autonomously enforces the consensus rules for itself without trusting third parties to validate, thats it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533493500' id='623857'>
<a class='timestamp' href='#623857'><time timestamp='2018-08-05T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case, all I&#x27;m trying to say is just because the data is currently there isn&#x27;t a reason to expose it in an API. Doing so is a pretty severe api anti-pattern.  The purpose of an interface is to encapsulate complexity. Any time we expose an internal we make it more costly to change in the future.  There are known things people are working on that if they were adopted would change the positio
<br>
</div>

<div class='talk op-msg' data-timestamp='1533493500' id='623858'>
<a class='timestamp' href='#623858'><time timestamp='2018-08-05T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
n values, though they would at least keep them ordered.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533494220' id='623859'>
<a class='timestamp' href='#623859'><time timestamp='2018-08-05T18:37:00Z'>18:37</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
gmaxwell: I understand your point........could we have some kind of &quot;expert API&quot; that does not guarantee to work in the future? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533494340' id='623860'>
<a class='timestamp' href='#623860'><time timestamp='2018-08-05T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what do you need it for? perhaps there are other ways
<br>
</div>

<div class='talk op-msg' data-timestamp='1533494580' id='623861'>
<a class='timestamp' href='#623861'><time timestamp='2018-08-05T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
sipa: I have some random ordered txids, and want to reconstruct the ledger.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533494580' id='623862'>
<a class='timestamp' href='#623862'><time timestamp='2018-08-05T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
the ledger of certain addresses
<br>
</div>

<div class='talk op-msg' data-timestamp='1533494700' id='623863'>
<a class='timestamp' href='#623863'><time timestamp='2018-08-05T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
a dumb way is to call &#x27;getblock&#x27; to learn the order.....
<br>
</div>

<div class='talk op-msg' data-timestamp='1533494760' id='623864'>
<a class='timestamp' href='#623864'><time timestamp='2018-08-05T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
efficiency is not a big issue for me so that&#x27;s probably good enough
<br>
</div>

<div class='talk op-msg' data-timestamp='1533494760' id='623865'>
<a class='timestamp' href='#623865'><time timestamp='2018-08-05T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
but there is another problem: I just find that getrawtransaction doesn&#x27;t return block height!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533494880' id='623866'>
<a class='timestamp' href='#623866'><time timestamp='2018-08-05T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
only block time and #of confimations.....so I need getblockchaininfo to tell me the current height....
<br>
</div>

<div class='talk op-msg' data-timestamp='1533494880' id='623867'>
<a class='timestamp' href='#623867'><time timestamp='2018-08-05T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-1'> roasbeef</span>&gt;
jl2012: verbose should, well returns confirmations which you can use to compute the blockheight the tx was incluided in 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533495000' id='623868'>
<a class='timestamp' href='#623868'><time timestamp='2018-08-05T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
roasbeef: yes, just need to do one more step.....
<br>
</div>

<div class='talk op-msg' data-timestamp='1533495240' id='623869'>
<a class='timestamp' href='#623869'><time timestamp='2018-08-05T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
jl2012: can&#x27;t you keep a headers chain in your application and look up the blockhash there?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533495420' id='623870'>
<a class='timestamp' href='#623870'><time timestamp='2018-08-05T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
jonasschnelli: getrawtransaction provides only &quot;number of confirmation&quot; and &quot;blocktime&quot;, but blocktime couldn&#x27;t be a reliable block index because it is not strictly ordered and might repeat
<br>
</div>

<div class='talk op-msg' data-timestamp='1533495540' id='623871'>
<a class='timestamp' href='#623871'><time timestamp='2018-08-05T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
jonasschnelli: oh, it also has blockhash
<br>
</div>

<div class='talk op-msg' data-timestamp='1533495540' id='623872'>
<a class='timestamp' href='#623872'><time timestamp='2018-08-05T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1533495600' id='623873'>
<a class='timestamp' href='#623873'><time timestamp='2018-08-05T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yeah. Just dbl checked: &quot;&quot;  \&quot;blockhash\&quot; : \&quot;hash\&quot;,   (string) the block hash\n&quot;&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1533496140' id='623874'>
<a class='timestamp' href='#623874'><time timestamp='2018-08-05T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
thanks everyone......at least I find a way to do it without customized API....
<br>
</div>

<div class='talk op-msg' data-timestamp='1533508440' id='623875'>
<a class='timestamp' href='#623875'><time timestamp='2018-08-05T22:34:00Z'>22:34</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Is there a policy when RPC interfaces change for bitcoind? Does it change for minor version bumps?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533510300' id='623876'>
<a class='timestamp' href='#623876'><time timestamp='2018-08-05T23:05:00Z'>23:05</time></a>
&lt;<span class='nick nick-3'> viaj3ro</span>&gt;
have an issue with my 0.16.2 node: <a href="https://github.com/bitcoin/bitcoin/issues/13885" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13885</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533510360' id='623877'>
<a class='timestamp' href='#623877'><time timestamp='2018-08-05T23:06:00Z'>23:06</time></a>
&lt;<span class='nick nick-3'> viaj3ro</span>&gt;
need help to try figure out what&#x27;s causing it
<br>
</div>

<div class='talk op-msg' data-timestamp='1533510720' id='623878'>
<a class='timestamp' href='#623878'><time timestamp='2018-08-05T23:12:00Z'>23:12</time></a>
&lt;<span class='nick nick-4'> molz</span>&gt;
viaj3ro, maybe shouldn&#x27;t run the data dir on a USB stick? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533510840' id='623879'>
<a class='timestamp' href='#623879'><time timestamp='2018-08-05T23:14:00Z'>23:14</time></a>
&lt;<span class='nick nick-3'> viaj3ro</span>&gt;
it&#x27;s not a USB stick. it&#x27;s my external HDD... it&#x27;s not like I have a choice. my SSD is only 250GB
<br>
</div>

<div class='talk op-msg' data-timestamp='1533510900' id='623880'>
<a class='timestamp' href='#623880'><time timestamp='2018-08-05T23:15:00Z'>23:15</time></a>
&lt;<span class='nick nick-3'> viaj3ro</span>&gt;
chainstate is on my main SSD - so it shouldn&#x27;t be that much of an issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1533510900' id='623881'>
<a class='timestamp' href='#623881'><time timestamp='2018-08-05T23:15:00Z'>23:15</time></a>
&lt;<span class='nick nick-3'> viaj3ro</span>&gt;
it synced within 35 hours on my 10 year old laptop
<br>
</div>

<div class='talk op-msg' data-timestamp='1533510960' id='623882'>
<a class='timestamp' href='#623882'><time timestamp='2018-08-05T23:16:00Z'>23:16</time></a>
&lt;<span class='nick nick-3'> viaj3ro</span>&gt;
with those settings
<br>
</div>

<div class='talk op-msg' data-timestamp='1533511020' id='623883'>
<a class='timestamp' href='#623883'><time timestamp='2018-08-05T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-3'> viaj3ro</span>&gt;
it&#x27;s known to run fine on a raspberry pi - should be running fine on my hardware...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533512160' id='623884'>
<a class='timestamp' href='#623884'><time timestamp='2018-08-05T23:36:00Z'>23:36</time></a>
&lt;<span class='nick nick-3'> viaj3ro</span>&gt;
going offline. any help via github is very much appreciated!
<br>
</div>

</div>
</section>

</body>
</html>
