<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2020-12-11
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2020-12-11' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:17 UTC</pre>
<pre><a href="/bitcoin-core-dev/2020-11-11">&lt;</a><span class='header'>  December 2020   </span><a href="/bitcoin-core-dev/2021-01-11">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;       <a class="" href="/bitcoin-core-dev/2020-12-01">1</a>  <a class="" href="/bitcoin-core-dev/2020-12-02">2</a>  <a class="" href="/bitcoin-core-dev/2020-12-03">3</a>  <a class="" href="/bitcoin-core-dev/2020-12-04">4</a>  <a class="" href="/bitcoin-core-dev/2020-12-05">5</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2020-12-06">6</a>  <a class="" href="/bitcoin-core-dev/2020-12-07">7</a>  <a class="" href="/bitcoin-core-dev/2020-12-08">8</a>  <a class="" href="/bitcoin-core-dev/2020-12-09">9</a> <a class="" href="/bitcoin-core-dev/2020-12-10">10</a> <a class="current" href="/bitcoin-core-dev/2020-12-11">11</a> <a class="" href="/bitcoin-core-dev/2020-12-12">12</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-12-13">13</a> <a class="" href="/bitcoin-core-dev/2020-12-14">14</a> <a class="" href="/bitcoin-core-dev/2020-12-15">15</a> <a class="" href="/bitcoin-core-dev/2020-12-16">16</a> <a class="" href="/bitcoin-core-dev/2020-12-17">17</a> <a class="" href="/bitcoin-core-dev/2020-12-18">18</a> <a class="" href="/bitcoin-core-dev/2020-12-19">19</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-12-20">20</a> <a class="" href="/bitcoin-core-dev/2020-12-21">21</a> <a class="" href="/bitcoin-core-dev/2020-12-22">22</a> <a class="" href="/bitcoin-core-dev/2020-12-23">23</a> <a class="" href="/bitcoin-core-dev/2020-12-24">24</a> <a class="" href="/bitcoin-core-dev/2020-12-25">25</a> <a class="" href="/bitcoin-core-dev/2020-12-26">26</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-12-27">27</a> <a class="" href="/bitcoin-core-dev/2020-12-28">28</a> <a class="" href="/bitcoin-core-dev/2020-12-29">29</a> <a class="" href="/bitcoin-core-dev/2020-12-30">30</a> <a class="" href="/bitcoin-core-dev/2020-12-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1607645640' id='418452'>
<a class='timestamp' href='#418452'><time timestamp='2020-12-11T00:14:00Z'>00:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
my gitians all match, pushed
<br>
</div>

<div class='talk op-msg' data-timestamp='1607646960' id='418453'>
<a class='timestamp' href='#418453'><time timestamp='2020-12-11T00:36:00Z'>00:36</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
why did we keep changing the sdk?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607646960' id='418454'>
<a class='timestamp' href='#418454'><time timestamp='2020-12-11T00:36:00Z'>00:36</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
*macOS sdk
<br>
</div>

<div class='talk op-msg' data-timestamp='1607647020' id='418455'>
<a class='timestamp' href='#418455'><time timestamp='2020-12-11T00:37:00Z'>00:37</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
0.19 is 10.11, 0.20 is 10.14, and 0.21 is long_xcode_name
<br>
</div>

<div class='talk op-msg' data-timestamp='1607647560' id='418456'>
<a class='timestamp' href='#418456'><time timestamp='2020-12-11T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
achow: just to piss everyone off
<br>
</div>

<div class='talk op-msg' data-timestamp='1607647560' id='418457'>
<a class='timestamp' href='#418457'><time timestamp='2020-12-11T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
sipa: welcome back to the gitian building world
<br>
</div>

<div class='talk op-msg' data-timestamp='1607647680' id='418458'>
<a class='timestamp' href='#418458'><time timestamp='2020-12-11T00:48:00Z'>00:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
:)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607647740' id='418459'>
<a class='timestamp' href='#418459'><time timestamp='2020-12-11T00:49:00Z'>00:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] dongcarl opened pull request #20619: guix: Quality of life improvements (master...2020-12-guix-fixups) <a href="https://github.com/bitcoin/bitcoin/pull/20619" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20619</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607651160' id='418460'>
<a class='timestamp' href='#418460'><time timestamp='2020-12-11T01:46:00Z'>01:46</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake pushed 4 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/da957cd62ecc...736eb4d80838" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/da957cd62ecc...736eb4d80838</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607651160' id='418461'>
<a class='timestamp' href='#418461'><time timestamp='2020-12-11T01:46:00Z'>01:46</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master c5e3e74 Hennadii Stepanov: sync: Improve CheckLastCritical()
<br>
</div>

<div class='talk op-msg' data-timestamp='1607651160' id='418462'>
<a class='timestamp' href='#418462'><time timestamp='2020-12-11T01:46:00Z'>01:46</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master cb23fe0 Hennadii Stepanov: [skip ci] sync: Check precondition in LEAVE_CRITICAL_SECTION() macro
<br>
</div>

<div class='talk op-msg' data-timestamp='1607651160' id='418463'>
<a class='timestamp' href='#418463'><time timestamp='2020-12-11T01:46:00Z'>01:46</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master e1e68b6 Hennadii Stepanov: test: Fix inconsistent lock order in wallet_tests/CreateWallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1607651160' id='418464'>
<a class='timestamp' href='#418464'><time timestamp='2020-12-11T01:46:00Z'>01:46</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake merged pull request #19982: test: Fix inconsistent lock order in wallet_tests/CreateWallet (master...200920-leave-cs) <a href="https://github.com/bitcoin/bitcoin/pull/19982" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19982</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607651160' id='418465'>
<a class='timestamp' href='#418465'><time timestamp='2020-12-11T01:46:00Z'>01:46</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
I assume now that we are using cirrus, adding things like [skip ci] to commit messages is pointless ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607651220' id='418466'>
<a class='timestamp' href='#418466'><time timestamp='2020-12-11T01:47:00Z'>01:47</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
I never really saw the point of doing it anyways
<br>
</div>

<div class='talk op-msg' data-timestamp='1607651220' id='418467'>
<a class='timestamp' href='#418467'><time timestamp='2020-12-11T01:47:00Z'>01:47</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
travis still runs some lints that check every commit
<br>
</div>

<div class='talk op-msg' data-timestamp='1607651280' id='418468'>
<a class='timestamp' href='#418468'><time timestamp='2020-12-11T01:48:00Z'>01:48</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Yea. Although hopefully that is going away shortly: #20467
<br>
</div>

<div class='talk op-msg' data-timestamp='1607651280' id='418469'>
<a class='timestamp' href='#418469'><time timestamp='2020-12-11T01:48:00Z'>01:48</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/20467" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/20467</a> | Move travis linter job to cirrus · Issue #20467 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1607651340' id='418470'>
<a class='timestamp' href='#418470'><time timestamp='2020-12-11T01:49:00Z'>01:49</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
I think someone else could jump in and  take that on if they wanted, given it&#x27;s been 2 weeks
<br>
</div>

<div class='talk op-msg' data-timestamp='1607654100' id='418471'>
<a class='timestamp' href='#418471'><time timestamp='2020-12-11T02:35:00Z'>02:35</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Someone could also port the Travis check in the gitian.sigs repo to Cirrus (if we want to keep it). That should be very easy
<br>
</div>

<div class='talk op-msg' data-timestamp='1607674620' id='418472'>
<a class='timestamp' href='#418472'><time timestamp='2020-12-11T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
macOS gitian build on master seems to fail: <a href="https://bitcoin.jonasschnelli.ch/gitian/build/359" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/gitian/build/359</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607674620' id='418473'>
<a class='timestamp' href='#418473'><time timestamp='2020-12-11T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Fetching v2.1.1.tar.gz from <a href="https://github.com/al45tair/mac_alias/archive/" class="link" target="_blank">https://github.com/al45tair/mac_alias/archive/</a> (stalls)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607675580' id='418474'>
<a class='timestamp' href='#418474'><time timestamp='2020-12-11T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
achow101: I noticed that the sqlite wallet backend recreates the prepared queries for every batch, is there a specific reason for this? I guess it has to do with multi-threading?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607675700' id='418475'>
<a class='timestamp' href='#418475'><time timestamp='2020-12-11T08:35:00Z'>08:35</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
Folks, I was 95% done syncing my node, and unplugged my external SSD accidently, I tried to restart bitcoind, but it&#x27;s resuming from block 0, can anyone help? I tried to re-builld, etc.. the [blocks] folder has all the raw blk.dat but I just cant get it to use them. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1607675760' id='418476'>
<a class='timestamp' href='#418476'><time timestamp='2020-12-11T08:36:00Z'>08:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
mj_node: run with -reindex
<br>
</div>

<div class='talk op-msg' data-timestamp='1607675820' id='418477'>
<a class='timestamp' href='#418477'><time timestamp='2020-12-11T08:37:00Z'>08:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;ll still restart the validation from 0, but it won&#x27;t redownload everything
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676060' id='418478'>
<a class='timestamp' href='#418478'><time timestamp='2020-12-11T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
normally unless a really high dbcache value is used it shouldn&#x27;t go back that far on a crash, though unplugging storage while running can cause all kinds of corruption so it&#x27;s hard to say-in any case a reindex is all you can do, try to keep the device plugged this time :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676120' id='418479'>
<a class='timestamp' href='#418479'><time timestamp='2020-12-11T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
I tried that -reindex doesnt work, its started to re-download blocks, I launched again re-index it spent hours going through the blocks but still says &quot;loadBlockIndexDB: last block file = 136&quot;, when I have over 2000 block files
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676120' id='418480'>
<a class='timestamp' href='#418480'><time timestamp='2020-12-11T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok, wipe everything and start over then
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676120' id='418481'>
<a class='timestamp' href='#418481'><time timestamp='2020-12-11T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
somehow I think block\index content is the problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676120' id='418482'>
<a class='timestamp' href='#418482'><time timestamp='2020-12-11T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
Im on 1mbps conneciton ,ehehe
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676120' id='418483'>
<a class='timestamp' href='#418483'><time timestamp='2020-12-11T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s corrupted beyond repair
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676120' id='418484'>
<a class='timestamp' href='#418484'><time timestamp='2020-12-11T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
ouch
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676180' id='418485'>
<a class='timestamp' href='#418485'><time timestamp='2020-12-11T08:43:00Z'>08:43</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
just to understand, is it because the blk.dat files are unique/
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676180' id='418486'>
<a class='timestamp' href='#418486'><time timestamp='2020-12-11T08:43:00Z'>08:43</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
and custom to each ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676240' id='418487'>
<a class='timestamp' href='#418487'><time timestamp='2020-12-11T08:44:00Z'>08:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
mj_node: presumably when it started redownloading it started overwriting the block files you already had
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676300' id='418488'>
<a class='timestamp' href='#418488'><time timestamp='2020-12-11T08:45:00Z'>08:45</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
sipa: yes exactly that&#x27;s what happened, so even a command like &#x27;reconsider block&#x27; doesnt work?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676300' id='418489'>
<a class='timestamp' href='#418489'><time timestamp='2020-12-11T08:45:00Z'>08:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
not necessarily, they contain public information after all, though the blocks don&#x27;t come in in sequental order so they&#x27;ll be in different orders in the files on different nodes, the &quot;block index&quot; database contains pointers to where every block is
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676360' id='418490'>
<a class='timestamp' href='#418490'><time timestamp='2020-12-11T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
@wumpus hmm so surely I should be able to rebuild the block index from my raw blocks on the SDD no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676360' id='418491'>
<a class='timestamp' href='#418491'><time timestamp='2020-12-11T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, that&#x27;s what reindex does
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676360' id='418492'>
<a class='timestamp' href='#418492'><time timestamp='2020-12-11T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
mj_node: redownloading corrupted the blocks you already had
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676360' id='418493'>
<a class='timestamp' href='#418493'><time timestamp='2020-12-11T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but not if the first blocks were overwritten as sipa says
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676360' id='418494'>
<a class='timestamp' href='#418494'><time timestamp='2020-12-11T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
got it -thanks guys, appreciate the explaination, another 20 days i guess.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676360' id='418495'>
<a class='timestamp' href='#418495'><time timestamp='2020-12-11T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so you have a few good blocks at the beginning, then overwritten garbage, and then all old good blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676420' id='418496'>
<a class='timestamp' href='#418496'><time timestamp='2020-12-11T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
20?!
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676420' id='418497'>
<a class='timestamp' href='#418497'><time timestamp='2020-12-11T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
slow wifi....
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676420' id='418498'>
<a class='timestamp' href='#418498'><time timestamp='2020-12-11T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what hardware is this?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676420' id='418499'>
<a class='timestamp' href='#418499'><time timestamp='2020-12-11T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ow
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676420' id='418500'>
<a class='timestamp' href='#418500'><time timestamp='2020-12-11T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
ehehhehe, I&#x27;m in quarantine with shitty connection
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676420' id='418501'>
<a class='timestamp' href='#418501'><time timestamp='2020-12-11T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if network is the bottleneck i can&#x27;t help you
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676480' id='418502'>
<a class='timestamp' href='#418502'><time timestamp='2020-12-11T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
mj_node: here is something you couldnl try (it&#x27;s a moonshot, though)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676480' id='418503'>
<a class='timestamp' href='#418503'><time timestamp='2020-12-11T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
you might want to copy the block files from someone else on physical storage
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676480' id='418504'>
<a class='timestamp' href='#418504'><time timestamp='2020-12-11T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
start downloading again in another directory
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676480' id='418505'>
<a class='timestamp' href='#418505'><time timestamp='2020-12-11T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
until you have the first few block files (as many as you possibly had overwritten)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676540' id='418506'>
<a class='timestamp' href='#418506'><time timestamp='2020-12-11T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
in any case, this isn&#x27;t a support channel, unless you&#x27;re doing development and having questions about the code for that reason this is not the place, use #bitcoin next time
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676540' id='418507'>
<a class='timestamp' href='#418507'><time timestamp='2020-12-11T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
then copy those over the same-named ones in your real dir
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676540' id='418508'>
<a class='timestamp' href='#418508'><time timestamp='2020-12-11T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and then do a reindex
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676540' id='418509'>
<a class='timestamp' href='#418509'><time timestamp='2020-12-11T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
also, yeah, what wumpus said
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676540' id='418510'>
<a class='timestamp' href='#418510'><time timestamp='2020-12-11T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
@wumpus sorry for that, and I will make sure to go to #bitcoin-core-dev
<br>
</div>

<div class='talk op-msg' data-timestamp='1607676600' id='418511'>
<a class='timestamp' href='#418511'><time timestamp='2020-12-11T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-6'> mj_node</span>&gt;
#bitcoin i mean...
<br>
</div>

<div class='talk op-msg' data-timestamp='1607677980' id='418512'>
<a class='timestamp' href='#418512'><time timestamp='2020-12-11T09:13:00Z'>09:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
support for rescanning with missing block files, and in general for disjointed block directories and downloading only missing blocks would be an interesting feature, and likely required for more eleborate pruning strategies, but I think there&#x27;s a few things prventing this from working right now
<br>
</div>

<div class='talk op-msg' data-timestamp='1607678400' id='418513'>
<a class='timestamp' href='#418513'><time timestamp='2020-12-11T09:20:00Z'>09:20</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
the way blocks and undo are stored now in blk and rev files would make this messy
<br>
</div>

<div class='talk op-msg' data-timestamp='1607678400' id='418514'>
<a class='timestamp' href='#418514'><time timestamp='2020-12-11T09:20:00Z'>09:20</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
put everything in sqlite!
<br>
</div>

<div class='talk op-msg' data-timestamp='1607678460' id='418515'>
<a class='timestamp' href='#418515'><time timestamp='2020-12-11T09:21:00Z'>09:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I don&#x27;t think the storage format is the problem, I think this kind of corruption is easier to handle the simpler your data format is
<br>
</div>

<div class='talk op-msg' data-timestamp='1607678520' id='418516'>
<a class='timestamp' href='#418516'><time timestamp='2020-12-11T09:22:00Z'>09:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
heh :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607678580' id='418517'>
<a class='timestamp' href='#418517'><time timestamp='2020-12-11T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ideally it would get the longest headers chain from P2P <b>*then*</b> start reconstructing
<br>
</div>

<div class='talk op-msg' data-timestamp='1607678580' id='418518'>
<a class='timestamp' href='#418518'><time timestamp='2020-12-11T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s easier to puzzle what fits where then
<br>
</div>

<div class='talk op-msg' data-timestamp='1607678640' id='418519'>
<a class='timestamp' href='#418519'><time timestamp='2020-12-11T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 5 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/736eb4d80838...6a4806367177" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/736eb4d80838...6a4806367177</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607678640' id='418520'>
<a class='timestamp' href='#418520'><time timestamp='2020-12-11T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 91d6195 Suhas Daftuar: Simplify and clarify extra outbound peer counting
<br>
</div>

<div class='talk op-msg' data-timestamp='1607678640' id='418521'>
<a class='timestamp' href='#418521'><time timestamp='2020-12-11T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 3cc8a7a Suhas Daftuar: Use conn_type to identify block-relay peers, rather than m_tx_relay == nul...
<br>
</div>

<div class='talk op-msg' data-timestamp='1607678640' id='418522'>
<a class='timestamp' href='#418522'><time timestamp='2020-12-11T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master daffaf0 Suhas Daftuar: Periodically make block-relay connections and sync headers
<br>
</div>

<div class='talk op-msg' data-timestamp='1607678640' id='418523'>
<a class='timestamp' href='#418523'><time timestamp='2020-12-11T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #19858: Periodically make block-relay connections and sync headers (master...2020-08-blocks-only-rotation) <a href="https://github.com/bitcoin/bitcoin/pull/19858" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19858</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607679000' id='418524'>
<a class='timestamp' href='#418524'><time timestamp='2020-12-11T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
instead of having &#x27;import blocks&#x27; as a discrete initialization phase, consider the unplaced but known blocks already on disk as another block source like P2P (thinking of it I suppose it <b>*almost*</b> works that way already, after reindex-chainstate two-phase reindex process)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607679060' id='418525'>
<a class='timestamp' href='#418525'><time timestamp='2020-12-11T09:31:00Z'>09:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;d be a lot of un-fun fiddling around with broken block directories and such to develop and test this, doesen&#x27;t sound like fun :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607679180' id='418526'>
<a class='timestamp' href='#418526'><time timestamp='2020-12-11T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
cfields: ping?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607679600' id='418527'>
<a class='timestamp' href='#418527'><time timestamp='2020-12-11T09:40:00Z'>09:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
at the least it&#x27;d need to rescan <b>*all*</b> `blk*` files, not stop when one is missing and delete the rest, e.g. get rid of this sledgehammer: <a href="https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L658" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L658</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607680140' id='418528'>
<a class='timestamp' href='#418528'><time timestamp='2020-12-11T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
wumpus: one thing that occurred to me, when I had a corrupted block directory myself and was waiting to see if core could recover (it could not), is that you have to be slightly careful
<br>
</div>

<div class='talk op-msg' data-timestamp='1607680200' id='418529'>
<a class='timestamp' href='#418529'><time timestamp='2020-12-11T09:50:00Z'>09:50</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
you don&#x27;t want any risk of ending up in a situation where your block files on disk actually contain two slightly different copies of the same block
<br>
</div>

<div class='talk op-msg' data-timestamp='1607680200' id='418530'>
<a class='timestamp' href='#418530'><time timestamp='2020-12-11T09:50:00Z'>09:50</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
and you checked one of them, but one or more indices ends up pointing at the other one
<br>
</div>

<div class='talk op-msg' data-timestamp='1607680260' id='418531'>
<a class='timestamp' href='#418531'><time timestamp='2020-12-11T09:51:00Z'>09:51</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
this seems like the sort of thing that could slip in, by being more liberal in what one accepts from the block files
<br>
</div>

<div class='talk op-msg' data-timestamp='1607680320' id='418532'>
<a class='timestamp' href='#418532'><time timestamp='2020-12-11T09:52:00Z'>09:52</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
(especially considered that it is Generally Regarded As Safe to grab this stuff from someone else to bootstrap, trusting that core will check it on startup before using it)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607680440' id='418533'>
<a class='timestamp' href='#418533'><time timestamp='2020-12-11T09:54:00Z'>09:54</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
isn&#x27;t that what `-loadblock=&lt;file&gt;` is for?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607680920' id='418534'>
<a class='timestamp' href='#418534'><time timestamp='2020-12-11T10:02:00Z'>10:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] Psyruss77 opened pull request #20623: Create msbuild.yml (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/20623" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20623</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607680980' id='418535'>
<a class='timestamp' href='#418535'><time timestamp='2020-12-11T10:03:00Z'>10:03</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake closed pull request #20623: Create msbuild.yml (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/20623" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20623</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607683740' id='418536'>
<a class='timestamp' href='#418536'><time timestamp='2020-12-11T10:49:00Z'>10:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #20624: net processing: Remove nStartingHeight check from block relay (master...2020-12-remove-starting-height) <a href="https://github.com/bitcoin/bitcoin/pull/20624" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20624</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607684040' id='418537'>
<a class='timestamp' href='#418537'><time timestamp='2020-12-11T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: is the logic for 20624 right? we never go back into IBD without stopping and restarting, but could conceivably get more than two weeks behind (eg if we&#x27;ve got an unattended node whose network was down)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607684340' id='418538'>
<a class='timestamp' href='#418538'><time timestamp='2020-12-11T10:59:00Z'>10:59</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
aj: potentially, yes. We could get out of IBD, lose connectivity and fall behind, and then start catching up again and relaying old blocks to peers. That&#x27;s mostly also the case now (the 2000 blocks behind nStartingHeight won&#x27;t stop us from relaying old blocks to peers if we&#x27;ve been connected to them for a while)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607684400' id='418539'>
<a class='timestamp' href='#418539'><time timestamp='2020-12-11T11:00:00Z'>11:00</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: presuming we were connected a while, they should be in the same state as us (either both current, or both out of date), so relaying is probably okay; if the network was down, when it came back up, we&#x27;d reconnect and choose new starting heights though?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607684460' id='418540'>
<a class='timestamp' href='#418540'><time timestamp='2020-12-11T11:01:00Z'>11:01</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I think the worst case is this: we get out of IBD, lose connectivity and fall behind, and then connect to new peers that are on the best tip. We start catching up and then relay headers to peers that are ahead of us. The worst case is 80 bytes for each header, and that peer wouldn&#x27;t download the block.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607684520' id='418541'>
<a class='timestamp' href='#418541'><time timestamp='2020-12-11T11:02:00Z'>11:02</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: i guess my impression is that if this works okay if you fall behind, it should work okay if you&#x27;re still in IBD?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607684640' id='418542'>
<a class='timestamp' href='#418542'><time timestamp='2020-12-11T11:04:00Z'>11:04</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
the &#x27;this&#x27; working ok being &#x27;checking that you&#x27;re within 2000 blocks of the peer&#x27;s starting height&#x27;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607684700' id='418543'>
<a class='timestamp' href='#418543'><time timestamp='2020-12-11T11:05:00Z'>11:05</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: jnewbery: &quot;sending headers, relaying blocks&quot; -- if it&#x27;s okay to do when you&#x27;ve been out of IBD but are 2001 blocks behind, it should also be okay if you&#x27;re in IBD?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607684760' id='418544'>
<a class='timestamp' href='#418544'><time timestamp='2020-12-11T11:06:00Z'>11:06</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: (the &quot;?&quot; there is doing a lot of work...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607684820' id='418545'>
<a class='timestamp' href='#418545'><time timestamp='2020-12-11T11:07:00Z'>11:07</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
maybe. I think it&#x27;s best that we just avoid relaying any inventory when we&#x27;re in IBD
<br>
</div>

<div class='talk op-msg' data-timestamp='1607684880' id='418546'>
<a class='timestamp' href='#418546'><time timestamp='2020-12-11T11:08:00Z'>11:08</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: so i think the argument against doing it in IBD is you could be on a relatively low-work but high-height fork from genesis, and end up spamming lots of headers/blocks and waste lots of b/w before everyone realises there&#x27;s a higher-work fork and switches to that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685000' id='418547'>
<a class='timestamp' href='#418547'><time timestamp='2020-12-11T11:10:00Z'>11:10</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685060' id='418548'>
<a class='timestamp' href='#418548'><time timestamp='2020-12-11T11:11:00Z'>11:11</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: doing a high-height fork from 2000 blocks ago is expensive, though; and maybe finishing IBD generally is good enough there -- worst case there&#x27;s a long, low-work chain from a year or two ago, <u>_and_</u> you&#x27;ve been running but disconnected for that time, but the number of nodes doing that are going to be small, even compared to the number of nodes syncing from genesis at any point in time?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685060' id='418549'>
<a class='timestamp' href='#418549'><time timestamp='2020-12-11T11:11:00Z'>11:11</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I&#x27;m confused. Are you arguing against the change in 20624?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685060' id='418550'>
<a class='timestamp' href='#418550'><time timestamp='2020-12-11T11:11:00Z'>11:11</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: no, i&#x27;m trying to understand it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685240' id='418551'>
<a class='timestamp' href='#418551'><time timestamp='2020-12-11T11:14:00Z'>11:14</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I think worst worst case is you send headers from that long chain from a year or two ago. Two years of headers is ~8MB
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685300' id='418552'>
<a class='timestamp' href='#418552'><time timestamp='2020-12-11T11:15:00Z'>11:15</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
aj: in practice, if you&#x27;re out of IBD, you&#x27;ll be syncing headers with all your peers shortly after the connection is established
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685300' id='418553'>
<a class='timestamp' href='#418553'><time timestamp='2020-12-11T11:15:00Z'>11:15</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
aj: because the criteria for doing that lines up pretty closely (iirc). While in IBD, we purposely sync headers from only one peer to avoid duplication.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685360' id='418554'>
<a class='timestamp' href='#418554'><time timestamp='2020-12-11T11:16:00Z'>11:16</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so i think if we are announcing blocks to peers while catching up after coming back online (so IBD is false, but we&#x27;re in fact behind), it&#x27;s no big deal, because we ought to know our peers&#x27; header chain anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685360' id='418555'>
<a class='timestamp' href='#418555'><time timestamp='2020-12-11T11:16:00Z'>11:16</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
and therefore won&#x27;t actually be announcing to them, since we&#x27;ll know they know the blocks already
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685480' id='418556'>
<a class='timestamp' href='#418556'><time timestamp='2020-12-11T11:18:00Z'>11:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i guess it&#x27;s worth testing that there&#x27;s not some slippage at the beginning of a connection, if they are slow to respond to our getheaders and we are connecting blocks, maybe we&#x27;d blast them with useless data?  not sure how likely that is
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685600' id='418557'>
<a class='timestamp' href='#418557'><time timestamp='2020-12-11T11:20:00Z'>11:20</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sdaftuar: are you talking about after removing the nStartingHeight check? I think if we&#x27;re out of IBD, we can&#x27;t be connecting that many blocks?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685660' id='418558'>
<a class='timestamp' href='#418558'><time timestamp='2020-12-11T11:21:00Z'>11:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
(just realized &quot;while in ibd, we purposely sync headers from only one peer&quot; is a bit imprecise -- what i meant was that we wait until we have completed header sync from one peer before syncing with others, so we could be connecting blocks whiel still doing header download, and not yet have tried syncing headers with our other peers)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685660' id='418559'>
<a class='timestamp' href='#418559'><time timestamp='2020-12-11T11:21:00Z'>11:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
jnewbery: yes i&#x27;m talking about that check (well your PR), trying to explain the IBD vs nonIBD distinction better
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685780' id='418560'>
<a class='timestamp' href='#418560'><time timestamp='2020-12-11T11:23:00Z'>11:23</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
hm! the behavior around exactly how we starting syncing headers witha  peer is not quite what i remember.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607685900' id='418561'>
<a class='timestamp' href='#418561'><time timestamp='2020-12-11T11:25:00Z'>11:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
it still may not matter much, but it looks like if we fall behind a bunch (say because we lost our network for a while, and then it came back up) that we would only sync headers from one peer until our tip is close to current, before syncing with new ones
<br>
</div>

<div class='talk op-msg' data-timestamp='1607686080' id='418562'>
<a class='timestamp' href='#418562'><time timestamp='2020-12-11T11:28:00Z'>11:28</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
anyway, i think that&#x27;s a long-winded way of me thinking that not-relay in IBD is the right behavior, and relaying while not in IBD even if we happen to be a bit behind is probably ok.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607686200' id='418563'>
<a class='timestamp' href='#418563'><time timestamp='2020-12-11T11:30:00Z'>11:30</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I need to understand the &quot;start block sync&quot; and FindNextBlocksToDownload() logic better
<br>
</div>

<div class='talk op-msg' data-timestamp='1607686320' id='418564'>
<a class='timestamp' href='#418564'><time timestamp='2020-12-11T11:32:00Z'>11:32</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
the basic idea is that when we start up, we pick a first peer to start syncing headers from. as soon as we have headers that indicate there is a tip &gt;= work of our current tip, we start downloading towards it from any peer that has it.  also, once our headers chain is close to current (time within a day of current time), we sync headers from all peers.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607686380' id='418565'>
<a class='timestamp' href='#418565'><time timestamp='2020-12-11T11:33:00Z'>11:33</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
and then as those peers respond with their headers (which should be quick, if our headers chain is the correct one -- a single header with their best tip is typical) we&#x27;ll download blocks from them as well, since we&#x27;ll know they have the blocks we need.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607686560' id='418566'>
<a class='timestamp' href='#418566'><time timestamp='2020-12-11T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
That certainly makes sense conceptually. I just gind that mapping that design to the various bits of logic and state in SendMessages() and elsewhere is a bit tricky
<br>
</div>

<div class='talk op-msg' data-timestamp='1607686680' id='418567'>
<a class='timestamp' href='#418567'><time timestamp='2020-12-11T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: &quot;gind&quot; ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607686680' id='418568'>
<a class='timestamp' href='#418568'><time timestamp='2020-12-11T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
find
<br>
</div>

<div class='talk op-msg' data-timestamp='1607686740' id='418569'>
<a class='timestamp' href='#418569'><time timestamp='2020-12-11T11:39:00Z'>11:39</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
*find
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688000' id='418570'>
<a class='timestamp' href='#418570'><time timestamp='2020-12-11T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
I&#x27;m looking at bech32 <a href="https://bitcoin.stackexchange.com/questions/100508/can-you-break-down-what-data-is-encoded-into-a-bech32-address" class="link" target="_blank">https://bitcoin.stackexchange.com/questions/100508/can-you-break-down-what-data-is-encoded-into-a-bech32-address</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688000' id='418571'>
<a class='timestamp' href='#418571'><time timestamp='2020-12-11T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
bech32 addresses start with bc representing Bitcoin and then 1 which is just a separator
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688000' id='418572'>
<a class='timestamp' href='#418572'><time timestamp='2020-12-11T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
But regtest bech32 start bcrt
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688060' id='418573'>
<a class='timestamp' href='#418573'><time timestamp='2020-12-11T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Does anyone know what the `rt` represent?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688060' id='418574'>
<a class='timestamp' href='#418574'><time timestamp='2020-12-11T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
regtest
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688120' id='418575'>
<a class='timestamp' href='#418575'><time timestamp='2020-12-11T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Huh, that was easy. Why does regtest have a rt separator yet testnet and signet both start tb1 an don&#x27;t need a separator?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688120' id='418576'>
<a class='timestamp' href='#418576'><time timestamp='2020-12-11T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
this comes from <a href="https://github.com/bitcoin/bitcoin/blob/master/src/chainparams.cpp#L446" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/chainparams.cpp#L446</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688180' id='418577'>
<a class='timestamp' href='#418577'><time timestamp='2020-12-11T12:03:00Z'>12:03</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
michaelfolkson: 1 is always the separator in bech32
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688240' id='418578'>
<a class='timestamp' href='#418578'><time timestamp='2020-12-11T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
both testnet and signet start with &#x27;tb&#x27; i don&#x27;t know why it was chosen to use the same there, probably because they are both test networks and there can potentially already be many of them
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688240' id='418579'>
<a class='timestamp' href='#418579'><time timestamp='2020-12-11T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Oh so regtest always starts bcrt1?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688240' id='418580'>
<a class='timestamp' href='#418580'><time timestamp='2020-12-11T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
bcrt is human readable and 1 is the separator
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688240' id='418581'>
<a class='timestamp' href='#418581'><time timestamp='2020-12-11T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688300' id='418582'>
<a class='timestamp' href='#418582'><time timestamp='2020-12-11T12:05:00Z'>12:05</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Ok thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688360' id='418583'>
<a class='timestamp' href='#418583'><time timestamp='2020-12-11T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
This is the context on why testnet and signet both start tb <a href="https://github.com/bitcoin/bitcoin/pull/18267#discussion_r491150895" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18267#discussion_r491150895</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688360' id='418584'>
<a class='timestamp' href='#418584'><time timestamp='2020-12-11T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
this is the best reference of course: <a href="https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki" class="link" target="_blank">https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688420' id='418585'>
<a class='timestamp' href='#418585'><time timestamp='2020-12-11T12:07:00Z'>12:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
michaelfolkson: thanks for looking it up so it was as i guessed
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688480' id='418586'>
<a class='timestamp' href='#418586'><time timestamp='2020-12-11T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Presumably non-default signets will be encouraged to not start tb
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688480' id='418587'>
<a class='timestamp' href='#418587'><time timestamp='2020-12-11T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Although can&#x27;t force them
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688480' id='418588'>
<a class='timestamp' href='#418588'><time timestamp='2020-12-11T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
michaelfolkson: nah, that would require patching the code
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688480' id='418589'>
<a class='timestamp' href='#418589'><time timestamp='2020-12-11T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Ohhh non-default signets will also start tb?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688480' id='418590'>
<a class='timestamp' href='#418590'><time timestamp='2020-12-11T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
michaelfolkson: there used to be config options for it, -signet_hrp= or so
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688540' id='418591'>
<a class='timestamp' href='#418591'><time timestamp='2020-12-11T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
seems from that discussion that all new test networks start with tb, as it&#x27;s for testing, address overlap is not critical
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688540' id='418592'>
<a class='timestamp' href='#418592'><time timestamp='2020-12-11T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that regtest has its own is a historical artifact then
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688540' id='418593'>
<a class='timestamp' href='#418593'><time timestamp='2020-12-11T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
yeah, and makes it easier to port wallets to different testnets
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688600' id='418594'>
<a class='timestamp' href='#418594'><time timestamp='2020-12-11T12:10:00Z'>12:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
exactly
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688600' id='418595'>
<a class='timestamp' href='#418595'><time timestamp='2020-12-11T12:10:00Z'>12:10</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
meanwhile regtest is kind-of bitcoin-core specific, and there&#x27;s no point having wallets work with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688660' id='418596'>
<a class='timestamp' href='#418596'><time timestamp='2020-12-11T12:11:00Z'>12:11</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Yeah treating regtest differently to testnet, signet makes sense as not meant to be a public network
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688660' id='418597'>
<a class='timestamp' href='#418597'><time timestamp='2020-12-11T12:11:00Z'>12:11</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Though choosing tb versus bcrt is a bit peculiar
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688660' id='418598'>
<a class='timestamp' href='#418598'><time timestamp='2020-12-11T12:11:00Z'>12:11</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
i noticed today that apparently when p2sh was being deployed, regtest didn&#x27;t even exist
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688720' id='418599'>
<a class='timestamp' href='#418599'><time timestamp='2020-12-11T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the public signet is a public network
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688720' id='418600'>
<a class='timestamp' href='#418600'><time timestamp='2020-12-11T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
And presumably the non-default signets would also be public(ish) networks
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688720' id='418601'>
<a class='timestamp' href='#418601'><time timestamp='2020-12-11T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Otherwise use regtest
<br>
</div>

<div class='talk op-msg' data-timestamp='1607688780' id='418602'>
<a class='timestamp' href='#418602'><time timestamp='2020-12-11T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes definitely easier to share
<br>
</div>

<div class='talk op-msg' data-timestamp='1607690220' id='418603'>
<a class='timestamp' href='#418603'><time timestamp='2020-12-11T12:37:00Z'>12:37</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
&quot;// Download if this is a nice peer, or we have no nice peers and this one might do.&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607690220' id='418604'>
<a class='timestamp' href='#418604'><time timestamp='2020-12-11T12:37:00Z'>12:37</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
love some of these comments :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607690760' id='418605'>
<a class='timestamp' href='#418605'><time timestamp='2020-12-11T12:46:00Z'>12:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s cute
<br>
</div>

<div class='talk op-msg' data-timestamp='1607692140' id='418606'>
<a class='timestamp' href='#418606'><time timestamp='2020-12-11T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
What you looking at jonatack?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607692200' id='418607'>
<a class='timestamp' href='#418607'><time timestamp='2020-12-11T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
michaelfolkson: grep the codebase ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607692260' id='418608'>
<a class='timestamp' href='#418608'><time timestamp='2020-12-11T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
So demanding of my typing fingers
<br>
</div>

<div class='talk op-msg' data-timestamp='1607692620' id='418609'>
<a class='timestamp' href='#418609'><time timestamp='2020-12-11T13:17:00Z'>13:17</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
you&#x27;d be forgiven for thinking that line was from a jane austen novel instead
<br>
</div>

<div class='talk op-msg' data-timestamp='1607692860' id='418610'>
<a class='timestamp' href='#418610'><time timestamp='2020-12-11T13:21:00Z'>13:21</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
&quot;It is a truth universally acknowledged, that a high-bandwidth archive node must be in want of an inbound connection&quot; ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607693100' id='418611'>
<a class='timestamp' href='#418611'><time timestamp='2020-12-11T13:25:00Z'>13:25</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
&quot;uhoh, different&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607698440' id='418612'>
<a class='timestamp' href='#418612'><time timestamp='2020-12-11T14:54:00Z'>14:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: strange, you have a mismatch for the gitian macos signed build
<br>
</div>

<div class='talk op-msg' data-timestamp='1607698500' id='418613'>
<a class='timestamp' href='#418613'><time timestamp='2020-12-11T14:55:00Z'>14:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but the unsigned one matches
<br>
</div>

<div class='talk op-msg' data-timestamp='1607699220' id='418614'>
<a class='timestamp' href='#418614'><time timestamp='2020-12-11T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: that’s really strange. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1607699220' id='418615'>
<a class='timestamp' href='#418615'><time timestamp='2020-12-11T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Let me do it again
<br>
</div>

<div class='talk op-msg' data-timestamp='1607699700' id='418616'>
<a class='timestamp' href='#418616'><time timestamp='2020-12-11T15:15:00Z'>15:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it shouldn&#x27;t even be possible, a difference would invalidate the code-signing right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607699760' id='418617'>
<a class='timestamp' href='#418617'><time timestamp='2020-12-11T15:16:00Z'>15:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
or is there scope for malleability
<br>
</div>

<div class='talk op-msg' data-timestamp='1607699880' id='418618'>
<a class='timestamp' href='#418618'><time timestamp='2020-12-11T15:18:00Z'>15:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
The only reason I could think of is that I have built it before the sigs where pushed (then it would have took the rc2 detached sig).
<br>
</div>

<div class='talk op-msg' data-timestamp='1607699940' id='418619'>
<a class='timestamp' href='#418619'><time timestamp='2020-12-11T15:19:00Z'>15:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But I very much doubt that I did this
<br>
</div>

<div class='talk op-msg' data-timestamp='1607700120' id='418620'>
<a class='timestamp' href='#418620'><time timestamp='2020-12-11T15:22:00Z'>15:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it doesn&#x27;t verify what it is attaching?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607700420' id='418621'>
<a class='timestamp' href='#418621'><time timestamp='2020-12-11T15:27:00Z'>15:27</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I don’t think so. It just takes the newest signature from the 0.21 branch (signature repository)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607700480' id='418622'>
<a class='timestamp' href='#418622'><time timestamp='2020-12-11T15:28:00Z'>15:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
A check against the release/tag should probably be added.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607700480' id='418623'>
<a class='timestamp' href='#418623'><time timestamp='2020-12-11T15:28:00Z'>15:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I investigate as soon as when I’m back on my desk
<br>
</div>

<div class='talk op-msg' data-timestamp='1607700480' id='418624'>
<a class='timestamp' href='#418624'><time timestamp='2020-12-11T15:28:00Z'>15:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I mean a check that the signature checks out against what it&#x27;s attached to
<br>
</div>

<div class='talk op-msg' data-timestamp='1607700540' id='418625'>
<a class='timestamp' href='#418625'><time timestamp='2020-12-11T15:29:00Z'>15:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the windows one has a check like that IIRC
<br>
</div>

<div class='talk op-msg' data-timestamp='1607700660' id='418626'>
<a class='timestamp' href='#418626'><time timestamp='2020-12-11T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: that’s not the case AFAIK. I don’t know if you can verify the signature on Linux. Probably possible but maybe complicated to add.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607700660' id='418627'>
<a class='timestamp' href='#418627'><time timestamp='2020-12-11T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1607701680' id='418628'>
<a class='timestamp' href='#418628'><time timestamp='2020-12-11T15:48:00Z'>15:48</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
is the CI failing to merge with master before running? or did we lose a bunch of Cirrus instances?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607701740' id='418629'>
<a class='timestamp' href='#418629'><time timestamp='2020-12-11T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ryanofsky closed pull request #19195: wallet: ScanForWalletTransactions cleanup (master...2020-06-06-scanforwallettransactions-cleanup) <a href="https://github.com/bitcoin/bitcoin/pull/19195" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19195</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607701800' id='418630'>
<a class='timestamp' href='#418630'><time timestamp='2020-12-11T15:50:00Z'>15:50</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
also does this error make sense to anyone? only happens on bitcoinbuilds :/ <a href="https://bitcoinbuilds.org/index.php?ansilog=98434a62-d0b5-4596-bfde-5e5504998bc3.log" class="link" target="_blank">https://bitcoinbuilds.org/index.php?ansilog=98434a62-d0b5-4596-bfde-5e5504998bc3.log</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607702040' id='418631'>
<a class='timestamp' href='#418631'><time timestamp='2020-12-11T15:54:00Z'>15:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: it&#x27;s passing two arguments to a function that takes one?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607702040' id='418632'>
<a class='timestamp' href='#418632'><time timestamp='2020-12-11T15:54:00Z'>15:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
e.g. &quot;CreateChainParams(gArgs, gArgs.GetChainName());&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607702400' id='418633'>
<a class='timestamp' href='#418633'><time timestamp='2020-12-11T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh the two-arg version is correct in master, is this some rebase/merge problem maybe?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607702460' id='418634'>
<a class='timestamp' href='#418634'><time timestamp='2020-12-11T16:01:00Z'>16:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
as somehow it ends up with an old chainparams.h with single-argument CreateChainParams
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704500' id='418635'>
<a class='timestamp' href='#418635'><time timestamp='2020-12-11T16:35:00Z'>16:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: I did the build again and getting now the “correct” hash.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704500' id='418636'>
<a class='timestamp' href='#418636'><time timestamp='2020-12-11T16:35:00Z'>16:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
New build: <a href="https://bitcoin.jonasschnelli.ch/gitian/build/360" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/gitian/build/360</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704500' id='418637'>
<a class='timestamp' href='#418637'><time timestamp='2020-12-11T16:35:00Z'>16:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Old build (the one I pushed to gitian.signs): <a href="https://bitcoin.jonasschnelli.ch/gitian/build/358" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/gitian/build/358</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704620' id='418638'>
<a class='timestamp' href='#418638'><time timestamp='2020-12-11T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: happy to hear that! time to upload the rc binaries then
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704620' id='418639'>
<a class='timestamp' href='#418639'><time timestamp='2020-12-11T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: I see. So that confirms a CI issue too &gt;_&lt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704620' id='418640'>
<a class='timestamp' href='#418640'><time timestamp='2020-12-11T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: bitcoinbuilds is apparently not merging master before running CI
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704740' id='418641'>
<a class='timestamp' href='#418641'><time timestamp='2020-12-11T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: AFAIK is does
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704800' id='418642'>
<a class='timestamp' href='#418642'><time timestamp='2020-12-11T16:40:00Z'>16:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Someone, my old (invalid) build has different bitcoin-osx-unsigned.tar.gz as input
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704800' id='418643'>
<a class='timestamp' href='#418643'><time timestamp='2020-12-11T16:40:00Z'>16:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I don&#x27;t know why
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704800' id='418644'>
<a class='timestamp' href='#418644'><time timestamp='2020-12-11T16:40:00Z'>16:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(old invalid build): <a href="https://bitcoin.jonasschnelli.ch/gitian/builds/360/bitcoin-dmg-signer-build.assert" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/gitian/builds/360/bitcoin-dmg-signer-build.assert</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704860' id='418645'>
<a class='timestamp' href='#418645'><time timestamp='2020-12-11T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
<a href="https://bitcoin.jonasschnelli.ch/gitian/builds/358/bitcoin-dmg-signer-build.assert" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/gitian/builds/358/bitcoin-dmg-signer-build.assert</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704860' id='418646'>
<a class='timestamp' href='#418646'><time timestamp='2020-12-11T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
very strange
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704920' id='418647'>
<a class='timestamp' href='#418647'><time timestamp='2020-12-11T16:42:00Z'>16:42</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: see <a href="https://bitcoinbuilds.org/index.php?ansilog=98434a62-d0b5-4596-bfde-5e5504998bc3.log" class="link" target="_blank">https://bitcoinbuilds.org/index.php?ansilog=98434a62-d0b5-4596-bfde-5e5504998bc3.log</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607704920' id='418648'>
<a class='timestamp' href='#418648'><time timestamp='2020-12-11T16:42:00Z'>16:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I was just checking and came to the same conclusion luke-jr... hmm..
<br>
</div>

<div class='talk op-msg' data-timestamp='1607705040' id='418649'>
<a class='timestamp' href='#418649'><time timestamp='2020-12-11T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: if I fix my PR will it mess up your ability to troubleshoot?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607705040' id='418650'>
<a class='timestamp' href='#418650'><time timestamp='2020-12-11T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: your right... so yes. bitcoinbuilds currently builds PR branches as they are (not merged on master)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607705040' id='418651'>
<a class='timestamp' href='#418651'><time timestamp='2020-12-11T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: no. I&#x27;ll know how to fix it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607705040' id='418652'>
<a class='timestamp' href='#418652'><time timestamp='2020-12-11T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
k
<br>
</div>

<div class='talk op-msg' data-timestamp='1607705700' id='418653'>
<a class='timestamp' href='#418653'><time timestamp='2020-12-11T16:55:00Z'>16:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: treating the block data as an import sounds like a good idea, and not too hard
<br>
</div>

<div class='talk op-msg' data-timestamp='1607706120' id='418654'>
<a class='timestamp' href='#418654'><time timestamp='2020-12-11T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
wumpus: yes, the prepared statement for each batch is so that we don&#x27;t have issues where there are multiple batches for the same database. Although I&#x27;m pretty sure that we never have multiple batches writing to the same db at the same time anyeays.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607706180' id='418655'>
<a class='timestamp' href='#418655'><time timestamp='2020-12-11T17:03:00Z'>17:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: great!
<br>
</div>

<div class='talk op-msg' data-timestamp='1607706240' id='418656'>
<a class='timestamp' href='#418656'><time timestamp='2020-12-11T17:04:00Z'>17:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
achow101: right, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1607708280' id='418657'>
<a class='timestamp' href='#418657'><time timestamp='2020-12-11T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
rc3 binaries up <a href="https://bitcoincore.org/bin/bitcoin-core-0.21.0/test.rc3/" class="link" target="_blank">https://bitcoincore.org/bin/bitcoin-core-0.21.0/test.rc3/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709420' id='418658'>
<a class='timestamp' href='#418658'><time timestamp='2020-12-11T17:57:00Z'>17:57</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
for some reason gverify is giving a mismatch for darosior&#x27;s 0.20.2rc1 win and osx builds, but manual inspection does not show a difference
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709420' id='418659'>
<a class='timestamp' href='#418659'><time timestamp='2020-12-11T17:57:00Z'>17:57</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
O.o
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709600' id='418660'>
<a class='timestamp' href='#418660'><time timestamp='2020-12-11T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
achow101: where do you see it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709600' id='418661'>
<a class='timestamp' href='#418661'><time timestamp='2020-12-11T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
locally
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709660' id='418662'>
<a class='timestamp' href='#418662'><time timestamp='2020-12-11T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I also see no difference
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709660' id='418663'>
<a class='timestamp' href='#418663'><time timestamp='2020-12-11T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
does gverify look at filename dates or other file attributes?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709720' id='418664'>
<a class='timestamp' href='#418664'><time timestamp='2020-12-11T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-15'> darosior</span>&gt;
Hmm, gverify passes on my end
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709720' id='418665'>
<a class='timestamp' href='#418665'><time timestamp='2020-12-11T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
achow101: could the signature be invalid/rejected for some reason?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709720' id='418666'>
<a class='timestamp' href='#418666'><time timestamp='2020-12-11T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
luke-jr: i don&#x27;t think so
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709720' id='418667'>
<a class='timestamp' href='#418667'><time timestamp='2020-12-11T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-15'> darosior</span>&gt;
Oh no, it does not
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709720' id='418668'>
<a class='timestamp' href='#418668'><time timestamp='2020-12-11T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-15'> darosior</span>&gt;
Not for Windows, good catch..
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709780' id='418669'>
<a class='timestamp' href='#418669'><time timestamp='2020-12-11T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
roconnor: iirc it expects the same filenames
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709780' id='418670'>
<a class='timestamp' href='#418670'><time timestamp='2020-12-11T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
oh, found it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709780' id='418671'>
<a class='timestamp' href='#418671'><time timestamp='2020-12-11T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
- release: v0.20.2rc1-win-unsigned
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709780' id='418672'>
<a class='timestamp' href='#418672'><time timestamp='2020-12-11T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I bet tha&#x27;ts it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709840' id='418673'>
<a class='timestamp' href='#418673'><time timestamp='2020-12-11T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ugh
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709840' id='418674'>
<a class='timestamp' href='#418674'><time timestamp='2020-12-11T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ok that doesn&#x27;t matter
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709900' id='418675'>
<a class='timestamp' href='#418675'><time timestamp='2020-12-11T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-16'> prusnak</span>&gt;
Big Sur says Bitcoin Core installed from bitcoin-0.21.0rc3-osx.dmg is broken and should be moved to the bin; that said this happens on M1 system, so maybe on x86-64 it&#x27;s fine
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709900' id='418676'>
<a class='timestamp' href='#418676'><time timestamp='2020-12-11T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-16'> prusnak</span>&gt;
maybe jonasschnelli can confirm? ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709900' id='418677'>
<a class='timestamp' href='#418677'><time timestamp='2020-12-11T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
prusnak: is it the notarization warning?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607709900' id='418678'>
<a class='timestamp' href='#418678'><time timestamp='2020-12-11T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-16'> prusnak</span>&gt;
no, it&#x27;s different than the error with rc2 (which i assume was notarization error)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710020' id='418679'>
<a class='timestamp' href='#418679'><time timestamp='2020-12-11T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
where did the dmg come from?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710020' id='418680'>
<a class='timestamp' href='#418680'><time timestamp='2020-12-11T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
could we have ended up with a signature that doesn&#x27;t match a non-deterministic bin?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710080' id='418681'>
<a class='timestamp' href='#418681'><time timestamp='2020-12-11T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
Just tested on x86_64, same error
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710080' id='418682'>
<a class='timestamp' href='#418682'><time timestamp='2020-12-11T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
:/
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710140' id='418683'>
<a class='timestamp' href='#418683'><time timestamp='2020-12-11T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
what about the unsigned dmg?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710140' id='418684'>
<a class='timestamp' href='#418684'><time timestamp='2020-12-11T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
any more detail on that error?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710200' id='418685'>
<a class='timestamp' href='#418685'><time timestamp='2020-12-11T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
<a href="https://nextcloud.carl.homeserver.net/s/WXdFHLwwTygXZW4" class="link" target="_blank">https://nextcloud.carl.homeserver.net/s/WXdFHLwwTygXZW4</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710260' id='418686'>
<a class='timestamp' href='#418686'><time timestamp='2020-12-11T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
dongcarl: what is that and why does it demand I run JS?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710320' id='418687'>
<a class='timestamp' href='#418687'><time timestamp='2020-12-11T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
Direct link: <a href="https://nextcloud.carl.homeserver.net/s/WXdFHLwwTygXZW4/preview" class="link" target="_blank">https://nextcloud.carl.homeserver.net/s/WXdFHLwwTygXZW4/preview</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710320' id='418688'>
<a class='timestamp' href='#418688'><time timestamp='2020-12-11T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
It&#x27;s just the screenshot of the error when I open from the DMG (didn&#x27;t drag to Applications)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710320' id='418689'>
<a class='timestamp' href='#418689'><time timestamp='2020-12-11T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
does that question mark on the bottom left tell anything more?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710380' id='418690'>
<a class='timestamp' href='#418690'><time timestamp='2020-12-11T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
hmm, damaged?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710380' id='418691'>
<a class='timestamp' href='#418691'><time timestamp='2020-12-11T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
damaged could mean the signature check fails, i guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710380' id='418692'>
<a class='timestamp' href='#418692'><time timestamp='2020-12-11T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
<a href="https://nextcloud.carl.homeserver.net/s/7YTDtmrgaqPCYde/preview" class="link" target="_blank">https://nextcloud.carl.homeserver.net/s/7YTDtmrgaqPCYde/preview</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710440' id='418693'>
<a class='timestamp' href='#418693'><time timestamp='2020-12-11T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
code signing went wrong
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710440' id='418694'>
<a class='timestamp' href='#418694'><time timestamp='2020-12-11T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sounds like it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710440' id='418695'>
<a class='timestamp' href='#418695'><time timestamp='2020-12-11T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
dongcarl: can you verify the unsigned DMG is okay?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710440' id='418696'>
<a class='timestamp' href='#418696'><time timestamp='2020-12-11T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ping jonasschnelli 
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710440' id='418697'>
<a class='timestamp' href='#418697'><time timestamp='2020-12-11T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
luke-jr: that&#x27;s not uploaded yet I don&#x27;t think
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710500' id='418698'>
<a class='timestamp' href='#418698'><time timestamp='2020-12-11T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
Happy to test if anyone has one
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710500' id='418699'>
<a class='timestamp' href='#418699'><time timestamp='2020-12-11T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
dongcarl: uploading it soon
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710620' id='418700'>
<a class='timestamp' href='#418700'><time timestamp='2020-12-11T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
<a href="https://github.com/achow101/bitcoin/releases/tag/v0.21.0rc3" class="link" target="_blank">https://github.com/achow101/bitcoin/releases/tag/v0.21.0rc3</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710680' id='418701'>
<a class='timestamp' href='#418701'><time timestamp='2020-12-11T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
achow101: works
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710740' id='418702'>
<a class='timestamp' href='#418702'><time timestamp='2020-12-11T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-16'> prusnak</span>&gt;
same here (on m1 system)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710800' id='418703'>
<a class='timestamp' href='#418703'><time timestamp='2020-12-11T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sounds like jonasschnelli signed the wrong file, or committed the wrong sig
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710800' id='418704'>
<a class='timestamp' href='#418704'><time timestamp='2020-12-11T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
or our combining process is suddnely broke
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710860' id='418705'>
<a class='timestamp' href='#418705'><time timestamp='2020-12-11T18:21:00Z'>18:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i think he signed the wrong file
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710980' id='418706'>
<a class='timestamp' href='#418706'><time timestamp='2020-12-11T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
maybe I should keep my nose out of this, but what are the consequences of signing the wrong thing?  AFAIK publish signatures are unrevokable.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710980' id='418707'>
<a class='timestamp' href='#418707'><time timestamp='2020-12-11T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
*published
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710980' id='418708'>
<a class='timestamp' href='#418708'><time timestamp='2020-12-11T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
who does the windows codesigning?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607710980' id='418709'>
<a class='timestamp' href='#418709'><time timestamp='2020-12-11T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
me
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711040' id='418710'>
<a class='timestamp' href='#418710'><time timestamp='2020-12-11T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
roconnor: You might be thinking of notarization instead of codesigning?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711040' id='418711'>
<a class='timestamp' href='#418711'><time timestamp='2020-12-11T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
maybe.  What&#x27;s the difference?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711040' id='418712'>
<a class='timestamp' href='#418712'><time timestamp='2020-12-11T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
roconnor: in theory there shouldn&#x27;t be any consequences because code signing is only done to shut up os warnings.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711040' id='418713'>
<a class='timestamp' href='#418713'><time timestamp='2020-12-11T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
ah.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711040' id='418714'>
<a class='timestamp' href='#418714'><time timestamp='2020-12-11T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
but in practice, it both doesn&#x27;t do that anymore, and it does convey some level of &quot;this software is trusted&quot; because users don&#x27;t quite understand why we do that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711100' id='418715'>
<a class='timestamp' href='#418715'><time timestamp='2020-12-11T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
maybe we should just stop signing then?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711100' id='418716'>
<a class='timestamp' href='#418716'><time timestamp='2020-12-11T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the consequence is that the software that is signed is malicious and some user is tricked into signing it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711100' id='418717'>
<a class='timestamp' href='#418717'><time timestamp='2020-12-11T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
*using it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711100' id='418718'>
<a class='timestamp' href='#418718'><time timestamp='2020-12-11T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
maybe these code signatures are revokable?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711160' id='418719'>
<a class='timestamp' href='#418719'><time timestamp='2020-12-11T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
roconnor: these days, to <b>*actually*</b> shut macOS up, you have to opt in to Apple privacy violations (it tells them every time the app is opened, and which app it was)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711160' id='418720'>
<a class='timestamp' href='#418720'><time timestamp='2020-12-11T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
luke-jr: code signing is required for notarization, and notarization is now the thing to make macOS not give a warning
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711160' id='418721'>
<a class='timestamp' href='#418721'><time timestamp='2020-12-11T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
achow101: but notarization is problematic, and we don&#x27;t do it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711160' id='418722'>
<a class='timestamp' href='#418722'><time timestamp='2020-12-11T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
so if the signature-alone is useless, why bother?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711160' id='418723'>
<a class='timestamp' href='#418723'><time timestamp='2020-12-11T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
iirc there&#x27;s 2 levels of warnings, with signature alone being slightly less aggressive?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711220' id='418724'>
<a class='timestamp' href='#418724'><time timestamp='2020-12-11T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
and at least it still works on older macOS
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711220' id='418725'>
<a class='timestamp' href='#418725'><time timestamp='2020-12-11T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
older macOS that we dropped support for? :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711220' id='418726'>
<a class='timestamp' href='#418726'><time timestamp='2020-12-11T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
luke-jr: Without signing, the warning is much scarier... something like &quot;unknown developer&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711340' id='418727'>
<a class='timestamp' href='#418727'><time timestamp='2020-12-11T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I think there&#x27;s an older macOS we support that doesn&#x27;t do the notarization check
<br>
</div>

<div class='talk op-msg' data-timestamp='1607711400' id='418728'>
<a class='timestamp' href='#418728'><time timestamp='2020-12-11T18:30:00Z'>18:30</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
anyway, jonas can prob fix this easily
<br>
</div>

<div class='talk op-msg' data-timestamp='1607713680' id='418729'>
<a class='timestamp' href='#418729'><time timestamp='2020-12-11T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sorry.. was afk.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607713680' id='418730'>
<a class='timestamp' href='#418730'><time timestamp='2020-12-11T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Reading backlog
<br>
</div>

<div class='talk op-msg' data-timestamp='1607713740' id='418731'>
<a class='timestamp' href='#418731'><time timestamp='2020-12-11T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I codesigned 5e3a08ae8195190d6f1b12e3e1e9d710e7ad385941a6e8d04e3391f12deddb11  bitcoin-0.21.0rc3-osx-unsigned.tar.gz
<br>
</div>

<div class='talk op-msg' data-timestamp='1607713980' id='418732'>
<a class='timestamp' href='#418732'><time timestamp='2020-12-11T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101, luke-jr: I just checked the DMG is built initially and it works, signature is correct
<br>
</div>

<div class='talk op-msg' data-timestamp='1607713980' id='418733'>
<a class='timestamp' href='#418733'><time timestamp='2020-12-11T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I got 998dddf3c0f9b568fc0c39e61e3d61d2843dfb968016b7ceaf23aca94ace2542  bitcoin-osx-signed.dmg as the only one
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714100' id='418734'>
<a class='timestamp' href='#418734'><time timestamp='2020-12-11T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But yes,... 46cfa036d365d69db2a3b78377621d6b214f2d78f3082f9c7ebd7a9b89cfc599  bitcoin-osx-signed.dmg has an invalid code signature
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714160' id='418735'>
<a class='timestamp' href='#418735'><time timestamp='2020-12-11T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
but I signed 5e3a08ae8195190d6f1b12e3e1e9d710e7ad385941a6e8d04e3391f12deddb11  bitcoin-0.21.0rc3-osx-unsigned.tar.gz
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714160' id='418736'>
<a class='timestamp' href='#418736'><time timestamp='2020-12-11T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
let me try agai
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714400' id='418737'>
<a class='timestamp' href='#418737'><time timestamp='2020-12-11T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I double checked and I can confirm that I have signed 5e3a08ae8195190d6f1b12e3e1e9d710e7ad385941a6e8d04e3391f12deddb11  bitcoin-0.21.0rc3-osx-unsigned.tar.gz
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714400' id='418738'>
<a class='timestamp' href='#418738'><time timestamp='2020-12-11T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
is signing deterministic?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714400' id='418739'>
<a class='timestamp' href='#418739'><time timestamp='2020-12-11T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
The signature is not deterministic,... doing it again gives me a different file/hash
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714400' id='418740'>
<a class='timestamp' href='#418740'><time timestamp='2020-12-11T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I can&#x27;t verify what went wrong
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714520' id='418741'>
<a class='timestamp' href='#418741'><time timestamp='2020-12-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I have verified the signed 5e3a08ae8195190d6f1b12e3e1e9d710e7ad385941a6e8d04e3391f12deddb11  bitcoin-0.21.0rc3-osx-unsigned.tar.gz and it works
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714520' id='418742'>
<a class='timestamp' href='#418742'><time timestamp='2020-12-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I don&#x27;t know what to do,... I can sign and push again. But I rather know why it happend
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714580' id='418743'>
<a class='timestamp' href='#418743'><time timestamp='2020-12-11T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
How can you check what was signed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714580' id='418744'>
<a class='timestamp' href='#418744'><time timestamp='2020-12-11T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I keep the files
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714640' id='418745'>
<a class='timestamp' href='#418745'><time timestamp='2020-12-11T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714700' id='418746'>
<a class='timestamp' href='#418746'><time timestamp='2020-12-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I guess for an rc it&#x27;s fine to leave it, but in the future we should test the signed binary first
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714760' id='418747'>
<a class='timestamp' href='#418747'><time timestamp='2020-12-11T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
we&#x27;ll correct it for the next rc (or final) I guess, it&#x27;s too bad the sig verification can&#x27;t run in linux
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714760' id='418748'>
<a class='timestamp' href='#418748'><time timestamp='2020-12-11T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
we can&#x27;t verify the signature after signing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714820' id='418749'>
<a class='timestamp' href='#418749'><time timestamp='2020-12-11T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we have a linux based signing tool, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714880' id='418750'>
<a class='timestamp' href='#418750'><time timestamp='2020-12-11T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
only for windows afaik
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714880' id='418751'>
<a class='timestamp' href='#418751'><time timestamp='2020-12-11T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;d be surprised if it doesn&#x27;t have most of the code needed for verification too
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714880' id='418752'>
<a class='timestamp' href='#418752'><time timestamp='2020-12-11T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh
<br>
</div>

<div class='talk op-msg' data-timestamp='1607714880' id='418753'>
<a class='timestamp' href='#418753'><time timestamp='2020-12-11T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
for windows we can (and do I think) verify the sig after signing
<br>
</div>

<div class='talk op-msg' data-timestamp='1607715000' id='418754'>
<a class='timestamp' href='#418754'><time timestamp='2020-12-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so the osx signature is created on osx, but stapled onto the binary in gitian/linux ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607715000' id='418755'>
<a class='timestamp' href='#418755'><time timestamp='2020-12-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*macos
<br>
</div>

<div class='talk op-msg' data-timestamp='1607715060' id='418756'>
<a class='timestamp' href='#418756'><time timestamp='2020-12-11T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1607715180' id='418757'>
<a class='timestamp' href='#418757'><time timestamp='2020-12-11T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: can you upload or compare 998dddf3c0f9b568fc0c39e61e3d61d2843dfb968016b7ceaf23aca94ace2542 with 46cfa036d365d69db2a3b78377621d6b214f2d78f3082f9c7ebd7a9b89cfc599 ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607715180' id='418758'>
<a class='timestamp' href='#418758'><time timestamp='2020-12-11T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I guess our combiner is malfunctioning?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607715240' id='418759'>
<a class='timestamp' href='#418759'><time timestamp='2020-12-11T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: 46cfa036d365d69db2a3b78377621d6b214f2d78f3082f9c7ebd7a9b89cfc599  is here -&gt; <a href="https://bitcoin.jonasschnelli.ch/gitian/build/360" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/gitian/build/360</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607715540' id='418760'>
<a class='timestamp' href='#418760'><time timestamp='2020-12-11T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: I don&#x27;t have 46cfa036d365d69db2a3b78377621d6b214f2d78f3082f9c7ebd7a9b89cfc599
<br>
</div>

<div class='talk op-msg' data-timestamp='1607715540' id='418761'>
<a class='timestamp' href='#418761'><time timestamp='2020-12-11T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
my first gitian build went somehow wrong: <a href="https://bitcoin.jonasschnelli.ch/gitian/build/358" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/gitian/build/358</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607715600' id='418762'>
<a class='timestamp' href='#418762'><time timestamp='2020-12-11T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
the build log from the signer was actually a full macOS unsigned build: <a href="https://bitcoin.jonasschnelli.ch/gitian/builds/358/build_osx_signer.log" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/gitian/builds/358/build_osx_signer.log</a> (for whatever reason)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607715660' id='418763'>
<a class='timestamp' href='#418763'><time timestamp='2020-12-11T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think the dmg hash mismatch has nothing to do with the invalid signature
<br>
</div>

<div class='talk op-msg' data-timestamp='1607715960' id='418764'>
<a class='timestamp' href='#418764'><time timestamp='2020-12-11T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
hmm...
<br>
</div>

<div class='talk op-msg' data-timestamp='1607716020' id='418765'>
<a class='timestamp' href='#418765'><time timestamp='2020-12-11T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think what I need to do before pushing the macOS signatures is doing a gbuild with gitian-descriptors/gitian-osx-signer.yml with the detached signature
<br>
</div>

<div class='talk op-msg' data-timestamp='1607716020' id='418766'>
<a class='timestamp' href='#418766'><time timestamp='2020-12-11T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
as sort of a dbl-check
<br>
</div>

<div class='talk op-msg' data-timestamp='1607716260' id='418767'>
<a class='timestamp' href='#418767'><time timestamp='2020-12-11T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
would still be nice to figure out why it didn&#x27;t work this time :x
<br>
</div>

<div class='talk op-msg' data-timestamp='1607716380' id='418768'>
<a class='timestamp' href='#418768'><time timestamp='2020-12-11T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] vova557 opened pull request #20628: Владелец (master...patch-10) <a href="https://github.com/bitcoin/bitcoin/pull/20628" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20628</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607716440' id='418769'>
<a class='timestamp' href='#418769'><time timestamp='2020-12-11T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: Indeed. I&#x27;m still trying to figure that out.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717460' id='418770'>
<a class='timestamp' href='#418770'><time timestamp='2020-12-11T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
one of the main problem is, that I currently can&#x27;t test the detached signature before pushing it to the git repository
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717460' id='418771'>
<a class='timestamp' href='#418771'><time timestamp='2020-12-11T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I try now to modify the gitian descriptor to allow that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717520' id='418772'>
<a class='timestamp' href='#418772'><time timestamp='2020-12-11T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli closed pull request #20628: Владелец (master...patch-10) <a href="https://github.com/bitcoin/bitcoin/pull/20628" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20628</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717580' id='418773'>
<a class='timestamp' href='#418773'><time timestamp='2020-12-11T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: you can put it in gitian-builder/inputs/signature
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717580' id='418774'>
<a class='timestamp' href='#418774'><time timestamp='2020-12-11T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
and make a local tag
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717580' id='418775'>
<a class='timestamp' href='#418775'><time timestamp='2020-12-11T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
and set --commit signature=&lt;tag&gt; to that custom tag?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717640' id='418776'>
<a class='timestamp' href='#418776'><time timestamp='2020-12-11T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i just set it to the actual version name
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717640' id='418777'>
<a class='timestamp' href='#418777'><time timestamp='2020-12-11T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
and delete it later for the actual build
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717700' id='418778'>
<a class='timestamp' href='#418778'><time timestamp='2020-12-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
but AFAIK the signer always pulls <a href="https://github.com/bitcoin-core/bitcoin-detached-sigs.git" class="link" target="_blank">https://github.com/bitcoin-core/bitcoin-detached-sigs.git</a>?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717700' id='418779'>
<a class='timestamp' href='#418779'><time timestamp='2020-12-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it pulls but it shouldn&#x27;t do anything
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717700' id='418780'>
<a class='timestamp' href='#418780'><time timestamp='2020-12-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
and overwrites the git?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717700' id='418781'>
<a class='timestamp' href='#418781'><time timestamp='2020-12-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it doesn&#x27;t overwrite
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717700' id='418782'>
<a class='timestamp' href='#418782'><time timestamp='2020-12-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ah.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717760' id='418783'>
<a class='timestamp' href='#418783'><time timestamp='2020-12-11T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I added now a part to the descriptor that allows putting a signatures.tar.gz in inputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717760' id='418784'>
<a class='timestamp' href='#418784'><time timestamp='2020-12-11T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
and if there,... it&#x27;ll take it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717820' id='418785'>
<a class='timestamp' href='#418785'><time timestamp='2020-12-11T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: -u bitcoin=/path/to/local/bitcoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717880' id='418786'>
<a class='timestamp' href='#418786'><time timestamp='2020-12-11T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
tells gbuild where to pull from
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717880' id='418787'>
<a class='timestamp' href='#418787'><time timestamp='2020-12-11T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I always have ti pull from local
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717880' id='418788'>
<a class='timestamp' href='#418788'><time timestamp='2020-12-11T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: <a href="https://github.com/bitcoin/bitcoin/blob/master/contrib/gitian-descriptors/gitian-osx-signer.yml#L11" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/contrib/gitian-descriptors/gitian-osx-signer.yml#L11</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717880' id='418789'>
<a class='timestamp' href='#418789'><time timestamp='2020-12-11T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess it always pulls it from there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717940' id='418790'>
<a class='timestamp' href='#418790'><time timestamp='2020-12-11T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-8'> midnight</span>&gt;
Oh nice, no changes necessary in the gitian signing env and I&#x27;m getting matches.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717940' id='418791'>
<a class='timestamp' href='#418791'><time timestamp='2020-12-11T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
not if you specify -u
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717940' id='418792'>
<a class='timestamp' href='#418792'><time timestamp='2020-12-11T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
    -u, --url PAIRS                  comma separated list of DIRECTORY=URL pairs
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717940' id='418793'>
<a class='timestamp' href='#418793'><time timestamp='2020-12-11T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
not very useful --help lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717940' id='418794'>
<a class='timestamp' href='#418794'><time timestamp='2020-12-11T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I do that for bitcoin=
<br>
</div>

<div class='talk op-msg' data-timestamp='1607717940' id='418795'>
<a class='timestamp' href='#418795'><time timestamp='2020-12-11T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
but wasn&#x27;t aware you can also do it then for signature=
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718000' id='418796'>
<a class='timestamp' href='#418796'><time timestamp='2020-12-11T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
it&#x27;s no different ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718000' id='418797'>
<a class='timestamp' href='#418797'><time timestamp='2020-12-11T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
However,.. I&#x27;m going for the additional input file
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718000' id='418798'>
<a class='timestamp' href='#418798'><time timestamp='2020-12-11T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-8'> midnight</span>&gt;
just me and wumpus I think with the windows sigs for the rc but
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718000' id='418799'>
<a class='timestamp' href='#418799'><time timestamp='2020-12-11T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Seems dummysave
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718000' id='418800'>
<a class='timestamp' href='#418800'><time timestamp='2020-12-11T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-12'> * midnight</span>&gt;
shrug
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718060' id='418801'>
<a class='timestamp' href='#418801'><time timestamp='2020-12-11T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
midnight: ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718060' id='418802'>
<a class='timestamp' href='#418802'><time timestamp='2020-12-11T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-8'> midnight</span>&gt;
luke-jr: working nicely still, in spite of my semi-custom build environment.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718060' id='418803'>
<a class='timestamp' href='#418803'><time timestamp='2020-12-11T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
midnight: I see lots of windows sigs for 0.21.0rc3
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718060' id='418804'>
<a class='timestamp' href='#418804'><time timestamp='2020-12-11T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-8'> midnight</span>&gt;
hrm
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718240' id='418805'>
<a class='timestamp' href='#418805'><time timestamp='2020-12-11T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
midnight: I guess semi-custom is good. Better than if everyone uses the same host/env with the same script
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718240' id='418806'>
<a class='timestamp' href='#418806'><time timestamp='2020-12-11T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
my attempt to semi-custom was met with mismatching
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718240' id='418807'>
<a class='timestamp' href='#418807'><time timestamp='2020-12-11T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
but my idea of semi-custom was a ppc64le VM image :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718240' id='418808'>
<a class='timestamp' href='#418808'><time timestamp='2020-12-11T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
have you figured out why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718300' id='418809'>
<a class='timestamp' href='#418809'><time timestamp='2020-12-11T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-8'> midnight</span>&gt;
jonasschnelli: The maintenance of the custom(ish) build env is entirely on me, and I figure it&#x27;s better to arrive at similar results this way.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718300' id='418810'>
<a class='timestamp' href='#418810'><time timestamp='2020-12-11T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: apparently the ppc64le compilers do not output the same objects as the x86_64 compilers, even cross compiling
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718300' id='418811'>
<a class='timestamp' href='#418811'><time timestamp='2020-12-11T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
no idea why :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718300' id='418812'>
<a class='timestamp' href='#418812'><time timestamp='2020-12-11T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-8'> midnight</span>&gt;
triangulation and all that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718360' id='418813'>
<a class='timestamp' href='#418813'><time timestamp='2020-12-11T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
you would <b>*think*</b> i686-w64-mingw64-gcc (or whatever) would produce the same stuff on x86_64 and ppc64le, but apparently not
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718600' id='418814'>
<a class='timestamp' href='#418814'><time timestamp='2020-12-11T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] dongcarl opened pull request #20629:  depends: Improve id string robustness  (master...2020-12-improve-depends-id-string) <a href="https://github.com/bitcoin/bitcoin/pull/20629" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20629</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607718720' id='418815'>
<a class='timestamp' href='#418815'><time timestamp='2020-12-11T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
i&#x27;m doing the 0.20.2 mac signatures asap (need to track-down the previous issue first)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719560' id='418816'>
<a class='timestamp' href='#418816'><time timestamp='2020-12-11T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
is there a way to speeup gitians &quot;Upgrading system, may take a while (log in var/install.log)&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719560' id='418817'>
<a class='timestamp' href='#418817'><time timestamp='2020-12-11T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Re-create the base system?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719560' id='418818'>
<a class='timestamp' href='#418818'><time timestamp='2020-12-11T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
s/system/image
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719620' id='418819'>
<a class='timestamp' href='#418819'><time timestamp='2020-12-11T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
iirc, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719620' id='418820'>
<a class='timestamp' href='#418820'><time timestamp='2020-12-11T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
creating an image after the update speeds things up
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719680' id='418821'>
<a class='timestamp' href='#418821'><time timestamp='2020-12-11T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
the install part takes &gt;10mins here.. annoying for testing
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719680' id='418822'>
<a class='timestamp' href='#418822'><time timestamp='2020-12-11T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, the &quot;Upgrading image&quot; takes longer than the actual builds here
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719680' id='418823'>
<a class='timestamp' href='#418823'><time timestamp='2020-12-11T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ideed
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719740' id='418824'>
<a class='timestamp' href='#418824'><time timestamp='2020-12-11T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
+n
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719740' id='418825'>
<a class='timestamp' href='#418825'><time timestamp='2020-12-11T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I have no idea how to speed it up, I hacked it once to upgrade the base image but then somehow ended up with two versions of every package and non-deterministic results, so yea, if regenerating the base image solves it I&#x27;d definitely recommend that path
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719800' id='418826'>
<a class='timestamp' href='#418826'><time timestamp='2020-12-11T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Okay... I&#x27;ll try that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719800' id='418827'>
<a class='timestamp' href='#418827'><time timestamp='2020-12-11T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fairly sure that works for one of {KVM, LXC}, don&#x27;t know which one, the other always gets the ancient image
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719860' id='418828'>
<a class='timestamp' href='#418828'><time timestamp='2020-12-11T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(they both generate the base image in completely different ways)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607719980' id='418829'>
<a class='timestamp' href='#418829'><time timestamp='2020-12-11T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it would make sense to look into it some day but also guix builds are around the corner right
<br>
</div>

<div class='talk op-msg' data-timestamp='1607720040' id='418830'>
<a class='timestamp' href='#418830'><time timestamp='2020-12-11T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Any Day Now(tm)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607720100' id='418831'>
<a class='timestamp' href='#418831'><time timestamp='2020-12-11T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
releases are sufficiently rare anyway, but the extra delays are mostly annoying when testing/iterating something
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721060' id='418832'>
<a class='timestamp' href='#418832'><time timestamp='2020-12-11T21:11:00Z'>21:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I&#x27;m really confused
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721120' id='418833'>
<a class='timestamp' href='#418833'><time timestamp='2020-12-11T21:12:00Z'>21:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I have downloaded again 5e3a08ae8195190d6f1b12e3e1e9d710e7ad385941a6e8d04e3391f12deddb11  bitcoin-osx-unsigned.tar.gz ...
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721120' id='418834'>
<a class='timestamp' href='#418834'><time timestamp='2020-12-11T21:12:00Z'>21:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
./detached-sig-create.sh -s &quot;Bitcoin&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721120' id='418835'>
<a class='timestamp' href='#418835'><time timestamp='2020-12-11T21:12:00Z'>21:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
verified code-signature  codesign -v dist/Bitcoin-Qt.app
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721180' id='418836'>
<a class='timestamp' href='#418836'><time timestamp='2020-12-11T21:13:00Z'>21:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
uploaded signature.tar.gz
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721180' id='418837'>
<a class='timestamp' href='#418837'><time timestamp='2020-12-11T21:13:00Z'>21:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
did a gitian signer build
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721180' id='418838'>
<a class='timestamp' href='#418838'><time timestamp='2020-12-11T21:13:00Z'>21:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
downloaded the dmg
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721180' id='418839'>
<a class='timestamp' href='#418839'><time timestamp='2020-12-11T21:13:00Z'>21:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
verified the signature and I get:
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721180' id='418840'>
<a class='timestamp' href='#418840'><time timestamp='2020-12-11T21:13:00Z'>21:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
* /Volumes/Bitcoin-Core 4/Bitcoin-Qt.app: invalid signature (code or signature have been modified)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721180' id='418841'>
<a class='timestamp' href='#418841'><time timestamp='2020-12-11T21:13:00Z'>21:13</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
huh. did apple change something recently?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721240' id='418842'>
<a class='timestamp' href='#418842'><time timestamp='2020-12-11T21:14:00Z'>21:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: this is an old version?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721240' id='418843'>
<a class='timestamp' href='#418843'><time timestamp='2020-12-11T21:14:00Z'>21:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
of bitcoin core?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721240' id='418844'>
<a class='timestamp' href='#418844'><time timestamp='2020-12-11T21:14:00Z'>21:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: no.. still trying to figure out what happend for 0.21.0rc3
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721300' id='418845'>
<a class='timestamp' href='#418845'><time timestamp='2020-12-11T21:15:00Z'>21:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
AFAIK 5e3a08ae8195190d6f1b12e3e1e9d710e7ad385941a6e8d04e3391f12deddb11 was the unsigned tarball (bitcoin-osx-unsigned.tar.gz)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721360' id='418846'>
<a class='timestamp' href='#418846'><time timestamp='2020-12-11T21:16:00Z'>21:16</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yep
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721360' id='418847'>
<a class='timestamp' href='#418847'><time timestamp='2020-12-11T21:16:00Z'>21:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I redid everything and still getting invalid signatures
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721360' id='418848'>
<a class='timestamp' href='#418848'><time timestamp='2020-12-11T21:16:00Z'>21:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Might it be possible that there is an edge-case with the signature size or the attaching of the signature?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721600' id='418849'>
<a class='timestamp' href='#418849'><time timestamp='2020-12-11T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
No issues on 10.15.7, so maybe just a big sur problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721660' id='418850'>
<a class='timestamp' href='#418850'><time timestamp='2020-12-11T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
nvm, didn&#x27;t click far enough
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721720' id='418851'>
<a class='timestamp' href='#418851'><time timestamp='2020-12-11T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli opened pull request #20630: Allow providing local signatures in gitian osx signer (master...2020/12/macos_gitian_signer) <a href="https://github.com/bitcoin/bitcoin/pull/20630" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20630</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721900' id='418852'>
<a class='timestamp' href='#418852'><time timestamp='2020-12-11T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Here is the gist (how I did it): <a href="https://gist.github.com/jonasschnelli/39f0b03981e1bbffff929f538cf139a9" class="link" target="_blank">https://gist.github.com/jonasschnelli/39f0b03981e1bbffff929f538cf139a9</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607721900' id='418853'>
<a class='timestamp' href='#418853'><time timestamp='2020-12-11T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I have absolutely no clue why the signatures are wrong
<br>
</div>

<div class='talk op-msg' data-timestamp='1607722080' id='418854'>
<a class='timestamp' href='#418854'><time timestamp='2020-12-11T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
if anyone like to go down the rabbit hole:
<br>
</div>

<div class='talk op-msg' data-timestamp='1607722080' id='418855'>
<a class='timestamp' href='#418855'><time timestamp='2020-12-11T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
my local signed and detached signature directory: <a href="https://bitcoin.jonasschnelli.ch/bitcoin-osx-unsigned-nowsigned.zip" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/bitcoin-osx-unsigned-nowsigned.zip</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607722080' id='418856'>
<a class='timestamp' href='#418856'><time timestamp='2020-12-11T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ended up in build: <a href="https://bitcoin.jonasschnelli.ch/bitcoin-osx-signed3.dmg" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/bitcoin-osx-signed3.dmg</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607722080' id='418857'>
<a class='timestamp' href='#418857'><time timestamp='2020-12-11T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(both files are in the gist above)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607722140' id='418858'>
<a class='timestamp' href='#418858'><time timestamp='2020-12-11T21:29:00Z'>21:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
maybe cfields has some insights?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607722200' id='418859'>
<a class='timestamp' href='#418859'><time timestamp='2020-12-11T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I need some sleep and try it again with the 0.20.2rc1 release (and see what happens there)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607722200' id='418860'>
<a class='timestamp' href='#418860'><time timestamp='2020-12-11T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-12'> * jonasschnelli</span>&gt;
afk
<br>
</div>

<div class='talk op-msg' data-timestamp='1607724000' id='418861'>
<a class='timestamp' href='#418861'><time timestamp='2020-12-11T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-8'> midnight</span>&gt;
gah, xcode is a 7+ GB download.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607724000' id='418862'>
<a class='timestamp' href='#418862'><time timestamp='2020-12-11T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1607724180' id='418863'>
<a class='timestamp' href='#418863'><time timestamp='2020-12-11T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and we only need 47 MB from it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607725740' id='418864'>
<a class='timestamp' href='#418864'><time timestamp='2020-12-11T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
interesting. there&#x27;s a single byte difference between jonasschnelli signing result and his gitian result
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726040' id='418865'>
<a class='timestamp' href='#418865'><time timestamp='2020-12-11T22:34:00Z'>22:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what byte?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726100' id='418866'>
<a class='timestamp' href='#418866'><time timestamp='2020-12-11T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
<a href="https://0bin.net/paste/NuOSAQ26#QxBJq7yNS7ynp6oMsXzvKQWT0vXTLYboU2QRfyBqu2d" class="link" target="_blank">https://0bin.net/paste/NuOSAQ26#QxBJq7yNS7ynp6oMsXzvKQWT0vXTLYboU2QRfyBqu2d</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726160' id='418867'>
<a class='timestamp' href='#418867'><time timestamp='2020-12-11T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you fix it, does it verify?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726160' id='418868'>
<a class='timestamp' href='#418868'><time timestamp='2020-12-11T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yes, the original verifies
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726280' id='418869'>
<a class='timestamp' href='#418869'><time timestamp='2020-12-11T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what do you mean by signing result and gitian result?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726400' id='418870'>
<a class='timestamp' href='#418870'><time timestamp='2020-12-11T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the output of the macos signing tool, and the result of gitian applying the extracted signature?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726400' id='418871'>
<a class='timestamp' href='#418871'><time timestamp='2020-12-11T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the results from <a href="https://bitcoin.jonasschnelli.ch/bitcoin-osx-unsigned-nowsigned.zip" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/bitcoin-osx-unsigned-nowsigned.zip</a> which come from the signing process. it contains a fully signed binary
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726400' id='418872'>
<a class='timestamp' href='#418872'><time timestamp='2020-12-11T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
got it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726400' id='418873'>
<a class='timestamp' href='#418873'><time timestamp='2020-12-11T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the gitian result is <a href="https://bitcoin.jonasschnelli.ch/bitcoin-osx-signed3.dmg" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/bitcoin-osx-signed3.dmg</a> which comes from gitian builder combining the unsigned with the signature.tar.gz from the above zip
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726400' id='418874'>
<a class='timestamp' href='#418874'><time timestamp='2020-12-11T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so the extraction/reattaching process doesn&#x27;t result in the exact same binary
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726460' id='418875'>
<a class='timestamp' href='#418875'><time timestamp='2020-12-11T22:41:00Z'>22:41</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726580' id='418876'>
<a class='timestamp' href='#418876'><time timestamp='2020-12-11T22:43:00Z'>22:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
can you run &quot;pagestuff -p&quot; on both?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726700' id='418877'>
<a class='timestamp' href='#418877'><time timestamp='2020-12-11T22:45:00Z'>22:45</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
identical
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726820' id='418878'>
<a class='timestamp' href='#418878'><time timestamp='2020-12-11T22:47:00Z'>22:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726880' id='418879'>
<a class='timestamp' href='#418879'><time timestamp='2020-12-11T22:48:00Z'>22:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the detached-sig-create.sh tool uses pagestuff -p | tail -2 | grep offset | sed &#x27;s/[^0-9]*//g&#x27; to figure out the offset
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726940' id='418880'>
<a class='timestamp' href='#418880'><time timestamp='2020-12-11T22:49:00Z'>22:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and the size of the sign file for the size
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726940' id='418881'>
<a class='timestamp' href='#418881'><time timestamp='2020-12-11T22:49:00Z'>22:49</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the sizes are off by one byte
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726940' id='418882'>
<a class='timestamp' href='#418882'><time timestamp='2020-12-11T22:49:00Z'>22:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
aha
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726940' id='418883'>
<a class='timestamp' href='#418883'><time timestamp='2020-12-11T22:49:00Z'>22:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s what i was going to ask next
<br>
</div>

<div class='talk op-msg' data-timestamp='1607726940' id='418884'>
<a class='timestamp' href='#418884'><time timestamp='2020-12-11T22:49:00Z'>22:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think this is the cause
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727000' id='418885'>
<a class='timestamp' href='#418885'><time timestamp='2020-12-11T22:50:00Z'>22:50</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
x86_64-apple-darwin-otool -l Bitcoin-Qt for segment &quot;__LINKEDIT&quot; says &quot;vmsize 0x000000000007b000&quot; but on the other it&#x27;s &quot;vmsize 0x000000000007c000&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727000' id='418886'>
<a class='timestamp' href='#418886'><time timestamp='2020-12-11T22:50:00Z'>22:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which one is bigger?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727000' id='418887'>
<a class='timestamp' href='#418887'><time timestamp='2020-12-11T22:50:00Z'>22:50</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gitian one is bigger
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727000' id='418888'>
<a class='timestamp' href='#418888'><time timestamp='2020-12-11T22:50:00Z'>22:50</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
wait no, that&#x27;s backwards
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727000' id='418889'>
<a class='timestamp' href='#418889'><time timestamp='2020-12-11T22:50:00Z'>22:50</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
signed one is bigger, gitian is smaller
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727120' id='418890'>
<a class='timestamp' href='#418890'><time timestamp='2020-12-11T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s a 4 kB difference though
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727120' id='418891'>
<a class='timestamp' href='#418891'><time timestamp='2020-12-11T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not 1 byte
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727180' id='418892'>
<a class='timestamp' href='#418892'><time timestamp='2020-12-11T22:53:00Z'>22:53</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
The files are the same size
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727180' id='418893'>
<a class='timestamp' href='#418893'><time timestamp='2020-12-11T22:53:00Z'>22:53</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
and diffoscope only sees the difference on that single byte
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727240' id='418894'>
<a class='timestamp' href='#418894'><time timestamp='2020-12-11T22:54:00Z'>22:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what if you run the same on the unsigned gitian output (= the input to the macos signing tool)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727240' id='418895'>
<a class='timestamp' href='#418895'><time timestamp='2020-12-11T22:54:00Z'>22:54</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
not sure what you mean
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727300' id='418896'>
<a class='timestamp' href='#418896'><time timestamp='2020-12-11T22:55:00Z'>22:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
x86_64-apple-darwin-otool -l Bitcoin-Qt
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727300' id='418897'>
<a class='timestamp' href='#418897'><time timestamp='2020-12-11T22:55:00Z'>22:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727300' id='418898'>
<a class='timestamp' href='#418898'><time timestamp='2020-12-11T22:55:00Z'>22:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
nvm
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727360' id='418899'>
<a class='timestamp' href='#418899'><time timestamp='2020-12-11T22:56:00Z'>22:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah, what if you run that on the unsigned Bitcoin-Qt binary?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727420' id='418900'>
<a class='timestamp' href='#418900'><time timestamp='2020-12-11T22:57:00Z'>22:57</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
__LINKEDIT segment is the same size as the gitian result
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727480' id='418901'>
<a class='timestamp' href='#418901'><time timestamp='2020-12-11T22:58:00Z'>22:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727540' id='418902'>
<a class='timestamp' href='#418902'><time timestamp='2020-12-11T22:59:00Z'>22:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the codesigning tool modified the __LINKEDIT segment, but applying the detached signature didn&#x27;t do the same?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727540' id='418903'>
<a class='timestamp' href='#418903'><time timestamp='2020-12-11T22:59:00Z'>22:59</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
seems so
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727660' id='418904'>
<a class='timestamp' href='#418904'><time timestamp='2020-12-11T23:01:00Z'>23:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you run &quot;pagestuff -p Bitcoin-Qt | tail -2 | grep size | sed &#x27;s/[^0-9]*//g&#x27;&quot;, what do you get?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727720' id='418905'>
<a class='timestamp' href='#418905'><time timestamp='2020-12-11T23:02:00Z'>23:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
on the various version
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727960' id='418906'>
<a class='timestamp' href='#418906'><time timestamp='2020-12-11T23:06:00Z'>23:06</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ah wait, I was looking at the wrong file earlier
<br>
</div>

<div class='talk op-msg' data-timestamp='1607727960' id='418907'>
<a class='timestamp' href='#418907'><time timestamp='2020-12-11T23:06:00Z'>23:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
where do the linux binaries pagestuff and codesign_allocate come from?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728020' id='418908'>
<a class='timestamp' href='#418908'><time timestamp='2020-12-11T23:07:00Z'>23:07</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the otool on the unsigned binary gives a way smaller __LINKEDIT, presumably because the code signature is involved in there
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728020' id='418909'>
<a class='timestamp' href='#418909'><time timestamp='2020-12-11T23:07:00Z'>23:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i guess that&#x27;s expected
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728080' id='418910'>
<a class='timestamp' href='#418910'><time timestamp='2020-12-11T23:08:00Z'>23:08</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
they come from one of the depends packages, not sure which
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728080' id='418911'>
<a class='timestamp' href='#418911'><time timestamp='2020-12-11T23:08:00Z'>23:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah i see
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728260' id='418912'>
<a class='timestamp' href='#418912'><time timestamp='2020-12-11T23:11:00Z'>23:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the sizes from that pagestuff command are the same for both gitian and signed
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728260' id='418913'>
<a class='timestamp' href='#418913'><time timestamp='2020-12-11T23:11:00Z'>23:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and the offsets too?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728260' id='418914'>
<a class='timestamp' href='#418914'><time timestamp='2020-12-11T23:11:00Z'>23:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
not the same for unsigned, but that&#x27;s expected because the section size it looks for doesn&#x27;t exist as it&#x27;s the code sig
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728260' id='418915'>
<a class='timestamp' href='#418915'><time timestamp='2020-12-11T23:11:00Z'>23:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728260' id='418916'>
<a class='timestamp' href='#418916'><time timestamp='2020-12-11T23:11:00Z'>23:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
same offests
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728440' id='418917'>
<a class='timestamp' href='#418917'><time timestamp='2020-12-11T23:14:00Z'>23:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok, so the byte that changed is in the MP_MACH_HEADERS section, in the very beginning of the file
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728440' id='418918'>
<a class='timestamp' href='#418918'><time timestamp='2020-12-11T23:14:00Z'>23:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
while the codesig is at the very end
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728500' id='418919'>
<a class='timestamp' href='#418919'><time timestamp='2020-12-11T23:15:00Z'>23:15</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
presumably that section is a table
<br>
</div>

<div class='talk op-msg' data-timestamp='1607728860' id='418920'>
<a class='timestamp' href='#418920'><time timestamp='2020-12-11T23:21:00Z'>23:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
so the problem must be with codesign_allocate because that&#x27;s what sets that size value
<br>
</div>

<div class='talk op-msg' data-timestamp='1607729100' id='418921'>
<a class='timestamp' href='#418921'><time timestamp='2020-12-11T23:25:00Z'>23:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the codesign tool has a --detached option to construct detached signatures directly
<br>
</div>

<div class='talk op-msg' data-timestamp='1607729160' id='418922'>
<a class='timestamp' href='#418922'><time timestamp='2020-12-11T23:26:00Z'>23:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
why is the tooling doing signing directly, and then extracting the signatures from the result?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607729160' id='418923'>
<a class='timestamp' href='#418923'><time timestamp='2020-12-11T23:26:00Z'>23:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
this may be a reason for a difference
<br>
</div>

<div class='talk op-msg' data-timestamp='1607729160' id='418924'>
<a class='timestamp' href='#418924'><time timestamp='2020-12-11T23:26:00Z'>23:26</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
this workflow probably was setup before that existed
<br>
</div>

<div class='talk op-msg' data-timestamp='1607729220' id='418925'>
<a class='timestamp' href='#418925'><time timestamp='2020-12-11T23:27:00Z'>23:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
is it possible that the codesign_allocate tool is out of date?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607729280' id='418926'>
<a class='timestamp' href='#418926'><time timestamp='2020-12-11T23:28:00Z'>23:28</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
possibly
<br>
</div>

<div class='talk op-msg' data-timestamp='1607729340' id='418927'>
<a class='timestamp' href='#418927'><time timestamp='2020-12-11T23:29:00Z'>23:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what else does otool or anything else say about __LINKEDIT?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607729520' id='418928'>
<a class='timestamp' href='#418928'><time timestamp='2020-12-11T23:32:00Z'>23:32</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
nothing else afaict
<br>
</div>

<div class='talk op-msg' data-timestamp='1607729880' id='418929'>
<a class='timestamp' href='#418929'><time timestamp='2020-12-11T23:38:00Z'>23:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: does macos come with a codesign_allocate tool too?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607730000' id='418930'>
<a class='timestamp' href='#418930'><time timestamp='2020-12-11T23:40:00Z'>23:40</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1607730000' id='418931'>
<a class='timestamp' href='#418931'><time timestamp='2020-12-11T23:40:00Z'>23:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the native_cctools depends package is only a few months old, and most changes since have been for apple ARM stuff it seems
<br>
</div>

<div class='talk op-msg' data-timestamp='1607730180' id='418932'>
<a class='timestamp' href='#418932'><time timestamp='2020-12-11T23:43:00Z'>23:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: if you run &quot;codesign_allocate -i &lt;unsigned Bitcoin-Qt filename&gt; -a x86_64 225312 -o &lt;some temp file&gt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607730180' id='418933'>
<a class='timestamp' href='#418933'><time timestamp='2020-12-11T23:43:00Z'>23:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
on macos
<br>
</div>

<div class='talk op-msg' data-timestamp='1607730240' id='418934'>
<a class='timestamp' href='#418934'><time timestamp='2020-12-11T23:44:00Z'>23:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and then inspect that temp file, does it have the correct __LINKEDIT vmsize?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607730240' id='418935'>
<a class='timestamp' href='#418935'><time timestamp='2020-12-11T23:44:00Z'>23:44</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
will try
<br>
</div>

<div class='talk op-msg' data-timestamp='1607730720' id='418936'>
<a class='timestamp' href='#418936'><time timestamp='2020-12-11T23:52:00Z'>23:52</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
It&#x27;s the correct size
<br>
</div>

<div class='talk op-msg' data-timestamp='1607730780' id='418937'>
<a class='timestamp' href='#418937'><time timestamp='2020-12-11T23:53:00Z'>23:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hmm, we should try updating to the latest native_cctools package i guess and see if that fixes it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607731020' id='418938'>
<a class='timestamp' href='#418938'><time timestamp='2020-12-11T23:57:00Z'>23:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
an alternative is making jonasschnelli downgrade his codesign_allocate tool to one that&#x27;s compatible with the native_ccttols we use, and then tell his codesign tool to use that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607731140' id='418939'>
<a class='timestamp' href='#418939'><time timestamp='2020-12-11T23:59:00Z'>23:59</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I wonder if we&#x27;re just running into some weird edge case now
<br>
</div>

</div>
</section>

</body>
</html>
