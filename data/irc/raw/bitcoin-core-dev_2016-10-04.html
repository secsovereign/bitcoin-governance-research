<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2016-10-04
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2016-10-04' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:25 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-09-04">&lt;</a><span class='header'>   October 2016   </span><a href="/bitcoin-core-dev/2016-11-04">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                   <a class="" href="/bitcoin-core-dev/2016-10-01">1</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-10-02">2</a>  <a class="" href="/bitcoin-core-dev/2016-10-03">3</a>  <a class="current" href="/bitcoin-core-dev/2016-10-04">4</a>  <a class="" href="/bitcoin-core-dev/2016-10-05">5</a>  <a class="" href="/bitcoin-core-dev/2016-10-06">6</a>  <a class="" href="/bitcoin-core-dev/2016-10-07">7</a>  <a class="" href="/bitcoin-core-dev/2016-10-08">8</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-10-09">9</a> <a class="" href="/bitcoin-core-dev/2016-10-10">10</a> <a class="" href="/bitcoin-core-dev/2016-10-11">11</a> <a class="" href="/bitcoin-core-dev/2016-10-12">12</a> <a class="" href="/bitcoin-core-dev/2016-10-13">13</a> <a class="" href="/bitcoin-core-dev/2016-10-14">14</a> <a class="" href="/bitcoin-core-dev/2016-10-15">15</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-10-16">16</a> <a class="" href="/bitcoin-core-dev/2016-10-17">17</a> <a class="" href="/bitcoin-core-dev/2016-10-18">18</a> <a class="" href="/bitcoin-core-dev/2016-10-19">19</a> <a class="" href="/bitcoin-core-dev/2016-10-20">20</a> <a class="" href="/bitcoin-core-dev/2016-10-21">21</a> <a class="" href="/bitcoin-core-dev/2016-10-22">22</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-10-23">23</a> <a class="" href="/bitcoin-core-dev/2016-10-24">24</a> <a class="" href="/bitcoin-core-dev/2016-10-25">25</a> <a class="" href="/bitcoin-core-dev/2016-10-26">26</a> <a class="" href="/bitcoin-core-dev/2016-10-27">27</a> <a class="" href="/bitcoin-core-dev/2016-10-28">28</a> <a class="" href="/bitcoin-core-dev/2016-10-29">29</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-10-30">30</a> <a class="" href="/bitcoin-core-dev/2016-10-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1475539620' id='498895'>
<a class='timestamp' href='#498895'><time timestamp='2016-10-04T00:07:00Z'>00:07</time></a>
&lt;<span class='nick nick-6'> GitHub62</span>&gt;
[bitcoin] achow101 opened pull request #8874: Multiple Selection for peer and ban tables (master...peer-multiselect) <a href="https://github.com/bitcoin/bitcoin/pull/8874" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8874</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475539920' id='498896'>
<a class='timestamp' href='#498896'><time timestamp='2016-10-04T00:12:00Z'>00:12</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it seems that I am unable to ban. For some reason the string for the node&#x27;s address is empty
<br>
</div>

<div class='talk op-msg' data-timestamp='1475548080' id='498897'>
<a class='timestamp' href='#498897'><time timestamp='2016-10-04T02:28:00Z'>02:28</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
so how&#x27;s the prefinal alert doing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475548080' id='498898'>
<a class='timestamp' href='#498898'><time timestamp='2016-10-04T02:28:00Z'>02:28</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gmaxwell: ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1475553240' id='498899'>
<a class='timestamp' href='#498899'><time timestamp='2016-10-04T03:54:00Z'>03:54</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
wonders why testnet rewinds blocks every time he runs it
<br>
</div>

<div class='talk op-msg' data-timestamp='1475555880' id='498900'>
<a class='timestamp' href='#498900'><time timestamp='2016-10-04T04:38:00Z'>04:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: thats the chainstate check.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475555880' id='498901'>
<a class='timestamp' href='#498901'><time timestamp='2016-10-04T04:38:00Z'>04:38</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
oh, somehow I was thinking it was for segwit
<br>
</div>

<div class='talk op-msg' data-timestamp='1475557800' id='498902'>
<a class='timestamp' href='#498902'><time timestamp='2016-10-04T05:10:00Z'>05:10</time></a>
&lt;<span class='nick nick-5'> GitHub87</span>&gt;
[bitcoin] luke-jr opened pull request #8877: Qt RPC console: history sensitive-data filter, and saving input line when browsing history (master...qt_console_history_filter) <a href="https://github.com/bitcoin/bitcoin/pull/8877" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8877</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475570040' id='498903'>
<a class='timestamp' href='#498903'><time timestamp='2016-10-04T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
aureianimus: if you don&#x27;t fix your IRC client I&#x27;ll have to ban you to reduce join/part noise in this channel
<br>
</div>

<div class='talk op-msg' data-timestamp='1475570520' id='498904'>
<a class='timestamp' href='#498904'><time timestamp='2016-10-04T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
PM me if fixed
<br>
</div>

<div class='talk op-msg' data-timestamp='1475572080' id='498905'>
<a class='timestamp' href='#498905'><time timestamp='2016-10-04T09:08:00Z'>09:08</time></a>
&lt;<span class='nick nick-2'> GitHub132</span>&gt;
[bitcoin] laanwj pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/a7e5cbb209d4...7dce175f5d89" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/a7e5cbb209d4...7dce175f5d89</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475572080' id='498906'>
<a class='timestamp' href='#498906'><time timestamp='2016-10-04T09:08:00Z'>09:08</time></a>
&lt;<span class='nick nick-2'> GitHub132</span>&gt;
bitcoin/master 47314e6 Wladimir J. van der Laan: prevector: add C++11-like data() method...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475572080' id='498907'>
<a class='timestamp' href='#498907'><time timestamp='2016-10-04T09:08:00Z'>09:08</time></a>
&lt;<span class='nick nick-2'> GitHub132</span>&gt;
bitcoin/master f00705a Wladimir J. van der Laan: serialize: Deprecate `begin_ptr` / `end_ptr`...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475572080' id='498908'>
<a class='timestamp' href='#498908'><time timestamp='2016-10-04T09:08:00Z'>09:08</time></a>
&lt;<span class='nick nick-2'> GitHub132</span>&gt;
bitcoin/master 7dce175 Wladimir J. van der Laan: Merge #8850: Implement (begin|end)_ptr in C++11 and add deprecation comment...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475572080' id='498909'>
<a class='timestamp' href='#498909'><time timestamp='2016-10-04T09:08:00Z'>09:08</time></a>
&lt;<span class='nick nick-1'> GitHub115</span>&gt;
[bitcoin] laanwj closed pull request #8850: Implement (begin|end)_ptr in C++11 and add deprecation comment (master...2016_09_beginptr_deprecation) <a href="https://github.com/bitcoin/bitcoin/pull/8850" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8850</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475572860' id='498910'>
<a class='timestamp' href='#498910'><time timestamp='2016-10-04T09:21:00Z'>09:21</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
luke-jr: &quot;Rewinding blocks&quot; is always displayed when you run a recent version.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475572860' id='498911'>
<a class='timestamp' href='#498911'><time timestamp='2016-10-04T09:21:00Z'>09:21</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
(It does not actually do any rewinding)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475573340' id='498912'>
<a class='timestamp' href='#498912'><time timestamp='2016-10-04T09:29:00Z'>09:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
let&#x27;s correct the message
<br>
</div>

<div class='talk op-msg' data-timestamp='1475573460' id='498913'>
<a class='timestamp' href='#498913'><time timestamp='2016-10-04T09:31:00Z'>09:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah, just produce no message wgen there is nothing to rewind
<br>
</div>

<div class='talk op-msg' data-timestamp='1475573460' id='498914'>
<a class='timestamp' href='#498914'><time timestamp='2016-10-04T09:31:00Z'>09:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it must be doing something if it is visible at all, though
<br>
</div>

<div class='talk op-msg' data-timestamp='1475573520' id='498915'>
<a class='timestamp' href='#498915'><time timestamp='2016-10-04T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well okay not true in the log, but is in the GUI, you won&#x27;t notice the first message if it updates two times in a row
<br>
</div>

<div class='talk op-msg' data-timestamp='1475573520' id='498916'>
<a class='timestamp' href='#498916'><time timestamp='2016-10-04T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
probably the next thing it does after it takes a non-negilgable amount of time
<br>
</div>

<div class='talk op-msg' data-timestamp='1475573580' id='498917'>
<a class='timestamp' href='#498917'><time timestamp='2016-10-04T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so <b>*that*</b> needs its own message
<br>
</div>

<div class='talk op-msg' data-timestamp='1475573580' id='498918'>
<a class='timestamp' href='#498918'><time timestamp='2016-10-04T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
better fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1475573580' id='498919'>
<a class='timestamp' href='#498919'><time timestamp='2016-10-04T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1475573580' id='498920'>
<a class='timestamp' href='#498920'><time timestamp='2016-10-04T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-7'> randy-waterhouse</span>&gt;
unwinding ... get a drink
<br>
</div>

<div class='talk op-msg' data-timestamp='1475573580' id='498921'>
<a class='timestamp' href='#498921'><time timestamp='2016-10-04T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
:-)     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475576040' id='498922'>
<a class='timestamp' href='#498922'><time timestamp='2016-10-04T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-9'> GitHub70</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/7dce175f5d89...d93f0c61843f" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/7dce175f5d89...d93f0c61843f</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475576040' id='498923'>
<a class='timestamp' href='#498923'><time timestamp='2016-10-04T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-9'> GitHub70</span>&gt;
bitcoin/master 905bc68 Cory Fields: net: fix a few cases where messages were sent rather than dropped upon disconnection...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475576040' id='498924'>
<a class='timestamp' href='#498924'><time timestamp='2016-10-04T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-9'> GitHub70</span>&gt;
bitcoin/master d93f0c6 Wladimir J. van der Laan: Merge #8862: Fix a few cases where messages were sent after requested disconnect...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475576040' id='498925'>
<a class='timestamp' href='#498925'><time timestamp='2016-10-04T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-9'> GitHub157</span>&gt;
[bitcoin] laanwj closed pull request #8862: Fix a few cases where messages were sent after requested disconnect (master...fix-disconnect-send) <a href="https://github.com/bitcoin/bitcoin/pull/8862" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8862</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475576280' id='498926'>
<a class='timestamp' href='#498926'><time timestamp='2016-10-04T10:18:00Z'>10:18</time></a>
&lt;<span class='nick nick-13'> GitHub79</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/d93f0c61843f...d7615af34e8e" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/d93f0c61843f...d7615af34e8e</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475576280' id='498927'>
<a class='timestamp' href='#498927'><time timestamp='2016-10-04T10:18:00Z'>10:18</time></a>
&lt;<span class='nick nick-13'> GitHub79</span>&gt;
bitcoin/master 2fa0063 Johnson Lau: Add NULLDUMMY verify flag in bitcoinconsensus.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1475576280' id='498928'>
<a class='timestamp' href='#498928'><time timestamp='2016-10-04T10:18:00Z'>10:18</time></a>
&lt;<span class='nick nick-13'> GitHub79</span>&gt;
bitcoin/master d7615af Wladimir J. van der Laan: Merge #8848: Add NULLDUMMY verify flag in bitcoinconsensus.h...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475576280' id='498929'>
<a class='timestamp' href='#498929'><time timestamp='2016-10-04T10:18:00Z'>10:18</time></a>
&lt;<span class='nick nick-12'> GitHub150</span>&gt;
[bitcoin] laanwj closed pull request #8848: Add NULLDUMMY verify flag in bitcoinconsensus.h (master...consensusnulldummy) <a href="https://github.com/bitcoin/bitcoin/pull/8848" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8848</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475577660' id='498930'>
<a class='timestamp' href='#498930'><time timestamp='2016-10-04T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-16'> GitHub49</span>&gt;
[bitcoin] MarcoFalke opened pull request #8879: [doc] Rework docs (master...Mf1610-docCleanup) <a href="https://github.com/bitcoin/bitcoin/pull/8879" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8879</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475579880' id='498931'>
<a class='timestamp' href='#498931'><time timestamp='2016-10-04T11:18:00Z'>11:18</time></a>
&lt;<span class='nick nick-10'> GitHub185</span>&gt;
[bitcoin] laanwj opened pull request #8880: protocol.h: Move MESSAGE_START_SIZE into CMessageHeader (master...2016_10_cosmetic) <a href="https://github.com/bitcoin/bitcoin/pull/8880" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8880</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475587140' id='498932'>
<a class='timestamp' href='#498932'><time timestamp='2016-10-04T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: whats your opinion on switching g_connman to a std::shared_ptr and then using that in the map of logica validators?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475591400' id='498933'>
<a class='timestamp' href='#498933'><time timestamp='2016-10-04T14:30:00Z'>14:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: nvm, i pushed a change to switch to a shared_ptr there, makes everything safe without adding a GetId() to CConnman, which I like
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593140' id='498934'>
<a class='timestamp' href='#498934'><time timestamp='2016-10-04T14:59:00Z'>14:59</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: please please no :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593140' id='498935'>
<a class='timestamp' href='#498935'><time timestamp='2016-10-04T14:59:00Z'>14:59</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ehh, its better than another global GetId() thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593200' id='498936'>
<a class='timestamp' href='#498936'><time timestamp='2016-10-04T15:00:00Z'>15:00</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: it breaks down ownership models, and will almost certainly lead to teardown issues/races eventually
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593260' id='498937'>
<a class='timestamp' href='#498937'><time timestamp='2016-10-04T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i mean i dunno how to resolve that without having an ownership model for who owns the CConnman and who owns the logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593260' id='498938'>
<a class='timestamp' href='#498938'><time timestamp='2016-10-04T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
unless you want the CConnman to own the logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593320' id='498939'>
<a class='timestamp' href='#498939'><time timestamp='2016-10-04T15:02:00Z'>15:02</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: right, we need to think about that carefully. But punting to a shared_ptr effectively just masks the problem, imo
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593380' id='498940'>
<a class='timestamp' href='#498940'><time timestamp='2016-10-04T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-15'> GitHub59</span>&gt;
[bitcoin] laanwj closed pull request #8843: rpc: Handle `getinfo` client-side in bitcoin-cli w/ `-getinfo` (master...2016_09_getinfo_clientside) <a href="https://github.com/bitcoin/bitcoin/pull/8843" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8843</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593440' id='498941'>
<a class='timestamp' href='#498941'><time timestamp='2016-10-04T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i mean if a failure to teardown in the right order does anything more than cause memory to keep growing as you push events that arent handled, then you have other issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593500' id='498942'>
<a class='timestamp' href='#498942'><time timestamp='2016-10-04T15:05:00Z'>15:05</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
wumpus: thoughts on the above? IIRC we&#x27;ve discussed briefly before. The question is: what model do we use to glue networking and message handling together?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593560' id='498943'>
<a class='timestamp' href='#498943'><time timestamp='2016-10-04T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: i don&#x27;t see the problem with the approach before the shared_ptr? As long as a signal is broadcast to the processors that the connman is no longer valid, that seems fine to me?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593560' id='498944'>
<a class='timestamp' href='#498944'><time timestamp='2016-10-04T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
before the shared ptr? you could delete and dereference null, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593560' id='498945'>
<a class='timestamp' href='#498945'><time timestamp='2016-10-04T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i mean if you failed to teardown, that is
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593620' id='498946'>
<a class='timestamp' href='#498946'><time timestamp='2016-10-04T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well if it is CConnMan that manages the lifecycle of connections there&#x27;s not need for shared_ptr
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593620' id='498947'>
<a class='timestamp' href='#498947'><time timestamp='2016-10-04T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: right, with the caveat that the handler would have to appropriately act on the signal in time
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593620' id='498948'>
<a class='timestamp' href='#498948'><time timestamp='2016-10-04T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
you may need &#x27;weak-pointer&#x27; like callbacks in that case, to prevent anyone still holding keeping handle when a connection goes away
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593680' id='498949'>
<a class='timestamp' href='#498949'><time timestamp='2016-10-04T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: not about connections, about the CConnman itself
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593680' id='498950'>
<a class='timestamp' href='#498950'><time timestamp='2016-10-04T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
Init() and Shutdown() &#x27;own&#x27; CConnman
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593680' id='498951'>
<a class='timestamp' href='#498951'><time timestamp='2016-10-04T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: then CConnman will have advertised that all connections have been torn down before it itself is deleted
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593740' id='498952'>
<a class='timestamp' href='#498952'><time timestamp='2016-10-04T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
we have a well defined lifecycle there
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593740' id='498953'>
<a class='timestamp' href='#498953'><time timestamp='2016-10-04T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
after Shutdown there should be no networking anymore, and no connman
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593800' id='498954'>
<a class='timestamp' href='#498954'><time timestamp='2016-10-04T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and everything that uses connman should be deinitialized before ConnMan gets deinitialized
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593800' id='498955'>
<a class='timestamp' href='#498955'><time timestamp='2016-10-04T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
better to have deterministic lifecycles for objects then rely on shared pointers to happen to get things right
<br>
</div>

<div class='talk op-msg' data-timestamp='1475593800' id='498956'>
<a class='timestamp' href='#498956'><time timestamp='2016-10-04T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
or even worse, relying on global constructors/destructors order
<br>
</div>

<div class='talk op-msg' data-timestamp='1475594100' id='498957'>
<a class='timestamp' href='#498957'><time timestamp='2016-10-04T15:15:00Z'>15:15</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
+1. Though I think also it&#x27;s important to design such that net users essentially have no chance of trying to send messages by the time CConnman has shut down, so that the fact that it&#x27;s &quot;owned&quot; by Init really doesn&#x27;t matter.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475594100' id='498958'>
<a class='timestamp' href='#498958'><time timestamp='2016-10-04T15:15:00Z'>15:15</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
eg. queued messages should be deleted when the nodes are advertised as disconnected, and processors should be shutdown when their connman advertises that it&#x27;s stopping
<br>
</div>

<div class='talk op-msg' data-timestamp='1475594160' id='498959'>
<a class='timestamp' href='#498959'><time timestamp='2016-10-04T15:16:00Z'>15:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that depends on what preconditions you try to enforce, if net users remain by the time CConMan shuts down you&#x27;d say that&#x27;s a bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1475594160' id='498960'>
<a class='timestamp' href='#498960'><time timestamp='2016-10-04T15:16:00Z'>15:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh right, it may be a multi-phase process
<br>
</div>

<div class='talk op-msg' data-timestamp='1475594280' id='498961'>
<a class='timestamp' href='#498961'><time timestamp='2016-10-04T15:18:00Z'>15:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: I wasn&#x27;t objecting to -getinfo &lt;.&lt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1475594340' id='498962'>
<a class='timestamp' href='#498962'><time timestamp='2016-10-04T15:19:00Z'>15:19</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
right, the processor will get an interrupt which should break its loops, then a blocking stop, after which it should assume that its connman is null&#x27;d
<br>
</div>

<div class='talk op-msg' data-timestamp='1475594400' id='498963'>
<a class='timestamp' href='#498963'><time timestamp='2016-10-04T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: I know, but I just don&#x27;t think it&#x27;s worth pushing too much for, it&#x27;s something I&#x27;d use myself but I don&#x27;t think anyone else cares and maybe I should just get used to using the respective commands, or simply make a python script
<br>
</div>

<div class='talk op-msg' data-timestamp='1475594580' id='498964'>
<a class='timestamp' href='#498964'><time timestamp='2016-10-04T15:23:00Z'>15:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
heck or just a bash alias. bitcoin-cli getwalletinfo &amp;&amp; bitcoin-cli getnetworkinfo | head -20 or such. I&#x27;d been overthinking it a bit because I thought it was neat to do RPC batch from bitcoin-cli
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595060' id='498965'>
<a class='timestamp' href='#498965'><time timestamp='2016-10-04T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
wumpus: you mentioned in #8856 that you&#x27;d like to see an api for options eventually. I have a few generic base classes that I&#x27;ve been working on in order to break some global dependencies out of utils. for threading, logging, options, etc. Wasn&#x27;t sure if you&#x27;d want those or not. I could PR an RFC if you think it&#x27;s worth discussing
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595120' id='498966'>
<a class='timestamp' href='#498966'><time timestamp='2016-10-04T15:32:00Z'>15:32</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
(it was done as an exercise for CConnman, seeing what it would take to drop all global state deps by passing in a base logger, base options parser, etc)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595300' id='498967'>
<a class='timestamp' href='#498967'><time timestamp='2016-10-04T15:35:00Z'>15:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields_: yes I think that would be a good thing, options handling has always been somewhat of a mess. And when boost has to be dropped as a dependency we need a replacement for boost::options.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595360' id='498968'>
<a class='timestamp' href='#498968'><time timestamp='2016-10-04T15:36:00Z'>15:36</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
wumpus: right
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595360' id='498969'>
<a class='timestamp' href='#498969'><time timestamp='2016-10-04T15:36:00Z'>15:36</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
wumpus: seems the only thing we actually use it for is parsing the config file?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595360' id='498970'>
<a class='timestamp' href='#498970'><time timestamp='2016-10-04T15:36:00Z'>15:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields_: there&#x27;s a lot unclear though, e.g. do we want to be able to change (some) options on the fly (which would require callbacks), how to handle types, how to handle defaults, etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595360' id='498971'>
<a class='timestamp' href='#498971'><time timestamp='2016-10-04T15:36:00Z'>15:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, just replacing it would be trivial, doesn&#x27;t need a whole options overhaul :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595420' id='498972'>
<a class='timestamp' href='#498972'><time timestamp='2016-10-04T15:37:00Z'>15:37</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
wumpus: as a stopgap, I just kept it all pretty much as-is
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595480' id='498973'>
<a class='timestamp' href='#498973'><time timestamp='2016-10-04T15:38:00Z'>15:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
e.g. how we handle defaults is kind of ugly. In stead of declaring the option and its type and default e.g. at the top of the module where it gets used, we have to declare a constant DEFAULT_BLABLA then pass it in in every place where the option gets used
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595480' id='498974'>
<a class='timestamp' href='#498974'><time timestamp='2016-10-04T15:38:00Z'>15:38</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
wumpus: stores a const map of strings, a const multimap, then a non-const map for the soft-sets. The getters treat that as an overlay, and fallback to const
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595480' id='498975'>
<a class='timestamp' href='#498975'><time timestamp='2016-10-04T15:38:00Z'>15:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
also there&#x27;s a lot of overhead as arguments get parsed to their type time after time, in some places
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595480' id='498976'>
<a class='timestamp' href='#498976'><time timestamp='2016-10-04T15:38:00Z'>15:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and it&#x27;s possible to call GetBOol on an argument in one place and GetString on it in another place
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595480' id='498977'>
<a class='timestamp' href='#498977'><time timestamp='2016-10-04T15:38:00Z'>15:38</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
wumpus: heh, yes. There&#x27;s certainly the argument that the options shouldn&#x27;t even be visibile outside of init
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595540' id='498978'>
<a class='timestamp' href='#498978'><time timestamp='2016-10-04T15:39:00Z'>15:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and my favorite pet issue <a href="https://github.com/bitcoin/bitcoin/issues/1044" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/1044</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595600' id='498979'>
<a class='timestamp' href='#498979'><time timestamp='2016-10-04T15:40:00Z'>15:40</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
mmm, yuck
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595600' id='498980'>
<a class='timestamp' href='#498980'><time timestamp='2016-10-04T15:40:00Z'>15:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields_: that would be one way, though it means all the argument propagation logic is centralized. Right now we are moving towards having the wallet handle its own arguments, for example, which makes sense to break the circular dependency and get rid of ENABLE_WALLET defines.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595600' id='498981'>
<a class='timestamp' href='#498981'><time timestamp='2016-10-04T15:40:00Z'>15:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s in no way a trivial thing to get right
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595660' id='498982'>
<a class='timestamp' href='#498982'><time timestamp='2016-10-04T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
many constraints, and low priority, and the current state well... kind of works
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595660' id='498983'>
<a class='timestamp' href='#498983'><time timestamp='2016-10-04T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields_: yes, validation would be good :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595720' id='498984'>
<a class='timestamp' href='#498984'><time timestamp='2016-10-04T15:42:00Z'>15:42</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
wumpus: low priority, hint taken :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595780' id='498985'>
<a class='timestamp' href='#498985'><time timestamp='2016-10-04T15:43:00Z'>15:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well the net refactor is much more important
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595780' id='498986'>
<a class='timestamp' href='#498986'><time timestamp='2016-10-04T15:43:00Z'>15:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
as well as build system/gitian security
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595840' id='498987'>
<a class='timestamp' href='#498987'><time timestamp='2016-10-04T15:44:00Z'>15:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
speaking of which how&#x27;s your mac code-signer project doing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595900' id='498988'>
<a class='timestamp' href='#498988'><time timestamp='2016-10-04T15:45:00Z'>15:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: i once started on an options system (inspired a bit by google&#x27;s, where you just declare a global IntOption nMaxConnections(&quot;-maxconnections&quot;, minval, maxval, description); or so, and then can query nMaxConnections as if it were an integer
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595960' id='498989'>
<a class='timestamp' href='#498989'><time timestamp='2016-10-04T15:46:00Z'>15:46</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
wumpus: got distracted when some net stuff got merged. It&#x27;s fully working and stable though, the only work left is to figure out the detach/attach scheme
<br>
</div>

<div class='talk op-msg' data-timestamp='1475595960' id='498990'>
<a class='timestamp' href='#498990'><time timestamp='2016-10-04T15:46:00Z'>15:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i also think luke started on an options thing where they could be changed over time
<br>
</div>

<div class='talk op-msg' data-timestamp='1475596020' id='498991'>
<a class='timestamp' href='#498991'><time timestamp='2016-10-04T15:47:00Z'>15:47</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: sounds good to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1475596080' id='498992'>
<a class='timestamp' href='#498992'><time timestamp='2016-10-04T15:48:00Z'>15:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and yes luke-jr has some pulls open that accomplish some of these things
<br>
</div>

<div class='talk op-msg' data-timestamp='1475596140' id='498993'>
<a class='timestamp' href='#498993'><time timestamp='2016-10-04T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
haven&#x27;t looked very much yet at those, sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1475596740' id='498994'>
<a class='timestamp' href='#498994'><time timestamp='2016-10-04T15:59:00Z'>15:59</time></a>
&lt;<span class='nick nick-3'> GitHub163</span>&gt;
[bitcoin] laanwj pushed 1 new commit to master: <a href="https://github.com/bitcoin/bitcoin/commit/5f3e4a8a2ae2dd0e0fa316c6caa50e97280be773" class="link" target="_blank">https://github.com/bitcoin/bitcoin/commit/5f3e4a8a2ae2dd0e0fa316c6caa50e97280be773</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475596740' id='498995'>
<a class='timestamp' href='#498995'><time timestamp='2016-10-04T15:59:00Z'>15:59</time></a>
&lt;<span class='nick nick-3'> GitHub163</span>&gt;
bitcoin/master 5f3e4a8 Wladimir J. van der Laan: protocol.h: Make enums in GetDataMsg concrete values...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475596740' id='498996'>
<a class='timestamp' href='#498996'><time timestamp='2016-10-04T15:59:00Z'>15:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gah oh fuck
<br>
</div>

<div class='talk op-msg' data-timestamp='1475596860' id='498997'>
<a class='timestamp' href='#498997'><time timestamp='2016-10-04T16:01:00Z'>16:01</time></a>
&lt;<span class='nick nick-13'> GitHub108</span>&gt;
[bitcoin] laanwj force-pushed master from 5f3e4a8 to d7615af: <a href="https://github.com/bitcoin/bitcoin/commits/master" class="link" target="_blank">https://github.com/bitcoin/bitcoin/commits/master</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475596860' id='498998'>
<a class='timestamp' href='#498998'><time timestamp='2016-10-04T16:01:00Z'>16:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
emergency force-push back to d7615af34e8e19920ed12bfdafb09e0e4b57c7c5
<br>
</div>

<div class='talk op-msg' data-timestamp='1475596920' id='498999'>
<a class='timestamp' href='#498999'><time timestamp='2016-10-04T16:02:00Z'>16:02</time></a>
&lt;<span class='nick nick-15'> * cfields_</span>&gt;
goes to verify, i just pulled 5min ago
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597040' id='499000'>
<a class='timestamp' href='#499000'><time timestamp='2016-10-04T16:04:00Z'>16:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597100' id='499001'>
<a class='timestamp' href='#499001'><time timestamp='2016-10-04T16:05:00Z'>16:05</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
hmm, wonder if there&#x27;s a quick way to ask git for a repo contents hash (ignoring that the commit hash kinda represents that)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597220' id='499002'>
<a class='timestamp' href='#499002'><time timestamp='2016-10-04T16:07:00Z'>16:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the tree hash?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597220' id='499003'>
<a class='timestamp' href='#499003'><time timestamp='2016-10-04T16:07:00Z'>16:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s the &#x27;tree hash&#x27; I suppose?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597280' id='499004'>
<a class='timestamp' href='#499004'><time timestamp='2016-10-04T16:08:00Z'>16:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s unfortunate that github&#x27;s bot only logs the short commit hash, otherwise you could just browse back and compare ids
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597340' id='499005'>
<a class='timestamp' href='#499005'><time timestamp='2016-10-04T16:09:00Z'>16:09</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
cory@cory-i7:~/dev/bitcoin2(connman-send)$ git ls-tree origin/master | sha256sum 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597340' id='499006'>
<a class='timestamp' href='#499006'><time timestamp='2016-10-04T16:09:00Z'>16:09</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
5f470267d0fc7161ac6193c223f7e76fe135ba33fac35ec39d1adde9324f021f  -
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597400' id='499007'>
<a class='timestamp' href='#499007'><time timestamp='2016-10-04T16:10:00Z'>16:10</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
cory@Macbook:~/dev/bitcoin(fix-gui-ban)$ git ls-tree origin/master | sha256sum 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597400' id='499008'>
<a class='timestamp' href='#499008'><time timestamp='2016-10-04T16:10:00Z'>16:10</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
5f470267d0fc7161ac6193c223f7e76fe135ba33fac35ec39d1adde9324f021f  -
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597400' id='499009'>
<a class='timestamp' href='#499009'><time timestamp='2016-10-04T16:10:00Z'>16:10</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
1 pre force-push, 1 post. No surprise, they match :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597460' id='499010'>
<a class='timestamp' href='#499010'><time timestamp='2016-10-04T16:11:00Z'>16:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
good
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597760' id='499011'>
<a class='timestamp' href='#499011'><time timestamp='2016-10-04T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: sorry, had to step out...do you prefer, then, that we stick with the map&lt;pointer, thing&gt;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597760' id='499012'>
<a class='timestamp' href='#499012'><time timestamp='2016-10-04T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I mean I&#x27;m open to that, you just objected that it was fragile, and shared_ptr is an explicit fix for fragility of using a ptr there
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597760' id='499013'>
<a class='timestamp' href='#499013'><time timestamp='2016-10-04T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: for the sake of not holding it up, sure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475597880' id='499014'>
<a class='timestamp' href='#499014'><time timestamp='2016-10-04T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I mean, ok, I&#x27;ll revert the shared_ptr change, then, but what would be the long-term target there? a logic class which owns the CConnman?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475598000' id='499015'>
<a class='timestamp' href='#499015'><time timestamp='2016-10-04T16:20:00Z'>16:20</time></a>
&lt;<span class='nick nick-3'> GitHub196</span>&gt;
[bitcoin] laanwj closed pull request #8746: [Qt][RPC] Hide passphrases in debug console history (master...hide-walletpassphrase) <a href="https://github.com/bitcoin/bitcoin/pull/8746" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8746</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475598060' id='499016'>
<a class='timestamp' href='#499016'><time timestamp='2016-10-04T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: it doesn&#x27;t own it, it just holds a reference to one. It should receive signals that the connman is being torn down, and assume that it&#x27;s invalid from that point forward
<br>
</div>

<div class='talk op-msg' data-timestamp='1475598780' id='499017'>
<a class='timestamp' href='#499017'><time timestamp='2016-10-04T16:33:00Z'>16:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: hmm, ok...I find that harder to reason about (and it generates more code), but, ehh, whatever
<br>
</div>

<div class='talk op-msg' data-timestamp='1475598780' id='499018'>
<a class='timestamp' href='#499018'><time timestamp='2016-10-04T16:33:00Z'>16:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: in any case, thats not something that is less than a lot of work to make happen
<br>
</div>

<div class='talk op-msg' data-timestamp='1475598960' id='499019'>
<a class='timestamp' href='#499019'><time timestamp='2016-10-04T16:36:00Z'>16:36</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: well, lots of things are going to want to own the CConnman. They can&#x27;t all have it :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475598960' id='499020'>
<a class='timestamp' href='#499020'><time timestamp='2016-10-04T16:36:00Z'>16:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well either it&#x27;s owned by one thing and one thing only, or it&#x27;s refcounted
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599020' id='499021'>
<a class='timestamp' href='#499021'><time timestamp='2016-10-04T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: oh? what else wants to own CConnman? I think not much else cares about anything at a lower level than what peers are doing
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599020' id='499022'>
<a class='timestamp' href='#499022'><time timestamp='2016-10-04T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: aside from the need to provide the setup argument sin init
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599080' id='499023'>
<a class='timestamp' href='#499023'><time timestamp='2016-10-04T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: rpc/wallet/gui could all make the argument
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599200' id='499024'>
<a class='timestamp' href='#499024'><time timestamp='2016-10-04T16:40:00Z'>16:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;d say init creates&amp;owns CConnman, and passes it as argument to rpc/wallet/gui
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599200' id='499025'>
<a class='timestamp' href='#499025'><time timestamp='2016-10-04T16:40:00Z'>16:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
who hold a reference to CConnman, but don&#x27;t own it
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599200' id='499026'>
<a class='timestamp' href='#499026'><time timestamp='2016-10-04T16:40:00Z'>16:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and it&#x27;s init&#x27;s responsibility to not shut down CConnman before all its users are destroyed
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599260' id='499027'>
<a class='timestamp' href='#499027'><time timestamp='2016-10-04T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: why does rpc/wallet/or gui care about anything more than the list of nodes connected to, outside of the context of configuration options
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599260' id='499028'>
<a class='timestamp' href='#499028'><time timestamp='2016-10-04T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(please tell me to shut up if there are large issues i&#x27;m not aware of, i haven&#x27;t actively followed the code)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599260' id='499029'>
<a class='timestamp' href='#499029'><time timestamp='2016-10-04T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
sipa: agree, that&#x27;s what I&#x27;m suggesting as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599260' id='499030'>
<a class='timestamp' href='#499030'><time timestamp='2016-10-04T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: ok, well thats what it is now
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599260' id='499031'>
<a class='timestamp' href='#499031'><time timestamp='2016-10-04T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: was taking objection to that
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599260' id='499032'>
<a class='timestamp' href='#499032'><time timestamp='2016-10-04T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: how so?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599320' id='499033'>
<a class='timestamp' href='#499033'><time timestamp='2016-10-04T16:42:00Z'>16:42</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: eh? I&#x27;m aligned with that. I&#x27;m taking objection to a processor taking ownership
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599320' id='499034'>
<a class='timestamp' href='#499034'><time timestamp='2016-10-04T16:42:00Z'>16:42</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
&quot;a processor&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599320' id='499035'>
<a class='timestamp' href='#499035'><time timestamp='2016-10-04T16:42:00Z'>16:42</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
you mean the PeerValidationLogic
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599320' id='499036'>
<a class='timestamp' href='#499036'><time timestamp='2016-10-04T16:42:00Z'>16:42</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
it doesnt take ownership, it keeps a pointer to the object
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599320' id='499037'>
<a class='timestamp' href='#499037'><time timestamp='2016-10-04T16:42:00Z'>16:42</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
message handler, validator, etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599380' id='499038'>
<a class='timestamp' href='#499038'><time timestamp='2016-10-04T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and &quot; it&#x27;s init&#x27;s responsibility to not shut down CConnman before all its users are destroyed&quot; :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599380' id='499039'>
<a class='timestamp' href='#499039'><time timestamp='2016-10-04T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: yes, and I&#x27;m fine with that :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599380' id='499040'>
<a class='timestamp' href='#499040'><time timestamp='2016-10-04T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wait, now I&#x27;m confuseg
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599380' id='499041'>
<a class='timestamp' href='#499041'><time timestamp='2016-10-04T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ugh, ok, I&#x27;ll leave it how it is
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599380' id='499042'>
<a class='timestamp' href='#499042'><time timestamp='2016-10-04T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
just not a shared_ptr
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599380' id='499043'>
<a class='timestamp' href='#499043'><time timestamp='2016-10-04T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well ideally, the PeerValidationLogic is a class, and there is a seaprate instance of it for each CConnman
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599380' id='499044'>
<a class='timestamp' href='#499044'><time timestamp='2016-10-04T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so it can hold a pointer, and does not need a map
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599380' id='499045'>
<a class='timestamp' href='#499045'><time timestamp='2016-10-04T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: yea, I&#x27;ll remove that
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599380' id='499046'>
<a class='timestamp' href='#499046'><time timestamp='2016-10-04T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: it does, the map is only as a place to put the storage, mostly
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599440' id='499047'>
<a class='timestamp' href='#499047'><time timestamp='2016-10-04T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: i&#x27;ll shut up before looking at the 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599440' id='499048'>
<a class='timestamp' href='#499048'><time timestamp='2016-10-04T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
code
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599440' id='499049'>
<a class='timestamp' href='#499049'><time timestamp='2016-10-04T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
its just there so you can do Register(CConnman*) and Deregister(CConnman*) and it knows which PeerValidationLogic object is associated with that connman so it can destroy the right one
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599500' id='499050'>
<a class='timestamp' href='#499050'><time timestamp='2016-10-04T16:45:00Z'>16:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hmm, shouldn&#x27;t init create the PeerValidationLogic object, and just pass it the CConnman pointer?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599500' id='499051'>
<a class='timestamp' href='#499051'><time timestamp='2016-10-04T16:45:00Z'>16:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there should never be a need to look something up
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599560' id='499052'>
<a class='timestamp' href='#499052'><time timestamp='2016-10-04T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
How else do you know which PeerValidationLogic to destroy when someone hands you a CConnman* to Deregister()?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599560' id='499053'>
<a class='timestamp' href='#499053'><time timestamp='2016-10-04T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i mean aside from iterating
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599560' id='499054'>
<a class='timestamp' href='#499054'><time timestamp='2016-10-04T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
anyway, whatever, could also iterate, doesnt matter much
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599560' id='499055'>
<a class='timestamp' href='#499055'><time timestamp='2016-10-04T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
init would create the PeerValidationLogic
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599560' id='499056'>
<a class='timestamp' href='#499056'><time timestamp='2016-10-04T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and destroy it
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599620' id='499057'>
<a class='timestamp' href='#499057'><time timestamp='2016-10-04T16:47:00Z'>16:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ahh, yea, i mean thats maybe a more forward-looking thing...once the code is well-separated and designed, maybe, but for now it lets main store it
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599620' id='499058'>
<a class='timestamp' href='#499058'><time timestamp='2016-10-04T16:47:00Z'>16:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599620' id='499059'>
<a class='timestamp' href='#499059'><time timestamp='2016-10-04T16:47:00Z'>16:47</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: ^^ seems simpler than stashing it in main?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599620' id='499060'>
<a class='timestamp' href='#499060'><time timestamp='2016-10-04T16:47:00Z'>16:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
all good; &quot;it requires too much refactoring&quot; is a good reason
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599680' id='499061'>
<a class='timestamp' href='#499061'><time timestamp='2016-10-04T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: I didnt really want to expose the PeerValidationLogic in main.h yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599680' id='499062'>
<a class='timestamp' href='#499062'><time timestamp='2016-10-04T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gah stupid github and its author date based ordering of commits
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599680' id='499063'>
<a class='timestamp' href='#499063'><time timestamp='2016-10-04T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i had originally started doing what sipa said, and then decided i wanted less exposing of shit
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599680' id='499064'>
<a class='timestamp' href='#499064'><time timestamp='2016-10-04T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it took me 10 minutes to figure out why #8871&#x27;s commits didn&#x27;t show up in #8393
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599740' id='499065'>
<a class='timestamp' href='#499065'><time timestamp='2016-10-04T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
turns out they are there... at the end
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599740' id='499066'>
<a class='timestamp' href='#499066'><time timestamp='2016-10-04T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: mm, ok. Giving you a pass since the intention is to break stuff out anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599740' id='499067'>
<a class='timestamp' href='#499067'><time timestamp='2016-10-04T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
:)     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599800' id='499068'>
<a class='timestamp' href='#499068'><time timestamp='2016-10-04T16:50:00Z'>16:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: heh, ok, will need like 2 more prs for that :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599860' id='499069'>
<a class='timestamp' href='#499069'><time timestamp='2016-10-04T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: wait, isn&#x27;t it a child of CValidationInterface ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599860' id='499070'>
<a class='timestamp' href='#499070'><time timestamp='2016-10-04T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
is what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599980' id='499071'>
<a class='timestamp' href='#499071'><time timestamp='2016-10-04T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
yea, PeerLogicValidation
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599980' id='499072'>
<a class='timestamp' href='#499072'><time timestamp='2016-10-04T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
why not just keep a base pointer in init?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475599980' id='499073'>
<a class='timestamp' href='#499073'><time timestamp='2016-10-04T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, you mean ptr to CValidationInterface
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600040' id='499074'>
<a class='timestamp' href='#499074'><time timestamp='2016-10-04T16:54:00Z'>16:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmm, dont we need like a virtual destructor or something crazy like that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600040' id='499075'>
<a class='timestamp' href='#499075'><time timestamp='2016-10-04T16:54:00Z'>16:54</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
er, setup a base ptr to a dummy interface in init, then actually create it later in the process
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600040' id='499076'>
<a class='timestamp' href='#499076'><time timestamp='2016-10-04T16:54:00Z'>16:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wait, what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600160' id='499077'>
<a class='timestamp' href='#499077'><time timestamp='2016-10-04T16:56:00Z'>16:56</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
oh, it&#x27;s already non-virtual anyway. no need for the dummy
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600160' id='499078'>
<a class='timestamp' href='#499078'><time timestamp='2016-10-04T16:56:00Z'>16:56</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: nm, it can wait &#x27;til later
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600160' id='499079'>
<a class='timestamp' href='#499079'><time timestamp='2016-10-04T16:56:00Z'>16:56</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
is so confused
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600280' id='499080'>
<a class='timestamp' href='#499080'><time timestamp='2016-10-04T16:58:00Z'>16:58</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: i can write it up real quick
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600340' id='499081'>
<a class='timestamp' href='#499081'><time timestamp='2016-10-04T16:59:00Z'>16:59</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ugh, y&#x27;all and your C++ magic
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600580' id='499082'>
<a class='timestamp' href='#499082'><time timestamp='2016-10-04T17:03:00Z'>17:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: for my grammar-based password generator, i wrote an stl-like list where the iterators are refcounted, and elements automatically get destructed when no iterators remain... epic fun with rvalue references everywhere :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600580' id='499083'>
<a class='timestamp' href='#499083'><time timestamp='2016-10-04T17:03:00Z'>17:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
fuck you people
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600640' id='499084'>
<a class='timestamp' href='#499084'><time timestamp='2016-10-04T17:04:00Z'>17:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
though i don&#x27;t think cfields_ is talking about anything as extreme as that :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600640' id='499085'>
<a class='timestamp' href='#499085'><time timestamp='2016-10-04T17:04:00Z'>17:04</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
sipa: haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600700' id='499086'>
<a class='timestamp' href='#499086'><time timestamp='2016-10-04T17:05:00Z'>17:05</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
no, I just mean using a base class as a base class :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600880' id='499087'>
<a class='timestamp' href='#499087'><time timestamp='2016-10-04T17:08:00Z'>17:08</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
heh, one of these days sipa is gonna learn my name (<a href="https://github.com/bitcoin/bitcoin/pull/8393/commits/e15a0584911f142d5819cc7fb967028c76682792).." class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8393/commits/e15a0584911f142d5819cc7fb967028c76682792)..</a>.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600880' id='499088'>
<a class='timestamp' href='#499088'><time timestamp='2016-10-04T17:08:00Z'>17:08</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
right after he finishes learning english, mabye :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1475600940' id='499089'>
<a class='timestamp' href='#499089'><time timestamp='2016-10-04T17:09:00Z'>17:09</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: still hacking it up, just a few min
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601000' id='499090'>
<a class='timestamp' href='#499090'><time timestamp='2016-10-04T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: crap
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601060' id='499091'>
<a class='timestamp' href='#499091'><time timestamp='2016-10-04T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: fixed
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601420' id='499092'>
<a class='timestamp' href='#499092'><time timestamp='2016-10-04T17:17:00Z'>17:17</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
BlueMatt: &quot;We went looking everywhere, but couldnâ€™t find those commits.&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601480' id='499093'>
<a class='timestamp' href='#499093'><time timestamp='2016-10-04T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
oh, prob cuz sipa deleted it
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601480' id='499094'>
<a class='timestamp' href='#499094'><time timestamp='2016-10-04T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
peers at MarcoFalke deleting branches quickly after merge
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601600' id='499095'>
<a class='timestamp' href='#499095'><time timestamp='2016-10-04T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
luke-jr: You need to modify the url to get the commit: e.g. <a href="https://github.com/bitcoin/bitcoin/commit/e15a0584911f142d5819cc7fb967028c76682792" class="link" target="_blank">https://github.com/bitcoin/bitcoin/commit/e15a0584911f142d5819cc7fb967028c76682792</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601660' id='499096'>
<a class='timestamp' href='#499096'><time timestamp='2016-10-04T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
for the above one
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601660' id='499097'>
<a class='timestamp' href='#499097'><time timestamp='2016-10-04T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: untested POC: <a href="https://github.com/theuni/bitcoin/commit/31438dd973a95934ab847fb5ba7d6fa604ee506c" class="link" target="_blank">https://github.com/theuni/bitcoin/commit/31438dd973a95934ab847fb5ba7d6fa604ee506c</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601720' id='499098'>
<a class='timestamp' href='#499098'><time timestamp='2016-10-04T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
testing? who does that???
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601720' id='499099'>
<a class='timestamp' href='#499099'><time timestamp='2016-10-04T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: omgno
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601720' id='499100'>
<a class='timestamp' href='#499100'><time timestamp='2016-10-04T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: the unique_ptr is awkward because it has to be passed to main for creation. Once the header can be exposed, nearly all of that ugliness goes away
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601720' id='499101'>
<a class='timestamp' href='#499101'><time timestamp='2016-10-04T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
the second I see std::move my eyes glaze over
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601720' id='499102'>
<a class='timestamp' href='#499102'><time timestamp='2016-10-04T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
eh?     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601780' id='499103'>
<a class='timestamp' href='#499103'><time timestamp='2016-10-04T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
you&#x27;re like passing around something without knowledge of the type and using std::move and things
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601780' id='499104'>
<a class='timestamp' href='#499104'><time timestamp='2016-10-04T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i really dont like that
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601780' id='499105'>
<a class='timestamp' href='#499105'><time timestamp='2016-10-04T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
huh? Yes, I&#x27;m using virtuals and rvalues...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601780' id='499106'>
<a class='timestamp' href='#499106'><time timestamp='2016-10-04T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
Everything there is type-safe and defined
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601840' id='499107'>
<a class='timestamp' href='#499107'><time timestamp='2016-10-04T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
but as mentioned above, that&#x27;s only there to work around the fact that the header isn&#x27;t exposed. The moves go away once you can create the inteface directly in init
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601960' id='499108'>
<a class='timestamp' href='#499108'><time timestamp='2016-10-04T17:26:00Z'>17:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i mean you had to add a virtual destructor......
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601960' id='499109'>
<a class='timestamp' href='#499109'><time timestamp='2016-10-04T17:26:00Z'>17:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
was mostly what i was referring to
<br>
</div>

<div class='talk op-msg' data-timestamp='1475601960' id='499110'>
<a class='timestamp' href='#499110'><time timestamp='2016-10-04T17:26:00Z'>17:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
can we just push this off until its in net_processing.h and we can expose the class there?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602020' id='499111'>
<a class='timestamp' href='#499111'><time timestamp='2016-10-04T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
like, ehh, you&#x27;re bending over backwards to make this work without exposing the PeerLogicValidation, whereas I&#x27;d kinda prefer to expose it in main.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602020' id='499112'>
<a class='timestamp' href='#499112'><time timestamp='2016-10-04T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
though, mostly, Id rather put it off into peer_validator.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602020' id='499113'>
<a class='timestamp' href='#499113'><time timestamp='2016-10-04T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ehh, net_processing.h is what i was calling it
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602020' id='499114'>
<a class='timestamp' href='#499114'><time timestamp='2016-10-04T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: I&#x27;m just coding it up with the constraints I&#x27;ve been given. Obviously it&#x27;s much nicer to just split out the header and use it directly
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602020' id='499115'>
<a class='timestamp' href='#499115'><time timestamp='2016-10-04T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
BlueMatt virtually self-destructs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602080' id='499116'>
<a class='timestamp' href='#499116'><time timestamp='2016-10-04T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
hides
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602080' id='499117'>
<a class='timestamp' href='#499117'><time timestamp='2016-10-04T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
so if that&#x27;s the plan, sure, no need to do it now
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602080' id='499118'>
<a class='timestamp' href='#499118'><time timestamp='2016-10-04T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, sorry, i mean my &quot;dont want to expose this&quot; is a weak preference just because main.h is Too Damn Big (tm)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602080' id='499119'>
<a class='timestamp' href='#499119'><time timestamp='2016-10-04T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
after the split i see no reason why it shouldnt be exposed (net_processing.h right now is like 4 functions and some forward-declarations)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602140' id='499120'>
<a class='timestamp' href='#499120'><time timestamp='2016-10-04T17:29:00Z'>17:29</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: ok, how about this then...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602140' id='499121'>
<a class='timestamp' href='#499121'><time timestamp='2016-10-04T17:29:00Z'>17:29</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
stuff it in main.h for now, hold it cleanly in init, then split it out of main.h as the next step?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602200' id='499122'>
<a class='timestamp' href='#499122'><time timestamp='2016-10-04T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
that way the plan is clear all along. Or is there a reason that doesn&#x27;t work?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602200' id='499123'>
<a class='timestamp' href='#499123'><time timestamp='2016-10-04T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sure, can do that, too, then I&#x27;ll just move all the to-be-moved stuff together - RegisterNodeSignals, UnregisterNodeSignals, ProcessMessages, SendMessages, GetNodeStateStats, and Misbehaving
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602260' id='499124'>
<a class='timestamp' href='#499124'><time timestamp='2016-10-04T17:31:00Z'>17:31</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: that sounds much better :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602320' id='499125'>
<a class='timestamp' href='#499125'><time timestamp='2016-10-04T17:32:00Z'>17:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
since main.h moves are easy
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602380' id='499126'>
<a class='timestamp' href='#499126'><time timestamp='2016-10-04T17:33:00Z'>17:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ok, I&#x27;ma overwrite the shit out of history on that pr, then
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602380' id='499127'>
<a class='timestamp' href='#499127'><time timestamp='2016-10-04T17:33:00Z'>17:33</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
lol     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602440' id='499128'>
<a class='timestamp' href='#499128'><time timestamp='2016-10-04T17:34:00Z'>17:34</time></a>
&lt;<span class='nick nick-15'> * cfields_</span>&gt;
salivates at the thought of PeerLogicValidation::mapNodeState
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602500' id='499129'>
<a class='timestamp' href='#499129'><time timestamp='2016-10-04T17:35:00Z'>17:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
heh, yup
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602560' id='499130'>
<a class='timestamp' href='#499130'><time timestamp='2016-10-04T17:36:00Z'>17:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
at some point i thought about a generic NetmessageProcessor&lt;state&gt; class you could inherit from (with your own state type filled in), which you could register to net
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602560' id='499131'>
<a class='timestamp' href='#499131'><time timestamp='2016-10-04T17:36:00Z'>17:36</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
maybe this can be the final home for CChainParams as well.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602620' id='499132'>
<a class='timestamp' href='#499132'><time timestamp='2016-10-04T17:37:00Z'>17:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and you&#x27;d have separate instances for dealing with tx relay, block relay, ping, addr management, ...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602620' id='499133'>
<a class='timestamp' href='#499133'><time timestamp='2016-10-04T17:37:00Z'>17:37</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
sipa: state types being?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602620' id='499134'>
<a class='timestamp' href='#499134'><time timestamp='2016-10-04T17:37:00Z'>17:37</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
ah     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602620' id='499135'>
<a class='timestamp' href='#499135'><time timestamp='2016-10-04T17:37:00Z'>17:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields_: well for the ping handler, the state would be a struct that remembers the last sent ping
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602620' id='499136'>
<a class='timestamp' href='#499136'><time timestamp='2016-10-04T17:37:00Z'>17:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
for addr management it would be the addrKnown and tosend vectors
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602620' id='499137'>
<a class='timestamp' href='#499137'><time timestamp='2016-10-04T17:37:00Z'>17:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
etc     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602680' id='499138'>
<a class='timestamp' href='#499138'><time timestamp='2016-10-04T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and you&#x27;d have the ability to do parallel processing across different nodes as long as it was about different handlers
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602680' id='499139'>
<a class='timestamp' href='#499139'><time timestamp='2016-10-04T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
hmm, interesting
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602680' id='499140'>
<a class='timestamp' href='#499140'><time timestamp='2016-10-04T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
how to order dependent messages?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602680' id='499141'>
<a class='timestamp' href='#499141'><time timestamp='2016-10-04T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you don&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602680' id='499142'>
<a class='timestamp' href='#499142'><time timestamp='2016-10-04T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
(for ex the ping ordering that ruins everything)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602740' id='499143'>
<a class='timestamp' href='#499143'><time timestamp='2016-10-04T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you only ever process the oldest unprocessed message for each peer
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602740' id='499144'>
<a class='timestamp' href='#499144'><time timestamp='2016-10-04T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
we need to discuss ping ordering at some point
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602740' id='499145'>
<a class='timestamp' href='#499145'><time timestamp='2016-10-04T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: pointed out that its pretty much violated everywhere wrt block processing
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602740' id='499146'>
<a class='timestamp' href='#499146'><time timestamp='2016-10-04T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
oh, gotcha. I missed the &quot;different nodes&quot; part. My brain turned that into &quot;across different messages&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602740' id='499147'>
<a class='timestamp' href='#499147'><time timestamp='2016-10-04T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
essentially, i think we need to grep bitcoinj and other spv clients, find all the places where they actually use ping sync, define those, than then say that that is the protocol
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602800' id='499148'>
<a class='timestamp' href='#499148'><time timestamp='2016-10-04T17:40:00Z'>17:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: heh, i thought we&#x27;d just stick to synchronous processing all messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602800' id='499149'>
<a class='timestamp' href='#499149'><time timestamp='2016-10-04T17:40:00Z'>17:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s such a huge change to deviate from
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602800' id='499150'>
<a class='timestamp' href='#499150'><time timestamp='2016-10-04T17:40:00Z'>17:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;d rather redo the p2p protocol from scratch if you&#x27;re going to change that
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602860' id='499151'>
<a class='timestamp' href='#499151'><time timestamp='2016-10-04T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: we already violate it a) with block processing sometimes (sdaftuar thinks this is the cause for some of the compact block test failures, last I heard) and definitely on reject messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602860' id='499152'>
<a class='timestamp' href='#499152'><time timestamp='2016-10-04T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: so we kinda already deviate from it :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602860' id='499153'>
<a class='timestamp' href='#499153'><time timestamp='2016-10-04T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we don&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602860' id='499154'>
<a class='timestamp' href='#499154'><time timestamp='2016-10-04T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
when receiving a block, we <b>*process*</b> the block fully
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602860' id='499155'>
<a class='timestamp' href='#499155'><time timestamp='2016-10-04T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and send all messages in response to that
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602860' id='499156'>
<a class='timestamp' href='#499156'><time timestamp='2016-10-04T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: there are several things we send in SendMessages instead of ProcessMessages
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602860' id='499157'>
<a class='timestamp' href='#499157'><time timestamp='2016-10-04T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which will violate it
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602860' id='499158'>
<a class='timestamp' href='#499158'><time timestamp='2016-10-04T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that doesn&#x27;t mean we fully validate
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602920' id='499159'>
<a class='timestamp' href='#499159'><time timestamp='2016-10-04T17:42:00Z'>17:42</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: block announcements are delivered asynchronously (as are block reject messages)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602920' id='499160'>
<a class='timestamp' href='#499160'><time timestamp='2016-10-04T17:42:00Z'>17:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1475602980' id='499161'>
<a class='timestamp' href='#499161'><time timestamp='2016-10-04T17:43:00Z'>17:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields_: hope you like your main.h with some #include &quot;validationinterface.h&quot; :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1475603040' id='499162'>
<a class='timestamp' href='#499162'><time timestamp='2016-10-04T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
oh wow, i didn&#x27;t realize we&#x27;d slimmed the main.h includes down so much
<br>
</div>

<div class='talk op-msg' data-timestamp='1475603040' id='499163'>
<a class='timestamp' href='#499163'><time timestamp='2016-10-04T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, they&#x27;re pretty minimal now
<br>
</div>

<div class='talk op-msg' data-timestamp='1475603040' id='499164'>
<a class='timestamp' href='#499164'><time timestamp='2016-10-04T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I dont really mind adding validationinterface, though...we&#x27;ll kill it soon :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475603040' id='499165'>
<a class='timestamp' href='#499165'><time timestamp='2016-10-04T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: i think that&#x27;s fine as long as it&#x27;s temporary
<br>
</div>

<div class='talk op-msg' data-timestamp='1475603100' id='499166'>
<a class='timestamp' href='#499166'><time timestamp='2016-10-04T17:45:00Z'>17:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yup     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475603700' id='499167'>
<a class='timestamp' href='#499167'><time timestamp='2016-10-04T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ok, cfields_ see current branch
<br>
</div>

<div class='talk op-msg' data-timestamp='1475603820' id='499168'>
<a class='timestamp' href='#499168'><time timestamp='2016-10-04T17:57:00Z'>17:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gotta love <a href="https://github.com/bitcoin/bitcoin/pull/8865/files#diff-e8db9b851adc2422aadfffca88f14c91R523" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8865/files#diff-e8db9b851adc2422aadfffca88f14c91R523</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475603880' id='499169'>
<a class='timestamp' href='#499169'><time timestamp='2016-10-04T17:58:00Z'>17:58</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: much better
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604000' id='499170'>
<a class='timestamp' href='#499170'><time timestamp='2016-10-04T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
lol     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604300' id='499171'>
<a class='timestamp' href='#499171'><time timestamp='2016-10-04T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
BlueMatt: any reason not to simply register/unregister in PeerLogicValidation&#x27;s ctor/dtor? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604300' id='499172'>
<a class='timestamp' href='#499172'><time timestamp='2016-10-04T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
layer violation?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604300' id='499173'>
<a class='timestamp' href='#499173'><time timestamp='2016-10-04T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
feel yucky to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604360' id='499174'>
<a class='timestamp' href='#499174'><time timestamp='2016-10-04T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, it feels yucky because &quot;hidden magic&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604420' id='499175'>
<a class='timestamp' href='#499175'><time timestamp='2016-10-04T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
the zmq one doesnt do that
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604420' id='499176'>
<a class='timestamp' href='#499176'><time timestamp='2016-10-04T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
hmm, as long as the registration is global, it all seems like the same hidden magic to me.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604420' id='499177'>
<a class='timestamp' href='#499177'><time timestamp='2016-10-04T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
but np, was just a thought
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604420' id='499178'>
<a class='timestamp' href='#499178'><time timestamp='2016-10-04T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
true, but the registration will eventually not be global :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604480' id='499179'>
<a class='timestamp' href='#499179'><time timestamp='2016-10-04T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i guess I&#x27;m kinda thinking about chunks of code as if they were classes even though they are currently not
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604480' id='499180'>
<a class='timestamp' href='#499180'><time timestamp='2016-10-04T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
since they should be eventually, or even if not they&#x27;ll be well-isolated so even if not a class, a single common interface feels similar
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604540' id='499181'>
<a class='timestamp' href='#499181'><time timestamp='2016-10-04T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
ok, then future request: when you&#x27;re registering to a signagls instance, and you pass that instance into PeerLogicValidation, make it RAII please :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604600' id='499182'>
<a class='timestamp' href='#499182'><time timestamp='2016-10-04T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
maybe we should just use weak_ptrs for signal instances :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604600' id='499183'>
<a class='timestamp' href='#499183'><time timestamp='2016-10-04T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
and I think i see what you mean, and sounds good
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604660' id='499184'>
<a class='timestamp' href='#499184'><time timestamp='2016-10-04T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
I really wish there was some unique_ptr with a weak_ptr, it would be really useful sometimes. Though some of the semantics kinda make no sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604720' id='499185'>
<a class='timestamp' href='#499185'><time timestamp='2016-10-04T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, would be cool to not have to use shared_ptrs, i guess...would just be somewhat oxymoronic to use it with a unique_ptr
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604780' id='499186'>
<a class='timestamp' href='#499186'><time timestamp='2016-10-04T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
Well the interesting use-case would be: I&#x27;m using a unique_ptr, grab it and hold it if it&#x27;s non-null.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604780' id='499187'>
<a class='timestamp' href='#499187'><time timestamp='2016-10-04T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
so basically a shared_ptr with a max refcount of 2
<br>
</div>

<div class='talk op-msg' data-timestamp='1475604780' id='499188'>
<a class='timestamp' href='#499188'><time timestamp='2016-10-04T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475605500' id='499189'>
<a class='timestamp' href='#499189'><time timestamp='2016-10-04T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-10'> GitHub126</span>&gt;
[bitcoin] jnewbery opened pull request #8881: Add some verbose logging to bitcoin-util-test.py (master...verbose-bitcoin-util-output) <a href="https://github.com/bitcoin/bitcoin/pull/8881" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8881</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475606700' id='499190'>
<a class='timestamp' href='#499190'><time timestamp='2016-10-04T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-6'> ill</span>&gt;
abovetghelaw
<br>
</div>

<div class='talk op-msg' data-timestamp='1475610960' id='499191'>
<a class='timestamp' href='#499191'><time timestamp='2016-10-04T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-10'> GitHub126</span>&gt;
[bitcoin] sdaftuar opened pull request #8882: [qa] Another attempt to fix race condition in p2p-compactblocks.py (master...fix-race-again) <a href="https://github.com/bitcoin/bitcoin/pull/8882" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8882</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475616540' id='499192'>
<a class='timestamp' href='#499192'><time timestamp='2016-10-04T21:29:00Z'>21:29</time></a>
&lt;<span class='nick nick-11'> GitHub177</span>&gt;
[bitcoin] jnewbery opened pull request #8883: Add all standard TXO types to bitcoin-tx (master...add-p2sh-segwit-options-to-bitcoin-tx) <a href="https://github.com/bitcoin/bitcoin/pull/8883" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8883</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475616660' id='499193'>
<a class='timestamp' href='#499193'><time timestamp='2016-10-04T21:31:00Z'>21:31</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: would it help if I rebase and address comments on <a href="https://github.com/bitcoin/bitcoin/pull/8448" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8448</a> ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475618220' id='499194'>
<a class='timestamp' href='#499194'><time timestamp='2016-10-04T21:57:00Z'>21:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: i&#x27;ll do it after 0.13.1
<br>
</div>

<div class='talk op-msg' data-timestamp='1475618280' id='499195'>
<a class='timestamp' href='#499195'><time timestamp='2016-10-04T21:58:00Z'>21:58</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ok     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475618280' id='499196'>
<a class='timestamp' href='#499196'><time timestamp='2016-10-04T21:58:00Z'>21:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you can of course, but i wanted to change a few things
<br>
</div>

<div class='talk op-msg' data-timestamp='1475618400' id='499197'>
<a class='timestamp' href='#499197'><time timestamp='2016-10-04T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: if you&#x27;d rather I take it off your load, just let me know what things you&#x27;d like changed ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475618520' id='499198'>
<a class='timestamp' href='#499198'><time timestamp='2016-10-04T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1475619660' id='499199'>
<a class='timestamp' href='#499199'><time timestamp='2016-10-04T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-12'> GitHub119</span>&gt;
[bitcoin] luke-jr opened pull request #8884: Bugfix: Trivial: RPC: getblockchaininfo help: pruneheight is the lowest, not highest, block (master...trivial_pruneheight_help) <a href="https://github.com/bitcoin/bitcoin/pull/8884" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8884</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475624520' id='499200'>
<a class='timestamp' href='#499200'><time timestamp='2016-10-04T23:42:00Z'>23:42</time></a>
&lt;<span class='nick nick-3'> GitHub135</span>&gt;
[bitcoin] theuni opened pull request #8885: gui: fix ban from qt console (master...fix-gui-ban) <a href="https://github.com/bitcoin/bitcoin/pull/8885" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8885</a>
<br>
</div>

</div>
</section>

</body>
</html>
