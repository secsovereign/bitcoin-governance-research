<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2016-07-11
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2016-07-11' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:26 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-06-11">&lt;</a><span class='header'>    July 2016     </span><a href="/bitcoin-core-dev/2016-08-11">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                <a class="" href="/bitcoin-core-dev/2016-07-01">1</a>  <a class="" href="/bitcoin-core-dev/2016-07-02">2</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-07-03">3</a>  <a class="" href="/bitcoin-core-dev/2016-07-04">4</a>  <a class="" href="/bitcoin-core-dev/2016-07-05">5</a>  <a class="" href="/bitcoin-core-dev/2016-07-06">6</a>  <a class="" href="/bitcoin-core-dev/2016-07-07">7</a>  <a class="" href="/bitcoin-core-dev/2016-07-08">8</a>  <a class="" href="/bitcoin-core-dev/2016-07-09">9</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-07-10">10</a> <a class="current" href="/bitcoin-core-dev/2016-07-11">11</a> <a class="" href="/bitcoin-core-dev/2016-07-12">12</a> <a class="" href="/bitcoin-core-dev/2016-07-13">13</a> <a class="" href="/bitcoin-core-dev/2016-07-14">14</a> <a class="" href="/bitcoin-core-dev/2016-07-15">15</a> <a class="" href="/bitcoin-core-dev/2016-07-16">16</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-07-17">17</a> <a class="" href="/bitcoin-core-dev/2016-07-18">18</a> <a class="" href="/bitcoin-core-dev/2016-07-19">19</a> <a class="" href="/bitcoin-core-dev/2016-07-20">20</a> <a class="" href="/bitcoin-core-dev/2016-07-21">21</a> <a class="" href="/bitcoin-core-dev/2016-07-22">22</a> <a class="" href="/bitcoin-core-dev/2016-07-23">23</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-07-24">24</a> <a class="" href="/bitcoin-core-dev/2016-07-25">25</a> <a class="" href="/bitcoin-core-dev/2016-07-26">26</a> <a class="" href="/bitcoin-core-dev/2016-07-27">27</a> <a class="" href="/bitcoin-core-dev/2016-07-28">28</a> <a class="" href="/bitcoin-core-dev/2016-07-29">29</a> <a class="" href="/bitcoin-core-dev/2016-07-30">30</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-07-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1468199280' id='478589'>
<a class='timestamp' href='#478589'><time timestamp='2016-07-11T01:08:00Z'>01:08</time></a>
&lt;<span class='nick nick-4'> GitHub125</span>&gt;
[bitcoin] pstratem closed pull request #7940: [WIP] Fuzzing framework (master...2016-04-20-fuzzing-framework) <a href="https://github.com/bitcoin/bitcoin/pull/7940" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7940</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468199280' id='478590'>
<a class='timestamp' href='#478590'><time timestamp='2016-07-11T01:08:00Z'>01:08</time></a>
&lt;<span class='nick nick-12'> GitHub119</span>&gt;
[bitcoin] pstratem closed pull request #8277: Refactor CBlockHeaderAndShortTxIDs::GetShortID into CTransaction (master...2016-06-26-ctransaction-getshortid) <a href="https://github.com/bitcoin/bitcoin/pull/8277" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8277</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468227780' id='478591'>
<a class='timestamp' href='#478591'><time timestamp='2016-07-11T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-12'> GitHub82</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/67caef673089...26316ffa7dc5" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/67caef673089...26316ffa7dc5</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468227780' id='478592'>
<a class='timestamp' href='#478592'><time timestamp='2016-07-11T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-12'> GitHub82</span>&gt;
bitcoin/master 1ba3db6 Christian von Roques: bash-completion: Adapt for 0.12 and 0.13...
<br>
</div>

<div class='talk op-msg' data-timestamp='1468227780' id='478593'>
<a class='timestamp' href='#478593'><time timestamp='2016-07-11T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-12'> GitHub82</span>&gt;
bitcoin/master 26316ff Wladimir J. van der Laan: Merge #8289: bash-completion: Adapt for 0.12 and 0.13...
<br>
</div>

<div class='talk op-msg' data-timestamp='1468227780' id='478594'>
<a class='timestamp' href='#478594'><time timestamp='2016-07-11T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-11'> GitHub140</span>&gt;
[bitcoin] laanwj closed pull request #8289: bash-completion: Adapt for 0.12 and 0.13 (master...completion) <a href="https://github.com/bitcoin/bitcoin/pull/8289" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8289</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468228200' id='478595'>
<a class='timestamp' href='#478595'><time timestamp='2016-07-11T09:10:00Z'>09:10</time></a>
&lt;<span class='nick nick-15'> assder</span>&gt;
When is the first release candidate for 0.13 expected?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468228380' id='478596'>
<a class='timestamp' href='#478596'><time timestamp='2016-07-11T09:13:00Z'>09:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
&quot;Soon&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1468230780' id='478597'>
<a class='timestamp' href='#478597'><time timestamp='2016-07-11T09:53:00Z'>09:53</time></a>
&lt;<span class='nick nick-1'> GitHub143</span>&gt;
[bitcoin] laanwj pushed 3 new commits to 0.12: <a href="https://github.com/bitcoin/bitcoin/compare/080457c4ee97...5c8438207661" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/080457c4ee97...5c8438207661</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468230780' id='478598'>
<a class='timestamp' href='#478598'><time timestamp='2016-07-11T09:53:00Z'>09:53</time></a>
&lt;<span class='nick nick-11'> GitHub78</span>&gt;
[bitcoin] laanwj closed pull request #8318: [0.12] Backport &quot;Rename OP_NOP3 to OP_CHECKSEQUENCEVERIFY #7540&quot; (0.12...rename_nop3_0.12) <a href="https://github.com/bitcoin/bitcoin/pull/8318" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8318</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468230780' id='478599'>
<a class='timestamp' href='#478599'><time timestamp='2016-07-11T09:53:00Z'>09:53</time></a>
&lt;<span class='nick nick-1'> GitHub143</span>&gt;
bitcoin/0.12 ac5577b BtcDrak: Rename OP_NOP3 to OP_CHECKSEQUENCEVERIFY
<br>
</div>

<div class='talk op-msg' data-timestamp='1468230780' id='478600'>
<a class='timestamp' href='#478600'><time timestamp='2016-07-11T09:53:00Z'>09:53</time></a>
&lt;<span class='nick nick-1'> GitHub143</span>&gt;
bitcoin/0.12 c4e5688 BtcDrak: Rename NOP3 to CHECSEQUENCEVERIFY in rpc tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1468230780' id='478601'>
<a class='timestamp' href='#478601'><time timestamp='2016-07-11T09:53:00Z'>09:53</time></a>
&lt;<span class='nick nick-1'> GitHub143</span>&gt;
bitcoin/0.12 5c84382 Wladimir J. van der Laan: Merge #8318: [0.12] Backport &quot;Rename OP_NOP3 to OP_CHECKSEQUENCEVERIFY #7540&quot;...
<br>
</div>

<div class='talk op-msg' data-timestamp='1468232940' id='478602'>
<a class='timestamp' href='#478602'><time timestamp='2016-07-11T10:29:00Z'>10:29</time></a>
&lt;<span class='nick nick-9'> GitHub157</span>&gt;
[bitcoin] laanwj pushed 2 new commits to 0.12: <a href="https://github.com/bitcoin/bitcoin/compare/5c8438207661...1233cb42dde9" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/5c8438207661...1233cb42dde9</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468232940' id='478603'>
<a class='timestamp' href='#478603'><time timestamp='2016-07-11T10:29:00Z'>10:29</time></a>
&lt;<span class='nick nick-9'> GitHub157</span>&gt;
bitcoin/0.12 fe98533 Jonas Schnelli: [Qt] Disable some menu items during splashscreen/verification state...
<br>
</div>

<div class='talk op-msg' data-timestamp='1468232940' id='478604'>
<a class='timestamp' href='#478604'><time timestamp='2016-07-11T10:29:00Z'>10:29</time></a>
&lt;<span class='nick nick-15'> GitHub27</span>&gt;
[bitcoin] laanwj closed pull request #8302: 0.12.2: [Qt] Disable some menu items during splashscreen/verification state (0.12...Mf1607-012qtDebugSplash) <a href="https://github.com/bitcoin/bitcoin/pull/8302" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8302</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468232940' id='478605'>
<a class='timestamp' href='#478605'><time timestamp='2016-07-11T10:29:00Z'>10:29</time></a>
&lt;<span class='nick nick-9'> GitHub157</span>&gt;
bitcoin/0.12 1233cb4 Wladimir J. van der Laan: Merge #8302: 0.12.2: [Qt] Disable some menu items during splashscreen/verification state...
<br>
</div>

<div class='talk op-msg' data-timestamp='1468234260' id='478606'>
<a class='timestamp' href='#478606'><time timestamp='2016-07-11T10:51:00Z'>10:51</time></a>
&lt;<span class='nick nick-14'> GitHub118</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/26316ffa7dc5...304eff3c614a" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/26316ffa7dc5...304eff3c614a</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468234260' id='478607'>
<a class='timestamp' href='#478607'><time timestamp='2016-07-11T10:51:00Z'>10:51</time></a>
&lt;<span class='nick nick-14'> GitHub118</span>&gt;
bitcoin/master 477777f MarcoFalke: [rpcwallet] Don&#x27;t use floating point
<br>
</div>

<div class='talk op-msg' data-timestamp='1468234260' id='478608'>
<a class='timestamp' href='#478608'><time timestamp='2016-07-11T10:51:00Z'>10:51</time></a>
&lt;<span class='nick nick-14'> GitHub118</span>&gt;
bitcoin/master 304eff3 Wladimir J. van der Laan: Merge #8317: [rpcwallet] Don&#x27;t use floating point...
<br>
</div>

<div class='talk op-msg' data-timestamp='1468234260' id='478609'>
<a class='timestamp' href='#478609'><time timestamp='2016-07-11T10:51:00Z'>10:51</time></a>
&lt;<span class='nick nick-11'> GitHub31</span>&gt;
[bitcoin] laanwj closed pull request #8317: [rpcwallet] Don&#x27;t use floating point (master...Mf1607-rpcFloat) <a href="https://github.com/bitcoin/bitcoin/pull/8317" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8317</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468238280' id='478610'>
<a class='timestamp' href='#478610'><time timestamp='2016-07-11T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Who guessed it
<br>
</div>

<div class='talk op-msg' data-timestamp='1468238280' id='478611'>
<a class='timestamp' href='#478611'><time timestamp='2016-07-11T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468238280' id='478612'>
<a class='timestamp' href='#478612'><time timestamp='2016-07-11T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Of course windows test are timing out, ow
<br>
</div>

<div class='talk op-msg' data-timestamp='1468238340' id='478613'>
<a class='timestamp' href='#478613'><time timestamp='2016-07-11T11:59:00Z'>11:59</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I am not sure why they don&#x27;t work in parallel &quot;out of the box&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1468238340' id='478614'>
<a class='timestamp' href='#478614'><time timestamp='2016-07-11T11:59:00Z'>11:59</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Maybe wine can&#x27;t handle it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468238400' id='478615'>
<a class='timestamp' href='#478615'><time timestamp='2016-07-11T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
reduce their parallelism?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468238460' id='478616'>
<a class='timestamp' href='#478616'><time timestamp='2016-07-11T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
There is already an overhead of about 2 for just using wine. Then, disabling parallel is another slowdown by 4.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468238460' id='478617'>
<a class='timestamp' href='#478617'><time timestamp='2016-07-11T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
So about 8 times longer rpc test for windows
<br>
</div>

<div class='talk op-msg' data-timestamp='1468238460' id='478618'>
<a class='timestamp' href='#478618'><time timestamp='2016-07-11T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
fun.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468238760' id='478619'>
<a class='timestamp' href='#478619'><time timestamp='2016-07-11T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
what? why would WINE have any overhead?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468242600' id='478620'>
<a class='timestamp' href='#478620'><time timestamp='2016-07-11T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
luke-jr: that&#x27;s not really clear, I&#x27;d expect an overhead at startup/shutdown due to setting up the &#x27;virtual windows environment&#x27;, but not on networking
<br>
</div>

<div class='talk op-msg' data-timestamp='1468242720' id='478621'>
<a class='timestamp' href='#478621'><time timestamp='2016-07-11T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-7'> GitHub175</span>&gt;
[bitcoin] jtimon opened pull request #8328: Consensus: Rename: Move consensus code to the consensus directory (master...0.12.99-consensus-rename) <a href="https://github.com/bitcoin/bitcoin/pull/8328" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8328</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468242840' id='478622'>
<a class='timestamp' href='#478622'><time timestamp='2016-07-11T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
ping kanzure ^^
<br>
</div>

<div class='talk op-msg' data-timestamp='1468242900' id='478623'>
<a class='timestamp' href='#478623'><time timestamp='2016-07-11T13:15:00Z'>13:15</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
quite trivial to review, just touches the makefile and a bunch of includes
<br>
</div>

<div class='talk op-msg' data-timestamp='1468242960' id='478624'>
<a class='timestamp' href='#478624'><time timestamp='2016-07-11T13:16:00Z'>13:16</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
thanks for the ping
<br>
</div>

<div class='talk op-msg' data-timestamp='1468242960' id='478625'>
<a class='timestamp' href='#478625'><time timestamp='2016-07-11T13:16:00Z'>13:16</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
no problem, thanks for asking for it
<br>
</div>

<div class='talk op-msg' data-timestamp='1468244520' id='478626'>
<a class='timestamp' href='#478626'><time timestamp='2016-07-11T13:42:00Z'>13:42</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
sipa: what&#x27;s the advantage of validating this <a href="https://github.com/bitcoin/bitcoin/blob/master/src/main.cpp#L3558" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/main.cpp#L3558</a> in ContextualCheckBlock() instead of ConnectBlock() ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468244520' id='478627'>
<a class='timestamp' href='#478627'><time timestamp='2016-07-11T13:42:00Z'>13:42</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
and the same question kind of applies to the other 2 consensus checks in there
<br>
</div>

<div class='talk op-msg' data-timestamp='1468244580' id='478628'>
<a class='timestamp' href='#478628'><time timestamp='2016-07-11T13:43:00Z'>13:43</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
in other words would it be crazy to move all those checks to just connectblock? why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468244700' id='478629'>
<a class='timestamp' href='#478629'><time timestamp='2016-07-11T13:45:00Z'>13:45</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
or in other words, is it necessary or advantageous to call ContextualCheckBlock() in other places other than ConnectBlock() in some way I&#x27;m missing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468244700' id='478630'>
<a class='timestamp' href='#478630'><time timestamp='2016-07-11T13:45:00Z'>13:45</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
answers from anyone welcomed
<br>
</div>

<div class='talk op-msg' data-timestamp='1468244880' id='478631'>
<a class='timestamp' href='#478631'><time timestamp='2016-07-11T13:48:00Z'>13:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jtimon: contextualcheckblock runs before storing a block on disk, connectblock after
<br>
</div>

<div class='talk op-msg' data-timestamp='1468244880' id='478632'>
<a class='timestamp' href='#478632'><time timestamp='2016-07-11T13:48:00Z'>13:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so everything that can be in contextualcheckblock should be, as it make attacks that cause disk space wasting harder
<br>
</div>

<div class='talk op-msg' data-timestamp='1468244940' id='478633'>
<a class='timestamp' href='#478633'><time timestamp='2016-07-11T13:49:00Z'>13:49</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I see, so the advantage is to discard offending blocks before storing them on disk for checks that are relatively cheap
<br>
</div>

<div class='talk op-msg' data-timestamp='1468244940' id='478634'>
<a class='timestamp' href='#478634'><time timestamp='2016-07-11T13:49:00Z'>13:49</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I didn&#x27;t knew we stored invalid blocks at all
<br>
</div>

<div class='talk op-msg' data-timestamp='1468244940' id='478635'>
<a class='timestamp' href='#478635'><time timestamp='2016-07-11T13:49:00Z'>13:49</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
why do we store invalid blocks?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245060' id='478636'>
<a class='timestamp' href='#478636'><time timestamp='2016-07-11T13:51:00Z'>13:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
because we can&#x27;t know until we reorg the chainstate
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245060' id='478637'>
<a class='timestamp' href='#478637'><time timestamp='2016-07-11T13:51:00Z'>13:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we may accept a block on a side branch that does not overtake the best chai  yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245060' id='478638'>
<a class='timestamp' href='#478638'><time timestamp='2016-07-11T13:51:00Z'>13:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*chain 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245060' id='478639'>
<a class='timestamp' href='#478639'><time timestamp='2016-07-11T13:51:00Z'>13:51</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
but it&#x27;s still valid, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245120' id='478640'>
<a class='timestamp' href='#478640'><time timestamp='2016-07-11T13:52:00Z'>13:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we can&#x27;t know that without reorg
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245120' id='478641'>
<a class='timestamp' href='#478641'><time timestamp='2016-07-11T13:52:00Z'>13:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
because we need the utxo set for its parent
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245120' id='478642'>
<a class='timestamp' href='#478642'><time timestamp='2016-07-11T13:52:00Z'>13:52</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
we can know whether a block is valid in its chain without knowing whether it belongs to the &quot;longest&quot; chain or not, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245120' id='478643'>
<a class='timestamp' href='#478643'><time timestamp='2016-07-11T13:52:00Z'>13:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in theory, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245120' id='478644'>
<a class='timestamp' href='#478644'><time timestamp='2016-07-11T13:52:00Z'>13:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in practice, no
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245120' id='478645'>
<a class='timestamp' href='#478645'><time timestamp='2016-07-11T13:52:00Z'>13:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
because we don&#x27;t have its utxoset we can&#x27;t validate
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245180' id='478646'>
<a class='timestamp' href='#478646'><time timestamp='2016-07-11T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
oh, I see, we never build incompatible utxo histories
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245180' id='478647'>
<a class='timestamp' href='#478647'><time timestamp='2016-07-11T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right, we just have a single utxo set for the tip
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245240' id='478648'>
<a class='timestamp' href='#478648'><time timestamp='2016-07-11T13:54:00Z'>13:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and delay full validation until we&#x27;re forced to switch tips
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245240' id='478649'>
<a class='timestamp' href='#478649'><time timestamp='2016-07-11T13:54:00Z'>13:54</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I thought that was part of the CCoinsViewCache purpose...
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245300' id='478650'>
<a class='timestamp' href='#478650'><time timestamp='2016-07-11T13:55:00Z'>13:55</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
but I guess yeah, it doesn&#x27;t make sense to fully validate until you&#x27;re forced to reorg by the accumulated pow, storing that block is cheaper I guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245300' id='478651'>
<a class='timestamp' href='#478651'><time timestamp='2016-07-11T13:55:00Z'>13:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no, that&#x27;s just so we don&#x27;t have to write everything to disk immediately
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245300' id='478652'>
<a class='timestamp' href='#478652'><time timestamp='2016-07-11T13:55:00Z'>13:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
now, pow is the most expensive thing for an attacker
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245360' id='478653'>
<a class='timestamp' href='#478653'><time timestamp='2016-07-11T13:56:00Z'>13:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so everything that comes after pow validation and corruption checks does not matter very much
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245360' id='478654'>
<a class='timestamp' href='#478654'><time timestamp='2016-07-11T13:56:00Z'>13:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
why are you asking, btw?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245360' id='478655'>
<a class='timestamp' href='#478655'><time timestamp='2016-07-11T13:56:00Z'>13:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, i know
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245360' id='478656'>
<a class='timestamp' href='#478656'><time timestamp='2016-07-11T13:56:00Z'>13:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
iswitnessenabled depends on versionbits
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245360' id='478657'>
<a class='timestamp' href='#478657'><time timestamp='2016-07-11T13:56:00Z'>13:56</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
mhmm, why do we validate any part of a block that we don&#x27;t see as belonging to the longest chain at all?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245420' id='478658'>
<a class='timestamp' href='#478658'><time timestamp='2016-07-11T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
because we at least need to know whether it is actually the right block
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245420' id='478659'>
<a class='timestamp' href='#478659'><time timestamp='2016-07-11T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
a peer could change one transaction before relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245420' id='478660'>
<a class='timestamp' href='#478660'><time timestamp='2016-07-11T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
sipa: it was part of my latest consensus refactor branch to get rid of ContextualCheckBlock()
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245480' id='478661'>
<a class='timestamp' href='#478661'><time timestamp='2016-07-11T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and in that case we must punish the peer, but not mark the block as invalid
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245480' id='478662'>
<a class='timestamp' href='#478662'><time timestamp='2016-07-11T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so an invariant is that all blocks on disk are known to actually match the blocks whose headers we know
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245540' id='478663'>
<a class='timestamp' href='#478663'><time timestamp='2016-07-11T13:59:00Z'>13:59</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
if we know it&#x27;s not making a longer chain, why bother validating BIP113 ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245600' id='478664'>
<a class='timestamp' href='#478664'><time timestamp='2016-07-11T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
validating bip113 is not necessary i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245600' id='478665'>
<a class='timestamp' href='#478665'><time timestamp='2016-07-11T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but the segwit commitment check is
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245660' id='478666'>
<a class='timestamp' href='#478666'><time timestamp='2016-07-11T14:01:00Z'>14:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
before storing on disk
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245780' id='478667'>
<a class='timestamp' href='#478667'><time timestamp='2016-07-11T14:03:00Z'>14:03</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
that&#x27;s useful, what about the bip34 check in ContextualCheckBlock(), can it be moved out?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245840' id='478668'>
<a class='timestamp' href='#478668'><time timestamp='2016-07-11T14:04:00Z'>14:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i believe so
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245840' id='478669'>
<a class='timestamp' href='#478669'><time timestamp='2016-07-11T14:04:00Z'>14:04</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
ok, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245840' id='478670'>
<a class='timestamp' href='#478670'><time timestamp='2016-07-11T14:04:00Z'>14:04</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
but not the new segwit one, fine
<br>
</div>

<div class='talk op-msg' data-timestamp='1468245960' id='478671'>
<a class='timestamp' href='#478671'><time timestamp='2016-07-11T14:06:00Z'>14:06</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
well, I would prefer to pass the consensus validation flags instead of calling IsWitnessEnabled() from there
<br>
</div>

<div class='talk op-msg' data-timestamp='1468246080' id='478672'>
<a class='timestamp' href='#478672'><time timestamp='2016-07-11T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
but I should try to write that first before discussing it further
<br>
</div>

<div class='talk op-msg' data-timestamp='1468250640' id='478673'>
<a class='timestamp' href='#478673'><time timestamp='2016-07-11T15:24:00Z'>15:24</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
reviewers, please review some open PRs for 0.13.0: #8295, #8305, #8312
<br>
</div>

<div class='talk op-msg' data-timestamp='1468254840' id='478674'>
<a class='timestamp' href='#478674'><time timestamp='2016-07-11T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-9'> BTCking</span>&gt;
AMAZING! My bitcoin-grower is now ready. Send me some bitcoin (1btc, 2btc, etc.) and get MUCH more back INSTANTLY. This uses Block-chain explanding technology! Proven safe &amp; secure. You cannot lose. PM me to begin!!
<br>
</div>

<div class='talk op-msg' data-timestamp='1468254900' id='478675'>
<a class='timestamp' href='#478675'><time timestamp='2016-07-11T16:35:00Z'>16:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BTCking: fuck off
<br>
</div>

<div class='talk op-msg' data-timestamp='1468254900' id='478676'>
<a class='timestamp' href='#478676'><time timestamp='2016-07-11T16:35:00Z'>16:35</time></a>
&lt;<span class='nick nick-11'> * BTCking</span>&gt;
slaps sipa around a bit with a large trout
<br>
</div>

<div class='talk op-msg' data-timestamp='1468254900' id='478677'>
<a class='timestamp' href='#478677'><time timestamp='2016-07-11T16:35:00Z'>16:35</time></a>
&lt;<span class='nick nick-9'> BTCking</span>&gt;
AMAZING! My bitcoin-grower is now ready. Send me some bitcoin (1btc, 2btc, etc.) and get MUCH more back INSTANTLY. This uses Block-chain explanding technology! Proven safe &amp; secure. You cannot lose. PM me to begin!!
<br>
</div>

<div class='talk op-msg' data-timestamp='1468255620' id='478678'>
<a class='timestamp' href='#478678'><time timestamp='2016-07-11T16:47:00Z'>16:47</time></a>
&lt;<span class='nick nick-7'> GitHub65</span>&gt;
[bitcoin] jtimon opened pull request #8329: Consensus: MOVEONLY: Move functions for tx verification (master...0.12.99-consensus-moveonly-tx) <a href="https://github.com/bitcoin/bitcoin/pull/8329" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8329</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468255740' id='478679'>
<a class='timestamp' href='#478679'><time timestamp='2016-07-11T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
kanzure: ping again, still quite simple to review and re-write
<br>
</div>

<div class='talk op-msg' data-timestamp='1468260600' id='478680'>
<a class='timestamp' href='#478680'><time timestamp='2016-07-11T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-2'>@sipa</span>&gt;
sdaftuar: done
<br>
</div>

<div class='talk op-msg' data-timestamp='1468260600' id='478681'>
<a class='timestamp' href='#478681'><time timestamp='2016-07-11T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1468260780' id='478682'>
<a class='timestamp' href='#478682'><time timestamp='2016-07-11T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
github.com down?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468260900' id='478683'>
<a class='timestamp' href='#478683'><time timestamp='2016-07-11T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-7'> eragmus</span>&gt;
sipa: <a href="http://www.isup.me/github.com" class="link" target="_blank">http://www.isup.me/github.com</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468260900' id='478684'>
<a class='timestamp' href='#478684'><time timestamp='2016-07-11T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-7'> eragmus</span>&gt;
<a href="http://isitdownorjust.me/github-com/" class="link" target="_blank">http://isitdownorjust.me/github-com/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468260960' id='478685'>
<a class='timestamp' href='#478685'><time timestamp='2016-07-11T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1468260960' id='478686'>
<a class='timestamp' href='#478686'><time timestamp='2016-07-11T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it also works from my vps...
<br>
</div>

<div class='talk op-msg' data-timestamp='1468260960' id='478687'>
<a class='timestamp' href='#478687'><time timestamp='2016-07-11T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-8'> tadasv</span>&gt;
working fine for me
<br>
</div>

<div class='talk op-msg' data-timestamp='1468261980' id='478688'>
<a class='timestamp' href='#478688'><time timestamp='2016-07-11T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: maybe it doesn&#x27;t matter because its a corner case, but #8305 makes it look like it will effectively discard the dangling header-- it pushmessages a getheaders and returns, without AcceptBlockHeader or UpdateBlockAvailability.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468261980' id='478689'>
<a class='timestamp' href='#478689'><time timestamp='2016-07-11T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
oh, UpdateBlocKAvailability, hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262040' id='478690'>
<a class='timestamp' href='#478690'><time timestamp='2016-07-11T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Is the expectation that it&#x27;ll come back in via the getheaders, and that the remote end won&#x27;t do anything smart like not send it because it already did?  (I guess thats reasonable?) though the lack of updateavailablity probably means we&#x27;ll send a redundant announcement in that direction.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262100' id='478691'>
<a class='timestamp' href='#478691'><time timestamp='2016-07-11T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
well there&#x27;s no way to avoid getting the headers message back to you
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262100' id='478692'>
<a class='timestamp' href='#478692'><time timestamp='2016-07-11T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if you set hashstop equal to the hash of that header, it&#x27;ll still appear in the response
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262100' id='478693'>
<a class='timestamp' href='#478693'><time timestamp='2016-07-11T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i don&#x27;t think the remote end is allowed to not re-send, though i suppose lack of a spec makes this a difficult statement to concretely make
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262100' id='478694'>
<a class='timestamp' href='#478694'><time timestamp='2016-07-11T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but we expect the contents of a headers message to be a linear connecting chain
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262160' id='478695'>
<a class='timestamp' href='#478695'><time timestamp='2016-07-11T18:36:00Z'>18:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
K. That makes sense, I thought that was the assumption but wanted to be sure (I think it&#x27;s correct.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262220' id='478696'>
<a class='timestamp' href='#478696'><time timestamp='2016-07-11T18:37:00Z'>18:37</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i guess there could be an advantage to setting hashLastUnknownBlock if a header doesn&#x27;t connect... that would mean that if a different peer supplied the missing headers, we could download the block from the peer who made the announcement
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262220' id='478697'>
<a class='timestamp' href='#478697'><time timestamp='2016-07-11T18:37:00Z'>18:37</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but that would only matter if the peer didn&#x27;t respond to the getheaders being pushed in this patch
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262280' id='478698'>
<a class='timestamp' href='#478698'><time timestamp='2016-07-11T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so now let me ask, if I send you a header that doesn&#x27;t connect because of timestamp stupidity. And I&#x27;m your only peer. If there are two blocks in a row during the time when the prior header will be rejected... When will it start connecting again?  I&#x27;ll get the flag false on me, then it&#x27;ll never be sent to true, since all further headers I send will also not connect.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262280' id='478699'>
<a class='timestamp' href='#478699'><time timestamp='2016-07-11T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
which is a weird corner case
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262280' id='478700'>
<a class='timestamp' href='#478700'><time timestamp='2016-07-11T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
On the update front, I was mostly think in terms of not sending surpflous compact block messages.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262280' id='478701'>
<a class='timestamp' href='#478701'><time timestamp='2016-07-11T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
when you respond to the getheaders, the bit is cleared
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262340' id='478702'>
<a class='timestamp' href='#478702'><time timestamp='2016-07-11T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
;;isitdown github.com
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262340' id='478703'>
<a class='timestamp' href='#478703'><time timestamp='2016-07-11T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
github.com is up
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262400' id='478704'>
<a class='timestamp' href='#478704'><time timestamp='2016-07-11T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
and the headers will start connecting again
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262400' id='478705'>
<a class='timestamp' href='#478705'><time timestamp='2016-07-11T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
well,
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262400' id='478706'>
<a class='timestamp' href='#478706'><time timestamp='2016-07-11T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
unless the time stamp is still broken
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262400' id='478707'>
<a class='timestamp' href='#478707'><time timestamp='2016-07-11T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
hm. I was thinking that it wouldn&#x27;t be set to true if the getheaders reply also didn&#x27;t connect due to bad timestamps.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262460' id='478708'>
<a class='timestamp' href='#478708'><time timestamp='2016-07-11T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
Hi guys
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262460' id='478709'>
<a class='timestamp' href='#478709'><time timestamp='2016-07-11T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
Anybody here?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262520' id='478710'>
<a class='timestamp' href='#478710'><time timestamp='2016-07-11T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: yeah, i can&#x27;t solve the problem of a bunch of blocks in a row all being invalid to one peer but not another
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262520' id='478711'>
<a class='timestamp' href='#478711'><time timestamp='2016-07-11T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but typically, the first block is too far ahead
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262520' id='478712'>
<a class='timestamp' href='#478712'><time timestamp='2016-07-11T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
and then by the time the next block comes in, you would be able to accept both
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262520' id='478713'>
<a class='timestamp' href='#478713'><time timestamp='2016-07-11T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if you&#x27;d be willing to try
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262520' id='478714'>
<a class='timestamp' href='#478714'><time timestamp='2016-07-11T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but we have no &quot;try&quot; mechanism currently
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262580' id='478715'>
<a class='timestamp' href='#478715'><time timestamp='2016-07-11T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i guess the question is, what should we do if a peer is relaying many blocks in a row that are all actually too far in the future?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262580' id='478716'>
<a class='timestamp' href='#478716'><time timestamp='2016-07-11T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i just fall back to the current behavior of failing/disconnecting
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262700' id='478717'>
<a class='timestamp' href='#478717'><time timestamp='2016-07-11T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i did briefly think about whether it would be feasible to somehow accept headers that are too far in the future, but i&#x27;m pretty sure that&#x27;s a major rewrite to our consensus logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1468262700' id='478718'>
<a class='timestamp' href='#478718'><time timestamp='2016-07-11T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
(accept them, so that you could re-try them later)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263000' id='478719'>
<a class='timestamp' href='#478719'><time timestamp='2016-07-11T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: perhaps we could always send a getheaders if the peer is whitelisted?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263120' id='478720'>
<a class='timestamp' href='#478720'><time timestamp='2016-07-11T18:52:00Z'>18:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t think that would be an awful thing, but I don&#x27;t think it addresses the concern-- you shouldn&#x27;t only fail to fail if you have whitelisted peers.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263180' id='478721'>
<a class='timestamp' href='#478721'><time timestamp='2016-07-11T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i guess i could do the thing you imply -- actually just check to see if the headers connect, and use that to re-set the bit
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263300' id='478722'>
<a class='timestamp' href='#478722'><time timestamp='2016-07-11T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
maybe I&#x27;m misunderstanding, but that situation I&#x27;m thinking about is if you&#x27;re slow on time by a few seconds, rejected a block, then the next comes in, and it still doesn&#x27;t connect... you&#x27;re going to stop sending getheaders after that. Then no others will connect from that peer.  The time is a bit freaky, since it&#x27;s a temporary failure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263300' id='478723'>
<a class='timestamp' href='#478723'><time timestamp='2016-07-11T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yes, i agree your example is a correct one
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263300' id='478724'>
<a class='timestamp' href='#478724'><time timestamp='2016-07-11T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i&#x27;m just trying to distinguish that from an example where an attacker sends you a chain that&#x27;s far into the future
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263360' id='478725'>
<a class='timestamp' href='#478725'><time timestamp='2016-07-11T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think we award a little bit of misbehaving there. Ironically, for sync purposes it might be better to immediately disconnect: at least that will clear the flag! :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263480' id='478726'>
<a class='timestamp' href='#478726'><time timestamp='2016-07-11T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
relying on DOS disconnect to make progress is weird though, but I think thats the answer here: after some number non-connecting blocks I think you&#x27;ll disconnect the peer.  When you reconnect, the flag will be true and you&#x27;ll try to sync again.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263540' id='478727'>
<a class='timestamp' href='#478727'><time timestamp='2016-07-11T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: to prevent looping, why not store the most recent ID. And don&#x27;t getheader again if it&#x27;s the same?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263600' id='478728'>
<a class='timestamp' href='#478728'><time timestamp='2016-07-11T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
e.g. block announce, doesn&#x27;t connect, store the most recent ID and getheader. Get headers, still doesn&#x27;t connect and most recent ID is the same. Stop.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263600' id='478729'>
<a class='timestamp' href='#478729'><time timestamp='2016-07-11T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sorry, what is most recent ID?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263660' id='478730'>
<a class='timestamp' href='#478730'><time timestamp='2016-07-11T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
when the headers response comes in take the ID (hash) of the latest block in the reply. And do not keep requesting headers when that value hasn&#x27;t changed for this peer.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263720' id='478731'>
<a class='timestamp' href='#478731'><time timestamp='2016-07-11T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I announce X, X doesn&#x27;t connect. Remember X, request headers.  Headers come in, they tell you a bunch of junk ending at X. Still doesn&#x27;t connect. Stop. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263720' id='478732'>
<a class='timestamp' href='#478732'><time timestamp='2016-07-11T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: i guess i just worry about assuming too much about the broken implementations out there
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263720' id='478733'>
<a class='timestamp' href='#478733'><time timestamp='2016-07-11T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
eg maybe the peer who was sending me 160kb of junk was sending me random junk
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263840' id='478734'>
<a class='timestamp' href='#478734'><time timestamp='2016-07-11T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Well thats what misbehaving is for.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263840' id='478735'>
<a class='timestamp' href='#478735'><time timestamp='2016-07-11T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but in your example, wouldn&#x27;t that behavior result in infinite loop?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263900' id='478736'>
<a class='timestamp' href='#478736'><time timestamp='2016-07-11T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The headers reply would end with the block X, which we already had remembered, so we would stop there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263900' id='478737'>
<a class='timestamp' href='#478737'><time timestamp='2016-07-11T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
no loop. then they later announce block y, and we&#x27;d getheaders again. and hopefully connect.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263900' id='478738'>
<a class='timestamp' href='#478738'><time timestamp='2016-07-11T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So basically  one headers retry per novel header they send.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263900' id='478739'>
<a class='timestamp' href='#478739'><time timestamp='2016-07-11T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i&#x27;m specifically referring to peers that are totally broken and on initial getheaders sync, they send us 2000 headers that don&#x27;t connect
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263960' id='478740'>
<a class='timestamp' href='#478740'><time timestamp='2016-07-11T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i don&#x27;t want to assume too much about how that peer is doing that
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263960' id='478741'>
<a class='timestamp' href='#478741'><time timestamp='2016-07-11T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sure, whatever, testnet node on mainnet or whatnot.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468263960' id='478742'>
<a class='timestamp' href='#478742'><time timestamp='2016-07-11T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if getting it wrong means 160kb over and over again...
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264020' id='478743'>
<a class='timestamp' href='#478743'><time timestamp='2016-07-11T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
just don&#x27;t assume it&#x27;s malicious, since there are better ways to waste our bandwidth for malicious peers.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264080' id='478744'>
<a class='timestamp' href='#478744'><time timestamp='2016-07-11T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
well you&#x27;re suggesting we assume it&#x27;s deterministic i think.  which is hopefully true, but if it&#x27;s not, then sadness
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264080' id='478745'>
<a class='timestamp' href='#478745'><time timestamp='2016-07-11T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, indeed, and actually the 2000 limit gets in the way too.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264140' id='478746'>
<a class='timestamp' href='#478746'><time timestamp='2016-07-11T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i mean, i think in practice your suggestion probably works, i was just hoping for something more robust to accidental disaster
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264200' id='478747'>
<a class='timestamp' href='#478747'><time timestamp='2016-07-11T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
speaking of 2000, I&#x27;m not seeing how what you suggest doesn&#x27;t actually break sync.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264200' id='478748'>
<a class='timestamp' href='#478748'><time timestamp='2016-07-11T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
can i get a summary of the problem?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264260' id='478749'>
<a class='timestamp' href='#478749'><time timestamp='2016-07-11T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh nevermind last comment, I was mistaking the order.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264260' id='478750'>
<a class='timestamp' href='#478750'><time timestamp='2016-07-11T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: i noticed on testnet that i had a node that would fall out of sync, because its one peer would occasionally send a block header (using headers announcements) that was too far in the future
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264260' id='478751'>
<a class='timestamp' href='#478751'><time timestamp='2016-07-11T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(I was thinking that we&#x27;d request headers, if there was more than 2000 missing, that they sent the later headers first)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264260' id='478752'>
<a class='timestamp' href='#478752'><time timestamp='2016-07-11T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so the peer thought the header was valid, but the local node would reject
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264260' id='478753'>
<a class='timestamp' href='#478753'><time timestamp='2016-07-11T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
this is a case i had never thought of when working on the headers announcements stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264320' id='478754'>
<a class='timestamp' href='#478754'><time timestamp='2016-07-11T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
since the announcing peer doesn&#x27;t realize the recipient rejects the header, they continue to announce blocks on top of the header
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264320' id='478755'>
<a class='timestamp' href='#478755'><time timestamp='2016-07-11T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: yes, i get that
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264320' id='478756'>
<a class='timestamp' href='#478756'><time timestamp='2016-07-11T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but you have a patch for that
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264320' id='478757'>
<a class='timestamp' href='#478757'><time timestamp='2016-07-11T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
resulting in headers announcements that don&#x27;t connect for the recipient, and then eventually disconnect
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264380' id='478758'>
<a class='timestamp' href='#478758'><time timestamp='2016-07-11T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
hey guys, I want to make Bitcoin provably correct. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264380' id='478759'>
<a class='timestamp' href='#478759'><time timestamp='2016-07-11T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
oh right.  so gmaxwell wonders if we can avoid failure in the case where two blocks come in quickly, where the first block is still invalid when the second one is announced
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264380' id='478760'>
<a class='timestamp' href='#478760'><time timestamp='2016-07-11T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
my patch doesn&#x27;t address that
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264380' id='478761'>
<a class='timestamp' href='#478761'><time timestamp='2016-07-11T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
I am serious.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264380' id='478762'>
<a class='timestamp' href='#478762'><time timestamp='2016-07-11T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: you&#x27;ll need to be a bit more specific
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264380' id='478763'>
<a class='timestamp' href='#478763'><time timestamp='2016-07-11T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what part do you want to prove?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264440' id='478764'>
<a class='timestamp' href='#478764'><time timestamp='2016-07-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: and sdaftuar is concerned that relaxations will leave it in a state where its constantly requesting headers over and over again.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264440' id='478765'>
<a class='timestamp' href='#478765'><time timestamp='2016-07-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: thank you for your attention. Yeah, basically, I think bugs are still in the C++ implementation. And I want to make sure it&#x27;s absolutely correct.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264440' id='478766'>
<a class='timestamp' href='#478766'><time timestamp='2016-07-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
so there will be no bugs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264440' id='478767'>
<a class='timestamp' href='#478767'><time timestamp='2016-07-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: that implies you have a specification for correct to compare to
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264440' id='478768'>
<a class='timestamp' href='#478768'><time timestamp='2016-07-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think this could be addressed by just adding a small amount of DOS each time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264500' id='478769'>
<a class='timestamp' href='#478769'><time timestamp='2016-07-11T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Correct with respect to a specification may well be meaningless if the specification is not &quot;correct&quot; in a broader sense.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264500' id='478770'>
<a class='timestamp' href='#478770'><time timestamp='2016-07-11T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: yeah, I want to work out a formal specification as well.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264500' id='478771'>
<a class='timestamp' href='#478771'><time timestamp='2016-07-11T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: for the consensus logic, the code implementation is the specification, so it is by definition correct
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264500' id='478772'>
<a class='timestamp' href='#478772'><time timestamp='2016-07-11T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
something like mathematical theorems about the code.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264500' id='478773'>
<a class='timestamp' href='#478773'><time timestamp='2016-07-11T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: however, being able to verify that the behaviour of that code does not change between releases would be incredibly valuable
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264560' id='478774'>
<a class='timestamp' href='#478774'><time timestamp='2016-07-11T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
unfortunately, due to historical reasons mostly, the consensus code is not well separated from the rest
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264560' id='478775'>
<a class='timestamp' href='#478775'><time timestamp='2016-07-11T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: e.g. I think we could just trigger a getheaders on any header message with only a single header in it that doesn&#x27;t connect, and add a small dos penalty.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264560' id='478776'>
<a class='timestamp' href='#478776'><time timestamp='2016-07-11T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: I understand what you mean. The code, as a specification, may not be consistent with itself. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264560' id='478777'>
<a class='timestamp' href='#478777'><time timestamp='2016-07-11T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: then every new block that shows up on the network will cause us to retry to connect.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264560' id='478778'>
<a class='timestamp' href='#478778'><time timestamp='2016-07-11T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i know this sounds kind of janky, but it seems to me that a lot of this sync logic is stuff that to a human is kind of obviously stupid.  i wonder if putting in a bit of belt and suspender check on things getting stuck might make sense.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264620' id='478779'>
<a class='timestamp' href='#478779'><time timestamp='2016-07-11T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: indeed. not consistent with itself, or not consistent with other implementations/versions
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264620' id='478780'>
<a class='timestamp' href='#478780'><time timestamp='2016-07-11T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: and eventually it will either connect, or disconnect the peer.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264620' id='478781'>
<a class='timestamp' href='#478781'><time timestamp='2016-07-11T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: also, you may not want to treat bugs as part of the specification like the heartbleed bug in OpenSSL should not be part of OpenSSL.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264620' id='478782'>
<a class='timestamp' href='#478782'><time timestamp='2016-07-11T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: we have to
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264620' id='478783'>
<a class='timestamp' href='#478783'><time timestamp='2016-07-11T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
xinxi: there is a slow and arduous process of extracting the consensus code into a separate library which will make things a lot easier in the long run.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264680' id='478784'>
<a class='timestamp' href='#478784'><time timestamp='2016-07-11T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
for instance very 60 secs you clear out some state such as fLastHeadersConnected and perhaps nSyncStarted (maybe only if we&#x27;re not actively receiving headers)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264680' id='478785'>
<a class='timestamp' href='#478785'><time timestamp='2016-07-11T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i&#x27;m sure we can imagine other things that kind of get stuck
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264680' id='478786'>
<a class='timestamp' href='#478786'><time timestamp='2016-07-11T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
btcdrak: I&#x27;ve heard of that. It&#x27;s libconsensus, isn&#x27;t it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264680' id='478787'>
<a class='timestamp' href='#478787'><time timestamp='2016-07-11T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: you mean like a periodic, pick a random peer and restart our efforts to sync with it? and loudly logging that the sync state machine has failed if that accomplishes anything?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264680' id='478788'>
<a class='timestamp' href='#478788'><time timestamp='2016-07-11T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: even if we would write down a specification for the behaviour, and every one would agree that that spec is indeed the behaviour we want
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264680' id='478789'>
<a class='timestamp' href='#478789'><time timestamp='2016-07-11T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: what if we then find a bug, and the code does something slightly different?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264680' id='478790'>
<a class='timestamp' href='#478790'><time timestamp='2016-07-11T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: i think that sounds pretty good, though the DoS score should decay back down once headers that do connect are received, right?  otherwise, over a long enough period of time, you eventually disconnect your peer
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264740' id='478791'>
<a class='timestamp' href='#478791'><time timestamp='2016-07-11T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: yes something along those lines, i like the idea of loudly announcing it so we try to make stuff work in general, but that next time we miss something, hopefully it kind of autorecovers (like power cycling)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264740' id='478792'>
<a class='timestamp' href='#478792'><time timestamp='2016-07-11T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
xinxi: the problem is it&#x27;s quite disruptive to the codebase and causes everyone&#x27;s pull-requests to need rebasing so it tends to get done slowly and in bursts. yes it&#x27;s called libconsensus
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264740' id='478793'>
<a class='timestamp' href='#478793'><time timestamp='2016-07-11T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: yea, :( the whole dos score thing is kinda lame.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264740' id='478794'>
<a class='timestamp' href='#478794'><time timestamp='2016-07-11T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
btcdrak: but still, that probably reduces bugs in the consensus part, but still it does not guarantee the correctness. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264740' id='478795'>
<a class='timestamp' href='#478795'><time timestamp='2016-07-11T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: the code would have a bug, arguably. but we can&#x27;t tell everyone to change their code, so it will need to be the document that had to be changed
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264740' id='478796'>
<a class='timestamp' href='#478796'><time timestamp='2016-07-11T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I agree with that in principle. We don&#x27;t however, want to end up with a web of redundant mechenisms, potentially interacting.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264800' id='478797'>
<a class='timestamp' href='#478797'><time timestamp='2016-07-11T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: so we&#x27;ve usually said that a specification for bitcoin would be descriptive but not prescriptive... the laws of the network are those implemented by the code that people choose to run, not by an abstract descriptio 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264800' id='478798'>
<a class='timestamp' href='#478798'><time timestamp='2016-07-11T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
a bigger web you mean?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264800' id='478799'>
<a class='timestamp' href='#478799'><time timestamp='2016-07-11T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: hah
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264800' id='478800'>
<a class='timestamp' href='#478800'><time timestamp='2016-07-11T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
unfortunately some of the bugs we&#x27;ve encountered (eg that hasHeaders thing that got reverted) wouldn&#x27;t be fixed on restart either
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264800' id='478801'>
<a class='timestamp' href='#478801'><time timestamp='2016-07-11T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
for 0.14 i think we need to refactor the sync code
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264860' id='478802'>
<a class='timestamp' href='#478802'><time timestamp='2016-07-11T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-1'> * sdaftuar</span>&gt;
ducks
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264860' id='478803'>
<a class='timestamp' href='#478803'><time timestamp='2016-07-11T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
many parallel mechanisms and duplicated code
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264860' id='478804'>
<a class='timestamp' href='#478804'><time timestamp='2016-07-11T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: you could instead have a simple counter, set to zero whenever you connect, incremented on every non-connecting header response. And dos score only when it hits a threshold to avoid that effect.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264860' id='478805'>
<a class='timestamp' href='#478805'><time timestamp='2016-07-11T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no blame anywhere, but we&#x27;ve accumulated too much technical debt
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264860' id='478806'>
<a class='timestamp' href='#478806'><time timestamp='2016-07-11T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: yep that&#x27;s what i was thinking too
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264860' id='478807'>
<a class='timestamp' href='#478807'><time timestamp='2016-07-11T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: I believe thats the first sync stuck bug I&#x27;ve ever seen that wasn&#x27;t fixed on a restart.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264920' id='478808'>
<a class='timestamp' href='#478808'><time timestamp='2016-07-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think i&#x27;ve seen 0.9 nodes not be able to recover from restart
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264920' id='478809'>
<a class='timestamp' href='#478809'><time timestamp='2016-07-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: we don&#x27;t have to be like that. I was motivated by the project CompCert and SEL4. SEL4 is a OS kernel that&#x27;s proved to be 100% consistent with the specification.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264920' id='478810'>
<a class='timestamp' href='#478810'><time timestamp='2016-07-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: that implies you have a specification
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264920' id='478811'>
<a class='timestamp' href='#478811'><time timestamp='2016-07-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as i&#x27;ve said before, we can&#x27;t have one
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264920' id='478812'>
<a class='timestamp' href='#478812'><time timestamp='2016-07-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we can describe the current behaviour
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264920' id='478813'>
<a class='timestamp' href='#478813'><time timestamp='2016-07-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: well there was also the &quot;stops on too many orphans&quot; stuff between ~0.8 and 0.10.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264920' id='478814'>
<a class='timestamp' href='#478814'><time timestamp='2016-07-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and then formally prove that future code matches that behaviour
<br>
</div>

<div class='talk op-msg' data-timestamp='1468264980' id='478815'>
<a class='timestamp' href='#478815'><time timestamp='2016-07-11T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(where it would start fetching blocks backwards, run into a 750 block orphan limit then stop, but even that could recover with enough restarts)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265040' id='478816'>
<a class='timestamp' href='#478816'><time timestamp='2016-07-11T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: I just don&#x27;t understand the factor that stops us from driving a formal specification from the code.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265040' id='478817'>
<a class='timestamp' href='#478817'><time timestamp='2016-07-11T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: in any case, I think doing get headers triggered on single header responses, and counting the failures, and DOSing on too many failures... would address both our concerns here.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265100' id='478818'>
<a class='timestamp' href='#478818'><time timestamp='2016-07-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: deriving? yes, we could
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265100' id='478819'>
<a class='timestamp' href='#478819'><time timestamp='2016-07-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: sounds right to me as well.  for 0.13.0?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265100' id='478820'>
<a class='timestamp' href='#478820'><time timestamp='2016-07-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: i guess my point is that the only way to write a formal specification is by extracting it from the actually implemented and deployed code
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265100' id='478821'>
<a class='timestamp' href='#478821'><time timestamp='2016-07-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: yeah, that&#x27;s where we can start from.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265100' id='478822'>
<a class='timestamp' href='#478822'><time timestamp='2016-07-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: and not from behaviour that humans write
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265100' id='478823'>
<a class='timestamp' href='#478823'><time timestamp='2016-07-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
xinxi: the difficulty is if the code differs from the written specification the code wins. Even if you class it as a bug, changing it is extremely hard because you have to change the network consensus. There are examples where this has happened and we&#x27;ve just had to live with the bug.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265160' id='478824'>
<a class='timestamp' href='#478824'><time timestamp='2016-07-11T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yes, I think it wouldn&#x27;t be more complex than that patch you currently have. (this is also not just a testnet problem-- we&#x27;re just fortunate that miners have lately not be excessively rolling their timestamps forward...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265160' id='478825'>
<a class='timestamp' href='#478825'><time timestamp='2016-07-11T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
xinxi: the other problem is unknown bugs which we might not be aware of, rare edge cases say, are actually part of the consensus rules even if we dont know it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265160' id='478826'>
<a class='timestamp' href='#478826'><time timestamp='2016-07-11T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
ok i&#x27;ll see if i can whip up an improved patch
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265160' id='478827'>
<a class='timestamp' href='#478827'><time timestamp='2016-07-11T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
btcdrak: the kind of &quot;formal specification&quot; in the sense of SEL4 can be proven to agree with the code (effectively, the specification is at least as complex as the implementation)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265160' id='478828'>
<a class='timestamp' href='#478828'><time timestamp='2016-07-11T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
xinxi: so it&#x27;s hard to document things you dont know
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265220' id='478829'>
<a class='timestamp' href='#478829'><time timestamp='2016-07-11T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
@btcdrak those rare edge bugs can be eliminated by formal proofs I think.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265220' id='478830'>
<a class='timestamp' href='#478830'><time timestamp='2016-07-11T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
xinxi: seems like a very worthwhile pursuit though.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265220' id='478831'>
<a class='timestamp' href='#478831'><time timestamp='2016-07-11T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
so the motivation of this is to avoid catastrophic failures of Bitcoin. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265280' id='478832'>
<a class='timestamp' href='#478832'><time timestamp='2016-07-11T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: for example, for a long time, bitcoin relied on OpenSSL&#x27;s signature parsing code
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265280' id='478833'>
<a class='timestamp' href='#478833'><time timestamp='2016-07-11T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: people thought they knew what this code did
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265280' id='478834'>
<a class='timestamp' href='#478834'><time timestamp='2016-07-11T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: and reimplemented the logic in other places
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265280' id='478835'>
<a class='timestamp' href='#478835'><time timestamp='2016-07-11T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but nobody checked that what they thought actually matched what openssl was doing
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265280' id='478836'>
<a class='timestamp' href='#478836'><time timestamp='2016-07-11T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
turns out, it didn&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265340' id='478837'>
<a class='timestamp' href='#478837'><time timestamp='2016-07-11T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so now bitcoin&#x27;s &quot;specification&quot; implicitly depended on OpenSSL&#x27;s implementation
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265340' id='478838'>
<a class='timestamp' href='#478838'><time timestamp='2016-07-11T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: this kind of inconsistencies can be eliminated by formal proofs as well. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265340' id='478839'>
<a class='timestamp' href='#478839'><time timestamp='2016-07-11T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: absolutely
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265340' id='478840'>
<a class='timestamp' href='#478840'><time timestamp='2016-07-11T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: but only if they would take OpenSSL&#x27;s code into account and analyse it, and not treat it as a black box
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265400' id='478841'>
<a class='timestamp' href='#478841'><time timestamp='2016-07-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
xinxi: I&#x27;m not sure if you have a grasp of the difficulty of what you&#x27;re thinking about, go look at the size of the SEL4 kernel. I believe it&#x27;s about 4000 lines of C.  The isabelle specification for it is something like a half million lines, and though it proves many useful things about it, it falls far short of proving so much that agreement with the spec would be equivilent to correct in a hum
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265400' id='478842'>
<a class='timestamp' href='#478842'><time timestamp='2016-07-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
an sense. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265400' id='478843'>
<a class='timestamp' href='#478843'><time timestamp='2016-07-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and this cross-layer effect on consensus makes it IMHO nearly impossible
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265400' id='478844'>
<a class='timestamp' href='#478844'><time timestamp='2016-07-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
gmaxwell: it&#x27;s about 9000 lines of code.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265400' id='478845'>
<a class='timestamp' href='#478845'><time timestamp='2016-07-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i am not an expert on the state of the art of formal code proofs
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265400' id='478846'>
<a class='timestamp' href='#478846'><time timestamp='2016-07-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
xinxi: k, my figures are from memory thus approximate.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265460' id='478847'>
<a class='timestamp' href='#478847'><time timestamp='2016-07-11T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
gmaxwell: SEL4 has to guarantee high efficiency. So the code has to be written in C which is difficult to prove. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265520' id='478848'>
<a class='timestamp' href='#478848'><time timestamp='2016-07-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
xinxi: yes, and Bitcoin has to achieve high efficiency, efficiency is a security parameter for us.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265520' id='478849'>
<a class='timestamp' href='#478849'><time timestamp='2016-07-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
For Bitcoin, the programming language is not a big issue, and using languages like Coq, which enables a unified way for both coding and proofs could make it a lot easier.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265520' id='478850'>
<a class='timestamp' href='#478850'><time timestamp='2016-07-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
No. incorrect.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265520' id='478851'>
<a class='timestamp' href='#478851'><time timestamp='2016-07-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If nodes are not fast enough the system will stop converging, at some point this results in a total consensus failure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265520' id='478852'>
<a class='timestamp' href='#478852'><time timestamp='2016-07-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
I think OCaml is quite decent in terms of efficiency. Coq can generate OCaml code.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265520' id='478853'>
<a class='timestamp' href='#478853'><time timestamp='2016-07-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well we&#x27;re not going to rewrite the consensus code in another language!
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265580' id='478854'>
<a class='timestamp' href='#478854'><time timestamp='2016-07-11T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Coq can generate C code via the compcert formalization (see VST).
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265580' id='478855'>
<a class='timestamp' href='#478855'><time timestamp='2016-07-11T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
gmaxwell: here we go.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265580' id='478856'>
<a class='timestamp' href='#478856'><time timestamp='2016-07-11T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(or at least not without proving that the existing code matches the new code)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265580' id='478857'>
<a class='timestamp' href='#478857'><time timestamp='2016-07-11T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
how many lines of code are there for the consensus part?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265640' id='478858'>
<a class='timestamp' href='#478858'><time timestamp='2016-07-11T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
rewriting the consensus part is not infeasible after you separate it out.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265640' id='478859'>
<a class='timestamp' href='#478859'><time timestamp='2016-07-11T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
do you include the cryptography library? the c++ standard library? the kernel?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265640' id='478860'>
<a class='timestamp' href='#478860'><time timestamp='2016-07-11T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Far more than SEL4, the crypto part of it alone is that big.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265640' id='478861'>
<a class='timestamp' href='#478861'><time timestamp='2016-07-11T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
changes in any of those can affect consensus
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265640' id='478862'>
<a class='timestamp' href='#478862'><time timestamp='2016-07-11T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
at some point you have to make an abstraction
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265640' id='478863'>
<a class='timestamp' href='#478863'><time timestamp='2016-07-11T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
&quot;formal proofs&quot; cannot eliminate edge cases, they can only prove that the edge case exists
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265640' id='478864'>
<a class='timestamp' href='#478864'><time timestamp='2016-07-11T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: we can leave cryptography part there first. C++ is just hopeless for verification. It&#x27;s too complicated.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265700' id='478865'>
<a class='timestamp' href='#478865'><time timestamp='2016-07-11T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: then i think there is nothing we can do
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265700' id='478866'>
<a class='timestamp' href='#478866'><time timestamp='2016-07-11T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
xinxi: how are you migrating the network precisely?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265700' id='478867'>
<a class='timestamp' href='#478867'><time timestamp='2016-07-11T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
wtf?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265700' id='478868'>
<a class='timestamp' href='#478868'><time timestamp='2016-07-11T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
chill chill.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265700' id='478869'>
<a class='timestamp' href='#478869'><time timestamp='2016-07-11T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
these are intesting things to discuss
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265700' id='478870'>
<a class='timestamp' href='#478870'><time timestamp='2016-07-11T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
xinxi: I think someone wrote a libsecp256k1 for ocaml if you are serious about implementing
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265700' id='478871'>
<a class='timestamp' href='#478871'><time timestamp='2016-07-11T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
using ctypes 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265760' id='478872'>
<a class='timestamp' href='#478872'><time timestamp='2016-07-11T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Chris_Stewart_5: what if the ocaml implementation doesn&#x27;t match the C one?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265760' id='478873'>
<a class='timestamp' href='#478873'><time timestamp='2016-07-11T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we won&#x27;t know without analysing the one that is actually used
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265760' id='478874'>
<a class='timestamp' href='#478874'><time timestamp='2016-07-11T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(libsecp256k1, by the way, does have formal proofs for part of its operation)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265760' id='478875'>
<a class='timestamp' href='#478875'><time timestamp='2016-07-11T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
I mean we can separate out libconsensus first, and then use Coq to rewrite it and generate a provably correct version of libconsensus.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265760' id='478876'>
<a class='timestamp' href='#478876'><time timestamp='2016-07-11T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
xinxi: there are a lot of subtle side effects from the actual running network, but everyone in here still thinks it would be valuable to pursue formal verification anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265820' id='478877'>
<a class='timestamp' href='#478877'><time timestamp='2016-07-11T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: how will you prove that the existing libconsensus (which only does script validation, not full block validation) matches that Coq specification?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265820' id='478878'>
<a class='timestamp' href='#478878'><time timestamp='2016-07-11T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
libconsensus imho should be a priority similar to segwit
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265820' id='478879'>
<a class='timestamp' href='#478879'><time timestamp='2016-07-11T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
kanzure: i agree. but we first need a plan for what &#x27;libconsensus&#x27; means. people have been talking about it for ages, and have meant very different (and conflicting) things with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265880' id='478880'>
<a class='timestamp' href='#478880'><time timestamp='2016-07-11T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: we don&#x27;t prove the existing libconsensus. We derive the formal specification based on the existing libconsensus, and then write another libconsensus in Coq.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265880' id='478881'>
<a class='timestamp' href='#478881'><time timestamp='2016-07-11T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
sipa: maybe we can hijack the milan conference for these purposes (scaling bitcoin 3)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265880' id='478882'>
<a class='timestamp' href='#478882'><time timestamp='2016-07-11T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-5'> GitHub72</span>&gt;
[bitcoin] JeremyRubin opened pull request #8330: WIP: Structure Packing Optimizations in CTransaction and CTxMemPoolEntry (master...structurepacking) <a href="https://github.com/bitcoin/bitcoin/pull/8330" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8330</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265880' id='478883'>
<a class='timestamp' href='#478883'><time timestamp='2016-07-11T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
sipa: It just binds to the C library, so unless there is a bug in ctypes you should be ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265880' id='478884'>
<a class='timestamp' href='#478884'><time timestamp='2016-07-11T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: does you derivation prove that the specification matches the current libconsensus?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265940' id='478885'>
<a class='timestamp' href='#478885'><time timestamp='2016-07-11T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sorry; does you derivation result in a specification that provably captures the current behaviour?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265940' id='478886'>
<a class='timestamp' href='#478886'><time timestamp='2016-07-11T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: no. do they have to match exactly? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265940' id='478887'>
<a class='timestamp' href='#478887'><time timestamp='2016-07-11T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Yes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265940' id='478888'>
<a class='timestamp' href='#478888'><time timestamp='2016-07-11T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
we just take off there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468265940' id='478889'>
<a class='timestamp' href='#478889'><time timestamp='2016-07-11T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
can coq do outputs re: &quot;behavior is definitely undefined here&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266000' id='478890'>
<a class='timestamp' href='#478890'><time timestamp='2016-07-11T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: the specification for the network is the actually deployed code
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266000' id='478891'>
<a class='timestamp' href='#478891'><time timestamp='2016-07-11T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
any divergence from it can result in a network fork
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266000' id='478892'>
<a class='timestamp' href='#478892'><time timestamp='2016-07-11T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: I think there can be slight difference? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266000' id='478893'>
<a class='timestamp' href='#478893'><time timestamp='2016-07-11T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: such as?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266000' id='478894'>
<a class='timestamp' href='#478894'><time timestamp='2016-07-11T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you can&#x27;t describe the current code exactly, we&#x27;re done
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266000' id='478895'>
<a class='timestamp' href='#478895'><time timestamp='2016-07-11T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
once you announce a difference, soeone will probably try to trigger those circumstances anyway :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266060' id='478896'>
<a class='timestamp' href='#478896'><time timestamp='2016-07-11T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we won&#x27;t rewrite the consensus layer in another language without certainty that it does not introduce any changes compared to the current code
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266120' id='478897'>
<a class='timestamp' href='#478897'><time timestamp='2016-07-11T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
have you guys talked about this before?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266120' id='478898'>
<a class='timestamp' href='#478898'><time timestamp='2016-07-11T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
endlessly
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266120' id='478899'>
<a class='timestamp' href='#478899'><time timestamp='2016-07-11T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266120' id='478900'>
<a class='timestamp' href='#478900'><time timestamp='2016-07-11T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
many times?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266120' id='478901'>
<a class='timestamp' href='#478901'><time timestamp='2016-07-11T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: i don&#x27;t think you&#x27;re understanding what i&#x27;m saying
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266120' id='478902'>
<a class='timestamp' href='#478902'><time timestamp='2016-07-11T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we do not prescribe the rules of the network
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266120' id='478903'>
<a class='timestamp' href='#478903'><time timestamp='2016-07-11T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
xinxi: there is high interest in our community in formal verification and libconsensus and coq.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266180' id='478904'>
<a class='timestamp' href='#478904'><time timestamp='2016-07-11T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
^^^
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266180' id='478905'>
<a class='timestamp' href='#478905'><time timestamp='2016-07-11T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
sipa: along with the pragmatic requirement that the new language have a sufficiently large community of programmers to be maintainable - unusual languages don&#x27;t need that criteria
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266180' id='478906'>
<a class='timestamp' href='#478906'><time timestamp='2016-07-11T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
petertodd: agree, but i wasn&#x27;t going to bring that up
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266180' id='478907'>
<a class='timestamp' href='#478907'><time timestamp='2016-07-11T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the first point is that our compatibility concerns are way beyond almost any other system
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266240' id='478908'>
<a class='timestamp' href='#478908'><time timestamp='2016-07-11T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
@petertodd that may not be a problem. Later the code will be proof driven. And the core team writes the specification, and the committers need to prove the correctness of their code, which makes them impossible to make any mistakes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266240' id='478909'>
<a class='timestamp' href='#478909'><time timestamp='2016-07-11T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
xinxi: this seems like something you would like to work on?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266240' id='478910'>
<a class='timestamp' href='#478910'><time timestamp='2016-07-11T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: i&#x27;m getting annoyed
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266240' id='478911'>
<a class='timestamp' href='#478911'><time timestamp='2016-07-11T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: the core team does not write the specification
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266300' id='478912'>
<a class='timestamp' href='#478912'><time timestamp='2016-07-11T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
@kanzure yes, it is. And two professors in my school, i.e. National University of Singapore, are willing to work in it as well. They are experts on software verification.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266300' id='478913'>
<a class='timestamp' href='#478913'><time timestamp='2016-07-11T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
...and the specification will change over time as new features are soft-forked in, and specification flaws are fixed
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266300' id='478914'>
<a class='timestamp' href='#478914'><time timestamp='2016-07-11T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: that&#x27;s very interesting
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266300' id='478915'>
<a class='timestamp' href='#478915'><time timestamp='2016-07-11T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
and we may have big funding support.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266300' id='478916'>
<a class='timestamp' href='#478916'><time timestamp='2016-07-11T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
the purpose is simple. we want to make bitcoin reliable.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266360' id='478917'>
<a class='timestamp' href='#478917'><time timestamp='2016-07-11T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: but i first want to understand why you say &quot;&lt; xinxi&gt; sipa: I think there can be slight difference?&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266360' id='478918'>
<a class='timestamp' href='#478918'><time timestamp='2016-07-11T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
petertodd: Specifications can be changed overtime, and theoretically the proofs should reflect those changes
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266360' id='478919'>
<a class='timestamp' href='#478919'><time timestamp='2016-07-11T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
the impact could be huge.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266360' id='478920'>
<a class='timestamp' href='#478920'><time timestamp='2016-07-11T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
xinxi: there are many bitcoin developers who want that as well. i think you could easily find collaborators from this conversation.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266360' id='478921'>
<a class='timestamp' href='#478921'><time timestamp='2016-07-11T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: it&#x27;s not going to be huge - the reliability of the consensus specification/implementation hasn&#x27;t been a major problem for bitcoin - other problems are far higher-impact (scaling)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266420' id='478922'>
<a class='timestamp' href='#478922'><time timestamp='2016-07-11T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: I&#x27;d suggest you focus your efforts on smart-contract use-cases, where specification flaws have been a huge problem (ethereum dao)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266420' id='478923'>
<a class='timestamp' href='#478923'><time timestamp='2016-07-11T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hey
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266420' id='478924'>
<a class='timestamp' href='#478924'><time timestamp='2016-07-11T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
petertodd: nooo we do need some people thinking about libconsensus things
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266420' id='478925'>
<a class='timestamp' href='#478925'><time timestamp='2016-07-11T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
petertodd: I think we are just lucky that Bitcoin has not yet experienced any catastrophic attacks? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266420' id='478926'>
<a class='timestamp' href='#478926'><time timestamp='2016-07-11T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
petertodd: I disagree, the consensus layer is the bedrock of bitcoin, if we screw that up in a major way we are done
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266480' id='478927'>
<a class='timestamp' href='#478927'><time timestamp='2016-07-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
smart contract stuff is already getting formal verification attention, i woudn&#x27;t worry about that, it was fairly high profile and papers have been published already
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266480' id='478928'>
<a class='timestamp' href='#478928'><time timestamp='2016-07-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
kanzure: I&#x27;m not saying we don&#x27;t, it&#x27;s just that from the point of view of a researcher, they&#x27;re going to get better return on their time by doing other things
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266480' id='478929'>
<a class='timestamp' href='#478929'><time timestamp='2016-07-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
disagree
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266480' id='478930'>
<a class='timestamp' href='#478930'><time timestamp='2016-07-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
petertodd: not all researchers work for papers.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266480' id='478931'>
<a class='timestamp' href='#478931'><time timestamp='2016-07-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: it&#x27;s not luck... it&#x27;s how we make changes - turns out that intense review works
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266480' id='478932'>
<a class='timestamp' href='#478932'><time timestamp='2016-07-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
impact is much more important.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266480' id='478933'>
<a class='timestamp' href='#478933'><time timestamp='2016-07-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
petertodd: Until it doesn&#x27;t 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266540' id='478934'>
<a class='timestamp' href='#478934'><time timestamp='2016-07-11T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Bitcoin has already had issues with this in the past 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266540' id='478935'>
<a class='timestamp' href='#478935'><time timestamp='2016-07-11T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
petertodd: OpenSSL has been used by so many people. Still it has serious bugs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266540' id='478936'>
<a class='timestamp' href='#478936'><time timestamp='2016-07-11T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Bip66 (or was it 62) comes to mind
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266540' id='478937'>
<a class='timestamp' href='#478937'><time timestamp='2016-07-11T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how many consensus failures in bitcoin can you name? :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266540' id='478938'>
<a class='timestamp' href='#478938'><time timestamp='2016-07-11T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, that&#x27;s one
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266540' id='478939'>
<a class='timestamp' href='#478939'><time timestamp='2016-07-11T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the march 2013 fork was another one
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266540' id='478940'>
<a class='timestamp' href='#478940'><time timestamp='2016-07-11T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
xinxi: you should probably also have a conversation with jtimon (who just pinged out). he&#x27;s going a lot of the libconsensus stuff.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266600' id='478941'>
<a class='timestamp' href='#478941'><time timestamp='2016-07-11T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
Chris_Stewart_5: there&#x27;s no reason to think yet that formal proofs actually do any better in practice, because the pool of talent that can work on them is much smaller
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266600' id='478942'>
<a class='timestamp' href='#478942'><time timestamp='2016-07-11T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and bitcoin&#x27;s scripting language before the removal of OP_VER was also a consensus problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266600' id='478943'>
<a class='timestamp' href='#478943'><time timestamp='2016-07-11T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t know of any others tbh
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266600' id='478944'>
<a class='timestamp' href='#478944'><time timestamp='2016-07-11T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: indeed, which is why OpenSSL got replaced by libsecp256k1
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266600' id='478945'>
<a class='timestamp' href='#478945'><time timestamp='2016-07-11T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
OP_VER was in 2010
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266600' id='478946'>
<a class='timestamp' href='#478946'><time timestamp='2016-07-11T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and all the others were due to supporting libraries
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266600' id='478947'>
<a class='timestamp' href='#478947'><time timestamp='2016-07-11T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-July/009697.html" class="link" target="_blank">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-July/009697.html</a> &lt;- read that
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266660' id='478948'>
<a class='timestamp' href='#478948'><time timestamp='2016-07-11T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
btcdrak: Yeah some one mentioned him to me. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266660' id='478949'>
<a class='timestamp' href='#478949'><time timestamp='2016-07-11T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(shameless plug)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266660' id='478950'>
<a class='timestamp' href='#478950'><time timestamp='2016-07-11T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: it gives you an idea of how complicated it was to find some of the actually known consensus failures in bitcoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266660' id='478951'>
<a class='timestamp' href='#478951'><time timestamp='2016-07-11T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the fact that no easier ones have been found may give an indication
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266720' id='478952'>
<a class='timestamp' href='#478952'><time timestamp='2016-07-11T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
petertodd: I think there actually has been some considerable interest in the formal verification community in bitcoin. I&#x27;ve talked to a handful of researchers myself and I don&#x27;t think directing them away from the core protocol is a good idea
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266720' id='478953'>
<a class='timestamp' href='#478953'><time timestamp='2016-07-11T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
I mean the provably correct version of libconsensus may not be consistent with the existing one. The most serious result would be a hard fork, rigth?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266720' id='478954'>
<a class='timestamp' href='#478954'><time timestamp='2016-07-11T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
But after that, we will take off. And Bitcoin will be much more secure than before.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266720' id='478955'>
<a class='timestamp' href='#478955'><time timestamp='2016-07-11T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: but we&#x27;ll need a hard fork to get there?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266780' id='478956'>
<a class='timestamp' href='#478956'><time timestamp='2016-07-11T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
if the provably correct version is done, is it worth to have a hard fork?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266780' id='478957'>
<a class='timestamp' href='#478957'><time timestamp='2016-07-11T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266780' id='478958'>
<a class='timestamp' href='#478958'><time timestamp='2016-07-11T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
Chris_Stewart_5: I&#x27;m not saying there isn&#x27;t interest, I&#x27;m saying that if you want to make a high impact with formal verification deployed in production, Bitcoin isn&#x27;t interesting because the risks of deploying formal verification in production are higher than the theoretical benefits
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266780' id='478959'>
<a class='timestamp' href='#478959'><time timestamp='2016-07-11T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: but there are requirements beyond just correctness
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266840' id='478960'>
<a class='timestamp' href='#478960'><time timestamp='2016-07-11T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
Chris_Stewart_5: whereas with smart-contract systems, the risks of the existing approaches are known to be very high - likely too high to be practical - so the risks of alternate approaches are less in comparison
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266840' id='478961'>
<a class='timestamp' href='#478961'><time timestamp='2016-07-11T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: such as performance, and ease of maintenance
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266840' id='478962'>
<a class='timestamp' href='#478962'><time timestamp='2016-07-11T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
xinxi: there are other things than correctness which can cause consensus failure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266840' id='478963'>
<a class='timestamp' href='#478963'><time timestamp='2016-07-11T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
petertodd: sorry, peter, I think current smart contract platforms are trying to solve some hypothetical problems. But this is a bit irrelevant. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266900' id='478964'>
<a class='timestamp' href='#478964'><time timestamp='2016-07-11T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: speaking of performance, will your formal verification techniques be able to guarantee bounds on execution time/space?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266900' id='478965'>
<a class='timestamp' href='#478965'><time timestamp='2016-07-11T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
is jl2012 in singapore?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266900' id='478966'>
<a class='timestamp' href='#478966'><time timestamp='2016-07-11T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
hk
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266900' id='478967'>
<a class='timestamp' href='#478967'><time timestamp='2016-07-11T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
damn
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266900' id='478968'>
<a class='timestamp' href='#478968'><time timestamp='2016-07-11T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jl2012 is in hong kong
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266900' id='478969'>
<a class='timestamp' href='#478969'><time timestamp='2016-07-11T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what petertodd said
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266960' id='478970'>
<a class='timestamp' href='#478970'><time timestamp='2016-07-11T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: <b>*ethereum*</b> is trying to solve a hypothetical problem; systems like R3&#x27;s Corda are solving very real problems. Yes, they may be problems in centralized systems, but that doesn&#x27;t make those problems any less real.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266960' id='478971'>
<a class='timestamp' href='#478971'><time timestamp='2016-07-11T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think proving time and space bounds (ideally on the current code!) is probably more useful in practice than a formal specification (which i expect to be much more complicated than you expect, if it is to have production value)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468266960' id='478972'>
<a class='timestamp' href='#478972'><time timestamp='2016-07-11T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
petertodd: I think most smart contracts should run on AWS. That&#x27;s much more efficient and easy to use.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267020' id='478973'>
<a class='timestamp' href='#478973'><time timestamp='2016-07-11T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: why do we need to prove time and space bounds? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267020' id='478974'>
<a class='timestamp' href='#478974'><time timestamp='2016-07-11T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: smart contracts are about verification, not computation; &quot;should run on AWS&quot; makes no sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267080' id='478975'>
<a class='timestamp' href='#478975'><time timestamp='2016-07-11T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: because if an attack exists that can make validation slow on some nodes, you can take advantage of that (a miner could knock out competition, or get a propagation advantage)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267080' id='478976'>
<a class='timestamp' href='#478976'><time timestamp='2016-07-11T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: if you exceed the time/space bounds allowed by the actual implementation, the system fails to reach consensus
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267080' id='478977'>
<a class='timestamp' href='#478977'><time timestamp='2016-07-11T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: if an attack exists that can make memory grow unbounded, you can knock out validation
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267080' id='478978'>
<a class='timestamp' href='#478978'><time timestamp='2016-07-11T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: in fact, it&#x27;s fair to say that much of the current development effort is ultimately about making the upper-bound time cost of a block lower
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267080' id='478979'>
<a class='timestamp' href='#478979'><time timestamp='2016-07-11T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: for bitcoin&#x27;s security assumptions to hold, verification of blocks must be negligable in time compared to the block production rate
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267140' id='478980'>
<a class='timestamp' href='#478980'><time timestamp='2016-07-11T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: that sounds like the scalability issues that you guys are trying to solve.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267200' id='478981'>
<a class='timestamp' href='#478981'><time timestamp='2016-07-11T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, it&#x27;s much more a problem today than fear of consensus failure
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267260' id='478982'>
<a class='timestamp' href='#478982'><time timestamp='2016-07-11T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
petertodd: a simpler way to do smart contracts is to have trustworthy organization to run a platform on AWS and then people can run their smart contracts on the platform. It&#x27;s scalable, efficient, and can also be verified.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267320' id='478983'>
<a class='timestamp' href='#478983'><time timestamp='2016-07-11T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: the whole point of smart contracts in banking is to get away from that model
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267320' id='478984'>
<a class='timestamp' href='#478984'><time timestamp='2016-07-11T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
xinxi: but we are interested in decentralised systems; there&#x27;s special about yet another centralised system.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267320' id='478985'>
<a class='timestamp' href='#478985'><time timestamp='2016-07-11T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
petertodd, xinxi: i think centralized smart contract design is a bit off topic here
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267320' id='478986'>
<a class='timestamp' href='#478986'><time timestamp='2016-07-11T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: verifying computaitons are done correctly is not easy
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267320' id='478987'>
<a class='timestamp' href='#478987'><time timestamp='2016-07-11T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
petertodd: yeah, we can use Bitcoin in that AWS based smart contract platform. It does not have to be decentralized.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267380' id='478988'>
<a class='timestamp' href='#478988'><time timestamp='2016-07-11T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
sipa: point is, I think xinxi would be much better off solving problems in that problem space first, as they&#x27;re easier to solve with more impact, and that&#x27;ll give them tools to tackle bitcoin later; misunderstandings about that problem space are indicative of serious misunderstandings with how bitcoin works
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267440' id='478989'>
<a class='timestamp' href='#478989'><time timestamp='2016-07-11T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: again, do you understand my point about verification vs. computation?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267560' id='478990'>
<a class='timestamp' href='#478990'><time timestamp='2016-07-11T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
petertodd: you are right. A third party&#x27;s platform cannot be fully trusted and thus full verification is impossible. But most people&#x27;s smart contracts don&#x27;t need that kind of strong verification.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267680' id='478991'>
<a class='timestamp' href='#478991'><time timestamp='2016-07-11T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
To me, Bitcoin is great because it is solving a real problem.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267680' id='478992'>
<a class='timestamp' href='#478992'><time timestamp='2016-07-11T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
xinxi: Having a formally verified library of smart contracts would be useful. As in any programming language you end up having design patterns, you will see the emergence of patterns in smart contracts imo
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267740' id='478993'>
<a class='timestamp' href='#478993'><time timestamp='2016-07-11T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
Chris_Stewart_5: it is truly useful in some extreme cases. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267740' id='478994'>
<a class='timestamp' href='#478994'><time timestamp='2016-07-11T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: I suspect you&#x27;re unclear as to what smart contracts even do... the sane use-cases I&#x27;m talking about, are to formalize legal contracts, allowing adherence to them to be verified - that only works because you can take the state you&#x27;re in - legally speaking - and verify that it matches the smart contracts (aka protocol definitions)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267740' id='478995'>
<a class='timestamp' href='#478995'><time timestamp='2016-07-11T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
And the biggest concern of Bitcoin to me is not the lack of functions but its security. Many people still think it is too young and not reliable enough and could fail completely and thus don&#x27;t want to adopt it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267800' id='478996'>
<a class='timestamp' href='#478996'><time timestamp='2016-07-11T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: bitcoin is exactly the same, except that on top of that, PoW allows our state to converge to a single consensus history
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267800' id='478997'>
<a class='timestamp' href='#478997'><time timestamp='2016-07-11T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: the most likely way bitcoin will fail right now is a failure of decentralization, which is very closely tied to scalability
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267860' id='478998'>
<a class='timestamp' href='#478998'><time timestamp='2016-07-11T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
petertodd: agree, but i still think smart contracts is off topic here.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267860' id='478999'>
<a class='timestamp' href='#478999'><time timestamp='2016-07-11T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
of the type you&#x27;re describing
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267860' id='479000'>
<a class='timestamp' href='#479000'><time timestamp='2016-07-11T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
sipa: again, I&#x27;m trying to explain to xinxi how this stuff works - not make smart contracts the topic...
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267920' id='479001'>
<a class='timestamp' href='#479001'><time timestamp='2016-07-11T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok, great
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267920' id='479002'>
<a class='timestamp' href='#479002'><time timestamp='2016-07-11T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: i think it&#x27;s unlikely that people will accept a hard fork to switch to a more formally provable consensus implementation
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267980' id='479003'>
<a class='timestamp' href='#479003'><time timestamp='2016-07-11T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
petertodd: to me, smart contracts are just contracts in code. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267980' id='479004'>
<a class='timestamp' href='#479004'><time timestamp='2016-07-11T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think you&#x27;re talking about different things
<br>
</div>

<div class='talk op-msg' data-timestamp='1468267980' id='479005'>
<a class='timestamp' href='#479005'><time timestamp='2016-07-11T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: that&#x27;s not any different from what I said... legal contracts are verification, not computation - they&#x27;re about conditions that need to be met for something to be valid - aka a protocol specification
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268040' id='479006'>
<a class='timestamp' href='#479006'><time timestamp='2016-07-11T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: equally, the definition of the bitcoin protocol is what the bitcoin implementation accepts as valid - the fact the code that does that is somewhat intermixed with code that records state is just a historical mistake
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268040' id='479007'>
<a class='timestamp' href='#479007'><time timestamp='2016-07-11T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
yeah, a coded contracts can be run on AWS and still legally binding. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268100' id='479008'>
<a class='timestamp' href='#479008'><time timestamp='2016-07-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
you just write the legal part in terms of conditions. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268100' id='479009'>
<a class='timestamp' href='#479009'><time timestamp='2016-07-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: but if it has very clear benefits (like performance/resource bounds), is easy to work with... maybe, but that&#x27;s not something for us to decide
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268100' id='479010'>
<a class='timestamp' href='#479010'><time timestamp='2016-07-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
xinxi: in this space smart contracts are self enforcing contract
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268100' id='479011'>
<a class='timestamp' href='#479011'><time timestamp='2016-07-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: i don&#x27;t think people should ever expect a future hard forking change to succeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268100' id='479012'>
<a class='timestamp' href='#479012'><time timestamp='2016-07-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: why do you keep saying AWS here? that&#x27;s completely missing the point: what you want is to be able to show to someone else (e.g a judge, but hopefully it doesn&#x27;t go that far) that the smart contract hasn&#x27;t been upheld
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268160' id='479013'>
<a class='timestamp' href='#479013'><time timestamp='2016-07-11T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: so imho for formal verification to be practical in the short term, it has to be about the currently deployed code
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268160' id='479014'>
<a class='timestamp' href='#479014'><time timestamp='2016-07-11T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
btcdrak: self-enforcing because of the underlying proof-of-work layers ensuring consensus, and the fact that people widely choose to accept the outputs of the system - bitcoin being a perfect - albeit inflexible - example
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268160' id='479015'>
<a class='timestamp' href='#479015'><time timestamp='2016-07-11T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
My point is current smart contract platforms are mostly solving hypothetical problems.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268160' id='479016'>
<a class='timestamp' href='#479016'><time timestamp='2016-07-11T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
sipa: yeah, pragmatically speaking, replacing the entire codebase in a hardfork is going to be incredibly controversial at best
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268160' id='479017'>
<a class='timestamp' href='#479017'><time timestamp='2016-07-11T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
petertodd: indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268220' id='479018'>
<a class='timestamp' href='#479018'><time timestamp='2016-07-11T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
petertodd, xinxi: again, please take that discussion elsewhere. yes, there is some overlap that is relevant here. but discussion about what problems smart contracts are solving is not
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268220' id='479019'>
<a class='timestamp' href='#479019'><time timestamp='2016-07-11T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
sipa: ack
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268220' id='479020'>
<a class='timestamp' href='#479020'><time timestamp='2016-07-11T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: yeah. My focus is still formal verification.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268280' id='479021'>
<a class='timestamp' href='#479021'><time timestamp='2016-07-11T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268280' id='479022'>
<a class='timestamp' href='#479022'><time timestamp='2016-07-11T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: have you read my BIP66 writeup above?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268280' id='479023'>
<a class='timestamp' href='#479023'><time timestamp='2016-07-11T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
So you are Pieter? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268280' id='479024'>
<a class='timestamp' href='#479024'><time timestamp='2016-07-11T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268340' id='479025'>
<a class='timestamp' href='#479025'><time timestamp='2016-07-11T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
cool
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268340' id='479026'>
<a class='timestamp' href='#479026'><time timestamp='2016-07-11T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think it is useful to illustrate the difficulty of consensus problems
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268340' id='479027'>
<a class='timestamp' href='#479027'><time timestamp='2016-07-11T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
of finding
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268340' id='479028'>
<a class='timestamp' href='#479028'><time timestamp='2016-07-11T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
btcdrak: bitcoincore.org/en/team/ is lacking usernames
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268400' id='479029'>
<a class='timestamp' href='#479029'><time timestamp='2016-07-11T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
kanzure: really could do with a bio page. people&#x27;s user handles are not always consistent across platforms
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268460' id='479030'>
<a class='timestamp' href='#479030'><time timestamp='2016-07-11T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: please let met read it first. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268460' id='479031'>
<a class='timestamp' href='#479031'><time timestamp='2016-07-11T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
xinxi: we&#x27;ll, lets continue the discussion in another hour or two after you read it :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268460' id='479032'>
<a class='timestamp' href='#479032'><time timestamp='2016-07-11T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-7'> petertodd</span>&gt;
bbl!
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268580' id='479033'>
<a class='timestamp' href='#479033'><time timestamp='2016-07-11T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: (i&#x27;ll only mention this once): bitcoin core&#x27;s cryptography library (libsecp256k1) does have some modest attempts at formally verifying pieces of the code, and help there would also be very welcome. It&#x27;s much less ambitious than proving properties about bitcoin&#x27;s consensus code, but also much easier to accomplish something in my opinion
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268580' id='479034'>
<a class='timestamp' href='#479034'><time timestamp='2016-07-11T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
sipa: don&#x27;t you guys have that libsecp256k1 paper at some point? :D
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268580' id='479035'>
<a class='timestamp' href='#479035'><time timestamp='2016-07-11T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
kanzure: at some point.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268640' id='479036'>
<a class='timestamp' href='#479036'><time timestamp='2016-07-11T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
xinxi: see <a href="https://github.com/bitcoin-core/secp256k1" class="link" target="_blank">https://github.com/bitcoin-core/secp256k1</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268700' id='479037'>
<a class='timestamp' href='#479037'><time timestamp='2016-07-11T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
btcdrak: thanks. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268700' id='479038'>
<a class='timestamp' href='#479038'><time timestamp='2016-07-11T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: that&#x27;s understandable. It takes huge amount of money to get started.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468268820' id='479039'>
<a class='timestamp' href='#479039'><time timestamp='2016-07-11T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
also, #secp256k1 for that
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269060' id='479040'>
<a class='timestamp' href='#479040'><time timestamp='2016-07-11T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
sipa: I just read the email, however the hard fork last July wasn&#x27;t related to the implementation of BIP66 , it was just spv mining correct? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269120' id='479041'>
<a class='timestamp' href='#479041'><time timestamp='2016-07-11T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that was not a hard fork
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269120' id='479042'>
<a class='timestamp' href='#479042'><time timestamp='2016-07-11T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just miners creating invalid blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269120' id='479043'>
<a class='timestamp' href='#479043'><time timestamp='2016-07-11T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and it triggered when bip65 activated
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269120' id='479044'>
<a class='timestamp' href='#479044'><time timestamp='2016-07-11T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not bip66, which was a year earlier
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269300' id='479045'>
<a class='timestamp' href='#479045'><time timestamp='2016-07-11T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Seems that OP_CLTV was activated ~7 months ago?
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269300' id='479046'>
<a class='timestamp' href='#479046'><time timestamp='2016-07-11T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
I distinctly remember the issue being July 4th of last year
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269300' id='479047'>
<a class='timestamp' href='#479047'><time timestamp='2016-07-11T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
yes, he means BIP66
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269300' id='479048'>
<a class='timestamp' href='#479048'><time timestamp='2016-07-11T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
oh ok 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269360' id='479049'>
<a class='timestamp' href='#479049'><time timestamp='2016-07-11T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, i&#x27;m misremembering
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269360' id='479050'>
<a class='timestamp' href='#479050'><time timestamp='2016-07-11T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
CLTV went without a hitch.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269360' id='479051'>
<a class='timestamp' href='#479051'><time timestamp='2016-07-11T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
apologies
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269360' id='479052'>
<a class='timestamp' href='#479052'><time timestamp='2016-07-11T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
np
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269360' id='479053'>
<a class='timestamp' href='#479053'><time timestamp='2016-07-11T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
I dont know, I think we must give a punishment.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269480' id='479054'>
<a class='timestamp' href='#479054'><time timestamp='2016-07-11T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Seven more years of reading openssl! 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269480' id='479055'>
<a class='timestamp' href='#479055'><time timestamp='2016-07-11T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
too harsh. maybe no computer! and go to bed early!
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269960' id='479056'>
<a class='timestamp' href='#479056'><time timestamp='2016-07-11T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hah
<br>
</div>

<div class='talk op-msg' data-timestamp='1468269960' id='479057'>
<a class='timestamp' href='#479057'><time timestamp='2016-07-11T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: so you wrote most of secp256k1? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270080' id='479058'>
<a class='timestamp' href='#479058'><time timestamp='2016-07-11T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
The email seems fantastic. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270080' id='479059'>
<a class='timestamp' href='#479059'><time timestamp='2016-07-11T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
It&#x27;s truly a tough journey. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270140' id='479060'>
<a class='timestamp' href='#479060'><time timestamp='2016-07-11T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: i started it; most of the fancier optimizations and verifications/tests were proposed or implemented by others
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270620' id='479061'>
<a class='timestamp' href='#479061'><time timestamp='2016-07-11T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: that&#x27;s interesting. I saw it&#x27;s written in C intead of C++. I thought you deliberately did that for verification? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270680' id='479062'>
<a class='timestamp' href='#479062'><time timestamp='2016-07-11T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
xinxi: it started as C++, actually, but gmaxwell suggested converting it to C to aide with formal verification
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270680' id='479063'>
<a class='timestamp' href='#479063'><time timestamp='2016-07-11T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as there are more analysis tools available for C than C++
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270680' id='479064'>
<a class='timestamp' href='#479064'><time timestamp='2016-07-11T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
this was very early on
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270680' id='479065'>
<a class='timestamp' href='#479065'><time timestamp='2016-07-11T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: fantastic! I am so glad to see it&#x27;s formally verified!
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270740' id='479066'>
<a class='timestamp' href='#479066'><time timestamp='2016-07-11T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i wouldn&#x27;t say it&#x27;s formally verified
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270740' id='479067'>
<a class='timestamp' href='#479067'><time timestamp='2016-07-11T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just some pieces
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270740' id='479068'>
<a class='timestamp' href='#479068'><time timestamp='2016-07-11T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
C++ is just too complicated to verify. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270740' id='479069'>
<a class='timestamp' href='#479069'><time timestamp='2016-07-11T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i can discuss more on #secp256k1
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270740' id='479070'>
<a class='timestamp' href='#479070'><time timestamp='2016-07-11T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
Is it a channel? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270740' id='479071'>
<a class='timestamp' href='#479071'><time timestamp='2016-07-11T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1468270740' id='479072'>
<a class='timestamp' href='#479072'><time timestamp='2016-07-11T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: let&#x27;s talk there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1468276500' id='479073'>
<a class='timestamp' href='#479073'><time timestamp='2016-07-11T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-3'> GitHub44</span>&gt;
[bitcoin] dooglus opened pull request #8331: Fix three &#x27;comparison between signed and unsigned integer expressions&#x27; warnings. (master...fix-compilation-warnings) <a href="https://github.com/bitcoin/bitcoin/pull/8331" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8331</a>
<br>
</div>

</div>
</section>

</body>
</html>
