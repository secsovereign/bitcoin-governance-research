<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-10-05
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-10-05' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:23 UTC</pre>
<pre><a href="/bitcoin-core-dev/2017-09-05">&lt;</a><span class='header'>   October 2017   </span><a href="/bitcoin-core-dev/2017-11-05">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2017-10-01">1</a>  <a class="" href="/bitcoin-core-dev/2017-10-02">2</a>  <a class="" href="/bitcoin-core-dev/2017-10-03">3</a>  <a class="" href="/bitcoin-core-dev/2017-10-04">4</a>  <a class="current" href="/bitcoin-core-dev/2017-10-05">5</a>  <a class="" href="/bitcoin-core-dev/2017-10-06">6</a>  <a class="" href="/bitcoin-core-dev/2017-10-07">7</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-10-08">8</a>  <a class="" href="/bitcoin-core-dev/2017-10-09">9</a> <a class="" href="/bitcoin-core-dev/2017-10-10">10</a> <a class="" href="/bitcoin-core-dev/2017-10-11">11</a> <a class="" href="/bitcoin-core-dev/2017-10-12">12</a> <a class="" href="/bitcoin-core-dev/2017-10-13">13</a> <a class="" href="/bitcoin-core-dev/2017-10-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-10-15">15</a> <a class="" href="/bitcoin-core-dev/2017-10-16">16</a> <a class="" href="/bitcoin-core-dev/2017-10-17">17</a> <a class="" href="/bitcoin-core-dev/2017-10-18">18</a> <a class="" href="/bitcoin-core-dev/2017-10-19">19</a> <a class="" href="/bitcoin-core-dev/2017-10-20">20</a> <a class="" href="/bitcoin-core-dev/2017-10-21">21</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-10-22">22</a> <a class="" href="/bitcoin-core-dev/2017-10-23">23</a> <a class="" href="/bitcoin-core-dev/2017-10-24">24</a> <a class="" href="/bitcoin-core-dev/2017-10-25">25</a> <a class="" href="/bitcoin-core-dev/2017-10-26">26</a> <a class="" href="/bitcoin-core-dev/2017-10-27">27</a> <a class="" href="/bitcoin-core-dev/2017-10-28">28</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-10-29">29</a> <a class="" href="/bitcoin-core-dev/2017-10-30">30</a> <a class="" href="/bitcoin-core-dev/2017-10-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1507174560' id='573864'>
<a class='timestamp' href='#573864'><time timestamp='2017-10-05T03:36:00Z'>03:36</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli closed pull request #10517: Factor out CCoinsView based AreInputsStandard/IsWitnessStandard (master...2017/06/policy_compile) <a href="https://github.com/bitcoin/bitcoin/pull/10517" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10517</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507174620' id='573865'>
<a class='timestamp' href='#573865'><time timestamp='2017-10-05T03:37:00Z'>03:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli closed pull request #10238: Change setKeyPool to hold flexible entries (master...2017/04/keypool_fix_a) <a href="https://github.com/bitcoin/bitcoin/pull/10238" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10238</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507176300' id='573866'>
<a class='timestamp' href='#573866'><time timestamp='2017-10-05T04:05:00Z'>04:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli closed pull request #10251: Add balances cache / GUI: use a signal instead of a poll thread (master...2017/04/gui_rm_locks) <a href="https://github.com/bitcoin/bitcoin/pull/10251" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10251</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507202520' id='573867'>
<a class='timestamp' href='#573867'><time timestamp='2017-10-05T11:22:00Z'>11:22</time></a>
&lt;<span class='nick nick-7'> sturles</span>&gt;
I have a problem with boost after upgrading to Debian 9.  I did an apt-get --reinstall install libboost-all-dev to be sure I have everything, but it still fails: <a href="https://0bin.net/paste/NjYBdILEZBChNmbI#rsDCuSOm7iKfR-UZj7ytJdxoAYMLRdB3szd43qbZmvH" class="link" target="_blank">https://0bin.net/paste/NjYBdILEZBChNmbI#rsDCuSOm7iKfR-UZj7ytJdxoAYMLRdB3szd43qbZmvH</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507202640' id='573868'>
<a class='timestamp' href='#573868'><time timestamp='2017-10-05T11:24:00Z'>11:24</time></a>
&lt;<span class='nick nick-7'> sturles</span>&gt;
Any ideas?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507208940' id='573869'>
<a class='timestamp' href='#573869'><time timestamp='2017-10-05T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 5 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/167cef8082e2...e93fff1463ae" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/167cef8082e2...e93fff1463ae</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507208940' id='573870'>
<a class='timestamp' href='#573870'><time timestamp='2017-10-05T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 58d91af MeshCollider: Fix race for mapBlockIndex in AppInitMain
<br>
</div>

<div class='talk op-msg' data-timestamp='1507208940' id='573871'>
<a class='timestamp' href='#573871'><time timestamp='2017-10-05T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 35aeabe MeshCollider: Make fReindex atomic to avoid race
<br>
</div>

<div class='talk op-msg' data-timestamp='1507208940' id='573872'>
<a class='timestamp' href='#573872'><time timestamp='2017-10-05T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 731065b MeshCollider: Consistent parameter names in txdb.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1507208940' id='573873'>
<a class='timestamp' href='#573873'><time timestamp='2017-10-05T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #11107: Fix races in AppInitMain and others with lock and atomic bools (master...fix_mapBlockIndex_race) <a href="https://github.com/bitcoin/bitcoin/pull/11107" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11107</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507215660' id='573874'>
<a class='timestamp' href='#573874'><time timestamp='2017-10-05T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-16'> deltaT</span>&gt;
simple question i hope, when i created my bitcoin core wallet i didnt write down the private key, how do i find it now?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507215960' id='573875'>
<a class='timestamp' href='#573875'><time timestamp='2017-10-05T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
deltaT: which Bitcoin Core version?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507216020' id='573876'>
<a class='timestamp' href='#573876'><time timestamp='2017-10-05T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
deltaT: did you lost you wallet.dat? file.... also, this question should be asked in #bitcoin (this here is the development channel)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507216020' id='573877'>
<a class='timestamp' href='#573877'><time timestamp='2017-10-05T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-16'> deltaT</span>&gt;
0.14.2
<br>
</div>

<div class='talk op-msg' data-timestamp='1507216020' id='573878'>
<a class='timestamp' href='#573878'><time timestamp='2017-10-05T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: #9572 looks relatively merge-able...it is consensus so if you want to ack first that&#x27;d also be nice, but its simple and has 4 already
<br>
</div>

<div class='talk op-msg' data-timestamp='1507216020' id='573879'>
<a class='timestamp' href='#573879'><time timestamp='2017-10-05T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9572" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9572</a> | Skip witness sighash cache for non-segwit transactions by jl2012 · Pull Request #9572 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1507216380' id='573880'>
<a class='timestamp' href='#573880'><time timestamp='2017-10-05T15:13:00Z'>15:13</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] mess110 opened pull request #11455: CTxMemPool::GetMinFee should not return CFeeRate(0) (master...fix_mempool_GetMinFee_bug_returning_below_minRelayTxFee) <a href="https://github.com/bitcoin/bitcoin/pull/11455" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11455</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507216680' id='573881'>
<a class='timestamp' href='#573881'><time timestamp='2017-10-05T15:18:00Z'>15:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] TheBlueMatt opened pull request #11456: Replace relevant services logic with a function suite. (master...2017-09-service-flags-cleanups) <a href="https://github.com/bitcoin/bitcoin/pull/11456" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11456</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507216800' id='573882'>
<a class='timestamp' href='#573882'><time timestamp='2017-10-05T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] mess110 closed pull request #11410: [rpc] [tests] mempoolminfee should not drop below minRelayTxFee (master...add_minrelaytxfee_to_getmempoolinfo) <a href="https://github.com/bitcoin/bitcoin/pull/11410" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11410</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507217460' id='573883'>
<a class='timestamp' href='#573883'><time timestamp='2017-10-05T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-4'> tloriato</span>&gt;
Good afternoon. I was looking into BIP45, that tries to standardize the Structure for Deterministic P2SH Multisignature Wallets, but I&#x27;ve read the emails discussing it and seems to have a little or disagreement between the need for this particular BIP. I&#x27;m wondering if there is another standard way to generate a Deterministic Multisig Wallet? I was inclined to generate a standard Mnemonic (BIP39) and split it using Shamir
<br>
</div>

<div class='talk op-msg' data-timestamp='1507217760' id='573884'>
<a class='timestamp' href='#573884'><time timestamp='2017-10-05T15:36:00Z'>15:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: did you find time to write up the segwit wallet tradeoffs between the various ways of doing it and making an argument for why your pr is your preferred version?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507217760' id='573885'>
<a class='timestamp' href='#573885'><time timestamp='2017-10-05T15:36:00Z'>15:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: I believe you said you were gonna do that last meeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1507218600' id='573886'>
<a class='timestamp' href='#573886'><time timestamp='2017-10-05T15:50:00Z'>15:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
tloriato: AFAIK BIP45 is the only &quot;standard&quot; to create multisig addresses with a set of given pubkeys.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507218600' id='573887'>
<a class='timestamp' href='#573887'><time timestamp='2017-10-05T15:50:00Z'>15:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
*extended pubkeys
<br>
</div>

<div class='talk op-msg' data-timestamp='1507218780' id='573888'>
<a class='timestamp' href='#573888'><time timestamp='2017-10-05T15:53:00Z'>15:53</time></a>
&lt;<span class='nick nick-4'> tloriato</span>&gt;
jonasschnelli: thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1507219200' id='573889'>
<a class='timestamp' href='#573889'><time timestamp='2017-10-05T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
has a super interesting C++ performance puzzle if someone wants it: <a href="https://github.com/bitcoinfibre/bitcoinfibre/blob/matts-servers/src/udprelay.cpp#L501" class="link" target="_blank">https://github.com/bitcoinfibre/bitcoinfibre/blob/matts-servers/src/udprelay.cpp#L501</a> sometimes (about once every 2nd or 3rd day&#x27;s worth of blocks) takes on the rorder of 30ms on dedicated hardware (!!!), but all it does is allocate
<br>
</div>

<div class='talk op-msg' data-timestamp='1507219200' id='573890'>
<a class='timestamp' href='#573890'><time timestamp='2017-10-05T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
nothing else does anything close
<br>
</div>

<div class='talk op-msg' data-timestamp='1507219560' id='573891'>
<a class='timestamp' href='#573891'><time timestamp='2017-10-05T16:06:00Z'>16:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/e93fff1463ae...becbd71b0c16" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/e93fff1463ae...becbd71b0c16</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507219560' id='573892'>
<a class='timestamp' href='#573892'><time timestamp='2017-10-05T16:06:00Z'>16:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 4f890ba Donal OConnor: Add new step to clean $PATH var by removing /mnt specific Window&#x27;s %PATH% paths that cause issues with the make system
<br>
</div>

<div class='talk op-msg' data-timestamp='1507219560' id='573893'>
<a class='timestamp' href='#573893'><time timestamp='2017-10-05T16:06:00Z'>16:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 696ce46 fanquake: [Docs] Update Windows build instructions for using WSL and Ubuntu 17.04
<br>
</div>

<div class='talk op-msg' data-timestamp='1507219560' id='573894'>
<a class='timestamp' href='#573894'><time timestamp='2017-10-05T16:06:00Z'>16:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master becbd71 Wladimir J. van der Laan: Merge #11437: [Docs] Update Windows build instructions for using WSL and Ubuntu 17.04...
<br>
</div>

<div class='talk op-msg' data-timestamp='1507219620' id='573895'>
<a class='timestamp' href='#573895'><time timestamp='2017-10-05T16:07:00Z'>16:07</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #11437: [Docs] Update Windows build instructions for using WSL and Ubuntu 17.04 (master...windows-build-1704) <a href="https://github.com/bitcoin/bitcoin/pull/11437" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11437</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507219680' id='573896'>
<a class='timestamp' href='#573896'><time timestamp='2017-10-05T16:08:00Z'>16:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/becbd71b0c16...9e8ef9d99179" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/becbd71b0c16...9e8ef9d99179</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507219680' id='573897'>
<a class='timestamp' href='#573897'><time timestamp='2017-10-05T16:08:00Z'>16:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master f3ba869 practicalswift: [tests] Add libFuzzer support....
<br>
</div>

<div class='talk op-msg' data-timestamp='1507219680' id='573898'>
<a class='timestamp' href='#573898'><time timestamp='2017-10-05T16:08:00Z'>16:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 9e8ef9d Wladimir J. van der Laan: Merge #10440: [tests] Add libFuzzer support...
<br>
</div>

<div class='talk op-msg' data-timestamp='1507219680' id='573899'>
<a class='timestamp' href='#573899'><time timestamp='2017-10-05T16:08:00Z'>16:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #10440: [tests] Add libFuzzer support (master...libfuzzer) <a href="https://github.com/bitcoin/bitcoin/pull/10440" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10440</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507220220' id='573900'>
<a class='timestamp' href='#573900'><time timestamp='2017-10-05T16:17:00Z'>16:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: i&#x27;ve been distracted by something else
<br>
</div>

<div class='talk op-msg' data-timestamp='1507222920' id='573901'>
<a class='timestamp' href='#573901'><time timestamp='2017-10-05T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sdaftuar closed pull request #10200: Mining: Skip recent transactions if fee difference is small (master...2017-04-dont-mine-recent-tx) <a href="https://github.com/bitcoin/bitcoin/pull/10200" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10200</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507225680' id='573902'>
<a class='timestamp' href='#573902'><time timestamp='2017-10-05T17:48:00Z'>17:48</time></a>
&lt;<span class='nick nick-2'> RealM9</span>&gt;
Hello, how long until meeting starts? At what time it starts?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507225740' id='573903'>
<a class='timestamp' href='#573903'><time timestamp='2017-10-05T17:49:00Z'>17:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
11 minutes from now
<br>
</div>

<div class='talk op-msg' data-timestamp='1507225740' id='573904'>
<a class='timestamp' href='#573904'><time timestamp='2017-10-05T17:49:00Z'>17:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sorry, 71 minutes
<br>
</div>

<div class='talk op-msg' data-timestamp='1507225800' id='573905'>
<a class='timestamp' href='#573905'><time timestamp='2017-10-05T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s at 7pm UTC
<br>
</div>

<div class='talk op-msg' data-timestamp='1507225800' id='573906'>
<a class='timestamp' href='#573906'><time timestamp='2017-10-05T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/9e8ef9d99179...17f2acedbe07" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/9e8ef9d99179...17f2acedbe07</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507225800' id='573907'>
<a class='timestamp' href='#573907'><time timestamp='2017-10-05T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 0da49b5 Johnson Lau: Skip precompute sighash for transactions without witness
<br>
</div>

<div class='talk op-msg' data-timestamp='1507225800' id='573908'>
<a class='timestamp' href='#573908'><time timestamp='2017-10-05T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 17f2ace Wladimir J. van der Laan: Merge #9572: Skip witness sighash cache for non-segwit transactions...
<br>
</div>

<div class='talk op-msg' data-timestamp='1507225800' id='573909'>
<a class='timestamp' href='#573909'><time timestamp='2017-10-05T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9572: Skip witness sighash cache for non-segwit transactions (master...nocache) <a href="https://github.com/bitcoin/bitcoin/pull/9572" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9572</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507225860' id='573910'>
<a class='timestamp' href='#573910'><time timestamp='2017-10-05T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-2'> RealM9</span>&gt;
Ok, thnx sipa
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226340' id='573911'>
<a class='timestamp' href='#573911'><time timestamp='2017-10-05T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
why do we need a vector of PrecomputedTransactionData here? <a href="https://github.com/bitcoin/bitcoin/blob/master/src/validation.cpp#L1755" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/validation.cpp#L1755</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226400' id='573912'>
<a class='timestamp' href='#573912'><time timestamp='2017-10-05T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jl2012: what alternative do you suggest?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226400' id='573913'>
<a class='timestamp' href='#573913'><time timestamp='2017-10-05T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
why couldn&#x27;t we just have a PrecomputedTransactionData for each transaction?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226400' id='573914'>
<a class='timestamp' href='#573914'><time timestamp='2017-10-05T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we do?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226400' id='573915'>
<a class='timestamp' href='#573915'><time timestamp='2017-10-05T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s just the vector that holds them
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226460' id='573916'>
<a class='timestamp' href='#573916'><time timestamp='2017-10-05T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
yes, but why need to hold them all?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226460' id='573917'>
<a class='timestamp' href='#573917'><time timestamp='2017-10-05T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
variables need to exist somewhere...
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226580' id='573918'>
<a class='timestamp' href='#573918'><time timestamp='2017-10-05T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
yes, I mean, why not just have a line PrecomputedTransactionData txdata(tx); inside the loop &quot;for (unsigned int i = 0; i &lt; block.vtx.size(); i++)&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226580' id='573919'>
<a class='timestamp' href='#573919'><time timestamp='2017-10-05T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jl2012: oh, i read &quot;why need to them <b>*at*</b> all&quot;, sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226640' id='573920'>
<a class='timestamp' href='#573920'><time timestamp='2017-10-05T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the reason is that they&#x27;re used from other threads during parallel validation
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226700' id='573921'>
<a class='timestamp' href='#573921'><time timestamp='2017-10-05T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
ok...so without the vector, each thread will re-compute the hashes once?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226760' id='573922'>
<a class='timestamp' href='#573922'><time timestamp='2017-10-05T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
depends how you do it
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226760' id='573923'>
<a class='timestamp' href='#573923'><time timestamp='2017-10-05T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you do what you suggest, you&#x27;d get undefined behaviour
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226760' id='573924'>
<a class='timestamp' href='#573924'><time timestamp='2017-10-05T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226760' id='573925'>
<a class='timestamp' href='#573925'><time timestamp='2017-10-05T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as the precomputation data would be out of scope before it&#x27;s accessed from the validation threads
<br>
</div>

<div class='talk op-msg' data-timestamp='1507226880' id='573926'>
<a class='timestamp' href='#573926'><time timestamp='2017-10-05T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
most of the validation happens after that loop exits, and before the queue&#x27;s wait call returns
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227000' id='573927'>
<a class='timestamp' href='#573927'><time timestamp='2017-10-05T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
jl2012: I have a patch that makes them shared_ptrs
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227000' id='573928'>
<a class='timestamp' href='#573928'><time timestamp='2017-10-05T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: not anymore (tx script caching) :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227000' id='573929'>
<a class='timestamp' href='#573929'><time timestamp='2017-10-05T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
conceptually, that&#x27;s what you want
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227000' id='573930'>
<a class='timestamp' href='#573930'><time timestamp='2017-10-05T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
performance wise, a vector is better
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227120' id='573931'>
<a class='timestamp' href='#573931'><time timestamp='2017-10-05T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: for the notification system, you had concerns about the reliability.. would a long poll queue that only removes elements from the queue on an ack from the client be something that would defeat your concerns?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227180' id='573932'>
<a class='timestamp' href='#573932'><time timestamp='2017-10-05T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
With that concept, loosing notifications would be very unlikely
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227180' id='573933'>
<a class='timestamp' href='#573933'><time timestamp='2017-10-05T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: ok, i reformulate - most of the validation, if it happens, happens after that loop exits
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227300' id='573934'>
<a class='timestamp' href='#573934'><time timestamp='2017-10-05T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
oh, I thought all script validation is done with CheckInputs?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227300' id='573935'>
<a class='timestamp' href='#573935'><time timestamp='2017-10-05T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jl2012: yes and no
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227360' id='573936'>
<a class='timestamp' href='#573936'><time timestamp='2017-10-05T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CheckInputs returns a vector of CScriptCheck objects, which represent validation that will happen on another thread
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227360' id='573937'>
<a class='timestamp' href='#573937'><time timestamp='2017-10-05T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
those get pushed to the checkqueue, where validation threads pick them up
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227360' id='573938'>
<a class='timestamp' href='#573938'><time timestamp='2017-10-05T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
ontrol.Add(vChecks); ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227360' id='573939'>
<a class='timestamp' href='#573939'><time timestamp='2017-10-05T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
control.Add(vChecks); ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227360' id='573940'>
<a class='timestamp' href='#573940'><time timestamp='2017-10-05T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227420' id='573941'>
<a class='timestamp' href='#573941'><time timestamp='2017-10-05T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: it would but wumpus pointed out that that queue would potentially grow without bound if the client stops acking entirely.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227420' id='573942'>
<a class='timestamp' href='#573942'><time timestamp='2017-10-05T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jl2012: and the CScriptCheck objects have a pointer to the precomputation data
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227480' id='573943'>
<a class='timestamp' href='#573943'><time timestamp='2017-10-05T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
control.Add returns immediately
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227480' id='573944'>
<a class='timestamp' href='#573944'><time timestamp='2017-10-05T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, 100% reliable notification given any behavior of the receiver is not possible given finite space
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227480' id='573945'>
<a class='timestamp' href='#573945'><time timestamp='2017-10-05T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: a queue limit is unavoidable... if you poll to lazy and the queue limit is to little, the only way to detect would be via the sequence number
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227480' id='573946'>
<a class='timestamp' href='#573946'><time timestamp='2017-10-05T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jl2012: which means we must guarantee that that precomputation data remains alive as long as other threads may dereference the pointer
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227480' id='573947'>
<a class='timestamp' href='#573947'><time timestamp='2017-10-05T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
some notification queue middleware logs events to disk in that case
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227480' id='573948'>
<a class='timestamp' href='#573948'><time timestamp='2017-10-05T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: in long polling, the queue must be finite because we don&#x27;t know when the client polls next,... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227540' id='573949'>
<a class='timestamp' href='#573949'><time timestamp='2017-10-05T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
e.g. rabbitmq etc, not by any means suggesting we take that up
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227540' id='573950'>
<a class='timestamp' href='#573950'><time timestamp='2017-10-05T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: I agree there needs to be a limit realistically, it&#x27;s enough if a client can detect missed events to resync
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227600' id='573951'>
<a class='timestamp' href='#573951'><time timestamp='2017-10-05T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I personally think acking notifications is unnecessary,.. making it configurable seems also an overkill... so unsure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227600' id='573952'>
<a class='timestamp' href='#573952'><time timestamp='2017-10-05T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
jl2012: this is why I say a shared_ptr is what you really want, because the lifetime is automatically handled for you, whereas the vector is only by careful programming. However, that careful programming is currently correct :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227660' id='573953'>
<a class='timestamp' href='#573953'><time timestamp='2017-10-05T18:21:00Z'>18:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: if you don&#x27;t ask notifications, then your clients must manually deal with restarts... which implies having a way to ask for all events since some time... which, if you have it, removes the need for an event log entirely, as you can just use that all the time
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227660' id='573954'>
<a class='timestamp' href='#573954'><time timestamp='2017-10-05T18:21:00Z'>18:21</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
JeremyRubin, sipa: thanks. I&#x27;m thinking how I could do this: <a href="https://github.com/bitcoin/bitcoin/pull/9572#issuecomment-334282408" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9572#issuecomment-334282408</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227660' id='573955'>
<a class='timestamp' href='#573955'><time timestamp='2017-10-05T18:21:00Z'>18:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
what&#x27;s important is to document the limitations of the notification system in that regard
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227720' id='573956'>
<a class='timestamp' href='#573956'><time timestamp='2017-10-05T18:22:00Z'>18:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jl2012: do what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227720' id='573957'>
<a class='timestamp' href='#573957'><time timestamp='2017-10-05T18:22:00Z'>18:22</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
&quot;I&#x27;d be a little more comfortable with this if PrecomputedTransactionData were passed around as const, so nobody&#x27;s tempted to mess with &quot;ready&quot; for some crazy reason. But that can always be done later.&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227720' id='573958'>
<a class='timestamp' href='#573958'><time timestamp='2017-10-05T18:22:00Z'>18:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
shared_ptrs are a way to produce a software engineering disaster, because they let you be sloppy with ownership. There are cases of frestanding objects that don&#x27;t have organized ownership but they are relatively rare. They also have non-trivial overhad. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227780' id='573959'>
<a class='timestamp' href='#573959'><time timestamp='2017-10-05T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jl2012: seems trivial?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227780' id='573960'>
<a class='timestamp' href='#573960'><time timestamp='2017-10-05T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think you&#x27;re overthinking it
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227840' id='573961'>
<a class='timestamp' href='#573961'><time timestamp='2017-10-05T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
I&#x27;m thinking something like &quot;const PrecomputedTransactionData txdata(tx);&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227900' id='573962'>
<a class='timestamp' href='#573962'><time timestamp='2017-10-05T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jl2012: cfields is only asking to pass it around as const; not to make the entire object const
<br>
</div>

<div class='talk op-msg' data-timestamp='1507227960' id='573963'>
<a class='timestamp' href='#573963'><time timestamp='2017-10-05T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
^^ yep
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228020' id='573964'>
<a class='timestamp' href='#573964'><time timestamp='2017-10-05T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
though i think making the members const would be trivial too
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228020' id='573965'>
<a class='timestamp' href='#573965'><time timestamp='2017-10-05T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
either way, it&#x27;s not really important for that PR. just an observation.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228020' id='573966'>
<a class='timestamp' href='#573966'><time timestamp='2017-10-05T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
it&#x27;s even better if we could make the object const? There is no reason to make any modification
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228080' id='573967'>
<a class='timestamp' href='#573967'><time timestamp='2017-10-05T18:28:00Z'>18:28</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
gmaxwell: am aware, but strictly speaking that is the point here: they are designed to track the actual needed lifetime, and are a &#x27;tighter fit&#x27; to the problem in this situation. That they have problems is why I didn&#x27;t PR my patch.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228080' id='573968'>
<a class='timestamp' href='#573968'><time timestamp='2017-10-05T18:28:00Z'>18:28</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jl2012: just make the members const, then. use initializers rather than setting them in the function body
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228140' id='573969'>
<a class='timestamp' href='#573969'><time timestamp='2017-10-05T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
jl2012: I think that we shouldn&#x27;t make it const, because there will be in the future per-tx state that we&#x27;ll modify
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228140' id='573970'>
<a class='timestamp' href='#573970'><time timestamp='2017-10-05T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
e.g., if at some point in the future signature agg ends up needing a per-tx mutable struct that each input modifies
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228140' id='573971'>
<a class='timestamp' href='#573971'><time timestamp='2017-10-05T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
JeremyRubin: in the case of the validation the ownership is just a straght line though, the creating code owns it, then the ownership is passed to the queue, then the ownership passes to the verifier thread..
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228200' id='573972'>
<a class='timestamp' href='#573972'><time timestamp='2017-10-05T18:30:00Z'>18:30</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
Maybe it should be a different struct, but I think (to me), changing PreComputedTxData to PerTxData is straightforward.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228200' id='573973'>
<a class='timestamp' href='#573973'><time timestamp='2017-10-05T18:30:00Z'>18:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
JeremyRubin: i think that should be separate
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228260' id='573974'>
<a class='timestamp' href='#573974'><time timestamp='2017-10-05T18:31:00Z'>18:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you want to avoid locking on the precomputed data
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228260' id='573975'>
<a class='timestamp' href='#573975'><time timestamp='2017-10-05T18:31:00Z'>18:31</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
gmaxwell: yes, and then they are kept alive for longer than strictly needed. After the last scriptcheck executes for that tx, they can be freed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228260' id='573976'>
<a class='timestamp' href='#573976'><time timestamp='2017-10-05T18:31:00Z'>18:31</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
agree. It&#x27;d be nice to keep the factual data separate from what&#x27;s aggregated/stateful
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228260' id='573977'>
<a class='timestamp' href='#573977'><time timestamp='2017-10-05T18:31:00Z'>18:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
JeremyRubin: yes, so? it doesn&#x27;t change the worst case resource consumption
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228320' id='573978'>
<a class='timestamp' href='#573978'><time timestamp='2017-10-05T18:32:00Z'>18:32</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
cfields: all the data should be factual in consensus?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228380' id='573979'>
<a class='timestamp' href='#573979'><time timestamp='2017-10-05T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: persist the notification queue (with it&#x27;s sequence numbers) to make it restart-safe?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228380' id='573980'>
<a class='timestamp' href='#573980'><time timestamp='2017-10-05T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
sipa: I&#x27;m really only trying to talk about lifetimes here, which is the core of what jl2012 is discussing
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228380' id='573981'>
<a class='timestamp' href='#573981'><time timestamp='2017-10-05T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
sipa: asking
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228500' id='573982'>
<a class='timestamp' href='#573982'><time timestamp='2017-10-05T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
JeremyRubin: i&#x27;m just trying to point out that minimizing the time an object lives is not always wanted
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228500' id='573983'>
<a class='timestamp' href='#573983'><time timestamp='2017-10-05T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
JeremyRubin: i just meant that it can be safely computed ahead of time and seen as immutible after that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228500' id='573984'>
<a class='timestamp' href='#573984'><time timestamp='2017-10-05T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
factual was the wrong word, i suppose.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228620' id='573985'>
<a class='timestamp' href='#573985'><time timestamp='2017-10-05T18:37:00Z'>18:37</time></a>
&lt;<span class='nick nick-3'> JeremyRubin</span>&gt;
sipa: of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228680' id='573986'>
<a class='timestamp' href='#573986'><time timestamp='2017-10-05T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: that&#x27;s one way (but it has pretty bad costs, if you want to make it durable - now you need synchronization across all files/databases)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228740' id='573987'>
<a class='timestamp' href='#573987'><time timestamp='2017-10-05T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: another model is that you just have RPCs like listsinceblock, where the client tells the server effectively what it already knows
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228740' id='573988'>
<a class='timestamp' href='#573988'><time timestamp='2017-10-05T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: and then all you need is a notification like &quot;there&#x27;s something for you to look at&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228800' id='573989'>
<a class='timestamp' href='#573989'><time timestamp='2017-10-05T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: by a rolling hash?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228800' id='573990'>
<a class='timestamp' href='#573990'><time timestamp='2017-10-05T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: wut?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228800' id='573991'>
<a class='timestamp' href='#573991'><time timestamp='2017-10-05T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no, just like listsinceblock
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228800' id='573992'>
<a class='timestamp' href='#573992'><time timestamp='2017-10-05T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
how would the client tell the server what notfications it has... just the sequence number?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228800' id='573993'>
<a class='timestamp' href='#573993'><time timestamp='2017-10-05T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(need to check that)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228800' id='573994'>
<a class='timestamp' href='#573994'><time timestamp='2017-10-05T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228800' id='573995'>
<a class='timestamp' href='#573995'><time timestamp='2017-10-05T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no, i&#x27;m saying there are no notification
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228800' id='573996'>
<a class='timestamp' href='#573996'><time timestamp='2017-10-05T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there are just state changes
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228860' id='573997'>
<a class='timestamp' href='#573997'><time timestamp='2017-10-05T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and the client can ask &quot;i&#x27;ve synced up to block X&quot; or &quot;i&#x27;ve seen transactions up to timestamp Y&quot;, or &quot;the last balance update i saw was Z&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228920' id='573998'>
<a class='timestamp' href='#573998'><time timestamp='2017-10-05T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
because most data has inherent sequencing anyway already
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228920' id='573999'>
<a class='timestamp' href='#573999'><time timestamp='2017-10-05T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
could it also do long polling? ... because IMO that is what users want (not const. polling)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228920' id='574000'>
<a class='timestamp' href='#574000'><time timestamp='2017-10-05T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, but the long poll just returns &quot;there is something you should look at&quot;, not what
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228980' id='574001'>
<a class='timestamp' href='#574001'><time timestamp='2017-10-05T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ah. And then the state update call.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228980' id='574002'>
<a class='timestamp' href='#574002'><time timestamp='2017-10-05T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
... no
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228980' id='574003'>
<a class='timestamp' href='#574003'><time timestamp='2017-10-05T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i mean <b>*exactly*</b> like listsinceblock
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228980' id='574004'>
<a class='timestamp' href='#574004'><time timestamp='2017-10-05T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
heh.. okay let me dive into there first
<br>
</div>

<div class='talk op-msg' data-timestamp='1507228980' id='574005'>
<a class='timestamp' href='#574005'><time timestamp='2017-10-05T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it has no sequence numbers, or notifications
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229040' id='574006'>
<a class='timestamp' href='#574006'><time timestamp='2017-10-05T18:44:00Z'>18:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s a call where the client tells the server &quot;hey, i&#x27;ve seen all transactions up to block X. what new transactions are there&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229040' id='574007'>
<a class='timestamp' href='#574007'><time timestamp='2017-10-05T18:44:00Z'>18:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the next time the client calls, it uses the block hash at the time of its previous call
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229040' id='574008'>
<a class='timestamp' href='#574008'><time timestamp='2017-10-05T18:44:00Z'>18:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the server doesn&#x27;t need to keep track of anything
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229100' id='574009'>
<a class='timestamp' href='#574009'><time timestamp='2017-10-05T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
would that also work with non block/tx data? Like new wallet txns (locally injected) or bandwith watermarks?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229160' id='574010'>
<a class='timestamp' href='#574010'><time timestamp='2017-10-05T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
although not sure if there is a need for that
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229160' id='574011'>
<a class='timestamp' href='#574011'><time timestamp='2017-10-05T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
perhaps - maybe it&#x27;s not possible for everything
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229160' id='574012'>
<a class='timestamp' href='#574012'><time timestamp='2017-10-05T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
bandwidth watermarks are easy... the client doesn&#x27;t care if he misses one
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229220' id='574013'>
<a class='timestamp' href='#574013'><time timestamp='2017-10-05T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
for wallet txn you can use the txid of the last seen tx
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229280' id='574014'>
<a class='timestamp' href='#574014'><time timestamp='2017-10-05T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: my point is that you probably need something like that anyway, at least for when a new client starts up or went offline for a while
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229340' id='574015'>
<a class='timestamp' href='#574015'><time timestamp='2017-10-05T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: Yes. Your idea make sense.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229340' id='574016'>
<a class='timestamp' href='#574016'><time timestamp='2017-10-05T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and when you do, why bother with a separate event queue - all events could just be &quot;hey something happened, you should check what&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229340' id='574017'>
<a class='timestamp' href='#574017'><time timestamp='2017-10-05T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s a big concern i had with ZMQ... as it passes the actual new tx and blocks, but without guarantees that it delivers all
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229340' id='574018'>
<a class='timestamp' href='#574018'><time timestamp='2017-10-05T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it was fixed with sequence numbers
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229340' id='574019'>
<a class='timestamp' href='#574019'><time timestamp='2017-10-05T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
maybe you should be able to not get such notifications on new mempool txns
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229400' id='574020'>
<a class='timestamp' href='#574020'><time timestamp='2017-10-05T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but it could also have been fixed by not having it at all, and making clients query for the data they didn&#x27;t have after every notifications&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229400' id='574021'>
<a class='timestamp' href='#574021'><time timestamp='2017-10-05T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
anyway, just an idea
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229460' id='574022'>
<a class='timestamp' href='#574022'><time timestamp='2017-10-05T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Thanks for sharing... need to think about it a bit more
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229460' id='574023'>
<a class='timestamp' href='#574023'><time timestamp='2017-10-05T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
having events you can subscribe to individually that persist etc... is certainly more convenient for clients
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229460' id='574024'>
<a class='timestamp' href='#574024'><time timestamp='2017-10-05T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but it makes bitcoin core responsible for tracking who knows what, instead of leaving that up to clients (who are arguably in a better position to know what they already know)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229520' id='574025'>
<a class='timestamp' href='#574025'><time timestamp='2017-10-05T18:52:00Z'>18:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Indeed. And also the ressources.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507229700' id='574026'>
<a class='timestamp' href='#574026'><time timestamp='2017-10-05T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it would be pretty nice if there was a way to subscribe to &quot;hey, let me know when txid X gets Y confirmations or gets reorged&quot;, but perhaps that could be done in a python script that just uses a simpler interface with bitcoidn
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230000' id='574027'>
<a class='timestamp' href='#574027'><time timestamp='2017-10-05T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
meeting?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230000' id='574028'>
<a class='timestamp' href='#574028'><time timestamp='2017-10-05T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230060' id='574029'>
<a class='timestamp' href='#574029'><time timestamp='2017-10-05T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230120' id='574030'>
<a class='timestamp' href='#574030'><time timestamp='2017-10-05T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
#startmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230120' id='574031'>
<a class='timestamp' href='#574031'><time timestamp='2017-10-05T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Meeting started Thu Oct  5 19:02:18 2017 UTC.  The chair is jonasschnelli. Information about MeetBot at <a href="http://wiki.debian.org/MeetBot" class="link" target="_blank">http://wiki.debian.org/MeetBot</a>.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230120' id='574032'>
<a class='timestamp' href='#574032'><time timestamp='2017-10-05T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Useful Commands: #action #agreed #help #info #idea #link #topic.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230120' id='574033'>
<a class='timestamp' href='#574033'><time timestamp='2017-10-05T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230120' id='574034'>
<a class='timestamp' href='#574034'><time timestamp='2017-10-05T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Meeting: wumpus sipa gmaxwell jonasschnelli morcos luke-jr btcdrak sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230120' id='574035'>
<a class='timestamp' href='#574035'><time timestamp='2017-10-05T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
hi.     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230120' id='574036'>
<a class='timestamp' href='#574036'><time timestamp='2017-10-05T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: sry: though your where OL
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230120' id='574037'>
<a class='timestamp' href='#574037'><time timestamp='2017-10-05T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
hi     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230120' id='574038'>
<a class='timestamp' href='#574038'><time timestamp='2017-10-05T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#bitcoin-core-dev Meeting: wumpus sipa gmaxwell jonasschnelli morcos luke-jr btcdrak sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier jl2012 achow101
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230120' id='574039'>
<a class='timestamp' href='#574039'><time timestamp='2017-10-05T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Hello
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230120' id='574040'>
<a class='timestamp' href='#574040'><time timestamp='2017-10-05T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
hi     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230120' id='574041'>
<a class='timestamp' href='#574041'><time timestamp='2017-10-05T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hi     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230180' id='574042'>
<a class='timestamp' href='#574042'><time timestamp='2017-10-05T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: yes I was a bit late, sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230180' id='574043'>
<a class='timestamp' href='#574043'><time timestamp='2017-10-05T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic high-priority for review
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230180' id='574044'>
<a class='timestamp' href='#574044'><time timestamp='2017-10-05T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Huh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230180' id='574045'>
<a class='timestamp' href='#574045'><time timestamp='2017-10-05T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
#chair wumpus
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230180' id='574046'>
<a class='timestamp' href='#574046'><time timestamp='2017-10-05T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
#10637 please?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230180' id='574047'>
<a class='timestamp' href='#574047'><time timestamp='2017-10-05T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Current chairs: jonasschnelli wumpus
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230180' id='574048'>
<a class='timestamp' href='#574048'><time timestamp='2017-10-05T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10637" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10637</a> | Coin Selection with Murchs algorithm by achow101 · Pull Request #10637 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230240' id='574049'>
<a class='timestamp' href='#574049'><time timestamp='2017-10-05T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Oh, right
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230240' id='574050'>
<a class='timestamp' href='#574050'><time timestamp='2017-10-05T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
It&#x27;s actually Thursday
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230240' id='574051'>
<a class='timestamp' href='#574051'><time timestamp='2017-10-05T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
achow101: ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230300' id='574052'>
<a class='timestamp' href='#574052'><time timestamp='2017-10-05T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I also added #11389 today as it&#x27;s blocking segwit wallet support
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230300' id='574053'>
<a class='timestamp' href='#574053'><time timestamp='2017-10-05T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-2'> * jtimon</span>&gt;
locks at #8498 and hides for the rest of the meeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230300' id='574054'>
<a class='timestamp' href='#574054'><time timestamp='2017-10-05T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/11389" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/11389</a> | Support having SegWit always active in regtest by sipa · Pull Request #11389 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230300' id='574055'>
<a class='timestamp' href='#574055'><time timestamp='2017-10-05T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8498" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8498</a> | Near-Bugfix: Optimization: Minimize the number of times it is checked that no money... by jtimon · Pull Request #8498 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230300' id='574056'>
<a class='timestamp' href='#574056'><time timestamp='2017-10-05T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
#11403 itself should be in there too probably?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230300' id='574057'>
<a class='timestamp' href='#574057'><time timestamp='2017-10-05T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/11403" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/11403</a> | SegWit wallet support by sipa · Pull Request #11403 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230360' id='574058'>
<a class='timestamp' href='#574058'><time timestamp='2017-10-05T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: i haven&#x27;t had the time to work further on 11403, though concept review is certainly welcome
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230360' id='574059'>
<a class='timestamp' href='#574059'><time timestamp='2017-10-05T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I&#x27;ve been reviewing 11389 this afternoon. It looks generally good, but breaks assumevalid.py, which I&#x27;m trying to fix now
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230360' id='574060'>
<a class='timestamp' href='#574060'><time timestamp='2017-10-05T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
s/locks/looks/
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230360' id='574061'>
<a class='timestamp' href='#574061'><time timestamp='2017-10-05T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: I think we need a document on the various possible approaches, tbh
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230360' id='574062'>
<a class='timestamp' href='#574062'><time timestamp='2017-10-05T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: yes, i&#x27;ll work on that soon
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230420' id='574063'>
<a class='timestamp' href='#574063'><time timestamp='2017-10-05T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
there are a few and talking through all of them is going to need something more formal
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230420' id='574064'>
<a class='timestamp' href='#574064'><time timestamp='2017-10-05T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230420' id='574065'>
<a class='timestamp' href='#574065'><time timestamp='2017-10-05T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
achow101: does 10637 implement all the coin selection logic we discussed in SF or only BnB?  Is there a high level description somewhere of what the PR is purporting to accomplish and what else will need to be done before 0.16?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230420' id='574066'>
<a class='timestamp' href='#574066'><time timestamp='2017-10-05T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
morcos: only BnB
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230420' id='574067'>
<a class='timestamp' href='#574067'><time timestamp='2017-10-05T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
morcos: IIRC Murch is working on all of the coin selection stuff that we discussed
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230420' id='574068'>
<a class='timestamp' href='#574068'><time timestamp='2017-10-05T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
btw I posted a proposed release schedule for 0.16.0 yesterday
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230420' id='574069'>
<a class='timestamp' href='#574069'><time timestamp='2017-10-05T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#link <a href="https://github.com/bitcoin/bitcoin/issues/11449" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/11449</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230480' id='574070'>
<a class='timestamp' href='#574070'><time timestamp='2017-10-05T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
achow101: ok.. i&#x27;ve already forgotten what that is, so might be nice to have that written up in an issue or something so we remember the goal and can think about how this BnB implementation is going to fit into the big picture
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230540' id='574071'>
<a class='timestamp' href='#574071'><time timestamp='2017-10-05T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
morcos: the description of what 10637 does is in the first comment.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230540' id='574072'>
<a class='timestamp' href='#574072'><time timestamp='2017-10-05T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I can make an issue for coin selection changes in general
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230540' id='574073'>
<a class='timestamp' href='#574073'><time timestamp='2017-10-05T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
*to keep track of
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230600' id='574074'>
<a class='timestamp' href='#574074'><time timestamp='2017-10-05T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok, I think that concludes high priority for review proposals
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230600' id='574075'>
<a class='timestamp' href='#574075'><time timestamp='2017-10-05T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
any other topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230660' id='574076'>
<a class='timestamp' href='#574076'><time timestamp='2017-10-05T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
topic suggestion: bad block interrogation/invalid block peer banning
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230660' id='574077'>
<a class='timestamp' href='#574077'><time timestamp='2017-10-05T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#action achow101 make an issue for coin selection changes in general
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230660' id='574078'>
<a class='timestamp' href='#574078'><time timestamp='2017-10-05T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic bad block interrogation/invalid block peer banning
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230660' id='574079'>
<a class='timestamp' href='#574079'><time timestamp='2017-10-05T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
relevant PR is #11446 (I did this in class so it kinda sucks)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230660' id='574080'>
<a class='timestamp' href='#574080'><time timestamp='2017-10-05T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/11446" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/11446</a> | [WIP] Bad block interrogation by achow101 · Pull Request #11446 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230720' id='574081'>
<a class='timestamp' href='#574081'><time timestamp='2017-10-05T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-4'> Murch</span>&gt;
hey, sorry, was still in a meeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230720' id='574082'>
<a class='timestamp' href='#574082'><time timestamp='2017-10-05T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
basically the idea is gmaxwell&#x27;s. when we receive an invalid block, we want to make sure that all of our peers would also reject that block as invalid. If they don&#x27;t ban them
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230720' id='574083'>
<a class='timestamp' href='#574083'><time timestamp='2017-10-05T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-4'> Murch</span>&gt;
I&#x27;ve been working on it, but since I do that in my free time in the evenings, it&#x27;s been rather slow.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230720' id='574084'>
<a class='timestamp' href='#574084'><time timestamp='2017-10-05T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: this feels delayed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230780' id='574085'>
<a class='timestamp' href='#574085'><time timestamp='2017-10-05T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The general idea is that we aren&#x27;t sufficiently agressive about punting peers on different consensus rules, so they can DOS attack us by sucking up slots, potentially hours per peer leaving us isolated... So there are number of things we can to do seek and destroy to speed up up.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230780' id='574086'>
<a class='timestamp' href='#574086'><time timestamp='2017-10-05T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: what feels delayed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230780' id='574087'>
<a class='timestamp' href='#574087'><time timestamp='2017-10-05T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: 0.16
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230780' id='574088'>
<a class='timestamp' href='#574088'><time timestamp='2017-10-05T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-4'> Murch</span>&gt;
@achow101: If you want to collaborate on a write-up, I&#x27;d make myself available for that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230780' id='574089'>
<a class='timestamp' href='#574089'><time timestamp='2017-10-05T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: release schedule is delayed because of 0.15.1
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230780' id='574090'>
<a class='timestamp' href='#574090'><time timestamp='2017-10-05T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
Murch: ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230780' id='574091'>
<a class='timestamp' href='#574091'><time timestamp='2017-10-05T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
i c     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230780' id='574092'>
<a class='timestamp' href='#574092'><time timestamp='2017-10-05T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: yes, two months extra added, I mention that in the issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230780' id='574093'>
<a class='timestamp' href='#574093'><time timestamp='2017-10-05T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
what I wanted to discuss was the way to actually go about determining who to ban
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230840' id='574094'>
<a class='timestamp' href='#574094'><time timestamp='2017-10-05T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-4'> Murch</span>&gt;
@achow101: Gonna be traveling the next three weeks, so I might actually have more time. ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230840' id='574095'>
<a class='timestamp' href='#574095'><time timestamp='2017-10-05T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what is the issue with just looking at headers?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230840' id='574096'>
<a class='timestamp' href='#574096'><time timestamp='2017-10-05T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: I was kinda hoping we could implement something just from the messages we already get, it&#x27;s my belief (could be wrong) that effectively we always learn the peers best header chain-- so we can begin kicking off peers based on that, as a first pass.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230840' id='574097'>
<a class='timestamp' href='#574097'><time timestamp='2017-10-05T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
achow101: this contradicts the fixes in #10593
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230840' id='574098'>
<a class='timestamp' href='#574098'><time timestamp='2017-10-05T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10593" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10593</a> | Relax punishment for peers relaying invalid blocks and headers by luke-jr · Pull Request #10593 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230840' id='574099'>
<a class='timestamp' href='#574099'><time timestamp='2017-10-05T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: I think we should be also drawing a distinction between inbound and outbound: the issue is what if we have a peer that accepts a broader set of blocks but would switch to our chain after learning of it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230900' id='574100'>
<a class='timestamp' href='#574100'><time timestamp='2017-10-05T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gmaxwell: that&#x27;s what I am not sure about. I don&#x27;t think we necessarily know our peer&#x27;s best header chain. suppose both us and them are fully synced, how do we know their best header chain until a new block appears?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230900' id='574101'>
<a class='timestamp' href='#574101'><time timestamp='2017-10-05T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: maybe two months is too much, but we&#x27;ll see...
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230960' id='574102'>
<a class='timestamp' href='#574102'><time timestamp='2017-10-05T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: nah, that sounds reasonable
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230960' id='574103'>
<a class='timestamp' href='#574103'><time timestamp='2017-10-05T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: when a new block appears, assuming it&#x27;s PoW-valid to us, we&#x27;ll learn about it through inv/headers/cb/...
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230960' id='574104'>
<a class='timestamp' href='#574104'><time timestamp='2017-10-05T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. +2 M seems okay to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1507230960' id='574105'>
<a class='timestamp' href='#574105'><time timestamp='2017-10-05T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: but I believe he&#x27;s right, we would have to wait for a new block, which is among the situations we&#x27;re trying to resolve.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231020' id='574106'>
<a class='timestamp' href='#574106'><time timestamp='2017-10-05T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sipa: right, but I&#x27;m concerned about before a new block appears. we just connected to them or they just connected to us. we want to know then if we should ban them or not
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231020' id='574107'>
<a class='timestamp' href='#574107'><time timestamp='2017-10-05T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
IMO the desirable logic would be: for outbound connections, disconnect (don&#x27;t ban) peers that aren&#x27;t on the same chain; for inbound, tolerate it unless they reject a known-valid block
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231020' id='574108'>
<a class='timestamp' href='#574108'><time timestamp='2017-10-05T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
we send getheaders messages on connect, typically
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231020' id='574109'>
<a class='timestamp' href='#574109'><time timestamp='2017-10-05T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
For example say we are surrounded by ForkCoin peers, they are rejecting all bitcoin blocks.  There are few forkcoin miners so they only get blocks once per day.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231080' id='574110'>
<a class='timestamp' href='#574110'><time timestamp='2017-10-05T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We don&#x27;t want to wait for them to get a new block just to figure out our current batch of peers are already on a chain we reject.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231080' id='574111'>
<a class='timestamp' href='#574111'><time timestamp='2017-10-05T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sdaftuar: are you sure? all I could find is that we sometimes send getheaders, not all the time
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231080' id='574112'>
<a class='timestamp' href='#574112'><time timestamp='2017-10-05T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
achow101: we send getheaders messages to all our peers at some point after startup, but they might ignore them
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231080' id='574113'>
<a class='timestamp' href='#574113'><time timestamp='2017-10-05T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sdaftuar: not to incoming light clients, i think?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231080' id='574114'>
<a class='timestamp' href='#574114'><time timestamp='2017-10-05T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
eg if they are doing ibd themselves or something
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231080' id='574115'>
<a class='timestamp' href='#574115'><time timestamp='2017-10-05T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
not to light clients, correct
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231080' id='574116'>
<a class='timestamp' href='#574116'><time timestamp='2017-10-05T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
light clients don&#x27;t matter here
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231080' id='574117'>
<a class='timestamp' href='#574117'><time timestamp='2017-10-05T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but to inbound node_network ndoes we do
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231140' id='574118'>
<a class='timestamp' href='#574118'><time timestamp='2017-10-05T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If we <u>_always_</u> sent getheaders and then kicked outbound peers whos chain has a block we&#x27;ve rejected, then I think that is the best we can do per that concern (still not a perfect fix, since you&#x27;re isolated until forkcoin finds at least one block)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231140' id='574119'>
<a class='timestamp' href='#574119'><time timestamp='2017-10-05T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sdaftuar: if we are sending getheaders, if they are on a different chain, we still wouldn&#x27;t necessarily know because our start block may not be on their best chain
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231140' id='574120'>
<a class='timestamp' href='#574120'><time timestamp='2017-10-05T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh hm. then perhaps we already do where it matters.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231140' id='574121'>
<a class='timestamp' href='#574121'><time timestamp='2017-10-05T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: the difficult part might be that you don&#x27;t know the chain they&#x27;re on is invalid
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231140' id='574122'>
<a class='timestamp' href='#574122'><time timestamp='2017-10-05T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if it&#x27;s got less work than yours
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231140' id='574123'>
<a class='timestamp' href='#574123'><time timestamp='2017-10-05T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-2'> RealM9</span>&gt;
Topic suggestion: s2x
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231200' id='574124'>
<a class='timestamp' href='#574124'><time timestamp='2017-10-05T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
RealM9: no
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231200' id='574125'>
<a class='timestamp' href='#574125'><time timestamp='2017-10-05T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sdaftuar: do you care?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231200' id='574126'>
<a class='timestamp' href='#574126'><time timestamp='2017-10-05T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
if they&#x27;re rejecting your better chain, you want to disconnect them anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231200' id='574127'>
<a class='timestamp' href='#574127'><time timestamp='2017-10-05T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: seems like a seperate concern, we should also be kicking outbound peers that have less work than us, I think.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231200' id='574128'>
<a class='timestamp' href='#574128'><time timestamp='2017-10-05T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-2'> RealM9</span>&gt;
Ok, but community is pretty interested. Are you going to change POW?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231200' id='574129'>
<a class='timestamp' href='#574129'><time timestamp='2017-10-05T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: i think that would be a good idea, yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231200' id='574130'>
<a class='timestamp' href='#574130'><time timestamp='2017-10-05T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
But it would be silly to be overly agressive.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231200' id='574131'>
<a class='timestamp' href='#574131'><time timestamp='2017-10-05T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
RealM9: us?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231200' id='574132'>
<a class='timestamp' href='#574132'><time timestamp='2017-10-05T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sdaftuar: gmaxwell what I propose is that we send a getheaders for our earliest known invalid block (within a certain time frame) and see if they respond with invalid blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231260' id='574133'>
<a class='timestamp' href='#574133'><time timestamp='2017-10-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
RealM9: that&#x27;s a decision for the community, not for developers. anyhow, ask on #bitcoin if you really want to discuss it
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231260' id='574134'>
<a class='timestamp' href='#574134'><time timestamp='2017-10-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: I don&#x27;t think we need to do that: for sync purposes any outbound peer we should be makign sure we learn their headers chain period (they may have a better chain than us and we should sync up ASAP)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231260' id='574135'>
<a class='timestamp' href='#574135'><time timestamp='2017-10-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
achow101: i&#x27;m not sure that&#x27;s necessary?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231260' id='574136'>
<a class='timestamp' href='#574136'><time timestamp='2017-10-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
RealM9: we&#x27;re in a meeting , but please see: <a href="https://bitcoincore.org/en/2017/08/18/btc1-misleading-statements/" class="link" target="_blank">https://bitcoincore.org/en/2017/08/18/btc1-misleading-statements/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231260' id='574137'>
<a class='timestamp' href='#574137'><time timestamp='2017-10-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: if we&#x27;re already doing that we&#x27;ll notice known invalid block in their header chaip (well we will once we have code for that)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231260' id='574138'>
<a class='timestamp' href='#574138'><time timestamp='2017-10-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think if we do gmaxwell&#x27;s suggestion of booting inbound peers who are on less work chains, then we&#x27;d be in good shape
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231260' id='574139'>
<a class='timestamp' href='#574139'><time timestamp='2017-10-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
s/inbound/outbound/
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231320' id='574140'>
<a class='timestamp' href='#574140'><time timestamp='2017-10-05T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I think we may actually want to track the headers of invalid chains..
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231320' id='574141'>
<a class='timestamp' href='#574141'><time timestamp='2017-10-05T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
what about inbound peers?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231320' id='574142'>
<a class='timestamp' href='#574142'><time timestamp='2017-10-05T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
For <u>_inbound_</u> I think we should be setting a flag that they&#x27;re consensus inconsistent which excludes them from the inbound peer management connection reservation. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231320' id='574143'>
<a class='timestamp' href='#574143'><time timestamp='2017-10-05T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
achow101: i think we should more aggerssively evict inbound peers if they appear to be on invalid chains
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231320' id='574144'>
<a class='timestamp' href='#574144'><time timestamp='2017-10-05T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so they&#x27;ll get kicked off in favor of other inbound peers.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231320' id='574145'>
<a class='timestamp' href='#574145'><time timestamp='2017-10-05T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Agreed
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231380' id='574146'>
<a class='timestamp' href='#574146'><time timestamp='2017-10-05T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so we don&#x27;t need to be agressive: they&#x27;ll just get pushed out by other inbound peers.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231380' id='574147'>
<a class='timestamp' href='#574147'><time timestamp='2017-10-05T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
consider: if an invalid chain has higher hashrate than the real chain, and then suddenly the invalid chain&#x27;s hashrate drops off, without an equivalent increase on the main chain, we should consider that a possible attack and hold back on confirming transactions until it is resolved
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231380' id='574148'>
<a class='timestamp' href='#574148'><time timestamp='2017-10-05T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: yes i agree with you
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231380' id='574149'>
<a class='timestamp' href='#574149'><time timestamp='2017-10-05T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
my point is how do we know that an inbound peer is on an invalid chain?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231440' id='574150'>
<a class='timestamp' href='#574150'><time timestamp='2017-10-05T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: I think there is some need for smarter wallet confirmation logic but I think thats a seperate matter. (there was a paper 6-ish months ago that also points out the the reorg probablity math in the whitepaper is somewhat incomplete)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231440' id='574151'>
<a class='timestamp' href='#574151'><time timestamp='2017-10-05T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
achow101: set a flag if they relay an invalid block/blockheader
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231440' id='574152'>
<a class='timestamp' href='#574152'><time timestamp='2017-10-05T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: right, but this is relevant because we can&#x27;t assume &quot;relays invalid headers&quot; means the other node <b>*accepts*</b> the invalid block
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231440' id='574153'>
<a class='timestamp' href='#574153'><time timestamp='2017-10-05T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and we still interogate their headers if they&#x27;re NODE_NETWORK/NODE_LIMITED
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231440' id='574154'>
<a class='timestamp' href='#574154'><time timestamp='2017-10-05T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sdaftuar: we intentionally relay blocks before checking validity now
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231500' id='574155'>
<a class='timestamp' href='#574155'><time timestamp='2017-10-05T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sdaftuar: that requires them to have a block to relay to us, which could take hours or days
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231500' id='574156'>
<a class='timestamp' href='#574156'><time timestamp='2017-10-05T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: the protocol does not have you realying a header of a block you haven&#x27;t accepted. If you do that you risk dos attacking peers already.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231500' id='574157'>
<a class='timestamp' href='#574157'><time timestamp='2017-10-05T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
achow101: i don&#x27;t think we need to worry as much about inbound peers
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231500' id='574158'>
<a class='timestamp' href='#574158'><time timestamp='2017-10-05T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
achow101: for instance an attacker can already try to use all your inbound slots and not send you anything
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231500' id='574159'>
<a class='timestamp' href='#574159'><time timestamp='2017-10-05T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: the only place that happens in the protocol is HB BIP152 messages.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231500' id='574160'>
<a class='timestamp' href='#574160'><time timestamp='2017-10-05T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sdaftuar: right, ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231500' id='574161'>
<a class='timestamp' href='#574161'><time timestamp='2017-10-05T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: which may be all you see from CB peers
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231560' id='574162'>
<a class='timestamp' href='#574162'><time timestamp='2017-10-05T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: yes, for inbound we can just deprive them of reservations. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231560' id='574163'>
<a class='timestamp' href='#574163'><time timestamp='2017-10-05T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
luke-jr: even with bip152 the headers need to be valid
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231620' id='574164'>
<a class='timestamp' href='#574164'><time timestamp='2017-10-05T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sdaftuar: yes, the header itself; but it can be a valid header for an invalid block
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231620' id='574165'>
<a class='timestamp' href='#574165'><time timestamp='2017-10-05T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, though we&#x27;d catch it on the <u>_next_</u> block.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231620' id='574166'>
<a class='timestamp' href='#574166'><time timestamp='2017-10-05T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
luke-jr: if it builds on an invalid chain, i believe the header would be invalid
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231620' id='574167'>
<a class='timestamp' href='#574167'><time timestamp='2017-10-05T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
so when we connect to an outbound peer, we will send them a getheaders so we know their best headers chain and ban accordingly
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231620' id='574168'>
<a class='timestamp' href='#574168'><time timestamp='2017-10-05T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
(note I tried to keep track of peer bestblocks in #10512 and basically gave up)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231620' id='574169'>
<a class='timestamp' href='#574169'><time timestamp='2017-10-05T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10512" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10512</a> | Rework same-chain from abusing DoS banning, to explicit checks by luke-jr · Pull Request #10512 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231620' id='574170'>
<a class='timestamp' href='#574170'><time timestamp='2017-10-05T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
when they relay a CB message for a child of an invalid block.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231680' id='574171'>
<a class='timestamp' href='#574171'><time timestamp='2017-10-05T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: yes, but based on the above I believe we already always send it. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231680' id='574172'>
<a class='timestamp' href='#574172'><time timestamp='2017-10-05T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the other part of 11446 is to ban other peers for relaying us an invalid block for which we already know is invalid
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231680' id='574173'>
<a class='timestamp' href='#574173'><time timestamp='2017-10-05T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: because we send it to nodenetwork peers and outbound always are (or or disconnected)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231680' id='574174'>
<a class='timestamp' href='#574174'><time timestamp='2017-10-05T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
but I&#x27;m not sure how that interacts with compact blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231680' id='574175'>
<a class='timestamp' href='#574175'><time timestamp='2017-10-05T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: FWIW, I think we should probably be just disconnecting and not banning. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231680' id='574176'>
<a class='timestamp' href='#574176'><time timestamp='2017-10-05T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
achow101: oh that interaction might be tricky
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231680' id='574177'>
<a class='timestamp' href='#574177'><time timestamp='2017-10-05T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gmaxwell: why not ban?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231740' id='574178'>
<a class='timestamp' href='#574178'><time timestamp='2017-10-05T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think the interaction isn&#x27;t too bad, for this purpose a BIP152 CB HB block is relaying you the header of its parent. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231740' id='574179'>
<a class='timestamp' href='#574179'><time timestamp='2017-10-05T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
achow101: in a softfork, old nodes will send invalid blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231740' id='574180'>
<a class='timestamp' href='#574180'><time timestamp='2017-10-05T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
potentially
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231740' id='574181'>
<a class='timestamp' href='#574181'><time timestamp='2017-10-05T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: because it&#x27;s hardly any better and it means that when some dimbulb tries running forkcoin it results in him being unable to run Bitcoin (perhaps concurrently) on the same host. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231800' id='574182'>
<a class='timestamp' href='#574182'><time timestamp='2017-10-05T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gmaxwell: ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231800' id='574183'>
<a class='timestamp' href='#574183'><time timestamp='2017-10-05T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it also blocks inbound from that peer, which we&#x27;d be find allowing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231800' id='574184'>
<a class='timestamp' href='#574184'><time timestamp='2017-10-05T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
s/find/fine/
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231800' id='574185'>
<a class='timestamp' href='#574185'><time timestamp='2017-10-05T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
In general we should be moving away from bans except when the thing we banned for was expensive for us. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231860' id='574186'>
<a class='timestamp' href='#574186'><time timestamp='2017-10-05T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
so 11446 can really just be reduced to an ~1 line change to disconnect on a header for a block we already know is invalid
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231860' id='574187'>
<a class='timestamp' href='#574187'><time timestamp='2017-10-05T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, that
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231860' id='574188'>
<a class='timestamp' href='#574188'><time timestamp='2017-10-05T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
achow101: agree, though we have to be careful about compact blocks i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231860' id='574189'>
<a class='timestamp' href='#574189'><time timestamp='2017-10-05T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
achow101: aka #10593 …
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231860' id='574190'>
<a class='timestamp' href='#574190'><time timestamp='2017-10-05T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10593" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10593</a> | Relax punishment for peers relaying invalid blocks and headers by luke-jr · Pull Request #10593 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231860' id='574191'>
<a class='timestamp' href='#574191'><time timestamp='2017-10-05T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: yes, but for compact block interactions (HB mode will relay us blocks that are invalid).
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231920' id='574192'>
<a class='timestamp' href='#574192'><time timestamp='2017-10-05T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gmaxwell: so we would have to check the specific type of invalidness and whether it was a CB?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231920' id='574193'>
<a class='timestamp' href='#574193'><time timestamp='2017-10-05T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: IIRC when you proposed that before you got squaked at that it would undermine our protection against isolation...
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231980' id='574194'>
<a class='timestamp' href='#574194'><time timestamp='2017-10-05T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: or just don&#x27;t do it for the peers maked for HB CBs for now
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231980' id='574195'>
<a class='timestamp' href='#574195'><time timestamp='2017-10-05T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gmaxwell: isn&#x27;t that likely to be most peers though
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231980' id='574196'>
<a class='timestamp' href='#574196'><time timestamp='2017-10-05T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
?     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231980' id='574197'>
<a class='timestamp' href='#574197'><time timestamp='2017-10-05T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
No, it&#x27;s at most three.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507231980' id='574198'>
<a class='timestamp' href='#574198'><time timestamp='2017-10-05T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: I don&#x27;t see how. It&#x27;s literally what achow101 was just describing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232040' id='574199'>
<a class='timestamp' href='#574199'><time timestamp='2017-10-05T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: maybe you&#x27;re thinking of the predecessor 10512?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232040' id='574200'>
<a class='timestamp' href='#574200'><time timestamp='2017-10-05T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
luke-jr: it doesn&#x27;t look like you are handling invalid duplicates?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232040' id='574201'>
<a class='timestamp' href='#574201'><time timestamp='2017-10-05T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
probably.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232040' id='574202'>
<a class='timestamp' href='#574202'><time timestamp='2017-10-05T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: in any case, we can pick this up on a PR and later discussion.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232100' id='574203'>
<a class='timestamp' href='#574203'><time timestamp='2017-10-05T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gmaxwell: ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232160' id='574204'>
<a class='timestamp' href='#574204'><time timestamp='2017-10-05T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
next topic then?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232160' id='574205'>
<a class='timestamp' href='#574205'><time timestamp='2017-10-05T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
any other topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232160' id='574206'>
<a class='timestamp' href='#574206'><time timestamp='2017-10-05T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
achow101: IIRC it does, we can go over it later if you like
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232160' id='574207'>
<a class='timestamp' href='#574207'><time timestamp='2017-10-05T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
luke-jr: ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232220' id='574208'>
<a class='timestamp' href='#574208'><time timestamp='2017-10-05T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
luke-jr: any progress on multiwallet GUI without the rpcauth parts?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232220' id='574209'>
<a class='timestamp' href='#574209'><time timestamp='2017-10-05T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic multiwallet ui
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232220' id='574210'>
<a class='timestamp' href='#574210'><time timestamp='2017-10-05T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jnewbery: not yet, I&#x27;ll plan to push the update later today
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232280' id='574211'>
<a class='timestamp' href='#574211'><time timestamp='2017-10-05T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
great! I had a look myself, and I think it&#x27;s just a one-line change to the debug console commit
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232280' id='574212'>
<a class='timestamp' href='#574212'><time timestamp='2017-10-05T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/pull/11383" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11383</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232280' id='574213'>
<a class='timestamp' href='#574213'><time timestamp='2017-10-05T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
topic suggestion: dealing with platform-specific code
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232280' id='574214'>
<a class='timestamp' href='#574214'><time timestamp='2017-10-05T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: I can continue to work on 11383 if you want?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232280' id='574215'>
<a class='timestamp' href='#574215'><time timestamp='2017-10-05T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(remove the auth stuff :P)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232280' id='574216'>
<a class='timestamp' href='#574216'><time timestamp='2017-10-05T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jnewbery: certainly not that simple.. still need to resolve wallet name to CWallet earlier
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232340' id='574217'>
<a class='timestamp' href='#574217'><time timestamp='2017-10-05T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
ok, well I&#x27;ve got a branch that works with just that change. Happy to share with you
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232340' id='574218'>
<a class='timestamp' href='#574218'><time timestamp='2017-10-05T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Sounds good.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232400' id='574219'>
<a class='timestamp' href='#574219'><time timestamp='2017-10-05T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jnewbery: push it and I&#x27;ll take a look
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232400' id='574220'>
<a class='timestamp' href='#574220'><time timestamp='2017-10-05T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232460' id='574221'>
<a class='timestamp' href='#574221'><time timestamp='2017-10-05T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic dealing with platform-specific code (sipa)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232460' id='574222'>
<a class='timestamp' href='#574222'><time timestamp='2017-10-05T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;ve recently been looking into faster parallel hashing code
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232460' id='574223'>
<a class='timestamp' href='#574223'><time timestamp='2017-10-05T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
hashing as in sha256?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232460' id='574224'>
<a class='timestamp' href='#574224'><time timestamp='2017-10-05T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in particular, for 8-way parallel SHA256 (which would be useful in merkle root computation and block deserialization), a 5x speedup is doable with AVX2
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232520' id='574225'>
<a class='timestamp' href='#574225'><time timestamp='2017-10-05T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and maybe 2.5x with SSE2
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232520' id='574226'>
<a class='timestamp' href='#574226'><time timestamp='2017-10-05T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and parallel in this case means computing multiple hashes of multiple pieces of data at once?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232520' id='574227'>
<a class='timestamp' href='#574227'><time timestamp='2017-10-05T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
correct
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232520' id='574228'>
<a class='timestamp' href='#574228'><time timestamp='2017-10-05T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
how much speedup is this for the entire IBD?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232520' id='574229'>
<a class='timestamp' href='#574229'><time timestamp='2017-10-05T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: It saves something like 10 minutes on IBD.  But the greater impact is in block relay.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232580' id='574230'>
<a class='timestamp' href='#574230'><time timestamp='2017-10-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(I guess there are constraints there, do all the inputs need to be the same size?)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232580' id='574231'>
<a class='timestamp' href='#574231'><time timestamp='2017-10-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I imagine merkle root is a tiny fraction of the overall process, but otoh it&#x27;s also possibly a blocker on parallelization
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232580' id='574232'>
<a class='timestamp' href='#574232'><time timestamp='2017-10-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Where hash tree computation is most of the time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232580' id='574233'>
<a class='timestamp' href='#574233'><time timestamp='2017-10-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: it is? :O
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232580' id='574234'>
<a class='timestamp' href='#574234'><time timestamp='2017-10-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: yes and no; for now, it&#x27;s just a primitive that you give a pointer to N 64-byte inputs, and produces 32-byte outputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232580' id='574235'>
<a class='timestamp' href='#574235'><time timestamp='2017-10-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
oh, because the signature checks are cached?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232580' id='574236'>
<a class='timestamp' href='#574236'><time timestamp='2017-10-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
in terms of compact block relay, merkle root calculation and deserialize are about the only big timesinks before you can relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232580' id='574237'>
<a class='timestamp' href='#574237'><time timestamp='2017-10-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: which is specific for merkle root computation
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232580' id='574238'>
<a class='timestamp' href='#574238'><time timestamp='2017-10-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: yes for HB BIP152 we don&#x27;t to validation except hashing!
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232580' id='574239'>
<a class='timestamp' href='#574239'><time timestamp='2017-10-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but it can certainly be adapted
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232640' id='574240'>
<a class='timestamp' href='#574240'><time timestamp='2017-10-05T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232640' id='574241'>
<a class='timestamp' href='#574241'><time timestamp='2017-10-05T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: i had a scare when reviewing some new leveldb crc32 changes that i thought (at first glance) could be a consensus issue. I was very angry at myself at that point for not adding a fallback un-optimized verification of the optimized path.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232640' id='574242'>
<a class='timestamp' href='#574242'><time timestamp='2017-10-05T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
anyway, there are multiple ways to integrate this: separate asm code, inline asm blocks, or code using intrinsics (my preference, it&#x27;s much more easy to review, and has no OS-specific warts like the L label prefix...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232640' id='574243'>
<a class='timestamp' href='#574243'><time timestamp='2017-10-05T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa has actually implemented the 8-way AVX2 sha2 and a hash tree computation that uses it... along with specialized implementation of 64-byte input double sha2.. which affords an addition 20%-ish speedup over generic sha2.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232700' id='574244'>
<a class='timestamp' href='#574244'><time timestamp='2017-10-05T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
very cool :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232700' id='574245'>
<a class='timestamp' href='#574245'><time timestamp='2017-10-05T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I prefer intrinsics
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232700' id='574246'>
<a class='timestamp' href='#574246'><time timestamp='2017-10-05T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(except for arm32 whre they suck)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232700' id='574247'>
<a class='timestamp' href='#574247'><time timestamp='2017-10-05T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so, for intrinsics... do we want to have a separate LIBCRYPTO_AVX2 LIBCRYPTO_SSE2 LIBCRYPTO_... with different compile flags each?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232760' id='574248'>
<a class='timestamp' href='#574248'><time timestamp='2017-10-05T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Historically, For some code you cannot achieve equivilent performance w/ intrinsics because you must manage register allocation precisely for things to work, but that isn&#x27;t the case here.... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232760' id='574249'>
<a class='timestamp' href='#574249'><time timestamp='2017-10-05T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or could we rely on __attribute__((target(&quot;avx2&quot;)))
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232760' id='574250'>
<a class='timestamp' href='#574250'><time timestamp='2017-10-05T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but 64 bit platforms the SIMD instructions have been specially tweaked to work well with compilers and intrinsics
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232760' id='574251'>
<a class='timestamp' href='#574251'><time timestamp='2017-10-05T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(which works on both clang and gcc)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232760' id='574252'>
<a class='timestamp' href='#574252'><time timestamp='2017-10-05T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: i think we should test for the target attribute and use it if possible, but not completely rely on it
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232760' id='574253'>
<a class='timestamp' href='#574253'><time timestamp='2017-10-05T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
iirc that improves dispatching time as well?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232760' id='574254'>
<a class='timestamp' href='#574254'><time timestamp='2017-10-05T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: no
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232760' id='574255'>
<a class='timestamp' href='#574255'><time timestamp='2017-10-05T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
different compile flags for different compile units, that&#x27;s the only portable way
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232820' id='574256'>
<a class='timestamp' href='#574256'><time timestamp='2017-10-05T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: I think we can&#x27;t assume intrinsics for all platforms, so we want the separate lib route
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232820' id='574257'>
<a class='timestamp' href='#574257'><time timestamp='2017-10-05T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
dispatching is via a function pointer ultimately in all those cases. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232820' id='574258'>
<a class='timestamp' href='#574258'><time timestamp='2017-10-05T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: you&#x27;re confusing, that&#x27;s not about intrinsics
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232820' id='574259'>
<a class='timestamp' href='#574259'><time timestamp='2017-10-05T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the only difference is avoiding the need for build system complication
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232820' id='574260'>
<a class='timestamp' href='#574260'><time timestamp='2017-10-05T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
intrinsics inthis case are headers like xmmintr.h which provides functions that work on vector types
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232820' id='574261'>
<a class='timestamp' href='#574261'><time timestamp='2017-10-05T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
exactly
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232820' id='574262'>
<a class='timestamp' href='#574262'><time timestamp='2017-10-05T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: __attribute__((target(&quot;avx2&quot;))) isn&#x27;t an option for separate asm code, though, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232880' id='574263'>
<a class='timestamp' href='#574263'><time timestamp='2017-10-05T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: it also isn&#x27;t needed for asm code
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232880' id='574264'>
<a class='timestamp' href='#574264'><time timestamp='2017-10-05T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: isn&#x27;t there elf data that allows them to be setup at load time?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232880' id='574265'>
<a class='timestamp' href='#574265'><time timestamp='2017-10-05T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh no no ELF magic please
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232880' id='574266'>
<a class='timestamp' href='#574266'><time timestamp='2017-10-05T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hmm     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232880' id='574267'>
<a class='timestamp' href='#574267'><time timestamp='2017-10-05T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
not by hand, i thought __attribute__(target) did that behind the scenes
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232880' id='574268'>
<a class='timestamp' href='#574268'><time timestamp='2017-10-05T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
target(&quot;avx2&quot;) just means &quot;this function is compiled as if -mavx2 was passed on the command line
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232940' id='574269'>
<a class='timestamp' href='#574269'><time timestamp='2017-10-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: GCC also has target(&quot;default&quot;), where you can have multiple versions of the same function... which causes automatic dispatch to be added
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232940' id='574270'>
<a class='timestamp' href='#574270'><time timestamp='2017-10-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s non-portable and has other issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232940' id='574271'>
<a class='timestamp' href='#574271'><time timestamp='2017-10-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: they&#x27;re setup at load time, yes-- but they&#x27;re still just a function pointer, which we could also have setup at load time.  Though it is nice that the function override trick can make them run before main.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232940' id='574272'>
<a class='timestamp' href='#574272'><time timestamp='2017-10-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;m normally not scared of low level ELF hacking, but for bitcoin, let&#x27;s try to keep it safe and portable
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232940' id='574273'>
<a class='timestamp' href='#574273'><time timestamp='2017-10-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: how does it behave if I have an explicit -mno-avx2?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232940' id='574274'>
<a class='timestamp' href='#574274'><time timestamp='2017-10-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(in particular clang doesn&#x27;t have that)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232940' id='574275'>
<a class='timestamp' href='#574275'><time timestamp='2017-10-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: ah yes, that&#x27;s what i was thinking of.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232940' id='574276'>
<a class='timestamp' href='#574276'><time timestamp='2017-10-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: so i&#x27;m not suggesting using that
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232940' id='574277'>
<a class='timestamp' href='#574277'><time timestamp='2017-10-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: i assume it overrides it
<br>
</div>

<div class='talk op-msg' data-timestamp='1507232940' id='574278'>
<a class='timestamp' href='#574278'><time timestamp='2017-10-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ok     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233000' id='574279'>
<a class='timestamp' href='#574279'><time timestamp='2017-10-05T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I suppose I can test it
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233000' id='574280'>
<a class='timestamp' href='#574280'><time timestamp='2017-10-05T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, gcc can do it automatically on some platforms, but I&#x27;m afraid the only portable way is to make our own dispatch logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233000' id='574281'>
<a class='timestamp' href='#574281'><time timestamp='2017-10-05T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, we&#x27;ll want our own dispatch logic anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233000' id='574282'>
<a class='timestamp' href='#574282'><time timestamp='2017-10-05T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
we already have some CPUID bits checking 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233000' id='574283'>
<a class='timestamp' href='#574283'><time timestamp='2017-10-05T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so we can test things
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233000' id='574284'>
<a class='timestamp' href='#574284'><time timestamp='2017-10-05T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so it&#x27;s nothing new erally
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233000' id='574285'>
<a class='timestamp' href='#574285'><time timestamp='2017-10-05T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and report which version is being chosen
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233000' id='574286'>
<a class='timestamp' href='#574286'><time timestamp='2017-10-05T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
np, i wasn&#x27;t suggesting. just trying to understand the advantages of one vs the other.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233000' id='574287'>
<a class='timestamp' href='#574287'><time timestamp='2017-10-05T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, exactly
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233060' id='574288'>
<a class='timestamp' href='#574288'><time timestamp='2017-10-05T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but if possible i&#x27;d like to avoid the overhead of needing half a dozen libcrypto_XXX.a things that need to be linked in everywhere
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233060' id='574289'>
<a class='timestamp' href='#574289'><time timestamp='2017-10-05T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
though that&#x27;s really the only advantage
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233060' id='574290'>
<a class='timestamp' href='#574290'><time timestamp='2017-10-05T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so I&#x27;d say: yes, use intrinsics instead of inline/offline asm,  and use our own dispatching, and compile units compiled with appropriate compiler flags
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233060' id='574291'>
<a class='timestamp' href='#574291'><time timestamp='2017-10-05T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
okay.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233120' id='574292'>
<a class='timestamp' href='#574292'><time timestamp='2017-10-05T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
can we say prefer intrinsics instead of use? :) I don&#x27;t think we&#x27;d eschew inline asm if we thought it was better in a particular case.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233120' id='574293'>
<a class='timestamp' href='#574293'><time timestamp='2017-10-05T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes regarding build system it&#x27;s just verbose, not really complex
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233120' id='574294'>
<a class='timestamp' href='#574294'><time timestamp='2017-10-05T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: see my point above about a fallback, though. In the case of mismatch hashes, i think it&#x27;s worthwhile to re-check with a generic implementation before deciding it&#x27;s failed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233180' id='574295'>
<a class='timestamp' href='#574295'><time timestamp='2017-10-05T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: we should be testing these things in startup tests.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233180' id='574296'>
<a class='timestamp' href='#574296'><time timestamp='2017-10-05T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
(yes, it seems to override -mno-*
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233180' id='574297'>
<a class='timestamp' href='#574297'><time timestamp='2017-10-05T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: well if there&#x27;s a case you can do much better than the compiler, sure...
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233180' id='574298'>
<a class='timestamp' href='#574298'><time timestamp='2017-10-05T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
has a weak preference for compile units, but only cause I&#x27;d use them in FIBRE for my FEC stuff, too, but thats not much of a reasoning
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233240' id='574299'>
<a class='timestamp' href='#574299'><time timestamp='2017-10-05T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
hopes we can have POWER9 asm in 0.16 &lt;.&lt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233240' id='574300'>
<a class='timestamp' href='#574300'><time timestamp='2017-10-05T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
agrees
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233240' id='574301'>
<a class='timestamp' href='#574301'><time timestamp='2017-10-05T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: an implementation bug in some branch of one optimized path is scary...
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233240' id='574302'>
<a class='timestamp' href='#574302'><time timestamp='2017-10-05T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: try differently if it fails is just not reasonable in a lot of cases; and often would add a lot of complexity (now you have to not cache hashes, but instead only use hash-verify methods) ... and we don&#x27;t have expected values for thigns like single transaction hashes, just hash roots.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233240' id='574303'>
<a class='timestamp' href='#574303'><time timestamp='2017-10-05T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: in particular, the crc issue had to do with incoming data alignment on x86_64
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233300' id='574304'>
<a class='timestamp' href='#574304'><time timestamp='2017-10-05T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: I agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233300' id='574305'>
<a class='timestamp' href='#574305'><time timestamp='2017-10-05T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: I think we should only do asm optimization in cases where it really makes a lot of difference, for that reason, ther risk has to be worth it
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233360' id='574306'>
<a class='timestamp' href='#574306'><time timestamp='2017-10-05T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: yes, thats something that always needs careful review and we should have unit tests that also stress alignment.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233360' id='574307'>
<a class='timestamp' href='#574307'><time timestamp='2017-10-05T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
special-casing everything makes things a lot harder to review, and test, especially when it starts to need different kinds of hardware
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233360' id='574308'>
<a class='timestamp' href='#574308'><time timestamp='2017-10-05T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but for testable low-level primitives like SHA256 I&#x27;d say it&#x27;s ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233420' id='574309'>
<a class='timestamp' href='#574309'><time timestamp='2017-10-05T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
good thing no one is talking about special casing everything. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233420' id='574310'>
<a class='timestamp' href='#574310'><time timestamp='2017-10-05T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea, sha2 etc have simple testable interfaces.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233420' id='574311'>
<a class='timestamp' href='#574311'><time timestamp='2017-10-05T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no, that&#x27;s just one extreme, I&#x27;ve seen soome graphics drivers which are scary in that regard :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233480' id='574312'>
<a class='timestamp' href='#574312'><time timestamp='2017-10-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
But benchmarks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233480' id='574313'>
<a class='timestamp' href='#574313'><time timestamp='2017-10-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh let&#x27;s special case 4x4 tiles, 4x5 tiles, 4x6 tiles, ... for 3 different architectures
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233480' id='574314'>
<a class='timestamp' href='#574314'><time timestamp='2017-10-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233480' id='574315'>
<a class='timestamp' href='#574315'><time timestamp='2017-10-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
mmm. I don&#x27;t see the harm in doing a quick re-check in a few certain cases (merkle mismatch is a good example)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233480' id='574316'>
<a class='timestamp' href='#574316'><time timestamp='2017-10-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
special-casing benchmarks is a curious form of over-learning
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233480' id='574317'>
<a class='timestamp' href='#574317'><time timestamp='2017-10-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
anyway, i&#x27;ve made my case
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233540' id='574318'>
<a class='timestamp' href='#574318'><time timestamp='2017-10-05T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: because it requires restructing the code to not return hashes but instead only have uncachable hash_Verify methods.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233540' id='574319'>
<a class='timestamp' href='#574319'><time timestamp='2017-10-05T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: re-check in what case?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233540' id='574320'>
<a class='timestamp' href='#574320'><time timestamp='2017-10-05T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
although someone did manage to screw up xpub serialisation at one point IIRC
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233540' id='574321'>
<a class='timestamp' href='#574321'><time timestamp='2017-10-05T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: you mean re-run the validation w/ different implementations if an  incoming block fails?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233540' id='574322'>
<a class='timestamp' href='#574322'><time timestamp='2017-10-05T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(what about false positives?)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233600' id='574323'>
<a class='timestamp' href='#574323'><time timestamp='2017-10-05T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: that&#x27;s a big hammer, but yes-ish
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233600' id='574324'>
<a class='timestamp' href='#574324'><time timestamp='2017-10-05T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: and for small functions like a hash a check in an innerloop will measurably lower performance. ... and you also create the opposite problem, what if the alternative function is the wrong one? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233600' id='574325'>
<a class='timestamp' href='#574325'><time timestamp='2017-10-05T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(I&#x27;d actually consider whole block level more reasonable)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233600' id='574326'>
<a class='timestamp' href='#574326'><time timestamp='2017-10-05T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: I think he means on a high level
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574327'>
<a class='timestamp' href='#574327'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
on the inner level it&#x27;s just NASA-level crazy, let&#x27;s run three implementations and see which ones agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574328'>
<a class='timestamp' href='#574328'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think re-checking a block if it fails is reasonable... but why switch hash functions? it&#x27;s massively more likely your CPU is fried than that the hash function implementation is wrong all along and you never noticed
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574329'>
<a class='timestamp' href='#574329'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but then the dispatch is mutable not just set once at init. :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574330'>
<a class='timestamp' href='#574330'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yeah ... I think we&#x27;re overdesigning this
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574331'>
<a class='timestamp' href='#574331'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
right we have a constant slow stream of complaints from users whos hosts have falsely rejected the blockchain.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574332'>
<a class='timestamp' href='#574332'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
just continue with what you were doing sipa :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574333'>
<a class='timestamp' href='#574333'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: just have a generic non-dispatchable one
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574334'>
<a class='timestamp' href='#574334'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I would like to see that improved somehow.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574335'>
<a class='timestamp' href='#574335'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
any other topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574336'>
<a class='timestamp' href='#574336'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh wait, it&#x27;s time
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574337'>
<a class='timestamp' href='#574337'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#endmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574338'>
<a class='timestamp' href='#574338'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Meeting ended Thu Oct  5 20:01:57 2017 UTC.  Information about MeetBot at <a href="http://wiki.debian.org/MeetBot" class="link" target="_blank">http://wiki.debian.org/MeetBot</a> . (v 0.1.4)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574339'>
<a class='timestamp' href='#574339'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Minutes:        <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-10-05-19.02.html" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-10-05-19.02.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574340'>
<a class='timestamp' href='#574340'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Minutes (text): <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-10-05-19.02.txt" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-10-05-19.02.txt</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233660' id='574341'>
<a class='timestamp' href='#574341'><time timestamp='2017-10-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Log:            <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-10-05-19.02.log.html" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-10-05-19.02.log.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233720' id='574342'>
<a class='timestamp' href='#574342'><time timestamp='2017-10-05T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
#lunch
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233720' id='574343'>
<a class='timestamp' href='#574343'><time timestamp='2017-10-05T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
And for anyone who doesn&#x27;t know yet, hacktoberfest = free t-shirt for 4 PRs in october
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233720' id='574344'>
<a class='timestamp' href='#574344'><time timestamp='2017-10-05T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
<a href="https://hacktoberfest.digitalocean.com" class="link" target="_blank">https://hacktoberfest.digitalocean.com</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233780' id='574345'>
<a class='timestamp' href='#574345'><time timestamp='2017-10-05T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if someone is interested: <a href="https://github.com/sipa/bitcoin/commits/201709_dsha256_64" class="link" target="_blank">https://github.com/sipa/bitcoin/commits/201709_dsha256_64</a> &lt;- 64-byte specialzed SHA256 and AVX2 code
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233780' id='574346'>
<a class='timestamp' href='#574346'><time timestamp='2017-10-05T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sneaky way to learn developers mailing addresses.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233780' id='574347'>
<a class='timestamp' href='#574347'><time timestamp='2017-10-05T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(way too WIP to PR)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233780' id='574348'>
<a class='timestamp' href='#574348'><time timestamp='2017-10-05T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ooh free t-shirts
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233780' id='574349'>
<a class='timestamp' href='#574349'><time timestamp='2017-10-05T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-4'> * sipa</span>&gt;
found the student
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233780' id='574350'>
<a class='timestamp' href='#574350'><time timestamp='2017-10-05T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
gmaxwell: Heh true
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233780' id='574351'>
<a class='timestamp' href='#574351'><time timestamp='2017-10-05T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: very cool. didn&#x27;t mean to rain on your parade.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233780' id='574352'>
<a class='timestamp' href='#574352'><time timestamp='2017-10-05T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: never got any spam that I can tell came from last year&#x27;s
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233840' id='574353'>
<a class='timestamp' href='#574353'><time timestamp='2017-10-05T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
just don&#x27;t use your home address for mailing address ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233840' id='574354'>
<a class='timestamp' href='#574354'><time timestamp='2017-10-05T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233900' id='574355'>
<a class='timestamp' href='#574355'><time timestamp='2017-10-05T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: so imagine that sha2 implementation isn&#x27;t alignment safe. you get a block and miscompute one of the hashes due to alignment. ...  I don&#x27;t see any way of efficiently accomplishing your &#x27;try another function&#x27; approach that would stop the false rejection.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233900' id='574356'>
<a class='timestamp' href='#574356'><time timestamp='2017-10-05T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: too bad the 64-byte specialized generic-x86 code is slower than the generic-data-size SSE4-specialized version
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233960' id='574357'>
<a class='timestamp' href='#574357'><time timestamp='2017-10-05T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: otherwise i&#x27;d straight up PR the 64-byte specialized code
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233960' id='574358'>
<a class='timestamp' href='#574358'><time timestamp='2017-10-05T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the avx code looks very recognizable
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233960' id='574359'>
<a class='timestamp' href='#574359'><time timestamp='2017-10-05T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: it&#x27;s pretty much search replace on SSE4 code
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233960' id='574360'>
<a class='timestamp' href='#574360'><time timestamp='2017-10-05T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
heh     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507233960' id='574361'>
<a class='timestamp' href='#574361'><time timestamp='2017-10-05T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it&#x27;s only detectable at the hash root check at the end a long computation pipeline... when that fails do we just go back and re-deseralize the entire block with different code to compute new hashes in the CTransactions? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234020' id='574362'>
<a class='timestamp' href='#574362'><time timestamp='2017-10-05T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(and if we do, we magnify a DOS vector for someone sending us invalid blocks, though perhaps not enough to worry about)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234020' id='574363'>
<a class='timestamp' href='#574363'><time timestamp='2017-10-05T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s another advantage of intrinsics, it&#x27;s usually easier to review than straight up asm
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234080' id='574364'>
<a class='timestamp' href='#574364'><time timestamp='2017-10-05T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: absolutely
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234080' id='574365'>
<a class='timestamp' href='#574365'><time timestamp='2017-10-05T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no need to keep track in your head where all the registers go
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234080' id='574366'>
<a class='timestamp' href='#574366'><time timestamp='2017-10-05T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: addmittedly that&#x27;s ugly, but yes, i think that&#x27;s worth considering
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234080' id='574367'>
<a class='timestamp' href='#574367'><time timestamp='2017-10-05T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which may be a good thing or a bad thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234080' id='574368'>
<a class='timestamp' href='#574368'><time timestamp='2017-10-05T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
1) no need to keep in your head where the registers go!
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234080' id='574369'>
<a class='timestamp' href='#574369'><time timestamp='2017-10-05T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
2) no way to tell the compiler to keep a certainly value in a register!
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234140' id='574370'>
<a class='timestamp' href='#574370'><time timestamp='2017-10-05T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well combined with the pipelining/interleaving that optimized code needs, and the large number of registers that SIMD architectures have, that can be quite difficult
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234140' id='574371'>
<a class='timestamp' href='#574371'><time timestamp='2017-10-05T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I wish you could assign variables to registers, and have the compiler yell at you if you tried to assign two live variables to the same register.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234200' id='574372'>
<a class='timestamp' href='#574372'><time timestamp='2017-10-05T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
usually there&#x27;s so many registers that it would be good to be able to tell that something is <b>*not*</b> worth storing in a register 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234200' id='574373'>
<a class='timestamp' href='#574373'><time timestamp='2017-10-05T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i believe there is actually a way (in GCC) to force a particular variable into a particular register
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234260' id='574374'>
<a class='timestamp' href='#574374'><time timestamp='2017-10-05T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
int x asm(&quot;%edx&quot;);
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234260' id='574375'>
<a class='timestamp' href='#574375'><time timestamp='2017-10-05T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: and still doesn&#x27;t help with accepting something we shouldn&#x27;t, which is usually a more serious issue.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234320' id='574376'>
<a class='timestamp' href='#574376'><time timestamp='2017-10-05T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: if we had some generic infrastructure to retry a failed validation (e.g. to cope with lossy hardware) then perhaps what you&#x27;re thinking about could be dropped into it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234320' id='574377'>
<a class='timestamp' href='#574377'><time timestamp='2017-10-05T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: i&#x27;m not saying it&#x27;s something we have to do, or something that wouldn&#x27;t be ugly. I&#x27;m moreso coming from a place where I was in full-out panic for a few hours because I thought newer x86_64 machines were about to start diverging...
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234320' id='574378'>
<a class='timestamp' href='#574378'><time timestamp='2017-10-05T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<a href="https://gcc.gnu.org/onlinedocs/gcc/Local-Register-Variables.html#Local-Register-Variables" class="link" target="_blank">https://gcc.gnu.org/onlinedocs/gcc/Local-Register-Variables.html#Local-Register-Variables</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234380' id='574379'>
<a class='timestamp' href='#574379'><time timestamp='2017-10-05T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
so you&#x27;re right, (good!) testing should negate those worries.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234380' id='574380'>
<a class='timestamp' href='#574380'><time timestamp='2017-10-05T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Well, in particular runtime tests... since they&#x27;ll catch failures on the actual hardware the user has.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234380' id='574381'>
<a class='timestamp' href='#574381'><time timestamp='2017-10-05T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: for reference: <a href="https://github.com/google/leveldb/commit/2964b803b857932ff7499d7bebb61dc5514dab7c" class="link" target="_blank">https://github.com/google/leveldb/commit/2964b803b857932ff7499d7bebb61dc5514dab7c</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234380' id='574382'>
<a class='timestamp' href='#574382'><time timestamp='2017-10-05T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234740' id='574383'>
<a class='timestamp' href='#574383'><time timestamp='2017-10-05T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I also don&#x27;t want to rain on anyone&#x27;s parade, and this is OSS so people work on what they find interesting, but I think we shoudl be careful to think about what are priorities for the project 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234740' id='574384'>
<a class='timestamp' href='#574384'><time timestamp='2017-10-05T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
More importantly however, we shoudl be careful about making changes that are not easily reviewable by more than 1 or 2 people unless they are really warranted
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234800' id='574385'>
<a class='timestamp' href='#574385'><time timestamp='2017-10-05T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I&#x27;ve been thinking more about this since bech32.  I think bech32 is completely awesome, I&#x27;m super happy we&#x27;re doing it and imo its a good priority project. But it essentially got no review.  Did anyone other than sdaftuar review it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234860' id='574386'>
<a class='timestamp' href='#574386'><time timestamp='2017-10-05T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Sometimes things will have to be like that, but it shoudl be a tradeoff we consider carefully...  how tricky are we trying to be vs how much is it warranted
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234920' id='574387'>
<a class='timestamp' href='#574387'><time timestamp='2017-10-05T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
tends to agree, though noting that a part of my agreement is my different priorities from some others - performance is maybe much more of a concern for many others in the project more than I
<br>
</div>

<div class='talk op-msg' data-timestamp='1507234920' id='574388'>
<a class='timestamp' href='#574388'><time timestamp='2017-10-05T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I haven&#x27;t evaluated that in the context of the parallelized hashing, but its something I think we should
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235100' id='574389'>
<a class='timestamp' href='#574389'><time timestamp='2017-10-05T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: bech32 had more review then it appeared because we solicited extensive review before publishing the bip.. what didn&#x27;t get review was the checksum itself other than myself and pieter, until sdaftuar.  ... but who reviewed the prior address checksum?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235100' id='574390'>
<a class='timestamp' href='#574390'><time timestamp='2017-10-05T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Clearly no one, because it needlessly sucked. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235100' id='574391'>
<a class='timestamp' href='#574391'><time timestamp='2017-10-05T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well it was too late to review it by the time any of us were around
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235160' id='574392'>
<a class='timestamp' href='#574392'><time timestamp='2017-10-05T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I didn&#x27;t review Bech32 because I figured it was over my head (especially magic checksum stuff).
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235160' id='574393'>
<a class='timestamp' href='#574393'><time timestamp='2017-10-05T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
There were many design changes to the earliest Bech32 proposal that arose out of review, e.g. the delimiter character. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235220' id='574394'>
<a class='timestamp' href='#574394'><time timestamp='2017-10-05T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Yes and of course the 2 people that can&#x27;t be blamed are you and pieter since you did the work.  But I don&#x27;t want us to fall into a trap of just assuming if something is too difficult or outside of our field to review properly that someone else must be doign a good job with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235280' id='574395'>
<a class='timestamp' href='#574395'><time timestamp='2017-10-05T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: and yes i was referring to the checksum
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235280' id='574396'>
<a class='timestamp' href='#574396'><time timestamp='2017-10-05T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but thats a good point...
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235340' id='574397'>
<a class='timestamp' href='#574397'><time timestamp='2017-10-05T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We deal with this for libsecp256k1 too, that fact that it&#x27;s in a different repo is just enabling you to ignore it. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235340' id='574398'>
<a class='timestamp' href='#574398'><time timestamp='2017-10-05T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Though we do have effective review there too.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235400' id='574399'>
<a class='timestamp' href='#574399'><time timestamp='2017-10-05T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Though not as much as I&#x27;d like.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235400' id='574400'>
<a class='timestamp' href='#574400'><time timestamp='2017-10-05T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but at least for secp256k1 it&#x27;s clear what the goal is (implement secp256k1 EC correctly), so someone could review e.g. just the test and judge that they&#x27;re sufficient for that goal
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235400' id='574401'>
<a class='timestamp' href='#574401'><time timestamp='2017-10-05T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: yes, well said. I think that&#x27;s why I find the asm changes scary. I spent a full day trying to learn and understand the sse42 optimized sha2, and only because it was failing some tests. At best, I agree that it looks right, but I could never say it with any degree of certainty. I deferred to &quot;it passes all the tests&quot;.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235460' id='574402'>
<a class='timestamp' href='#574402'><time timestamp='2017-10-05T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
with bech32, the effort is in the design, not the implementation, and there is relatively little proof that the design actually has the properties it claims to have
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235460' id='574403'>
<a class='timestamp' href='#574403'><time timestamp='2017-10-05T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
But thats the same thing as reviewing the bech32 checksum. and fwiw, if feedback on bech32 we got was we needed more reviewers for the checksum, I would have gone and asked a libsecp256k1 contributor to do it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235520' id='574404'>
<a class='timestamp' href='#574404'><time timestamp='2017-10-05T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
because I know e.g. andrew (or peter dettman) aren&#x27;t frightened off by math.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235520' id='574405'>
<a class='timestamp' href='#574405'><time timestamp='2017-10-05T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I think my feedback is one meta level up.  There should have been more people that questioned how much reivew it got
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235520' id='574406'>
<a class='timestamp' href='#574406'><time timestamp='2017-10-05T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, agreed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235520' id='574407'>
<a class='timestamp' href='#574407'><time timestamp='2017-10-05T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well I was thinking that before you commented. Started thinking it as soon as I saw other bitcoin software had merged it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235520' id='574408'>
<a class='timestamp' href='#574408'><time timestamp='2017-10-05T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so i know i&#x27;m not going to review the hashing stuff, just want to make sure other peopel are going to ensure it is properly reviewed
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235580' id='574409'>
<a class='timestamp' href='#574409'><time timestamp='2017-10-05T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i&#x27;m frightened off by code. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235640' id='574410'>
<a class='timestamp' href='#574410'><time timestamp='2017-10-05T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
had someone commented on that earlier, I would have agreed.  I reviewed the checksum work too, but pieter and I worked a lot togeather on it, and if he screwed up he probably would have tained me. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235640' id='574411'>
<a class='timestamp' href='#574411'><time timestamp='2017-10-05T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the cool thing about hash functions is that they have essentially no branches... so it&#x27;s very hard (though not impossible, see the alignment issue) to make it be incorrect only for a hard-to-detect small subset of inputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235700' id='574412'>
<a class='timestamp' href='#574412'><time timestamp='2017-10-05T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes on hash function correctness, but that doesn&#x27;t help with BECH32 design, which I guess as your point above.  It&#x27;s easy to be confident a new implementation of it is conformant... not so much that the design is good.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235700' id='574413'>
<a class='timestamp' href='#574413'><time timestamp='2017-10-05T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235760' id='574414'>
<a class='timestamp' href='#574414'><time timestamp='2017-10-05T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and still no one has basically reviewed our decision to use a cyclic code -- perhaps if we were call coding theorists someone would have known an even better tool... but there is a limit to how far down a rabbit hole we can go.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235760' id='574415'>
<a class='timestamp' href='#574415'><time timestamp='2017-10-05T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: but part of my point was the tradeoff on how important the feature is.  i am definitely +1 on bech32.  and not negative on parallel hashing just raising points for us to think about
<br>
</div>

<div class='talk op-msg' data-timestamp='1507235760' id='574416'>
<a class='timestamp' href='#574416'><time timestamp='2017-10-05T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
anyway, got to run
<br>
</div>

<div class='talk op-msg' data-timestamp='1507239180' id='574417'>
<a class='timestamp' href='#574417'><time timestamp='2017-10-05T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
someone wanna close 11454?
<br>
</div>

<div class='talk op-msg' data-timestamp='1507240560' id='574418'>
<a class='timestamp' href='#574418'><time timestamp='2017-10-05T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I think you can decompose your concerns into two folks-- people will work on whatever they like, but if it&#x27;s going to get merged it needs to deserve the required review attention, since that isn&#x27;t just an indivigual decision.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507240560' id='574419'>
<a class='timestamp' href='#574419'><time timestamp='2017-10-05T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
forks*
<br>
</div>

<div class='talk op-msg' data-timestamp='1507240560' id='574420'>
<a class='timestamp' href='#574420'><time timestamp='2017-10-05T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: and then unrelated, we shouldn&#x27;t be in a state where people don&#x27;t review or even provide meta review of things which are two mathy or too low level and so they assume that they won&#x27;t be of use.
<br>
</div>

<div class='talk op-msg' data-timestamp='1507240620' id='574421'>
<a class='timestamp' href='#574421'><time timestamp='2017-10-05T21:57:00Z'>21:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
And the thing to encourage there is that even if its over your head you can still ask some of the right meta questions. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1507245300' id='574422'>
<a class='timestamp' href='#574422'><time timestamp='2017-10-05T23:15:00Z'>23:15</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theuni opened pull request #11457: Introduce BanMan (master...move-bandb) <a href="https://github.com/bitcoin/bitcoin/pull/11457" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11457</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1507246140' id='574423'>
<a class='timestamp' href='#574423'><time timestamp='2017-10-05T23:29:00Z'>23:29</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jnewbery: your version seems to pass the wallet by name instead of CWalletRef
<br>
</div>

</div>
</section>

</body>
</html>
