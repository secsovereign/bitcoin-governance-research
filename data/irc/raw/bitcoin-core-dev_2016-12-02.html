<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2016-12-02
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2016-12-02' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:25 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-11-02">&lt;</a><span class='header'>  December 2016   </span><a href="/bitcoin-core-dev/2017-01-02">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;             <a class="" href="/bitcoin-core-dev/2016-12-01">1</a>  <a class="current" href="/bitcoin-core-dev/2016-12-02">2</a>  <a class="" href="/bitcoin-core-dev/2016-12-03">3</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-12-04">4</a>  <a class="" href="/bitcoin-core-dev/2016-12-05">5</a>  <a class="" href="/bitcoin-core-dev/2016-12-06">6</a>  <a class="" href="/bitcoin-core-dev/2016-12-07">7</a>  <a class="" href="/bitcoin-core-dev/2016-12-08">8</a>  <a class="" href="/bitcoin-core-dev/2016-12-09">9</a> <a class="" href="/bitcoin-core-dev/2016-12-10">10</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-12-11">11</a> <a class="" href="/bitcoin-core-dev/2016-12-12">12</a> <a class="" href="/bitcoin-core-dev/2016-12-13">13</a> <a class="" href="/bitcoin-core-dev/2016-12-14">14</a> <a class="" href="/bitcoin-core-dev/2016-12-15">15</a> <a class="" href="/bitcoin-core-dev/2016-12-16">16</a> <a class="" href="/bitcoin-core-dev/2016-12-17">17</a>  &#x000A;18 <a class="" href="/bitcoin-core-dev/2016-12-19">19</a> <a class="" href="/bitcoin-core-dev/2016-12-20">20</a> <a class="" href="/bitcoin-core-dev/2016-12-21">21</a> <a class="" href="/bitcoin-core-dev/2016-12-22">22</a> <a class="" href="/bitcoin-core-dev/2016-12-23">23</a> <a class="" href="/bitcoin-core-dev/2016-12-24">24</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-12-25">25</a> <a class="" href="/bitcoin-core-dev/2016-12-26">26</a> <a class="" href="/bitcoin-core-dev/2016-12-27">27</a> <a class="" href="/bitcoin-core-dev/2016-12-28">28</a> <a class="" href="/bitcoin-core-dev/2016-12-29">29</a> <a class="" href="/bitcoin-core-dev/2016-12-30">30</a> <a class="" href="/bitcoin-core-dev/2016-12-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1480637220' id='514776'>
<a class='timestamp' href='#514776'><time timestamp='2016-12-02T00:07:00Z'>00:07</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa pushed 6 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/ad826b3df9f7...dc6dee41f7cf" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/ad826b3df9f7...dc6dee41f7cf</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480637220' id='514777'>
<a class='timestamp' href='#514777'><time timestamp='2016-12-02T00:07:00Z'>00:07</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 4a6b1f3 Matt Corallo: Expose AcceptBlockHeader through main.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1480637220' id='514778'>
<a class='timestamp' href='#514778'><time timestamp='2016-12-02T00:07:00Z'>00:07</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 63fd101 Matt Corallo: Split ::HEADERS processing into two separate cs_main locks...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480637220' id='514779'>
<a class='timestamp' href='#514779'><time timestamp='2016-12-02T00:07:00Z'>00:07</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master a8b936d Matt Corallo: Use exposed ProcessNewBlockHeaders from ProcessMessages
<br>
</div>

<div class='talk op-msg' data-timestamp='1480637220' id='514780'>
<a class='timestamp' href='#514780'><time timestamp='2016-12-02T00:07:00Z'>00:07</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #9183: Final Preparation for main.cpp Split (master...net_processing_5) <a href="https://github.com/bitcoin/bitcoin/pull/9183" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9183</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480637400' id='514781'>
<a class='timestamp' href='#514781'><time timestamp='2016-12-02T00:10:00Z'>00:10</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] TheBlueMatt opened pull request #9260: Mrs Peacock in The Library with The Candlestick (killed main.{h,cpp}) (master...net_processing_file) <a href="https://github.com/bitcoin/bitcoin/pull/9260" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9260</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480637460' id='514782'>
<a class='timestamp' href='#514782'><time timestamp='2016-12-02T00:11:00Z'>00:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1480637460' id='514783'>
<a class='timestamp' href='#514783'><time timestamp='2016-12-02T00:11:00Z'>00:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
did you see the pr text?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480637520' id='514784'>
<a class='timestamp' href='#514784'><time timestamp='2016-12-02T00:12:00Z'>00:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480637760' id='514785'>
<a class='timestamp' href='#514785'><time timestamp='2016-12-02T00:16:00Z'>00:16</time></a>
&lt;<span class='nick nick-3'> bitcoin272</span>&gt;
hey guys I&#x27;m curious, why was 25 chosen for the ancestor count?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480637880' id='514786'>
<a class='timestamp' href='#514786'><time timestamp='2016-12-02T00:18:00Z'>00:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ugh, git isnt smart enough to realize when you rename a file and then create a dumb #include &quot;newfile.h&quot; is a move :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1480637940' id='514787'>
<a class='timestamp' href='#514787'><time timestamp='2016-12-02T00:19:00Z'>00:19</time></a>
&lt;<span class='nick nick-10'> Eliel</span>&gt;
BlueMatt: it should understand it if you do the rename with git mv
<br>
</div>

<div class='talk op-msg' data-timestamp='1480637940' id='514788'>
<a class='timestamp' href='#514788'><time timestamp='2016-12-02T00:19:00Z'>00:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: where does it not realize this?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480638000' id='514789'>
<a class='timestamp' href='#514789'><time timestamp='2016-12-02T00:20:00Z'>00:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
main.h -&gt; validation.h; main.h == #include &quot;validation.h&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1480638000' id='514790'>
<a class='timestamp' href='#514790'><time timestamp='2016-12-02T00:20:00Z'>00:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
because i dont want to touch literally every file
<br>
</div>

<div class='talk op-msg' data-timestamp='1480638000' id='514791'>
<a class='timestamp' href='#514791'><time timestamp='2016-12-02T00:20:00Z'>00:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t understand what the problem is
<br>
</div>

<div class='talk op-msg' data-timestamp='1480638060' id='514792'>
<a class='timestamp' href='#514792'><time timestamp='2016-12-02T00:21:00Z'>00:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
will make rebase of ~everything impossible
<br>
</div>

<div class='talk op-msg' data-timestamp='1480638060' id='514793'>
<a class='timestamp' href='#514793'><time timestamp='2016-12-02T00:21:00Z'>00:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
git is smart when rebasing/merging across moves otherwise
<br>
</div>

<div class='talk op-msg' data-timestamp='1480638120' id='514794'>
<a class='timestamp' href='#514794'><time timestamp='2016-12-02T00:22:00Z'>00:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
Eliel: no, it doesnt cache that info
<br>
</div>

<div class='talk op-msg' data-timestamp='1480638120' id='514795'>
<a class='timestamp' href='#514795'><time timestamp='2016-12-02T00:22:00Z'>00:22</time></a>
&lt;<span class='nick nick-10'> Eliel</span>&gt;
if it won&#x27;t understand it in a single commit, try first renaming and then creating the new file.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480638120' id='514796'>
<a class='timestamp' href='#514796'><time timestamp='2016-12-02T00:22:00Z'>00:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
it regenerates it itself, so there is no place for it to figure it out
<br>
</div>

<div class='talk op-msg' data-timestamp='1480638120' id='514797'>
<a class='timestamp' href='#514797'><time timestamp='2016-12-02T00:22:00Z'>00:22</time></a>
&lt;<span class='nick nick-10'> Eliel</span>&gt;
in two commits
<br>
</div>

<div class='talk op-msg' data-timestamp='1480638120' id='514798'>
<a class='timestamp' href='#514798'><time timestamp='2016-12-02T00:22:00Z'>00:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639260' id='514799'>
<a class='timestamp' href='#514799'><time timestamp='2016-12-02T00:41:00Z'>00:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: does it still do this tracking after a merge commit is introduced around the two commits?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639320' id='514800'>
<a class='timestamp' href='#514800'><time timestamp='2016-12-02T00:42:00Z'>00:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe it treats it as one then
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639320' id='514801'>
<a class='timestamp' href='#514801'><time timestamp='2016-12-02T00:42:00Z'>00:42</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: I have no idea...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639320' id='514802'>
<a class='timestamp' href='#514802'><time timestamp='2016-12-02T00:42:00Z'>00:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
bitcoin272: measurements on the actual network, combined with the compute time created for longer chains (They&#x27;re more expensive to process).
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639320' id='514803'>
<a class='timestamp' href='#514803'><time timestamp='2016-12-02T00:42:00Z'>00:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: can you check? if not, it&#x27;s probably not worth deviating from the &quot;every commit needs to compile and run tests&quot; policy
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639380' id='514804'>
<a class='timestamp' href='#514804'><time timestamp='2016-12-02T00:43:00Z'>00:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
willdo
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639380' id='514805'>
<a class='timestamp' href='#514805'><time timestamp='2016-12-02T00:43:00Z'>00:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
actually, i&#x27;ll check myself - i want to know
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639380' id='514806'>
<a class='timestamp' href='#514806'><time timestamp='2016-12-02T00:43:00Z'>00:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
heh, ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639380' id='514807'>
<a class='timestamp' href='#514807'><time timestamp='2016-12-02T00:43:00Z'>00:43</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
is currently checking which files still dont compile with 1GB of memory in kvm....
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639440' id='514808'>
<a class='timestamp' href='#514808'><time timestamp='2016-12-02T00:44:00Z'>00:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
good
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639500' id='514809'>
<a class='timestamp' href='#514809'><time timestamp='2016-12-02T00:45:00Z'>00:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lots of them, it looks like :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639500' id='514810'>
<a class='timestamp' href='#514810'><time timestamp='2016-12-02T00:45:00Z'>00:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: doesn&#x27;t seem to work
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639500' id='514811'>
<a class='timestamp' href='#514811'><time timestamp='2016-12-02T00:45:00Z'>00:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
across a merge?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639500' id='514812'>
<a class='timestamp' href='#514812'><time timestamp='2016-12-02T00:45:00Z'>00:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
damn git
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639560' id='514813'>
<a class='timestamp' href='#514813'><time timestamp='2016-12-02T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
does rebase work at all across a rename? merge does, but rebase might now
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639560' id='514814'>
<a class='timestamp' href='#514814'><time timestamp='2016-12-02T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
not, actually
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639560' id='514815'>
<a class='timestamp' href='#514815'><time timestamp='2016-12-02T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-10'> Eliel</span>&gt;
maybe you can make it a symlink instead?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639560' id='514816'>
<a class='timestamp' href='#514816'><time timestamp='2016-12-02T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
eww     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639560' id='514817'>
<a class='timestamp' href='#514817'><time timestamp='2016-12-02T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I think i might rather sed all the files
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639560' id='514818'>
<a class='timestamp' href='#514818'><time timestamp='2016-12-02T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i tried rebasing #8580 on top of a merged 9260 (with --no-ff)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639560' id='514819'>
<a class='timestamp' href='#514819'><time timestamp='2016-12-02T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8580" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8580</a> | Make CTransaction actually immutable by sipa · Pull Request #8580 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639560' id='514820'>
<a class='timestamp' href='#514820'><time timestamp='2016-12-02T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and it conflicts in main.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639620' id='514821'>
<a class='timestamp' href='#514821'><time timestamp='2016-12-02T00:47:00Z'>00:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
damn
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639620' id='514822'>
<a class='timestamp' href='#514822'><time timestamp='2016-12-02T00:47:00Z'>00:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
like... the whole file is a conflict block
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639620' id='514823'>
<a class='timestamp' href='#514823'><time timestamp='2016-12-02T00:47:00Z'>00:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ok, well I guess its gonna be rebase-hell either way....
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639620' id='514824'>
<a class='timestamp' href='#514824'><time timestamp='2016-12-02T00:47:00Z'>00:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we could choose to leave one of the two named main.h/.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639620' id='514825'>
<a class='timestamp' href='#514825'><time timestamp='2016-12-02T00:47:00Z'>00:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639620' id='514826'>
<a class='timestamp' href='#514826'><time timestamp='2016-12-02T00:47:00Z'>00:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which at least would make rebases that touch the not-moved-out part work
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639680' id='514827'>
<a class='timestamp' href='#514827'><time timestamp='2016-12-02T00:48:00Z'>00:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i mean could leave it as main.h and change the #define in main.h to VALIDATION and add a TODO thats like &quot;move this shits&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639680' id='514828'>
<a class='timestamp' href='#514828'><time timestamp='2016-12-02T00:48:00Z'>00:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
then do it like when we close merge window so that its easier
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639680' id='514829'>
<a class='timestamp' href='#514829'><time timestamp='2016-12-02T00:48:00Z'>00:48</time></a>
&lt;<span class='nick nick-10'> Eliel</span>&gt;
would symlink cause more trouble than it&#x27;d solve?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639680' id='514830'>
<a class='timestamp' href='#514830'><time timestamp='2016-12-02T00:48:00Z'>00:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
alternatively, I could actually go sed the entire codebase
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639680' id='514831'>
<a class='timestamp' href='#514831'><time timestamp='2016-12-02T00:48:00Z'>00:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
Eliel: I dont think it&#x27;d cause trouble since we have the #define guards
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639740' id='514832'>
<a class='timestamp' href='#514832'><time timestamp='2016-12-02T00:49:00Z'>00:49</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but its super ugly
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639740' id='514833'>
<a class='timestamp' href='#514833'><time timestamp='2016-12-02T00:49:00Z'>00:49</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(and, actually, git might not track that, either?)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639740' id='514834'>
<a class='timestamp' href='#514834'><time timestamp='2016-12-02T00:49:00Z'>00:49</time></a>
&lt;<span class='nick nick-10'> Eliel</span>&gt;
right, true
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639740' id='514835'>
<a class='timestamp' href='#514835'><time timestamp='2016-12-02T00:49:00Z'>00:49</time></a>
&lt;<span class='nick nick-10'> Eliel</span>&gt;
but yes, I think sedding the whole codebase is best
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639740' id='514836'>
<a class='timestamp' href='#514836'><time timestamp='2016-12-02T00:49:00Z'>00:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
validation.h is much larger than net_processing.h, so i&#x27;d suggest having main.h and net_processing.h, rather than validation.h and main.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639740' id='514837'>
<a class='timestamp' href='#514837'><time timestamp='2016-12-02T00:49:00Z'>00:49</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639920' id='514838'>
<a class='timestamp' href='#514838'><time timestamp='2016-12-02T00:52:00Z'>00:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so just remove the last two commits?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480639980' id='514839'>
<a class='timestamp' href='#514839'><time timestamp='2016-12-02T00:53:00Z'>00:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: I went ahead and did as you suggested and left main.cpp moved to validation.cpp, and just added a TODO to main.h to move it
<br>
</div>

<div class='talk op-msg' data-timestamp='1480640040' id='514840'>
<a class='timestamp' href='#514840'><time timestamp='2016-12-02T00:54:00Z'>00:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, i&#x27;d just have left validation.cpp to be main.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1480640040' id='514841'>
<a class='timestamp' href='#514841'><time timestamp='2016-12-02T00:54:00Z'>00:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that move can easily be do at the same time as the .h rename
<br>
</div>

<div class='talk op-msg' data-timestamp='1480640100' id='514842'>
<a class='timestamp' href='#514842'><time timestamp='2016-12-02T00:55:00Z'>00:55</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
welllll....i mean sed wont cuase (m)any rebase issues........
<br>
</div>

<div class='talk op-msg' data-timestamp='1480640160' id='514843'>
<a class='timestamp' href='#514843'><time timestamp='2016-12-02T00:56:00Z'>00:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, but it&#x27;s a weird state to have main.h but validation.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1480640160' id='514844'>
<a class='timestamp' href='#514844'><time timestamp='2016-12-02T00:56:00Z'>00:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and there is no need to that move early
<br>
</div>

<div class='talk op-msg' data-timestamp='1480640160' id='514845'>
<a class='timestamp' href='#514845'><time timestamp='2016-12-02T00:56:00Z'>00:56</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
there is also no need to wait on the wholesale main/validation move/sed
<br>
</div>

<div class='talk op-msg' data-timestamp='1480640160' id='514846'>
<a class='timestamp' href='#514846'><time timestamp='2016-12-02T00:56:00Z'>00:56</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
:p     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480640220' id='514847'>
<a class='timestamp' href='#514847'><time timestamp='2016-12-02T00:57:00Z'>00:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, so either do the whole thing now, or not at all
<br>
</div>

<div class='talk op-msg' data-timestamp='1480640220' id='514848'>
<a class='timestamp' href='#514848'><time timestamp='2016-12-02T00:57:00Z'>00:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I&#x27;m doing it now :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480643400' id='514849'>
<a class='timestamp' href='#514849'><time timestamp='2016-12-02T01:50:00Z'>01:50</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, after looking at 8831 again i can see why you wanted to not have the ReadKeyValue logic in CWallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1480643400' id='514850'>
<a class='timestamp' href='#514850'><time timestamp='2016-12-02T01:50:00Z'>01:50</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
im not sure a class with virtual functions is going to be enough either though
<br>
</div>

<div class='talk op-msg' data-timestamp='1480644660' id='514851'>
<a class='timestamp' href='#514851'><time timestamp='2016-12-02T02:11:00Z'>02:11</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, i could just add a bunch of methods to CWallet like LoadName LoadPurpose etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645500' id='514852'>
<a class='timestamp' href='#514852'><time timestamp='2016-12-02T02:25:00Z'>02:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: for bitcoin272&#x27;s problem, the wallet doesn&#x27;t rebroadcast things that aren&#x27;t in its own mempool correct? so is his node restarting (which would then maybe accept some of the later chain txs) or something else?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645620' id='514853'>
<a class='timestamp' href='#514853'><time timestamp='2016-12-02T02:27:00Z'>02:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: uh, right
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645680' id='514854'>
<a class='timestamp' href='#514854'><time timestamp='2016-12-02T02:28:00Z'>02:28</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: in the code that doesn&#x27;t store an orphan if its parent was rejected...  are we sure that&#x27;s a good idea?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645740' id='514855'>
<a class='timestamp' href='#514855'><time timestamp='2016-12-02T02:29:00Z'>02:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if a parent had too low fee
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645740' id='514856'>
<a class='timestamp' href='#514856'><time timestamp='2016-12-02T02:29:00Z'>02:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it is entirely possible that the parent + orphan would then stay in the mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645740' id='514857'>
<a class='timestamp' href='#514857'><time timestamp='2016-12-02T02:29:00Z'>02:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: well we don&#x27;t have the parent now and won&#x27;t request it so the orphan will not get resolved. We might want to keep it around for BIP152 but right now BIP152 makes NO use of the orphan pool..
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645800' id='514858'>
<a class='timestamp' href='#514858'><time timestamp='2016-12-02T02:30:00Z'>02:30</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
what do you mean we won&#x27;t request it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645800' id='514859'>
<a class='timestamp' href='#514859'><time timestamp='2016-12-02T02:30:00Z'>02:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
while it&#x27;s in the reject filter we won&#x27;t request it. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645860' id='514860'>
<a class='timestamp' href='#514860'><time timestamp='2016-12-02T02:31:00Z'>02:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(&#x27;cause thats what the reject filter does)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645860' id='514861'>
<a class='timestamp' href='#514861'><time timestamp='2016-12-02T02:31:00Z'>02:31</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
argh, thats just kind of an accident about the way alreadyhave works though right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645860' id='514862'>
<a class='timestamp' href='#514862'><time timestamp='2016-12-02T02:31:00Z'>02:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Am I confused? Highly likely... I have a cold. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645920' id='514863'>
<a class='timestamp' href='#514863'><time timestamp='2016-12-02T02:32:00Z'>02:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Well I thought that was the intent-- we don&#x27;t want to request things we &#x27;know&#x27; we will just reject.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645920' id='514864'>
<a class='timestamp' href='#514864'><time timestamp='2016-12-02T02:32:00Z'>02:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i mean in the orphan processing code we&#x27;re specifically requesting the parents, but you&#x27;re right we &quot;AlreadyHave&quot; things that are recentrejects
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645920' id='514865'>
<a class='timestamp' href='#514865'><time timestamp='2016-12-02T02:32:00Z'>02:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yea, we could request it again if the orphan&#x27;s fee was high for example and maybe then they both could be accepted.. would make ancestor feerate mining work better.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645980' id='514866'>
<a class='timestamp' href='#514866'><time timestamp='2016-12-02T02:33:00Z'>02:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah, but i guess i&#x27;m drawing a distinction between requesting txs in response to inv&#x27;s (in which case you dont&#x27; want them if you recentlyrejected)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480645980' id='514867'>
<a class='timestamp' href='#514867'><time timestamp='2016-12-02T02:33:00Z'>02:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
and requesting them as a parent, in which case, maybe you want to try again
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646040' id='514868'>
<a class='timestamp' href='#514868'><time timestamp='2016-12-02T02:34:00Z'>02:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
in fact, we could almost bypass the mempool minfee check altogether since most of our recent peers won&#x27;t send us stuff that violates it anyway and then it would basically just work
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646040' id='514869'>
<a class='timestamp' href='#514869'><time timestamp='2016-12-02T02:34:00Z'>02:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but i guess we can&#x27;t quite do that
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646100' id='514870'>
<a class='timestamp' href='#514870'><time timestamp='2016-12-02T02:35:00Z'>02:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;d like rejection to work differently, putting rejected things in a datastructure that works like the new sigcache open-hashtable where they&#x27;re taged for eager eviction but kept around until actually evicted... and then BIP152 can use that pool, and orphan resolution can use it and so on.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646100' id='514871'>
<a class='timestamp' href='#514871'><time timestamp='2016-12-02T02:35:00Z'>02:35</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
does that work for non-POD
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646160' id='514872'>
<a class='timestamp' href='#514872'><time timestamp='2016-12-02T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
&#x27;works like&#x27; I don&#x27;t mean the lockless aspects of it either, but just the fact that there is a generation/deleted flag. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646220' id='514873'>
<a class='timestamp' href='#514873'><time timestamp='2016-12-02T02:37:00Z'>02:37</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
ok.. i think i&#x27;ll still PR that takes non-stored orphans with rejected parents and adds them to rejects, but just comment that we might want to remove that if we fix up the rest.  i think its strictly better than existing
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646220' id='514874'>
<a class='timestamp' href='#514874'><time timestamp='2016-12-02T02:37:00Z'>02:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the principle is that we already took the cost of transfering the data, we should keep as of the most useful &#x27;useless&#x27; stuff as we can afford... in case it turns up in a block or as a parent.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646280' id='514875'>
<a class='timestamp' href='#514875'><time timestamp='2016-12-02T02:38:00Z'>02:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
But I dunno if it&#x27;s better to spend time working on that or mempool sync.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646340' id='514876'>
<a class='timestamp' href='#514876'><time timestamp='2016-12-02T02:39:00Z'>02:39</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: arghh.. you guys and your mempool sync..   i tend to like the other methods better.. but BlueMatt was trying to convince me nothing can match the privacy of mempool sync
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646340' id='514877'>
<a class='timestamp' href='#514877'><time timestamp='2016-12-02T02:39:00Z'>02:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
hah     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646340' id='514878'>
<a class='timestamp' href='#514878'><time timestamp='2016-12-02T02:39:00Z'>02:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I&#x27;m still a fan
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646400' id='514879'>
<a class='timestamp' href='#514879'><time timestamp='2016-12-02T02:40:00Z'>02:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well perhaps I&#x27;m also chasing it because in theory it&#x27;s possible to get pretty close to optimal bandwidth efficiency and today we waste a lot of bandwidth on relay. (though it&#x27;s gotten incrementally better in the last several releases)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646460' id='514880'>
<a class='timestamp' href='#514880'><time timestamp='2016-12-02T02:41:00Z'>02:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but it&#x27;s easy to venture into overdesign.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646460' id='514881'>
<a class='timestamp' href='#514881'><time timestamp='2016-12-02T02:41:00Z'>02:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
OTOH, Fibre exists and is pretty awesome.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646520' id='514882'>
<a class='timestamp' href='#514882'><time timestamp='2016-12-02T02:42:00Z'>02:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and I could have also said that it was a crazy excercise in chasing optimality.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646580' id='514883'>
<a class='timestamp' href='#514883'><time timestamp='2016-12-02T02:43:00Z'>02:43</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
we should set up some data-collecting nodes that see how much better our block reconstruction would be if we&#x27;d kept everything we were told about
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646580' id='514884'>
<a class='timestamp' href='#514884'><time timestamp='2016-12-02T02:43:00Z'>02:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lol, by adding #include &lt;boost/thread.hpp&gt; to fix windows build error, net_processing.cpp ticked over the 1GB-memory-usage mark :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646580' id='514885'>
<a class='timestamp' href='#514885'><time timestamp='2016-12-02T02:43:00Z'>02:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
fucking boost
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646640' id='514886'>
<a class='timestamp' href='#514886'><time timestamp='2016-12-02T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: I&#x27;m more excited by better relay privacy
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646640' id='514887'>
<a class='timestamp' href='#514887'><time timestamp='2016-12-02T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I&#x27;ve been monitoring a bit of that on and off.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646640' id='514888'>
<a class='timestamp' href='#514888'><time timestamp='2016-12-02T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: i think more recent gccs have lower memory usage? :0
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646640' id='514889'>
<a class='timestamp' href='#514889'><time timestamp='2016-12-02T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
actually I find a lot of the blocks that are almost perfectly reconstucted miss due to replacements / doublespends.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646700' id='514890'>
<a class='timestamp' href='#514890'><time timestamp='2016-12-02T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: how much of the gap can you close? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646700' id='514891'>
<a class='timestamp' href='#514891'><time timestamp='2016-12-02T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: I&#x27;m sure, this is what was in default-debian on digitalocean
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646700' id='514892'>
<a class='timestamp' href='#514892'><time timestamp='2016-12-02T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
replacements/doublespends that you heard about?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646700' id='514893'>
<a class='timestamp' href='#514893'><time timestamp='2016-12-02T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646700' id='514894'>
<a class='timestamp' href='#514894'><time timestamp='2016-12-02T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but weren&#x27;t RBF?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646700' id='514895'>
<a class='timestamp' href='#514895'><time timestamp='2016-12-02T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
huh, can anyone reproduce travis&#x27; hangs on #9260
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646700' id='514896'>
<a class='timestamp' href='#514896'><time timestamp='2016-12-02T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
why didnt you have them?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646700' id='514897'>
<a class='timestamp' href='#514897'><time timestamp='2016-12-02T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i cant...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646700' id='514898'>
<a class='timestamp' href='#514898'><time timestamp='2016-12-02T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9260" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9260</a> | Mrs Peacock in The Library with The Candlestick (killed main.{h,cpp}) by TheBlueMatt · Pull Request #9260 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646700' id='514899'>
<a class='timestamp' href='#514899'><time timestamp='2016-12-02T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
As in I replaced the transaction, and the block confirmed the other (presumably the miner didn&#x27;t support replacement or it didn&#x27;t make itt othem yet)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646700' id='514900'>
<a class='timestamp' href='#514900'><time timestamp='2016-12-02T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: some were RBF.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646760' id='514901'>
<a class='timestamp' href='#514901'><time timestamp='2016-12-02T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Though I did see a doublespend that wasn&#x27;t at least once.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646760' id='514902'>
<a class='timestamp' href='#514902'><time timestamp='2016-12-02T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, maybe I can
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646760' id='514903'>
<a class='timestamp' href='#514903'><time timestamp='2016-12-02T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah, so thats a good use of your eager eviction
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646760' id='514904'>
<a class='timestamp' href='#514904'><time timestamp='2016-12-02T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: if you have debug=1 on, and the BIP152 missed by only a few txids it will log the missing txids and you can check your logs to see if you&#x27;d previously heard them.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646820' id='514905'>
<a class='timestamp' href='#514905'><time timestamp='2016-12-02T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: ha, even easier than i thought
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646820' id='514906'>
<a class='timestamp' href='#514906'><time timestamp='2016-12-02T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oops lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646820' id='514907'>
<a class='timestamp' href='#514907'><time timestamp='2016-12-02T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
during the period I last looked this was the overwhelming majority of blocks that missed only a couple.  But there is a lot of variance since it depends on miner policy...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646820' id='514908'>
<a class='timestamp' href='#514908'><time timestamp='2016-12-02T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I think &#x27;few&#x27; might only be &lt;5 so you might want to turn that up. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646880' id='514909'>
<a class='timestamp' href='#514909'><time timestamp='2016-12-02T02:48:00Z'>02:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The purpose of that logging was to explore the impacts of prefill policies, and we wouldn&#x27;t ever prefill more than a couple.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646880' id='514910'>
<a class='timestamp' href='#514910'><time timestamp='2016-12-02T02:48:00Z'>02:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yup, 5
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646880' id='514911'>
<a class='timestamp' href='#514911'><time timestamp='2016-12-02T02:48:00Z'>02:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
&lt;=5     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646880' id='514912'>
<a class='timestamp' href='#514912'><time timestamp='2016-12-02T02:48:00Z'>02:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(I don&#x27;t think prefill is worth working on until we eliminate all the preventable misses)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480646940' id='514913'>
<a class='timestamp' href='#514913'><time timestamp='2016-12-02T02:49:00Z'>02:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(e.g. by using the orpan pool and by keeping at least replacements around in some kind of pool...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480647000' id='514914'>
<a class='timestamp' href='#514914'><time timestamp='2016-12-02T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sdaftuar and i were saying that we might also want to have a super-HB peer among our 3 HB peers, as you maybe don&#x27;t want 3 peers prefilling for you
<br>
</div>

<div class='talk op-msg' data-timestamp='1480647000' id='514915'>
<a class='timestamp' href='#514915'><time timestamp='2016-12-02T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
for instance one kind of obvious prefill policy is if the tx is non-standard (such as &gt;100k) prefill, but then thats big
<br>
</div>

<div class='talk op-msg' data-timestamp='1480647000' id='514916'>
<a class='timestamp' href='#514916'><time timestamp='2016-12-02T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, though it&#x27;s little enough data that it probably doesn&#x27;t matter.   The spec recommends you don&#x27;t prefill more than 10kb in total.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480647180' id='514917'>
<a class='timestamp' href='#514917'><time timestamp='2016-12-02T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: of course, there is also the Fibre technique where you send FEC data... and then all the peers could usefully contribute. :P 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480647240' id='514918'>
<a class='timestamp' href='#514918'><time timestamp='2016-12-02T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We also don&#x27;t have a way to NAK a HB request-- I reasoned that this was okay because even if every peer requests HB from you... you still end up not really any worse than relaying a full block to a single peer.  Same kind of thinking applies for excessive prefill.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480647240' id='514919'>
<a class='timestamp' href='#514919'><time timestamp='2016-12-02T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah we should probably right a new mining api first.  :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480647240' id='514920'>
<a class='timestamp' href='#514920'><time timestamp='2016-12-02T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
s/right/write/
<br>
</div>

<div class='talk op-msg' data-timestamp='1480647240' id='514921'>
<a class='timestamp' href='#514921'><time timestamp='2016-12-02T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yea, no kidding.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480647360' id='514922'>
<a class='timestamp' href='#514922'><time timestamp='2016-12-02T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;ve also thought that we should probably not be using HB mode at all unless we have inbound connections or we&#x27;re mining (or we&#x27;ve been asked by the user).  but that kind of complexity also got answered with &#x27;the overhead is irrelevant&#x27;.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480648320' id='514923'>
<a class='timestamp' href='#514923'><time timestamp='2016-12-02T03:12:00Z'>03:12</time></a>
&lt;<span class='nick nick-2'> * jtimon</span>&gt;
rebased #8855 again
<br>
</div>

<div class='talk op-msg' data-timestamp='1480648320' id='514924'>
<a class='timestamp' href='#514924'><time timestamp='2016-12-02T03:12:00Z'>03:12</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8855" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8855</a> | Use a proper factory for creating chainparams by jtimon · Pull Request #8855 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480648320' id='514925'>
<a class='timestamp' href='#514925'><time timestamp='2016-12-02T03:12:00Z'>03:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: even with gcc 6.2 net_processing ticks over 1GB (incl host)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480648500' id='514926'>
<a class='timestamp' href='#514926'><time timestamp='2016-12-02T03:15:00Z'>03:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
:(     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480648500' id='514927'>
<a class='timestamp' href='#514927'><time timestamp='2016-12-02T03:15:00Z'>03:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: you have failed at main splitting! :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480648500' id='514928'>
<a class='timestamp' href='#514928'><time timestamp='2016-12-02T03:15:00Z'>03:15</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
intirestingly enough, with +15-22 in main.cpp, #8498 doesn&#x27;t need rebase since sep1
<br>
</div>

<div class='talk op-msg' data-timestamp='1480648500' id='514929'>
<a class='timestamp' href='#514929'><time timestamp='2016-12-02T03:15:00Z'>03:15</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8498" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8498</a> | Optimization: Minimize the number of times it is checked that no money... by jtimon · Pull Request #8498 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480648500' id='514930'>
<a class='timestamp' href='#514930'><time timestamp='2016-12-02T03:15:00Z'>03:15</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
clearly
<br>
</div>

<div class='talk op-msg' data-timestamp='1480648560' id='514931'>
<a class='timestamp' href='#514931'><time timestamp='2016-12-02T03:16:00Z'>03:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
to be fair, so does init
<br>
</div>

<div class='talk op-msg' data-timestamp='1480648560' id='514932'>
<a class='timestamp' href='#514932'><time timestamp='2016-12-02T03:16:00Z'>03:16</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
what did I missed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480648620' id='514933'>
<a class='timestamp' href='#514933'><time timestamp='2016-12-02T03:17:00Z'>03:17</time></a>
&lt;<span class='nick nick-2'> * jtimon</span>&gt;
went to the logs
<br>
</div>

<div class='talk op-msg' data-timestamp='1480648680' id='514934'>
<a class='timestamp' href='#514934'><time timestamp='2016-12-02T03:18:00Z'>03:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] morcos opened pull request #9261: Add unstored orphans with rejected parents to recentRejects (master...orphanRejects) <a href="https://github.com/bitcoin/bitcoin/pull/9261" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9261</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480649160' id='514935'>
<a class='timestamp' href='#514935'><time timestamp='2016-12-02T03:26:00Z'>03:26</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
BlueMatt: not renaming main to validation in the same PR would make it simpler to review
<br>
</div>

<div class='talk op-msg' data-timestamp='1480649220' id='514936'>
<a class='timestamp' href='#514936'><time timestamp='2016-12-02T03:27:00Z'>03:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
jtimon: that pr should be easy to review
<br>
</div>

<div class='talk op-msg' data-timestamp='1480649220' id='514937'>
<a class='timestamp' href='#514937'><time timestamp='2016-12-02T03:27:00Z'>03:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
the main.cpp rename is a clean rename, so that especially
<br>
</div>

<div class='talk op-msg' data-timestamp='1480649340' id='514938'>
<a class='timestamp' href='#514938'><time timestamp='2016-12-02T03:29:00Z'>03:29</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I guess I&#x27;m not enthusiastic about renaming main in general, I believe it still does a lot of things beyond consensus validation, plus it still includes most globals
<br>
</div>

<div class='talk op-msg' data-timestamp='1480649340' id='514939'>
<a class='timestamp' href='#514939'><time timestamp='2016-12-02T03:29:00Z'>03:29</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
but will keep looking
<br>
</div>

<div class='talk op-msg' data-timestamp='1480649460' id='514940'>
<a class='timestamp' href='#514940'><time timestamp='2016-12-02T03:31:00Z'>03:31</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
but yeah, review it&#x27;s not a good argument
<br>
</div>

<div class='talk op-msg' data-timestamp='1480649640' id='514941'>
<a class='timestamp' href='#514941'><time timestamp='2016-12-02T03:34:00Z'>03:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
jtimon: see scrollback, there are ~no functions which are not block/tx processing left in validation.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1480649640' id='514942'>
<a class='timestamp' href='#514942'><time timestamp='2016-12-02T03:34:00Z'>03:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
jtimon: except, yes, globals
<br>
</div>

<div class='talk op-msg' data-timestamp='1480649760' id='514943'>
<a class='timestamp' href='#514943'><time timestamp='2016-12-02T03:36:00Z'>03:36</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/pull/9260#issuecomment-264365400" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9260#issuecomment-264365400</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480649760' id='514944'>
<a class='timestamp' href='#514944'><time timestamp='2016-12-02T03:36:00Z'>03:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
jtimon: what /did/ you review?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480650180' id='514945'>
<a class='timestamp' href='#514945'><time timestamp='2016-12-02T03:43:00Z'>03:43</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
commit by commit, if the moveonlys are moveonlys (ie <a href="https://github.com/bitcoin/bitcoin/pull/9260/commits/84922e4bf4c38227fbbbede50e09c87fe2a5c7f0" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9260/commits/84922e4bf4c38227fbbbede50e09c87fe2a5c7f0</a> ) and what you say in <a href="https://github.com/bitcoin/bitcoin/pull/9260/commits/87c35f584397e2309970afdcca8e03731a86639e" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9260/commits/87c35f584397e2309970afdcca8e03731a86639e</a> is true, everything seems fine or it shouldn&#x27;t compile, to give an utACK I would need to grep mapOrphanTransactions and mapOrphanTransactionsByPrev and verify the 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480650180' id='514946'>
<a class='timestamp' href='#514946'><time timestamp='2016-12-02T03:43:00Z'>03:43</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
moveonlies 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480650840' id='514947'>
<a class='timestamp' href='#514947'><time timestamp='2016-12-02T03:54:00Z'>03:54</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
re rename right, git knows the file is renamed but you eat the include changes which I agree is not hard to review
<br>
</div>

<div class='talk op-msg' data-timestamp='1480651020' id='514948'>
<a class='timestamp' href='#514948'><time timestamp='2016-12-02T03:57:00Z'>03:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: I thought about this global version/context parameters thing in RPC a bit, and there&#x27;s several other potentially controversial solutions that are used for JSON API versioning we could consider as well: an alternative (say &quot;v2&quot;) entry point, or using a HTTP header. An advantage would be that these are conceptually separate from normal arguments
<br>
</div>

<div class='talk op-msg' data-timestamp='1480651080' id='514949'>
<a class='timestamp' href='#514949'><time timestamp='2016-12-02T03:58:00Z'>03:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: I&#x27;m not specifically aiming 8811 for any release but I&#x27;d sure hope it can be merged before 0.14 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480651080' id='514950'>
<a class='timestamp' href='#514950'><time timestamp='2016-12-02T03:58:00Z'>03:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: as it changes all the RPC dispatch tables it&#x27;s pretty annoying to keep up to date
<br>
</div>

<div class='talk op-msg' data-timestamp='1480651140' id='514951'>
<a class='timestamp' href='#514951'><time timestamp='2016-12-02T03:59:00Z'>03:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: I just wish people would test it a bit
<br>
</div>

<div class='talk op-msg' data-timestamp='1480651320' id='514952'>
<a class='timestamp' href='#514952'><time timestamp='2016-12-02T04:02:00Z'>04:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: regarding testing it: maybe it would make sense to port at least one of the RPC tests to fully using named arguments? currently it adds a test but that one is specifically for the named-arguments-parsing functionality
<br>
</div>

<div class='talk op-msg' data-timestamp='1480651500' id='514953'>
<a class='timestamp' href='#514953'><time timestamp='2016-12-02T04:05:00Z'>04:05</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
sipa: BlueMatt: if we&#x27;re doing file renames, maybe we can move ahead with some in <a href="https://github.com/bitcoin/bitcoin/pull/8328" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8328</a> (those people can agree on)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480651740' id='514954'>
<a class='timestamp' href='#514954'><time timestamp='2016-12-02T04:09:00Z'>04:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] instagibbs opened pull request #9262: Don&#x27;t consider coins available if too many ancestors in mempool (master...toolong) <a href="https://github.com/bitcoin/bitcoin/pull/9262" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9262</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654140' id='514955'>
<a class='timestamp' href='#514955'><time timestamp='2016-12-02T04:49:00Z'>04:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/dc6dee41f7cf...c4d22f6eb216" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/dc6dee41f7cf...c4d22f6eb216</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654140' id='514956'>
<a class='timestamp' href='#514956'><time timestamp='2016-12-02T04:49:00Z'>04:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 10ae7a7 Matt Corallo: Revert &quot;Use async name resolving to improve net thread responsiveness&quot;...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654140' id='514957'>
<a class='timestamp' href='#514957'><time timestamp='2016-12-02T04:49:00Z'>04:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master c4d22f6 Wladimir J. van der Laan: Merge #9229: Remove calls to getaddrinfo_a...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654140' id='514958'>
<a class='timestamp' href='#514958'><time timestamp='2016-12-02T04:49:00Z'>04:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9229: Remove calls to getaddrinfo_a (master...2016-11-gai) <a href="https://github.com/bitcoin/bitcoin/pull/9229" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9229</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654140' id='514959'>
<a class='timestamp' href='#514959'><time timestamp='2016-12-02T04:49:00Z'>04:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
btw flagging things as &quot;needs backport&quot; with &quot;0.14&quot; doesn&#x27;t make much sense :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654260' id='514960'>
<a class='timestamp' href='#514960'><time timestamp='2016-12-02T04:51:00Z'>04:51</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 1 new commit to 0.13: <a href="https://github.com/bitcoin/bitcoin/commit/b172377857f9b5a0b2f43e0e57be9acf82a6c50a" class="link" target="_blank">https://github.com/bitcoin/bitcoin/commit/b172377857f9b5a0b2f43e0e57be9acf82a6c50a</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654260' id='514961'>
<a class='timestamp' href='#514961'><time timestamp='2016-12-02T04:51:00Z'>04:51</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/0.13 b172377 Matt Corallo: Revert &quot;Use async name resolving to improve net thread responsiveness&quot;...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654320' id='514962'>
<a class='timestamp' href='#514962'><time timestamp='2016-12-02T04:52:00Z'>04:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: i merged a few things that still need backporting
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654380' id='514963'>
<a class='timestamp' href='#514963'><time timestamp='2016-12-02T04:53:00Z'>04:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: that&#x27;s fine, we should probably do that in a pull grouping them together
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654380' id='514964'>
<a class='timestamp' href='#514964'><time timestamp='2016-12-02T04:53:00Z'>04:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: I just have a really bad feeling about the async resolving thing so backported that immediately
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654500' id='514965'>
<a class='timestamp' href='#514965'><time timestamp='2016-12-02T04:55:00Z'>04:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: I suppose they&#x27;re all in this list? <a href="https://github.com/bitcoin/bitcoin/pulls?q=is%3Apr+label%3A%22Needs+backport%22+is%3Aclosed+milestone%3A0.13.2" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pulls?q=is%3Apr+label%3A%22Needs+backport%22+is%3Aclosed+milestone%3A0.13.2</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654500' id='514966'>
<a class='timestamp' href='#514966'><time timestamp='2016-12-02T04:55:00Z'>04:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if not they should be labeled &quot;Needs backport&quot; with milestone 0.13.2
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654560' id='514967'>
<a class='timestamp' href='#514967'><time timestamp='2016-12-02T04:56:00Z'>04:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654800' id='514968'>
<a class='timestamp' href='#514968'><time timestamp='2016-12-02T05:00:00Z'>05:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
heh this is the code in libc where it crashes: <a href="https://0bin.net/paste/V1n0GkHdlDatZrnO#N5htO2" class="link" target="_blank">https://0bin.net/paste/V1n0GkHdlDatZrnO#N5htO2</a>+DbXw1EtNNKz4oB-3ykuixE4KGJTLiZ56/V9L  to be specific: the if (--waitlist) line
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654800' id='514969'>
<a class='timestamp' href='#514969'><time timestamp='2016-12-02T05:00:00Z'>05:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
mind the &quot;This is tricky.  See getaddrinfo_a.c for the reason why this works.&quot; comment :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654920' id='514970'>
<a class='timestamp' href='#514970'><time timestamp='2016-12-02T05:02:00Z'>05:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that does not look thread safe at all
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654920' id='514971'>
<a class='timestamp' href='#514971'><time timestamp='2016-12-02T05:02:00Z'>05:02</time></a>
&lt;<span class='nick nick-16'> Lightsword</span>&gt;
wumpus, that’s not going to be externally exploitable is it for things that uses getaddrinfo?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654980' id='514972'>
<a class='timestamp' href='#514972'><time timestamp='2016-12-02T05:03:00Z'>05:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
Lightsword: I don&#x27;t <b>*think*</b> so, but it depends on what kind of bug this turns out to be
<br>
</div>

<div class='talk op-msg' data-timestamp='1480654980' id='514973'>
<a class='timestamp' href='#514973'><time timestamp='2016-12-02T05:03:00Z'>05:03</time></a>
&lt;<span class='nick nick-16'> Lightsword</span>&gt;
has upstream confirmed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655100' id='514974'>
<a class='timestamp' href='#514974'><time timestamp='2016-12-02T05:05:00Z'>05:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s not triggered by any specific data the remote is sending, if that&#x27;s what you&#x27;re worried about
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655160' id='514975'>
<a class='timestamp' href='#514975'><time timestamp='2016-12-02T05:06:00Z'>05:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
also it&#x27;s not possible for P2P clients to make bitcoind do DNS lookups
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655160' id='514976'>
<a class='timestamp' href='#514976'><time timestamp='2016-12-02T05:06:00Z'>05:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so no, I don&#x27;t think this is a security issue for us, but you can&#x27;t be too careful right...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655280' id='514977'>
<a class='timestamp' href='#514977'><time timestamp='2016-12-02T05:08:00Z'>05:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s a confirmed use after free, not a NULL pointer dereference
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655340' id='514978'>
<a class='timestamp' href='#514978'><time timestamp='2016-12-02T05:09:00Z'>05:09</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
When are we planning on releasing 0.13.2 ? Looks like 5 backports left.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655340' id='514979'>
<a class='timestamp' href='#514979'><time timestamp='2016-12-02T05:09:00Z'>05:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s doing &quot;0x7ffff79b77f0 &lt;__gai_notify+48&gt;        subl   $0x1,(%rdx)&quot; where rdx is, say, 0x441f0fc3c08944, then if you try to inspect that &quot;0x441f0fc3c08944:       Cannot access memory at address 0x441f0fc3c08944&quot; -- too bad, already unmapped
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655340' id='514980'>
<a class='timestamp' href='#514980'><time timestamp='2016-12-02T05:09:00Z'>05:09</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
*the first rc of 0.13.2
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655340' id='514981'>
<a class='timestamp' href='#514981'><time timestamp='2016-12-02T05:09:00Z'>05:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
Lightsword: sort of <a href="https://sourceware.org/bugzilla/show_bug.cgi?id=20874" class="link" target="_blank">https://sourceware.org/bugzilla/show_bug.cgi?id=20874</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655460' id='514982'>
<a class='timestamp' href='#514982'><time timestamp='2016-12-02T05:11:00Z'>05:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: well yesterday in the meeting there was agreement that all the 0.13.2 backports are labeled - so after these are backported rc1 can be released any time
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655580' id='514983'>
<a class='timestamp' href='#514983'><time timestamp='2016-12-02T05:13:00Z'>05:13</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Ok. I need to start attending the meetings, but difficult with time-diff though.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655580' id='514984'>
<a class='timestamp' href='#514984'><time timestamp='2016-12-02T05:13:00Z'>05:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes it&#x27;s not a good time for australia/most of asia
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655640' id='514985'>
<a class='timestamp' href='#514985'><time timestamp='2016-12-02T05:14:00Z'>05:14</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Also, not sure why I said 5 PRs left, there is only 9239, 9194 and 9191 (which includes multiple, mostly test-related fixes).
<br>
</div>

<div class='talk op-msg' data-timestamp='1480655700' id='514986'>
<a class='timestamp' href='#514986'><time timestamp='2016-12-02T05:15:00Z'>05:15</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
It&#x27;ll be right. Always have the logs, just need to make time for reading them. I think someone also posts a meeting summary to reddit or something.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480656060' id='514987'>
<a class='timestamp' href='#514987'><time timestamp='2016-12-02T05:21:00Z'>05:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
not just to reddit :) <a href="https://bitcoincore.org/en/meetings/2016/10/20/" class="link" target="_blank">https://bitcoincore.org/en/meetings/2016/10/20/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480656840' id='514988'>
<a class='timestamp' href='#514988'><time timestamp='2016-12-02T05:34:00Z'>05:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
anyhow we could, say, alternate between two meeting times if there is a lot of demand for people from asia/australia to attend the meetings. But I&#x27;ve never really got that impression.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480656960' id='514989'>
<a class='timestamp' href='#514989'><time timestamp='2016-12-02T05:36:00Z'>05:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the meeting is on SHA256(days_since_1970) % 24 UTC.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657080' id='514990'>
<a class='timestamp' href='#514990'><time timestamp='2016-12-02T05:38:00Z'>05:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I ws thinking of suggesting alternating but then though that there probably isn&#x27;t a good time for both asia and europe.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657080' id='514991'>
<a class='timestamp' href='#514991'><time timestamp='2016-12-02T05:38:00Z'>05:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: theoretically that would be fair, in practice if you don&#x27;t take the distribution of people over timezones into account, you may end up with a time that&#x27;s only good for people who live in the middle of the atlantic ocean :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657140' id='514992'>
<a class='timestamp' href='#514992'><time timestamp='2016-12-02T05:39:00Z'>05:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: right I don&#x27;t think there is
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657140' id='514993'>
<a class='timestamp' href='#514993'><time timestamp='2016-12-02T05:39:00Z'>05:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: 8 am UTC would be relatively good for both asia and europe
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657200' id='514994'>
<a class='timestamp' href='#514994'><time timestamp='2016-12-02T05:40:00Z'>05:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
8 am UTC would be quite a good time for me
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657260' id='514995'>
<a class='timestamp' href='#514995'><time timestamp='2016-12-02T05:41:00Z'>05:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(9am in western europe, 4pm in hong kong, midnight on west coast)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657260' id='514996'>
<a class='timestamp' href='#514996'><time timestamp='2016-12-02T05:41:00Z'>05:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
3am on east coast, however
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657260' id='514997'>
<a class='timestamp' href='#514997'><time timestamp='2016-12-02T05:41:00Z'>05:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
thats too late for east coast US though I don&#x27;t know if we currently have any eastcoasters.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657260' id='514998'>
<a class='timestamp' href='#514998'><time timestamp='2016-12-02T05:41:00Z'>05:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh instagibbs is duh.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657260' id='514999'>
<a class='timestamp' href='#514999'><time timestamp='2016-12-02T05:41:00Z'>05:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos, suhas, instagibbs
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657260' id='515000'>
<a class='timestamp' href='#515000'><time timestamp='2016-12-02T05:41:00Z'>05:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh double duh.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657260' id='515001'>
<a class='timestamp' href='#515001'><time timestamp='2016-12-02T05:41:00Z'>05:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
in any case every time would be bad for someone - so to motivate a (even bi-weekly) time change there has to be enough demand
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657260' id='515002'>
<a class='timestamp' href='#515002'><time timestamp='2016-12-02T05:41:00Z'>05:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I just think of NY as existing in a parallel universe.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657320' id='515003'>
<a class='timestamp' href='#515003'><time timestamp='2016-12-02T05:42:00Z'>05:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
e.g. just rebroad asking for it is not enough :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657320' id='515004'>
<a class='timestamp' href='#515004'><time timestamp='2016-12-02T05:42:00Z'>05:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well we lose jl2012 due to this.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657320' id='515005'>
<a class='timestamp' href='#515005'><time timestamp='2016-12-02T05:42:00Z'>05:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes and fanquake
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657380' id='515006'>
<a class='timestamp' href='#515006'><time timestamp='2016-12-02T05:43:00Z'>05:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lol, google has a thing where they will hook up your project to run in fuzzing on some machiens 24/7, except to do it you have to agree that they will announce the bug to the world 7 days after you release a fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657440' id='515007'>
<a class='timestamp' href='#515007'><time timestamp='2016-12-02T05:44:00Z'>05:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
who in their right mind would agree to that? thats like stupid high-risk for users
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657500' id='515008'>
<a class='timestamp' href='#515008'><time timestamp='2016-12-02T05:45:00Z'>05:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it could make sense for software that auto-updates quickly and automatically
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657500' id='515009'>
<a class='timestamp' href='#515009'><time timestamp='2016-12-02T05:45:00Z'>05:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but no, certainly not for bitcoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657560' id='515010'>
<a class='timestamp' href='#515010'><time timestamp='2016-12-02T05:46:00Z'>05:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I mean they&#x27;re talking about it for &quot;critical infrastructure&quot; (ie common libraries)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657620' id='515011'>
<a class='timestamp' href='#515011'><time timestamp='2016-12-02T05:47:00Z'>05:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
like, sure, maybe google updates their libcs quickly, but the vast majority of folks do not at all
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657620' id='515012'>
<a class='timestamp' href='#515012'><time timestamp='2016-12-02T05:47:00Z'>05:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
4pm UTC: 8am westcoast, 11am eastcoast, 5pm europe, midnight hong kong
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657680' id='515013'>
<a class='timestamp' href='#515013'><time timestamp='2016-12-02T05:48:00Z'>05:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: for libraries it&#x27;s much harder to say, agreed, there will be tons of especially embedded platforms that never update them at all
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657740' id='515014'>
<a class='timestamp' href='#515014'><time timestamp='2016-12-02T05:49:00Z'>05:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
then again that&#x27;s not google&#x27;s fault - finding the vulnerabilities before the &#x27;bad people&#x27; do is still important
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657740' id='515015'>
<a class='timestamp' href='#515015'><time timestamp='2016-12-02T05:49:00Z'>05:49</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: sure, but that doesnt mean you announce them publicly 7 days after the first release with the fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657800' id='515016'>
<a class='timestamp' href='#515016'><time timestamp='2016-12-02T05:50:00Z'>05:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(or alternatively, after the &quot;bad people&quot; have already used them for years to get access anwyay...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657800' id='515017'>
<a class='timestamp' href='#515017'><time timestamp='2016-12-02T05:50:00Z'>05:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes, you fix quickly, and then announce it much later
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657800' id='515018'>
<a class='timestamp' href='#515018'><time timestamp='2016-12-02T05:50:00Z'>05:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: it&#x27;s fine for projects that are alread well fuzzed, I suppose.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657860' id='515019'>
<a class='timestamp' href='#515019'><time timestamp='2016-12-02T05:51:00Z'>05:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
NSA already found those vulns last week anyways.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657860' id='515020'>
<a class='timestamp' href='#515020'><time timestamp='2016-12-02T05:51:00Z'>05:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
it might be better than /not/ doing the fuzzing, but its still a super shitty policy
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657860' id='515021'>
<a class='timestamp' href='#515021'><time timestamp='2016-12-02T05:51:00Z'>05:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s the old responsible disclosure discussion
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657920' id='515022'>
<a class='timestamp' href='#515022'><time timestamp='2016-12-02T05:52:00Z'>05:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: responsible disclosure (usually) is a discussion about what to do when upstream tells you to fuck off, not what to do when upstream is responsive
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657980' id='515023'>
<a class='timestamp' href='#515023'><time timestamp='2016-12-02T05:53:00Z'>05:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: sure, though part of it is how long to wait with public announcement
<br>
</div>

<div class='talk op-msg' data-timestamp='1480657980' id='515024'>
<a class='timestamp' href='#515024'><time timestamp='2016-12-02T05:53:00Z'>05:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
suresure, but who the fuck ever suggested 7 days?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480658460' id='515025'>
<a class='timestamp' href='#515025'><time timestamp='2016-12-02T06:01:00Z'>06:01</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
responsible disclosure is using a timeline which is fair both to the public who is affected by the bug and the vendor, without unfairly prioritizing one over the other.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480658520' id='515026'>
<a class='timestamp' href='#515026'><time timestamp='2016-12-02T06:02:00Z'>06:02</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
The timelines <b>*were once*</b> measured in weeks, since the public good of disclosure was more important than protecting the financial interests of a corporation who wasn&#x27;t remunerating the researcher.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480658700' id='515027'>
<a class='timestamp' href='#515027'><time timestamp='2016-12-02T06:05:00Z'>06:05</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
midnightmagic: yes, but one week? fuck people who just blindly update and would be protected wouldnt even get protected if you only wait 7 days
<br>
</div>

<div class='talk op-msg' data-timestamp='1480658760' id='515028'>
<a class='timestamp' href='#515028'><time timestamp='2016-12-02T06:06:00Z'>06:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
midnightmagic: I mean I&#x27;m with you....fuck the vendor and their financial interests, users must be protected, but 7 days is short enough that you&#x27;re harming users, too
<br>
</div>

<div class='talk op-msg' data-timestamp='1480658820' id='515029'>
<a class='timestamp' href='#515029'><time timestamp='2016-12-02T06:07:00Z'>06:07</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
7 days is pretty sure. At least Gobbles and/or that italian ultra-prolific guy isn&#x27;t just dropping 0-days and letting the vendors scramble.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480658820' id='515030'>
<a class='timestamp' href='#515030'><time timestamp='2016-12-02T06:07:00Z'>06:07</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
*pretty short
<br>
</div>

<div class='talk op-msg' data-timestamp='1480659000' id='515031'>
<a class='timestamp' href='#515031'><time timestamp='2016-12-02T06:10:00Z'>06:10</time></a>
&lt;<span class='nick nick-4'> * midnightmagic</span>&gt;
tries to remember that italian guy again..
<br>
</div>

<div class='talk op-msg' data-timestamp='1480659180' id='515032'>
<a class='timestamp' href='#515032'><time timestamp='2016-12-02T06:13:00Z'>06:13</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
ah, here he is. I&#x27;ve come to appreciate the way he does things: <a href="http://aluigi.altervista.org/" class="link" target="_blank">http://aluigi.altervista.org/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480659180' id='515033'>
<a class='timestamp' href='#515033'><time timestamp='2016-12-02T06:13:00Z'>06:13</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
(not even vendor notification.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480662180' id='515034'>
<a class='timestamp' href='#515034'><time timestamp='2016-12-02T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] luke-jr opened pull request #9263: release notes: Only free transactions are being removed, not priority. (master...relnotes_freetxn) <a href="https://github.com/bitcoin/bitcoin/pull/9263" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9263</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480662720' id='515035'>
<a class='timestamp' href='#515035'><time timestamp='2016-12-02T07:12:00Z'>07:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj opened pull request #9264: 0.13.2 backports (0.13...2016_12_backports_0_13) <a href="https://github.com/bitcoin/bitcoin/pull/9264" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9264</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480662960' id='515036'>
<a class='timestamp' href='#515036'><time timestamp='2016-12-02T07:16:00Z'>07:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
What is preferable: two keypools one for change, one for external  OR  a keypool with keys flagged for internal or external use?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663020' id='515037'>
<a class='timestamp' href='#515037'><time timestamp='2016-12-02T07:17:00Z'>07:17</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9191: [qa] 0.13.2 Backports (0.13...Mf1611-q01302) <a href="https://github.com/bitcoin/bitcoin/pull/9191" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9191</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663020' id='515038'>
<a class='timestamp' href='#515038'><time timestamp='2016-12-02T07:17:00Z'>07:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
possibly the flagging approach is easier to do in a backwards compatible way - old versions can ignore the flags
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663140' id='515039'>
<a class='timestamp' href='#515039'><time timestamp='2016-12-02T07:19:00Z'>07:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: good point.. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663260' id='515040'>
<a class='timestamp' href='#515040'><time timestamp='2016-12-02T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
for the deserialization (SerializationOp(Stream&amp; s, ...)), if the stream is longer then the acctual READWRITE, it will be ignored? right? (for backward comp.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663260' id='515041'>
<a class='timestamp' href='#515041'><time timestamp='2016-12-02T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
python3 ./qa/pull-tester/rpc-tests.py mempool_packages takes 31s in my computer, would it be crazy to move it from the extended test to the regular ones?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663260' id='515042'>
<a class='timestamp' href='#515042'><time timestamp='2016-12-02T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/c4d22f6eb216...3fbf07926240" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/c4d22f6eb216...3fbf07926240</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663260' id='515043'>
<a class='timestamp' href='#515043'><time timestamp='2016-12-02T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master d824ad0 Alex Morcos: Disable fee estimates for a confirm target of 1 block
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663260' id='515044'>
<a class='timestamp' href='#515044'><time timestamp='2016-12-02T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master e878689 Alex Morcos: Make GUI incapable of setting tx confirm target of 1
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663260' id='515045'>
<a class='timestamp' href='#515045'><time timestamp='2016-12-02T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 3fbf079 Wladimir J. van der Laan: Merge #9239: Disable fee estimates for 1 block target...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663260' id='515046'>
<a class='timestamp' href='#515046'><time timestamp='2016-12-02T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9239: Disable fee estimates for 1 block target (master...blockstreamtil2blocks) <a href="https://github.com/bitcoin/bitcoin/pull/9239" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9239</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663500' id='515047'>
<a class='timestamp' href='#515047'><time timestamp='2016-12-02T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: doh, I was about to do that (more backports)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663560' id='515048'>
<a class='timestamp' href='#515048'><time timestamp='2016-12-02T07:26:00Z'>07:26</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
BlueMatt: don&#x27;t miners use priority for their own transactions? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663560' id='515049'>
<a class='timestamp' href='#515049'><time timestamp='2016-12-02T07:26:00Z'>07:26</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
jtimon takes 51s here
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663560' id='515050'>
<a class='timestamp' href='#515050'><time timestamp='2016-12-02T07:26:00Z'>07:26</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
(not the coinbase, just, &quot;other&quot; transactions)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663740' id='515051'>
<a class='timestamp' href='#515051'><time timestamp='2016-12-02T07:29:00Z'>07:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: I could do a BP of #8989
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663740' id='515052'>
<a class='timestamp' href='#515052'><time timestamp='2016-12-02T07:29:00Z'>07:29</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8989" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8989</a> | [Qt] overhaul smart-fee slider, adjust default confirmation target by jonasschnelli · Pull Request #8989 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663740' id='515053'>
<a class='timestamp' href='#515053'><time timestamp='2016-12-02T07:29:00Z'>07:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: not sure that&#x27;s what we want though?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663740' id='515054'>
<a class='timestamp' href='#515054'><time timestamp='2016-12-02T07:29:00Z'>07:29</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
dcousens: fee delta works fine for that use case
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663740' id='515055'>
<a class='timestamp' href='#515055'><time timestamp='2016-12-02T07:29:00Z'>07:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: I mean, this is a minor release, how much do we want the GUI to change?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663740' id='515056'>
<a class='timestamp' href='#515056'><time timestamp='2016-12-02T07:29:00Z'>07:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. It would be a notable change.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663800' id='515057'>
<a class='timestamp' href='#515057'><time timestamp='2016-12-02T07:30:00Z'>07:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
maybe it&#x27;s ok though in this case I&#x27;m not sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663800' id='515058'>
<a class='timestamp' href='#515058'><time timestamp='2016-12-02T07:30:00Z'>07:30</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Can we BP #9239 without the GUI changes?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663800' id='515059'>
<a class='timestamp' href='#515059'><time timestamp='2016-12-02T07:30:00Z'>07:30</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9239" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9239</a> | Disable fee estimates for 1 block target by morcos · Pull Request #9239 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663800' id='515060'>
<a class='timestamp' href='#515060'><time timestamp='2016-12-02T07:30:00Z'>07:30</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
fanquake: thanks, still, I don&#x27;t see a consistency in times between extended and non-extended tests, I have a little commit in a long branch that I can cherry pick based only on what makes sense for my computer based only on time, introducing -skipslow that works with or without extended, but it looks a little bit too complicated
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663800' id='515061'>
<a class='timestamp' href='#515061'><time timestamp='2016-12-02T07:30:00Z'>07:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
you could reply that in the #9239 topic, probably morcos has an opinoin on it too :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663800' id='515062'>
<a class='timestamp' href='#515062'><time timestamp='2016-12-02T07:30:00Z'>07:30</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9239" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9239</a> | Disable fee estimates for 1 block target by morcos · Pull Request #9239 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663860' id='515063'>
<a class='timestamp' href='#515063'><time timestamp='2016-12-02T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: or just disabled (shorten the slider range) for target 1 in the backport
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663860' id='515064'>
<a class='timestamp' href='#515064'><time timestamp='2016-12-02T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-3'> * wumpus</span>&gt;
wishes gribble had rate-limiting
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663860' id='515065'>
<a class='timestamp' href='#515065'><time timestamp='2016-12-02T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: yep, exactly
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663860' id='515066'>
<a class='timestamp' href='#515066'><time timestamp='2016-12-02T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: although that may turn out to be a riskier/less-tested solution than #8989 which at least has been tested in master. DIfficult.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663860' id='515067'>
<a class='timestamp' href='#515067'><time timestamp='2016-12-02T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8989" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8989</a> | [Qt] overhaul smart-fee slider, adjust default confirmation target by jonasschnelli · Pull Request #8989 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663920' id='515068'>
<a class='timestamp' href='#515068'><time timestamp='2016-12-02T07:32:00Z'>07:32</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. IMO 8989 and 9239 is sort of one BP &quot;package&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663920' id='515069'>
<a class='timestamp' href='#515069'><time timestamp='2016-12-02T07:32:00Z'>07:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: in that case we should just backport both I guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663920' id='515070'>
<a class='timestamp' href='#515070'><time timestamp='2016-12-02T07:32:00Z'>07:32</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663980' id='515071'>
<a class='timestamp' href='#515071'><time timestamp='2016-12-02T07:33:00Z'>07:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I can do that next week...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480663980' id='515072'>
<a class='timestamp' href='#515072'><time timestamp='2016-12-02T07:33:00Z'>07:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(if nobody did it in the meantime)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480664040' id='515073'>
<a class='timestamp' href='#515073'><time timestamp='2016-12-02T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: good that you hadn&#x27;t started yet, then, would have been a waste of work as some had manual conflicts to resolve (though you could check if you resolved them in the same way :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480664040' id='515074'>
<a class='timestamp' href='#515074'><time timestamp='2016-12-02T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: well, I had started.. but I can rebase :x
<br>
</div>

<div class='talk op-msg' data-timestamp='1480664040' id='515075'>
<a class='timestamp' href='#515075'><time timestamp='2016-12-02T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I went through the PRs manually, not using tags, so I probably got a few you missed
<br>
</div>

<div class='talk op-msg' data-timestamp='1480664040' id='515076'>
<a class='timestamp' href='#515076'><time timestamp='2016-12-02T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
(well, <b>*almost*</b> manually.. XD)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480664100' id='515077'>
<a class='timestamp' href='#515077'><time timestamp='2016-12-02T07:35:00Z'>07:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well I strictly backport what is tagged, not more, if not it should have been tagged
<br>
</div>

<div class='talk op-msg' data-timestamp='1480664220' id='515078'>
<a class='timestamp' href='#515078'><time timestamp='2016-12-02T07:37:00Z'>07:37</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: erg, your backports aren&#x27;t on top of Marco&#x27;s? :x
<br>
</div>

<div class='talk op-msg' data-timestamp='1480664220' id='515079'>
<a class='timestamp' href='#515079'><time timestamp='2016-12-02T07:37:00Z'>07:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: no, I forgot about that one, will rebase
<br>
</div>

<div class='talk op-msg' data-timestamp='1480664280' id='515080'>
<a class='timestamp' href='#515080'><time timestamp='2016-12-02T07:38:00Z'>07:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
now they are (luckily no new conflicts)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480664460' id='515081'>
<a class='timestamp' href='#515081'><time timestamp='2016-12-02T07:41:00Z'>07:41</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
woo no conflicts here either it seems
<br>
</div>

<div class='talk op-msg' data-timestamp='1480665420' id='515082'>
<a class='timestamp' href='#515082'><time timestamp='2016-12-02T07:57:00Z'>07:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj opened pull request #9265: bitcoin-cli: Make error message less confusing (master...2016_12_rpccli_message) <a href="https://github.com/bitcoin/bitcoin/pull/9265" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9265</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480665540' id='515083'>
<a class='timestamp' href='#515083'><time timestamp='2016-12-02T07:59:00Z'>07:59</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: pushed backports-0.13 to my github; want to just pull it into yours?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480665600' id='515084'>
<a class='timestamp' href='#515084'><time timestamp='2016-12-02T08:00:00Z'>08:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: will have a look in a moment
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666380' id='515085'>
<a class='timestamp' href='#515085'><time timestamp='2016-12-02T08:13:00Z'>08:13</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
dcousens: and the &quot;add fee&quot; logic will continue to be maintained....but that isnt the &quot;priority&quot; code - this refers specifically to coin days-destroyed logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666500' id='515086'>
<a class='timestamp' href='#515086'><time timestamp='2016-12-02T08:15:00Z'>08:15</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
the priority code will be as well.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666500' id='515087'>
<a class='timestamp' href='#515087'><time timestamp='2016-12-02T08:15:00Z'>08:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no, it won&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666500' id='515088'>
<a class='timestamp' href='#515088'><time timestamp='2016-12-02T08:15:00Z'>08:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: looks ok to me - though I&#x27;m not entirely sure about the qt memory leak commits, they are all pretty minor one-time leaks, so users shouldn&#x27;t notice it
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666500' id='515089'>
<a class='timestamp' href='#515089'><time timestamp='2016-12-02T08:15:00Z'>08:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it serves no function anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666500' id='515090'>
<a class='timestamp' href='#515090'><time timestamp='2016-12-02T08:15:00Z'>08:15</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: yes it does, the same function it always served: anti-spam
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666500' id='515091'>
<a class='timestamp' href='#515091'><time timestamp='2016-12-02T08:15:00Z'>08:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: still makes sense to clean them up, but not sure whether the backport is risky
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666560' id='515092'>
<a class='timestamp' href='#515092'><time timestamp='2016-12-02T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: I don&#x27;t care strongly if you want to skip those
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666560' id='515093'>
<a class='timestamp' href='#515093'><time timestamp='2016-12-02T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
the backport may be risky, but if we have an rc or two, I&#x27;d put it in
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666560' id='515094'>
<a class='timestamp' href='#515094'><time timestamp='2016-12-02T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: also the menu reparenting may have subtle behavior issues I hadn&#x27;t considered (though none reported yet)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666560' id='515095'>
<a class='timestamp' href='#515095'><time timestamp='2016-12-02T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666560' id='515096'>
<a class='timestamp' href='#515096'><time timestamp='2016-12-02T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: so blocks with 950 kb of spam is fine, and 50kb of transactions from bitcoin old timers that doesn&#x27;t really pays miners a competitive price will save anything?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666620' id='515097'>
<a class='timestamp' href='#515097'><time timestamp='2016-12-02T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the only scalable way to deal with this is economic incentives
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666620' id='515098'>
<a class='timestamp' href='#515098'><time timestamp='2016-12-02T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: it would be better than 1000 kb of spam :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666620' id='515099'>
<a class='timestamp' href='#515099'><time timestamp='2016-12-02T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
lukanyhow I&#x27;ll pull them into #9264
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666620' id='515100'>
<a class='timestamp' href='#515100'><time timestamp='2016-12-02T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and face it, that is how it works in practice now
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666620' id='515101'>
<a class='timestamp' href='#515101'><time timestamp='2016-12-02T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9264" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9264</a> | 0.13.2 backports by laanwj · Pull Request #9264 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666620' id='515102'>
<a class='timestamp' href='#515102'><time timestamp='2016-12-02T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
if we go to exclusively economic incentives, we&#x27;d need to remove ALL spam filtering..
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666680' id='515103'>
<a class='timestamp' href='#515103'><time timestamp='2016-12-02T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: there are still local node dos protections
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666680' id='515104'>
<a class='timestamp' href='#515104'><time timestamp='2016-12-02T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which everyone has an incentive to maintain
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666680' id='515105'>
<a class='timestamp' href='#515105'><time timestamp='2016-12-02T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and don&#x27;t requires miners to be gatekeepers of good and bad transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666740' id='515106'>
<a class='timestamp' href='#515106'><time timestamp='2016-12-02T08:19:00Z'>08:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: if we had a system that wasn&#x27;t suffering from spam, removing priority might make sense. but we don&#x27;t.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666740' id='515107'>
<a class='timestamp' href='#515107'><time timestamp='2016-12-02T08:19:00Z'>08:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: removing priority will have 0 impact
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666860' id='515108'>
<a class='timestamp' href='#515108'><time timestamp='2016-12-02T08:21:00Z'>08:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wallets don&#x27;t use it anymore, (almost all) miners don&#x27;t use it anymore - even if it was usable as a means to distinguish better from worse usage of block space, it isn&#x27;t anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666860' id='515109'>
<a class='timestamp' href='#515109'><time timestamp='2016-12-02T08:21:00Z'>08:21</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
has someone shown that to be true?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666920' id='515110'>
<a class='timestamp' href='#515110'><time timestamp='2016-12-02T08:22:00Z'>08:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
last time I looked, a large % of transactions in blocks were in the priority area
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666920' id='515111'>
<a class='timestamp' href='#515111'><time timestamp='2016-12-02T08:22:00Z'>08:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
(not majority-large, but not &lt;5% either)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666920' id='515112'>
<a class='timestamp' href='#515112'><time timestamp='2016-12-02T08:22:00Z'>08:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
fair enough, i have no actual data on his
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666920' id='515113'>
<a class='timestamp' href='#515113'><time timestamp='2016-12-02T08:22:00Z'>08:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*this
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666980' id='515114'>
<a class='timestamp' href='#515114'><time timestamp='2016-12-02T08:23:00Z'>08:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but how do you measure that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480666980' id='515115'>
<a class='timestamp' href='#515115'><time timestamp='2016-12-02T08:23:00Z'>08:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I wrote a RPC call that analyzed the sort order
<br>
</div>

<div class='talk op-msg' data-timestamp='1480667220' id='515116'>
<a class='timestamp' href='#515116'><time timestamp='2016-12-02T08:27:00Z'>08:27</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
tries porting it to 0.13
<br>
</div>

<div class='talk op-msg' data-timestamp='1480668840' id='515117'>
<a class='timestamp' href='#515117'><time timestamp='2016-12-02T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ugh this thing is slooooooow
<br>
</div>

<div class='talk op-msg' data-timestamp='1480669620' id='515118'>
<a class='timestamp' href='#515118'><time timestamp='2016-12-02T09:07:00Z'>09:07</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
for those interested in more configurable testchains: <a href="https://github.com/bitcoin/bitcoin/pull/8994#issuecomment-264406053" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8994#issuecomment-264406053</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480672920' id='515119'>
<a class='timestamp' href='#515119'><time timestamp='2016-12-02T10:02:00Z'>10:02</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
oh, it&#x27;d also imply removing the soft blockmaxsize, which is essential since &gt;1 MB blocks are not safe right now. which would therefore imply segwit should be rejected. not a good hole to go down IMO.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480680000' id='515120'>
<a class='timestamp' href='#515120'><time timestamp='2016-12-02T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: CPFP and some other weirdness I don&#x27;t recognise kinda made my analyzer useless :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1480681320' id='515121'>
<a class='timestamp' href='#515121'><time timestamp='2016-12-02T12:22:00Z'>12:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: is it just me, or is 0a261b63fd4f1b07431f8a65762ef9f1ef1c11c8 a bugfix that should be backported?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480683120' id='515122'>
<a class='timestamp' href='#515122'><time timestamp='2016-12-02T12:52:00Z'>12:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: I think we should remove the softmax blocksize. I think it&#x27;s harmful to the network to have some miners producing smaller blocks when there is a high fee backlog.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480683360' id='515123'>
<a class='timestamp' href='#515123'><time timestamp='2016-12-02T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
so just ignore all the much bigger problems large blocks are causing? why is fee so important? it doesn&#x27;t seem likely larger blocks are going to significantly change the fee rate either.. :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1480683600' id='515124'>
<a class='timestamp' href='#515124'><time timestamp='2016-12-02T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: having it set lower makes the larger block problem _worse_: vitually all miners just set it to the maximum, and then we pretend like we&#x27;ve done something useful there instead of actually doing something useful. (like implementing a dynamic soft cap so that when demand goes down feerates don&#x27;t drob absurdly low)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480683600' id='515125'>
<a class='timestamp' href='#515125'><time timestamp='2016-12-02T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
s/drob/drop/
<br>
</div>

<div class='talk op-msg' data-timestamp='1480683660' id='515126'>
<a class='timestamp' href='#515126'><time timestamp='2016-12-02T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
not sure I follow; that sounds like the topic has changed to the <b>*default*</b> maxblocksize, but I&#x27;m talking about the option itself.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480683660' id='515127'>
<a class='timestamp' href='#515127'><time timestamp='2016-12-02T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wouldn&#x27;t the latter just be the min fee setting?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480683900' id='515128'>
<a class='timestamp' href='#515128'><time timestamp='2016-12-02T13:05:00Z'>13:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: sort of. minfee setting is really a relay setting, it gets in the way of CPFP. Should be intentionally low
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684020' id='515129'>
<a class='timestamp' href='#515129'><time timestamp='2016-12-02T13:07:00Z'>13:07</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
perhaps the gradual min-feerate would be a good thing to reintroduce
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684020' id='515130'>
<a class='timestamp' href='#515130'><time timestamp='2016-12-02T13:07:00Z'>13:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think the problems of propagation are more or less solved for the moment, so the concerns are bulk blockchain growth and fee behavior predictablity.  Having a couple miners going around confirming stuff with absurdly low fees or failing to confirm stuff with decent fees doesn&#x27;t help.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684080' id='515131'>
<a class='timestamp' href='#515131'><time timestamp='2016-12-02T13:08:00Z'>13:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hmm, would gradual min-feerate break prediction?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684140' id='515132'>
<a class='timestamp' href='#515132'><time timestamp='2016-12-02T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
No. At least if constructed right it should improve it (esp if the prediction is aware of it).
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684200' id='515133'>
<a class='timestamp' href='#515133'><time timestamp='2016-12-02T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: i&#x27;d be strongly in favor of a separate min mining feerate
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684200' id='515134'>
<a class='timestamp' href='#515134'><time timestamp='2016-12-02T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
do you actually want to remove blockmaxsize (and blockmaxweight?) as options?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684260' id='515135'>
<a class='timestamp' href='#515135'><time timestamp='2016-12-02T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i don&#x27;t feel strongly about that, but i do think we should avoid setting blockmaxsize as default. i tried to benchmark the behavior and didn&#x27;t show it being a big performance hit
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684260' id='515136'>
<a class='timestamp' href='#515136'><time timestamp='2016-12-02T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but thats counterintuitive
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684320' id='515137'>
<a class='timestamp' href='#515137'><time timestamp='2016-12-02T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
and i&#x27;d rather not risk it by default
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684320' id='515138'>
<a class='timestamp' href='#515138'><time timestamp='2016-12-02T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think we should default them to maximum at a minimum. Removing them-- I don&#x27;t really care probably removing them would irritate someone, so not worth doing. I don&#x27;t think they&#x27;re useful controls (beyond overriding our dumb maximum)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684320' id='515139'>
<a class='timestamp' href='#515139'><time timestamp='2016-12-02T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
right.. so default no setting for blockmaxsize in particular (to avoid size accounting unless you set it)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684320' id='515140'>
<a class='timestamp' href='#515140'><time timestamp='2016-12-02T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
right.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684380' id='515141'>
<a class='timestamp' href='#515141'><time timestamp='2016-12-02T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
wumpus: you can backport just the first commit of #9239. i will separately test, but that was the intent.  the only difference will be you will slide the slider to 1 but it will give you an answer for 2
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684380' id='515142'>
<a class='timestamp' href='#515142'><time timestamp='2016-12-02T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9239" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9239</a> | Disable fee estimates for 1 block target by morcos · Pull Request #9239 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684440' id='515143'>
<a class='timestamp' href='#515143'><time timestamp='2016-12-02T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
which is exactly what happens most of the time now anyway.. so will look like no change in behavior
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684440' id='515144'>
<a class='timestamp' href='#515144'><time timestamp='2016-12-02T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Today, with BIP152 and fibre propagation has very little to do with blockmaxsize. And blockmaxweight is the wrong dimension for applying backpressure on fees: it&#x27;s blind to demand, you&#x27;ll still dumbly produce smaller blocks when there is a nice backlog and dumly produce blocks that are too big when there is none (at least the minfee stops the bleeding there)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684500' id='515145'>
<a class='timestamp' href='#515145'><time timestamp='2016-12-02T13:15:00Z'>13:15</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
notes that &gt;1 MB blocks are still a problem as-is; it&#x27;s not like gradual mining min-fee is implemented yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684560' id='515146'>
<a class='timestamp' href='#515146'><time timestamp='2016-12-02T13:16:00Z'>13:16</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: yes, but a pointless softcap that virtually everone overrides is still not helping.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684560' id='515147'>
<a class='timestamp' href='#515147'><time timestamp='2016-12-02T13:16:00Z'>13:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: nobody overrides it &gt;1 MB yet AFAIK.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684620' id='515148'>
<a class='timestamp' href='#515148'><time timestamp='2016-12-02T13:17:00Z'>13:17</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I think I went through this before, but can&#x27;t see where I wrote it up.  I think we actually need 3 minimum rates and minrelaytxfee (a default minimum for the mempool) is not one of them
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684620' id='515149'>
<a class='timestamp' href='#515149'><time timestamp='2016-12-02T13:17:00Z'>13:17</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
1) min mining feerate
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684620' id='515150'>
<a class='timestamp' href='#515150'><time timestamp='2016-12-02T13:17:00Z'>13:17</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
2) rate used to define dust (should change rarely)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684620' id='515151'>
<a class='timestamp' href='#515151'><time timestamp='2016-12-02T13:17:00Z'>13:17</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
3) rate used as the minimum increment to pay for relay bandwidth (closest analog to existing minrelaytxfee)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684680' id='515152'>
<a class='timestamp' href='#515152'><time timestamp='2016-12-02T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
morcos: how would 3 be different from current minrelaytxfee?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684680' id='515153'>
<a class='timestamp' href='#515153'><time timestamp='2016-12-02T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I don&#x27;t think 3) actually needs to a have a floor other than 0, but i don&#x27;t suppose it hurts
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684680' id='515154'>
<a class='timestamp' href='#515154'><time timestamp='2016-12-02T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: they all will as soon as it matters, we trained them to with an unreasonable default.  Last non-empty block that was under 990k was 217 blocks ago.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684740' id='515155'>
<a class='timestamp' href='#515155'><time timestamp='2016-12-02T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
as soon as it matters, would still be better than immediately by default
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684800' id='515156'>
<a class='timestamp' href='#515156'><time timestamp='2016-12-02T13:20:00Z'>13:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: having a floor makes the system behavior more stable in any case, no real reason to go forwarding around low fee stuff that won&#x27;t get mined ever just because we have nothing better to relay. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684800' id='515157'>
<a class='timestamp' href='#515157'><time timestamp='2016-12-02T13:20:00Z'>13:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
although i guess, having a user set minimum for your mempool might be something people want (and a good fail safe if we get something wrong) so maybe we do want all 4
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684860' id='515158'>
<a class='timestamp' href='#515158'><time timestamp='2016-12-02T13:21:00Z'>13:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: sure, but its inherently rate limited by the mempool min fee..  but i agree. i don&#x27;t know what i&#x27;m arguing that point... and separating 3 and 4 is the least important concern. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684860' id='515159'>
<a class='timestamp' href='#515159'><time timestamp='2016-12-02T13:21:00Z'>13:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: yes it is worse because it puts everyone in the mode of just nailing it to the maximum, which would undermine doing something sensible and dynamic.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684920' id='515160'>
<a class='timestamp' href='#515160'><time timestamp='2016-12-02T13:22:00Z'>13:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
but we don&#x27;t have anything sensible and dynamic yet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480684920' id='515161'>
<a class='timestamp' href='#515161'><time timestamp='2016-12-02T13:22:00Z'>13:22</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i guess the only reason it matters is if someone wants to set their minimum higher to say 10 sat/byte, then thats not clear that they really want their increment requirement to be 10 sat/byte
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685040' id='515162'>
<a class='timestamp' href='#515162'><time timestamp='2016-12-02T13:24:00Z'>13:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: of course not, we have a nearly useless setting instead which you spend a lot of effort defending. This impedes doing something smarter.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685040' id='515163'>
<a class='timestamp' href='#515163'><time timestamp='2016-12-02T13:24:00Z'>13:24</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
it doesn&#x27;t impede anything..
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685100' id='515164'>
<a class='timestamp' href='#515164'><time timestamp='2016-12-02T13:25:00Z'>13:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I promise it does, touching any of this means arguing with you and few people have interest in that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685100' id='515165'>
<a class='timestamp' href='#515165'><time timestamp='2016-12-02T13:25:00Z'>13:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and there is the polite lie that something already is there, there is a blocksize setting, you can make it larger or smaller, problem solved.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685160' id='515166'>
<a class='timestamp' href='#515166'><time timestamp='2016-12-02T13:26:00Z'>13:26</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think the HD chain splitting will not be backward compatible. Adding a flag to CKeyPool would result in possible external keys from the internal chain on older versions of core
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685220' id='515167'>
<a class='timestamp' href='#515167'><time timestamp='2016-12-02T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Also, CKeyPool has no version-int.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685220' id='515168'>
<a class='timestamp' href='#515168'><time timestamp='2016-12-02T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
[12:22:27] &lt;luke-jr&gt; jonasschnelli: is it just me, or is 0a261b63fd4f1b07431f8a65762ef9f1ef1c11c8 a bugfix that should be backported?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685220' id='515169'>
<a class='timestamp' href='#515169'><time timestamp='2016-12-02T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I said it would be incompatible a bunch of times.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685280' id='515170'>
<a class='timestamp' href='#515170'><time timestamp='2016-12-02T13:28:00Z'>13:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I though we could make it compatible.. but yes. I guess it wont.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685340' id='515171'>
<a class='timestamp' href='#515171'><time timestamp='2016-12-02T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Then I try to add a new record type, maybe &quot;hdkey&quot; that stores the keypath (int / ext chain) as well as the masterkey and the according pubkey.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685340' id='515172'>
<a class='timestamp' href='#515172'><time timestamp='2016-12-02T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
GetKey could derive the priv key on the fly
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685400' id='515173'>
<a class='timestamp' href='#515173'><time timestamp='2016-12-02T13:30:00Z'>13:30</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: we could bp... but o
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685400' id='515174'>
<a class='timestamp' href='#515174'><time timestamp='2016-12-02T13:30:00Z'>13:30</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
but i guess its not an important fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685520' id='515175'>
<a class='timestamp' href='#515175'><time timestamp='2016-12-02T13:32:00Z'>13:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
what I was commenting on before was that we probably want to do several incompatible changes at once, so we don&#x27;t end up having to support dozens of old versions.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685580' id='515176'>
<a class='timestamp' href='#515176'><time timestamp='2016-12-02T13:33:00Z'>13:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: Yes. That would be preferable. I think the splitting should be combined with the on-thy-fly derivation and the flexible keypath.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685580' id='515177'>
<a class='timestamp' href='#515177'><time timestamp='2016-12-02T13:33:00Z'>13:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Ideally +pub-CKD
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685640' id='515178'>
<a class='timestamp' href='#515178'><time timestamp='2016-12-02T13:34:00Z'>13:34</time></a>
&lt;<span class='nick nick-8'> jcorgan</span>&gt;
i haven&#x27;t kept up recently, but are there any relevant BIPS or defacto practices from other wallets we should be paying attention to in this area?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685700' id='515179'>
<a class='timestamp' href='#515179'><time timestamp='2016-12-02T13:35:00Z'>13:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
 bip44/45 maybe. But I don&#x27;t think its wise to force users to do pub key derivation.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685760' id='515180'>
<a class='timestamp' href='#515180'><time timestamp='2016-12-02T13:36:00Z'>13:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
a flexible would allow to use bip44 and we could still stick to m/0&#x27;/k&#x27; by default
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685760' id='515181'>
<a class='timestamp' href='#515181'><time timestamp='2016-12-02T13:36:00Z'>13:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
a flexible keypath
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685820' id='515182'>
<a class='timestamp' href='#515182'><time timestamp='2016-12-02T13:37:00Z'>13:37</time></a>
&lt;<span class='nick nick-8'> jcorgan</span>&gt;
reviewing the flexpath PR is on my list this morning
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685880' id='515183'>
<a class='timestamp' href='#515183'><time timestamp='2016-12-02T13:38:00Z'>13:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685940' id='515184'>
<a class='timestamp' href='#515184'><time timestamp='2016-12-02T13:39:00Z'>13:39</time></a>
&lt;<span class='nick nick-8'> jcorgan</span>&gt;
but, i&#x27;m mostly just wondering if there are any good practices from other wallets we might benefit from understanding
<br>
</div>

<div class='talk op-msg' data-timestamp='1480685940' id='515185'>
<a class='timestamp' href='#515185'><time timestamp='2016-12-02T13:39:00Z'>13:39</time></a>
&lt;<span class='nick nick-8'> jcorgan</span>&gt;
just thinking out loud
<br>
</div>

<div class='talk op-msg' data-timestamp='1480686180' id='515186'>
<a class='timestamp' href='#515186'><time timestamp='2016-12-02T13:43:00Z'>13:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Doing public derrivation while the software supports private key export is really extremely inadvisable.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480686240' id='515187'>
<a class='timestamp' href='#515187'><time timestamp='2016-12-02T13:44:00Z'>13:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I also don&#x27;t think it makes sense to spend time on advanced features when basic functionality is still kinda broken.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480686240' id='515188'>
<a class='timestamp' href='#515188'><time timestamp='2016-12-02T13:44:00Z'>13:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but I&#x27;m not the one working on it. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480686240' id='515189'>
<a class='timestamp' href='#515189'><time timestamp='2016-12-02T13:44:00Z'>13:44</time></a>
&lt;<span class='nick nick-8'> jcorgan</span>&gt;
agree, but it&#x27;s important to define what unbroken basic functionality should be :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480686300' id='515190'>
<a class='timestamp' href='#515190'><time timestamp='2016-12-02T13:45:00Z'>13:45</time></a>
&lt;<span class='nick nick-8'> jcorgan</span>&gt;
in other words, if there is to be breaking changes, and you only want to break it once, better get it right
<br>
</div>

<div class='talk op-msg' data-timestamp='1480686360' id='515191'>
<a class='timestamp' href='#515191'><time timestamp='2016-12-02T13:46:00Z'>13:46</time></a>
&lt;<span class='nick nick-8'> jcorgan</span>&gt;
i didn&#x27;t mean to jump into the middle of your thread, just noticed it and taking an interest. carry on.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480686420' id='515192'>
<a class='timestamp' href='#515192'><time timestamp='2016-12-02T13:47:00Z'>13:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I agree with gmaxwell. We first need to solve the key-chain split.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480686480' id='515193'>
<a class='timestamp' href='#515193'><time timestamp='2016-12-02T13:48:00Z'>13:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
child key derivation is an interesting feature if you want to use core together with a hardware wallet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480686480' id='515194'>
<a class='timestamp' href='#515194'><time timestamp='2016-12-02T13:48:00Z'>13:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
child pub key d.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480686600' id='515195'>
<a class='timestamp' href='#515195'><time timestamp='2016-12-02T13:50:00Z'>13:50</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] luke-jr opened pull request #9266: Qt/RPCConsole: Put column enum in the right places (master...bugfix_datarole) <a href="https://github.com/bitcoin/bitcoin/pull/9266" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9266</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480690560' id='515196'>
<a class='timestamp' href='#515196'><time timestamp='2016-12-02T14:56:00Z'>14:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/3fbf07926240...31bcc667863f" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/3fbf07926240...31bcc667863f</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480690560' id='515197'>
<a class='timestamp' href='#515197'><time timestamp='2016-12-02T14:56:00Z'>14:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fe37fbe Wladimir J. van der Laan: bitcoin-cli: Make error message less confusing...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480690560' id='515198'>
<a class='timestamp' href='#515198'><time timestamp='2016-12-02T14:56:00Z'>14:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 31bcc66 MarcoFalke: Merge #9265: bitcoin-cli: Make error message less confusing...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480690560' id='515199'>
<a class='timestamp' href='#515199'><time timestamp='2016-12-02T14:56:00Z'>14:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #9265: bitcoin-cli: Make error message less confusing (master...2016_12_rpccli_message) <a href="https://github.com/bitcoin/bitcoin/pull/9265" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9265</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480690740' id='515200'>
<a class='timestamp' href='#515200'><time timestamp='2016-12-02T14:59:00Z'>14:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/31bcc667863f...5412c08c3cf1" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/31bcc667863f...5412c08c3cf1</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480690740' id='515201'>
<a class='timestamp' href='#515201'><time timestamp='2016-12-02T14:59:00Z'>14:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master b7aa290 S. Matthew English: unification of Bloom filter representation...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480690740' id='515202'>
<a class='timestamp' href='#515202'><time timestamp='2016-12-02T14:59:00Z'>14:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 5412c08 MarcoFalke: Merge #9223: unification of Bloom filter representation...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480690740' id='515203'>
<a class='timestamp' href='#515203'><time timestamp='2016-12-02T14:59:00Z'>14:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #9223: unification of Bloom filter representation (master...patch-10) <a href="https://github.com/bitcoin/bitcoin/pull/9223" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9223</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480692060' id='515204'>
<a class='timestamp' href='#515204'><time timestamp='2016-12-02T15:21:00Z'>15:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/5412c08c3cf1...98514988a3d3" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/5412c08c3cf1...98514988a3d3</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480692060' id='515205'>
<a class='timestamp' href='#515205'><time timestamp='2016-12-02T15:21:00Z'>15:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 08ed8c1 Gregory Maxwell: Developer docs about existing subtrees....
<br>
</div>

<div class='talk op-msg' data-timestamp='1480692060' id='515206'>
<a class='timestamp' href='#515206'><time timestamp='2016-12-02T15:21:00Z'>15:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 9851498 MarcoFalke: Merge #9246: Developer docs about existing subtrees....
<br>
</div>

<div class='talk op-msg' data-timestamp='1480692060' id='515207'>
<a class='timestamp' href='#515207'><time timestamp='2016-12-02T15:21:00Z'>15:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #9246: Developer docs about existing subtrees. (master...devdocs_for_subtrees) <a href="https://github.com/bitcoin/bitcoin/pull/9246" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9246</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480693260' id='515208'>
<a class='timestamp' href='#515208'><time timestamp='2016-12-02T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/98514988a3d3...d7ba4a233bd5" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/98514988a3d3...d7ba4a233bd5</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480693260' id='515209'>
<a class='timestamp' href='#515209'><time timestamp='2016-12-02T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 0828619 Suhas Daftuar: [qa] Dump debug logs on travis failures.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480693260' id='515210'>
<a class='timestamp' href='#515210'><time timestamp='2016-12-02T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master d7ba4a2 MarcoFalke: Merge #9257: [qa] Dump debug logs on travis failures....
<br>
</div>

<div class='talk op-msg' data-timestamp='1480693320' id='515211'>
<a class='timestamp' href='#515211'><time timestamp='2016-12-02T15:42:00Z'>15:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #9257: [qa] Dump debug logs on travis failures. (master...travis-debug-logs) <a href="https://github.com/bitcoin/bitcoin/pull/9257" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9257</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480693500' id='515212'>
<a class='timestamp' href='#515212'><time timestamp='2016-12-02T15:45:00Z'>15:45</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] morcos opened pull request #9267: Disable fee estimates for a confirm target of 1 block (0.13...backport9239) <a href="https://github.com/bitcoin/bitcoin/pull/9267" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9267</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480695000' id='515213'>
<a class='timestamp' href='#515213'><time timestamp='2016-12-02T16:10:00Z'>16:10</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
sipa: I think this is needed to get our subtree clean again
<br>
</div>

<div class='talk op-msg' data-timestamp='1480695000' id='515214'>
<a class='timestamp' href='#515214'><time timestamp='2016-12-02T16:10:00Z'>16:10</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
<a href="https://github.com/bitcoin-core/ctaes/pull/5" class="link" target="_blank">https://github.com/bitcoin-core/ctaes/pull/5</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480695960' id='515215'>
<a class='timestamp' href='#515215'><time timestamp='2016-12-02T16:26:00Z'>16:26</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
can anyone explain why this isn&#x27;t setting the argument correctly?:
<br>
</div>

<div class='talk op-msg' data-timestamp='1480695960' id='515216'>
<a class='timestamp' href='#515216'><time timestamp='2016-12-02T16:26:00Z'>16:26</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
         self.extra_args = [[&#x27;-usehd={:d}&#x27;.format(i%2==0)] for i in range(4)]
<br>
</div>

<div class='talk op-msg' data-timestamp='1480695960' id='515217'>
<a class='timestamp' href='#515217'><time timestamp='2016-12-02T16:26:00Z'>16:26</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
+        self.extra_args[0].append(&quot;-limitancestorcount=10&quot;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480695960' id='515218'>
<a class='timestamp' href='#515218'><time timestamp='2016-12-02T16:26:00Z'>16:26</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I&#x27;m trying to set a custom limit in test, and it&#x27;s not being enforced
<br>
</div>

<div class='talk op-msg' data-timestamp='1480696260' id='515219'>
<a class='timestamp' href='#515219'><time timestamp='2016-12-02T16:31:00Z'>16:31</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ahhhh nevermind, the node is being spun down and up later in the test
<br>
</div>

<div class='talk op-msg' data-timestamp='1480696620' id='515220'>
<a class='timestamp' href='#515220'><time timestamp='2016-12-02T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Yeah, we should use self.extra_args as argument where possible, instead of writing out the args every time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698180' id='515221'>
<a class='timestamp' href='#515221'><time timestamp='2016-12-02T17:03:00Z'>17:03</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
sdaftuar, how does one get the cached value?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698180' id='515222'>
<a class='timestamp' href='#515222'><time timestamp='2016-12-02T17:03:00Z'>17:03</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
instagibbs: oy, i&#x27;m thinking about it now. ancestor count is easy, but the descenadnt count is not...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698180' id='515223'>
<a class='timestamp' href='#515223'><time timestamp='2016-12-02T17:03:00Z'>17:03</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
how often will that one trigger in wallet context though?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698180' id='515224'>
<a class='timestamp' href='#515224'><time timestamp='2016-12-02T17:03:00Z'>17:03</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
unfortunately the test we want to do is, what is the max number of descendants that any of pcoin&#x27;s ancestors have?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698240' id='515225'>
<a class='timestamp' href='#515225'><time timestamp='2016-12-02T17:04:00Z'>17:04</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
and also, i think we should compare those values to some lower thresholds (say 10 instead of 25)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698240' id='515226'>
<a class='timestamp' href='#515226'><time timestamp='2016-12-02T17:04:00Z'>17:04</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I&#x27;m finding bugs with my implementation with non-standard values
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698300' id='515227'>
<a class='timestamp' href='#515227'><time timestamp='2016-12-02T17:05:00Z'>17:05</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
well i think your implementation would never skip over any pcoins?  except if the chain limits are violated in a reorg
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698300' id='515228'>
<a class='timestamp' href='#515228'><time timestamp='2016-12-02T17:05:00Z'>17:05</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
it always only fails at the 25 threshhold, unsure why. If we have an ancestor one already cached, we might just use that
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698300' id='515229'>
<a class='timestamp' href='#515229'><time timestamp='2016-12-02T17:05:00Z'>17:05</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
seems less error-prone, and should catch the common case?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698360' id='515230'>
<a class='timestamp' href='#515230'><time timestamp='2016-12-02T17:06:00Z'>17:06</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
im not sure what you mean?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698360' id='515231'>
<a class='timestamp' href='#515231'><time timestamp='2016-12-02T17:06:00Z'>17:06</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so to answer your first question, each mempool entry has a value nCountWithAncestors
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698360' id='515232'>
<a class='timestamp' href='#515232'><time timestamp='2016-12-02T17:06:00Z'>17:06</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
how do I access that entry
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698360' id='515233'>
<a class='timestamp' href='#515233'><time timestamp='2016-12-02T17:06:00Z'>17:06</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
(looking)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698420' id='515234'>
<a class='timestamp' href='#515234'><time timestamp='2016-12-02T17:07:00Z'>17:07</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
instagibbs: might need to add some kind of accessor, but mempool.mapTx.find(txid) or something should do it. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698480' id='515235'>
<a class='timestamp' href='#515235'><time timestamp='2016-12-02T17:08:00Z'>17:08</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
since we&#x27;re already checking to see that it&#x27;s in the mempool, this seems okay to me 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698480' id='515236'>
<a class='timestamp' href='#515236'><time timestamp='2016-12-02T17:08:00Z'>17:08</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
CalculateMemPoolAncestors() can be a bit expensive, fyi
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698540' id='515237'>
<a class='timestamp' href='#515237'><time timestamp='2016-12-02T17:09:00Z'>17:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but in order to do the descendant calculation properly, we&#x27;d need to call CMPA on the pcoins in question, and then check the descendant count of each ancestor returned
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698540' id='515238'>
<a class='timestamp' href='#515238'><time timestamp='2016-12-02T17:09:00Z'>17:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
(which i guess is equivalent to calling CMPA with lower thresholds)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698600' id='515239'>
<a class='timestamp' href='#515239'><time timestamp='2016-12-02T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i&#x27;m not sure though how reasonable it is to call CMPA inside AvailableCoins?  if somehow your wallet has a lot of in-mempool stuff, this could be slow.  not sure how to think about it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698660' id='515240'>
<a class='timestamp' href='#515240'><time timestamp='2016-12-02T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I don&#x27;t understand. I likely don&#x27;t understand what CMPA is actually doing. I thought it was already checking for limit violations
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698720' id='515241'>
<a class='timestamp' href='#515241'><time timestamp='2016-12-02T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
you&#x27;re trying to see if a transaction that spends pcoins would be a limit violation.  you&#x27;re checking to see if pcoins itself would fail to get into the mempool based on the configured limits.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698720' id='515242'>
<a class='timestamp' href='#515242'><time timestamp='2016-12-02T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but you know it&#x27;s already in the mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698720' id='515243'>
<a class='timestamp' href='#515243'><time timestamp='2016-12-02T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so almost by definition, those limits won&#x27;t be violated
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698720' id='515244'>
<a class='timestamp' href='#515244'><time timestamp='2016-12-02T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
(turns out there is some weird edge case behavior where it could be, but i think that&#x27;s beside the point)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480698840' id='515245'>
<a class='timestamp' href='#515245'><time timestamp='2016-12-02T17:14:00Z'>17:14</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
oh, maybe i didn&#x27;t make this clear: we call CMPA when we try to accept a new tx to the mempool.  so if it&#x27;s already gotten in -- a precondition of your code -- then calling it again on that tx, with the same limits, really shouldn&#x27;t fail.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699080' id='515246'>
<a class='timestamp' href='#515246'><time timestamp='2016-12-02T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ok now I&#x27;m confused why this works in the general case then.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699080' id='515247'>
<a class='timestamp' href='#515247'><time timestamp='2016-12-02T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
with default values
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699080' id='515248'>
<a class='timestamp' href='#515248'><time timestamp='2016-12-02T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
hmm.  do you have a test i can look at?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699140' id='515249'>
<a class='timestamp' href='#515249'><time timestamp='2016-12-02T17:19:00Z'>17:19</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
yes but its very easy to test the base case
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699140' id='515250'>
<a class='timestamp' href='#515250'><time timestamp='2016-12-02T17:19:00Z'>17:19</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
let me push my test im working on
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699200' id='515251'>
<a class='timestamp' href='#515251'><time timestamp='2016-12-02T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
just send all your coins to yourself in a loop 26 times
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699260' id='515252'>
<a class='timestamp' href='#515252'><time timestamp='2016-12-02T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
last time will trigger ATMP failure without these lines, with it triggers &quot;Insufficient funds&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699260' id='515253'>
<a class='timestamp' href='#515253'><time timestamp='2016-12-02T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
interesting, i&#x27;ll take a look
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699500' id='515254'>
<a class='timestamp' href='#515254'><time timestamp='2016-12-02T17:25:00Z'>17:25</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
you&#x27;re right though, this makes no sense in retrospect
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699680' id='515255'>
<a class='timestamp' href='#515255'><time timestamp='2016-12-02T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-1'> * sdaftuar</span>&gt;
just learned about set_trace, whoa!
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699680' id='515256'>
<a class='timestamp' href='#515256'><time timestamp='2016-12-02T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
wait... how do you write all those tests o_0
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699680' id='515257'>
<a class='timestamp' href='#515257'><time timestamp='2016-12-02T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
slowly :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699740' id='515258'>
<a class='timestamp' href='#515258'><time timestamp='2016-12-02T17:29:00Z'>17:29</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
i think it spawns zombies if you run in batch mode, be careful :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699800' id='515259'>
<a class='timestamp' href='#515259'><time timestamp='2016-12-02T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
that test has &quot;10&quot; as the limit, but it successfully sends 25 times
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699800' id='515260'>
<a class='timestamp' href='#515260'><time timestamp='2016-12-02T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
no matter what it&#x27;s set to
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699800' id='515261'>
<a class='timestamp' href='#515261'><time timestamp='2016-12-02T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
and the error message changes to mempool entry failure if you set a different value...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699860' id='515262'>
<a class='timestamp' href='#515262'><time timestamp='2016-12-02T17:31:00Z'>17:31</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
ah i think i see what&#x27;s happening.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699920' id='515263'>
<a class='timestamp' href='#515263'><time timestamp='2016-12-02T17:32:00Z'>17:32</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
there might be some edge case bugs in CMPA we ought to fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699980' id='515264'>
<a class='timestamp' href='#515264'><time timestamp='2016-12-02T17:33:00Z'>17:33</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
oh but it looks like for limit purposes, CMPA is trying to calculate whether adding the tx given would cause the limits to be exceeded.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480699980' id='515265'>
<a class='timestamp' href='#515265'><time timestamp='2016-12-02T17:33:00Z'>17:33</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
ugh, this is kind of messy
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700040' id='515266'>
<a class='timestamp' href='#515266'><time timestamp='2016-12-02T17:34:00Z'>17:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: you&#x27;re clear on the goal right? don&#x27;t consider any coin we couldn&#x27;t actually spend.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700040' id='515267'>
<a class='timestamp' href='#515267'><time timestamp='2016-12-02T17:34:00Z'>17:34</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: yes, understood.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700100' id='515268'>
<a class='timestamp' href='#515268'><time timestamp='2016-12-02T17:35:00Z'>17:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I wouldn&#x27;t worry much about the coinselection being slow if you have many unspent inputs-- so long as slow isn&#x27;t so slow as to cause rpc timeouts.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700160' id='515269'>
<a class='timestamp' href='#515269'><time timestamp='2016-12-02T17:36:00Z'>17:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The code that figured out if all the parents were confirmed or ismine used to have factorial complexity... nice natural rate limitor on building large unconfirmed chains. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700160' id='515270'>
<a class='timestamp' href='#515270'><time timestamp='2016-12-02T17:36:00Z'>17:36</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: instagibbs: i have two approaches to suggest, not sure which is better:
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700220' id='515271'>
<a class='timestamp' href='#515271'><time timestamp='2016-12-02T17:37:00Z'>17:37</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
1) do basically what you do here, except using CMPA correctly (i&#x27;d need to figure out exactly how to do that, certainly you could pass in a tx that spends pcoins, or maybe there&#x27;s a way to call CMPA with adjusted limit values that works, not sure)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700280' id='515272'>
<a class='timestamp' href='#515272'><time timestamp='2016-12-02T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
2) don&#x27;t bother calling CMPA in AvailableCoins, and instead just check to see if pcoins has more than N ancestors (a cached value) for some N much less than the default ancestor limit (maybe 5 or 10).
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700280' id='515273'>
<a class='timestamp' href='#515273'><time timestamp='2016-12-02T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
and then find a later point in the wallet code to abort the send if the descendant count would be violated
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700340' id='515274'>
<a class='timestamp' href='#515274'><time timestamp='2016-12-02T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I like (2) for now, just because I can&#x27;t tell how CMPA is working sometimes :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700340' id='515275'>
<a class='timestamp' href='#515275'><time timestamp='2016-12-02T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
for the case that people hit, really it&#x27;s just the ancestor limit that actually matters: people chaining change.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700340' id='515276'>
<a class='timestamp' href='#515276'><time timestamp='2016-12-02T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
yep     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700340' id='515277'>
<a class='timestamp' href='#515277'><time timestamp='2016-12-02T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yeah the problem with 1) is that you don&#x27;t know the size of the tx you&#x27;re generating, so it&#x27;s always going to be possible for the tx to ultimately fail
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700400' id='515278'>
<a class='timestamp' href='#515278'><time timestamp='2016-12-02T17:40:00Z'>17:40</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
2) is easy, but may result in some rare annoyances
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700400' id='515279'>
<a class='timestamp' href='#515279'><time timestamp='2016-12-02T17:40:00Z'>17:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: this is a sign we should reconsider that relay policy... the size is cornercase enough that it shouldn&#x27;t really matter.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700460' id='515280'>
<a class='timestamp' href='#515280'><time timestamp='2016-12-02T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: we knew the descendant count/size was a theoretical problem from the start (someone else spending outputs of a tx that pays to you can prevent you from relaying new transactions until those other ones clear), but i believe it&#x27;s the
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700520' id='515281'>
<a class='timestamp' href='#515281'><time timestamp='2016-12-02T17:42:00Z'>17:42</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
descendant count/size stuff that limits DoS attacks on the mempool the most
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700520' id='515282'>
<a class='timestamp' href='#515282'><time timestamp='2016-12-02T17:42:00Z'>17:42</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Ok, I&#x27;m going to learn more about CMPA, then likely do (2) instead
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700520' id='515283'>
<a class='timestamp' href='#515283'><time timestamp='2016-12-02T17:42:00Z'>17:42</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
&quot;those other ones clear&quot; &lt;--- should be until the parent confirms
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700640' id='515284'>
<a class='timestamp' href='#515284'><time timestamp='2016-12-02T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: why do you suggest above going &#x27;much less&#x27; than the ancestor limit?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700700' id='515285'>
<a class='timestamp' href='#515285'><time timestamp='2016-12-02T17:45:00Z'>17:45</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: i just think that we should steer well clear of the relay policy limits.  partly just philosophy (we didn&#x27;t think there were any common use cases close the values we chose)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700760' id='515286'>
<a class='timestamp' href='#515286'><time timestamp='2016-12-02T17:46:00Z'>17:46</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but also practically, being near the ancestor limit makes it more likely some peer will think you&#x27;re violating, say, the descendant limit
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700760' id='515287'>
<a class='timestamp' href='#515287'><time timestamp='2016-12-02T17:46:00Z'>17:46</time></a>
&lt;<span class='nick nick-16'> bitcoin837</span>&gt;
hey guys, before I write my own, does anyone already have a bash script that interacts with bitcoin-cli to do a sendmany split of a large chunk to your own deposit addresses? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700760' id='515288'>
<a class='timestamp' href='#515288'><time timestamp='2016-12-02T17:46:00Z'>17:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
makes sense. well doing 5 less would probably provide plenty of safty there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700760' id='515289'>
<a class='timestamp' href='#515289'><time timestamp='2016-12-02T17:46:00Z'>17:46</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
(breaking relay)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700880' id='515290'>
<a class='timestamp' href='#515290'><time timestamp='2016-12-02T17:48:00Z'>17:48</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
bitcoin837, #bitcoin 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700880' id='515291'>
<a class='timestamp' href='#515291'><time timestamp='2016-12-02T17:48:00Z'>17:48</time></a>
&lt;<span class='nick nick-16'> bitcoin837</span>&gt;
sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1480700880' id='515292'>
<a class='timestamp' href='#515292'><time timestamp='2016-12-02T17:48:00Z'>17:48</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
np     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702020' id='515293'>
<a class='timestamp' href='#515293'><time timestamp='2016-12-02T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
instagibbs: gmaxwell: there&#x27;s a problem with this approach
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702080' id='515294'>
<a class='timestamp' href='#515294'><time timestamp='2016-12-02T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
just talked to morcos, and one thing we realized is that you might be combining lots of inputs, each with many ancestors
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702080' id='515295'>
<a class='timestamp' href='#515295'><time timestamp='2016-12-02T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so the resulting transaction would fail
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702080' id='515296'>
<a class='timestamp' href='#515296'><time timestamp='2016-12-02T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
sooo doesnt want to have to rebase #9260...anyone wanna review?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702080' id='515297'>
<a class='timestamp' href='#515297'><time timestamp='2016-12-02T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9260" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9260</a> | Mrs Peacock in The Library with The Candlestick (killed main.{h,cpp}) by TheBlueMatt · Pull Request #9260 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702140' id='515298'>
<a class='timestamp' href='#515298'><time timestamp='2016-12-02T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so the best thing we could do in AvailableCoins is eliminate any coins that are already at the ancestor limit, i guess.  but we need additional logic in SelectCoins..() i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702260' id='515299'>
<a class='timestamp' href='#515299'><time timestamp='2016-12-02T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
wait, why is this different than what we were going to do?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702260' id='515300'>
<a class='timestamp' href='#515300'><time timestamp='2016-12-02T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
i thought that was the definition of ancestor number
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702260' id='515301'>
<a class='timestamp' href='#515301'><time timestamp='2016-12-02T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
oh i see, right
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702320' id='515302'>
<a class='timestamp' href='#515302'><time timestamp='2016-12-02T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I had this thought a couple minutes ago and somehow lost it. Yes, 2 inputs may have n-1 history, making 2n-2
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702320' id='515303'>
<a class='timestamp' href='#515303'><time timestamp='2016-12-02T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yep.  or making n-1, if they&#x27;re different outputs of the same tx
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702320' id='515304'>
<a class='timestamp' href='#515304'><time timestamp='2016-12-02T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
we have to check later on
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702320' id='515305'>
<a class='timestamp' href='#515305'><time timestamp='2016-12-02T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Yep. glad someone else thought of it and actually communicated
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702380' id='515306'>
<a class='timestamp' href='#515306'><time timestamp='2016-12-02T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
In the case people have actually encountered, it&#x27;s just a decendant chain limit AFAIK.   Many of the other cases would be pretty hard to hit with the wallet behavior.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702440' id='515307'>
<a class='timestamp' href='#515307'><time timestamp='2016-12-02T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
does the wallet prefer shorter unconfirmed chains vs longer?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702440' id='515308'>
<a class='timestamp' href='#515308'><time timestamp='2016-12-02T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I know it prefers confirmed change first, etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702440' id='515309'>
<a class='timestamp' href='#515309'><time timestamp='2016-12-02T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It is completely blind to it right now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702440' id='515310'>
<a class='timestamp' href='#515310'><time timestamp='2016-12-02T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ok, so it might not be all that rare
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702440' id='515311'>
<a class='timestamp' href='#515311'><time timestamp='2016-12-02T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
To make it prefer shorter is easy: first make it so it can reject if it&#x27;s too long, and try again with a higher limit if that fails.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702500' id='515312'>
<a class='timestamp' href='#515312'><time timestamp='2016-12-02T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think one way we could do that is to make SelectCoinsMinConf do the checking against some passed in limit, and then call it twice or something
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702500' id='515313'>
<a class='timestamp' href='#515313'><time timestamp='2016-12-02T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
we already call SelectCoinsMinConf repeatedly
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702500' id='515314'>
<a class='timestamp' href='#515314'><time timestamp='2016-12-02T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
thats how we handled unconfirmed, yep.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702500' id='515315'>
<a class='timestamp' href='#515315'><time timestamp='2016-12-02T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
yeah its the same idea
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702560' id='515316'>
<a class='timestamp' href='#515316'><time timestamp='2016-12-02T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
prefer deep confirmed coins from others, prefer confirmed coins, ok now try unconfirmed &lt;-- I think today
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702560' id='515317'>
<a class='timestamp' href='#515317'><time timestamp='2016-12-02T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
the other approach would be if there&#x27;s a way to do it directly in ApproximateBestSubset?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702560' id='515318'>
<a class='timestamp' href='#515318'><time timestamp='2016-12-02T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it does 6,1,0  and it could become 6,1,0+1i,0+10i,0+20i.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702560' id='515319'>
<a class='timestamp' href='#515319'><time timestamp='2016-12-02T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
not sure if that&#x27;s a good idea
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702620' id='515320'>
<a class='timestamp' href='#515320'><time timestamp='2016-12-02T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ABS assumes you have enough coins i believe
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702620' id='515321'>
<a class='timestamp' href='#515321'><time timestamp='2016-12-02T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
which means if you run into too long chain, that will be different and fail
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702680' id='515322'>
<a class='timestamp' href='#515322'><time timestamp='2016-12-02T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
not a great idea to do it in ABS. Just making it a parameter to SelectCoinsMinConf would be straightforward.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702740' id='515323'>
<a class='timestamp' href='#515323'><time timestamp='2016-12-02T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
gmaxwell, why are we using complex numbers for the arg :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702740' id='515324'>
<a class='timestamp' href='#515324'><time timestamp='2016-12-02T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
ok, so if we do it in SCMC, then i think the approach would be to filter out of availableCoins the ones with &gt;N ancestors, and testing whether the resulting set of inputs would pass CMPA before returning?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702740' id='515325'>
<a class='timestamp' href='#515325'><time timestamp='2016-12-02T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
does that sound right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702920' id='515326'>
<a class='timestamp' href='#515326'><time timestamp='2016-12-02T18:22:00Z'>18:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
hmm.  this doens&#x27;t quite make sense -- once ABS returns coins with enough value, but that violate the chain limits, trying again isn&#x27;t likely to help, is it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702980' id='515327'>
<a class='timestamp' href='#515327'><time timestamp='2016-12-02T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
SCMF can say &quot;no&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702980' id='515328'>
<a class='timestamp' href='#515328'><time timestamp='2016-12-02T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
pass failure to SC, returning Insufficent Funds
<br>
</div>

<div class='talk op-msg' data-timestamp='1480702980' id='515329'>
<a class='timestamp' href='#515329'><time timestamp='2016-12-02T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
right, but what is going to do differnetly when invoked with different limits?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703040' id='515330'>
<a class='timestamp' href='#515330'><time timestamp='2016-12-02T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: you start with the most restrictive limits first.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703040' id='515331'>
<a class='timestamp' href='#515331'><time timestamp='2016-12-02T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and it will only consider coins which will not violate.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703100' id='515332'>
<a class='timestamp' href='#515332'><time timestamp='2016-12-02T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
if it fails to get enough coins under each limit, raise it, if it can never get enough, fails
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703220' id='515333'>
<a class='timestamp' href='#515333'><time timestamp='2016-12-02T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and if that can&#x27;t find a solution, you relax the limits and try again.  The first limit is very confirmed, then confirmed, then unconfirmed but 1 deep, then unconfirmed and deeper...  The reason to try with multiple limits is so that it doesn&#x27;t do something dumb like build a chain of 19 deep, then at the 20&#x27;s also spend all your other unconfirmed coins... so that the next call has nothing to spe
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703220' id='515334'>
<a class='timestamp' href='#515334'><time timestamp='2016-12-02T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
nd. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703340' id='515335'>
<a class='timestamp' href='#515335'><time timestamp='2016-12-02T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: i&#x27;m trying to understand how ABS works now, but it&#x27;s not obvious to me how effective it would be at randomly finding a set of inputs that don&#x27;t violate the chain limits as the set of available coins it&#x27;s given increases
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703340' id='515336'>
<a class='timestamp' href='#515336'><time timestamp='2016-12-02T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ABS wouldnt be in charge of it, would have to be higher
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703340' id='515337'>
<a class='timestamp' href='#515337'><time timestamp='2016-12-02T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ABS I believe just has a set of inputs, and tries to make &quot;good&quot; fits based on value
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703400' id='515338'>
<a class='timestamp' href='#515338'><time timestamp='2016-12-02T18:30:00Z'>18:30</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
instagibbs: right.  so let&#x27;s say you have a set of inputs with at most 1 ancestors that has enough value to createa a tx, but the resulting tx has too many ancestors
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703400' id='515339'>
<a class='timestamp' href='#515339'><time timestamp='2016-12-02T18:30:00Z'>18:30</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
what are the chances that when you add some more inputs (where it is possible to find a suitable input set that passes the chain limits), that ABS will return it to you?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703400' id='515340'>
<a class='timestamp' href='#515340'><time timestamp='2016-12-02T18:30:00Z'>18:30</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
hm the issue seems to continue all the way until you create the actual transaction
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703400' id='515341'>
<a class='timestamp' href='#515341'><time timestamp='2016-12-02T18:30:00Z'>18:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, there is nothing really we can do about the ancestor limit right now-- it even depends on future and non-local information, we can deal with the decendant limit now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703460' id='515342'>
<a class='timestamp' href='#515342'><time timestamp='2016-12-02T18:31:00Z'>18:31</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: did you swap ancestor and descendant in that last line?  
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703460' id='515343'>
<a class='timestamp' href='#515343'><time timestamp='2016-12-02T18:31:00Z'>18:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703520' id='515344'>
<a class='timestamp' href='#515344'><time timestamp='2016-12-02T18:32:00Z'>18:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Oh you&#x27;re also saying for ancestors. Indeed, we can only be greedy, you&#x27;re right.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703520' id='515345'>
<a class='timestamp' href='#515345'><time timestamp='2016-12-02T18:32:00Z'>18:32</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if ABS were somehow aware of the constraint, we might get lucky and succeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703520' id='515346'>
<a class='timestamp' href='#515346'><time timestamp='2016-12-02T18:32:00Z'>18:32</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but if it&#x27;s not...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703580' id='515347'>
<a class='timestamp' href='#515347'><time timestamp='2016-12-02T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it&#x27;s not a framework that would likely do well with that kind of constraint in any case.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703580' id='515348'>
<a class='timestamp' href='#515348'><time timestamp='2016-12-02T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
For some reason I thought the combination rule for ancestor limit was MAX (a depth) not sum.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703640' id='515349'>
<a class='timestamp' href='#515349'><time timestamp='2016-12-02T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Yeah me too :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703640' id='515350'>
<a class='timestamp' href='#515350'><time timestamp='2016-12-02T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sum reflects how much recordkeeping (and pointer hopping) we do
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703640' id='515351'>
<a class='timestamp' href='#515351'><time timestamp='2016-12-02T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
So, we could still have the wallet prefer shorter inputs, and post-transaction finalization, have a CMPA check before returning?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703700' id='515352'>
<a class='timestamp' href='#515352'><time timestamp='2016-12-02T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
shorter-chain inputs greedily*
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703700' id='515353'>
<a class='timestamp' href='#515353'><time timestamp='2016-12-02T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yes i still think it&#x27;d be useful to do what i wrote above: in SCMC, filter out from AvailableCoins the ones that have more than N ancestors, for different values of N
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703700' id='515354'>
<a class='timestamp' href='#515354'><time timestamp='2016-12-02T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: yes, while realizing that I was wrong from your comment it was clear enough to me why it&#x27;s sum.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703760' id='515355'>
<a class='timestamp' href='#515355'><time timestamp='2016-12-02T18:36:00Z'>18:36</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but there are then two failures from SCMC: not enough value, in which case it&#x27;s worth tryign again with a higher limit; or chain limit exceeded, in which case I&#x27;m not sure it&#x27;s worth calling again with a higher limit
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703820' id='515356'>
<a class='timestamp' href='#515356'><time timestamp='2016-12-02T18:37:00Z'>18:37</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
we might fail sometimes to generate a transaction when there are coins available that would work, but this seems like the best we can do right now
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703820' id='515357'>
<a class='timestamp' href='#515357'><time timestamp='2016-12-02T18:37:00Z'>18:37</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
and certainly the most important thing is to not commit a transaction that then fails in ATMP
<br>
</div>

<div class='talk op-msg' data-timestamp='1480703880' id='515358'>
<a class='timestamp' href='#515358'><time timestamp='2016-12-02T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
&quot;This must not fail.&quot; :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704000' id='515359'>
<a class='timestamp' href='#515359'><time timestamp='2016-12-02T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
so we&#x27;ll still need a CMPA call, or something similar, to get the actual ancestor count before returning right
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704000' id='515360'>
<a class='timestamp' href='#515360'><time timestamp='2016-12-02T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
otherwise &quot;this can fail&quot; :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704000' id='515361'>
<a class='timestamp' href='#515361'><time timestamp='2016-12-02T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yes.  once we&#x27;ve put the transaction together, we can call CMPA and know whether it&#x27;ll pass.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704000' id='515362'>
<a class='timestamp' href='#515362'><time timestamp='2016-12-02T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think we should deal correctly with a failed ATMP call, like removing the tx from the wallet in that case
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704060' id='515363'>
<a class='timestamp' href='#515363'><time timestamp='2016-12-02T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(in addition to doing sanity checks ahead of time)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704060' id='515364'>
<a class='timestamp' href='#515364'><time timestamp='2016-12-02T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: agreed
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704060' id='515365'>
<a class='timestamp' href='#515365'><time timestamp='2016-12-02T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
what&#x27;s the barrier to that fix? I don&#x27;t know the wallet well enough
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704120' id='515366'>
<a class='timestamp' href='#515366'><time timestamp='2016-12-02T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i don&#x27;t think we ever delete anything now, do we?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704120' id='515367'>
<a class='timestamp' href='#515367'><time timestamp='2016-12-02T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
removeprunedfunds :P 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704120' id='515368'>
<a class='timestamp' href='#515368'><time timestamp='2016-12-02T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
but no, not normallly
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704180' id='515369'>
<a class='timestamp' href='#515369'><time timestamp='2016-12-02T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
oh, neat.  i didn&#x27;t know that existed!
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704180' id='515370'>
<a class='timestamp' href='#515370'><time timestamp='2016-12-02T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
it&#x27;s meant to be for importing/removing proofs of payment without scanning
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704240' id='515371'>
<a class='timestamp' href='#515371'><time timestamp='2016-12-02T18:44:00Z'>18:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
is the reason we commit first in case the node crashes?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704240' id='515372'>
<a class='timestamp' href='#515372'><time timestamp='2016-12-02T18:44:00Z'>18:44</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so we can just zap tx&#x27;s if we create them but ATMP fails?  that seems easy
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704300' id='515373'>
<a class='timestamp' href='#515373'><time timestamp='2016-12-02T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
we could alwasy have ATMP(fJustCheck)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704300' id='515374'>
<a class='timestamp' href='#515374'><time timestamp='2016-12-02T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
morcos: i assumed that&#x27;s why we commit first
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704360' id='515375'>
<a class='timestamp' href='#515375'><time timestamp='2016-12-02T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
morcos: ATMP(fJustCheck) doesn&#x27;t work very well with RBF and mempool eviction
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704360' id='515376'>
<a class='timestamp' href='#515376'><time timestamp='2016-12-02T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
morcos, hmm I thought there was issues with that, otherwise we&#x27;d have an easy way to check in rpc if policy is ok with it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704360' id='515377'>
<a class='timestamp' href='#515377'><time timestamp='2016-12-02T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
^ ok that
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704360' id='515378'>
<a class='timestamp' href='#515378'><time timestamp='2016-12-02T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
ah, yes...  
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704360' id='515379'>
<a class='timestamp' href='#515379'><time timestamp='2016-12-02T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
maybe RBF isn&#x27;t a big deal, not sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704420' id='515380'>
<a class='timestamp' href='#515380'><time timestamp='2016-12-02T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
someone should just remove that comment, it&#x27;s not true. &quot;Must not fail perminantly&quot; it&#x27;s fine if it fails until some transactions confirm.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704420' id='515381'>
<a class='timestamp' href='#515381'><time timestamp='2016-12-02T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
ok.. well we just want to be a bit careful.. b/c even things that do get rejected from ATMP, first make it into the memory pool.   so we&#x27;ll want to make sure no one ever makes it so those coudl get relayed or remembered in some other way, if we&#x27;re about nuke them from teh wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704420' id='515382'>
<a class='timestamp' href='#515382'><time timestamp='2016-12-02T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
right, it&#x27;s important to never remove something from the wallet that could have relayed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704480' id='515383'>
<a class='timestamp' href='#515383'><time timestamp='2016-12-02T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
or remembered in the future opportunistic eviction rejection map
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704480' id='515384'>
<a class='timestamp' href='#515384'><time timestamp='2016-12-02T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
morcos: oh! now i see what you mean.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704540' id='515385'>
<a class='timestamp' href='#515385'><time timestamp='2016-12-02T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
::sigh::
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704600' id='515386'>
<a class='timestamp' href='#515386'><time timestamp='2016-12-02T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The thing I was hoping this issue would fix is the wallet needlessly maining excessively deep transactions when it could choose inputs and avoid it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704660' id='515387'>
<a class='timestamp' href='#515387'><time timestamp='2016-12-02T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
we can still do that, yes?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704660' id='515388'>
<a class='timestamp' href='#515388'><time timestamp='2016-12-02T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Removing things from the wallet on ATMP failure might be fine (though if it&#x27;ll relay after the next block ... it might have been better to just leave it), but it won&#x27;t avoid needlessly creating unattractive transactions. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704660' id='515389'>
<a class='timestamp' href='#515389'><time timestamp='2016-12-02T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: sure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704780' id='515390'>
<a class='timestamp' href='#515390'><time timestamp='2016-12-02T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: yeah i think we get it, we&#x27;re jsut trying to fix up the edges too
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704780' id='515391'>
<a class='timestamp' href='#515391'><time timestamp='2016-12-02T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but as i think you mentioned the other day, as it is now it won&#x27;t get relayed after the next block, b/c you don&#x27;t rebroadcast whats not in your mempool and you don&#x27;t try to reaccept whats in your wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704840' id='515392'>
<a class='timestamp' href='#515392'><time timestamp='2016-12-02T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
is this referring to ATMP failed transactions?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704840' id='515393'>
<a class='timestamp' href='#515393'><time timestamp='2016-12-02T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but we all agree that first you try with things that in the simple case (single stranded chains) will stay well clear of the limits
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704900' id='515394'>
<a class='timestamp' href='#515394'><time timestamp='2016-12-02T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
instagibbs: yeah there&#x27;s a bug now, where the code that tries to periodically relay unconfirmed wallet transactions skips over things that aren&#x27;t in the mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704900' id='515395'>
<a class='timestamp' href='#515395'><time timestamp='2016-12-02T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
instagibbs: i think it&#x27;s an easy fix, just try to reaccept to the mempool first
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704960' id='515396'>
<a class='timestamp' href='#515396'><time timestamp='2016-12-02T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sdaftuar: i dont know if i 100% agree thats a bug, but certainly a separate issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1480704960' id='515397'>
<a class='timestamp' href='#515397'><time timestamp='2016-12-02T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We we should fix rebroadcast transactions to try remempolling things. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480705020' id='515398'>
<a class='timestamp' href='#515398'><time timestamp='2016-12-02T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
morcos: right, i guess reaccepting makes it harder for you to abandon a too-low-fee tx?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480705020' id='515399'>
<a class='timestamp' href='#515399'><time timestamp='2016-12-02T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
thats a day one bug, considering reorgs/doublespends.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480705020' id='515400'>
<a class='timestamp' href='#515400'><time timestamp='2016-12-02T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: at the risk of tangents.. the danger with that is that i think we&#x27;ll go into these endless work loops of trying things that have long since been double spent or whatever
<br>
</div>

<div class='talk op-msg' data-timestamp='1480705080' id='515401'>
<a class='timestamp' href='#515401'><time timestamp='2016-12-02T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sdaftuar: no its easy enough to skip abandoned, we already skip reaccepting those on startup
<br>
</div>

<div class='talk op-msg' data-timestamp='1480705080' id='515402'>
<a class='timestamp' href='#515402'><time timestamp='2016-12-02T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but yes, it makes the auto-defacto-abandoned state disappear, which is not necessarily a good thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1480705080' id='515403'>
<a class='timestamp' href='#515403'><time timestamp='2016-12-02T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ok, I need coffee bbl
<br>
</div>

<div class='talk op-msg' data-timestamp='1480705140' id='515404'>
<a class='timestamp' href='#515404'><time timestamp='2016-12-02T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: well it&#x27;s once per half an hour or whatever... and work per transaction. We also can tell when transactions are conflicted and could skip those.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480705320' id='515405'>
<a class='timestamp' href='#515405'><time timestamp='2016-12-02T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: i guess we could just ask some users with big wallets to see how long that takes them on startup (maybe we need to put in benching for it), since we already do it then
<br>
</div>

<div class='talk op-msg' data-timestamp='1480705800' id='515406'>
<a class='timestamp' href='#515406'><time timestamp='2016-12-02T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: the non-mempool part of resend wallet txn wouldn&#x27;t be needed if we had mempool sync. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1480705800' id='515407'>
<a class='timestamp' href='#515407'><time timestamp='2016-12-02T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if we get it right, we can just skip blocks and PoW too.  :P :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1480706280' id='515408'>
<a class='timestamp' href='#515408'><time timestamp='2016-12-02T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/d7ba4a233bd5...9e4bb312e695" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/d7ba4a233bd5...9e4bb312e695</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480706280' id='515409'>
<a class='timestamp' href='#515409'><time timestamp='2016-12-02T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master facbfa5 MarcoFalke: [qa] Get rid of duplicate code
<br>
</div>

<div class='talk op-msg' data-timestamp='1480706280' id='515410'>
<a class='timestamp' href='#515410'><time timestamp='2016-12-02T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 9e4bb31 MarcoFalke: Merge #9221: [qa] Get rid of duplicate code...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480706280' id='515411'>
<a class='timestamp' href='#515411'><time timestamp='2016-12-02T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #9221: [qa] Get rid of duplicate code (master...Mf1611-qaMaxUploadDuplCode) <a href="https://github.com/bitcoin/bitcoin/pull/9221" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9221</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480707240' id='515412'>
<a class='timestamp' href='#515412'><time timestamp='2016-12-02T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/9e4bb312e695...c36229b0b2e9" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/9e4bb312e695...c36229b0b2e9</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480707240' id='515413'>
<a class='timestamp' href='#515413'><time timestamp='2016-12-02T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 8a70a9d wodry: Improvement of documentation of command line parameter &#x27;whitelist&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1480707240' id='515414'>
<a class='timestamp' href='#515414'><time timestamp='2016-12-02T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master c36229b MarcoFalke: Merge #9251: Improvement of documentation of command line parameter &#x27;whitelist&#x27;...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480707300' id='515415'>
<a class='timestamp' href='#515415'><time timestamp='2016-12-02T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #9251: Improvement of documentation of command line parameter &#x27;whitelist&#x27; (master...patch-3) <a href="https://github.com/bitcoin/bitcoin/pull/9251" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9251</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480708740' id='515416'>
<a class='timestamp' href='#515416'><time timestamp='2016-12-02T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #9064: unify capitalization of &quot;bitcoin address&quot; (master...changeCaps) <a href="https://github.com/bitcoin/bitcoin/pull/9064" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9064</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480710480' id='515417'>
<a class='timestamp' href='#515417'><time timestamp='2016-12-02T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
BlueMatt: i was trying to verify that the second commit in #9260 is move only.  first, do you have any clever ways to suggest that i could use to do that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480710480' id='515418'>
<a class='timestamp' href='#515418'><time timestamp='2016-12-02T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9260" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9260</a> | Mrs Peacock in The Library with The Candlestick (killed main.{h,cpp}) by TheBlueMatt · Pull Request #9260 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480710480' id='515419'>
<a class='timestamp' href='#515419'><time timestamp='2016-12-02T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
second -- i tried to use git blame -C on the net_processing.cpp file, to verify that you didn&#x27;t introduce any changes 
<br>
</div>

<div class='talk op-msg' data-timestamp='1480710540' id='515420'>
<a class='timestamp' href='#515420'><time timestamp='2016-12-02T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
that almost works, though for some reason i can&#x27;t figure out, it assigns blame to you for a handful of lines around the Misbehaving() function
<br>
</div>

<div class='talk op-msg' data-timestamp='1480710540' id='515421'>
<a class='timestamp' href='#515421'><time timestamp='2016-12-02T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i can&#x27;t see any change in that code, but i&#x27;m puzzled as to why git thinks a change was introduced
<br>
</div>

<div class='talk op-msg' data-timestamp='1480710600' id='515422'>
<a class='timestamp' href='#515422'><time timestamp='2016-12-02T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: git diff --patience COMMIT~:oldfile COMMIT:newfile
<br>
</div>

<div class='talk op-msg' data-timestamp='1480710780' id='515423'>
<a class='timestamp' href='#515423'><time timestamp='2016-12-02T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: thanks, i&#x27;ll try that
<br>
</div>

<div class='talk op-msg' data-timestamp='1480711200' id='515424'>
<a class='timestamp' href='#515424'><time timestamp='2016-12-02T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sdaftuar: its not ENTIRELY move only
<br>
</div>

<div class='talk op-msg' data-timestamp='1480711200' id='515425'>
<a class='timestamp' href='#515425'><time timestamp='2016-12-02T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yeah i know... just trying to figure out what the real diff is
<br>
</div>

<div class='talk op-msg' data-timestamp='1480711260' id='515426'>
<a class='timestamp' href='#515426'><time timestamp='2016-12-02T20:41:00Z'>20:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the only diff i saw was some header changes, and the snippet i pasted in a comment
<br>
</div>

<div class='talk op-msg' data-timestamp='1480711380' id='515427'>
<a class='timestamp' href='#515427'><time timestamp='2016-12-02T20:43:00Z'>20:43</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: i think there&#x27;s a one-line change about feeFilterRounder too?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480711440' id='515428'>
<a class='timestamp' href='#515428'><time timestamp='2016-12-02T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: ah, he squashed in some changes
<br>
</div>

<div class='talk op-msg' data-timestamp='1480711440' id='515429'>
<a class='timestamp' href='#515429'><time timestamp='2016-12-02T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i reviewed an earlier version
<br>
</div>

<div class='talk op-msg' data-timestamp='1480711440' id='515430'>
<a class='timestamp' href='#515430'><time timestamp='2016-12-02T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
ah ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1480711440' id='515431'>
<a class='timestamp' href='#515431'><time timestamp='2016-12-02T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
 84922e4
<br>
</div>

<div class='talk op-msg' data-timestamp='1480711680' id='515432'>
<a class='timestamp' href='#515432'><time timestamp='2016-12-02T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
btw..  that &quot;almost bug&quot; with saferModifyNewCoins, i forgot i had a node running with my new coinsviewcache patches.  it lost consensus a couple days ago..  
<br>
</div>

<div class='talk op-msg' data-timestamp='1480711680' id='515433'>
<a class='timestamp' href='#515433'><time timestamp='2016-12-02T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
investigating now, but i bet it hit that bug... whew.   dodged a bullet
<br>
</div>

<div class='talk op-msg' data-timestamp='1480711680' id='515434'>
<a class='timestamp' href='#515434'><time timestamp='2016-12-02T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
nice.  lets not PR that one. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480712580' id='515435'>
<a class='timestamp' href='#515435'><time timestamp='2016-12-02T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
sdaftuar, ok updated my PR, thanks for the help
<br>
</div>

<div class='talk op-msg' data-timestamp='1480712700' id='515436'>
<a class='timestamp' href='#515436'><time timestamp='2016-12-02T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Isn&#x27;t this a bug: <a href="https://github.com/bitcoin/bitcoin/blob/master/qa/rpc-tests/keypool.py#L40" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/qa/rpc-tests/keypool.py#L40</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480712700' id='515437'>
<a class='timestamp' href='#515437'><time timestamp='2016-12-02T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
instagibbs: cool, i&#x27;ll take a look
<br>
</div>

<div class='talk op-msg' data-timestamp='1480712700' id='515438'>
<a class='timestamp' href='#515438'><time timestamp='2016-12-02T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
We fill the keypool with a new target size of 3
<br>
</div>

<div class='talk op-msg' data-timestamp='1480712700' id='515439'>
<a class='timestamp' href='#515439'><time timestamp='2016-12-02T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
then we manage to reserve 4 keys: <a href="https://github.com/bitcoin/bitcoin/blob/master/qa/rpc-tests/keypool.py#L45" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/qa/rpc-tests/keypool.py#L45</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1480713180' id='515440'>
<a class='timestamp' href='#515440'><time timestamp='2016-12-02T21:13:00Z'>21:13</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli: seems to always reserve target + 1
<br>
</div>

<div class='talk op-msg' data-timestamp='1480713240' id='515441'>
<a class='timestamp' href='#515441'><time timestamp='2016-12-02T21:14:00Z'>21:14</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
./bitcoin-cli -testnet keypoolrefill 104
<br>
</div>

<div class='talk op-msg' data-timestamp='1480713240' id='515442'>
<a class='timestamp' href='#515442'><time timestamp='2016-12-02T21:14:00Z'>21:14</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
2016-12-02 21:13:24 keypool added key 108, size=105
<br>
</div>

<div class='talk op-msg' data-timestamp='1480713540' id='515443'>
<a class='timestamp' href='#515443'><time timestamp='2016-12-02T21:19:00Z'>21:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think that may be the vchDefaultKey...
<br>
</div>

<div class='talk op-msg' data-timestamp='1480716120' id='515444'>
<a class='timestamp' href='#515444'><time timestamp='2016-12-02T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
no, don&#x27;t think this is vchDefaultKey
<br>
</div>

<div class='talk op-msg' data-timestamp='1480716180' id='515445'>
<a class='timestamp' href='#515445'><time timestamp='2016-12-02T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
the target+1 comes from a time when the function was only used by one caller (Maybe getnewaddress or something, where you first call keypoolrefill and then grab one key)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480716240' id='515446'>
<a class='timestamp' href='#515446'><time timestamp='2016-12-02T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Now if you call it from another place which does not grab the key, you end up with off-by-one
<br>
</div>

<div class='talk op-msg' data-timestamp='1480718040' id='515447'>
<a class='timestamp' href='#515447'><time timestamp='2016-12-02T22:34:00Z'>22:34</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
sdaftuar: hmm the in mempool check done in AvailableCoins doesn&#x27;t cover that case?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480718040' id='515448'>
<a class='timestamp' href='#515448'><time timestamp='2016-12-02T22:34:00Z'>22:34</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Oh I see confirmation plus not mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1480720800' id='515449'>
<a class='timestamp' href='#515449'><time timestamp='2016-12-02T23:20:00Z'>23:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: re: compilation memusage, validation.cpp takes ~1.19G, init ~1.1G, net_processing ~0.95G, rpcrawtx ~0.95G, rpcdump ~0.99G, rpcwallet ~1.0G, wallet ~1.2G, walletdb ~0.82G...main took ~1.46G
<br>
</div>

<div class='talk op-msg' data-timestamp='1480720860' id='515450'>
<a class='timestamp' href='#515450'><time timestamp='2016-12-02T23:21:00Z'>23:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
so while splitting main didnt cut out worst-case memusage by a /ton/, it did potentially make it possible to compile with 1.5G again, whereas it previously wasnt once you include the host
<br>
</div>

<div class='talk op-msg' data-timestamp='1480720860' id='515451'>
<a class='timestamp' href='#515451'><time timestamp='2016-12-02T23:21:00Z'>23:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but validation + net_processing together now take 2.14G!
<br>
</div>

<div class='talk op-msg' data-timestamp='1480720860' id='515452'>
<a class='timestamp' href='#515452'><time timestamp='2016-12-02T23:21:00Z'>23:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
bad job!
<br>
</div>

<div class='talk op-msg' data-timestamp='1480720860' id='515453'>
<a class='timestamp' href='#515453'><time timestamp='2016-12-02T23:21:00Z'>23:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lol     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480720920' id='515454'>
<a class='timestamp' href='#515454'><time timestamp='2016-12-02T23:22:00Z'>23:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
need to do -flto with under 1 GB RAM use ‼‼‼‼! :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1480720920' id='515455'>
<a class='timestamp' href='#515455'><time timestamp='2016-12-02T23:22:00Z'>23:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
luke-jr: I cant get lto to build anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721160' id='515456'>
<a class='timestamp' href='#515456'><time timestamp='2016-12-02T23:26:00Z'>23:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: build time is greater for me too.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721160' id='515457'>
<a class='timestamp' href='#515457'><time timestamp='2016-12-02T23:26:00Z'>23:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
greater like slower or faster?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721160' id='515458'>
<a class='timestamp' href='#515458'><time timestamp='2016-12-02T23:26:00Z'>23:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
it would be nice if you could compile &quot;split LTO data&quot; for libraries, so one can just use non-LTO for their system but have the ability to do LTO on demand
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721220' id='515459'>
<a class='timestamp' href='#515459'><time timestamp='2016-12-02T23:27:00Z'>23:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: slower. takes more time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721220' id='515460'>
<a class='timestamp' href='#515460'><time timestamp='2016-12-02T23:27:00Z'>23:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: yea, not surprising given how much shit we have in headers (and how much boost has in headers!)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721220' id='515461'>
<a class='timestamp' href='#515461'><time timestamp='2016-12-02T23:27:00Z'>23:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
bad except when napping is required. presumably its faster on things other than my laptop.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721220' id='515462'>
<a class='timestamp' href='#515462'><time timestamp='2016-12-02T23:27:00Z'>23:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea, need to get rid of boost.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721220' id='515463'>
<a class='timestamp' href='#515463'><time timestamp='2016-12-02T23:27:00Z'>23:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: are you using parallel lto linking?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721280' id='515464'>
<a class='timestamp' href='#515464'><time timestamp='2016-12-02T23:28:00Z'>23:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: no just the seperate files require more time in total.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721280' id='515465'>
<a class='timestamp' href='#515465'><time timestamp='2016-12-02T23:28:00Z'>23:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
due to all the garbage in headers.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721280' id='515466'>
<a class='timestamp' href='#515466'><time timestamp='2016-12-02T23:28:00Z'>23:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: well even if it is slower, at least you dont have to wait for net_processing if you only want to touch validation or vica versa :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721280' id='515467'>
<a class='timestamp' href='#515467'><time timestamp='2016-12-02T23:28:00Z'>23:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;m not complaining, its the right thing to do.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721340' id='515468'>
<a class='timestamp' href='#515468'><time timestamp='2016-12-02T23:29:00Z'>23:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
though the recompile benefit is mixed, it isn&#x27;t all that often that I don&#x27;t end up editing a header that causes everything to get recompiled. P
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721340' id='515469'>
<a class='timestamp' href='#515469'><time timestamp='2016-12-02T23:29:00Z'>23:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
:P     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721340' id='515470'>
<a class='timestamp' href='#515470'><time timestamp='2016-12-02T23:29:00Z'>23:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i know, but I am complaining about headers in bitcoin core (and boost)
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721340' id='515471'>
<a class='timestamp' href='#515471'><time timestamp='2016-12-02T23:29:00Z'>23:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: which gcc version? earlier gccs compiled both to object code and gimple in lto mode; in later ones the default is generating only gimple, which is faster
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721340' id='515472'>
<a class='timestamp' href='#515472'><time timestamp='2016-12-02T23:29:00Z'>23:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: I dont think we&#x27;re talking about lto
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721400' id='515473'>
<a class='timestamp' href='#515473'><time timestamp='2016-12-02T23:30:00Z'>23:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah.     
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721820' id='515474'>
<a class='timestamp' href='#515474'><time timestamp='2016-12-02T23:37:00Z'>23:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: ok with not fixing your comments in #9260?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721820' id='515475'>
<a class='timestamp' href='#515475'><time timestamp='2016-12-02T23:37:00Z'>23:37</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9260" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9260</a> | Mrs Peacock in The Library with The Candlestick (killed main.{h,cpp}) by TheBlueMatt · Pull Request #9260 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1480721820' id='515476'>
<a class='timestamp' href='#515476'><time timestamp='2016-12-02T23:37:00Z'>23:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;m not talking about LTO.
<br>
</div>

<div class='talk op-msg' data-timestamp='1480722060' id='515477'>
<a class='timestamp' href='#515477'><time timestamp='2016-12-02T23:41:00Z'>23:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
paveljanik: you got a minute to ack 9260, since you already looked over it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1480722060' id='515478'>
<a class='timestamp' href='#515478'><time timestamp='2016-12-02T23:41:00Z'>23:41</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
is still hoping it can be merged prior to any other main.cpp changes :p
<br>
</div>

</div>
</section>

</body>
</html>
