<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2019-09-06
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2019-09-06' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:19 UTC</pre>
<pre><a href="/bitcoin-core-dev/2019-08-06">&lt;</a><span class='header'>  September 2019  </span><a href="/bitcoin-core-dev/2019-10-06">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2019-09-01">1</a>  <a class="" href="/bitcoin-core-dev/2019-09-02">2</a>  <a class="" href="/bitcoin-core-dev/2019-09-03">3</a>  <a class="" href="/bitcoin-core-dev/2019-09-04">4</a>  <a class="" href="/bitcoin-core-dev/2019-09-05">5</a>  <a class="current" href="/bitcoin-core-dev/2019-09-06">6</a>  <a class="" href="/bitcoin-core-dev/2019-09-07">7</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2019-09-08">8</a>  <a class="" href="/bitcoin-core-dev/2019-09-09">9</a> <a class="" href="/bitcoin-core-dev/2019-09-10">10</a> <a class="" href="/bitcoin-core-dev/2019-09-11">11</a> <a class="" href="/bitcoin-core-dev/2019-09-12">12</a> <a class="" href="/bitcoin-core-dev/2019-09-13">13</a> <a class="" href="/bitcoin-core-dev/2019-09-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-09-15">15</a> <a class="" href="/bitcoin-core-dev/2019-09-16">16</a> <a class="" href="/bitcoin-core-dev/2019-09-17">17</a> <a class="" href="/bitcoin-core-dev/2019-09-18">18</a> <a class="" href="/bitcoin-core-dev/2019-09-19">19</a> <a class="" href="/bitcoin-core-dev/2019-09-20">20</a> <a class="" href="/bitcoin-core-dev/2019-09-21">21</a>  &#x000A;22 23 24 25 26 <a class="" href="/bitcoin-core-dev/2019-09-27">27</a> <a class="" href="/bitcoin-core-dev/2019-09-28">28</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-09-29">29</a> <a class="" href="/bitcoin-core-dev/2019-09-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1567728660' id='679101'>
<a class='timestamp' href='#679101'><time timestamp='2019-09-06T00:11:00Z'>00:11</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
jb55, very large wallets basically don&#x27;t work currently
<br>
</div>

<div class='talk op-msg' data-timestamp='1567728660' id='679102'>
<a class='timestamp' href='#679102'><time timestamp='2019-09-06T00:11:00Z'>00:11</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
it takes AGES to even load the wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1567730880' id='679103'>
<a class='timestamp' href='#679103'><time timestamp='2019-09-06T00:48:00Z'>00:48</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
phantomcircuit: are those large wallets large in txs, large in keys, or both?
<br>
</div>

<div class='talk op-msg' data-timestamp='1567730940' id='679104'>
<a class='timestamp' href='#679104'><time timestamp='2019-09-06T00:49:00Z'>00:49</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
achow101, unless something has drastically changed we load everything in the wallet into memory on start
<br>
</div>

<div class='talk op-msg' data-timestamp='1567731000' id='679105'>
<a class='timestamp' href='#679105'><time timestamp='2019-09-06T00:50:00Z'>00:50</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
so it doesn&#x27;t really matter
<br>
</div>

<div class='talk op-msg' data-timestamp='1567731000' id='679106'>
<a class='timestamp' href='#679106'><time timestamp='2019-09-06T00:50:00Z'>00:50</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yes, that&#x27;s what I&#x27;m trying to change
<br>
</div>

<div class='talk op-msg' data-timestamp='1567731000' id='679107'>
<a class='timestamp' href='#679107'><time timestamp='2019-09-06T00:50:00Z'>00:50</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
(though my ~2GB testnet wallet was mostly transactions by size, but had hundreds of thousands of keys)
<br>
</div>

<div class='talk op-msg' data-timestamp='1567739040' id='679108'>
<a class='timestamp' href='#679108'><time timestamp='2019-09-06T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
sipa or achow101: for #16807, to make a &quot;generic&quot; error detector which returns a basic error for invalid non-bech32 and does the more advanced error location for bech32, is it ok to just distinguish between the legacy/p2sh and bech32 cases based on &quot;starts with a 1/3&quot;, or &quot;starts with something else&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1567739040' id='679109'>
<a class='timestamp' href='#679109'><time timestamp='2019-09-06T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/16807" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/16807</a> | Let validateaddress locate error in Bech32 address by meshcollider · Pull Request #16807 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1567739040' id='679110'>
<a class='timestamp' href='#679110'><time timestamp='2019-09-06T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
It gets confusing based on what type of invalidity we expect, e.g. if the bech32 address is missing an HRP it&#x27;ll start with a 1 
<br>
</div>

<div class='talk op-msg' data-timestamp='1567739100' id='679111'>
<a class='timestamp' href='#679111'><time timestamp='2019-09-06T03:05:00Z'>03:05</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
so just assume it&#x27;ll be &quot;vaguely correct&quot; and just look for typos?
<br>
</div>

<div class='talk op-msg' data-timestamp='1567739340' id='679112'>
<a class='timestamp' href='#679112'><time timestamp='2019-09-06T03:09:00Z'>03:09</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
meshcollider: a bech32 address missing the hrp will be larger than the longest legacy address
<br>
</div>

<div class='talk op-msg' data-timestamp='1567739400' id='679113'>
<a class='timestamp' href='#679113'><time timestamp='2019-09-06T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
s/larger/longer
<br>
</div>

<div class='talk op-msg' data-timestamp='1567739460' id='679114'>
<a class='timestamp' href='#679114'><time timestamp='2019-09-06T03:11:00Z'>03:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
we know the length limits, I would prefer a distinguishing based on lengths and character set
<br>
</div>

<div class='talk op-msg' data-timestamp='1567739460' id='679115'>
<a class='timestamp' href='#679115'><time timestamp='2019-09-06T03:11:00Z'>03:11</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Can&#x27;t use character set because one of the errors might be an invalid character for the intended address type
<br>
</div>

<div class='talk op-msg' data-timestamp='1567739460' id='679116'>
<a class='timestamp' href='#679116'><time timestamp='2019-09-06T03:11:00Z'>03:11</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Could use length + first byte
<br>
</div>

<div class='talk op-msg' data-timestamp='1567741500' id='679117'>
<a class='timestamp' href='#679117'><time timestamp='2019-09-06T03:45:00Z'>03:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
meshcollider: bech32 addresses aren&#x27;t restricted to v0 witness though
<br>
</div>

<div class='talk op-msg' data-timestamp='1567741980' id='679118'>
<a class='timestamp' href='#679118'><time timestamp='2019-09-06T03:53:00Z'>03:53</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
sipa: I know, I would only check expected length or start character or whatever for legacy/p2sh
<br>
</div>

<div class='talk op-msg' data-timestamp='1567741980' id='679119'>
<a class='timestamp' href='#679119'><time timestamp='2019-09-06T03:53:00Z'>03:53</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Minimal assumption on the bech32
<br>
</div>

<div class='talk op-msg' data-timestamp='1567743600' id='679120'>
<a class='timestamp' href='#679120'><time timestamp='2019-09-06T04:20:00Z'>04:20</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
sipa since it was your idea in the PR, do you have any suggestions
<br>
</div>

<div class='talk op-msg' data-timestamp='1567743600' id='679121'>
<a class='timestamp' href='#679121'><time timestamp='2019-09-06T04:20:00Z'>04:20</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Its very messy, I don&#x27;t want to just hardcode a bunch of heuristics
<br>
</div>

<div class='talk op-msg' data-timestamp='1567743660' id='679122'>
<a class='timestamp' href='#679122'><time timestamp='2019-09-06T04:21:00Z'>04:21</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
For example if an address contains a character like &quot;o&quot;, both base58 and bech32 deciding will fail, then how do we know which error message to return
<br>
</div>

<div class='talk op-msg' data-timestamp='1567743720' id='679123'>
<a class='timestamp' href='#679123'><time timestamp='2019-09-06T04:22:00Z'>04:22</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
&quot;O&quot; sorry*
<br>
</div>

<div class='talk op-msg' data-timestamp='1567744020' id='679124'>
<a class='timestamp' href='#679124'><time timestamp='2019-09-06T04:27:00Z'>04:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe initially just use prefix
<br>
</div>

<div class='talk op-msg' data-timestamp='1567744200' id='679125'>
<a class='timestamp' href='#679125'><time timestamp='2019-09-06T04:30:00Z'>04:30</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
And hardcode the characters for each network? Because Params() will only provide it as a data value
<br>
</div>

<div class='talk op-msg' data-timestamp='1567744380' id='679126'>
<a class='timestamp' href='#679126'><time timestamp='2019-09-06T04:33:00Z'>04:33</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Otherwise if the user passes a flag to validateaddress which says which type they intend it to be it would be nicer I guess, then if they say &quot;legacy&quot; there is no ambiguity
<br>
</div>

<div class='talk op-msg' data-timestamp='1567744560' id='679127'>
<a class='timestamp' href='#679127'><time timestamp='2019-09-06T04:36:00Z'>04:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or i guess: the base58 decode (without checksum), and try bech32 decode
<br>
</div>

<div class='talk op-msg' data-timestamp='1567744560' id='679128'>
<a class='timestamp' href='#679128'><time timestamp='2019-09-06T04:36:00Z'>04:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if both fail, report unknown enxoding
<br>
</div>

<div class='talk op-msg' data-timestamp='1567744560' id='679129'>
<a class='timestamp' href='#679129'><time timestamp='2019-09-06T04:36:00Z'>04:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if they succeed, chexck version bytes
<br>
</div>

<div class='talk op-msg' data-timestamp='1567744560' id='679130'>
<a class='timestamp' href='#679130'><time timestamp='2019-09-06T04:36:00Z'>04:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and hrp
<br>
</div>

<div class='talk op-msg' data-timestamp='1567746960' id='679131'>
<a class='timestamp' href='#679131'><time timestamp='2019-09-06T05:16:00Z'>05:16</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
I&#x27;ve pushed a commit 
<br>
</div>

<div class='talk op-msg' data-timestamp='1567746960' id='679132'>
<a class='timestamp' href='#679132'><time timestamp='2019-09-06T05:16:00Z'>05:16</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
If bech32 decoding fails we ideally still want to find the source of the error though right
<br>
</div>

<div class='talk op-msg' data-timestamp='1567746960' id='679133'>
<a class='timestamp' href='#679133'><time timestamp='2019-09-06T05:16:00Z'>05:16</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
I think my current approach is ok, let me know what you think
<br>
</div>

<div class='talk op-msg' data-timestamp='1567768380' id='679134'>
<a class='timestamp' href='#679134'><time timestamp='2019-09-06T11:13:00Z'>11:13</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
sipa: should the tagged hashes change when writing nothing or writing an empty byte string?
<br>
</div>

<div class='talk op-msg' data-timestamp='1567768380' id='679135'>
<a class='timestamp' href='#679135'><time timestamp='2019-09-06T11:13:00Z'>11:13</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
When I just create a tagged writer using those methods you sent, and then call .GetSHA256().GetHex() or I first do writer &lt;&lt; std::vector&lt;unsigned char&gt;{}, the result is different.
<br>
</div>

<div class='talk op-msg' data-timestamp='1567769640' id='679136'>
<a class='timestamp' href='#679136'><time timestamp='2019-09-06T11:34:00Z'>11:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] dangershony opened pull request #16817: [RPC] Fix casing in getblockchaininfo to be inline other fields (master...patch-1) <a href="https://github.com/bitcoin/bitcoin/pull/16817" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16817</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1567771200' id='679137'>
<a class='timestamp' href='#679137'><time timestamp='2019-09-06T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/5e202382a987...ae3e3bd151f4" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/5e202382a987...ae3e3bd151f4</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1567771200' id='679138'>
<a class='timestamp' href='#679138'><time timestamp='2019-09-06T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 3109a1f João Barbosa: refactor: Avoid locking cs_main in ProcessNewBlockHeaders
<br>
</div>

<div class='talk op-msg' data-timestamp='1567771200' id='679139'>
<a class='timestamp' href='#679139'><time timestamp='2019-09-06T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ae3e3bd MarcoFalke: Merge #16793: refactor: Avoid locking cs_main in ProcessNewBlockHeaders
<br>
</div>

<div class='talk op-msg' data-timestamp='1567771260' id='679140'>
<a class='timestamp' href='#679140'><time timestamp='2019-09-06T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #16793: refactor: Avoid locking cs_main in ProcessNewBlockHeaders (master...2019-09-csmain-headers) <a href="https://github.com/bitcoin/bitcoin/pull/16793" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16793</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1567780020' id='679141'>
<a class='timestamp' href='#679141'><time timestamp='2019-09-06T14:27:00Z'>14:27</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
sipa: any chance &lt;&lt;&#x27;ing an empty vector prefixes that with a length byte a la consensus encoding?
<br>
</div>

<div class='talk op-msg' data-timestamp='1567780140' id='679142'>
<a class='timestamp' href='#679142'><time timestamp='2019-09-06T14:29:00Z'>14:29</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
sipa: k it seems like that was the thing. I compared hashing the 0 byte to the empty vector hash from core and it matched. nvm dus
<br>
</div>

<div class='talk op-msg' data-timestamp='1567789560' id='679143'>
<a class='timestamp' href='#679143'><time timestamp='2019-09-06T17:06:00Z'>17:06</time></a>
&lt;<span class='nick nick-6'> slave_blocker</span>&gt;
<a href="https://pastebin.com/SwuLHkz3" class="link" target="_blank">https://pastebin.com/SwuLHkz3</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1567813620' id='679144'>
<a class='timestamp' href='#679144'><time timestamp='2019-09-06T23:47:00Z'>23:47</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] RajaMBZ opened pull request #16818: doc: Update CONTRIBUTING.md (master...patch-1) <a href="https://github.com/bitcoin/bitcoin/pull/16818" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16818</a>
<br>
</div>

</div>
</section>

</body>
</html>
