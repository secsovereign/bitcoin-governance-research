<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2015-10-04
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2015-10-04' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:28 UTC</pre>
<pre><a href="/bitcoin-core-dev/2015-09-04">&lt;</a><span class='header'>   October 2015   </span><a href="/bitcoin-core-dev/2015-11-04">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;             <a class="" href="/bitcoin-core-dev/2015-10-01">1</a>  <a class="" href="/bitcoin-core-dev/2015-10-02">2</a>  <a class="" href="/bitcoin-core-dev/2015-10-03">3</a>  &#x000A; <a class="current" href="/bitcoin-core-dev/2015-10-04">4</a>  <a class="" href="/bitcoin-core-dev/2015-10-05">5</a>  <a class="" href="/bitcoin-core-dev/2015-10-06">6</a>  <a class="" href="/bitcoin-core-dev/2015-10-07">7</a>  <a class="" href="/bitcoin-core-dev/2015-10-08">8</a>  <a class="" href="/bitcoin-core-dev/2015-10-09">9</a> <a class="" href="/bitcoin-core-dev/2015-10-10">10</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-10-11">11</a> <a class="" href="/bitcoin-core-dev/2015-10-12">12</a> <a class="" href="/bitcoin-core-dev/2015-10-13">13</a> <a class="" href="/bitcoin-core-dev/2015-10-14">14</a> <a class="" href="/bitcoin-core-dev/2015-10-15">15</a> <a class="" href="/bitcoin-core-dev/2015-10-16">16</a> <a class="" href="/bitcoin-core-dev/2015-10-17">17</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-10-18">18</a> <a class="" href="/bitcoin-core-dev/2015-10-19">19</a> <a class="" href="/bitcoin-core-dev/2015-10-20">20</a> <a class="" href="/bitcoin-core-dev/2015-10-21">21</a> <a class="" href="/bitcoin-core-dev/2015-10-22">22</a> <a class="" href="/bitcoin-core-dev/2015-10-23">23</a> <a class="" href="/bitcoin-core-dev/2015-10-24">24</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-10-25">25</a> <a class="" href="/bitcoin-core-dev/2015-10-26">26</a> <a class="" href="/bitcoin-core-dev/2015-10-27">27</a> <a class="" href="/bitcoin-core-dev/2015-10-28">28</a> <a class="" href="/bitcoin-core-dev/2015-10-29">29</a> <a class="" href="/bitcoin-core-dev/2015-10-30">30</a> <a class="" href="/bitcoin-core-dev/2015-10-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1443924600' id='427444'>
<a class='timestamp' href='#427444'><time timestamp='2015-10-04T02:10:00Z'>02:10</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
FYI: Someone in #bitcoin is actively trying to get a virus signature mined into the blockchain.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443924780' id='427445'>
<a class='timestamp' href='#427445'><time timestamp='2015-10-04T02:13:00Z'>02:13</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, <a href="https://github.com/pstratem/bitcoinconsensus_fuzzer" class="link" target="_blank">https://github.com/pstratem/bitcoinconsensus_fuzzer</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927060' id='427446'>
<a class='timestamp' href='#427446'><time timestamp='2015-10-04T02:51:00Z'>02:51</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
getting it mined is the easy part - it&#x27;s figuring out something that will trip off scanners that&#x27;s a little trickier ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927120' id='427447'>
<a class='timestamp' href='#427447'><time timestamp='2015-10-04T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
there is a standard virus test signature that will trip up all virus scanners if they see it
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927120' id='427448'>
<a class='timestamp' href='#427448'><time timestamp='2015-10-04T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
eicar
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927180' id='427449'>
<a class='timestamp' href='#427449'><time timestamp='2015-10-04T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
how big is it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927180' id='427450'>
<a class='timestamp' href='#427450'><time timestamp='2015-10-04T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
68 bytes
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927180' id='427451'>
<a class='timestamp' href='#427451'><time timestamp='2015-10-04T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
X5O!P%@AP[4\PZX54(P^)7CC)7}$EICAR-STANDARD-ANTIVIRUS-TEST-FILE!$H+H*
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927180' id='427452'>
<a class='timestamp' href='#427452'><time timestamp='2015-10-04T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
put that in a file
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927180' id='427453'>
<a class='timestamp' href='#427453'><time timestamp='2015-10-04T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
heh, i had hide parts turned on..did anyone just part?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927240' id='427454'>
<a class='timestamp' href='#427454'><time timestamp='2015-10-04T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, nvm, it only works at the beginning of a file that is not longer than 128 chars
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927240' id='427455'>
<a class='timestamp' href='#427455'><time timestamp='2015-10-04T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the eicar thing triggers almost nothing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927240' id='427456'>
<a class='timestamp' href='#427456'><time timestamp='2015-10-04T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
because, that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927300' id='427457'>
<a class='timestamp' href='#427457'><time timestamp='2015-10-04T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: oh? If you put it in by itself I&#x27;ve seen it trigger almost everything
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927300' id='427458'>
<a class='timestamp' href='#427458'><time timestamp='2015-10-04T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
you just cant put it in the middle of a file
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927360' id='427459'>
<a class='timestamp' href='#427459'><time timestamp='2015-10-04T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
we should store all blocks using symmetric crypto with the block hash as the key :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927540' id='427460'>
<a class='timestamp' href='#427460'><time timestamp='2015-10-04T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
CodeShark: you&#x27;re aware we have an open PR to obfuscate the chainstate, right? ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927540' id='427461'>
<a class='timestamp' href='#427461'><time timestamp='2015-10-04T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CodeShark: being done for the utxo set now
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927540' id='427462'>
<a class='timestamp' href='#427462'><time timestamp='2015-10-04T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
oh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927540' id='427463'>
<a class='timestamp' href='#427463'><time timestamp='2015-10-04T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
since when?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927540' id='427464'>
<a class='timestamp' href='#427464'><time timestamp='2015-10-04T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just xor, not symmetric crypto
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927540' id='427465'>
<a class='timestamp' href='#427465'><time timestamp='2015-10-04T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/pull/6650" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6650</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927540' id='427466'>
<a class='timestamp' href='#427466'><time timestamp='2015-10-04T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
sipa: eh? xor doesn&#x27;t count as symm crypto? :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927600' id='427467'>
<a class='timestamp' href='#427467'><time timestamp='2015-10-04T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
someone stole my idea! :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927660' id='427468'>
<a class='timestamp' href='#427468'><time timestamp='2015-10-04T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Luke-Jr: it&#x27;s symmetric, but not cryptographic :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927660' id='427469'>
<a class='timestamp' href='#427469'><time timestamp='2015-10-04T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
CodeShark: I&#x27;ve been recommending it to newbies for a while
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927660' id='427470'>
<a class='timestamp' href='#427470'><time timestamp='2015-10-04T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
sipa: but.. but..
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927660' id='427471'>
<a class='timestamp' href='#427471'><time timestamp='2015-10-04T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
it&#x27;s ultimately a matter of degree
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927660' id='427472'>
<a class='timestamp' href='#427472'><time timestamp='2015-10-04T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
an xor one-time pad is more secure than any asymmetric cypher
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927720' id='427473'>
<a class='timestamp' href='#427473'><time timestamp='2015-10-04T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
*cipher
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927720' id='427474'>
<a class='timestamp' href='#427474'><time timestamp='2015-10-04T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, if XOR is symmetric cryptography, then { return 4; } is a CSPRNG :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927720' id='427475'>
<a class='timestamp' href='#427475'><time timestamp='2015-10-04T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
damn, I of all people should know how to spell that word :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927780' id='427476'>
<a class='timestamp' href='#427476'><time timestamp='2015-10-04T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
importantly it&#x27;s an xor with a per node random key.. which should be more than enough.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927780' id='427477'>
<a class='timestamp' href='#427477'><time timestamp='2015-10-04T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
xor is as secure as any other symmetric cipher if the key is at least as long as the message ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927780' id='427478'>
<a class='timestamp' href='#427478'><time timestamp='2015-10-04T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
unless there are virus signatures that deal with the xor relationships of 8 byte apart groups... I couldn&#x27;t find anything like that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927780' id='427479'>
<a class='timestamp' href='#427479'><time timestamp='2015-10-04T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
or even more secure
<br>
</div>

<div class='talk op-msg' data-timestamp='1443927840' id='427480'>
<a class='timestamp' href='#427480'><time timestamp='2015-10-04T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and as long as you only use it once
<br>
</div>

<div class='talk op-msg' data-timestamp='1443928080' id='427481'>
<a class='timestamp' href='#427481'><time timestamp='2015-10-04T03:08:00Z'>03:08</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I suppose something similar could be said for { return 4; } as a CSPRNG...if you only call it once :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1443928140' id='427482'>
<a class='timestamp' href='#427482'><time timestamp='2015-10-04T03:09:00Z'>03:09</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
however, 4 is a rather improbable number given cryptograpically-sized output
<br>
</div>

<div class='talk op-msg' data-timestamp='1443928200' id='427483'>
<a class='timestamp' href='#427483'><time timestamp='2015-10-04T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
it&#x27;s no less probable than any other...but it still looks suspiciously small :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443928200' id='427484'>
<a class='timestamp' href='#427484'><time timestamp='2015-10-04T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
moreover, in both cases you need external entrop
<br>
</div>

<div class='talk op-msg' data-timestamp='1443928200' id='427485'>
<a class='timestamp' href='#427485'><time timestamp='2015-10-04T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
*entropy
<br>
</div>

<div class='talk op-msg' data-timestamp='1443928260' id='427486'>
<a class='timestamp' href='#427486'><time timestamp='2015-10-04T03:11:00Z'>03:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes yes yes 
<br>
</div>

<div class='talk op-msg' data-timestamp='1443928260' id='427487'>
<a class='timestamp' href='#427487'><time timestamp='2015-10-04T03:11:00Z'>03:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
:)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443929520' id='427488'>
<a class='timestamp' href='#427488'><time timestamp='2015-10-04T03:32:00Z'>03:32</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
a virus signature that involves xor relationships 8 bytes apart would likely give many false alarms :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1443929580' id='427489'>
<a class='timestamp' href='#427489'><time timestamp='2015-10-04T03:33:00Z'>03:33</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
just dividing two large numbers could trip it off :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1443932400' id='427490'>
<a class='timestamp' href='#427490'><time timestamp='2015-10-04T04:20:00Z'>04:20</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
CodeShark: has that ever stopped them?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443932400' id='427491'>
<a class='timestamp' href='#427491'><time timestamp='2015-10-04T04:20:00Z'>04:20</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
CodeShark: most AVs have at one time or another made a signature for BFGMiner just because it was a semi-common payload
<br>
</div>

<div class='talk op-msg' data-timestamp='1443934980' id='427492'>
<a class='timestamp' href='#427492'><time timestamp='2015-10-04T05:03:00Z'>05:03</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, the current version of the fuzzer logic only modifies the script portion
<br>
</div>

<div class='talk op-msg' data-timestamp='1443934980' id='427493'>
<a class='timestamp' href='#427493'><time timestamp='2015-10-04T05:03:00Z'>05:03</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
it&#x27;s significantly slower when the entire transaction can be modified
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935040' id='427494'>
<a class='timestamp' href='#427494'><time timestamp='2015-10-04T05:04:00Z'>05:04</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i seem to have stopped finding interesting cases with 256 byte scripts though
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935280' id='427495'>
<a class='timestamp' href='#427495'><time timestamp='2015-10-04T05:08:00Z'>05:08</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
did you do an ordered search? or bruteforce?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935340' id='427496'>
<a class='timestamp' href='#427496'><time timestamp='2015-10-04T05:09:00Z'>05:09</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
wasn&#x27;t it 256-byte transactions that were of interest?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935580' id='427497'>
<a class='timestamp' href='#427497'><time timestamp='2015-10-04T05:13:00Z'>05:13</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
CodeShark, afl-fuzz
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935580' id='427498'>
<a class='timestamp' href='#427498'><time timestamp='2015-10-04T05:13:00Z'>05:13</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
see <a href="https://github.com/pstratem/bitcoinconsensus_fuzzer" class="link" target="_blank">https://github.com/pstratem/bitcoinconsensus_fuzzer</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935700' id='427499'>
<a class='timestamp' href='#427499'><time timestamp='2015-10-04T05:15:00Z'>05:15</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
CodeShark, definitely cant brute force all the 256 byte combinations :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935760' id='427500'>
<a class='timestamp' href='#427500'><time timestamp='2015-10-04T05:16:00Z'>05:16</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
is the goal simply to find valid transactions that are exactly 256 bytes long?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935760' id='427501'>
<a class='timestamp' href='#427501'><time timestamp='2015-10-04T05:16:00Z'>05:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
phantomcircuit: do you need a faster box to run that on?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935880' id='427502'>
<a class='timestamp' href='#427502'><time timestamp='2015-10-04T05:18:00Z'>05:18</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
or nvm, I don&#x27;t really know what you&#x27;re trying to do :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935880' id='427503'>
<a class='timestamp' href='#427503'><time timestamp='2015-10-04T05:18:00Z'>05:18</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
CodeShark, no the goal is to find interesting transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935880' id='427504'>
<a class='timestamp' href='#427504'><time timestamp='2015-10-04T05:18:00Z'>05:18</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
valid or otherwise
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935940' id='427505'>
<a class='timestamp' href='#427505'><time timestamp='2015-10-04T05:19:00Z'>05:19</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
BlueMatt, i dont think it would matter much, it&#x27;s been running for about two days and hasn&#x27;t found a new .... wait
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935940' id='427506'>
<a class='timestamp' href='#427506'><time timestamp='2015-10-04T05:19:00Z'>05:19</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
damn it i screwed up the afl-fuzz setup!
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935940' id='427507'>
<a class='timestamp' href='#427507'><time timestamp='2015-10-04T05:19:00Z'>05:19</time></a>
&lt;<span class='nick nick-3'> * phantomcircuit</span>&gt;
grubles
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935940' id='427508'>
<a class='timestamp' href='#427508'><time timestamp='2015-10-04T05:19:00Z'>05:19</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
by &quot;valid&quot; I&#x27;m just talking in terms of parser logic - not the chainstate and crypto validation stuff :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935940' id='427509'>
<a class='timestamp' href='#427509'><time timestamp='2015-10-04T05:19:00Z'>05:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
phantomcircuit: if you send me the vm image I can run it on my workstation.....
<br>
</div>

<div class='talk op-msg' data-timestamp='1443935940' id='427510'>
<a class='timestamp' href='#427510'><time timestamp='2015-10-04T05:19:00Z'>05:19</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
hmm actually maybe not
<br>
</div>

<div class='talk op-msg' data-timestamp='1443936000' id='427511'>
<a class='timestamp' href='#427511'><time timestamp='2015-10-04T05:20:00Z'>05:20</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
looks like i didn&#x27;t screw it up
<br>
</div>

<div class='talk op-msg' data-timestamp='1443936000' id='427512'>
<a class='timestamp' href='#427512'><time timestamp='2015-10-04T05:20:00Z'>05:20</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
CodeShark, i have 1 testcase which fails the parser logic, but because of how afl-fuzz works it&#x27;s only th eone
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937080' id='427513'>
<a class='timestamp' href='#427513'><time timestamp='2015-10-04T05:38:00Z'>05:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, there seems to be an issue with the frequency of wallet flushes and the pruning logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937140' id='427514'>
<a class='timestamp' href='#427514'><time timestamp='2015-10-04T05:39:00Z'>05:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
the pruning logic can prune blocks where the wallet hasn&#x27;t flushed indicating it&#x27;s sync&#x27;d to them
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937140' id='427515'>
<a class='timestamp' href='#427515'><time timestamp='2015-10-04T05:39:00Z'>05:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
BlueMatt, you should fix! :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937140' id='427516'>
<a class='timestamp' href='#427516'><time timestamp='2015-10-04T05:39:00Z'>05:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
huh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937200' id='427517'>
<a class='timestamp' href='#427517'><time timestamp='2015-10-04T05:40:00Z'>05:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
hahah
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937200' id='427518'>
<a class='timestamp' href='#427518'><time timestamp='2015-10-04T05:40:00Z'>05:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: yea that sounds bad. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937320' id='427519'>
<a class='timestamp' href='#427519'><time timestamp='2015-10-04T05:42:00Z'>05:42</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i would bet the same thing can happen with the block index, but i&#x27;d need to double check on that
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937380' id='427520'>
<a class='timestamp' href='#427520'><time timestamp='2015-10-04T05:43:00Z'>05:43</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
it would really be nice to put all the header logic into its own unit
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937500' id='427521'>
<a class='timestamp' href='#427521'><time timestamp='2015-10-04T05:45:00Z'>05:45</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
separate issue...but just thought I&#x27;d bring it up :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937560' id='427522'>
<a class='timestamp' href='#427522'><time timestamp='2015-10-04T05:46:00Z'>05:46</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
then other parts of the app can sync to the headers in different ways
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937560' id='427523'>
<a class='timestamp' href='#427523'><time timestamp='2015-10-04T05:46:00Z'>05:46</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and the header index can carry additional state information
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937740' id='427524'>
<a class='timestamp' href='#427524'><time timestamp='2015-10-04T05:49:00Z'>05:49</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
(i.e. what rules to enforce for the particular block :) )
<br>
</div>

<div class='talk op-msg' data-timestamp='1443937980' id='427525'>
<a class='timestamp' href='#427525'><time timestamp='2015-10-04T05:53:00Z'>05:53</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
we could also shave off 80 bytes of data from getblock if we always use getheader to grab the header
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938040' id='427526'>
<a class='timestamp' href='#427526'><time timestamp='2015-10-04T05:54:00Z'>05:54</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
not that 80 bytes is that much when put into context of downloading the entire block :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938040' id='427527'>
<a class='timestamp' href='#427527'><time timestamp='2015-10-04T05:54:00Z'>05:54</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
but we could have more sophisticated queries for partial blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938160' id='427528'>
<a class='timestamp' href='#427528'><time timestamp='2015-10-04T05:56:00Z'>05:56</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I&#x27;m very much not satisfied with the filteredblock mechanism we currently have ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938220' id='427529'>
<a class='timestamp' href='#427529'><time timestamp='2015-10-04T05:57:00Z'>05:57</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
even pruned nodes could serve useful data if the query structure were better
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938280' id='427530'>
<a class='timestamp' href='#427530'><time timestamp='2015-10-04T05:58:00Z'>05:58</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
in retrospect, perhaps Satoshi should have tried to implement SPV first :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938400' id='427531'>
<a class='timestamp' href='#427531'><time timestamp='2015-10-04T06:00:00Z'>06:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
he did.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938400' id='427532'>
<a class='timestamp' href='#427532'><time timestamp='2015-10-04T06:00:00Z'>06:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
there was a begin a it in bitcoin core that was long since stripped out
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938460' id='427533'>
<a class='timestamp' href='#427533'><time timestamp='2015-10-04T06:01:00Z'>06:01</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
begin a it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938460' id='427534'>
<a class='timestamp' href='#427534'><time timestamp='2015-10-04T06:01:00Z'>06:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
at
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938460' id='427535'>
<a class='timestamp' href='#427535'><time timestamp='2015-10-04T06:01:00Z'>06:01</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I&#x27;m saying perhaps the header sync should have been the first consensus code written
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938460' id='427536'>
<a class='timestamp' href='#427536'><time timestamp='2015-10-04T06:01:00Z'>06:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
today it will be much easier to do, but long ago the architecture was probably a bit too alien.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938520' id='427537'>
<a class='timestamp' href='#427537'><time timestamp='2015-10-04T06:02:00Z'>06:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
CodeShark: you have some hindsight benefit of how we think about the architecture of the system in modern times. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938580' id='427538'>
<a class='timestamp' href='#427538'><time timestamp='2015-10-04T06:03:00Z'>06:03</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
yes, I said &quot;in retrospect&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938700' id='427539'>
<a class='timestamp' href='#427539'><time timestamp='2015-10-04T06:05:00Z'>06:05</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
in terms of what we can do now, I think if we really want to build a consensus library we should think in terms of isolating header sync into a standalone unit
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938700' id='427540'>
<a class='timestamp' href='#427540'><time timestamp='2015-10-04T06:05:00Z'>06:05</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
then we can build whatever kind of node on top of that
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938700' id='427541'>
<a class='timestamp' href='#427541'><time timestamp='2015-10-04T06:05:00Z'>06:05</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
whether it be full validation, pruned or not, SPV, etc...
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938820' id='427542'>
<a class='timestamp' href='#427542'><time timestamp='2015-10-04T06:07:00Z'>06:07</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
it will also help in avoiding unintended forks and other such issues in the future as we can explicitly know which rules can and cannot be enforced by a given node
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938820' id='427543'>
<a class='timestamp' href='#427543'><time timestamp='2015-10-04T06:07:00Z'>06:07</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
there&#x27;s a whole spectrum here
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938820' id='427544'>
<a class='timestamp' href='#427544'><time timestamp='2015-10-04T06:07:00Z'>06:07</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
from &quot;check absolutely everything&quot; to &quot;check nothing&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938940' id='427545'>
<a class='timestamp' href='#427545'><time timestamp='2015-10-04T06:09:00Z'>06:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the structure of bitcoin core today is much more agreeable to that than it was in the past.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938940' id='427546'>
<a class='timestamp' href='#427546'><time timestamp='2015-10-04T06:09:00Z'>06:09</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
yes, sipa did a good job with the headers-first sync
<br>
</div>

<div class='talk op-msg' data-timestamp='1443938940' id='427547'>
<a class='timestamp' href='#427547'><time timestamp='2015-10-04T06:09:00Z'>06:09</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
so it&#x27;s going in the right direction
<br>
</div>

<div class='talk op-msg' data-timestamp='1443939060' id='427548'>
<a class='timestamp' href='#427548'><time timestamp='2015-10-04T06:11:00Z'>06:11</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I did some outlining of everything that happens in ProcessNewBlock...there&#x27;s a lot of redundancy and plenty of things that can be cleaned up
<br>
</div>

<div class='talk op-msg' data-timestamp='1443939120' id='427549'>
<a class='timestamp' href='#427549'><time timestamp='2015-10-04T06:12:00Z'>06:12</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
ContextualCheckBlockHeader gets called twice
<br>
</div>

<div class='talk op-msg' data-timestamp='1443939120' id='427550'>
<a class='timestamp' href='#427550'><time timestamp='2015-10-04T06:12:00Z'>06:12</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
it would be nice to just make all the state info checked in that part of the header index itself
<br>
</div>

<div class='talk op-msg' data-timestamp='1443940260' id='427551'>
<a class='timestamp' href='#427551'><time timestamp='2015-10-04T06:31:00Z'>06:31</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
ultimately, I&#x27;d even like the version bits logic itself to be directly part of the header index - so instead of doing something like Rules rules  GetRulesFromBlockIndex(pblockIndex); you can just do blockHeader.GetRules();
<br>
</div>

<div class='talk op-msg' data-timestamp='1443940380' id='427552'>
<a class='timestamp' href='#427552'><time timestamp='2015-10-04T06:33:00Z'>06:33</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
or headerIndex(block_hash).getRules();
<br>
</div>

<div class='talk op-msg' data-timestamp='1443940380' id='427553'>
<a class='timestamp' href='#427553'><time timestamp='2015-10-04T06:33:00Z'>06:33</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
or whatever
<br>
</div>

<div class='talk op-msg' data-timestamp='1443940380' id='427554'>
<a class='timestamp' href='#427554'><time timestamp='2015-10-04T06:33:00Z'>06:33</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
something pretty like that :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443940500' id='427555'>
<a class='timestamp' href='#427555'><time timestamp='2015-10-04T06:35:00Z'>06:35</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
then the rest of the block checking stuff can have conditionals like if(rules.contains(BIP66)) { }
<br>
</div>

<div class='talk op-msg' data-timestamp='1443940560' id='427556'>
<a class='timestamp' href='#427556'><time timestamp='2015-10-04T06:36:00Z'>06:36</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and from that point on we can easily isolate ANY changes to consensus checks and test them independently
<br>
</div>

<div class='talk op-msg' data-timestamp='1443940680' id='427557'>
<a class='timestamp' href='#427557'><time timestamp='2015-10-04T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
even alt coins could be built that can contribute useful ideas back to Bitcoin ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443940680' id='427558'>
<a class='timestamp' href='#427558'><time timestamp='2015-10-04T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
rather than having to constrain our refactoring efforts to avoid pushback from people who long ago forked Bitcoin Core :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1443956940' id='427559'>
<a class='timestamp' href='#427559'><time timestamp='2015-10-04T11:09:00Z'>11:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: no, that can&#x27;t happen with the block index afaik, as the flushing and pruning logic are aware of each other
<br>
</div>

<div class='talk op-msg' data-timestamp='1443957000' id='427560'>
<a class='timestamp' href='#427560'><time timestamp='2015-10-04T11:10:00Z'>11:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: but for the wallet... i guess that&#x27;s possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1443961560' id='427561'>
<a class='timestamp' href='#427561'><time timestamp='2015-10-04T12:26:00Z'>12:26</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
phantomcircuit: sipa: yeah wumpus and i went through the block index / pruning logic a week or so ago, and it is a tiny bit scary, but it works.  i promised him i&#x27;d write it up in an issue, its still on my to do list.  we&#x27;ll check into the wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1443961620' id='427562'>
<a class='timestamp' href='#427562'><time timestamp='2015-10-04T12:27:00Z'>12:27</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
actually i guess for the block index, is more about just commenting the code as to why it works, so no one changes it
<br>
</div>

<div class='talk op-msg' data-timestamp='1443961620' id='427563'>
<a class='timestamp' href='#427563'><time timestamp='2015-10-04T12:27:00Z'>12:27</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
after the 0.12 release, I propose we work towards breaking out headers sync as the first part of modularizing and encapsulating the consensus code :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443961680' id='427564'>
<a class='timestamp' href='#427564'><time timestamp='2015-10-04T12:28:00Z'>12:28</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
we should have a standalone module that can do a headers sync and provide query and subscription services
<br>
</div>

<div class='talk op-msg' data-timestamp='1443961860' id='427565'>
<a class='timestamp' href='#427565'><time timestamp='2015-10-04T12:31:00Z'>12:31</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
not necessarily even as a standalone library - just a unit that can be built along with a simple demo app that only uses stable dependencies
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962040' id='427566'>
<a class='timestamp' href='#427566'><time timestamp='2015-10-04T12:34:00Z'>12:34</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I had designed such an interface but it can probably be done even better: <a href="https://github.com/ciphrex/mSIGNA/blob/master/deps/CoinQ/src/CoinQ_blocks.h#L79" class="link" target="_blank">https://github.com/ciphrex/mSIGNA/blob/master/deps/CoinQ/src/CoinQ_blocks.h#L79</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962100' id='427567'>
<a class='timestamp' href='#427567'><time timestamp='2015-10-04T12:35:00Z'>12:35</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
all the protocol rule changes (including versionbits) can naturally be fit into this
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962520' id='427568'>
<a class='timestamp' href='#427568'><time timestamp='2015-10-04T12:42:00Z'>12:42</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I&#x27;ll write up a more detailed document if enough people seem sufficiently interested to make this worthwhile pursuing and encourage anyone to join in
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962580' id='427569'>
<a class='timestamp' href='#427569'><time timestamp='2015-10-04T12:43:00Z'>12:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CodeShark: synchronization is very different from consensus :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962580' id='427570'>
<a class='timestamp' href='#427570'><time timestamp='2015-10-04T12:43:00Z'>12:43</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
this obviously needs to be done in coordination with all our other refactoring efforts
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962580' id='427571'>
<a class='timestamp' href='#427571'><time timestamp='2015-10-04T12:43:00Z'>12:43</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
sipa, I should clarify...
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962580' id='427572'>
<a class='timestamp' href='#427572'><time timestamp='2015-10-04T12:43:00Z'>12:43</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I meant block header consensus - this example I&#x27;m sharing has no networking code
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962640' id='427573'>
<a class='timestamp' href='#427573'><time timestamp='2015-10-04T12:44:00Z'>12:44</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
it allows you to insert block headers (that can come from any source) and it can validate PoW, timestamp, and version
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962700' id='427574'>
<a class='timestamp' href='#427574'><time timestamp='2015-10-04T12:45:00Z'>12:45</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and can allow clients to subscribe to signals for events...and we can plug in modules for doing more verification with actual block data
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962760' id='427575'>
<a class='timestamp' href='#427575'><time timestamp='2015-10-04T12:46:00Z'>12:46</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
then we&#x27;ll have total flexibility - we can do headers-only sync...or we can do full validation...or anything in between
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962760' id='427576'>
<a class='timestamp' href='#427576'><time timestamp='2015-10-04T12:46:00Z'>12:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CodeShark: i&#x27;ve suggested something similar, by moving full validation to a separate module with its own state
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962820' id='427577'>
<a class='timestamp' href='#427577'><time timestamp='2015-10-04T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-7'> randy-waterhouse</span>&gt;
a hybrid node
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962820' id='427578'>
<a class='timestamp' href='#427578'><time timestamp='2015-10-04T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which uses the main signals to trigger full validation
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962820' id='427579'>
<a class='timestamp' href='#427579'><time timestamp='2015-10-04T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
yeah, I think it&#x27;s the way to go
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962940' id='427580'>
<a class='timestamp' href='#427580'><time timestamp='2015-10-04T12:49:00Z'>12:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think my point is that that interface already exists
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962940' id='427581'>
<a class='timestamp' href='#427581'><time timestamp='2015-10-04T12:49:00Z'>12:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and we should reuse it
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962940' id='427582'>
<a class='timestamp' href='#427582'><time timestamp='2015-10-04T12:49:00Z'>12:49</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
can I see it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443962940' id='427583'>
<a class='timestamp' href='#427583'><time timestamp='2015-10-04T12:49:00Z'>12:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but rather than extract header validation from it
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963000' id='427584'>
<a class='timestamp' href='#427584'><time timestamp='2015-10-04T12:50:00Z'>12:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
move full validation out of it
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963000' id='427585'>
<a class='timestamp' href='#427585'><time timestamp='2015-10-04T12:50:00Z'>12:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
eh, look at main.h, there is a signals interface
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963120' id='427586'>
<a class='timestamp' href='#427586'><time timestamp='2015-10-04T12:52:00Z'>12:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
though i&#x27;d start with the wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963120' id='427587'>
<a class='timestamp' href='#427587'><time timestamp='2015-10-04T12:52:00Z'>12:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
allow it to have its own &quot;active block&quot;, which can be different from that of main
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963180' id='427588'>
<a class='timestamp' href='#427588'><time timestamp='2015-10-04T12:53:00Z'>12:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ot only subscribes to updatetip events, and then requests the block data asynchronously to sync
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963180' id='427589'>
<a class='timestamp' href='#427589'><time timestamp='2015-10-04T12:53:00Z'>12:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
full validation can work the same way, but needs a slightly more featureful interface, where it can mark a block as invalid
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963240' id='427590'>
<a class='timestamp' href='#427590'><time timestamp='2015-10-04T12:54:00Z'>12:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CodeShark: also, i disagree with moving more logic into basic data structure classes
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963300' id='427591'>
<a class='timestamp' href='#427591'><time timestamp='2015-10-04T12:55:00Z'>12:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we&#x27;ve been moving the opposite direction mostly, because it really interferes with modularization
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963300' id='427592'>
<a class='timestamp' href='#427592'><time timestamp='2015-10-04T12:55:00Z'>12:55</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
well, it doesn&#x27;t have to be implemented in the interface classes - we can either use templates or inheritance or something ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963300' id='427593'>
<a class='timestamp' href='#427593'><time timestamp='2015-10-04T12:55:00Z'>12:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
bleh, even uglier
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963300' id='427594'>
<a class='timestamp' href='#427594'><time timestamp='2015-10-04T12:55:00Z'>12:55</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
or delegation
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963300' id='427595'>
<a class='timestamp' href='#427595'><time timestamp='2015-10-04T12:55:00Z'>12:55</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
why uglier?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963360' id='427596'>
<a class='timestamp' href='#427596'><time timestamp='2015-10-04T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
let me give an example to elaborate, so we&#x27;re talking about the same thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963360' id='427597'>
<a class='timestamp' href='#427597'><time timestamp='2015-10-04T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
imagine ctransaction had a sign function
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963360' id='427598'>
<a class='timestamp' href='#427598'><time timestamp='2015-10-04T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sounds awesome, very useful and elegant
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963360' id='427599'>
<a class='timestamp' href='#427599'><time timestamp='2015-10-04T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
oh, that&#x27;s not what I&#x27;m saying at all!!!
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963360' id='427600'>
<a class='timestamp' href='#427600'><time timestamp='2015-10-04T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I actually think that&#x27;s hideous
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963420' id='427601'>
<a class='timestamp' href='#427601'><time timestamp='2015-10-04T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you were saying the block should have a function to ask what bips apply to it
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963420' id='427602'>
<a class='timestamp' href='#427602'><time timestamp='2015-10-04T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
CTransaction should just contain the transaction data in a way that&#x27;s easily accessible by the app and provide serialization
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963420' id='427603'>
<a class='timestamp' href='#427603'><time timestamp='2015-10-04T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think that&#x27;s very similar
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963420' id='427604'>
<a class='timestamp' href='#427604'><time timestamp='2015-10-04T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok, we agree there
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963540' id='427605'>
<a class='timestamp' href='#427605'><time timestamp='2015-10-04T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
regarding asking what bips apply, we need to maintain an index for this...so it seems like it would be convenient to have the same entrypoints we use to grab other block header info...but there are several alternatives to this
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963600' id='427606'>
<a class='timestamp' href='#427606'><time timestamp='2015-10-04T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and in fact, it makes sense to NOT build this logic into the core header consensus stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963600' id='427607'>
<a class='timestamp' href='#427607'><time timestamp='2015-10-04T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
at least not directly
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963600' id='427608'>
<a class='timestamp' href='#427608'><time timestamp='2015-10-04T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
good :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963660' id='427609'>
<a class='timestamp' href='#427609'><time timestamp='2015-10-04T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I&#x27;d even leave room for flexibility on PoW and timestamp verification :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963780' id='427610'>
<a class='timestamp' href='#427610'><time timestamp='2015-10-04T13:03:00Z'>13:03</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and if we want to go further, we can even make the header structure itself abstract
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963780' id='427611'>
<a class='timestamp' href='#427611'><time timestamp='2015-10-04T13:03:00Z'>13:03</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
the key structural element at this level is the notion of a block header tree
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963840' id='427612'>
<a class='timestamp' href='#427612'><time timestamp='2015-10-04T13:04:00Z'>13:04</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
which branch is &quot;active&quot; and the rules we apply to connect new headers needn&#x27;t be specified at this level
<br>
</div>

<div class='talk op-msg' data-timestamp='1443963960' id='427613'>
<a class='timestamp' href='#427613'><time timestamp='2015-10-04T13:06:00Z'>13:06</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
this stuff can be provided by a number of different mechanisms
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964020' id='427614'>
<a class='timestamp' href='#427614'><time timestamp='2015-10-04T13:07:00Z'>13:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it makes more sense to do a writeup together with some minimal idea for code changes then talk here
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964080' id='427615'>
<a class='timestamp' href='#427615'><time timestamp='2015-10-04T13:08:00Z'>13:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
irc is good for discussion, but not really for monologue
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964080' id='427616'>
<a class='timestamp' href='#427616'><time timestamp='2015-10-04T13:08:00Z'>13:08</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
yeah :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964140' id='427617'>
<a class='timestamp' href='#427617'><time timestamp='2015-10-04T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
so google docs?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964200' id='427618'>
<a class='timestamp' href='#427618'><time timestamp='2015-10-04T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964200' id='427619'>
<a class='timestamp' href='#427619'><time timestamp='2015-10-04T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or a branch
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964320' id='427620'>
<a class='timestamp' href='#427620'><time timestamp='2015-10-04T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I&#x27;d like to approach this from both directions, top-down and bottom up. I&#x27;d like to consider high level architectural stuff to set some goals...and then consider the practical implementation issues...and then put together a plan that can get us to our goals in incremental steps that are palatable
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964380' id='427621'>
<a class='timestamp' href='#427621'><time timestamp='2015-10-04T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so i prefer a high-level plan (without code) to show the intent, and then low-level changes that help get therr
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964380' id='427622'>
<a class='timestamp' href='#427622'><time timestamp='2015-10-04T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
yes, absolutely agreed - the high-level plan should be much more about diagrams and ideas than about code
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964500' id='427623'>
<a class='timestamp' href='#427623'><time timestamp='2015-10-04T13:15:00Z'>13:15</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
we&#x27;ll inevitably need to make some design decisions along the way that are largely determined by practical considerations...but our ultimate objectives should be clear
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964740' id='427624'>
<a class='timestamp' href='#427624'><time timestamp='2015-10-04T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
moreover, we don&#x27;t need to spell out all the individual steps up front - it is sufficient that we specify a few initial steps that, regardless of what we decide later, move us in the right direction
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964740' id='427625'>
<a class='timestamp' href='#427625'><time timestamp='2015-10-04T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
but we should have a basic plan
<br>
</div>

<div class='talk op-msg' data-timestamp='1443964860' id='427626'>
<a class='timestamp' href='#427626'><time timestamp='2015-10-04T13:21:00Z'>13:21</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443985740' id='427627'>
<a class='timestamp' href='#427627'><time timestamp='2015-10-04T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-12'> GitHub106</span>&gt;
[bitcoin] jgarzik pushed 1 new commit to master: <a href="https://github.com/bitcoin/bitcoin/commit/3ab3de8ba1a63d5ec0f97ae12e660d9730c60156" class="link" target="_blank">https://github.com/bitcoin/bitcoin/commit/3ab3de8ba1a63d5ec0f97ae12e660d9730c60156</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1443985740' id='427628'>
<a class='timestamp' href='#427628'><time timestamp='2015-10-04T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-12'> GitHub106</span>&gt;
bitcoin/master 3ab3de8 Jeff Garzik: qa/pull-tester/rpc-tests.py: chmod 0755...
<br>
</div>

<div class='talk op-msg' data-timestamp='1443989880' id='427629'>
<a class='timestamp' href='#427629'><time timestamp='2015-10-04T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If we&#x27;re going to backport BIP65 to 0.8 we should also apply lowS signatures there, (a28fb70e45d764e558966ba3b02bd16e02b11c14 from 0.9).
<br>
</div>

<div class='talk op-msg' data-timestamp='1443990960' id='427630'>
<a class='timestamp' href='#427630'><time timestamp='2015-10-04T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
are there any miners on 0.8?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443990960' id='427631'>
<a class='timestamp' href='#427631'><time timestamp='2015-10-04T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
who knows?
<br>
</div>

<div class='talk op-msg' data-timestamp='1444001340' id='427632'>
<a class='timestamp' href='#427632'><time timestamp='2015-10-04T23:29:00Z'>23:29</time></a>
&lt;<span class='nick nick-8'> maaku</span>&gt;
one would hope not, but one should not operate based on hope
<br>
</div>

<div class='talk op-msg' data-timestamp='1444003140' id='427633'>
<a class='timestamp' href='#427633'><time timestamp='2015-10-04T23:59:00Z'>23:59</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
I think we moved the last 0.8 miners off it during the BIP66/OpenSSL fiasco
<br>
</div>

<div class='talk op-msg' data-timestamp='1444003140' id='427634'>
<a class='timestamp' href='#427634'><time timestamp='2015-10-04T23:59:00Z'>23:59</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
although we never quite figured out why their 0.8 was mining the problematic txns
<br>
</div>

</div>
</section>

</body>
</html>
