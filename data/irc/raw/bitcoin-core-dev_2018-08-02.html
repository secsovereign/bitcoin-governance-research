<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2018-08-02
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2018-08-02' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:21 UTC</pre>
<pre><a href="/bitcoin-core-dev/2018-07-02">&lt;</a><span class='header'>   August 2018    </span><a href="/bitcoin-core-dev/2018-09-02">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;          <a class="" href="/bitcoin-core-dev/2018-08-01">1</a>  <a class="current" href="/bitcoin-core-dev/2018-08-02">2</a>  <a class="" href="/bitcoin-core-dev/2018-08-03">3</a>  <a class="" href="/bitcoin-core-dev/2018-08-04">4</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2018-08-05">5</a>  <a class="" href="/bitcoin-core-dev/2018-08-06">6</a>  <a class="" href="/bitcoin-core-dev/2018-08-07">7</a>  <a class="" href="/bitcoin-core-dev/2018-08-08">8</a>  <a class="" href="/bitcoin-core-dev/2018-08-09">9</a> <a class="" href="/bitcoin-core-dev/2018-08-10">10</a> <a class="" href="/bitcoin-core-dev/2018-08-11">11</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-08-12">12</a> <a class="" href="/bitcoin-core-dev/2018-08-13">13</a> <a class="" href="/bitcoin-core-dev/2018-08-14">14</a> <a class="" href="/bitcoin-core-dev/2018-08-15">15</a> <a class="" href="/bitcoin-core-dev/2018-08-16">16</a> <a class="" href="/bitcoin-core-dev/2018-08-17">17</a> <a class="" href="/bitcoin-core-dev/2018-08-18">18</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-08-19">19</a> <a class="" href="/bitcoin-core-dev/2018-08-20">20</a> <a class="" href="/bitcoin-core-dev/2018-08-21">21</a> <a class="" href="/bitcoin-core-dev/2018-08-22">22</a> <a class="" href="/bitcoin-core-dev/2018-08-23">23</a> <a class="" href="/bitcoin-core-dev/2018-08-24">24</a> <a class="" href="/bitcoin-core-dev/2018-08-25">25</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-08-26">26</a> <a class="" href="/bitcoin-core-dev/2018-08-27">27</a> <a class="" href="/bitcoin-core-dev/2018-08-28">28</a> <a class="" href="/bitcoin-core-dev/2018-08-29">29</a> <a class="" href="/bitcoin-core-dev/2018-08-30">30</a> <a class="" href="/bitcoin-core-dev/2018-08-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1533177600' id='623256'>
<a class='timestamp' href='#623256'><time timestamp='2018-08-02T02:40:00Z'>02:40</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, <a href="https://daniel.haxx.se/blog/2012/10/10/wsapoll-is-broken/" class="link" target="_blank">https://daniel.haxx.se/blog/2012/10/10/wsapoll-is-broken/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533177600' id='623257'>
<a class='timestamp' href='#623257'><time timestamp='2018-08-02T02:40:00Z'>02:40</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
apparently the answer is dont use that
<br>
</div>

<div class='talk op-msg' data-timestamp='1533177840' id='623258'>
<a class='timestamp' href='#623258'><time timestamp='2018-08-02T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Great, WSAPoll doesn&#x27;t report socket failures
<br>
</div>

<div class='talk op-msg' data-timestamp='1533178380' id='623259'>
<a class='timestamp' href='#623259'><time timestamp='2018-08-02T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1533178920' id='623260'>
<a class='timestamp' href='#623260'><time timestamp='2018-08-02T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
again: we can stay with select on windows. It doesn&#x27;t have the 1024 FD problem. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533179820' id='623261'>
<a class='timestamp' href='#623261'><time timestamp='2018-08-02T03:17:00Z'>03:17</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
The fix for my specific problem was to just modify how many mmaps() leveldb will make
<br>
</div>

<div class='talk op-msg' data-timestamp='1533179880' id='623262'>
<a class='timestamp' href='#623262'><time timestamp='2018-08-02T03:18:00Z'>03:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
ossifrage: do you have any idea why the number of mmaps would be limited at all, on 64 bit systems?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533179940' id='623263'>
<a class='timestamp' href='#623263'><time timestamp='2018-08-02T03:19:00Z'>03:19</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
The comment is about &quot;performance reasons&quot; for large databases... But 1000 mmaps is in the noise I think
<br>
</div>

<div class='talk op-msg' data-timestamp='1533179940' id='623264'>
<a class='timestamp' href='#623264'><time timestamp='2018-08-02T03:19:00Z'>03:19</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
I changed src/leveldb/util/env_posix.cc mmap_limit from 1000 to 4096
<br>
</div>

<div class='talk op-msg' data-timestamp='1533180060' id='623265'>
<a class='timestamp' href='#623265'><time timestamp='2018-08-02T03:21:00Z'>03:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t understand what they mean there.. are they thinking in terms of TLB load or something?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533180060' id='623266'>
<a class='timestamp' href='#623266'><time timestamp='2018-08-02T03:21:00Z'>03:21</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
mmap() is a great way to generate a very large amount of write pressure, but it seems like most of the leveldb use in bitcoin has a very low change rate
<br>
</div>

<div class='talk op-msg' data-timestamp='1533180180' id='623267'>
<a class='timestamp' href='#623267'><time timestamp='2018-08-02T03:23:00Z'>03:23</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
But lots of memory and slow IO will do that just fine without a single mmmap()
<br>
</div>

<div class='talk op-msg' data-timestamp='1533180300' id='623268'>
<a class='timestamp' href='#623268'><time timestamp='2018-08-02T03:25:00Z'>03:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
leveldb&#x27;s writes are very structured, basically it&#x27;s an append only thing, that periodically rewrites whole files.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533181080' id='623269'>
<a class='timestamp' href='#623269'><time timestamp='2018-08-02T03:38:00Z'>03:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
mmap is only used for readonly things
<br>
</div>

<div class='talk op-msg' data-timestamp='1533181080' id='623270'>
<a class='timestamp' href='#623270'><time timestamp='2018-08-02T03:38:00Z'>03:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
afaik
<br>
</div>

<div class='talk op-msg' data-timestamp='1533181080' id='623271'>
<a class='timestamp' href='#623271'><time timestamp='2018-08-02T03:38:00Z'>03:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the files are produced in one go, by dumping a sorted table to disk
<br>
</div>

<div class='talk op-msg' data-timestamp='1533181260' id='623272'>
<a class='timestamp' href='#623272'><time timestamp='2018-08-02T03:41:00Z'>03:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I wish the leveldb project were more active, it would be nice if we could ask if there is a reason we shouldn&#x27;t just kill the limit on 64-bit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533182700' id='623273'>
<a class='timestamp' href='#623273'><time timestamp='2018-08-02T04:05:00Z'>04:05</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
sipa, that is a good idea, especially if the writes are streaming
<br>
</div>

<div class='talk op-msg' data-timestamp='1533183960' id='623274'>
<a class='timestamp' href='#623274'><time timestamp='2018-08-02T04:26:00Z'>04:26</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, gmaxwell should be used only for reads
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184020' id='623275'>
<a class='timestamp' href='#623275'><time timestamp='2018-08-02T04:27:00Z'>04:27</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
in which case increasing the limit to... infinity shouldn&#x27;t be an issue on 64bit systems
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184260' id='623276'>
<a class='timestamp' href='#623276'><time timestamp='2018-08-02T04:31:00Z'>04:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
doesn&#x27;t replace using poll instead of select.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184260' id='623277'>
<a class='timestamp' href='#623277'><time timestamp='2018-08-02T04:31:00Z'>04:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: hows the PR coming? :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184320' id='623278'>
<a class='timestamp' href='#623278'><time timestamp='2018-08-02T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
well i had one that looked like it worked but then fucking wsapoll is broken
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184320' id='623279'>
<a class='timestamp' href='#623279'><time timestamp='2018-08-02T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
soooo
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184320' id='623280'>
<a class='timestamp' href='#623280'><time timestamp='2018-08-02T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
try again
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184320' id='623281'>
<a class='timestamp' href='#623281'><time timestamp='2018-08-02T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: don&#x27;t do wsapoll
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184320' id='623282'>
<a class='timestamp' href='#623282'><time timestamp='2018-08-02T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just poll on sane OSes
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184320' id='623283'>
<a class='timestamp' href='#623283'><time timestamp='2018-08-02T04:32:00Z'>04:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
keep using select on windows
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184440' id='623284'>
<a class='timestamp' href='#623284'><time timestamp='2018-08-02T04:34:00Z'>04:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the main reason to not use select is the stupid fd value limit, but that doesn&#x27;t apply for windows.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184440' id='623285'>
<a class='timestamp' href='#623285'><time timestamp='2018-08-02T04:34:00Z'>04:34</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i mean yeah but that&#x27;s actually a bigger change
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184500' id='623286'>
<a class='timestamp' href='#623286'><time timestamp='2018-08-02T04:35:00Z'>04:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it&#x27;s just &quot;keep the existing code, add the poll in an ifdef&quot;, no
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184740' id='623287'>
<a class='timestamp' href='#623287'><time timestamp='2018-08-02T04:39:00Z'>04:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, it&#x27;s slightly different, there&#x27;s no FD_ISSET
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184800' id='623288'>
<a class='timestamp' href='#623288'><time timestamp='2018-08-02T04:40:00Z'>04:40</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
you iterate through a list of fd, events pairs
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184800' id='623289'>
<a class='timestamp' href='#623289'><time timestamp='2018-08-02T04:40:00Z'>04:40</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
the select logic iterates over all the nodes and calls FD_ISSET
<br>
</div>

<div class='talk op-msg' data-timestamp='1533184800' id='623290'>
<a class='timestamp' href='#623290'><time timestamp='2018-08-02T04:40:00Z'>04:40</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
(which iirc is insane cause FD_ISSET iterates over all the fds)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533185040' id='623291'>
<a class='timestamp' href='#623291'><time timestamp='2018-08-02T04:44:00Z'>04:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: in windows it does
<br>
</div>

<div class='talk op-msg' data-timestamp='1533185040' id='623292'>
<a class='timestamp' href='#623292'><time timestamp='2018-08-02T04:44:00Z'>04:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in linux it&#x27;s a bitfield test
<br>
</div>

<div class='talk op-msg' data-timestamp='1533185100' id='623293'>
<a class='timestamp' href='#623293'><time timestamp='2018-08-02T04:45:00Z'>04:45</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, oh
<br>
</div>

<div class='talk op-msg' data-timestamp='1533185160' id='623294'>
<a class='timestamp' href='#623294'><time timestamp='2018-08-02T04:46:00Z'>04:46</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
well either way there isn&#x27;t a trivial way to do that mapping with poll()
<br>
</div>

<div class='talk op-msg' data-timestamp='1533185400' id='623295'>
<a class='timestamp' href='#623295'><time timestamp='2018-08-02T04:50:00Z'>04:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: which is btw the reason why select is resteicted to fd&#x27;s below 1024
<br>
</div>

<div class='talk op-msg' data-timestamp='1533185400' id='623296'>
<a class='timestamp' href='#623296'><time timestamp='2018-08-02T04:50:00Z'>04:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
fdset id a 128 byte array
<br>
</div>

<div class='talk op-msg' data-timestamp='1533185400' id='623297'>
<a class='timestamp' href='#623297'><time timestamp='2018-08-02T04:50:00Z'>04:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*is
<br>
</div>

<div class='talk op-msg' data-timestamp='1533185520' id='623298'>
<a class='timestamp' href='#623298'><time timestamp='2018-08-02T04:52:00Z'>04:52</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
yeah makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1533185640' id='623299'>
<a class='timestamp' href='#623299'><time timestamp='2018-08-02T04:54:00Z'>04:54</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i&#x27;ll add the iteration needs to be reversed for epoll or kqueue also anyways
<br>
</div>

<div class='talk op-msg' data-timestamp='1533186420' id='623300'>
<a class='timestamp' href='#623300'><time timestamp='2018-08-02T05:07:00Z'>05:07</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
cfields Looking forward to the turtles!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533186540' id='623301'>
<a class='timestamp' href='#623301'><time timestamp='2018-08-02T05:09:00Z'>05:09</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
fanquake: heh, I just pushed it so that dongcarl can get his hands dirty. It&#x27;s still an absolute disaster.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533186780' id='623302'>
<a class='timestamp' href='#623302'><time timestamp='2018-08-02T05:13:00Z'>05:13</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
cfields, is there a map from fd to CNode ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533186840' id='623303'>
<a class='timestamp' href='#623303'><time timestamp='2018-08-02T05:14:00Z'>05:14</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
phantomcircuit: don&#x27;t believe so. IIRC we always just iterate.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533186900' id='623304'>
<a class='timestamp' href='#623304'><time timestamp='2018-08-02T05:15:00Z'>05:15</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
how does that work with libevent stuff? iirc it&#x27;s just calling a callback with the fd right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533186960' id='623305'>
<a class='timestamp' href='#623305'><time timestamp='2018-08-02T05:16:00Z'>05:16</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
phantomcircuit: the libevent stuff hasn&#x27;t been merged. You mean in my branches?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533186960' id='623306'>
<a class='timestamp' href='#623306'><time timestamp='2018-08-02T05:16:00Z'>05:16</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1533186960' id='623307'>
<a class='timestamp' href='#623307'><time timestamp='2018-08-02T05:16:00Z'>05:16</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
anyway, yea, callback with fd and a few other things, and a caller-supplied pointer
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187020' id='623308'>
<a class='timestamp' href='#623308'><time timestamp='2018-08-02T05:17:00Z'>05:17</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
oh i see the caller supplied pointer
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187020' id='623309'>
<a class='timestamp' href='#623309'><time timestamp='2018-08-02T05:17:00Z'>05:17</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
right so libevent is basically keeping that map for you
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187080' id='623310'>
<a class='timestamp' href='#623310'><time timestamp='2018-08-02T05:18:00Z'>05:18</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
well everything&#x27;s done in reverse, so there shouldn&#x27;t be any need to ever lookup an fd
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187080' id='623311'>
<a class='timestamp' href='#623311'><time timestamp='2018-08-02T05:18:00Z'>05:18</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
so, i suppose :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187260' id='623312'>
<a class='timestamp' href='#623312'><time timestamp='2018-08-02T05:21:00Z'>05:21</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
cfields, well the underlying epoll thing requires you can map fd to cnode
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187260' id='623313'>
<a class='timestamp' href='#623313'><time timestamp='2018-08-02T05:21:00Z'>05:21</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
just with libevent it&#x27;s doing it for you implicitly with the callback data
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187260' id='623314'>
<a class='timestamp' href='#623314'><time timestamp='2018-08-02T05:21:00Z'>05:21</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
for poll() you need the same but it&#x27;s explicit
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187380' id='623315'>
<a class='timestamp' href='#623315'><time timestamp='2018-08-02T05:23:00Z'>05:23</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
I thought you had to iterate through the fd list anyway with poll similar to select. Am I completely misremembering?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187500' id='623316'>
<a class='timestamp' href='#623316'><time timestamp='2018-08-02T05:25:00Z'>05:25</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
after it wakes for active fds, I mean.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187800' id='623317'>
<a class='timestamp' href='#623317'><time timestamp='2018-08-02T05:30:00Z'>05:30</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
cfields, you iterate through the list of fd&#x27;s you gave it
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187800' id='623318'>
<a class='timestamp' href='#623318'><time timestamp='2018-08-02T05:30:00Z'>05:30</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187860' id='623319'>
<a class='timestamp' href='#623319'><time timestamp='2018-08-02T05:31:00Z'>05:31</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
phantomcircuit: right, so why the need for a map? You&#x27;ve got the pointers to the CNodes that you pulled the fds from, and you need to test them anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187980' id='623320'>
<a class='timestamp' href='#623320'><time timestamp='2018-08-02T05:33:00Z'>05:33</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
or are you just trying to eliminate the overhead of the iteration of nodes that didn&#x27;t wake?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533187980' id='623321'>
<a class='timestamp' href='#623321'><time timestamp='2018-08-02T05:33:00Z'>05:33</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(I don&#x27;t remember if poll gives you anything to help avoid that)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533188100' id='623322'>
<a class='timestamp' href='#623322'><time timestamp='2018-08-02T05:35:00Z'>05:35</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
cfields, i mean i can make the map right there, but it&#x27;s awkward
<br>
</div>

<div class='talk op-msg' data-timestamp='1533188160' id='623323'>
<a class='timestamp' href='#623323'><time timestamp='2018-08-02T05:36:00Z'>05:36</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
phantomcircuit: good luck :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533188160' id='623324'>
<a class='timestamp' href='#623324'><time timestamp='2018-08-02T05:36:00Z'>05:36</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
nnite
<br>
</div>

<div class='talk op-msg' data-timestamp='1533192960' id='623325'>
<a class='timestamp' href='#623325'><time timestamp='2018-08-02T06:56:00Z'>06:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
kallewoof: if there is no non-locale-independent function, you&#x27;re going to have to implement one yourself
<br>
</div>

<div class='talk op-msg' data-timestamp='1533192960' id='623326'>
<a class='timestamp' href='#623326'><time timestamp='2018-08-02T06:56:00Z'>06:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
kallewoof: usually this is trivial as the ASCII case of the string functions is trivial
<br>
</div>

<div class='talk op-msg' data-timestamp='1533193080' id='623327'>
<a class='timestamp' href='#623327'><time timestamp='2018-08-02T06:58:00Z'>06:58</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
wumpus: ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1533193260' id='623328'>
<a class='timestamp' href='#623328'><time timestamp='2018-08-02T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
who own drahtbot?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533193260' id='623329'>
<a class='timestamp' href='#623329'><time timestamp='2018-08-02T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
*owns
<br>
</div>

<div class='talk op-msg' data-timestamp='1533193320' id='623330'>
<a class='timestamp' href='#623330'><time timestamp='2018-08-02T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
jonasschnelli: MarcoFalke
<br>
</div>

<div class='talk op-msg' data-timestamp='1533193320' id='623331'>
<a class='timestamp' href='#623331'><time timestamp='2018-08-02T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Nice work... I wasn&#x27;t aware that it does also builds via gitian
<br>
</div>

<div class='talk op-msg' data-timestamp='1533193380' id='623332'>
<a class='timestamp' href='#623332'><time timestamp='2018-08-02T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes it&#x27;s a great bot
<br>
</div>

<div class='talk op-msg' data-timestamp='1533193620' id='623333'>
<a class='timestamp' href='#623333'><time timestamp='2018-08-02T07:07:00Z'>07:07</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
^ It keeps getting better
<br>
</div>

<div class='talk op-msg' data-timestamp='1533193680' id='623334'>
<a class='timestamp' href='#623334'><time timestamp='2018-08-02T07:08:00Z'>07:08</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
I wonder if it&#x27;ll be running/posting the results of some of the benchmarks from perfmonitor
<br>
</div>

<div class='talk op-msg' data-timestamp='1533193800' id='623335'>
<a class='timestamp' href='#623335'><time timestamp='2018-08-02T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
<a href="https://github.com/chaincodelabs/bitcoin-perfmonitor" class="link" target="_blank">https://github.com/chaincodelabs/bitcoin-perfmonitor</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533194700' id='623336'>
<a class='timestamp' href='#623336'><time timestamp='2018-08-02T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumus 13835 &amp; 13824 should be mergable
<br>
</div>

<div class='talk op-msg' data-timestamp='1533194700' id='623337'>
<a class='timestamp' href='#623337'><time timestamp='2018-08-02T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
*wumpus
<br>
</div>

<div class='talk op-msg' data-timestamp='1533198420' id='623338'>
<a class='timestamp' href='#623338'><time timestamp='2018-08-02T08:27:00Z'>08:27</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumups Also #13844 and 13796
<br>
</div>

<div class='talk op-msg' data-timestamp='1533198420' id='623339'>
<a class='timestamp' href='#623339'><time timestamp='2018-08-02T08:27:00Z'>08:27</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13844" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13844</a> | doc: correct the help output for -prune by hebasto · Pull Request #13844 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1533200760' id='623340'>
<a class='timestamp' href='#623340'><time timestamp='2018-08-02T09:06:00Z'>09:06</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
sjors I&#x27;ve added the gitian-build label, so I think that should trigger it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533201480' id='623341'>
<a class='timestamp' href='#623341'><time timestamp='2018-08-02T09:18:00Z'>09:18</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
fanquake thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1533207480' id='623342'>
<a class='timestamp' href='#623342'><time timestamp='2018-08-02T10:58:00Z'>10:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
Aug 01, 12:07 - f030410e88f11c5ff1ce6c80b463a1c7f6d39830functional-test-runner@ccl-bench-hdd-1 Average time up 9.5%
<br>
</div>

<div class='talk op-msg' data-timestamp='1533207540' id='623343'>
<a class='timestamp' href='#623343'><time timestamp='2018-08-02T10:59:00Z'>10:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
looking at how to interpret bitcoinperf.com  - does this mean that merging #13697 made the tests 10% slower on gcc, but not clang?!?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533207540' id='623344'>
<a class='timestamp' href='#623344'><time timestamp='2018-08-02T10:59:00Z'>10:59</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13697" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13697</a> | Support output descriptors in scantxoutset by sipa · Pull Request #13697 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1533207660' id='623345'>
<a class='timestamp' href='#623345'><time timestamp='2018-08-02T11:01:00Z'>11:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s not surprising that it makes running the functional tests fractially slower, as test cases were added, but 10% is a lot
<br>
</div>

<div class='talk op-msg' data-timestamp='1533209160' id='623346'>
<a class='timestamp' href='#623346'><time timestamp='2018-08-02T11:26:00Z'>11:26</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
xpub derivation is expensive
<br>
</div>

<div class='talk op-msg' data-timestamp='1533209220' id='623347'>
<a class='timestamp' href='#623347'><time timestamp='2018-08-02T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
You could mock the actual derivation with lookup tables.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533209220' id='623348'>
<a class='timestamp' href='#623348'><time timestamp='2018-08-02T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
But that&#x27;s pretty invasive for the functional test suite.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533209460' id='623349'>
<a class='timestamp' href='#623349'><time timestamp='2018-08-02T11:31:00Z'>11:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes but what I mean is that the test framework consists of so many tests, this mean that one test takes up ~1/10th of it
<br>
</div>

<div class='talk op-msg' data-timestamp='1533210540' id='623350'>
<a class='timestamp' href='#623350'><time timestamp='2018-08-02T11:49:00Z'>11:49</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
That&#x27;s not surprising because of how many derivations it&#x27;s doing, trying to scan up to a thousand (?) keys for those xpub/* patterns. Using the range param for scantxoutset might help.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533210840' id='623351'>
<a class='timestamp' href='#623351'><time timestamp='2018-08-02T11:54:00Z'>11:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
good point, yes true
<br>
</div>

<div class='talk op-msg' data-timestamp='1533210900' id='623352'>
<a class='timestamp' href='#623352'><time timestamp='2018-08-02T11:55:00Z'>11:55</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
I left a note for sipa on the PR. The default is 1000 and sevearl tests use 1499, I suggest using 1 and 2.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533212400' id='623353'>
<a class='timestamp' href='#623353'><time timestamp='2018-08-02T12:20:00Z'>12:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1533214080' id='623354'>
<a class='timestamp' href='#623354'><time timestamp='2018-08-02T12:48:00Z'>12:48</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
fanquake: no rush, but how often does that bot build things? There&#x27;s only one ticket with a &quot;Needs gitian build&quot; label atm.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533214140' id='623355'>
<a class='timestamp' href='#623355'><time timestamp='2018-08-02T12:49:00Z'>12:49</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
provoostenator: Not 100% sure if it&#x27;s completely automated or not. MarcoFalke should be able to help out.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533214200' id='623356'>
<a class='timestamp' href='#623356'><time timestamp='2018-08-02T12:50:00Z'>12:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
looks like we have a causality issue here, that message from provoostenator is visible here <b>*just before*</b> fanquake joining
<br>
</div>

<div class='talk op-msg' data-timestamp='1533214260' id='623357'>
<a class='timestamp' href='#623357'><time timestamp='2018-08-02T12:51:00Z'>12:51</time></a>
&lt;<span class='nick nick-16'> * provoostenator</span>&gt;
hides time machine
<br>
</div>

<div class='talk op-msg' data-timestamp='1533214260' id='623358'>
<a class='timestamp' href='#623358'><time timestamp='2018-08-02T12:51:00Z'>12:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
leaky wormholes again
<br>
</div>

<div class='talk op-msg' data-timestamp='1533214260' id='623359'>
<a class='timestamp' href='#623359'><time timestamp='2018-08-02T12:51:00Z'>12:51</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus :o
<br>
</div>

<div class='talk op-msg' data-timestamp='1533215280' id='623360'>
<a class='timestamp' href='#623360'><time timestamp='2018-08-02T13:08:00Z'>13:08</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus I&#x27;ve retested 13823 now, thanks for pointing out the quoting issue.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533217020' id='623361'>
<a class='timestamp' href='#623361'><time timestamp='2018-08-02T13:37:00Z'>13:37</time></a>
&lt;<span class='nick nick-2'> ken2812221_</span>&gt;
wumpus: I think #13426 can be postponed to 0.18, I don&#x27;t think this can be merged in a week. I&#x27;ll open an issue to track this and seperate to several PR for easier review
<br>
</div>

<div class='talk op-msg' data-timestamp='1533217080' id='623362'>
<a class='timestamp' href='#623362'><time timestamp='2018-08-02T13:38:00Z'>13:38</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13426" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13426</a> | [bugfix] Fix encoding issue for Windows by ken2812221 · Pull Request #13426 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1533217800' id='623363'>
<a class='timestamp' href='#623363'><time timestamp='2018-08-02T13:50:00Z'>13:50</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
provoostenator: It builds on a single cpu on gce, heh. So maybe 24hours to build master and the commit for all targets ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533217800' id='623364'>
<a class='timestamp' href='#623364'><time timestamp='2018-08-02T13:50:00Z'>13:50</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
Also, we&#x27;ll 6+months to test if there is any side effect after these changes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533217860' id='623365'>
<a class='timestamp' href='#623365'><time timestamp='2018-08-02T13:51:00Z'>13:51</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
ken2812221: Yeah, was going to ask about the state of this. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533217860' id='623366'>
<a class='timestamp' href='#623366'><time timestamp='2018-08-02T13:51:00Z'>13:51</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Imo we should at least fix the crash 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533217860' id='623367'>
<a class='timestamp' href='#623367'><time timestamp='2018-08-02T13:51:00Z'>13:51</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
the crash on Windows for non-ascii wallet file name
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218040' id='623368'>
<a class='timestamp' href='#623368'><time timestamp='2018-08-02T13:54:00Z'>13:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: cool, thanks for retesting
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218040' id='623369'>
<a class='timestamp' href='#623369'><time timestamp='2018-08-02T13:54:00Z'>13:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ken2812221: ok!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218100' id='623370'>
<a class='timestamp' href='#623370'><time timestamp='2018-08-02T13:55:00Z'>13:55</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
MarcoFalke which PR/changeset do you have in mind for that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218100' id='623371'>
<a class='timestamp' href='#623371'><time timestamp='2018-08-02T13:55:00Z'>13:55</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Idk what is causing the issue on windows
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218100' id='623372'>
<a class='timestamp' href='#623372'><time timestamp='2018-08-02T13:55:00Z'>13:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ken2812221: changed milestone--thanks, I sort-of expected this, it was kind of a large and reasonably risky change to merge so last minute, better to do it as one of the first things for 0.18 probably
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218160' id='623373'>
<a class='timestamp' href='#623373'><time timestamp='2018-08-02T13:56:00Z'>13:56</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Ah right, we&#x27;re talking about #13754 here?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218160' id='623374'>
<a class='timestamp' href='#623374'><time timestamp='2018-08-02T13:56:00Z'>13:56</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13754" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13754</a> | Windows crashes for -wallet=你好 · Issue #13754 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218220' id='623375'>
<a class='timestamp' href='#623375'><time timestamp='2018-08-02T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
jup
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218220' id='623376'>
<a class='timestamp' href='#623376'><time timestamp='2018-08-02T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
It reports a fatal error and then hits an assertion
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218280' id='623377'>
<a class='timestamp' href='#623377'><time timestamp='2018-08-02T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
MarcoFalke: That happen on -datadir for a really long time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218280' id='623378'>
<a class='timestamp' href='#623378'><time timestamp='2018-08-02T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
oh
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218280' id='623379'>
<a class='timestamp' href='#623379'><time timestamp='2018-08-02T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Not a regression then
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218280' id='623380'>
<a class='timestamp' href='#623380'><time timestamp='2018-08-02T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Ok. I&#x27;m not entirely sure how we can solve that in not very intrusive, right before 0.17.0 kind of way.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218340' id='623381'>
<a class='timestamp' href='#623381'><time timestamp='2018-08-02T13:59:00Z'>13:59</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
13426 currently has changes to bdb and leveldb as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218400' id='623382'>
<a class='timestamp' href='#623382'><time timestamp='2018-08-02T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Afaik it used to throw a clear error and now it just crashes, but it&#x27;s only a problem if you use character incompatible with your system language.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218400' id='623383'>
<a class='timestamp' href='#623383'><time timestamp='2018-08-02T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
So not really a common issue to hit
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218400' id='623384'>
<a class='timestamp' href='#623384'><time timestamp='2018-08-02T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Still, would be nice to bisect that
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218400' id='623385'>
<a class='timestamp' href='#623385'><time timestamp='2018-08-02T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Will probably do that
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218460' id='623386'>
<a class='timestamp' href='#623386'><time timestamp='2018-08-02T14:01:00Z'>14:01</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Have fun, only takes 24 hours per build, right? :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533218520' id='623387'>
<a class='timestamp' href='#623387'><time timestamp='2018-08-02T14:02:00Z'>14:02</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
heh, I hope I can steal them from jonasschnelli nightly server
<br>
</div>

<div class='talk op-msg' data-timestamp='1533219000' id='623388'>
<a class='timestamp' href='#623388'><time timestamp='2018-08-02T14:10:00Z'>14:10</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
If someone wants to do some quick review, there is currently 13852 &amp; 13852 for 0.16, both fairly simple backports
<br>
</div>

<div class='talk op-msg' data-timestamp='1533219420' id='623389'>
<a class='timestamp' href='#623389'><time timestamp='2018-08-02T14:17:00Z'>14:17</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
fanquake duplicate number, what&#x27;s the second one? I&#x27;ll take a look.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533219480' id='623390'>
<a class='timestamp' href='#623390'><time timestamp='2018-08-02T14:18:00Z'>14:18</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
provoostenator Sorry, 13796
<br>
</div>

<div class='talk op-msg' data-timestamp='1533220020' id='623391'>
<a class='timestamp' href='#623391'><time timestamp='2018-08-02T14:27:00Z'>14:27</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Another trivial one in 13853, not entirely sure how the versions got out of sync.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533220020' id='623392'>
<a class='timestamp' href='#623392'><time timestamp='2018-08-02T14:27:00Z'>14:27</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
MarcoFalke: maybe it&#x27;s useful to have a &quot;needs windows build&quot; tag? That&#x27;s the only OS where you can&#x27;t avoid cross-compilation pain.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533220140' id='623393'>
<a class='timestamp' href='#623393'><time timestamp='2018-08-02T14:29:00Z'>14:29</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
fanquake: you&#x27;re sure you want to bump QT to 5.9.6 in backports?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533220140' id='623394'>
<a class='timestamp' href='#623394'><time timestamp='2018-08-02T14:29:00Z'>14:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
let&#x27;s not get too specific with labels
<br>
</div>

<div class='talk op-msg' data-timestamp='1533220140' id='623395'>
<a class='timestamp' href='#623395'><time timestamp='2018-08-02T14:29:00Z'>14:29</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
wumpus: it&#x27;s just that the only reason I sometimes ask for Gitian builds is that I want to test Windows binaries.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533220200' id='623396'>
<a class='timestamp' href='#623396'><time timestamp='2018-08-02T14:30:00Z'>14:30</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Maybe others have other reasons.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533220200' id='623397'>
<a class='timestamp' href='#623397'><time timestamp='2018-08-02T14:30:00Z'>14:30</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
provoostenator bump qt in backports? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533220200' id='623398'>
<a class='timestamp' href='#623398'><time timestamp='2018-08-02T14:30:00Z'>14:30</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/pull/13853/files#diff-0c8311709d11060c5156268e58f5f209R26" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13853/files#diff-0c8311709d11060c5156268e58f5f209R26</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533220200' id='623399'>
<a class='timestamp' href='#623399'><time timestamp='2018-08-02T14:30:00Z'>14:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
provoostenator: I understand, it&#x27;s just that I think labels are best for keeping track of rough categories, this seems oddly specific :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533220260' id='623400'>
<a class='timestamp' href='#623400'><time timestamp='2018-08-02T14:31:00Z'>14:31</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Oh wait, that one isn&#x27;t a backport, nvm.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533220320' id='623401'>
<a class='timestamp' href='#623401'><time timestamp='2018-08-02T14:32:00Z'>14:32</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Maybe a Github bot listening for comments &quot;Windows plz&quot; is better than tags?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533220980' id='623402'>
<a class='timestamp' href='#623402'><time timestamp='2018-08-02T14:43:00Z'>14:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I... think we should simply make sure enough CPU capacity is available for the build bot and build everything possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1533221760' id='623403'>
<a class='timestamp' href='#623403'><time timestamp='2018-08-02T14:56:00Z'>14:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if cloud/server costs are a problem I&#x27;m sure we can find some solution
<br>
</div>

<div class='talk op-msg' data-timestamp='1533221940' id='623404'>
<a class='timestamp' href='#623404'><time timestamp='2018-08-02T14:59:00Z'>14:59</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Can run all the tests, fuzzers, linters, benchmarks, gitian builds, test sync times..
<br>
</div>

<div class='talk op-msg' data-timestamp='1533222000' id='623405'>
<a class='timestamp' href='#623405'><time timestamp='2018-08-02T15:00:00Z'>15:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, including openbsd and freebsd <b>*ducks*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533222060' id='623406'>
<a class='timestamp' href='#623406'><time timestamp='2018-08-02T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
In my opinion, how about uploading travis build binaries to a server?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533222120' id='623407'>
<a class='timestamp' href='#623407'><time timestamp='2018-08-02T15:02:00Z'>15:02</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
It would cost less money than own build.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533222240' id='623408'>
<a class='timestamp' href='#623408'><time timestamp='2018-08-02T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the problem, last time we looked at that option, had to do with credentials; as well as well as with potential malware, especially if PRs automatically upload binaries
<br>
</div>

<div class='talk op-msg' data-timestamp='1533222240' id='623409'>
<a class='timestamp' href='#623409'><time timestamp='2018-08-02T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
this is manually triggered by maintainers, so less risky
<br>
</div>

<div class='talk op-msg' data-timestamp='1533222840' id='623410'>
<a class='timestamp' href='#623410'><time timestamp='2018-08-02T15:14:00Z'>15:14</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
We can print the binary hash at the end and upload them to a close server. If someone want to get the binary, they can ask maintainer to get it. The downside is that we should trust travis-ci.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533224040' id='623411'>
<a class='timestamp' href='#623411'><time timestamp='2018-08-02T15:34:00Z'>15:34</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
ken2812221: Could do that with <a href="https://transfer.sh/" class="link" target="_blank">https://transfer.sh/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533225780' id='623412'>
<a class='timestamp' href='#623412'><time timestamp='2018-08-02T16:03:00Z'>16:03</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
MarcoFalke: Thanks, I&#x27;ll try it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533228360' id='623413'>
<a class='timestamp' href='#623413'><time timestamp='2018-08-02T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
labeled the risc-v PRs 0.18, would be nice to have executables for that at that time
<br>
</div>

<div class='talk op-msg' data-timestamp='1533231000' id='623414'>
<a class='timestamp' href='#623414'><time timestamp='2018-08-02T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: sgtm
<br>
</div>

<div class='talk op-msg' data-timestamp='1533234540' id='623415'>
<a class='timestamp' href='#623415'><time timestamp='2018-08-02T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
would be nice to have POWER9 executables ASAP; that hardware is already usable ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236400' id='623416'>
<a class='timestamp' href='#623416'><time timestamp='2018-08-02T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236400' id='623417'>
<a class='timestamp' href='#623417'><time timestamp='2018-08-02T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: let&#x27;s add that for 0.18 too then.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236460' id='623418'>
<a class='timestamp' href='#623418'><time timestamp='2018-08-02T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#startmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236460' id='623419'>
<a class='timestamp' href='#623419'><time timestamp='2018-08-02T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Meeting started Thu Aug  2 19:01:07 2018 UTC.  The chair is wumpus. Information about MeetBot at <a href="http://wiki.debian.org/MeetBot" class="link" target="_blank">http://wiki.debian.org/MeetBot</a>.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236460' id='623420'>
<a class='timestamp' href='#623420'><time timestamp='2018-08-02T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Useful Commands: #action #agreed #help #info #idea #link #topic.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236460' id='623421'>
<a class='timestamp' href='#623421'><time timestamp='2018-08-02T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
hi!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236460' id='623422'>
<a class='timestamp' href='#623422'><time timestamp='2018-08-02T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236460' id='623423'>
<a class='timestamp' href='#623423'><time timestamp='2018-08-02T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236460' id='623424'>
<a class='timestamp' href='#623424'><time timestamp='2018-08-02T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236460' id='623425'>
<a class='timestamp' href='#623425'><time timestamp='2018-08-02T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236520' id='623426'>
<a class='timestamp' href='#623426'><time timestamp='2018-08-02T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#bitcoin-core-dev Meeting: wumpus sipa gmaxwell jonasschnelli morcos luke-jr btcdrak sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier jl2012 achow101 meshcollider jnewbery maaku fanquake promag provoostenator
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236520' id='623427'>
<a class='timestamp' href='#623427'><time timestamp='2018-08-02T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
hi.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236520' id='623428'>
<a class='timestamp' href='#623428'><time timestamp='2018-08-02T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236520' id='623429'>
<a class='timestamp' href='#623429'><time timestamp='2018-08-02T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236520' id='623430'>
<a class='timestamp' href='#623430'><time timestamp='2018-08-02T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ello
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236580' id='623431'>
<a class='timestamp' href='#623431'><time timestamp='2018-08-02T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Hi.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236580' id='623432'>
<a class='timestamp' href='#623432'><time timestamp='2018-08-02T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236640' id='623433'>
<a class='timestamp' href='#623433'><time timestamp='2018-08-02T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
crickets
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236640' id='623434'>
<a class='timestamp' href='#623434'><time timestamp='2018-08-02T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
crickets are... good I guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236640' id='623435'>
<a class='timestamp' href='#623435'><time timestamp='2018-08-02T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
0.17 PRs: <a href="https://github.com/bitcoin/bitcoin/pulls?q=is%3Aopen+is%3Apr+milestone%3A0.17.0" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pulls?q=is%3Aopen+is%3Apr+milestone%3A0.17.0</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236700' id='623436'>
<a class='timestamp' href='#623436'><time timestamp='2018-08-02T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
0.17 issues: <a href="https://github.com/bitcoin/bitcoin/issues?q=is%3Aopen+is%3Aissue+milestone%3A0.17.0" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues?q=is%3Aopen+is%3Aissue+milestone%3A0.17.0</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236700' id='623437'>
<a class='timestamp' href='#623437'><time timestamp='2018-08-02T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I guess we could discuss the CXXFLAGS stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236700' id='623438'>
<a class='timestamp' href='#623438'><time timestamp='2018-08-02T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
0.17 release schedule: #12624
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236700' id='623439'>
<a class='timestamp' href='#623439'><time timestamp='2018-08-02T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/12624" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/12624</a> | Release schedule for 0.17.0 · Issue #12624 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236760' id='623440'>
<a class='timestamp' href='#623440'><time timestamp='2018-08-02T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I don&#x27;t really have a good solution for it
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236760' id='623441'>
<a class='timestamp' href='#623441'><time timestamp='2018-08-02T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic CXXFLAGS stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236760' id='623442'>
<a class='timestamp' href='#623442'><time timestamp='2018-08-02T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Whats the issue?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236760' id='623443'>
<a class='timestamp' href='#623443'><time timestamp='2018-08-02T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: autotools forces user CXXFLAGS after our own; so when the user builds with -mno-avx2, the build simply fails
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236820' id='623444'>
<a class='timestamp' href='#623444'><time timestamp='2018-08-02T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
#13789
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236820' id='623445'>
<a class='timestamp' href='#623445'><time timestamp='2018-08-02T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13789" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13789</a> | crypto/sha256: Use pragmas to enforce necessary intrinsics for GCC and Clang by luke-jr · Pull Request #13789 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236820' id='623446'>
<a class='timestamp' href='#623446'><time timestamp='2018-08-02T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
eh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236820' id='623447'>
<a class='timestamp' href='#623447'><time timestamp='2018-08-02T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
it doesn&#x27;t force it, we do that ourselves
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236820' id='623448'>
<a class='timestamp' href='#623448'><time timestamp='2018-08-02T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
can someone please drop the registed users +q for now? sdaftuar is muted.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236820' id='623449'>
<a class='timestamp' href='#623449'><time timestamp='2018-08-02T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ie, autotools calls the compiler with our -mavx2 <b>*followed by*</b> -mno-avx2
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236820' id='623450'>
<a class='timestamp' href='#623450'><time timestamp='2018-08-02T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well apparaently there&#x27;s a problem where the build system passes the wrong flags, and luke-jr&#x27;s PR works around it with pragmas
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236820' id='623451'>
<a class='timestamp' href='#623451'><time timestamp='2018-08-02T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
or at least voice sdaftuar 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236820' id='623452'>
<a class='timestamp' href='#623452'><time timestamp='2018-08-02T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that seems wrong to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236820' id='623453'>
<a class='timestamp' href='#623453'><time timestamp='2018-08-02T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
the intention is for any user-passed flags to be able to override the ones we add. If that&#x27;s not the case, it&#x27;s a bug.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236820' id='623454'>
<a class='timestamp' href='#623454'><time timestamp='2018-08-02T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
cfields: that&#x27;s the problem in this case
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236880' id='623455'>
<a class='timestamp' href='#623455'><time timestamp='2018-08-02T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
we can&#x27;t let the user override -mavx2 here
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236880' id='623456'>
<a class='timestamp' href='#623456'><time timestamp='2018-08-02T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236880' id='623457'>
<a class='timestamp' href='#623457'><time timestamp='2018-08-02T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
luke-jr: you mean we shouldn&#x27;t, or we currently don&#x27;t?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236880' id='623458'>
<a class='timestamp' href='#623458'><time timestamp='2018-08-02T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
cfields: autotools makes it impossible to override user CXXFLAGS, but for these files we must or we fail to compile
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236880' id='623459'>
<a class='timestamp' href='#623459'><time timestamp='2018-08-02T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: why would the user ever pass -mno-avx2 in the first place?  We shouldn&#x27;t be using -mavx except on special files that need it to compile.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236880' id='623460'>
<a class='timestamp' href='#623460'><time timestamp='2018-08-02T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
oh, I see what you mean
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236880' id='623461'>
<a class='timestamp' href='#623461'><time timestamp='2018-08-02T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: to avoid AVX2 instructions
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236940' id='623462'>
<a class='timestamp' href='#623462'><time timestamp='2018-08-02T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
luke-jr: eh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236940' id='623463'>
<a class='timestamp' href='#623463'><time timestamp='2018-08-02T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: it&#x27;s those special files that fail to compile
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236940' id='623464'>
<a class='timestamp' href='#623464'><time timestamp='2018-08-02T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hi!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236940' id='623465'>
<a class='timestamp' href='#623465'><time timestamp='2018-08-02T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
luke-jr: fail how? do we just need to check for more intrinsics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236940' id='623466'>
<a class='timestamp' href='#623466'><time timestamp='2018-08-02T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
(I guess it was crickets and the muffled voice of sdaftuar  in the dinstance)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236940' id='623467'>
<a class='timestamp' href='#623467'><time timestamp='2018-08-02T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: If the user wants to avoid executing avx2 instructions they need do nothing. They don&#x27;t have to pass any special options.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533236940' id='623468'>
<a class='timestamp' href='#623468'><time timestamp='2018-08-02T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: he is saying that if he builds with CXXFLAGS=-mno-avx2 the compile fails.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237000' id='623469'>
<a class='timestamp' href='#623469'><time timestamp='2018-08-02T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: AVX2 is enabled by default with some -march options
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237000' id='623470'>
<a class='timestamp' href='#623470'><time timestamp='2018-08-02T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: I assume the issue is some failures to compile because of a busted compiler, so there&#x27;s a desire to be able to avoid them entirely.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237000' id='623471'>
<a class='timestamp' href='#623471'><time timestamp='2018-08-02T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13758" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13758</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237000' id='623472'>
<a class='timestamp' href='#623472'><time timestamp='2018-08-02T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: why would anyone -march=&lt;thing with avx2&gt; then -mno-avx2?  that just seems busted.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237000' id='623473'>
<a class='timestamp' href='#623473'><time timestamp='2018-08-02T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ooooooh
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237060' id='623474'>
<a class='timestamp' href='#623474'><time timestamp='2018-08-02T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it looks like a really contrives scenario to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237060' id='623475'>
<a class='timestamp' href='#623475'><time timestamp='2018-08-02T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: I&#x27;m not sure why laurentb is doing it, but there&#x27;s no reason they shouldn&#x27;t be able to
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237060' id='623476'>
<a class='timestamp' href='#623476'><time timestamp='2018-08-02T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case, why not detect the -mno-avx2 and then don&#x27;t even compile the file?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237060' id='623477'>
<a class='timestamp' href='#623477'><time timestamp='2018-08-02T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
not worth it polluting the code with all kinds of compiler specific pragmas at least
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237060' id='623478'>
<a class='timestamp' href='#623478'><time timestamp='2018-08-02T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ok, there are plenty of ways to solve that. I think we can just discuss on the github issue?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237060' id='623479'>
<a class='timestamp' href='#623479'><time timestamp='2018-08-02T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: autotools says we&#x27;re supposed to allow changing CXXFLAGS after configure
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237060' id='623480'>
<a class='timestamp' href='#623480'><time timestamp='2018-08-02T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
agree with cfields , there&#x27;s no hurry with this
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237060' id='623481'>
<a class='timestamp' href='#623481'><time timestamp='2018-08-02T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
make CXXFLAGS=…
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237060' id='623482'>
<a class='timestamp' href='#623482'><time timestamp='2018-08-02T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
okay
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237120' id='623483'>
<a class='timestamp' href='#623483'><time timestamp='2018-08-02T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case -march=&lt;hardware that has avx2&gt; -mno-avx2 sounds like a misguided thing that we shouldn&#x27;t take a lot of complexity to support, unless someone knows otherwise.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237120' id='623484'>
<a class='timestamp' href='#623484'><time timestamp='2018-08-02T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: we turn off all flags except the ones we&#x27;re testing when doing the autoconf checks so that they don&#x27;t cause unrelated errors.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237120' id='623485'>
<a class='timestamp' href='#623485'><time timestamp='2018-08-02T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Esp because there is -mtune 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237120' id='623486'>
<a class='timestamp' href='#623486'><time timestamp='2018-08-02T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
cfields: no we don&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237120' id='623487'>
<a class='timestamp' href='#623487'><time timestamp='2018-08-02T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Unassigned the issues from the 0.17 milestone for now
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237120' id='623488'>
<a class='timestamp' href='#623488'><time timestamp='2018-08-02T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
luke-jr: ones that we add, we do
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237180' id='623489'>
<a class='timestamp' href='#623489'><time timestamp='2018-08-02T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
MarcoFalke: it&#x27;s a must-fix for 0.17
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237180' id='623490'>
<a class='timestamp' href='#623490'><time timestamp='2018-08-02T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no, it&#x27;s not a must-fix for 0.17
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237180' id='623491'>
<a class='timestamp' href='#623491'><time timestamp='2018-08-02T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t see how this is a must fix.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237180' id='623492'>
<a class='timestamp' href='#623492'><time timestamp='2018-08-02T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
agree fully with MarcoFalke 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237180' id='623493'>
<a class='timestamp' href='#623493'><time timestamp='2018-08-02T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
broken build system..
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237180' id='623494'>
<a class='timestamp' href='#623494'><time timestamp='2018-08-02T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
any other topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237180' id='623495'>
<a class='timestamp' href='#623495'><time timestamp='2018-08-02T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
&quot;User sets weird options which seem to make no sense as we know, and then something that arguably should work but fails&quot; is not really blocker material.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237180' id='623496'>
<a class='timestamp' href='#623496'><time timestamp='2018-08-02T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237240' id='623497'>
<a class='timestamp' href='#623497'><time timestamp='2018-08-02T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Windows
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237240' id='623498'>
<a class='timestamp' href='#623498'><time timestamp='2018-08-02T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
(topic)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237240' id='623499'>
<a class='timestamp' href='#623499'><time timestamp='2018-08-02T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I left the pulls for review in the 0.17 milestone, so if reviewers like them, they can still be merged
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237240' id='623500'>
<a class='timestamp' href='#623500'><time timestamp='2018-08-02T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
provoostenator: what about Windows? :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237240' id='623501'>
<a class='timestamp' href='#623501'><time timestamp='2018-08-02T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
As in: do we want to fix the Windows unicode stuff, given that there&#x27;s still two weeks?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237240' id='623502'>
<a class='timestamp' href='#623502'><time timestamp='2018-08-02T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right, it&#x27;s annoying for the specific user, but if you have really specific needs like that you can patch around it
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237240' id='623503'>
<a class='timestamp' href='#623503'><time timestamp='2018-08-02T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Let&#x27;s do the unicode stuff for 0.18
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237240' id='623504'>
<a class='timestamp' href='#623504'><time timestamp='2018-08-02T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic Windows (provoostenator)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237240' id='623505'>
<a class='timestamp' href='#623505'><time timestamp='2018-08-02T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
I think the opinion in the ticket was no.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237240' id='623506'>
<a class='timestamp' href='#623506'><time timestamp='2018-08-02T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
It would require a leveldb bump and major changes
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237240' id='623507'>
<a class='timestamp' href='#623507'><time timestamp='2018-08-02T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: we should find out what the user is doing, might just be some greater confusion... like they want to benchmark each way or something.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237300' id='623508'>
<a class='timestamp' href='#623508'><time timestamp='2018-08-02T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Not sure if we can review and test that in such a short time frame
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237300' id='623509'>
<a class='timestamp' href='#623509'><time timestamp='2018-08-02T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Ok, and we&#x27;re not getting tons of reports about this either?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237300' id='623510'>
<a class='timestamp' href='#623510'><time timestamp='2018-08-02T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Is the unicode stuff just about filenames (wallet)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237300' id='623511'>
<a class='timestamp' href='#623511'><time timestamp='2018-08-02T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: right!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237300' id='623512'>
<a class='timestamp' href='#623512'><time timestamp='2018-08-02T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I am looking into restoring the proper warning for -wallet=non-ascii, but that should be all for 0.17
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237300' id='623513'>
<a class='timestamp' href='#623513'><time timestamp='2018-08-02T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
jonasschnelli: Also datadir
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237300' id='623514'>
<a class='timestamp' href='#623514'><time timestamp='2018-08-02T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
only half here, but feel free to ping me
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237300' id='623515'>
<a class='timestamp' href='#623515'><time timestamp='2018-08-02T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
I think it&#x27;s mostly filename yes, but also labels.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237360' id='623516'>
<a class='timestamp' href='#623516'><time timestamp='2018-08-02T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yeah. We should fix that. But this seems to be open since forever and I don&#x27;t see a pressing need for 0.17
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237360' id='623517'>
<a class='timestamp' href='#623517'><time timestamp='2018-08-02T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
But afaik I know it works if your system locale is set &quot;correctly&quot;.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237360' id='623518'>
<a class='timestamp' href='#623518'><time timestamp='2018-08-02T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
jonasschnelli: Indeed, anything that is not a regression should go into 0.18
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237420' id='623519'>
<a class='timestamp' href='#623519'><time timestamp='2018-08-02T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
provoostenator: due to the nature of the bug, I think many of the people who would be reporting it may not speak english. So the significance may be a little under-represented.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237420' id='623520'>
<a class='timestamp' href='#623520'><time timestamp='2018-08-02T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
s/bug/issue/
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237420' id='623521'>
<a class='timestamp' href='#623521'><time timestamp='2018-08-02T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I was trying to say what cfields just said.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237420' id='623522'>
<a class='timestamp' href='#623522'><time timestamp='2018-08-02T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Good point
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237420' id='623523'>
<a class='timestamp' href='#623523'><time timestamp='2018-08-02T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. Good point.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237420' id='623524'>
<a class='timestamp' href='#623524'><time timestamp='2018-08-02T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
provoostenator: wait, labels are broken?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237420' id='623525'>
<a class='timestamp' href='#623525'><time timestamp='2018-08-02T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We shouldn&#x27;t take few reports to mean few issues... but it the change is invasive and not ready, and the issue isn&#x27;t new...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237420' id='623526'>
<a class='timestamp' href='#623526'><time timestamp='2018-08-02T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: agreed. -1 from me as well. Just wanted to throw that out there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237420' id='623527'>
<a class='timestamp' href='#623527'><time timestamp='2018-08-02T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
luke-jr: not sure, try with an english system locale and then adding Chinese labels, I can&#x27;t remember if that works.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237480' id='623528'>
<a class='timestamp' href='#623528'><time timestamp='2018-08-02T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
provoostenator: last I checked, we had functional tests for non-English labels :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237480' id='623529'>
<a class='timestamp' href='#623529'><time timestamp='2018-08-02T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
But with a Chinese system locale it does work afaik, hence it doesn&#x27;t seem super urgent.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237480' id='623530'>
<a class='timestamp' href='#623530'><time timestamp='2018-08-02T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I think it&#x27;s a serious issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237480' id='623531'>
<a class='timestamp' href='#623531'><time timestamp='2018-08-02T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
We can backport to 0.17.1, if it qualifies as bug fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237480' id='623532'>
<a class='timestamp' href='#623532'><time timestamp='2018-08-02T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Functional tests that run on linux.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237480' id='623533'>
<a class='timestamp' href='#623533'><time timestamp='2018-08-02T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but it&#x27;s risky to do this last minute
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237480' id='623534'>
<a class='timestamp' href='#623534'><time timestamp='2018-08-02T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and it&#x27;s not a regression
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237480' id='623535'>
<a class='timestamp' href='#623535'><time timestamp='2018-08-02T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
MarcoFalke: +1
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237540' id='623536'>
<a class='timestamp' href='#623536'><time timestamp='2018-08-02T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
MarcoFalke: agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237540' id='623537'>
<a class='timestamp' href='#623537'><time timestamp='2018-08-02T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Maybe just merge it into master after the 0.17 split so it gets testing quickly. Then we could always backport it if there&#x27;s strong demand?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237540' id='623538'>
<a class='timestamp' href='#623538'><time timestamp='2018-08-02T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it&#x27;s a bug, maybe one not worth backporting depending on how tidy the fix is. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237540' id='623539'>
<a class='timestamp' href='#623539'><time timestamp='2018-08-02T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s unfortunate that this requires such invasive changes for windows
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237540' id='623540'>
<a class='timestamp' href='#623540'><time timestamp='2018-08-02T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
specific changes not required for other OSes
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237540' id='623541'>
<a class='timestamp' href='#623541'><time timestamp='2018-08-02T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
This is really hard to fix.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237600' id='623542'>
<a class='timestamp' href='#623542'><time timestamp='2018-08-02T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
which means most of use cannot test it usefully
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237600' id='623543'>
<a class='timestamp' href='#623543'><time timestamp='2018-08-02T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
can it be reproduced in WINE?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237600' id='623544'>
<a class='timestamp' href='#623544'><time timestamp='2018-08-02T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
luke-jr: I haven&#x27;t tried, I just use a virtual box with Windows 10 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237600' id='623545'>
<a class='timestamp' href='#623545'><time timestamp='2018-08-02T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I don&#x27;t think we should fall back to WINE for testing that issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237660' id='623546'>
<a class='timestamp' href='#623546'><time timestamp='2018-08-02T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Someone recently offered to run and maintain Windows integration builds
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237660' id='623547'>
<a class='timestamp' href='#623547'><time timestamp='2018-08-02T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
It doesn&#x27;t sound like WINE would have the same issue tbh
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237660' id='623548'>
<a class='timestamp' href='#623548'><time timestamp='2018-08-02T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Health professions recommend against trying to use wine to solve your problems.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237660' id='623549'>
<a class='timestamp' href='#623549'><time timestamp='2018-08-02T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
careful we don&#x27;t spiral to homebrew...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237660' id='623550'>
<a class='timestamp' href='#623550'><time timestamp='2018-08-02T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
This really needs to be tested on native Windows (Not against testing it in wine additionally, though)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237720' id='623551'>
<a class='timestamp' href='#623551'><time timestamp='2018-08-02T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237720' id='623552'>
<a class='timestamp' href='#623552'><time timestamp='2018-08-02T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
#12613
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237720' id='623553'>
<a class='timestamp' href='#623553'><time timestamp='2018-08-02T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/12613" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/12613</a> | [CI] Adding MSVC build to CI check with Appveyor · Issue #12613 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237720' id='623554'>
<a class='timestamp' href='#623554'><time timestamp='2018-08-02T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
If there is a way to run functionfal test on Window
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237720' id='623555'>
<a class='timestamp' href='#623555'><time timestamp='2018-08-02T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
MSVC is a orthogonal issue, I think, to solving this in the gitian builds
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237720' id='623556'>
<a class='timestamp' href='#623556'><time timestamp='2018-08-02T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I occasionally run them  on appveyro
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237780' id='623557'>
<a class='timestamp' href='#623557'><time timestamp='2018-08-02T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
MarcoFalke: it&#x27;d be nice to have Travis test it in the meantime
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237780' id='623558'>
<a class='timestamp' href='#623558'><time timestamp='2018-08-02T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well not orthogonal but I wouldn&#x27;t be surprised if there are differences mingw versus MSVC in unicoode handling
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237780' id='623559'>
<a class='timestamp' href='#623559'><time timestamp='2018-08-02T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Sure, if you can get this to work on travis, why not
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237840' id='623560'>
<a class='timestamp' href='#623560'><time timestamp='2018-08-02T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
ken2812221: I think I also got them to run on my windows vm once
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237840' id='623561'>
<a class='timestamp' href='#623561'><time timestamp='2018-08-02T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: this is one of the cases where you&#x27;d recommend stronger liquior instead.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237840' id='623562'>
<a class='timestamp' href='#623562'><time timestamp='2018-08-02T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
MSVC adds a unicode version of fstream, but mingw does not have that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237840' id='623563'>
<a class='timestamp' href='#623563'><time timestamp='2018-08-02T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
MarcoFalke: &quot;once&quot; sounds promising ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237900' id='623564'>
<a class='timestamp' href='#623564'><time timestamp='2018-08-02T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I could try once more and then write down the steps I did, heh
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237900' id='623565'>
<a class='timestamp' href='#623565'><time timestamp='2018-08-02T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ken2812221: huh, we could potentially add it and upstream to mingw, then.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237960' id='623566'>
<a class='timestamp' href='#623566'><time timestamp='2018-08-02T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
why does utf-8 need a special fstream
<br>
</div>

<div class='talk op-msg' data-timestamp='1533237960' id='623567'>
<a class='timestamp' href='#623567'><time timestamp='2018-08-02T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;m confused
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238020' id='623568'>
<a class='timestamp' href='#623568'><time timestamp='2018-08-02T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
why does this have to be so messed up
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238020' id='623569'>
<a class='timestamp' href='#623569'><time timestamp='2018-08-02T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
wumpus: just filename
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238020' id='623570'>
<a class='timestamp' href='#623570'><time timestamp='2018-08-02T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
It&#x27;s fine to read the stream
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238020' id='623571'>
<a class='timestamp' href='#623571'><time timestamp='2018-08-02T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
can&#x27;t we just drop windows support
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238020' id='623572'>
<a class='timestamp' href='#623572'><time timestamp='2018-08-02T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-3'> * wumpus</span>&gt;
ducks
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238020' id='623573'>
<a class='timestamp' href='#623573'><time timestamp='2018-08-02T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238080' id='623574'>
<a class='timestamp' href='#623574'><time timestamp='2018-08-02T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Maybe run it inside at little Linux VM? Can&#x27;t be worse than Electron :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238080' id='623575'>
<a class='timestamp' href='#623575'><time timestamp='2018-08-02T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yesss
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238080' id='623576'>
<a class='timestamp' href='#623576'><time timestamp='2018-08-02T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
windows 10 already includes ubuntu right
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238080' id='623577'>
<a class='timestamp' href='#623577'><time timestamp='2018-08-02T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
it&#x27;s messed up because windows can still run old windows crap and they have to support old api forever, including all the crappy api they built when the company was on the rocks before they discovered scm
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238080' id='623578'>
<a class='timestamp' href='#623578'><time timestamp='2018-08-02T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
let&#x27;s dump the win32 garbage and use that...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238080' id='623579'>
<a class='timestamp' href='#623579'><time timestamp='2018-08-02T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
lol. really with the proposed builder stuff, would building a whole linux system really be worse? :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238080' id='623580'>
<a class='timestamp' href='#623580'><time timestamp='2018-08-02T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: Doesn&#x27;t a brand new win10 update add a bunch of compat stuff that would avoid these issues? I don&#x27;t think it&#x27;d be crazy to consider dropping support for anything less than that reasonably soon.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238140' id='623581'>
<a class='timestamp' href='#623581'><time timestamp='2018-08-02T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: it does! that&#x27;s true
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238140' id='623582'>
<a class='timestamp' href='#623582'><time timestamp='2018-08-02T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Not by default, but you can install it. I once did the inception thing: Gitian builder VM inside Ubuntu inside Windows inside Virtual Box on Mac. It crashed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238140' id='623583'>
<a class='timestamp' href='#623583'><time timestamp='2018-08-02T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: I dont know the details, but my understanding is that a lot of people don&#x27;t want to run windows 10 due to integrated adware or something?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238140' id='623584'>
<a class='timestamp' href='#623584'><time timestamp='2018-08-02T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
gmaxwell: the latest update, at least for me, even forced me to allow analytics data
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238200' id='623585'>
<a class='timestamp' href='#623585'><time timestamp='2018-08-02T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
whoa
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238200' id='623586'>
<a class='timestamp' href='#623586'><time timestamp='2018-08-02T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Yeah it&#x27;s much more invasive
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238200' id='623587'>
<a class='timestamp' href='#623587'><time timestamp='2018-08-02T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
They&#x27;re definately going for the get hacked by random people on the internet or get spied on by us sales pitch.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238200' id='623588'>
<a class='timestamp' href='#623588'><time timestamp='2018-08-02T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: I suppose those people would be used to running outdated versions of things, then :\
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238200' id='623589'>
<a class='timestamp' href='#623589'><time timestamp='2018-08-02T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
(or both)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238260' id='623590'>
<a class='timestamp' href='#623590'><time timestamp='2018-08-02T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ugh
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238260' id='623591'>
<a class='timestamp' href='#623591'><time timestamp='2018-08-02T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
then again, this is not a regression
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238260' id='623592'>
<a class='timestamp' href='#623592'><time timestamp='2018-08-02T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
what works on windows, works.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238260' id='623593'>
<a class='timestamp' href='#623593'><time timestamp='2018-08-02T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
thats a possibility too, and better than dropping support for windows...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238320' id='623594'>
<a class='timestamp' href='#623594'><time timestamp='2018-08-02T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the question is whether we should change 10000 lines just to accomodate unicode in it
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238320' id='623595'>
<a class='timestamp' href='#623595'><time timestamp='2018-08-02T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It seems really surprising that we&#x27;d need to change more than some wrapper functions.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238320' id='623596'>
<a class='timestamp' href='#623596'><time timestamp='2018-08-02T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
^
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238320' id='623597'>
<a class='timestamp' href='#623597'><time timestamp='2018-08-02T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes it seems a design error in the first place if this cannot be wrapped somehow
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238380' id='623598'>
<a class='timestamp' href='#623598'><time timestamp='2018-08-02T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
agreed. And that&#x27;s a reasonable thing to fix, imo. IIRC it also means we have trouble adding filesystem sandboxing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238380' id='623599'>
<a class='timestamp' href='#623599'><time timestamp='2018-08-02T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I do think ken2812221&#x27;s PR is fairly ok in that regard
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238440' id='623600'>
<a class='timestamp' href='#623600'><time timestamp='2018-08-02T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes the reason I did the fs:: stuff is to allow for filesystem sandboxing
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238500' id='623601'>
<a class='timestamp' href='#623601'><time timestamp='2018-08-02T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: more is required though, right? I assume something along the lines of ken2812221&#x27;s PR would help?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238560' id='623602'>
<a class='timestamp' href='#623602'><time timestamp='2018-08-02T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: I had it down to only changes in fs.h and adding a fs.cpp, afaik
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238620' id='623603'>
<a class='timestamp' href='#623603'><time timestamp='2018-08-02T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ah, ok. nm then.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238620' id='623604'>
<a class='timestamp' href='#623604'><time timestamp='2018-08-02T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but maybe more is needed now that the code evolved further...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238680' id='623605'>
<a class='timestamp' href='#623605'><time timestamp='2018-08-02T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I hope we can find a set of changes that a reasonable independant of windows, so that the windows fix is just a couple files changed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238680' id='623606'>
<a class='timestamp' href='#623606'><time timestamp='2018-08-02T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I think my main drawback in ken2812221 &#x27;s PR is that it changes .string to stringu8 or something, which seems unnecessary, all strings should be utf-8
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238680' id='623607'>
<a class='timestamp' href='#623607'><time timestamp='2018-08-02T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if you make sure the wrapper does that you don&#x27;t need to change it everywhere in the code
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238740' id='623608'>
<a class='timestamp' href='#623608'><time timestamp='2018-08-02T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
wunpus: That&#x27;s how boost&#x27;s path work. It need to pass a utf8 converter.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238800' id='623609'>
<a class='timestamp' href='#623609'><time timestamp='2018-08-02T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ken2812221: yes...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238800' id='623610'>
<a class='timestamp' href='#623610'><time timestamp='2018-08-02T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but our own wrapper could do that automatically
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238800' id='623611'>
<a class='timestamp' href='#623611'><time timestamp='2018-08-02T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> ken2812221</span>&gt;
Actually I have thought that before, but it need to patch boost.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238800' id='623612'>
<a class='timestamp' href='#623612'><time timestamp='2018-08-02T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
didn&#x27;t we want to get rid of boost anyway?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238800' id='623613'>
<a class='timestamp' href='#623613'><time timestamp='2018-08-02T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
or wrap boost
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238800' id='623614'>
<a class='timestamp' href='#623614'><time timestamp='2018-08-02T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
maybe this is a good opportunity
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238800' id='623615'>
<a class='timestamp' href='#623615'><time timestamp='2018-08-02T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
we&#x27;ll do so, in time
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238860' id='623616'>
<a class='timestamp' href='#623616'><time timestamp='2018-08-02T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238860' id='623617'>
<a class='timestamp' href='#623617'><time timestamp='2018-08-02T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
any other topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238860' id='623618'>
<a class='timestamp' href='#623618'><time timestamp='2018-08-02T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Topic suggestion: Leveldb FD usage on x86_64
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238920' id='623619'>
<a class='timestamp' href='#623619'><time timestamp='2018-08-02T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic leveldb FD usage on x86_64 (gmaxwell)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238980' id='623620'>
<a class='timestamp' href='#623620'><time timestamp='2018-08-02T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
There was a recent report from a user hitting the select limit on his x86_64 linux host. Inspection with lsof shows that leveldb is using a lot of FDs on nodes where we expected it to be mostly using mmap.  Apparently leveldb has a number of mmaps limit, as far as I know there isn&#x27;t any reason we shouldn&#x27;t increase it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533238980' id='623621'>
<a class='timestamp' href='#623621'><time timestamp='2018-08-02T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(seperately we should move to using poll ... but increasing the mmap limit should be a ~1 line change, unless someone knows a reason to not do so)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239040' id='623622'>
<a class='timestamp' href='#623622'><time timestamp='2018-08-02T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I think this limit was increased recently
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239040' id='623623'>
<a class='timestamp' href='#623623'><time timestamp='2018-08-02T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
specifically for 64-bit OSes, as it was deemed to be no problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239040' id='623624'>
<a class='timestamp' href='#623624'><time timestamp='2018-08-02T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
of course, I&#x27;m not surprised it turns out to be it is... :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239100' id='623625'>
<a class='timestamp' href='#623625'><time timestamp='2018-08-02T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the reason to increase it was something with performance
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239160' id='623626'>
<a class='timestamp' href='#623626'><time timestamp='2018-08-02T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#12495 maybe?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239160' id='623627'>
<a class='timestamp' href='#623627'><time timestamp='2018-08-02T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/12495" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/12495</a> | Increase LevelDB max_open_files by eklitzke · Pull Request #12495 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239160' id='623628'>
<a class='timestamp' href='#623628'><time timestamp='2018-08-02T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
&quot;utACK ccedbaf - with the comment that I think relying on undocumented behavior of leveldb is risky. &quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239160' id='623629'>
<a class='timestamp' href='#623629'><time timestamp='2018-08-02T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yeah, of course this is going to bite us in the ass
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239220' id='623630'>
<a class='timestamp' href='#623630'><time timestamp='2018-08-02T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so revert?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239220' id='623631'>
<a class='timestamp' href='#623631'><time timestamp='2018-08-02T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
upstream has updated a bunch of stuff lately (namely moving to c++11 by default and dropping the need for lots of platform-dependent code). Has this been addressed as well, by any chance?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239280' id='623632'>
<a class='timestamp' href='#623632'><time timestamp='2018-08-02T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: hm so reading this it sounds to me that there is a seperate limit of 1000 mmaps. And running into that limit is what is causing more FDs to be used than we expected.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239280' id='623633'>
<a class='timestamp' href='#623633'><time timestamp='2018-08-02T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: so it might be possible to not revert that patch, but instead increase the maximum mmaps.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239280' id='623634'>
<a class='timestamp' href='#623634'><time timestamp='2018-08-02T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(that bump is going to be painful, btw)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239340' id='623635'>
<a class='timestamp' href='#623635'><time timestamp='2018-08-02T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: I like switching to anything else than select() though!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239340' id='623636'>
<a class='timestamp' href='#623636'><time timestamp='2018-08-02T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
we&#x27;ve been stuck with select with no good reason
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239340' id='623637'>
<a class='timestamp' href='#623637'><time timestamp='2018-08-02T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: yes, I think we should do that too!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239340' id='623638'>
<a class='timestamp' href='#623638'><time timestamp='2018-08-02T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: that would explain why i saw exactly 999 mmaps
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239340' id='623639'>
<a class='timestamp' href='#623639'><time timestamp='2018-08-02T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
my reason used to be, well, we&#x27;re going to switch to using libevent for P2P any time now!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239340' id='623640'>
<a class='timestamp' href='#623640'><time timestamp='2018-08-02T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: and phantomcircuit: both previously had private patches to change to poll. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239340' id='623641'>
<a class='timestamp' href='#623641'><time timestamp='2018-08-02T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but that&#x27;s been years
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239400' id='623642'>
<a class='timestamp' href='#623642'><time timestamp='2018-08-02T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
let&#x27;s just do it
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239400' id='623643'>
<a class='timestamp' href='#623643'><time timestamp='2018-08-02T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: any time now!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239400' id='623644'>
<a class='timestamp' href='#623644'><time timestamp='2018-08-02T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
change to poll() for unix-ish OSes
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239400' id='623645'>
<a class='timestamp' href='#623645'><time timestamp='2018-08-02T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: my comments above about the map limit are based on ossifrage (reporter&#x27;s) work, and some of the comments in that PR above. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239400' id='623646'>
<a class='timestamp' href='#623646'><time timestamp='2018-08-02T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: sorry :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239460' id='623647'>
<a class='timestamp' href='#623647'><time timestamp='2018-08-02T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
In any case, I think there are two issues:  (1) switch to poll (duh but can we do it for 0.17) and (2) leveldb should probably be allowed more maps unless we know some reason to not do that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239460' id='623648'>
<a class='timestamp' href='#623648'><time timestamp='2018-08-02T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: nooOO sorry I didn&#x27;t mean it as an attack on you, I could have done it, many other people could have done it, but we didn&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239460' id='623649'>
<a class='timestamp' href='#623649'><time timestamp='2018-08-02T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and maybe (3) potentially revert that PR; but given my understanding, I don&#x27;t think we need to.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239460' id='623650'>
<a class='timestamp' href='#623650'><time timestamp='2018-08-02T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Leveldb being map limited is probably going to end up bad for performance even if we no longer had the FD issues.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239460' id='623651'>
<a class='timestamp' href='#623651'><time timestamp='2018-08-02T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
man mmap doesn&#x27;t talk about a specific mmap limit
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239520' id='623652'>
<a class='timestamp' href='#623652'><time timestamp='2018-08-02T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there is no mmap limit afaik
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239520' id='623653'>
<a class='timestamp' href='#623653'><time timestamp='2018-08-02T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
^
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239520' id='623654'>
<a class='timestamp' href='#623654'><time timestamp='2018-08-02T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Thats where my concern about increasing leveldb&#x27;s mmap usage comes from-- I dont understand why the limit is there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239520' id='623655'>
<a class='timestamp' href='#623655'><time timestamp='2018-08-02T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
there&#x27;s definitely something that limits it. Some unrelated sysctl ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239520' id='623656'>
<a class='timestamp' href='#623656'><time timestamp='2018-08-02T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
I know i&#x27;ve seen it documented somewhere.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239520' id='623657'>
<a class='timestamp' href='#623657'><time timestamp='2018-08-02T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Unless they&#x27;re trying to reduce TLB thrashing or something.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239640' id='623658'>
<a class='timestamp' href='#623658'><time timestamp='2018-08-02T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: for 0.18 we should definitely update leveldb though
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239640' id='623659'>
<a class='timestamp' href='#623659'><time timestamp='2018-08-02T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
I bumped my mmap file limit up to 4k, currently 1180 ldb files are mapped and it isn&#x27;t using any fds for ldb files
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239640' id='623660'>
<a class='timestamp' href='#623660'><time timestamp='2018-08-02T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/pull/12495#issuecomment-367815005" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/12495#issuecomment-367815005</a> &lt; eklitzke suggests increasing leveldb&#x27;s mmap limit here. ossifrage also apparently did that and reported it fixed his problems, though his specific problems are likely better fixed by switching to poll.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239700' id='623661'>
<a class='timestamp' href='#623661'><time timestamp='2018-08-02T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
for 0.17 I&#x27;d propose to keep it like this, not do anything wild...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239700' id='623662'>
<a class='timestamp' href='#623662'><time timestamp='2018-08-02T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-9'>@sdaftuar</span>&gt;
cfields: if i read correctly, the internet says sysctl vm.max_map_count 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239700' id='623663'>
<a class='timestamp' href='#623663'><time timestamp='2018-08-02T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I thought it was probably too late to switch 0.17 to poll, but increasing the leveldb map count seems like an easy mitigation that probably improves performance.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239760' id='623664'>
<a class='timestamp' href='#623664'><time timestamp='2018-08-02T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
[gmaxwell@bean ~]$ sysctl vm.max_map_count 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239760' id='623665'>
<a class='timestamp' href='#623665'><time timestamp='2018-08-02T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
vm.max_map_count = 65530
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239760' id='623666'>
<a class='timestamp' href='#623666'><time timestamp='2018-08-02T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
is there a per-process one?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239760' id='623667'>
<a class='timestamp' href='#623667'><time timestamp='2018-08-02T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
vm.max_map_count = 65530 (same on my box, but that number seems a bit low to be a global count)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239760' id='623668'>
<a class='timestamp' href='#623668'><time timestamp='2018-08-02T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: I&#x27;d be really nervous about that. There are so many specific quirks related to select/poll/epoll/kqueue
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239820' id='623669'>
<a class='timestamp' href='#623669'><time timestamp='2018-08-02T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
It is per process
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239820' id='623670'>
<a class='timestamp' href='#623670'><time timestamp='2018-08-02T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(not against the change at all, only hesitant for the 0.17 cycle)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239820' id='623671'>
<a class='timestamp' href='#623671'><time timestamp='2018-08-02T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
vm.max_map_count = 65530
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239820' id='623672'>
<a class='timestamp' href='#623672'><time timestamp='2018-08-02T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
vm.max_map_count = 65530
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239820' id='623673'>
<a class='timestamp' href='#623673'><time timestamp='2018-08-02T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
checked on 3 linux boxes, same output
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239820' id='623674'>
<a class='timestamp' href='#623674'><time timestamp='2018-08-02T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
likewise.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239820' id='623675'>
<a class='timestamp' href='#623675'><time timestamp='2018-08-02T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I... strongly doubt this is an issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239880' id='623676'>
<a class='timestamp' href='#623676'><time timestamp='2018-08-02T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So it might be prudent for 0.17 to bump the leveldb max to 4k or something.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239880' id='623677'>
<a class='timestamp' href='#623677'><time timestamp='2018-08-02T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if you manage to map 65000+ files, well, I&quot;m not surprised you run into trouble
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239880' id='623678'>
<a class='timestamp' href='#623678'><time timestamp='2018-08-02T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I still just wish I better understood why they had that 1000 default.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239940' id='623679'>
<a class='timestamp' href='#623679'><time timestamp='2018-08-02T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
what happens if the limit is hit?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533239940' id='623680'>
<a class='timestamp' href='#623680'><time timestamp='2018-08-02T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, mine only worked on linux and was actually just broken on windows
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240000' id='623681'>
<a class='timestamp' href='#623681'><time timestamp='2018-08-02T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
<b>*dong*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240000' id='623682'>
<a class='timestamp' href='#623682'><time timestamp='2018-08-02T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#endmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240000' id='623683'>
<a class='timestamp' href='#623683'><time timestamp='2018-08-02T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Meeting ended Thu Aug  2 20:00:19 2018 UTC.  Information about MeetBot at <a href="http://wiki.debian.org/MeetBot" class="link" target="_blank">http://wiki.debian.org/MeetBot</a> . (v 0.1.4)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240000' id='623684'>
<a class='timestamp' href='#623684'><time timestamp='2018-08-02T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Minutes:        <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2018/bitcoin-core-dev.2018-08-02-19.01.html" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2018/bitcoin-core-dev.2018-08-02-19.01.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240000' id='623685'>
<a class='timestamp' href='#623685'><time timestamp='2018-08-02T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Minutes (text): <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2018/bitcoin-core-dev.2018-08-02-19.01.txt" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2018/bitcoin-core-dev.2018-08-02-19.01.txt</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240000' id='623686'>
<a class='timestamp' href='#623686'><time timestamp='2018-08-02T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Log:            <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2018/bitcoin-core-dev.2018-08-02-19.01.log.html" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2018/bitcoin-core-dev.2018-08-02-19.01.log.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240000' id='623687'>
<a class='timestamp' href='#623687'><time timestamp='2018-08-02T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
luke-jr, it falls back to using fds, does it age old read-only ldb files out or does it just grow until it hits the limit?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240060' id='623688'>
<a class='timestamp' href='#623688'><time timestamp='2018-08-02T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
gah, that was a meeting?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240060' id='623689'>
<a class='timestamp' href='#623689'><time timestamp='2018-08-02T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240120' id='623690'>
<a class='timestamp' href='#623690'><time timestamp='2018-08-02T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the best kind of meetings don&#x27;t feel like meetings at all
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240120' id='623691'>
<a class='timestamp' href='#623691'><time timestamp='2018-08-02T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-9'>@sdaftuar</span>&gt;
gmaxwell: i just saw this <a href="https://github.com/google/leveldb/issues/128" class="link" target="_blank">https://github.com/google/leveldb/issues/128</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240120' id='623692'>
<a class='timestamp' href='#623692'><time timestamp='2018-08-02T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
gah I&#x27;m so stupid.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240120' id='623693'>
<a class='timestamp' href='#623693'><time timestamp='2018-08-02T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-9'>@sdaftuar</span>&gt;
the comment there makes it sound like the 1000 mmap limit is some kind of memory limiter, but i don&#x27;t know if i&#x27;m understanding correctly
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240180' id='623694'>
<a class='timestamp' href='#623694'><time timestamp='2018-08-02T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yep, seems like it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240180' id='623695'>
<a class='timestamp' href='#623695'><time timestamp='2018-08-02T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ossifrage: I don&#x27;t see that in the code. It looks like it just fails completely
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240240' id='623696'>
<a class='timestamp' href='#623696'><time timestamp='2018-08-02T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
          s = IOError(fname, errno);
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240240' id='623697'>
<a class='timestamp' href='#623697'><time timestamp='2018-08-02T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
luke-jr, I was running into the 1000 map limit and then it started using a ton of FDs
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240240' id='623698'>
<a class='timestamp' href='#623698'><time timestamp='2018-08-02T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ossifrage: I mean hitting the OS limit
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240240' id='623699'>
<a class='timestamp' href='#623699'><time timestamp='2018-08-02T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ie, set your OS limit to 900
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240300' id='623700'>
<a class='timestamp' href='#623700'><time timestamp='2018-08-02T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I wonder if in the issue sdaftuar links the person is hitting the OS limit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240300' id='623701'>
<a class='timestamp' href='#623701'><time timestamp='2018-08-02T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
(ah, I thought you where talking about the limiter limit, duh)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240300' id='623702'>
<a class='timestamp' href='#623702'><time timestamp='2018-08-02T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So leveldb added a maximum and set it to some random value.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240360' id='623703'>
<a class='timestamp' href='#623703'><time timestamp='2018-08-02T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: thanks for finding that, though I wish it were enlightening.  The user reports having enough memory. Google replies &#x27;we fixed your running out of memory with an arbritary limit&#x27;...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240480' id='623704'>
<a class='timestamp' href='#623704'><time timestamp='2018-08-02T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
seems like they should have at least made it so mmap failure falls back to using fds :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240480' id='623705'>
<a class='timestamp' href='#623705'><time timestamp='2018-08-02T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, that does seem to be explicitly saying it&#x27;s to limit the mmap memory usage to 2000MB
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240480' id='623706'>
<a class='timestamp' href='#623706'><time timestamp='2018-08-02T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
so was this a 32-bit problem only? I thought mmaps were only used on 64-bit?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240540' id='623707'>
<a class='timestamp' href='#623707'><time timestamp='2018-08-02T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So I think maybe the limit was put in for 32 bit hosts... and then it was replied to someone who was really reporting another problem.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240540' id='623708'>
<a class='timestamp' href='#623708'><time timestamp='2018-08-02T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: we don&#x27;t use mmaps on 32-bit hosts, but leveldb can...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240600' id='623709'>
<a class='timestamp' href='#623709'><time timestamp='2018-08-02T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(not our leveldb)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240600' id='623710'>
<a class='timestamp' href='#623710'><time timestamp='2018-08-02T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
on 64 bit the limit is much higher
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240600' id='623711'>
<a class='timestamp' href='#623711'><time timestamp='2018-08-02T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
gah, that was unclear lemme try. We don&#x27;t use mmap on 32bit with leveldb, but that is a result of our configuration, since we already manage to use all the address space ourselves.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240660' id='623712'>
<a class='timestamp' href='#623712'><time timestamp='2018-08-02T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: the leveldb mmap limit is also 1000 on 64-bit hosts.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240660' id='623713'>
<a class='timestamp' href='#623713'><time timestamp='2018-08-02T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
mmap_limit = sizeof(void*) &gt;= 8 ? 1000 : 0
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240660' id='623714'>
<a class='timestamp' href='#623714'><time timestamp='2018-08-02T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
so sounds like we should just set the mmap limit to infinite on 64-bit, and modify the mmap fail code to fallback?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240720' id='623715'>
<a class='timestamp' href='#623715'><time timestamp='2018-08-02T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
so it&#x27;d disable mmap for x32 (not x86) as well, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240720' id='623716'>
<a class='timestamp' href='#623716'><time timestamp='2018-08-02T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(er, x86 too. but also x32 :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240720' id='623717'>
<a class='timestamp' href='#623717'><time timestamp='2018-08-02T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: well not infinte, but something reasonably under 65530.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240780' id='623718'>
<a class='timestamp' href='#623718'><time timestamp='2018-08-02T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I guess we don&#x27;t want to exhaust it for other apps
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240840' id='623719'>
<a class='timestamp' href='#623719'><time timestamp='2018-08-02T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
60k / number of bitcoinds launched by functional tests? :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240840' id='623720'>
<a class='timestamp' href='#623720'><time timestamp='2018-08-02T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
setting it to just 4096 would put it well above our current usage. ... and by the time we hit that, we&#x27;ll hopefully be using poll and it&#x27;ll just be a performance consideration.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240840' id='623721'>
<a class='timestamp' href='#623721'><time timestamp='2018-08-02T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
ossifrage reports he&#x27;s saying about 1180 maps.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240900' id='623722'>
<a class='timestamp' href='#623722'><time timestamp='2018-08-02T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
gmaxwell, after 1.5 days of uptime
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240900' id='623723'>
<a class='timestamp' href='#623723'><time timestamp='2018-08-02T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
I started to see the socket problem after 20-30 days of uptime
<br>
</div>

<div class='talk op-msg' data-timestamp='1533240960' id='623724'>
<a class='timestamp' href='#623724'><time timestamp='2018-08-02T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well how many ldb files are there in total?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533241020' id='623725'>
<a class='timestamp' href='#623725'><time timestamp='2018-08-02T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
from my last lsof, 992 from chainstate, 146 from txindex (currently). I have 1763 txindex ldb files and 1354 chainstate ldb files
<br>
</div>

<div class='talk op-msg' data-timestamp='1533241080' id='623726'>
<a class='timestamp' href='#623726'><time timestamp='2018-08-02T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
k, so 4096 would allow you to have all your ldb files mapped.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533241080' id='623727'>
<a class='timestamp' href='#623727'><time timestamp='2018-08-02T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
leveldb&#x27;s mmap limit doesn&#x27;t correspond to any os-level mmap limit
<br>
</div>

<div class='talk op-msg' data-timestamp='1533241140' id='623728'>
<a class='timestamp' href='#623728'><time timestamp='2018-08-02T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
Yeah, is that limit per database or process wide?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533241140' id='623729'>
<a class='timestamp' href='#623729'><time timestamp='2018-08-02T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
(the leveldb limiter limit)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533241200' id='623730'>
<a class='timestamp' href='#623730'><time timestamp='2018-08-02T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
per database
<br>
</div>

<div class='talk op-msg' data-timestamp='1533241200' id='623731'>
<a class='timestamp' href='#623731'><time timestamp='2018-08-02T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: yea, I think the history is that leveldb gained it due to 32bit. 2mb * 1000 = 2GB sounds a lot like someone trying to avoid VM exhaustion on 32bit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533241260' id='623732'>
<a class='timestamp' href='#623732'><time timestamp='2018-08-02T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and they were only thinking about one database and ... yadda yadda.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533243600' id='623733'>
<a class='timestamp' href='#623733'><time timestamp='2018-08-02T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, that&#x27;s so... wtf
<br>
</div>

</div>
</section>

</body>
</html>
