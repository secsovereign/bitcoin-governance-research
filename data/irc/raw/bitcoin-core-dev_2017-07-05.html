<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-07-05
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-07-05' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:24 UTC</pre>
<pre><a href="/bitcoin-core-dev/2017-06-05">&lt;</a><span class='header'>    July 2017     </span><a href="/bitcoin-core-dev/2017-08-05">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                   <a class="" href="/bitcoin-core-dev/2017-07-01">1</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-07-02">2</a>  <a class="" href="/bitcoin-core-dev/2017-07-03">3</a>  <a class="" href="/bitcoin-core-dev/2017-07-04">4</a>  <a class="current" href="/bitcoin-core-dev/2017-07-05">5</a>  <a class="" href="/bitcoin-core-dev/2017-07-06">6</a>  <a class="" href="/bitcoin-core-dev/2017-07-07">7</a>  <a class="" href="/bitcoin-core-dev/2017-07-08">8</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-07-09">9</a> <a class="" href="/bitcoin-core-dev/2017-07-10">10</a> <a class="" href="/bitcoin-core-dev/2017-07-11">11</a> <a class="" href="/bitcoin-core-dev/2017-07-12">12</a> <a class="" href="/bitcoin-core-dev/2017-07-13">13</a> <a class="" href="/bitcoin-core-dev/2017-07-14">14</a> <a class="" href="/bitcoin-core-dev/2017-07-15">15</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-07-16">16</a> <a class="" href="/bitcoin-core-dev/2017-07-17">17</a> <a class="" href="/bitcoin-core-dev/2017-07-18">18</a> <a class="" href="/bitcoin-core-dev/2017-07-19">19</a> <a class="" href="/bitcoin-core-dev/2017-07-20">20</a> <a class="" href="/bitcoin-core-dev/2017-07-21">21</a> <a class="" href="/bitcoin-core-dev/2017-07-22">22</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-07-23">23</a> <a class="" href="/bitcoin-core-dev/2017-07-24">24</a> <a class="" href="/bitcoin-core-dev/2017-07-25">25</a> <a class="" href="/bitcoin-core-dev/2017-07-26">26</a> <a class="" href="/bitcoin-core-dev/2017-07-27">27</a> <a class="" href="/bitcoin-core-dev/2017-07-28">28</a> <a class="" href="/bitcoin-core-dev/2017-07-29">29</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-07-30">30</a> <a class="" href="/bitcoin-core-dev/2017-07-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1499221980' id='554099'>
<a class='timestamp' href='#554099'><time timestamp='2017-07-05T02:33:00Z'>02:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] luke-jr opened pull request #10745: Be consistent in using &quot;opt_into_rbf&quot; parameter for Opt-In RBF (master...opt_in_rbf-param) <a href="https://github.com/bitcoin/bitcoin/pull/10745" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10745</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1499253780' id='554100'>
<a class='timestamp' href='#554100'><time timestamp='2017-07-05T11:23:00Z'>11:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #10747: [rpc] fix verbose argument for getblock in bitcoin-cli (master...fix_getblock_verbose_argument) <a href="https://github.com/bitcoin/bitcoin/pull/10747" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10747</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1499261220' id='554101'>
<a class='timestamp' href='#554101'><time timestamp='2017-07-05T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #10748: [config] Help text cleanup (master...helptextcleanup) <a href="https://github.com/bitcoin/bitcoin/pull/10748" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10748</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1499266320' id='554102'>
<a class='timestamp' href='#554102'><time timestamp='2017-07-05T14:52:00Z'>14:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #10749: Use compile-time constants instead of unnamed enumerations (remove &quot;enum hack&quot;) (master...enum-hack) <a href="https://github.com/bitcoin/bitcoin/pull/10749" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10749</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1499268660' id='554103'>
<a class='timestamp' href='#554103'><time timestamp='2017-07-05T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] instagibbs closed pull request #10333: [wallet] fee fixes: always create change, adjust value, and p… (master...fixfeefinal) <a href="https://github.com/bitcoin/bitcoin/pull/10333" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10333</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1499276280' id='554104'>
<a class='timestamp' href='#554104'><time timestamp='2017-07-05T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-10'> earlz</span>&gt;
Is there a know minimum gcc version for compiling Bitcoin Core? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499277060' id='554105'>
<a class='timestamp' href='#554105'><time timestamp='2017-07-05T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
4.8     
<br>
</div>

<div class='talk op-msg' data-timestamp='1499280180' id='554106'>
<a class='timestamp' href='#554106'><time timestamp='2017-07-05T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] instagibbs opened pull request #10750: [wallet] Change bumpfee totalFee option to feeRate option (master...bumpfeerate) <a href="https://github.com/bitcoin/bitcoin/pull/10750" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10750</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1499281860' id='554107'>
<a class='timestamp' href='#554107'><time timestamp='2017-07-05T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: Just wanted to jot down some of the thoughts on future improvements to bumpfee
<br>
</div>

<div class='talk op-msg' data-timestamp='1499281860' id='554108'>
<a class='timestamp' href='#554108'><time timestamp='2017-07-05T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
So right now bumpfee doesn&#x27;t let you bump a tx which has any of its outputs spent by other mempool txs (i.e. has any descendants)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499281920' id='554109'>
<a class='timestamp' href='#554109'><time timestamp='2017-07-05T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I think there are several reasons for this
<br>
</div>

<div class='talk op-msg' data-timestamp='1499281920' id='554110'>
<a class='timestamp' href='#554110'><time timestamp='2017-07-05T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
One you might unintentionally pay way more in fee than you were expecting b/c you&#x27;re paying for a lot of descendants
<br>
</div>

<div class='talk op-msg' data-timestamp='1499281920' id='554111'>
<a class='timestamp' href='#554111'><time timestamp='2017-07-05T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
yes, rhavar brought this up on the mailing list recently
<br>
</div>

<div class='talk op-msg' data-timestamp='1499281980' id='554112'>
<a class='timestamp' href='#554112'><time timestamp='2017-07-05T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
someone does a mega-sweep on top, even low fee, and you can pay lots
<br>
</div>

<div class='talk op-msg' data-timestamp='1499281980' id='554113'>
<a class='timestamp' href='#554113'><time timestamp='2017-07-05T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Two is the tricky issue of you aren&#x27;t sure which transaction is actually going to get confirmed, the original or the replacement
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282040' id='554114'>
<a class='timestamp' href='#554114'><time timestamp='2017-07-05T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
So if your replacement isn&#x27;t doing something pretty smart, you may now end up in a confused state as to whether your descendant payees should be repaid and making sure they are repaid using conflicting in puts so you don&#x27;t end up double paying them
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282100' id='554115'>
<a class='timestamp' href='#554115'><time timestamp='2017-07-05T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
We should probably write up a plan for the next step in improving bumpfee functionality
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282100' id='554116'>
<a class='timestamp' href='#554116'><time timestamp='2017-07-05T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I think the ability to bump a chain of txs where all the descendant txs are also yours ought to be feasible as a next step
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282220' id='554117'>
<a class='timestamp' href='#554117'><time timestamp='2017-07-05T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Bumping a tx which someone else has spent seems riskier..  Perhaps if there are no new inputs added in the original chain and you have enough original change, then you could pay all their payees for them?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282220' id='554118'>
<a class='timestamp' href='#554118'><time timestamp='2017-07-05T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Are you saying the local logic cares that downstream someone double-counted payments?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282280' id='554119'>
<a class='timestamp' href='#554119'><time timestamp='2017-07-05T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Not exactly.. But I&#x27;m saying we don&#x27;t want to design our wallet software such that in an ecosystem of people using it, they end up actually double paying other people b/c they aren&#x27;t properly conflicting inputs on double spends
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282340' id='554120'>
<a class='timestamp' href='#554120'><time timestamp='2017-07-05T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I think this also touches on why it&#x27;s tricky to add new inputs on just the simple case of bumping your own tx
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282340' id='554121'>
<a class='timestamp' href='#554121'><time timestamp='2017-07-05T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos, instagibbs: i wonder if an alternative to deal with rhavar&#x27;s problem is to keep a counter in every tx &quot;bytes_replaced&quot;, which accumulates any time a replacement happens through acceptance of a tx (both for rbf or eviction reasons)... and then you&#x27;re required to pay that number times the relay margibal feerate
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282340' id='554122'>
<a class='timestamp' href='#554122'><time timestamp='2017-07-05T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I&#x27;m not grokking tbh, I might need specific examples of what&#x27;s wrong here
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282340' id='554123'>
<a class='timestamp' href='#554123'><time timestamp='2017-07-05T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the requirement of strictly larger fee on replacement is not actually necessary to make the economics work out
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282400' id='554124'>
<a class='timestamp' href='#554124'><time timestamp='2017-07-05T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: hmmmm....  i&#x27;m not sure that&#x27;s completely correct
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282460' id='554125'>
<a class='timestamp' href='#554125'><time timestamp='2017-07-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the requirement is that 1) mining the new tx is economically better for miners and 2) the new tx pays for the relay of all previous txn it caused to be evicted
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282460' id='554126'>
<a class='timestamp' href='#554126'><time timestamp='2017-07-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it seems to me there is a relationship between the min relay rate and the min rate which is accepted in a block, which is dictated by the size of the mempool and the decay of the mempool min fee
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282460' id='554127'>
<a class='timestamp' href='#554127'><time timestamp='2017-07-05T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it is a slightly broken relationship to be sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282520' id='554128'>
<a class='timestamp' href='#554128'><time timestamp='2017-07-05T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but i dont&#x27; think we have enough confidence that the min relay fee alone is sufficient to prevent spam that we should sort of allow &quot;downgrading&quot; the fees paid as long as your are still over the cumulative bytes times min relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282520' id='554129'>
<a class='timestamp' href='#554129'><time timestamp='2017-07-05T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
morcos, can you give me an example of problematic behavior which doesnt just boil down to &quot;don&#x27;t do unconfirmed chaining on top of bip125 transaction&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282520' id='554130'>
<a class='timestamp' href='#554130'><time timestamp='2017-07-05T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
 s/behavior/example
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282580' id='554131'>
<a class='timestamp' href='#554131'><time timestamp='2017-07-05T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: certainly it&#x27;s also not clear that would be in the best interest of miners
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282640' id='554132'>
<a class='timestamp' href='#554132'><time timestamp='2017-07-05T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: let me think for a min
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282700' id='554133'>
<a class='timestamp' href='#554133'><time timestamp='2017-07-05T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: i what way wouldn&#x27;t it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282880' id='554134'>
<a class='timestamp' href='#554134'><time timestamp='2017-07-05T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: hmm..  i suppose only if blocks aren&#x27;t full  (hopeful smiley face)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282940' id='554135'>
<a class='timestamp' href='#554135'><time timestamp='2017-07-05T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but no, not even exactly that
<br>
</div>

<div class='talk op-msg' data-timestamp='1499282940' id='554136'>
<a class='timestamp' href='#554136'><time timestamp='2017-07-05T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if the feerates in question are all above average, then miners have lost right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283000' id='554137'>
<a class='timestamp' href='#554137'><time timestamp='2017-07-05T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
you could replace 10200 bytes of something paying 100 sat/B with 200 bytes of something paying 201 sat/B in your example right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283060' id='554138'>
<a class='timestamp' href='#554138'><time timestamp='2017-07-05T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if the feerate at the bottom of a block ever drops below 100 sat/B then miners lost out didn&#x27;t they?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283120' id='554139'>
<a class='timestamp' href='#554139'><time timestamp='2017-07-05T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: ok back to your questions.  i think i said two things, the second was that your previous idea of adding inputs to bumpfee might have issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283180' id='554140'>
<a class='timestamp' href='#554140'><time timestamp='2017-07-05T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think i agree that it should not have issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283180' id='554141'>
<a class='timestamp' href='#554141'><time timestamp='2017-07-05T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
it&#x27;se self-invalidating
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283180' id='554142'>
<a class='timestamp' href='#554142'><time timestamp='2017-07-05T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
although i think we&#x27;ll need to carefully examine the code for handling conflicts and make sure we&#x27;re not making any edge cases worse
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283180' id='554143'>
<a class='timestamp' href='#554143'><time timestamp='2017-07-05T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but i agree we should be able to make it work
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283180' id='554144'>
<a class='timestamp' href='#554144'><time timestamp='2017-07-05T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
i think for descendants in mempool, the two easiest cases to think about: 1) all yours 2) none of yours
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283240' id='554145'>
<a class='timestamp' href='#554145'><time timestamp='2017-07-05T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yes, so i think we can handle 1.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283240' id='554146'>
<a class='timestamp' href='#554146'><time timestamp='2017-07-05T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: right, ok, i&#x27;m assuming a more rational market than currently exists, i guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283240' id='554147'>
<a class='timestamp' href='#554147'><time timestamp='2017-07-05T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think we can handle any cases that aren&#x27;t 1 (including mix of yours and not yours) as long as no inputs that aren&#x27;t yours are added
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283300' id='554148'>
<a class='timestamp' href='#554148'><time timestamp='2017-07-05T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
volatile != irrational does it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283360' id='554149'>
<a class='timestamp' href='#554149'><time timestamp='2017-07-05T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: but i agree we should separate those into two separate cases...  and handling all yours first seems easier
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283420' id='554150'>
<a class='timestamp' href='#554150'><time timestamp='2017-07-05T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: i&#x27;m assuming near infinite demand at various fee rate levels
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283420' id='554151'>
<a class='timestamp' href='#554151'><time timestamp='2017-07-05T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
reality is much more complicated, i agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283420' id='554152'>
<a class='timestamp' href='#554152'><time timestamp='2017-07-05T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
There&#x27;s minor privacy implications of doing that automatically, you clearly identify which descendants are yours
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283420' id='554153'>
<a class='timestamp' href='#554153'><time timestamp='2017-07-05T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: see this <a href="https://github.com/bitcoin/bitcoin/pull/8456#issuecomment-264734557" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8456#issuecomment-264734557</a> for background
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283480' id='554154'>
<a class='timestamp' href='#554154'><time timestamp='2017-07-05T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
rhavar: you mean of only having the ability to do it when all are yours?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283480' id='554155'>
<a class='timestamp' href='#554155'><time timestamp='2017-07-05T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283540' id='554156'>
<a class='timestamp' href='#554156'><time timestamp='2017-07-05T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
(although I&#x27;m just jumping in this conversation a bit late, as I got some pings on slack i was being mentioned). But you&#x27;re talking about automatically resigning and resending invalidated descendants? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283540' id='554157'>
<a class='timestamp' href='#554157'><time timestamp='2017-07-05T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah, i mean we could do both steps, but you will still be able to differentiate b/c if any of the descendant txs added inputs, those will be identified as being your descendant txs
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283540' id='554158'>
<a class='timestamp' href='#554158'><time timestamp='2017-07-05T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
rhavar, no just simple bump case
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283600' id='554159'>
<a class='timestamp' href='#554159'><time timestamp='2017-07-05T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
oh, never mind then
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283600' id='554160'>
<a class='timestamp' href='#554160'><time timestamp='2017-07-05T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
rhavar: well just replacing the whole chain with a single tx that pays all the necessary payees and conflicts all the txs which pull in new in-chain inputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283600' id='554161'>
<a class='timestamp' href='#554161'><time timestamp='2017-07-05T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
That&#x27;s not often a sane thing to do, as the fee rates will differ
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283660' id='554162'>
<a class='timestamp' href='#554162'><time timestamp='2017-07-05T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: i suppose if you look at it the way i just stated it, then it doesn&#x27;t matter to break it in two cases... you just wont be able to do it if any of the non-you descendnats add inputs (assuming no mixed txs)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283720' id='554163'>
<a class='timestamp' href='#554163'><time timestamp='2017-07-05T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
and now we have to start looking at stuff in a per wallet world
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283720' id='554164'>
<a class='timestamp' href='#554164'><time timestamp='2017-07-05T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
from you has to mean from this wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283780' id='554165'>
<a class='timestamp' href='#554165'><time timestamp='2017-07-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
which raises an interesting point...  if you have wallets which overlap with other wallets, then you can run into problems conflicting only part of a tx
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283780' id='554166'>
<a class='timestamp' href='#554166'><time timestamp='2017-07-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
did people envision overlapping wallets?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283780' id='554167'>
<a class='timestamp' href='#554167'><time timestamp='2017-07-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lol, morcos writes out &quot;smiley face&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283780' id='554168'>
<a class='timestamp' href='#554168'><time timestamp='2017-07-05T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
can you rephrase &quot;just wont be able to do it if any of the non-you descendnats add inputs (assuming no mixed txs)&quot; (so sorry, lots of terminology)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283840' id='554169'>
<a class='timestamp' href='#554169'><time timestamp='2017-07-05T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: mixed tx = tx which spends some of your inputs and some of someone elses  (can&#x27;t remember exactly what we call those)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283840' id='554170'>
<a class='timestamp' href='#554170'><time timestamp='2017-07-05T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ok that cannot be replaced because we don&#x27;t know fees?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283900' id='554171'>
<a class='timestamp' href='#554171'><time timestamp='2017-07-05T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: that&#x27;s not what i meant, but maybe i&#x27;m looking at it backwards
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283900' id='554172'>
<a class='timestamp' href='#554172'><time timestamp='2017-07-05T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah i was looking at it backwards
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283960' id='554173'>
<a class='timestamp' href='#554173'><time timestamp='2017-07-05T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
what i was trying to avoid is making it so you accidentally have two pays to the same payee get confirmed that spend different inputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283960' id='554174'>
<a class='timestamp' href='#554174'><time timestamp='2017-07-05T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
that&#x27;s a check feebumper does, fwiw :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1499283960' id='554175'>
<a class='timestamp' href='#554175'><time timestamp='2017-07-05T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
we do that in our own wallet by making sure we conflict at least one of the inputs between the two txs
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284020' id='554176'>
<a class='timestamp' href='#554176'><time timestamp='2017-07-05T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so now i&#x27;m back to your original division and thinking we should distinguish between a chain of only our txs and a chain which includes someone elses child spends
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284020' id='554177'>
<a class='timestamp' href='#554177'><time timestamp='2017-07-05T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it&#x27;s just going to be a bit unexpected if they see their child spend evicted and they won&#x27;t know their payee has been paid (if thats what we do by bumping the package)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284080' id='554178'>
<a class='timestamp' href='#554178'><time timestamp='2017-07-05T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
Is it really even worth while to support chains? :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284080' id='554179'>
<a class='timestamp' href='#554179'><time timestamp='2017-07-05T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so lets just forget about that (at least for now) and only bump chains of ourself
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284080' id='554180'>
<a class='timestamp' href='#554180'><time timestamp='2017-07-05T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
support bumping them or support them?  unfortunately supporting them is a long lost cause, but i do think that is still valuable
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284140' id='554181'>
<a class='timestamp' href='#554181'><time timestamp='2017-07-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
supporting bumpng them makes a lot of sense b/c you can save money by consolidating
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284140' id='554182'>
<a class='timestamp' href='#554182'><time timestamp='2017-07-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
support bumping them. There&#x27;s a lot of edge cases, like the descendant having a lower fee rate
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284140' id='554183'>
<a class='timestamp' href='#554183'><time timestamp='2017-07-05T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
which you might not want to consolidate
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284200' id='554184'>
<a class='timestamp' href='#554184'><time timestamp='2017-07-05T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
still votes for &quot;you cant bump if there are not-yours descendants, without a force flag, which is mostly-unsupported&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284200' id='554185'>
<a class='timestamp' href='#554185'><time timestamp='2017-07-05T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and if there are &quot;your&quot; descendants, we should probably only support bumping at the bottom of the chain
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284200' id='554186'>
<a class='timestamp' href='#554186'><time timestamp='2017-07-05T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
should also probably support explicit cpfp, which handles some other cases, too
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284260' id='554187'>
<a class='timestamp' href='#554187'><time timestamp='2017-07-05T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: the advantage of not bumping at the bottom is you can consolidate
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284260' id='554188'>
<a class='timestamp' href='#554188'><time timestamp='2017-07-05T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
you can always choose to bump at the bottom
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284260' id='554189'>
<a class='timestamp' href='#554189'><time timestamp='2017-07-05T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
well ok, but that seems like a rather separate thing, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284260' id='554190'>
<a class='timestamp' href='#554190'><time timestamp='2017-07-05T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
auto-merging transactions sounds like very surprising behavior for &quot;bumpfee&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284320' id='554191'>
<a class='timestamp' href='#554191'><time timestamp='2017-07-05T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but yeah having a smart algo that determines whether CPFP or bump or CPFP by bumping the bottom is the best choice would be nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284320' id='554192'>
<a class='timestamp' href='#554192'><time timestamp='2017-07-05T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i wonder if we should just have a set of outputs that require being paid, and just have RPCs that change that set, where every change just results in a new RBF doing the whole thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284320' id='554193'>
<a class='timestamp' href='#554193'><time timestamp='2017-07-05T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and stop seeing unconfirmed transactions as transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284320' id='554194'>
<a class='timestamp' href='#554194'><time timestamp='2017-07-05T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
that sounds like reasonable behavior...for users who only need limited privacy
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284320' id='554195'>
<a class='timestamp' href='#554195'><time timestamp='2017-07-05T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but it sounds like a separate set of RPCs?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284380' id='554196'>
<a class='timestamp' href='#554196'><time timestamp='2017-07-05T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think that at the Bitcoin Core level it&#x27;s always going to be a highly advanced application, and its better not to abstract away too much about how it actually works
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284380' id='554197'>
<a class='timestamp' href='#554197'><time timestamp='2017-07-05T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Let higher level software build on top of it that type of functionality
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284380' id='554198'>
<a class='timestamp' href='#554198'><time timestamp='2017-07-05T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: yeah, it&#x27;d need to be separate... and not compatible with any receiver that wants a txid ahead of time etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284380' id='554199'>
<a class='timestamp' href='#554199'><time timestamp='2017-07-05T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what do you mean with limited privacy?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284380' id='554200'>
<a class='timestamp' href='#554200'><time timestamp='2017-07-05T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Of course if the wallet software was separate, we could just have both
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284440' id='554201'>
<a class='timestamp' href='#554201'><time timestamp='2017-07-05T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: right, perhaps this is more something for a new wallet rather than an add-on to the existing one
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284440' id='554202'>
<a class='timestamp' href='#554202'><time timestamp='2017-07-05T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: well my biggest concern with auto-merging in bumpfee is that you have people who manually selected inputs or created raw txn and all of a sudden those txn change structure massively
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284440' id='554203'>
<a class='timestamp' href='#554203'><time timestamp='2017-07-05T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it just seems so much easier to reason about
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284440' id='554204'>
<a class='timestamp' href='#554204'><time timestamp='2017-07-05T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
potentially merging outputs that they wanted to keep &quot;separate&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284440' id='554205'>
<a class='timestamp' href='#554205'><time timestamp='2017-07-05T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well this wouldn&#x27;t support self-selecting inputs...
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284500' id='554206'>
<a class='timestamp' href='#554206'><time timestamp='2017-07-05T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
it doesnt, but Core does
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284500' id='554207'>
<a class='timestamp' href='#554207'><time timestamp='2017-07-05T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
If merging was desired, wouldn&#x27;t it be better to have done that in the first place when sending the 2nd transaction?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284500' id='554208'>
<a class='timestamp' href='#554208'><time timestamp='2017-07-05T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
in the future maybe want to push people to multiwallet, but thats far away
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284500' id='554209'>
<a class='timestamp' href='#554209'><time timestamp='2017-07-05T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah, my suggestion isn&#x27;t really on topic in this discussion
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284560' id='554210'>
<a class='timestamp' href='#554210'><time timestamp='2017-07-05T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: I think bumpfee could take a list of txs to merge, and then could by default merge descendants of those txs, but take an option to not include descendants.  In all cases, all txs must be from you.  That ought to be pretty intuitive and cover all possibilites.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284560' id='554211'>
<a class='timestamp' href='#554211'><time timestamp='2017-07-05T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but all the reasoning about CPFP and bumping and chains of transactions makes my head hurt
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284560' id='554212'>
<a class='timestamp' href='#554212'><time timestamp='2017-07-05T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and i think there is a possible way of how things could have worked if not for legacy, that is much easier
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284560' id='554213'>
<a class='timestamp' href='#554213'><time timestamp='2017-07-05T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: maybe we should rename it &quot;dothings&quot; if it grows to do all kinds of magic :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284560' id='554214'>
<a class='timestamp' href='#554214'><time timestamp='2017-07-05T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if blocks were bigger and came every 10 secs instead of every 10 mins, we wouldn&#x27;t really have these problems
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284620' id='554215'>
<a class='timestamp' href='#554215'><time timestamp='2017-07-05T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lol     
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284620' id='554216'>
<a class='timestamp' href='#554216'><time timestamp='2017-07-05T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
I&#x27;m actually a huge fan of bumpfee taking a <b>*list*</b> of transactions to fee bump   (and consolidate them)   .. but i think all the descendant stuff is way too insanely annoying
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284620' id='554217'>
<a class='timestamp' href='#554217'><time timestamp='2017-07-05T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
bitcoin also wouldnt function, but thats a separate issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284620' id='554218'>
<a class='timestamp' href='#554218'><time timestamp='2017-07-05T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
getting back to my original thing: absolute fee argument is brittle if we want to do anything dynamic with our replacements
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284620' id='554219'>
<a class='timestamp' href='#554219'><time timestamp='2017-07-05T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: dynamic?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284620' id='554220'>
<a class='timestamp' href='#554220'><time timestamp='2017-07-05T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
maybe it can just get the fee wanted, but perhaps grab too many inputs in order to pay
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284620' id='554221'>
<a class='timestamp' href='#554221'><time timestamp='2017-07-05T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
adding inputs for example
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284620' id='554222'>
<a class='timestamp' href='#554222'><time timestamp='2017-07-05T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
because if you&#x27;re a high volume sender, you probably don&#x27;t have a single transaction to bump ... but have a list of them
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284680' id='554223'>
<a class='timestamp' href='#554223'><time timestamp='2017-07-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I was really hoping to avoid doing insane loops guessing how many outputs to select
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284680' id='554224'>
<a class='timestamp' href='#554224'><time timestamp='2017-07-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmm, well maybe I take that back, maybe a list of txids is ok and not too huge
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284680' id='554225'>
<a class='timestamp' href='#554225'><time timestamp='2017-07-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: ah, i see
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284680' id='554226'>
<a class='timestamp' href='#554226'><time timestamp='2017-07-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
the main difficulty i guess is that you&#x27;ll have now multiple change addresses 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284680' id='554227'>
<a class='timestamp' href='#554227'><time timestamp='2017-07-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
but that should be easy to prune
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284680' id='554228'>
<a class='timestamp' href='#554228'><time timestamp='2017-07-05T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: i would recommend just adding a new option which is payTxFeeRate
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284740' id='554229'>
<a class='timestamp' href='#554229'><time timestamp='2017-07-05T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I think if you wait until my PR&#x27;s that use coin control get merged, it&#x27;ll be trivial to add that to bumpfee
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284740' id='554230'>
<a class='timestamp' href='#554230'><time timestamp='2017-07-05T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
and disable anything nice when using totalFee? :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284740' id='554231'>
<a class='timestamp' href='#554231'><time timestamp='2017-07-05T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
No     
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284740' id='554232'>
<a class='timestamp' href='#554232'><time timestamp='2017-07-05T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Hmm     
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284800' id='554233'>
<a class='timestamp' href='#554233'><time timestamp='2017-07-05T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
or just be ok grabbing too many inputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284800' id='554234'>
<a class='timestamp' href='#554234'><time timestamp='2017-07-05T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
-&gt; airport
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284800' id='554235'>
<a class='timestamp' href='#554235'><time timestamp='2017-07-05T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
and shove the excess fee into a change output?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284800' id='554236'>
<a class='timestamp' href='#554236'><time timestamp='2017-07-05T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
(thinking along lines of using effective value)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284800' id='554237'>
<a class='timestamp' href='#554237'><time timestamp='2017-07-05T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
In what cases do we grab extra inputs?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284800' id='554238'>
<a class='timestamp' href='#554238'><time timestamp='2017-07-05T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Only when we have no change or it&#x27;s not big enough?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284800' id='554239'>
<a class='timestamp' href='#554239'><time timestamp='2017-07-05T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
s/do/will/
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284860' id='554240'>
<a class='timestamp' href='#554240'><time timestamp='2017-07-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
no change or not enough yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284860' id='554241'>
<a class='timestamp' href='#554241'><time timestamp='2017-07-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
otherwise no reason to
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284860' id='554242'>
<a class='timestamp' href='#554242'><time timestamp='2017-07-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: in any case, I kinda like the &quot;multiple txn to bump and auto-merge&quot; option now that I think of it...but still think we should just go with only supporting bottom chunks of chains by default, cause thats almost always what you want to do anyways (ie cpfp, effectively)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284860' id='554243'>
<a class='timestamp' href='#554243'><time timestamp='2017-07-05T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
and i don&#x27;t think it has any fragile and annoying logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284920' id='554244'>
<a class='timestamp' href='#554244'><time timestamp='2017-07-05T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: For starters you can do that by bumping the bottom tx yourself...   I think if you have a chain, you&#x27;ll probably save more by consolidating
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284980' id='554245'>
<a class='timestamp' href='#554245'><time timestamp='2017-07-05T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: Yeah I think that gets tricky.  It&#x27;s actually going to get a bit tricky even without thinking about totalFee, I think.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499284980' id='554246'>
<a class='timestamp' href='#554246'><time timestamp='2017-07-05T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: yes, agreed, but you can only support consoladating at the bottom of the chain
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285040' id='554247'>
<a class='timestamp' href='#554247'><time timestamp='2017-07-05T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
if you want to consolodate mid-chain, things might break, and thats less of our issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285040' id='554248'>
<a class='timestamp' href='#554248'><time timestamp='2017-07-05T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Why don&#x27;t you just get it to work right only in the event that it is using automatic fee calculation or a txconfirmtarget was passed in
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285040' id='554249'>
<a class='timestamp' href='#554249'><time timestamp='2017-07-05T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Supporting it in the totalFee case (if possible) can be later.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285040' id='554250'>
<a class='timestamp' href='#554250'><time timestamp='2017-07-05T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Adding a payTxFeeRate is orthogonal and as simple as above.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285100' id='554251'>
<a class='timestamp' href='#554251'><time timestamp='2017-07-05T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
morcos, if we don&#x27;t have that constraint, should be a fairly simple effective value selection, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285100' id='554252'>
<a class='timestamp' href='#554252'><time timestamp='2017-07-05T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
well, we have to decide how much we want to grab, just has to be enough to pay for fee delta... if you get exact match no change, otherwise make change.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285160' id='554253'>
<a class='timestamp' href='#554253'><time timestamp='2017-07-05T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Fair enough, was just hoping it was a useless arg to have less code
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285160' id='554254'>
<a class='timestamp' href='#554254'><time timestamp='2017-07-05T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: don&#x27;t have what constraint?  that it has to work with totalFee?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285220' id='554255'>
<a class='timestamp' href='#554255'><time timestamp='2017-07-05T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Yeah. Previously it&#x27;s dead-easy because you just adjust the change.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285520' id='554256'>
<a class='timestamp' href='#554256'><time timestamp='2017-07-05T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
or if you don&#x27;t mind rabbit-holes, the &quot;create transaction&quot; stuff could be extended with an array of set of transaction inputs in which at least 1 must be picked
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285520' id='554257'>
<a class='timestamp' href='#554257'><time timestamp='2017-07-05T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
and then all that logic can be reused
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285580' id='554258'>
<a class='timestamp' href='#554258'><time timestamp='2017-07-05T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
the part that gets messy is that you need to make sure your new transaction not only conflicts with the transaction you&#x27;re fee bumping -- but all previous fee bumps too
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285640' id='554259'>
<a class='timestamp' href='#554259'><time timestamp='2017-07-05T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
so you can avoid that by only adding new inputs  (at the cost of worse coin selection)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285640' id='554260'>
<a class='timestamp' href='#554260'><time timestamp='2017-07-05T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
oh please, not that rabbit hole
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285700' id='554261'>
<a class='timestamp' href='#554261'><time timestamp='2017-07-05T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
instagibbs: BnB isn&#x27;t hard to give a constraint &quot;only accept combinations which include at least one input of each of these previous transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285700' id='554262'>
<a class='timestamp' href='#554262'><time timestamp='2017-07-05T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
right nothing in principle is wrong, just the versioning thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285760' id='554263'>
<a class='timestamp' href='#554263'><time timestamp='2017-07-05T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
it&#x27;s obviously correct, just hard
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285760' id='554264'>
<a class='timestamp' href='#554264'><time timestamp='2017-07-05T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
instagibbs: yeah to that point, i&#x27;d argue we should concentrate on the BnB and effective value logic first
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285760' id='554265'>
<a class='timestamp' href='#554265'><time timestamp='2017-07-05T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
our functionary stack uses a version of that logic to not doublespend
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285760' id='554266'>
<a class='timestamp' href='#554266'><time timestamp='2017-07-05T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
adding inputs to bumpfee sounds nice but very non-critical and might as well only do it once on top of the new coin selection logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285760' id='554267'>
<a class='timestamp' href='#554267'><time timestamp='2017-07-05T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
morcos, agreed, I was building a speculative PR on top of achow&#x27;s 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499285880' id='554268'>
<a class='timestamp' href='#554268'><time timestamp='2017-07-05T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I&#x27;m supporting BnB as trojan horse to get effective value in (kidding, sorta)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499286000' id='554269'>
<a class='timestamp' href='#554269'><time timestamp='2017-07-05T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] instagibbs closed pull request #10750: [wallet] Change bumpfee totalFee option to feeRate option (master...bumpfeerate) <a href="https://github.com/bitcoin/bitcoin/pull/10750" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10750</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1499286180' id='554270'>
<a class='timestamp' href='#554270'><time timestamp='2017-07-05T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: you keep complaining about EV but it doesn&#x27;t seem like anyone is working to fix the bloat concern!
<br>
</div>

<div class='talk op-msg' data-timestamp='1499286240' id='554271'>
<a class='timestamp' href='#554271'><time timestamp='2017-07-05T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
gmaxwell, hopefully it doesn&#x27;t cause bloat for bumpfee!
<br>
</div>

<div class='talk op-msg' data-timestamp='1499286240' id='554272'>
<a class='timestamp' href='#554272'><time timestamp='2017-07-05T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
:)     
<br>
</div>

<div class='talk op-msg' data-timestamp='1499286300' id='554273'>
<a class='timestamp' href='#554273'><time timestamp='2017-07-05T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
not trying to be flippant, you can just take negative EV outputs anyways
<br>
</div>

<div class='talk op-msg' data-timestamp='1499286360' id='554274'>
<a class='timestamp' href='#554274'><time timestamp='2017-07-05T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it&#x27;s not clear to me that being willing to take negative ev outputs is sufficient to be as de-bloating as the current stuff, maybe it is.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499286420' id='554275'>
<a class='timestamp' href='#554275'><time timestamp='2017-07-05T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rhavar: the easiest thing to do is always conflict all the earlier inputs, then you don&#x27;t have to worry about failing to conflict an earlier bump.  It&#x27;s also better for privacy. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499286480' id='554276'>
<a class='timestamp' href='#554276'><time timestamp='2017-07-05T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: we can&#x27;t really do the multiple txn bump and auto-merge without segwit, I think.  Handling malleability is too gnarly.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499286540' id='554277'>
<a class='timestamp' href='#554277'><time timestamp='2017-07-05T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
it&#x27;s not clearly better for privacy, if the new coin selection result avoided creating change (and thus the means to cluster your wallet further) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499286600' id='554278'>
<a class='timestamp' href='#554278'><time timestamp='2017-07-05T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
hmm never mind, i&#x27;m stupid
<br>
</div>

<div class='talk op-msg' data-timestamp='1499286780' id='554279'>
<a class='timestamp' href='#554279'><time timestamp='2017-07-05T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
gmaxwell, would simulations suffice? What kind of data are people looking for?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499287860' id='554280'>
<a class='timestamp' href='#554280'><time timestamp='2017-07-05T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: simulations would sufficice in my view.  Basically just a clear argument that the new procedure won&#x27;t tend to select fewer inputs than the old one. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499288520' id='554281'>
<a class='timestamp' href='#554281'><time timestamp='2017-07-05T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: I&#x27;m all for putting together a simulation. But at the end of the day, I think we&#x27;re going to have to wing it a bit.  It&#x27;s almost by definition going to put together fewer inputs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499288520' id='554282'>
<a class='timestamp' href='#554282'><time timestamp='2017-07-05T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
We&#x27;re doing stupid things now by spending uneconomical inputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1499288580' id='554283'>
<a class='timestamp' href='#554283'><time timestamp='2017-07-05T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
To fix that and prevent utxo bloat getting worse takes a more involved solution I think
<br>
</div>

<div class='talk op-msg' data-timestamp='1499288580' id='554284'>
<a class='timestamp' href='#554284'><time timestamp='2017-07-05T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Being smarter about what size outputs we create is one starting point
<br>
</div>

<div class='talk op-msg' data-timestamp='1499288580' id='554285'>
<a class='timestamp' href='#554285'><time timestamp='2017-07-05T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
But the key is also being willing to purposefully pick multiple small outputs to consolidate sometimes
<br>
</div>

<div class='talk op-msg' data-timestamp='1499288640' id='554286'>
<a class='timestamp' href='#554286'><time timestamp='2017-07-05T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
The tricky thing is when to do that
<br>
</div>

<div class='talk op-msg' data-timestamp='1499288640' id='554287'>
<a class='timestamp' href='#554287'><time timestamp='2017-07-05T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
But I think if we start on this right after 0.15, we ought to be able to get it all done.  BnB, effective value, better output creation and smart consolodiation
<br>
</div>

<div class='talk op-msg' data-timestamp='1499288700' id='554288'>
<a class='timestamp' href='#554288'><time timestamp='2017-07-05T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Whether we&#x27;ll be 100% convinced its at least as good as before, I don&#x27;t think thats going to be easy...  But as long as it&#x27;s not a COMPLETE disaster, we can refine it over a couple of releases.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499288700' id='554289'>
<a class='timestamp' href='#554289'><time timestamp='2017-07-05T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Simulations are just so hard when we don&#x27;t have a good sense of what the user population looks like.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499288760' id='554290'>
<a class='timestamp' href='#554290'><time timestamp='2017-07-05T21:06:00Z'>21:06</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
morcos, you can at least compare apples to apples, which might be useful
<br>
</div>

<div class='talk op-msg' data-timestamp='1499288760' id='554291'>
<a class='timestamp' href='#554291'><time timestamp='2017-07-05T21:06:00Z'>21:06</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Depends on what an apple is I guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1499288760' id='554292'>
<a class='timestamp' href='#554292'><time timestamp='2017-07-05T21:06:00Z'>21:06</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but like i said, i&#x27;m all for tryingsimulations out
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289420' id='554293'>
<a class='timestamp' href='#554293'><time timestamp='2017-07-05T21:17:00Z'>21:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I don&#x27;t think that is acceptable-- you don&#x27;t even know what the magitude of the change is. And yes, but definition it will use fewer inputs: thats the problem.  It&#x27;s not like we haven&#x27;t made this kind of mistake before, and it had a tremendously negative and lasting effect.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289480' id='554294'>
<a class='timestamp' href='#554294'><time timestamp='2017-07-05T21:18:00Z'>21:18</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: what do you propose as an alternative?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289480' id='554295'>
<a class='timestamp' href='#554295'><time timestamp='2017-07-05T21:18:00Z'>21:18</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
my argument is that TX A which consolidates the UTXO more but contains an input with negative effective value is not clearly superior to TX B which is identical but does not contain the negative effective value input
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289540' id='554296'>
<a class='timestamp' href='#554296'><time timestamp='2017-07-05T21:19:00Z'>21:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
There isn&#x27;t an alernative. We need to simulate and make compensating changes and adjust things until we have good reason to believe there won&#x27;t be a seriously bad effect.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289540' id='554297'>
<a class='timestamp' href='#554297'><time timestamp='2017-07-05T21:19:00Z'>21:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Simulate how?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289540' id='554298'>
<a class='timestamp' href='#554298'><time timestamp='2017-07-05T21:19:00Z'>21:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I disagree, especially considering that we will make UTXO which immediately have negative effective value, that sequence alone basically guarentees runaway utxo growth (I just don&#x27;t know the runaway constant)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289600' id='554299'>
<a class='timestamp' href='#554299'><time timestamp='2017-07-05T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: well the &quot;especially ..&quot; is the part i think we need to address first
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289660' id='554300'>
<a class='timestamp' href='#554300'><time timestamp='2017-07-05T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
the problems i have with simulation is they tend to simulate over a single large wallet making and receiving a series of txs
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289720' id='554301'>
<a class='timestamp' href='#554301'><time timestamp='2017-07-05T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I don&#x27;t know if there is any reason to believe that this has the same net utxo affect as an ecosystem of wallets (many probably much smaller) all making/receiving txs to each other
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289720' id='554302'>
<a class='timestamp' href='#554302'><time timestamp='2017-07-05T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If it were addressed first I would worry somewhat less.  Similarly, if we had some mechenism to sweep up utxo even when they have low or slightly negative EV then there would be less cause for concern.  We know that pruning unnecessary inputs caused phenominal UTXO set inflation, avoiding low EV inputs seems to me like it would do the same.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289720' id='554303'>
<a class='timestamp' href='#554303'><time timestamp='2017-07-05T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
without understanding some structure of how tx flows look, we&#x27;re at risk of producing useless results
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289780' id='554304'>
<a class='timestamp' href='#554304'><time timestamp='2017-07-05T21:23:00Z'>21:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: well murch&#x27;s simulation had traces of real payment in, payment out amounts.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289780' id='554305'>
<a class='timestamp' href='#554305'><time timestamp='2017-07-05T21:23:00Z'>21:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #10752: Use quoted form when including primitives/transaction.h (master...transaction-h) <a href="https://github.com/bitcoin/bitcoin/pull/10752" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10752</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289780' id='554306'>
<a class='timestamp' href='#554306'><time timestamp='2017-07-05T21:23:00Z'>21:23</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
did you read my whole spiel..  i thought we should do those other things as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289780' id='554307'>
<a class='timestamp' href='#554307'><time timestamp='2017-07-05T21:23:00Z'>21:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I think it is still a big step forward to say that in at least one realistic situation the changes don&#x27;t produce UTXO runaway.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289840' id='554308'>
<a class='timestamp' href='#554308'><time timestamp='2017-07-05T21:24:00Z'>21:24</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but it&#x27;s actually easier to build those other things properly on top of an effective value framework
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289840' id='554309'>
<a class='timestamp' href='#554309'><time timestamp='2017-07-05T21:24:00Z'>21:24</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
Has anyone suggested raising the &quot;is dust&quot; check to something more sane? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289840' id='554310'>
<a class='timestamp' href='#554310'><time timestamp='2017-07-05T21:24:00Z'>21:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;m not saying they should be done, I&#x27;m saying that they must be done. And that we must have at least <u>_some_</u> measurement that suggests that it won&#x27;t go nuts. It doesn&#x27;t have to be perfect.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289840' id='554311'>
<a class='timestamp' href='#554311'><time timestamp='2017-07-05T21:24:00Z'>21:24</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
rhavar, yep
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289840' id='554312'>
<a class='timestamp' href='#554312'><time timestamp='2017-07-05T21:24:00Z'>21:24</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
the current dust threshold is ludicrously low 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289900' id='554313'>
<a class='timestamp' href='#554313'><time timestamp='2017-07-05T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
rhavar, the BnB branch does just that, to minimize review surface, but generally raising it is a goal too
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289900' id='554314'>
<a class='timestamp' href='#554314'><time timestamp='2017-07-05T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rhavar: using effectively output value effectively does that
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289900' id='554315'>
<a class='timestamp' href='#554315'><time timestamp='2017-07-05T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think rhavar is talking about something different instagibbs, sipa.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289900' id='554316'>
<a class='timestamp' href='#554316'><time timestamp='2017-07-05T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
rhavar: yeah, changing dust levels is a bit annoying, but changing the levels at which we&#x27;ll create dust is a no-brainer!
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289900' id='554317'>
<a class='timestamp' href='#554317'><time timestamp='2017-07-05T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
i&#x27;m talking about is standard
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289900' id='554318'>
<a class='timestamp' href='#554318'><time timestamp='2017-07-05T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rhavar is talking about what the network allows people to do.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289900' id='554319'>
<a class='timestamp' href='#554319'><time timestamp='2017-07-05T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh     
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289900' id='554320'>
<a class='timestamp' href='#554320'><time timestamp='2017-07-05T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
oh, then no
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289900' id='554321'>
<a class='timestamp' href='#554321'><time timestamp='2017-07-05T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
not the coin selection itself
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289900' id='554322'>
<a class='timestamp' href='#554322'><time timestamp='2017-07-05T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rhavar: I think we should get rid of it, unfortunately it&#x27;s ineffective since some large miners bypass it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289960' id='554323'>
<a class='timestamp' href='#554323'><time timestamp='2017-07-05T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no sane coin selection strategy should produce anything near the current dust threshold
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289960' id='554324'>
<a class='timestamp' href='#554324'><time timestamp='2017-07-05T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
some miners do bypass it, but it&#x27;s still quite effective as a network policy
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289960' id='554325'>
<a class='timestamp' href='#554325'><time timestamp='2017-07-05T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: i agree to the extent that we shouldn&#x27;t raise it, but getting rid of it seems risky.  it&#x27;s at least somewhat of an impediment to other implementations creating stupidly small utxos
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289960' id='554326'>
<a class='timestamp' href='#554326'><time timestamp='2017-07-05T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but there are quite a few not-so-sane coin selection algorithms out there...
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289960' id='554327'>
<a class='timestamp' href='#554327'><time timestamp='2017-07-05T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
it stops a lot of fee attacks
<br>
</div>

<div class='talk op-msg' data-timestamp='1499289960' id='554328'>
<a class='timestamp' href='#554328'><time timestamp='2017-07-05T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: perhaps. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290020' id='554329'>
<a class='timestamp' href='#554329'><time timestamp='2017-07-05T21:27:00Z'>21:27</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
I saw a service that recently (3 month ago?) got spammed with 3000 sat (?) outputs  and ended up needing to spend over a bitcoin to clean it up
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290020' id='554330'>
<a class='timestamp' href='#554330'><time timestamp='2017-07-05T21:27:00Z'>21:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rhavar: I don&#x27;t think it does, you can reliably get txn mined that violate it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290020' id='554331'>
<a class='timestamp' href='#554331'><time timestamp='2017-07-05T21:27:00Z'>21:27</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
if they could&#x27;ve spammed with 1 sat outputs, it would&#x27;ve been a lot more effective
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290020' id='554332'>
<a class='timestamp' href='#554332'><time timestamp='2017-07-05T21:27:00Z'>21:27</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
and at a certain point people wouldn&#x27;t even bother trying to clean it up
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290020' id='554333'>
<a class='timestamp' href='#554333'><time timestamp='2017-07-05T21:27:00Z'>21:27</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
which leads to permanent bloat
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290080' id='554334'>
<a class='timestamp' href='#554334'><time timestamp='2017-07-05T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Really the weighting in segwit is intended to be a better way of dealing with this stuff-- make the fees on creating those outputs that never get spent higher.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290080' id='554335'>
<a class='timestamp' href='#554335'><time timestamp='2017-07-05T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
Unless you imagine a future where spending dust has  &lt;=  0 weight :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290080' id='554336'>
<a class='timestamp' href='#554336'><time timestamp='2017-07-05T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Constant amounts of bloat don&#x27;t concern me, bloat blowup does. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290140' id='554337'>
<a class='timestamp' href='#554337'><time timestamp='2017-07-05T21:29:00Z'>21:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think on the order of 30% of hashpower doesn&#x27;t enforce it, so I think really the only effect it has is that ignorant/lazy wallet authors get forced by relay policy to avoid creating dust, where otherwise they might not care.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290200' id='554338'>
<a class='timestamp' href='#554338'><time timestamp='2017-07-05T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
it&#x27;s also reasonably effective at stopping spammers (who are trying to attack a specific wallet, not the network itself) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290200' id='554339'>
<a class='timestamp' href='#554339'><time timestamp='2017-07-05T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
they send to 1 peer who rejects it, so they use a higher amount
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290200' id='554340'>
<a class='timestamp' href='#554340'><time timestamp='2017-07-05T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rhavar: why? are they just too stupid to give their txn directly to antpool?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290200' id='554341'>
<a class='timestamp' href='#554341'><time timestamp='2017-07-05T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
probably
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290200' id='554342'>
<a class='timestamp' href='#554342'><time timestamp='2017-07-05T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(or whomever else is bypassing at the moment)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290260' id='554343'>
<a class='timestamp' href='#554343'><time timestamp='2017-07-05T21:31:00Z'>21:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
fair but kind of a fragile justification.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290260' id='554344'>
<a class='timestamp' href='#554344'><time timestamp='2017-07-05T21:31:00Z'>21:31</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
not sure how they even construct the spam, tbh. it&#x27;s possible they just use a wallet (like core?) that rejects it immediately 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290260' id='554345'>
<a class='timestamp' href='#554345'><time timestamp='2017-07-05T21:31:00Z'>21:31</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
they probably aren&#x27;t aware of that some miners don&#x27;t enforce 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290320' id='554346'>
<a class='timestamp' href='#554346'><time timestamp='2017-07-05T21:32:00Z'>21:32</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
it&#x27;s a pretty big attack vector though, i&#x27;m not sure a sane way to deal with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290380' id='554347'>
<a class='timestamp' href='#554347'><time timestamp='2017-07-05T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
having wallets not spend uneconomical outputs might reduce the amounts of attacks though (as they know they can&#x27;t harm someone by doing it)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290380' id='554348'>
<a class='timestamp' href='#554348'><time timestamp='2017-07-05T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
if i know you&#x27;re using a wallet that spends the uneconomical dust, i&#x27;m a lot more likely to create it in the first place
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290380' id='554349'>
<a class='timestamp' href='#554349'><time timestamp='2017-07-05T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rhavar: segwit substantially deals with it, because it moves fees from spending outputs to creating them.  (not as much as I&#x27;d like, but there are constraints on how far you can go with that)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290440' id='554350'>
<a class='timestamp' href='#554350'><time timestamp='2017-07-05T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
yeah i&#x27;m aware =)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290440' id='554351'>
<a class='timestamp' href='#554351'><time timestamp='2017-07-05T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
he wants infinite discount :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290440' id='554352'>
<a class='timestamp' href='#554352'><time timestamp='2017-07-05T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
And having wallets be sensible about not spending insanely uneconomical dust would be good.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290440' id='554353'>
<a class='timestamp' href='#554353'><time timestamp='2017-07-05T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
instagibbs: nah, i want a constant negative weight for each byte you remove from the utxo    :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290500' id='554354'>
<a class='timestamp' href='#554354'><time timestamp='2017-07-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yea, infinite discount has problems, alas... byte bloat goes up hyperbolically with the discount.   Signature costs are much less of a concern than utxo but only finitely so. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290500' id='554355'>
<a class='timestamp' href='#554355'><time timestamp='2017-07-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
negative weight is even more problematic than infinite discount.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290500' id='554356'>
<a class='timestamp' href='#554356'><time timestamp='2017-07-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
:(     
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290500' id='554357'>
<a class='timestamp' href='#554357'><time timestamp='2017-07-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just surcharge for outputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290500' id='554358'>
<a class='timestamp' href='#554358'><time timestamp='2017-07-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
unless you join the dark size and embrace almost unbounded size blocks 8)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290500' id='554359'>
<a class='timestamp' href='#554359'><time timestamp='2017-07-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
(they&#x27;d still be bounded to the size of the utxo or something lolz)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290500' id='554360'>
<a class='timestamp' href='#554360'><time timestamp='2017-07-05T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
because then you can pad up outputs then produce a yottabyte block. which then in practice you end up with multiple constraints and intractable fee estimation.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290680' id='554361'>
<a class='timestamp' href='#554361'><time timestamp='2017-07-05T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
I wonder how harmful it really would be if someone mined a 1GB block that also removed 1GB from the utxo :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290740' id='554362'>
<a class='timestamp' href='#554362'><time timestamp='2017-07-05T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
short-term, terrible
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290740' id='554363'>
<a class='timestamp' href='#554363'><time timestamp='2017-07-05T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
long-term, great
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290740' id='554364'>
<a class='timestamp' href='#554364'><time timestamp='2017-07-05T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
as it&#x27;d kind of be a &quot;one off&quot; style block, as it&#x27;s obviously not sustainable
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290800' id='554365'>
<a class='timestamp' href='#554365'><time timestamp='2017-07-05T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if we as a community feel that such a UTXO reduction is necessary, the proper way would be aim for a softfork that does that, not with a massive block
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290800' id='554366'>
<a class='timestamp' href='#554366'><time timestamp='2017-07-05T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
the biggest problem with too big a discount is that fees are still sometimes effectively nil, so you can preload the utxo now for &quot;freeish&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290800' id='554367'>
<a class='timestamp' href='#554367'><time timestamp='2017-07-05T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
I just meant that if you came up with a weighting scheme that made it possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290800' id='554368'>
<a class='timestamp' href='#554368'><time timestamp='2017-07-05T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rhavar: ah, i see
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290800' id='554369'>
<a class='timestamp' href='#554369'><time timestamp='2017-07-05T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rhavar: the problem is that the block would get orphaned because it would take forever to propagate. It would blow up all fast propagation methods (or to avoid blowing them up we&#x27;d have to uncap relay of txn, which would make the network DOS vulnerable).
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290860' id='554370'>
<a class='timestamp' href='#554370'><time timestamp='2017-07-05T21:41:00Z'>21:41</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
fair point
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290860' id='554371'>
<a class='timestamp' href='#554371'><time timestamp='2017-07-05T21:41:00Z'>21:41</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but i&#x27;m with gmaxwell, segwit didn&#x27;t go quite far enough, and if we ever do have a HF, we should definitely go a bit further. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290860' id='554372'>
<a class='timestamp' href='#554372'><time timestamp='2017-07-05T21:41:00Z'>21:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rhavar: so in practice miners would impose a second limit, which would often be the operable limit, and now efficient fee computation becomes intractable, because you don&#x27;t know what limit you&#x27;re competing for when you make the transaction. ... plus all the above just degrades network stability. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290920' id='554373'>
<a class='timestamp' href='#554373'><time timestamp='2017-07-05T21:42:00Z'>21:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea, with a HF we could go a bit further than segwit. E.g. counting the txin:vout data like witness data.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290920' id='554374'>
<a class='timestamp' href='#554374'><time timestamp='2017-07-05T21:42:00Z'>21:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I still don&#x27;t think a factor much beyond 4 is well advised, but there are some other accounting changes that would be reasonable along these lines.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290980' id='554375'>
<a class='timestamp' href='#554375'><time timestamp='2017-07-05T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt has a pAtent on that though, even more problematic than segwit pAtents
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290980' id='554376'>
<a class='timestamp' href='#554376'><time timestamp='2017-07-05T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
lol     
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290980' id='554377'>
<a class='timestamp' href='#554377'><time timestamp='2017-07-05T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
I can&#x27;t imagine it actually causing a problem with fee estimation. If one of the limits was just an extreme thing that was sustainably being able to hit (due to it requiring continual utxo decrease)  fee estimation could just ignore it
<br>
</div>

<div class='talk op-msg' data-timestamp='1499290980' id='554378'>
<a class='timestamp' href='#554378'><time timestamp='2017-07-05T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
although multiple limits is nasty for transaction selection :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291040' id='554379'>
<a class='timestamp' href='#554379'><time timestamp='2017-07-05T21:44:00Z'>21:44</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
that wasn&#x27;t* able to be continually hit
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291100' id='554380'>
<a class='timestamp' href='#554380'><time timestamp='2017-07-05T21:45:00Z'>21:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
At least when I&#x27;ve played through these things, it seems to work out such that both limits should always be near getting hit the reason is that if the one limit isn&#x27;t being hit, miners should pat their blocks creating UTXO to charge up to allow larger blocks later.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291100' id='554381'>
<a class='timestamp' href='#554381'><time timestamp='2017-07-05T21:45:00Z'>21:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
In general I think anything where it can go negative immediately leads to non-trivial stratigies for income maximization. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291160' id='554382'>
<a class='timestamp' href='#554382'><time timestamp='2017-07-05T21:46:00Z'>21:46</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: one easy change we could still make for 0.15 is if we think the amount you should be willing to discard entirely (just move to fees) should be higher than the DustThreshold
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291220' id='554383'>
<a class='timestamp' href='#554383'><time timestamp='2017-07-05T21:47:00Z'>21:47</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
Imagine you had a weight of: -2 for each byte removed from the utxo. 1 weight for each byte in the transaction. And 100 weight for each byte added to the utxo. Say you have two limits: block weight limit of 1e6 and  block size limit of 100MB   
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291220' id='554384'>
<a class='timestamp' href='#554384'><time timestamp='2017-07-05T21:47:00Z'>21:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I like these changes that can be made without redoing coin selection.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291220' id='554385'>
<a class='timestamp' href='#554385'><time timestamp='2017-07-05T21:47:00Z'>21:47</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
it&#x27;d be impossible for the block size limit to be hit frequently 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291220' id='554386'>
<a class='timestamp' href='#554386'><time timestamp='2017-07-05T21:47:00Z'>21:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
It would be easy to add a new calculation.  GetDiscardRate  =  max(dustrate, min(discardrate, estimatesmartfee(1000)))
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291280' id='554387'>
<a class='timestamp' href='#554387'><time timestamp='2017-07-05T21:48:00Z'>21:48</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
then if we configured discardrate default to something &gt; 1 sat/Byte .  
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291340' id='554388'>
<a class='timestamp' href='#554388'><time timestamp='2017-07-05T21:49:00Z'>21:49</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i&#x27;m the king of adding new rate variables though
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291460' id='554389'>
<a class='timestamp' href='#554389'><time timestamp='2017-07-05T21:51:00Z'>21:51</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
say it was 5 sat/byte
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291460' id='554390'>
<a class='timestamp' href='#554390'><time timestamp='2017-07-05T21:51:00Z'>21:51</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
at $3000 bitcoin, i think that means if you create an output thats less than 8 cents (or a bit smaller for segwit) that you&#x27;ll just throw it away, and instead of redoing coin selection, you&#x27;ll just add it to fee
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291520' id='554391'>
<a class='timestamp' href='#554391'><time timestamp='2017-07-05T21:52:00Z'>21:52</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
you guys say sane wallets shouldn&#x27;t create anything close to the dust threshold, but i think that number, which is just 5x dust would be hard to convince people is good idea
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291580' id='554392'>
<a class='timestamp' href='#554392'><time timestamp='2017-07-05T21:53:00Z'>21:53</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
what&#x27;s the alternative though? redoing coin selection? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291580' id='554393'>
<a class='timestamp' href='#554393'><time timestamp='2017-07-05T21:53:00Z'>21:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
taking the min with estimatesmartfee(1000) though helps avoid it becoming bad if BTC denominated fees
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291580' id='554394'>
<a class='timestamp' href='#554394'><time timestamp='2017-07-05T21:53:00Z'>21:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
drop
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291640' id='554395'>
<a class='timestamp' href='#554395'><time timestamp='2017-07-05T21:54:00Z'>21:54</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
rhavar: the problem with coin selection, is you don&#x27;t know if you actually could get a better result
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291640' id='554396'>
<a class='timestamp' href='#554396'><time timestamp='2017-07-05T21:54:00Z'>21:54</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
with &quot;redoing coin selection&quot; i mean it would contain the same logic about omitting change
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291700' id='554397'>
<a class='timestamp' href='#554397'><time timestamp='2017-07-05T21:55:00Z'>21:55</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
the coin selection could pick a similar sized set and get to keep the change, instead of dump it
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291760' id='554398'>
<a class='timestamp' href='#554398'><time timestamp='2017-07-05T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i suppose when we redo coin selection you&#x27;ll first aim for at least min_desired_change (which is now a CENT and we aim for it exactly, but screw that, just at least)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291760' id='554399'>
<a class='timestamp' href='#554399'><time timestamp='2017-07-05T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
yeah, i think it&#x27;s strictly better or equal (from a fee perspective, not privacy) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291820' id='554400'>
<a class='timestamp' href='#554400'><time timestamp='2017-07-05T21:57:00Z'>21:57</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if you can&#x27;t get to min_desired_change, then you&#x27;ll throw everything you have in there and just take what you get, and if its less than discard (right now just dust) just throw away change
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291820' id='554401'>
<a class='timestamp' href='#554401'><time timestamp='2017-07-05T21:57:00Z'>21:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I&#x27;m fine with discarding more.  One way we could answer your concenr is making it configurable. Then people who want it different could adjust it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291880' id='554402'>
<a class='timestamp' href='#554402'><time timestamp='2017-07-05T21:58:00Z'>21:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i&#x27;ll write it up.. it&#x27;s small
<br>
</div>

<div class='talk op-msg' data-timestamp='1499291940' id='554403'>
<a class='timestamp' href='#554403'><time timestamp='2017-07-05T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: you could use the BNB hurestic: you can throw away up to the cost of creating and spending the change output.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292000' id='554404'>
<a class='timestamp' href='#554404'><time timestamp='2017-07-05T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: but then you&#x27;re throwing it away twice
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292000' id='554405'>
<a class='timestamp' href='#554405'><time timestamp='2017-07-05T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
&quot;spending the change output&quot;  how does it know the cost of spending the output? At what fee rate does it use?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292000' id='554406'>
<a class='timestamp' href='#554406'><time timestamp='2017-07-05T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rhavar: achow101&#x27;s implementation uses a 1008 block feerate estimate.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292000' id='554407'>
<a class='timestamp' href='#554407'><time timestamp='2017-07-05T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rhavar: as the feerate. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292000' id='554408'>
<a class='timestamp' href='#554408'><time timestamp='2017-07-05T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
ah nic
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292000' id='554409'>
<a class='timestamp' href='#554409'><time timestamp='2017-07-05T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
e     
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292060' id='554410'>
<a class='timestamp' href='#554410'><time timestamp='2017-07-05T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
same as my code then :D
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292060' id='554411'>
<a class='timestamp' href='#554411'><time timestamp='2017-07-05T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I don&#x27;t get the &#x27;throwing it away twice&#x27;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292060' id='554412'>
<a class='timestamp' href='#554412'><time timestamp='2017-07-05T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lol, morcos&#x27; troll game is strong today
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292060' id='554413'>
<a class='timestamp' href='#554413'><time timestamp='2017-07-05T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
We should never be keeping change that doesn&#x27;t hit that threshold, the real Q is larger but still not great. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292060' id='554414'>
<a class='timestamp' href='#554414'><time timestamp='2017-07-05T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-4'> Murch</span>&gt;
gmaxwell: One of the Trezor guys did some more experiments this weekend and found that he got better results by allowing a smaller window of just the change output size
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292120' id='554415'>
<a class='timestamp' href='#554415'><time timestamp='2017-07-05T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
well you&#x27;ve already done the coin selection and fee calculation to pay for the change, and now you&#x27;re also throwing away the change output itself,so you are potentially overpaying the newly needed fee by double the cost of creating the change
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292120' id='554416'>
<a class='timestamp' href='#554416'><time timestamp='2017-07-05T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: what am I being dense about? how does merging txn during a bump cause issues w/ malleability? shouldnt it go the other way if anything?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292120' id='554417'>
<a class='timestamp' href='#554417'><time timestamp='2017-07-05T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
or are you suggesting we should explicitly not support chains in your wallet without segwit (which is true)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292120' id='554418'>
<a class='timestamp' href='#554418'><time timestamp='2017-07-05T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: ah okay, don&#x27;t do that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292180' id='554419'>
<a class='timestamp' href='#554419'><time timestamp='2017-07-05T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: because you don&#x27;t know what will get confirmed, will the orignal or the bump get confirmed?  So what you should do is make two transactions: a child and a bump. sign both, announce the child if the bump loses.  (and apply this recursively for more spends)
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292240' id='554420'>
<a class='timestamp' href='#554420'><time timestamp='2017-07-05T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: as soon as malleability enters the picture you can&#x27;t do this anymore; and you&#x27;re stuck hoping the user stays online and reenters their keys so you can resign when a malleation happens.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292240' id='554421'>
<a class='timestamp' href='#554421'><time timestamp='2017-07-05T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
what do you care if the child gets confirmed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292240' id='554422'>
<a class='timestamp' href='#554422'><time timestamp='2017-07-05T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
great! you&#x27;ve saved the attempted-bump in fees?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292240' id='554423'>
<a class='timestamp' href='#554423'><time timestamp='2017-07-05T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
now the user is a bit confused, and may need to bump the child again, but thats ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292420' id='554424'>
<a class='timestamp' href='#554424'><time timestamp='2017-07-05T22:07:00Z'>22:07</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i&#x27;m confused now too.  i agree we should not attach a child to a bumper or bumpee.  but what is wrong bumping something that already has a child if the bump is the merge of the parent and child?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292420' id='554425'>
<a class='timestamp' href='#554425'><time timestamp='2017-07-05T22:07:00Z'>22:07</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if the bump loses, i don&#x27;t think you&#x27;ve done too much harm to the child have you?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292540' id='554426'>
<a class='timestamp' href='#554426'><time timestamp='2017-07-05T22:09:00Z'>22:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
When you create a <u>_new_</u> child or a <u>_new_</u> bump that adds outputs, you must also make children of all the existing ones.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292600' id='554427'>
<a class='timestamp' href='#554427'><time timestamp='2017-07-05T22:10:00Z'>22:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Perhaps I&#x27;m talking about something a bit more broad than bluematt.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292720' id='554428'>
<a class='timestamp' href='#554428'><time timestamp='2017-07-05T22:12:00Z'>22:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I believe you are talking about a very full-featured bumpfee, much more than I am thinking?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499292720' id='554429'>
<a class='timestamp' href='#554429'><time timestamp='2017-07-05T22:12:00Z'>22:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
Though I missed some of the above discussion, just waiting for them to reopen the airport after they closed it due to weather :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293080' id='554430'>
<a class='timestamp' href='#554430'><time timestamp='2017-07-05T22:18:00Z'>22:18</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
I think it&#x27;s pretty sane to support  the case of fee bumping a list of transactions, where all of them have no children. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293080' id='554431'>
<a class='timestamp' href='#554431'><time timestamp='2017-07-05T22:18:00Z'>22:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
would those then get merged, or no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293080' id='554432'>
<a class='timestamp' href='#554432'><time timestamp='2017-07-05T22:18:00Z'>22:18</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293080' id='554433'>
<a class='timestamp' href='#554433'><time timestamp='2017-07-05T22:18:00Z'>22:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, I agree, but I dont think thats an issue pre-segwit
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293140' id='554434'>
<a class='timestamp' href='#554434'><time timestamp='2017-07-05T22:19:00Z'>22:19</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
yeah, i don&#x27;t see how malleability matters at all
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293140' id='554435'>
<a class='timestamp' href='#554435'><time timestamp='2017-07-05T22:19:00Z'>22:19</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
(at least if nothing has descendants) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293200' id='554436'>
<a class='timestamp' href='#554436'><time timestamp='2017-07-05T22:20:00Z'>22:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it doesn&#x27;t matter if nothing has decendants. But BlueMatt was talking about decendants, unless I&#x27;ve misunderstood.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293200' id='554437'>
<a class='timestamp' href='#554437'><time timestamp='2017-07-05T22:20:00Z'>22:20</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
is kinda missing how it matters in any case, but I&#x27;m probably missing some crazy-full-featured feebump scenario that gmaxwell is thinking about
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293200' id='554438'>
<a class='timestamp' href='#554438'><time timestamp='2017-07-05T22:20:00Z'>22:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i was, but I&#x27;m still confused
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293260' id='554439'>
<a class='timestamp' href='#554439'><time timestamp='2017-07-05T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
if there&#x27;s descendants, there&#x27;s some super annoying cases. But i don&#x27;t think anyone is ever going to do that, so i don&#x27;t think it&#x27;s worth worrying about
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293260' id='554440'>
<a class='timestamp' href='#554440'><time timestamp='2017-07-05T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
i think it&#x27;s only worth considering bumping shit without descendants, and i don&#x27;t think bumping a list of them at once adds much more complexity :D
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293260' id='554441'>
<a class='timestamp' href='#554441'><time timestamp='2017-07-05T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: If you allow decendants comes up.   You pay A  then you bump A.  Then you go to pay B,  if you&#x27;re going to chainbumb you now need to compute and sign three transactions   A-&gt;B, A&#x27;-&gt;B and AB.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293320' id='554442'>
<a class='timestamp' href='#554442'><time timestamp='2017-07-05T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: and you can keep applying this for any number of chains and bumps and its all great. until you consider malleability.  E.g. maybe A gets mined but in malleated form, and now your payment to B is invalidated until you restart the wallet and enter your phassphrase.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293380' id='554443'>
<a class='timestamp' href='#554443'><time timestamp='2017-07-05T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rhavar: I think without malleability there is no big deal on the bumps, just takes some code.  I also think greenaddress does bumps with decendants. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293380' id='554444'>
<a class='timestamp' href='#554444'><time timestamp='2017-07-05T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
well that has nothing to do with bumping
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293380' id='554445'>
<a class='timestamp' href='#554445'><time timestamp='2017-07-05T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
thats just the general-case spending-unconfirmed
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293440' id='554446'>
<a class='timestamp' href='#554446'><time timestamp='2017-07-05T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and I dont see why you need to sign A&#x27;-&gt;B, you&#x27;re just merging?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293440' id='554447'>
<a class='timestamp' href='#554447'><time timestamp='2017-07-05T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
what is A&#x27;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293500' id='554448'>
<a class='timestamp' href='#554448'><time timestamp='2017-07-05T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
-&gt; boarding, bbl when we get off
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293740' id='554449'>
<a class='timestamp' href='#554449'><time timestamp='2017-07-05T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: take a look at the comment I linked above: <a href="https://github.com/bitcoin/bitcoin/pull/8456#issuecomment-264734557" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8456#issuecomment-264734557</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293740' id='554450'>
<a class='timestamp' href='#554450'><time timestamp='2017-07-05T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it&#x27;s your comment
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293800' id='554451'>
<a class='timestamp' href='#554451'><time timestamp='2017-07-05T22:30:00Z'>22:30</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think what we are talking about is a tx with descendants (or multiple txs each with descendants) and then bumpfee bumping all of them at once
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293800' id='554452'>
<a class='timestamp' href='#554452'><time timestamp='2017-07-05T22:30:00Z'>22:30</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
the thing we already don&#x27;t allow, which i agree we should not change, is adding a child to a tx that is a bumper or has been bumped
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293860' id='554453'>
<a class='timestamp' href='#554453'><time timestamp='2017-07-05T22:31:00Z'>22:31</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i don&#x27;t see any issue with bumping a tx with children (presumably if the children are all yours) as long as you also pay all their outputs as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293920' id='554454'>
<a class='timestamp' href='#554454'><time timestamp='2017-07-05T22:32:00Z'>22:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: no, it&#x27;s a problem with making a child of a transaction that has a bump.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293980' id='554455'>
<a class='timestamp' href='#554455'><time timestamp='2017-07-05T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
ok agreed
<br>
</div>

<div class='talk op-msg' data-timestamp='1499293980' id='554456'>
<a class='timestamp' href='#554456'><time timestamp='2017-07-05T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
you can bump something that has a child without any big complexity, but you can&#x27;t produce a child of anything that has been bumped.
<br>
</div>

<div class='talk op-msg' data-timestamp='1499294100' id='554457'>
<a class='timestamp' href='#554457'><time timestamp='2017-07-05T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-7'> rhavar</span>&gt;
sounds good to me ;D
<br>
</div>

</div>
</section>

</body>
</html>
