<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2018-09-09
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2018-09-09' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:21 UTC</pre>
<pre><a href="/bitcoin-core-dev/2018-08-09">&lt;</a><span class='header'>  September 2018  </span><a href="/bitcoin-core-dev/2018-10-09">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                   <a class="" href="/bitcoin-core-dev/2018-09-01">1</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2018-09-02">2</a>  <a class="" href="/bitcoin-core-dev/2018-09-03">3</a>  <a class="" href="/bitcoin-core-dev/2018-09-04">4</a>  <a class="" href="/bitcoin-core-dev/2018-09-05">5</a>  <a class="" href="/bitcoin-core-dev/2018-09-06">6</a>  <a class="" href="/bitcoin-core-dev/2018-09-07">7</a>  <a class="" href="/bitcoin-core-dev/2018-09-08">8</a>  &#x000A; <a class="current" href="/bitcoin-core-dev/2018-09-09">9</a> <a class="" href="/bitcoin-core-dev/2018-09-10">10</a> <a class="" href="/bitcoin-core-dev/2018-09-11">11</a> <a class="" href="/bitcoin-core-dev/2018-09-12">12</a> <a class="" href="/bitcoin-core-dev/2018-09-13">13</a> <a class="" href="/bitcoin-core-dev/2018-09-14">14</a> <a class="" href="/bitcoin-core-dev/2018-09-15">15</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-09-16">16</a> <a class="" href="/bitcoin-core-dev/2018-09-17">17</a> <a class="" href="/bitcoin-core-dev/2018-09-18">18</a> <a class="" href="/bitcoin-core-dev/2018-09-19">19</a> <a class="" href="/bitcoin-core-dev/2018-09-20">20</a> <a class="" href="/bitcoin-core-dev/2018-09-21">21</a> <a class="" href="/bitcoin-core-dev/2018-09-22">22</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-09-23">23</a> <a class="" href="/bitcoin-core-dev/2018-09-24">24</a> 25 <a class="" href="/bitcoin-core-dev/2018-09-26">26</a> <a class="" href="/bitcoin-core-dev/2018-09-27">27</a> <a class="" href="/bitcoin-core-dev/2018-09-28">28</a> <a class="" href="/bitcoin-core-dev/2018-09-29">29</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-09-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1536480960' id='629610'>
<a class='timestamp' href='#629610'><time timestamp='2018-09-09T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there is a feature for manual pruning, isn&#x27;t  there?
<br>
</div>

<div class='talk op-msg' data-timestamp='1536480960' id='629611'>
<a class='timestamp' href='#629611'><time timestamp='2018-09-09T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I remember something like that was merged at some point, a command line flag to prevent automatic pruning as well as a RPC to prune
<br>
</div>

<div class='talk op-msg' data-timestamp='1536481020' id='629612'>
<a class='timestamp' href='#629612'><time timestamp='2018-09-09T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
client software could use this to prune only what they no longer require
<br>
</div>

<div class='talk op-msg' data-timestamp='1536481260' id='629613'>
<a class='timestamp' href='#629613'><time timestamp='2018-09-09T08:21:00Z'>08:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(I don&#x27;t think any lightning daemons do this, at the moment, but would be useful)
<br>
</div>

<div class='talk op-msg' data-timestamp='1536482220' id='629614'>
<a class='timestamp' href='#629614'><time timestamp='2018-09-09T08:37:00Z'>08:37</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
wumpus: yeah, sipa was also saying there is manual prune option
<br>
</div>

<div class='talk op-msg' data-timestamp='1536482340' id='629615'>
<a class='timestamp' href='#629615'><time timestamp='2018-09-09T08:39:00Z'>08:39</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
so that should be able to be used by lightning nodes to ensure the only blocks pruned are ones they don&#x27;t need anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1536482520' id='629616'>
<a class='timestamp' href='#629616'><time timestamp='2018-09-09T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the design of manual prune is kinda not ideal if you have multiple potential things that need data. :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1536482640' id='629617'>
<a class='timestamp' href='#629617'><time timestamp='2018-09-09T08:44:00Z'>08:44</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
if there was a DoNotPruneAbove, it could be set by different things, with the lowest one controlling
<br>
</div>

<div class='talk op-msg' data-timestamp='1536482700' id='629618'>
<a class='timestamp' href='#629618'><time timestamp='2018-09-09T08:45:00Z'>08:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
indeed but then you&#x27;d need interface elements to remove zombie DNPAs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536482700' id='629619'>
<a class='timestamp' href='#629619'><time timestamp='2018-09-09T08:45:00Z'>08:45</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
Yeah :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1536482760' id='629620'>
<a class='timestamp' href='#629620'><time timestamp='2018-09-09T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
If too many things want the data, not pruning at all might be favorable
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483000' id='629621'>
<a class='timestamp' href='#629621'><time timestamp='2018-09-09T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it might be more useful if there were just a way of setting it up so you won&#x27;t process blocks unless your lightning is running, or you&#x27;ve removed the binding.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483060' id='629622'>
<a class='timestamp' href='#629622'><time timestamp='2018-09-09T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
In either case though, if blocks are to be retained until the pruning command is given by another service, it seems useful to have bitcoin have an option to not download more than some MBs or GBs worth of blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483060' id='629623'>
<a class='timestamp' href='#629623'><time timestamp='2018-09-09T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
ahead 
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483180' id='629624'>
<a class='timestamp' href='#629624'><time timestamp='2018-09-09T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
gmaxwell: are we saying the same thing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483540' id='629625'>
<a class='timestamp' href='#629625'><time timestamp='2018-09-09T08:59:00Z'>08:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s not ideal, but nothing is even using the current functionality as far as I know, so I&#x27;m kind of reluctant to discuss adding even more
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483600' id='629626'>
<a class='timestamp' href='#629626'><time timestamp='2018-09-09T09:00:00Z'>09:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
once it works for the 1 bitcoind - 1 lightningd case, it&#x27;d be more fruitful to discuss extending it to other cases
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483660' id='629627'>
<a class='timestamp' href='#629627'><time timestamp='2018-09-09T09:01:00Z'>09:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
instead of adding a lot of logic for something that no one will be using in practice
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483720' id='629628'>
<a class='timestamp' href='#629628'><time timestamp='2018-09-09T09:02:00Z'>09:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
FWIW &quot;DNPA&quot; could be implemented by an external process using the current RPC interface
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483720' id='629629'>
<a class='timestamp' href='#629629'><time timestamp='2018-09-09T09:02:00Z'>09:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
have it manage the list of requirements and manage manual pruning
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483780' id='629630'>
<a class='timestamp' href='#629630'><time timestamp='2018-09-09T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
accordingly
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483900' id='629631'>
<a class='timestamp' href='#629631'><time timestamp='2018-09-09T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
Yeah. DNPA is mostly the same as manual pruning it seems.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483900' id='629632'>
<a class='timestamp' href='#629632'><time timestamp='2018-09-09T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
And that makes sense about not adding complexity.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483900' id='629633'>
<a class='timestamp' href='#629633'><time timestamp='2018-09-09T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
Maybe it would be simple to add a DoNotValidateBeyond ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1536483960' id='629634'>
<a class='timestamp' href='#629634'><time timestamp='2018-09-09T09:06:00Z'>09:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
what I mean is that manual pruning provides the required low-level interface, DNPA would be one strategy to manage it at a higher level with multiple data consumers, but likely not the only way (at some point you might want to kill off consumers if they&#x27;re too slow, for example, depending on disk space etc)
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484080' id='629635'>
<a class='timestamp' href='#629635'><time timestamp='2018-09-09T09:08:00Z'>09:08</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
I understood as such ^^ even if my reply suggested otherwise :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484080' id='629636'>
<a class='timestamp' href='#629636'><time timestamp='2018-09-09T09:08:00Z'>09:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
something like that, though validation is not the problem in this case, block download is - you&#x27;d want to tell it to pause downloading new blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484080' id='629637'>
<a class='timestamp' href='#629637'><time timestamp='2018-09-09T09:08:00Z'>09:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I think there&#x27;s a command that more or less does that, pause networking, but might be GUI-only I don&#x27;t remember exactly
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484200' id='629638'>
<a class='timestamp' href='#629638'><time timestamp='2018-09-09T09:10:00Z'>09:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
&quot;setnetworkactive&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484320' id='629639'>
<a class='timestamp' href='#629639'><time timestamp='2018-09-09T09:12:00Z'>09:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it can continue validating the blocks it already has, that won&#x27;t fill up disk space
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484380' id='629640'>
<a class='timestamp' href='#629640'><time timestamp='2018-09-09T09:13:00Z'>09:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
with manual pruning, it&#x27;s not the validation that triggers pruning anyhow
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484500' id='629641'>
<a class='timestamp' href='#629641'><time timestamp='2018-09-09T09:15:00Z'>09:15</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
hmmm, but block are not downloaded sequentially anymore, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484560' id='629642'>
<a class='timestamp' href='#629642'><time timestamp='2018-09-09T09:16:00Z'>09:16</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
or non-sequentially within a sliding window?
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484560' id='629643'>
<a class='timestamp' href='#629643'><time timestamp='2018-09-09T09:16:00Z'>09:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I don&#x27;t see how that is relevant to this, stopping block download is stopping block download, whether they&#x27;re downloaded sequentially or not, if you want it to stop filling up disk you want to pause block download
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484620' id='629644'>
<a class='timestamp' href='#629644'><time timestamp='2018-09-09T09:17:00Z'>09:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the blocks it downloads can be non-sequential in a consensus sense, but on disk, they&#x27;re all simply to the block files in a first come first serve basis
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484620' id='629645'>
<a class='timestamp' href='#629645'><time timestamp='2018-09-09T09:17:00Z'>09:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
+appended
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484740' id='629646'>
<a class='timestamp' href='#629646'><time timestamp='2018-09-09T09:19:00Z'>09:19</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
I was thinking it wouldn&#x27;t be as helpful to have downloaded and storing a bunch of blocks, and yet be missing an earlier one, at the point networking was shut off
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484740' id='629647'>
<a class='timestamp' href='#629647'><time timestamp='2018-09-09T09:19:00Z'>09:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
why not?
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484800' id='629648'>
<a class='timestamp' href='#629648'><time timestamp='2018-09-09T09:20:00Z'>09:20</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
validation couldn&#x27;t proceed 
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484800' id='629649'>
<a class='timestamp' href='#629649'><time timestamp='2018-09-09T09:20:00Z'>09:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that stops filling the disk; once it&#x27;s turned on again, it will download the rest and connect them
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484800' id='629650'>
<a class='timestamp' href='#629650'><time timestamp='2018-09-09T09:20:00Z'>09:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
of course validation cannot proceed
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484800' id='629651'>
<a class='timestamp' href='#629651'><time timestamp='2018-09-09T09:20:00Z'>09:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
you&#x27;re essentially shutting down your node without really shutting it down
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484800' id='629652'>
<a class='timestamp' href='#629652'><time timestamp='2018-09-09T09:20:00Z'>09:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so it will respond to RPC queries to get the blocks and other data already there 
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484860' id='629653'>
<a class='timestamp' href='#629653'><time timestamp='2018-09-09T09:21:00Z'>09:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and to pruning commands
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484860' id='629654'>
<a class='timestamp' href='#629654'><time timestamp='2018-09-09T09:21:00Z'>09:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
once the clients have caught up, and a pruning command has been issues, the networking can be waken up again, but maybe I&#x27;m missing something I don&#x27;t know...
<br>
</div>

<div class='talk op-msg' data-timestamp='1536484920' id='629655'>
<a class='timestamp' href='#629655'><time timestamp='2018-09-09T09:22:00Z'>09:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and validation will continue as far as it can with the blocks that it had at the time of network shutdown, not further
<br>
</div>

<div class='talk op-msg' data-timestamp='1536485040' id='629656'>
<a class='timestamp' href='#629656'><time timestamp='2018-09-09T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
I need to think about it more (not from the lightning perspective ... I am no lighting expert). What you are describing might be totally workable. I was just thinking if blocks are not downloaded sequentially, and networking was turned off, there will be storage being taken up with blocks that can&#x27;t be validated due to gaps. I wasn&#x27;t thinking practically so much. Just in theory, it would be nice to only be storing 
<br>
</div>

<div class='talk op-msg' data-timestamp='1536485040' id='629657'>
<a class='timestamp' href='#629657'><time timestamp='2018-09-09T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
what could be validated
<br>
</div>

<div class='talk op-msg' data-timestamp='1536485100' id='629658'>
<a class='timestamp' href='#629658'><time timestamp='2018-09-09T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
Yes, those gaps would be filled as soon as networking was turned back on, and it would proceed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536485100' id='629659'>
<a class='timestamp' href='#629659'><time timestamp='2018-09-09T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes I think it makes sense to get a clear idea of what you practically need, otherwise you&#x27;ll by definition drag unrelated concerns into it
<br>
</div>

<div class='talk op-msg' data-timestamp='1536485100' id='629660'>
<a class='timestamp' href='#629660'><time timestamp='2018-09-09T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
exactly
<br>
</div>

<div class='talk op-msg' data-timestamp='1536485340' id='629661'>
<a class='timestamp' href='#629661'><time timestamp='2018-09-09T09:29:00Z'>09:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
from the perspective of the lightning clients they will see the block number stop increasing when validation is blocked, which will negatively affect their usefulness as lightning nodes, channel status updates will no longer be detected
<br>
</div>

<div class='talk op-msg' data-timestamp='1536485460' id='629662'>
<a class='timestamp' href='#629662'><time timestamp='2018-09-09T09:31:00Z'>09:31</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
the block download window is 1024, btw
<br>
</div>

<div class='talk op-msg' data-timestamp='1536485520' id='629663'>
<a class='timestamp' href='#629663'><time timestamp='2018-09-09T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
CubicEarth: no, above I meant a something much simpler. A setting in bitcoind where it just won&#x27;t run unless your lightning daemon is connected.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536485580' id='629664'>
<a class='timestamp' href='#629664'><time timestamp='2018-09-09T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but as wumpus was saying, they aren&#x27;t even bothering to use the existing functionality.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536485820' id='629665'>
<a class='timestamp' href='#629665'><time timestamp='2018-09-09T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
those lazy lighting devs!
<br>
</div>

<div class='talk op-msg' data-timestamp='1536485940' id='629666'>
<a class='timestamp' href='#629666'><time timestamp='2018-09-09T09:39:00Z'>09:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
more like they only recently graduated to not requiring -txindex...
<br>
</div>

<div class='talk op-msg' data-timestamp='1536486060' id='629667'>
<a class='timestamp' href='#629667'><time timestamp='2018-09-09T09:41:00Z'>09:41</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
I have a question about this: <a href="https://github.com/bitcoin/bitcoin/blob/master/src/secp256k1/src/scalar_8x32_impl.h#L78" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/secp256k1/src/scalar_8x32_impl.h#L78</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1536486120' id='629668'>
<a class='timestamp' href='#629668'><time timestamp='2018-09-09T09:42:00Z'>09:42</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
if no becomes true in line 78 to 81, yes must be false
<br>
</div>

<div class='talk op-msg' data-timestamp='1536486120' id='629669'>
<a class='timestamp' href='#629669'><time timestamp='2018-09-09T09:42:00Z'>09:42</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
why don&#x27;t it return the result earlier?
<br>
</div>

<div class='talk op-msg' data-timestamp='1536486240' id='629670'>
<a class='timestamp' href='#629670'><time timestamp='2018-09-09T09:44:00Z'>09:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Because there is no need to, it might well even be slower to do so.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536486420' id='629671'>
<a class='timestamp' href='#629671'><time timestamp='2018-09-09T09:47:00Z'>09:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it would also make the function non-constant-time if it terminates early.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536486420' id='629672'>
<a class='timestamp' href='#629672'><time timestamp='2018-09-09T09:47:00Z'>09:47</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
oh, I think this is the real reason?
<br>
</div>

<div class='talk op-msg' data-timestamp='1536486480' id='629673'>
<a class='timestamp' href='#629673'><time timestamp='2018-09-09T09:48:00Z'>09:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
if that were the only reason we&#x27;d have two versions.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536486540' id='629674'>
<a class='timestamp' href='#629674'><time timestamp='2018-09-09T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
But as I said, I wouldn&#x27;t be surprised if branching out earlier was slower.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536486720' id='629675'>
<a class='timestamp' href='#629675'><time timestamp='2018-09-09T09:52:00Z'>09:52</time></a>
&lt;<span class='nick nick-11'> jl2012</span>&gt;
thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487140' id='629676'>
<a class='timestamp' href='#629676'><time timestamp='2018-09-09T09:59:00Z'>09:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
CubicEarth: please, don&#x27;t call anyone lazy just because they don&#x27;t focus on your specific issue, everyone is more like overworked
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487200' id='629677'>
<a class='timestamp' href='#629677'><time timestamp='2018-09-09T10:00:00Z'>10:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
btw, wow, lightiningd&#x27;s API to get the last log messages for a specific node is very nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487260' id='629678'>
<a class='timestamp' href='#629678'><time timestamp='2018-09-09T10:01:00Z'>10:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
even works to get log messages at a lower logging level (say, debug) than are written to disk
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487320' id='629679'>
<a class='timestamp' href='#629679'><time timestamp='2018-09-09T10:02:00Z'>10:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I had aspirations of doing all our logging into a ringbuffer... with disk just taking a feed off it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487320' id='629680'>
<a class='timestamp' href='#629680'><time timestamp='2018-09-09T10:02:00Z'>10:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
which would allow us to do things like no logs normally, but dump the ring on crash.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487320' id='629681'>
<a class='timestamp' href='#629681'><time timestamp='2018-09-09T10:02:00Z'>10:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s what they do, I think, well I don&#x27;t know if it&#x27;s implemented as a ringbuffer but it acts that way on the outside
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487380' id='629682'>
<a class='timestamp' href='#629682'><time timestamp='2018-09-09T10:03:00Z'>10:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but yes that would be neat to have
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487440' id='629683'>
<a class='timestamp' href='#629683'><time timestamp='2018-09-09T10:04:00Z'>10:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
at least for log messages that don&#x27;t cost a lot of overhead to format unnecessarily
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487440' id='629684'>
<a class='timestamp' href='#629684'><time timestamp='2018-09-09T10:04:00Z'>10:04</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
wumpus: you are right. I meant it not seriously, but things don&#x27;t always come across as intended on irc. Nothing but respect for lightning devs from me! 
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487440' id='629685'>
<a class='timestamp' href='#629685'><time timestamp='2018-09-09T10:04:00Z'>10:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
CubicEarth: okay, sorry for misreading you then
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487500' id='629686'>
<a class='timestamp' href='#629686'><time timestamp='2018-09-09T10:05:00Z'>10:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: yea, I wondered about that but IIRC other than the format strings themselves there are only ~two places in the code where we totally skip some processing according the the log flags.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487500' id='629687'>
<a class='timestamp' href='#629687'><time timestamp='2018-09-09T10:05:00Z'>10:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and I seem to recall thinking that those could probably just go away.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487560' id='629688'>
<a class='timestamp' href='#629688'><time timestamp='2018-09-09T10:06:00Z'>10:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: agree, my concern i not relevant to many places and there we already skip the processin explicitly, so the ring-buffer thing would just work
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487560' id='629689'>
<a class='timestamp' href='#629689'><time timestamp='2018-09-09T10:06:00Z'>10:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(except for those messages, obviously)
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487620' id='629690'>
<a class='timestamp' href='#629690'><time timestamp='2018-09-09T10:07:00Z'>10:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think in general, for most users, the logging provides no real value, just wastes disk space even becomes an attack vector (e.g. via spam up the disk attacks). So as a result we&#x27;ve made default logging pretty conservative, but then useful stuff isn&#x27;t there when something goes wrong.  perhaps more interesting is how any of this would interact with concurrency.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487920' id='629691'>
<a class='timestamp' href='#629691'><time timestamp='2018-09-09T10:12:00Z'>10:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;d have to synchronize around writes to the ringbuffer, instead of around disk writes like now
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487980' id='629692'>
<a class='timestamp' href='#629692'><time timestamp='2018-09-09T10:13:00Z'>10:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there is a PR that moves part of logging to a thread I suddenly remember, #13200, should look into it in more detail
<br>
</div>

<div class='talk op-msg' data-timestamp='1536487980' id='629693'>
<a class='timestamp' href='#629693'><time timestamp='2018-09-09T10:13:00Z'>10:13</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13200" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13200</a> | Process logs in a separate thread by jamesob · Pull Request #13200 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1536488040' id='629694'>
<a class='timestamp' href='#629694'><time timestamp='2018-09-09T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
right but if the ringbuffer is getting more logs into it because it logs more things than disk, that might be annoying. Of course we could have a seperate buffer per thread(group) and only take locks for all of them to merge output for display.
<br>
</div>

<div class='talk op-msg' data-timestamp='1536488100' id='629695'>
<a class='timestamp' href='#629695'><time timestamp='2018-09-09T10:15:00Z'>10:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, fair enough
<br>
</div>

<div class='talk op-msg' data-timestamp='1536528480' id='629696'>
<a class='timestamp' href='#629696'><time timestamp='2018-09-09T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
it seems kind of awkward to me to use the new naming convention in the same (small) function as the old one
<br>
</div>

<div class='talk op-msg' data-timestamp='1536528960' id='629697'>
<a class='timestamp' href='#629697'><time timestamp='2018-09-09T21:36:00Z'>21:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: if it&#x27;s a small function, just change it all
<br>
</div>

<div class='talk op-msg' data-timestamp='1536529080' id='629698'>
<a class='timestamp' href='#629698'><time timestamp='2018-09-09T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, im looking at <a href="https://github.com/bitcoin/bitcoin/blob/718843aed5e60e42ebbe822457511b4fbbf318eb/src/net.cpp#L1225" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/718843aed5e60e42ebbe822457511b4fbbf318eb/src/net.cpp#L1225</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1536529140' id='629699'>
<a class='timestamp' href='#629699'><time timestamp='2018-09-09T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
which is mostly moveonly, changing it would change that
<br>
</div>

<div class='talk op-msg' data-timestamp='1536529140' id='629700'>
<a class='timestamp' href='#629700'><time timestamp='2018-09-09T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
but the nMicroTime variable is new
<br>
</div>

</div>
</section>

</body>
</html>
