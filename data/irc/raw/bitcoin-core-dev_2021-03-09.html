<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2021-03-09
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2021-03-09' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:16 UTC</pre>
<pre><a href="/bitcoin-core-dev/2021-02-09">&lt;</a><span class='header'>    March 2021    </span><a href="/bitcoin-core-dev/2021-04-09">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;    <a class="" href="/bitcoin-core-dev/2021-03-01">1</a>  <a class="" href="/bitcoin-core-dev/2021-03-02">2</a>  <a class="" href="/bitcoin-core-dev/2021-03-03">3</a>  <a class="" href="/bitcoin-core-dev/2021-03-04">4</a>  <a class="" href="/bitcoin-core-dev/2021-03-05">5</a>  <a class="" href="/bitcoin-core-dev/2021-03-06">6</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2021-03-07">7</a>  <a class="" href="/bitcoin-core-dev/2021-03-08">8</a>  <a class="current" href="/bitcoin-core-dev/2021-03-09">9</a> <a class="" href="/bitcoin-core-dev/2021-03-10">10</a> <a class="" href="/bitcoin-core-dev/2021-03-11">11</a> 12 13  &#x000A;14 15 <a class="" href="/bitcoin-core-dev/2021-03-16">16</a> <a class="" href="/bitcoin-core-dev/2021-03-17">17</a> <a class="" href="/bitcoin-core-dev/2021-03-18">18</a> <a class="" href="/bitcoin-core-dev/2021-03-19">19</a> <a class="" href="/bitcoin-core-dev/2021-03-20">20</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2021-03-21">21</a> <a class="" href="/bitcoin-core-dev/2021-03-22">22</a> <a class="" href="/bitcoin-core-dev/2021-03-23">23</a> <a class="" href="/bitcoin-core-dev/2021-03-24">24</a> <a class="" href="/bitcoin-core-dev/2021-03-25">25</a> <a class="" href="/bitcoin-core-dev/2021-03-26">26</a> <a class="" href="/bitcoin-core-dev/2021-03-27">27</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2021-03-28">28</a> <a class="" href="/bitcoin-core-dev/2021-03-29">29</a> <a class="" href="/bitcoin-core-dev/2021-03-30">30</a> <a class="" href="/bitcoin-core-dev/2021-03-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1615251660' id='357625'>
<a class='timestamp' href='#357625'><time timestamp='2021-03-09T01:01:00Z'>01:01</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
anyone have i2p nodes to connect to?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615251900' id='357626'>
<a class='timestamp' href='#357626'><time timestamp='2021-03-09T01:05:00Z'>01:05</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
sipa_: sed -i -e &#x27;s/AbstractThresholdConditionChecker/ThresholdConditionChecker/g&#x27; $(git grep -l AbstractThresholdConditionChecker src/)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615251900' id='357627'>
<a class='timestamp' href='#357627'><time timestamp='2021-03-09T01:05:00Z'>01:05</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
gah
<br>
</div>

<div class='talk op-msg' data-timestamp='1615251900' id='357628'>
<a class='timestamp' href='#357628'><time timestamp='2021-03-09T01:05:00Z'>01:05</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
sipa_: <a href="https://bpa.st/OXKQ" class="link" target="_blank">https://bpa.st/OXKQ</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615251900' id='357629'>
<a class='timestamp' href='#357629'><time timestamp='2021-03-09T01:05:00Z'>01:05</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
i... don&#x27;t think that works
<br>
</div>

<div class='talk op-msg' data-timestamp='1615251900' id='357630'>
<a class='timestamp' href='#357630'><time timestamp='2021-03-09T01:05:00Z'>01:05</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
ah, that&#x27;s better
<br>
</div>

<div class='talk op-msg' data-timestamp='1615251960' id='357631'>
<a class='timestamp' href='#357631'><time timestamp='2021-03-09T01:06:00Z'>01:06</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
i hereby offer hnbbyjpxx54623l555sta7pocy3se4sdgmuebi5k6reesz5rjp6q.b32.i2p (mainnet)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615256880' id='357632'>
<a class='timestamp' href='#357632'><time timestamp='2021-03-09T02:28:00Z'>02:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] amitiuttarwar opened pull request #21394: [doc] Improve comment about protected peers (master...2021-03-doc) <a href="https://github.com/bitcoin/bitcoin/pull/21394" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21394</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615257900' id='357633'>
<a class='timestamp' href='#357633'><time timestamp='2021-03-09T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
achow101: rebased the fuzzer to pull in most of the rename and the threshold part
<br>
</div>

<div class='talk op-msg' data-timestamp='1615257960' id='357634'>
<a class='timestamp' href='#357634'><time timestamp='2021-03-09T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
aj: right now I&#x27;m trying to parameterize the period in the same way
<br>
</div>

<div class='talk op-msg' data-timestamp='1615257960' id='357635'>
<a class='timestamp' href='#357635'><time timestamp='2021-03-09T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
achow101: i&#x27;m not sure that&#x27;s a good idea -- different periods make the Warning thing in validation less useful
<br>
</div>

<div class='talk op-msg' data-timestamp='1615258020' id='357636'>
<a class='timestamp' href='#357636'><time timestamp='2021-03-09T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
achow101: (for different thresholds, the RuleChangeActivatinThreshold just needs to be &lt;= to them)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615258020' id='357637'>
<a class='timestamp' href='#357637'><time timestamp='2021-03-09T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it&#x27;s already less useful because different thresholds
<br>
</div>

<div class='talk op-msg' data-timestamp='1615258020' id='357638'>
<a class='timestamp' href='#357638'><time timestamp='2021-03-09T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
mostly doing it for code organization reasons since a threshold doesn&#x27;t make sense without what the maximum is
<br>
</div>

<div class='talk op-msg' data-timestamp='1615258080' id='357639'>
<a class='timestamp' href='#357639'><time timestamp='2021-03-09T02:48:00Z'>02:48</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
not necessarily allowing for different thresholds
<br>
</div>

<div class='talk op-msg' data-timestamp='1615258140' id='357640'>
<a class='timestamp' href='#357640'><time timestamp='2021-03-09T02:49:00Z'>02:49</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
what I&#x27;m also working towards is having all the parameters set in a constructor for VBitsDeployment since I&#x27;m not convinced we don&#x27;t have an initialized variable in a (test) deployment somewhere
<br>
</div>

<div class='talk op-msg' data-timestamp='1615258140' id='357641'>
<a class='timestamp' href='#357641'><time timestamp='2021-03-09T02:49:00Z'>02:49</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
*uninitialized
<br>
</div>

<div class='talk op-msg' data-timestamp='1615258320' id='357642'>
<a class='timestamp' href='#357642'><time timestamp='2021-03-09T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1615258440' id='357643'>
<a class='timestamp' href='#357643'><time timestamp='2021-03-09T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
well, the easy solution is add a check in the unit tests that the deployment periods all match the params period, and the dep thresholds are all &gt;= the params rulechangethreshold
<br>
</div>

<div class='talk op-msg' data-timestamp='1615259400' id='357644'>
<a class='timestamp' href='#357644'><time timestamp='2021-03-09T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
is having a fixed rule change threshold necessary? It could just search for the minimum threshold of all current deployments
<br>
</div>

<div class='talk op-msg' data-timestamp='1615259700' id='357645'>
<a class='timestamp' href='#357645'><time timestamp='2021-03-09T03:15:00Z'>03:15</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
achow101: I&#x27;m guessing it is (or was) for the warnings
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260000' id='357646'>
<a class='timestamp' href='#357646'><time timestamp='2021-03-09T03:20:00Z'>03:20</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
achow101: yes -- you still want warnings even if there are no current deployments (you&#x27;re warning about things introduced in future releases of the code)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260060' id='357647'>
<a class='timestamp' href='#357647'><time timestamp='2021-03-09T03:21:00Z'>03:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
luke-jr: it was for all activations, in 21392 it is just for the warnings
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260060' id='357648'>
<a class='timestamp' href='#357648'><time timestamp='2021-03-09T03:21:00Z'>03:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
aj: we always have testdummy, so when there are no active deployments, it uses testdummy&#x27;s threshold
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260060' id='357649'>
<a class='timestamp' href='#357649'><time timestamp='2021-03-09T03:21:00Z'>03:21</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260360' id='357650'>
<a class='timestamp' href='#357650'><time timestamp='2021-03-09T03:26:00Z'>03:26</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
achow101: seems nuts to me, we want a global &quot;what&#x27;s the lowest threshold any future deployment might have&quot;, why wouldn&#x27;t we just have that as a field?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260360' id='357651'>
<a class='timestamp' href='#357651'><time timestamp='2021-03-09T03:26:00Z'>03:26</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
true. we should probably lower it farther though. to 75% maybe
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260420' id='357652'>
<a class='timestamp' href='#357652'><time timestamp='2021-03-09T03:27:00Z'>03:27</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
yep
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260480' id='357653'>
<a class='timestamp' href='#357653'><time timestamp='2021-03-09T03:28:00Z'>03:28</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I think it probably makes sense to do a lower threshold -- anything over 0 probably suggests some sort of proposed rule change?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260480' id='357654'>
<a class='timestamp' href='#357654'><time timestamp='2021-03-09T03:28:00Z'>03:28</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
We still warn any unknown vbit right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260540' id='357655'>
<a class='timestamp' href='#357655'><time timestamp='2021-03-09T03:29:00Z'>03:29</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
too low and we warn on all the asicboost crap
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260540' id='357656'>
<a class='timestamp' href='#357656'><time timestamp='2021-03-09T03:29:00Z'>03:29</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jeremyrubin: the warning is &quot;unknown new rules activated (versionbit X)&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260540' id='357657'>
<a class='timestamp' href='#357657'><time timestamp='2021-03-09T03:29:00Z'>03:29</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
achow101: <a href="https://github.com/bitcoin/bitcoin/pull/21380/commits/6bea865c8e2c09150b1ebf9abce5d9684f6441f9#diff-f0697aa70d82dc886876d2b62b6c4d1c27d584c2001e1bf605f74d28a06b4d8dR250-R253" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21380/commits/6bea865c8e2c09150b1ebf9abce5d9684f6441f9#diff-f0697aa70d82dc886876d2b62b6c4d1c27d584c2001e1bf605f74d28a06b4d8dR250-R253</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260600' id='357658'>
<a class='timestamp' href='#357658'><time timestamp='2021-03-09T03:30:00Z'>03:30</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I have a PR open to restore the unknown bit warnings in a asicboost-friendly way btw
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260660' id='357659'>
<a class='timestamp' href='#357659'><time timestamp='2021-03-09T03:31:00Z'>03:31</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
#15861
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260660' id='357660'>
<a class='timestamp' href='#357660'><time timestamp='2021-03-09T03:31:00Z'>03:31</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/15861" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/15861</a> | Restore warning for individual unknown version bits, as well as unknown version schemas by luke-jr · Pull Request #15861 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260720' id='357661'>
<a class='timestamp' href='#357661'><time timestamp='2021-03-09T03:32:00Z'>03:32</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
tbh I think that w.r.t. the threshold, the periods are probably of more concern?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615260720' id='357662'>
<a class='timestamp' href='#357662'><time timestamp='2021-03-09T03:32:00Z'>03:32</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
aj: oh nice. nit: name it m_threshold (something something style guide)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615262760' id='357663'>
<a class='timestamp' href='#357663'><time timestamp='2021-03-09T04:06:00Z'>04:06</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Do we nuke all the validation caches after a soft fork activates?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615262820' id='357664'>
<a class='timestamp' href='#357664'><time timestamp='2021-03-09T04:07:00Z'>04:07</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
E.g., the scriptcache?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615263000' id='357665'>
<a class='timestamp' href='#357665'><time timestamp='2021-03-09T04:10:00Z'>04:10</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Ah we commit to the validation caches for those
<br>
</div>

<div class='talk op-msg' data-timestamp='1615263000' id='357666'>
<a class='timestamp' href='#357666'><time timestamp='2021-03-09T04:10:00Z'>04:10</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
*validation flags
<br>
</div>

<div class='talk op-msg' data-timestamp='1615263540' id='357667'>
<a class='timestamp' href='#357667'><time timestamp='2021-03-09T04:19:00Z'>04:19</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
yup
<br>
</div>

<div class='talk op-msg' data-timestamp='1615272900' id='357668'>
<a class='timestamp' href='#357668'><time timestamp='2021-03-09T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/a8b0892b743b...6c156e49cb7a" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/a8b0892b743b...6c156e49cb7a</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615272900' id='357669'>
<a class='timestamp' href='#357669'><time timestamp='2021-03-09T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fa4e088 MarcoFalke: wallet: Mark replaced tx to not be in the mempool anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1615272900' id='357670'>
<a class='timestamp' href='#357670'><time timestamp='2021-03-09T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 6c156e4 MarcoFalke: Merge #18842: wallet: Mark replaced tx to not be in the mempool anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1615272900' id='357671'>
<a class='timestamp' href='#357671'><time timestamp='2021-03-09T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #18842: wallet: Mark replaced tx to not be in the mempool anymore (master...2004-walletBumpFeeReplacedTxNoMempool) <a href="https://github.com/bitcoin/bitcoin/pull/18842" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18842</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615275240' id='357672'>
<a class='timestamp' href='#357672'><time timestamp='2021-03-09T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake pushed 5 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/6c156e49cb7a...738fc4a59517" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/6c156e49cb7a...738fc4a59517</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615275240' id='357673'>
<a class='timestamp' href='#357673'><time timestamp='2021-03-09T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master bf24774 Hennadii Stepanov: build, qt: Refactor internal _BITCOIN_QT_CHECK_STATIC_PLUGINS macro
<br>
</div>

<div class='talk op-msg' data-timestamp='1615275240' id='357674'>
<a class='timestamp' href='#357674'><time timestamp='2021-03-09T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 6203457 Hennadii Stepanov: build, refactor: Rename internal _BITCOIN_QT_FIND_STATIC_PLUGINS macro
<br>
</div>

<div class='talk op-msg' data-timestamp='1615275240' id='357675'>
<a class='timestamp' href='#357675'><time timestamp='2021-03-09T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 57b6522 Hennadii Stepanov: build, qt: Make Qt static libs check regardless of plugindir
<br>
</div>

<div class='talk op-msg' data-timestamp='1615275300' id='357676'>
<a class='timestamp' href='#357676'><time timestamp='2021-03-09T07:35:00Z'>07:35</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake merged pull request #21363: build, qt: Improve Qt static plugins/libs check code (master...210304-qt) <a href="https://github.com/bitcoin/bitcoin/pull/21363" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21363</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615275780' id='357677'>
<a class='timestamp' href='#357677'><time timestamp='2021-03-09T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
oh no indeed: <a href="https://0bin.net/paste/CVaNbQ-c#jnhc392Y" class="link" target="_blank">https://0bin.net/paste/CVaNbQ-c#jnhc392Y</a>+u9CBfbaN+0GIHJ-vI/jLQPHJkMe/CfyAZQ
<br>
</div>

<div class='talk op-msg' data-timestamp='1615275780' id='357678'>
<a class='timestamp' href='#357678'><time timestamp='2021-03-09T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Apparently I&#x27;m no longer allowed to leave reviewss
<br>
</div>

<div class='talk op-msg' data-timestamp='1615276020' id='357679'>
<a class='timestamp' href='#357679'><time timestamp='2021-03-09T07:47:00Z'>07:47</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake pushed 3 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/738fc4a59517...461f0c781e5a" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/738fc4a59517...461f0c781e5a</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615276020' id='357680'>
<a class='timestamp' href='#357680'><time timestamp='2021-03-09T07:47:00Z'>07:47</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 5129b36 Hennadii Stepanov: build: Clean remnants of QTBUG-34748 fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1615276020' id='357681'>
<a class='timestamp' href='#357681'><time timestamp='2021-03-09T07:47:00Z'>07:47</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 173ef89 Hennadii Stepanov: build: Small libxcb.mk improvements
<br>
</div>

<div class='talk op-msg' data-timestamp='1615276020' id='357682'>
<a class='timestamp' href='#357682'><time timestamp='2021-03-09T07:47:00Z'>07:47</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 461f0c7 fanquake: Merge #21382: build: Clean remnants of QTBUG-34748 fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1615276080' id='357683'>
<a class='timestamp' href='#357683'><time timestamp='2021-03-09T07:48:00Z'>07:48</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake merged pull request #21382: build: Clean remnants of QTBUG-34748 fix (master...210307-libxcb) <a href="https://github.com/bitcoin/bitcoin/pull/21382" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21382</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615281120' id='357684'>
<a class='timestamp' href='#357684'><time timestamp='2021-03-09T09:12:00Z'>09:12</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
fanquake: &quot;your browser did something unexpected&quot; wtf!?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615281240' id='357685'>
<a class='timestamp' href='#357685'><time timestamp='2021-03-09T09:14:00Z'>09:14</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
btw I was just logged out of my github account and had to enter user/pass again. This has not happened for months, if not years. May be related.
<br>
</div>

<div class='talk op-msg' data-timestamp='1615282320' id='357686'>
<a class='timestamp' href='#357686'><time timestamp='2021-03-09T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
I was also logged out earlier today
<br>
</div>

<div class='talk op-msg' data-timestamp='1615282920' id='357687'>
<a class='timestamp' href='#357687'><time timestamp='2021-03-09T09:42:00Z'>09:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #21395: Net processing: Remove redundant CNode.address member (master...2021-03-remove-address) <a href="https://github.com/bitcoin/bitcoin/pull/21395" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21395</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615282980' id='357688'>
<a class='timestamp' href='#357688'><time timestamp='2021-03-09T09:43:00Z'>09:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/461f0c781e5a...e175ca9c6563" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/461f0c781e5a...e175ca9c6563</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615282980' id='357689'>
<a class='timestamp' href='#357689'><time timestamp='2021-03-09T09:43:00Z'>09:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fa476f1 MarcoFalke: Use C++11 member initializer in CNodeState
<br>
</div>

<div class='talk op-msg' data-timestamp='1615282980' id='357690'>
<a class='timestamp' href='#357690'><time timestamp='2021-03-09T09:43:00Z'>09:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master e175ca9 fanquake: Merge #21370: Use C++11 member initializer in CNodeState
<br>
</div>

<div class='talk op-msg' data-timestamp='1615282980' id='357691'>
<a class='timestamp' href='#357691'><time timestamp='2021-03-09T09:43:00Z'>09:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake merged pull request #21370: Use C++11 member initializer in CNodeState (master...2103-netCNodeStateRefactor) <a href="https://github.com/bitcoin/bitcoin/pull/21370" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21370</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615284540' id='357692'>
<a class='timestamp' href='#357692'><time timestamp='2021-03-09T10:09:00Z'>10:09</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
vasild: fanquake: there was some abundance-of-caution event that triggered a mass-expiry of all sessions: <a href="https://twitter.com/github/status/1369129888662306819?s=20" class="link" target="_blank">https://twitter.com/github/status/1369129888662306819?s=20</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615285980' id='357693'>
<a class='timestamp' href='#357693'><time timestamp='2021-03-09T10:33:00Z'>10:33</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
kallewoof: thanks for the link, &quot;extremely rare security issue affecting a very small number of users&quot; :-D
<br>
</div>

<div class='talk op-msg' data-timestamp='1615291200' id='357694'>
<a class='timestamp' href='#357694'><time timestamp='2021-03-09T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #21397: fuzz: Bump FuzzedDataProvider.h (master...2103-fuzzInclude) <a href="https://github.com/bitcoin/bitcoin/pull/21397" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21397</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615294440' id='357695'>
<a class='timestamp' href='#357695'><time timestamp='2021-03-09T12:54:00Z'>12:54</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/e175ca9c6563...ee0dc02c6f93" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/e175ca9c6563...ee0dc02c6f93</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615294440' id='357696'>
<a class='timestamp' href='#357696'><time timestamp='2021-03-09T12:54:00Z'>12:54</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fa7dc7a MarcoFalke: fuzz: Bump FuzzedDataProvider.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1615294440' id='357697'>
<a class='timestamp' href='#357697'><time timestamp='2021-03-09T12:54:00Z'>12:54</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ee0dc02 MarcoFalke: Merge #21397: fuzz: Bump FuzzedDataProvider.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1615294500' id='357698'>
<a class='timestamp' href='#357698'><time timestamp='2021-03-09T12:55:00Z'>12:55</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #21397: fuzz: Bump FuzzedDataProvider.h (master...2103-fuzzInclude) <a href="https://github.com/bitcoin/bitcoin/pull/21397" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21397</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615298100' id='357699'>
<a class='timestamp' href='#357699'><time timestamp='2021-03-09T13:55:00Z'>13:55</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
jeremyrubin | Do we nuke all the validation caches after a soft fork activates? &lt;------- the scriptcache includes a hash of the consensus flags that a transaction&#x27;s scripts were validated with, so that when a softfork activates we just end up with cache misses, and not consensus failure
<br>
</div>

<div class='talk op-msg' data-timestamp='1615300140' id='357700'>
<a class='timestamp' href='#357700'><time timestamp='2021-03-09T14:29:00Z'>14:29</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
jeremyrubin: and for reference <a href="https://github.com/bitcoin/bitcoin/blob/ee0dc02c6f93de2a366bbff490eb4d37bca6a24f/src/validation.cpp#L982-L987" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/ee0dc02c6f93de2a366bbff490eb4d37bca6a24f/src/validation.cpp#L982-L987</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615304520' id='357701'>
<a class='timestamp' href='#357701'><time timestamp='2021-03-09T15:42:00Z'>15:42</time></a>
&lt;<span class='nick nick-7'> wumpus2</span>&gt;
re: the &quot;extreme rare github security issue&quot; you might want to check <a href="https://github.com/settings/security-log" class="link" target="_blank">https://github.com/settings/security-log</a> that nothing weird has been done with your account, it doesn&#x27;t show all events (like pushes) unfortunately
<br>
</div>

<div class='talk op-msg' data-timestamp='1615304820' id='357702'>
<a class='timestamp' href='#357702'><time timestamp='2021-03-09T15:47:00Z'>15:47</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
good idea. &quot;Logged in - Unknown location&quot;... goooood
<br>
</div>

<div class='talk op-msg' data-timestamp='1615307040' id='357703'>
<a class='timestamp' href='#357703'><time timestamp='2021-03-09T16:24:00Z'>16:24</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
#19160 is pretty mature but still needs more reviewers :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615307040' id='357704'>
<a class='timestamp' href='#357704'><time timestamp='2021-03-09T16:24:00Z'>16:24</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/19160" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/19160</a> | multiprocess: Add basic spawn and IPC support by ryanofsky · Pull Request #19160 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1615307280' id='357705'>
<a class='timestamp' href='#357705'><time timestamp='2021-03-09T16:28:00Z'>16:28</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
ariard: indeed. it&#x27;s on my list (sorry for the delay)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615307460' id='357706'>
<a class='timestamp' href='#357706'><time timestamp='2021-03-09T16:31:00Z'>16:31</time></a>
&lt;<span class='nick nick-7'> shefsam</span>&gt;
Where can I discuss a hacked Bitcoin Core Wallet? I recently opened my wallet after months if not years to find the last transaction - not mine and sweeping the entirety of my balance to an outside address I do not know.
<br>
</div>

<div class='talk op-msg' data-timestamp='1615307820' id='357707'>
<a class='timestamp' href='#357707'><time timestamp='2021-03-09T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
i also intend to look at the multiprocess stuff but haven&#x27;t got around to it yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1615312560' id='357708'>
<a class='timestamp' href='#357708'><time timestamp='2021-03-09T17:56:00Z'>17:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #21398: doc: Update fuzzing docs for afl-clang-lto (master...2103-docFuzzAflPlusPlus) <a href="https://github.com/bitcoin/bitcoin/pull/21398" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21398</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615314240' id='357709'>
<a class='timestamp' href='#357709'><time timestamp='2021-03-09T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
vasild: good find! <a href="https://github.com/bitcoin/bitcoin/issues/11537" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/11537</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615322820' id='357710'>
<a class='timestamp' href='#357710'><time timestamp='2021-03-09T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] luke-jr opened pull request #21399: Genericide BIP9 in variable/type names and comments (master...vbits_rename) <a href="https://github.com/bitcoin/bitcoin/pull/21399" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21399</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323120' id='357711'>
<a class='timestamp' href='#357711'><time timestamp='2021-03-09T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
Hi folks. We&#x27;ll start the p2p meeting in 10 minutes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323420' id='357712'>
<a class='timestamp' href='#357712'><time timestamp='2021-03-09T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
Feel free to update your priorities in <a href="https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-Current-Priorities" class="link" target="_blank">https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-Current-Priorities</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323600' id='357713'>
<a class='timestamp' href='#357713'><time timestamp='2021-03-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#startmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323600' id='357714'>
<a class='timestamp' href='#357714'><time timestamp='2021-03-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
Meeting started Tue Mar  9 21:00:11 2021 UTC.  The chair is jnewbery. Information about MeetBot at <a href="https://bitcoin.jonasschnelli.ch/ircmeetings" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/ircmeetings</a>.
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323600' id='357715'>
<a class='timestamp' href='#357715'><time timestamp='2021-03-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
Available commands: action commands idea info link nick
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323600' id='357716'>
<a class='timestamp' href='#357716'><time timestamp='2021-03-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#bitcoin-core-dev Meeting: achow101 aj amiti ariard bluematt cfields Chris_Stewart_5 digi_james dongcarl elichai2 emilengler fanquake fjahr gleb glozow gmaxwell gwillen hebasto instagibbs jamesob jb55 jeremyrubin jl2012 jnewbery jonasschnelli jonatack jtimon kallewoof kanzure kvaciral lightlike luke-jr maaku marcofalke meshcollider michagogo moneyball morcos nehan NicolasDorier paveljanik 
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323600' id='357717'>
<a class='timestamp' href='#357717'><time timestamp='2021-03-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
petertodd phantomcircuit promag provoostenator ryanofsky sdaftuar sipa vasild wumpus
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323600' id='357718'>
<a class='timestamp' href='#357718'><time timestamp='2021-03-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323600' id='357719'>
<a class='timestamp' href='#357719'><time timestamp='2021-03-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-14'> hebasto</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323600' id='357720'>
<a class='timestamp' href='#357720'><time timestamp='2021-03-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323600' id='357721'>
<a class='timestamp' href='#357721'><time timestamp='2021-03-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323600' id='357722'>
<a class='timestamp' href='#357722'><time timestamp='2021-03-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-16'> emzy</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323600' id='357723'>
<a class='timestamp' href='#357723'><time timestamp='2021-03-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323600' id='357724'>
<a class='timestamp' href='#357724'><time timestamp='2021-03-09T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-15'> ajonas</span>&gt;
hello
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323660' id='357725'>
<a class='timestamp' href='#357725'><time timestamp='2021-03-09T21:01:00Z'>21:01</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
topics are here: <a href="https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-IRC-meetings" class="link" target="_blank">https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-IRC-meetings</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323660' id='357726'>
<a class='timestamp' href='#357726'><time timestamp='2021-03-09T21:01:00Z'>21:01</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
contributors&#x27; current priorities are here: <a href="https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-Current-Priorities" class="link" target="_blank">https://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-Current-Priorities</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323660' id='357727'>
<a class='timestamp' href='#357727'><time timestamp='2021-03-09T21:01:00Z'>21:01</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
There&#x27;s one proposed topic this week: Erlay (gleb). Before we do that, does anyone have any other proposed topics or short updates?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323720' id='357728'>
<a class='timestamp' href='#357728'><time timestamp='2021-03-09T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
would be interested in an update on disabletx and the thread on -dev about it
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323720' id='357729'>
<a class='timestamp' href='#357729'><time timestamp='2021-03-09T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-15'> ajonas</span>&gt;
I have a something i put together addrman and eclipse attacks (not quite a full topic)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323720' id='357730'>
<a class='timestamp' href='#357730'><time timestamp='2021-03-09T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-8'> fjahr</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323720' id='357731'>
<a class='timestamp' href='#357731'><time timestamp='2021-03-09T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-15'> ajonas</span>&gt;
it should only take a couple of minutes
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323720' id='357732'>
<a class='timestamp' href='#357732'><time timestamp='2021-03-09T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
aj: yep, we can do that
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323780' id='357733'>
<a class='timestamp' href='#357733'><time timestamp='2021-03-09T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
ajonas: ok, if it&#x27;s quick let&#x27;s do that first
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323780' id='357734'>
<a class='timestamp' href='#357734'><time timestamp='2021-03-09T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#topic addrman and eclipse attacks (ajonas)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323780' id='357735'>
<a class='timestamp' href='#357735'><time timestamp='2021-03-09T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
topic: addrman and eclipse attacks (ajonas)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323780' id='357736'>
<a class='timestamp' href='#357736'><time timestamp='2021-03-09T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-15'> ajonas</span>&gt;
This is a doc I put on the wiki: <a href="https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Addrman-and-eclipse-attacks" class="link" target="_blank">https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Addrman-and-eclipse-attacks</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323780' id='357737'>
<a class='timestamp' href='#357737'><time timestamp='2021-03-09T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-15'> ajonas</span>&gt;
feedback would be appreciated
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323840' id='357738'>
<a class='timestamp' href='#357738'><time timestamp='2021-03-09T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-15'> ajonas</span>&gt;
Thank you to those that helped track down the details and reviewed
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323840' id='357739'>
<a class='timestamp' href='#357739'><time timestamp='2021-03-09T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-15'> ajonas</span>&gt;
fin
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323840' id='357740'>
<a class='timestamp' href='#357740'><time timestamp='2021-03-09T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
thanks ajonas!
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323840' id='357741'>
<a class='timestamp' href='#357741'><time timestamp='2021-03-09T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
any questions or should we move on to the next topic?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323840' id='357742'>
<a class='timestamp' href='#357742'><time timestamp='2021-03-09T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
ajonas: consider those papers <a href="https://www.comp.nus.edu.sg/~kangms/papers/erebus-attack.pdf" class="link" target="_blank">https://www.comp.nus.edu.sg/~kangms/papers/erebus-attack.pdf</a> and <a href="https://btc-hijack.ethz.ch/files/btc_hijack.pdf" class="link" target="_blank">https://btc-hijack.ethz.ch/files/btc_hijack.pdf</a> on infrastructure-level eclipse attacks against bitcoin nodes
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323900' id='357743'>
<a class='timestamp' href='#357743'><time timestamp='2021-03-09T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
pretty sure the former one is included
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323960' id='357744'>
<a class='timestamp' href='#357744'><time timestamp='2021-03-09T21:06:00Z'>21:06</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
right it mentipns asmap which is only one of the mitigation proposed in erebeus paper iirc
<br>
</div>

<div class='talk op-msg' data-timestamp='1615323960' id='357745'>
<a class='timestamp' href='#357745'><time timestamp='2021-03-09T21:06:00Z'>21:06</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
(but better to do feedback after meeting, let&#x27;s mov on)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324020' id='357746'>
<a class='timestamp' href='#357746'><time timestamp='2021-03-09T21:07:00Z'>21:07</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
next topic?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324020' id='357747'>
<a class='timestamp' href='#357747'><time timestamp='2021-03-09T21:07:00Z'>21:07</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#topic erlay (gleb)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324020' id='357748'>
<a class='timestamp' href='#357748'><time timestamp='2021-03-09T21:07:00Z'>21:07</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
topic: erlay (gleb)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324020' id='357749'>
<a class='timestamp' href='#357749'><time timestamp='2021-03-09T21:07:00Z'>21:07</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
Hi! Just a little update here. I was working on Erlay refactor in a separate branch, currently addressing great comments from jnewbery and ariard. Gonna finish that in a day or two.
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324080' id='357750'>
<a class='timestamp' href='#357750'><time timestamp='2021-03-09T21:08:00Z'>21:08</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
jnewbery: perhaps we&#x27;ll invite everyone to full review again, after you give a quick skim of the high-level encapsulation approach etc in couple days?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324080' id='357751'>
<a class='timestamp' href='#357751'><time timestamp='2021-03-09T21:08:00Z'>21:08</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
or i should just do it once im done, if you think it&#x27;s good enough?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324140' id='357752'>
<a class='timestamp' href='#357752'><time timestamp='2021-03-09T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
just trying to make review more focused and optimize efforts
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324140' id='357753'>
<a class='timestamp' href='#357753'><time timestamp='2021-03-09T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
HELLO
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324140' id='357754'>
<a class='timestamp' href='#357754'><time timestamp='2021-03-09T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
gleb: I&#x27;ve left my comments. I don&#x27;t think you need to wait for another round from me before opening a PR for the new branch.
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324200' id='357755'>
<a class='timestamp' href='#357755'><time timestamp='2021-03-09T21:10:00Z'>21:10</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
jnewbery, i&#x27;d like to talk about #21106 today as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324200' id='357756'>
<a class='timestamp' href='#357756'><time timestamp='2021-03-09T21:10:00Z'>21:10</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/21106" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/21106</a> | persist IBD latch across restarts by pstratem · Pull Request #21106 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324200' id='357757'>
<a class='timestamp' href='#357757'><time timestamp='2021-03-09T21:10:00Z'>21:10</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
jnewbery: alright, thank you. that&#x27;s the plan then
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324200' id='357758'>
<a class='timestamp' href='#357758'><time timestamp='2021-03-09T21:10:00Z'>21:10</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
im done :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324260' id='357759'>
<a class='timestamp' href='#357759'><time timestamp='2021-03-09T21:11:00Z'>21:11</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
phantomcircuit: sounds good. Thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324260' id='357760'>
<a class='timestamp' href='#357760'><time timestamp='2021-03-09T21:11:00Z'>21:11</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
any questions about erlay before the next topic?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324260' id='357761'>
<a class='timestamp' href='#357761'><time timestamp='2021-03-09T21:11:00Z'>21:11</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324320' id='357762'>
<a class='timestamp' href='#357762'><time timestamp='2021-03-09T21:12:00Z'>21:12</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#topic update on disabletx (aj)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324320' id='357763'>
<a class='timestamp' href='#357763'><time timestamp='2021-03-09T21:12:00Z'>21:12</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
topic: update on disabletx (aj)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324380' id='357764'>
<a class='timestamp' href='#357764'><time timestamp='2021-03-09T21:13:00Z'>21:13</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery&#x27;s post makes sense to me -- that we can use frelay and avoid needing disabletx; but i don&#x27;t understand ariard&#x27;s response; and see suhas has updated the pr some more
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324440' id='357765'>
<a class='timestamp' href='#357765'><time timestamp='2021-03-09T21:14:00Z'>21:14</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
+1
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324500' id='357766'>
<a class='timestamp' href='#357766'><time timestamp='2021-03-09T21:15:00Z'>21:15</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
aj: did you read the log from the general bitcoin core irc meeting last week? There was quite a lot of discussion about using a -blocksonly node and occasionally sending txs from it
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324560' id='357767'>
<a class='timestamp' href='#357767'><time timestamp='2021-03-09T21:16:00Z'>21:16</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: i did, but as i understand it we can cope with that via fRelay fine
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324620' id='357768'>
<a class='timestamp' href='#357768'><time timestamp='2021-03-09T21:17:00Z'>21:17</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I hadn&#x27;t thought about it any more since then, but I wasn&#x27;t sure if we could cope with that via fRelay
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324680' id='357769'>
<a class='timestamp' href='#357769'><time timestamp='2021-03-09T21:18:00Z'>21:18</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
aj: my point was bip37 original scope was unclear if it concerns only inv(tx) or any tx-related message, bip338 has the merit to clarify
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324680' id='357770'>
<a class='timestamp' href='#357770'><time timestamp='2021-03-09T21:18:00Z'>21:18</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
the scenario is that you have a border node, and then a core node that only connects to that border node, and is -blocksonly. You want to be able to send txs from the core node to the border node. If we disallowed tx relay based on fRelay=false, then that wouldn&#x27;t work(?)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324680' id='357771'>
<a class='timestamp' href='#357771'><time timestamp='2021-03-09T21:18:00Z'>21:18</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: hmm, i think what i specced out in <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-March/018526.html" class="link" target="_blank">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-March/018526.html</a> is self-consistent and works with -blocksonly sensibly, can&#x27;t guarantee it&#x27;s properly backwards compatible (didn&#x27;t look hard enough)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324740' id='357772'>
<a class='timestamp' href='#357772'><time timestamp='2021-03-09T21:19:00Z'>21:19</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jnewbery: it differentiates tx&#x27;s based on direction -- ie if i say fRelay=false, you won&#x27;t send txs to me, but i might send the to you
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324800' id='357773'>
<a class='timestamp' href='#357773'><time timestamp='2021-03-09T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
txRelay isn&#x27;t required for receiving txs?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324800' id='357774'>
<a class='timestamp' href='#357774'><time timestamp='2021-03-09T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
if that&#x27;s the case, then I think I agree with you, but need to think about it some more
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324800' id='357775'>
<a class='timestamp' href='#357775'><time timestamp='2021-03-09T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
txrelay isn&#x27;t required for receiving i think, just trequest.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324800' id='357776'>
<a class='timestamp' href='#357776'><time timestamp='2021-03-09T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
trequest.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324800' id='357777'>
<a class='timestamp' href='#357777'><time timestamp='2021-03-09T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
gah
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324800' id='357778'>
<a class='timestamp' href='#357778'><time timestamp='2021-03-09T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
txrequest.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324860' id='357779'>
<a class='timestamp' href='#357779'><time timestamp='2021-03-09T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
aj: yes, I think you&#x27;re right
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324860' id='357780'>
<a class='timestamp' href='#357780'><time timestamp='2021-03-09T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
some small changes are needed to support, but yeah, we don&#x27;t need the whole txrelay struct to receive  
<br>
</div>

<div class='talk op-msg' data-timestamp='1615324980' id='357781'>
<a class='timestamp' href='#357781'><time timestamp='2021-03-09T21:23:00Z'>21:23</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
ariard: i think bip 37 without bip 111 (the service bit) is pretty dead? bip 60 seems to match what i described above
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325040' id='357782'>
<a class='timestamp' href='#357782'><time timestamp='2021-03-09T21:24:00Z'>21:24</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
aj: I agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325040' id='357783'>
<a class='timestamp' href='#357783'><time timestamp='2021-03-09T21:24:00Z'>21:24</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
ariard: if you advertise the bloom service bit, then i think you just treat that as no possibility of being lightweight, and everything works fine; and obv if you don&#x27;t advertise the service bit, you already kill the connection if they try doing bloom stuff to you
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325100' id='357784'>
<a class='timestamp' href='#357784'><time timestamp='2021-03-09T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
(I&#x27;ve pinged sdaftuar, since he&#x27;s probably interested in this)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325100' id='357785'>
<a class='timestamp' href='#357785'><time timestamp='2021-03-09T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
hi, sorry i&#x27;m late to the discussion. i don&#x27;t understand why we&#x27;d go to these contortions to avoid a new p2p message, but if someone is interested in implementing this a different way, please feel free
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325160' id='357786'>
<a class='timestamp' href='#357786'><time timestamp='2021-03-09T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
sdaftuar: i think it should not end up that twisted fwiw
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325160' id='357787'>
<a class='timestamp' href='#357787'><time timestamp='2021-03-09T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
aj: bip 60 &quot;Whether the remote peer should announce relayed transactions or not&quot; is a bip-60 compliant client allows to send TX messages after receiving `fRelay=false`
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325160' id='357788'>
<a class='timestamp' href='#357788'><time timestamp='2021-03-09T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
ariard: i don&#x27;t follow what you said?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325220' id='357789'>
<a class='timestamp' href='#357789'><time timestamp='2021-03-09T21:27:00Z'>21:27</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sdaftuar: don&#x27;t we only have 8e28 possible p2p messages?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325280' id='357790'>
<a class='timestamp' href='#357790'><time timestamp='2021-03-09T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think fewer p2p messages with meanings that differ slightly across versions is slightly worse than separate ones with clear well defined meaning :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325280' id='357791'>
<a class='timestamp' href='#357791'><time timestamp='2021-03-09T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
ariard: I run a -blocksonly node. You run a bip60 compliant node. I tell you fRelay=false. You don&#x27;t send me any txes. You told me fRelay=true. Therefore I can send you a tx, without violating bip60.
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325400' id='357792'>
<a class='timestamp' href='#357792'><time timestamp='2021-03-09T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
aj: that&#x27;s my point the &quot;You don&#x27;t send me any txes&quot; isn&#x27;t clearly documented in the bip, a naive implementation of bip 60 could try to send raw, unannounced TX messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325460' id='357793'>
<a class='timestamp' href='#357793'><time timestamp='2021-03-09T21:31:00Z'>21:31</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
and don&#x27;t understand why the connection is severed
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325520' id='357794'>
<a class='timestamp' href='#357794'><time timestamp='2021-03-09T21:32:00Z'>21:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you&#x27;re going by reading the spec by the letter... what does bip60&quot;s fRelay flag even mean for a client that chooses not.to implement bip37?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325520' id='357795'>
<a class='timestamp' href='#357795'><time timestamp='2021-03-09T21:32:00Z'>21:32</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
I&#x27;d like explicit p2p messages with clear meanings, but what I don&#x27;t like about the current disabletx proposal is the implicit disabling of addrs. I understand the hesitation to want to have a better understanding of addr relay before implementing a new protocol message, but I think that having disabletx implicitly disable addrs would make it harder for us to have clear, explicit messages about relay in the 
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325520' id='357796'>
<a class='timestamp' href='#357796'><time timestamp='2021-03-09T21:32:00Z'>21:32</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
long-term. so that makes me more inclined to use what we have, since it suffices
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325520' id='357797'>
<a class='timestamp' href='#357797'><time timestamp='2021-03-09T21:32:00Z'>21:32</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
ariard: it&#x27;s always the sender&#x27;s choice to not send a tx?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325580' id='357798'>
<a class='timestamp' href='#357798'><time timestamp='2021-03-09T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
aj: right but imo current bip60 semantic isn&#x27;t clear with what the sender is allowed to do
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325640' id='357799'>
<a class='timestamp' href='#357799'><time timestamp='2021-03-09T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
aj: i think ariard is trying to point out that bip37/bip60 only talk about <b>*announcing*</b> transactions, not sending (possibly unannounced) transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325700' id='357800'>
<a class='timestamp' href='#357800'><time timestamp='2021-03-09T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
amiti: i think that&#x27;s fair... i also don&#x27;t really know what the issue would be with a sendaddrtypes message with a bitvector of bip155 network types for example (apart from not wanting to deal with that too right now)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325700' id='357801'>
<a class='timestamp' href='#357801'><time timestamp='2021-03-09T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
sipa: ie, if I say fRelay=false, ariard shouldn&#x27;t send me INVs but perhaps should reply to a GETDATA with a TX?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325760' id='357802'>
<a class='timestamp' href='#357802'><time timestamp='2021-03-09T21:36:00Z'>21:36</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
yes that&#x27;s it, and sending unannounced transactions is tolerated behavior for now
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325760' id='357803'>
<a class='timestamp' href='#357803'><time timestamp='2021-03-09T21:36:00Z'>21:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
aj: maybe, or maybe he could still send you an unannounced transaction
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325820' id='357804'>
<a class='timestamp' href='#357804'><time timestamp='2021-03-09T21:37:00Z'>21:37</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
ariard: hmm. i wouldnt tolerate a TX message from you if i&#x27;d connected to you as a block-relay-only peer
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325940' id='357805'>
<a class='timestamp' href='#357805'><time timestamp='2021-03-09T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
ok, next topic?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325940' id='357806'>
<a class='timestamp' href='#357806'><time timestamp='2021-03-09T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
anyway, should we let phantomcircuit have the floor?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615325940' id='357807'>
<a class='timestamp' href='#357807'><time timestamp='2021-03-09T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
thanks aj
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326000' id='357808'>
<a class='timestamp' href='#357808'><time timestamp='2021-03-09T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#topic IBD latch across restarts (phantomcircuit)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326000' id='357809'>
<a class='timestamp' href='#357809'><time timestamp='2021-03-09T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
topic: IBD latch across restarts (phantomcircuit)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326000' id='357810'>
<a class='timestamp' href='#357810'><time timestamp='2021-03-09T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
aj: how I know I&#x27;m a block-relay-only peer ? e.g what the exact scope of &quot;block-relay-only&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326000' id='357811'>
<a class='timestamp' href='#357811'><time timestamp='2021-03-09T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
but yeah let&#x27;s move on
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326000' id='357812'>
<a class='timestamp' href='#357812'><time timestamp='2021-03-09T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
eh hem
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326060' id='357813'>
<a class='timestamp' href='#357813'><time timestamp='2021-03-09T21:41:00Z'>21:41</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
after discussing this with a number of people sipa and sdaftuar especially i think the better approach to a network event that latches all of the listening peers into ibd is simply to make the headers sync peer selection algorithm looser at intervals since we made progress on getting out of ibd
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326060' id='357814'>
<a class='timestamp' href='#357814'><time timestamp='2021-03-09T21:41:00Z'>21:41</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
that more directly addresses the issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326120' id='357815'>
<a class='timestamp' href='#357815'><time timestamp='2021-03-09T21:42:00Z'>21:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: did you see sdaftuar last&#x27;s response where he suspects the issue is block fetching, not header syncinf?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326120' id='357816'>
<a class='timestamp' href='#357816'><time timestamp='2021-03-09T21:42:00Z'>21:42</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
(can also serve headers when we&#x27;re past the chains minimum work regardless of ibd)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326180' id='357817'>
<a class='timestamp' href='#357817'><time timestamp='2021-03-09T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, yes, we discussed it here, he missed that compact blocks received will not trigger a getheaders when we&#x27;re in ibd
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326180' id='357818'>
<a class='timestamp' href='#357818'><time timestamp='2021-03-09T21:43:00Z'>21:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326240' id='357819'>
<a class='timestamp' href='#357819'><time timestamp='2021-03-09T21:44:00Z'>21:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so what precisely do you propose to address this?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326300' id='357820'>
<a class='timestamp' href='#357820'><time timestamp='2021-03-09T21:45:00Z'>21:45</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
if we haven&#x27;t made progress on headers sync in at least INTERVAL time simply request headers from all peers
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326300' id='357821'>
<a class='timestamp' href='#357821'><time timestamp='2021-03-09T21:45:00Z'>21:45</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
im sure there&#x27;s more nuisanced solutions that could be employed but that&#x27;s the most direct to prevent the issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326360' id='357822'>
<a class='timestamp' href='#357822'><time timestamp='2021-03-09T21:46:00Z'>21:46</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
is there a summary of the issue and this discussion anywhere? I find it difficult to follow without prior context
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326360' id='357823'>
<a class='timestamp' href='#357823'><time timestamp='2021-03-09T21:46:00Z'>21:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
#21106
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326360' id='357824'>
<a class='timestamp' href='#357824'><time timestamp='2021-03-09T21:46:00Z'>21:46</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/21106" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/21106</a> | persist IBD latch across restarts by pstratem · Pull Request #21106 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326360' id='357825'>
<a class='timestamp' href='#357825'><time timestamp='2021-03-09T21:46:00Z'>21:46</time></a>
&lt;<span class='nick nick-2'> gleb</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326420' id='357826'>
<a class='timestamp' href='#357826'><time timestamp='2021-03-09T21:47:00Z'>21:47</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
phantomcircuit: The scenario that you&#x27;re trying to address (all or most of the listening nodes are restarted) seems like it&#x27;d always need some kind of manual intervention.
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326420' id='357827'>
<a class='timestamp' href='#357827'><time timestamp='2021-03-09T21:47:00Z'>21:47</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
this was the recent dogecoin network failure more or less?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326420' id='357828'>
<a class='timestamp' href='#357828'><time timestamp='2021-03-09T21:47:00Z'>21:47</time></a>
&lt;<span class='nick nick-16'> emzy</span>&gt;
I think so.
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326480' id='357829'>
<a class='timestamp' href='#357829'><time timestamp='2021-03-09T21:48:00Z'>21:48</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
jnewbery, sure, lets say there&#x27;s a crash bug, which has existed in the past
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326540' id='357830'>
<a class='timestamp' href='#357830'><time timestamp='2021-03-09T21:49:00Z'>21:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
aj: yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326540' id='357831'>
<a class='timestamp' href='#357831'><time timestamp='2021-03-09T21:49:00Z'>21:49</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i&#x27;ll note that what i describe in the pr has happened on an altcoin derived from the bitcoin codebase and is relatively recently backported so it&#x27;s not ancient nonsense
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326600' id='357832'>
<a class='timestamp' href='#357832'><time timestamp='2021-03-09T21:50:00Z'>21:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
0.14 iirc
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326600' id='357833'>
<a class='timestamp' href='#357833'><time timestamp='2021-03-09T21:50:00Z'>21:50</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
phantomcircuit: (nuanced, not nuisanced :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326600' id='357834'>
<a class='timestamp' href='#357834'><time timestamp='2021-03-09T21:50:00Z'>21:50</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
header polling sure sounds better than perma-latching !IBD to me?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326660' id='357835'>
<a class='timestamp' href='#357835'><time timestamp='2021-03-09T21:51:00Z'>21:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: given that the dont-ask-headers-from-everyone is purely a bandwidth-preservation heuristic, i think it makes perfect sense to disable/weaken it in cases where we&#x27;re worrying about being unable to sync
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326720' id='357836'>
<a class='timestamp' href='#357836'><time timestamp='2021-03-09T21:52:00Z'>21:52</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
it&#x27;s really difficult to follow the PR to be honest. I
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326720' id='357837'>
<a class='timestamp' href='#357837'><time timestamp='2021-03-09T21:52:00Z'>21:52</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I&#x27;m not surprised that people are confused
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326720' id='357838'>
<a class='timestamp' href='#357838'><time timestamp='2021-03-09T21:52:00Z'>21:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ignore the code in the PR, it&#x27;s just the discussion there that matters
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326720' id='357839'>
<a class='timestamp' href='#357839'><time timestamp='2021-03-09T21:52:00Z'>21:52</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
there seem to have been several different approaches, and then comments left and later deleted
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326720' id='357840'>
<a class='timestamp' href='#357840'><time timestamp='2021-03-09T21:52:00Z'>21:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the code will be very different once it&#x27;s hammered out
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326780' id='357841'>
<a class='timestamp' href='#357841'><time timestamp='2021-03-09T21:53:00Z'>21:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit, sdaftuar: would it be possible to just post a summary/update of your understanding of what should be addressed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326840' id='357842'>
<a class='timestamp' href='#357842'><time timestamp='2021-03-09T21:54:00Z'>21:54</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
that seems like a sensible next step
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326900' id='357843'>
<a class='timestamp' href='#357843'><time timestamp='2021-03-09T21:55:00Z'>21:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
because it seems there has been some progress on IRC that&#x27;s not mentioned there
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326900' id='357844'>
<a class='timestamp' href='#357844'><time timestamp='2021-03-09T21:55:00Z'>21:55</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
aj, English is hard
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326960' id='357845'>
<a class='timestamp' href='#357845'><time timestamp='2021-03-09T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
phantomcircuit: nuance is often a nuisance, to be fair
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326960' id='357846'>
<a class='timestamp' href='#357846'><time timestamp='2021-03-09T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but in any case, if there&#x27;s reasonable evidence that all we need to do is making headers syncing less restrictive, i think weakening just that in case we haven&#x27;t found new headers in a while seems like a reasonable approach
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326960' id='357847'>
<a class='timestamp' href='#357847'><time timestamp='2021-03-09T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, it&#x27;s a little confusing, since there&#x27;s a bunch of things that are potentially separately contributing to the issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1615326960' id='357848'>
<a class='timestamp' href='#357848'><time timestamp='2021-03-09T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
aj: that&#x27;s a pretty unnuanced statement
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327020' id='357849'>
<a class='timestamp' href='#357849'><time timestamp='2021-03-09T21:57:00Z'>21:57</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
ok, anyone have any final updates before we close the meeting?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327020' id='357850'>
<a class='timestamp' href='#357850'><time timestamp='2021-03-09T21:57:00Z'>21:57</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, i think relaxing the headers sync peer selection combined with serving headers if we&#x27;re past minwork would get us a long way, but we ban peers for sending headers which are below out minwork and the minwork goes up overtime, so old peers that are restarted could get banned
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327140' id='357851'>
<a class='timestamp' href='#357851'><time timestamp='2021-03-09T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: but the banning is only for headers pre-last-checkpoint, which is ancient
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327140' id='357852'>
<a class='timestamp' href='#357852'><time timestamp='2021-03-09T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and if clients are introduce a new checkpoint that&#x27;d need huge scrutiny anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327200' id='357853'>
<a class='timestamp' href='#357853'><time timestamp='2021-03-09T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so maybe that&#x27;s not crazy to assume that any minpeerwork is going to be past any-reasonable-client&#x27;s checkpoints
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327200' id='357854'>
<a class='timestamp' href='#357854'><time timestamp='2021-03-09T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#endmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327200' id='357855'>
<a class='timestamp' href='#357855'><time timestamp='2021-03-09T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
topic: Bitcoin Core development discussion and commit log | Feel free to watch, but please take commentary and usage questions to #bitcoin | Channel logs: <a href="http://www.erisian.com.au/bitcoin-core-dev/" class="link" target="_blank">http://www.erisian.com.au/bitcoin-core-dev/</a>, <a href="http://gnusha.org/bitcoin-core-dev/" class="link" target="_blank">http://gnusha.org/bitcoin-core-dev/</a> | Meeting topics <a href="http://gnusha.org/bitcoin-core-dev/proposedmeetingtopics.txt" class="link" target="_blank">http://gnusha.org/bitcoin-core-dev/proposedmeetingtopics.txt</a> / <a href="http://gnusha.org/bitcoin-core-dev/proposedwalletmeetingtopics.txt" class="link" target="_blank">http://gnusha.org/bitcoin-core-dev/proposedwalletmeetingtopics.txt</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327200' id='357856'>
<a class='timestamp' href='#357856'><time timestamp='2021-03-09T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
Meeting ended Tue Mar  9 22:00:43 2021 UTC.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327200' id='357857'>
<a class='timestamp' href='#357857'><time timestamp='2021-03-09T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
Minutes:        <a href="https://bitcoin.jonasschnelli.ch/ircmeetings/logs/bitcoin-core-dev/2021/bitcoin-core-dev.2021-03-09-21.00.moin.txt" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/ircmeetings/logs/bitcoin-core-dev/2021/bitcoin-core-dev.2021-03-09-21.00.moin.txt</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327320' id='357858'>
<a class='timestamp' href='#357858'><time timestamp='2021-03-09T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto opened pull request #21400: build, qt: Fix regression introduced in #21363 (master...210309-regression) <a href="https://github.com/bitcoin/bitcoin/pull/21400" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21400</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327500' id='357859'>
<a class='timestamp' href='#357859'><time timestamp='2021-03-09T22:05:00Z'>22:05</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
ariard: you have no way of knowing you&#x27;re a block-relay-only peer, apart from me setting fRelay=false
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327620' id='357860'>
<a class='timestamp' href='#357860'><time timestamp='2021-03-09T22:07:00Z'>22:07</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
ariard: (which could also mean i&#x27;m running with -blocksonly=true and, if you sent NODE_BLOOM, that i want to do bloom stuf later)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615327680' id='357861'>
<a class='timestamp' href='#357861'><time timestamp='2021-03-09T22:08:00Z'>22:08</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, right so that&#x27;s less dangerous
<br>
</div>

<div class='talk op-msg' data-timestamp='1615328340' id='357862'>
<a class='timestamp' href='#357862'><time timestamp='2021-03-09T22:19:00Z'>22:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sorry i missed most of the meeting, had to step away
<br>
</div>

<div class='talk op-msg' data-timestamp='1615328340' id='357863'>
<a class='timestamp' href='#357863'><time timestamp='2021-03-09T22:19:00Z'>22:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
phantomcircuit: headers sync is insufficient to solve the problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1615328400' id='357864'>
<a class='timestamp' href='#357864'><time timestamp='2021-03-09T22:20:00Z'>22:20</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
the biggest issue is that we don&#x27;t call FindNextBlocksToDownload on inbound peers if we have outbound peers and we&#x27;re in IBD
<br>
</div>

<div class='talk op-msg' data-timestamp='1615328460' id='357865'>
<a class='timestamp' href='#357865'><time timestamp='2021-03-09T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if we relaxed that, i believe it would completely solve the problem. the issue you spotted with compact blocks shoulnd&#x27;t be relevant, because we don&#x27;t send a peer a block announcement via compact block unless they ask for it
<br>
</div>

<div class='talk op-msg' data-timestamp='1615328460' id='357866'>
<a class='timestamp' href='#357866'><time timestamp='2021-03-09T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
and we don&#x27;t turn on compact block announcements on any of our peers until we&#x27;re out of IBD
<br>
</div>

<div class='talk op-msg' data-timestamp='1615328520' id='357867'>
<a class='timestamp' href='#357867'><time timestamp='2021-03-09T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
that said, we could also loosen up headers sync with inbound peers anyway (in my model of how we get out of a situation like this, you have to wait for a block to be found; by syncing with inbound peers more aggressively than we do now you could shorten that window)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615328520' id='357868'>
<a class='timestamp' href='#357868'><time timestamp='2021-03-09T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but it&#x27;s not enough to just treat this as a headers sync issue -- we have to fix the block fetching
<br>
</div>

<div class='talk op-msg' data-timestamp='1615330260' id='357869'>
<a class='timestamp' href='#357869'><time timestamp='2021-03-09T22:51:00Z'>22:51</time></a>
&lt;<span class='nick nick-11'> lightlike</span>&gt;
aj: &quot;you have no way of knowing you&#x27;re a block-relay-only peer (...)&quot; - wouldn&#x27;t we still send FEEFILTER while running -blocksonly=true, but never on a block-relay-only connection (because m_tx_relay==null)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615331040' id='357870'>
<a class='timestamp' href='#357870'><time timestamp='2021-03-09T23:04:00Z'>23:04</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sdaftuar, that&#x27;s probably <b>*also*</b> something that&#x27;s wrong, but what i see is that you can&#x27;t get the headers first anyways
<br>
</div>

<div class='talk op-msg' data-timestamp='1615331760' id='357871'>
<a class='timestamp' href='#357871'><time timestamp='2021-03-09T23:16:00Z'>23:16</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
phantomcircuit: do you have a mechanism for how a compact block could be delivered when headers haven&#x27;t yet synced?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615331760' id='357872'>
<a class='timestamp' href='#357872'><time timestamp='2021-03-09T23:16:00Z'>23:16</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
(and while the node is in ibd)
<br>
</div>

<div class='talk op-msg' data-timestamp='1615331760' id='357873'>
<a class='timestamp' href='#357873'><time timestamp='2021-03-09T23:16:00Z'>23:16</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sdaftuar, i meant the headers sync is broken in the other way
<br>
</div>

<div class='talk op-msg' data-timestamp='1615331820' id='357874'>
<a class='timestamp' href='#357874'><time timestamp='2021-03-09T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
this is why it&#x27;s so confusing, there&#x27;s a bunch of different things which when in ibd might be the issue, but the only one i could observe is that no peer i could connect to and asked would give me headers
<br>
</div>

<div class='talk op-msg' data-timestamp='1615331940' id='357875'>
<a class='timestamp' href='#357875'><time timestamp='2021-03-09T23:19:00Z'>23:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
my understanding is that at some point after an inbound peer connects to you (while you&#x27;re in ibd), it should announce a new block
<br>
</div>

<div class='talk op-msg' data-timestamp='1615331940' id='357876'>
<a class='timestamp' href='#357876'><time timestamp='2021-03-09T23:19:00Z'>23:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
at that point, that announcement will have to be via INV, and it will trigger headers sync
<br>
</div>

<div class='talk op-msg' data-timestamp='1615332000' id='357877'>
<a class='timestamp' href='#357877'><time timestamp='2021-03-09T23:20:00Z'>23:20</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
however, due to the block fetching being broken as i described before, you&#x27;ll be in the stuck state you observed
<br>
</div>

<div class='talk op-msg' data-timestamp='1615332000' id='357878'>
<a class='timestamp' href='#357878'><time timestamp='2021-03-09T23:20:00Z'>23:20</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i can&#x27;t see a way for compact block relay to even start until you leave IBD so i think that&#x27;s a completely separate issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1615332060' id='357879'>
<a class='timestamp' href='#357879'><time timestamp='2021-03-09T23:21:00Z'>23:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
of course if no blocks are found after that peer connects, then indeed you would never even get the chain they have
<br>
</div>

<div class='talk op-msg' data-timestamp='1615332120' id='357880'>
<a class='timestamp' href='#357880'><time timestamp='2021-03-09T23:22:00Z'>23:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but i don&#x27;t think that&#x27;s the root issue here?  you&#x27;re concerned with inbound peers being your only bridge to the honest network, and making sure you eventually sync, i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1615332780' id='357881'>
<a class='timestamp' href='#357881'><time timestamp='2021-03-09T23:33:00Z'>23:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sdaftuar, right the gets to the other issue that i forgot about, we don&#x27;t announce our address while in ibd, so starting a new listening peer you won&#x27;t get inbound connections anyways
<br>
</div>

<div class='talk op-msg' data-timestamp='1615332780' id='357882'>
<a class='timestamp' href='#357882'><time timestamp='2021-03-09T23:33:00Z'>23:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i forgot about that one
<br>
</div>

<div class='talk op-msg' data-timestamp='1615332840' id='357883'>
<a class='timestamp' href='#357883'><time timestamp='2021-03-09T23:34:00Z'>23:34</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
don&#x27;t we immediately push our address to our outbound peers when we initiate a connection, right at the end of ver/verack?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615332900' id='357884'>
<a class='timestamp' href='#357884'><time timestamp='2021-03-09T23:35:00Z'>23:35</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
oh, that is gated on IBD, i see
<br>
</div>

<div class='talk op-msg' data-timestamp='1615332960' id='357885'>
<a class='timestamp' href='#357885'><time timestamp='2021-03-09T23:36:00Z'>23:36</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
still i don&#x27;t think that&#x27;s really a relevant concern here. we&#x27;re just trying to make block sync work from an inbound peer i think?
<br>
</div>

<div class='talk op-msg' data-timestamp='1615333080' id='357886'>
<a class='timestamp' href='#357886'><time timestamp='2021-03-09T23:38:00Z'>23:38</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
we could probably get rid of the addr relay gating stuff. i think the motivation is that we don&#x27;t want peers to connect to us if we can&#x27;t help them sync blocks, but given that good addr propagation takes much longer than block sync should, we should probably just announce our address always i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1615333140' id='357887'>
<a class='timestamp' href='#357887'><time timestamp='2021-03-09T23:39:00Z'>23:39</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think a long time ago a peer that never responded to headers and never provided blocks could dos a bitcoin core node, but now that we time out an outbound peer that doesn&#x27;t sync headers with us when we&#x27;re looking for headers, this shouldn&#x27;t be a big concern
<br>
</div>

<div class='talk op-msg' data-timestamp='1615333440' id='357888'>
<a class='timestamp' href='#357888'><time timestamp='2021-03-09T23:44:00Z'>23:44</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] achow101 opened pull request #21401: Refactor versionbits deployments to avoid potential uninitialized variables (master...encap-vbits-params) <a href="https://github.com/bitcoin/bitcoin/pull/21401" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21401</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1615333500' id='357889'>
<a class='timestamp' href='#357889'><time timestamp='2021-03-09T23:45:00Z'>23:45</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sdaftuar, possibly? im not sure if that was eclipse related maybe sipa knows
<br>
</div>

<div class='talk op-msg' data-timestamp='1615333680' id='357890'>
<a class='timestamp' href='#357890'><time timestamp='2021-03-09T23:48:00Z'>23:48</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sdaftuar, for sure you won&#x27;t get any inbound until you have finished ibd though
<br>
</div>

<div class='talk op-msg' data-timestamp='1615333860' id='357891'>
<a class='timestamp' href='#357891'><time timestamp='2021-03-09T23:51:00Z'>23:51</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
phantomcircuit: have i managed to convince you that block fetching is all that we need to fix?  if you have some scenario in mind where that would be insufficient, i&#x27;d like to try to understand what that is
<br>
</div>

</div>
</section>

</body>
</html>
