<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2019-04-13
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2019-04-13' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:20 UTC</pre>
<pre><a href="/bitcoin-core-dev/2019-03-13">&lt;</a><span class='header'>    April 2019    </span><a href="/bitcoin-core-dev/2019-05-13">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;    <a class="" href="/bitcoin-core-dev/2019-04-01">1</a>  <a class="" href="/bitcoin-core-dev/2019-04-02">2</a>  <a class="" href="/bitcoin-core-dev/2019-04-03">3</a>  <a class="" href="/bitcoin-core-dev/2019-04-04">4</a>  <a class="" href="/bitcoin-core-dev/2019-04-05">5</a>  <a class="" href="/bitcoin-core-dev/2019-04-06">6</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2019-04-07">7</a>  <a class="" href="/bitcoin-core-dev/2019-04-08">8</a>  <a class="" href="/bitcoin-core-dev/2019-04-09">9</a> <a class="" href="/bitcoin-core-dev/2019-04-10">10</a> <a class="" href="/bitcoin-core-dev/2019-04-11">11</a> <a class="" href="/bitcoin-core-dev/2019-04-12">12</a> <a class="current" href="/bitcoin-core-dev/2019-04-13">13</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-04-14">14</a> <a class="" href="/bitcoin-core-dev/2019-04-15">15</a> <a class="" href="/bitcoin-core-dev/2019-04-16">16</a> <a class="" href="/bitcoin-core-dev/2019-04-17">17</a> <a class="" href="/bitcoin-core-dev/2019-04-18">18</a> <a class="" href="/bitcoin-core-dev/2019-04-19">19</a> <a class="" href="/bitcoin-core-dev/2019-04-20">20</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-04-21">21</a> <a class="" href="/bitcoin-core-dev/2019-04-22">22</a> <a class="" href="/bitcoin-core-dev/2019-04-23">23</a> <a class="" href="/bitcoin-core-dev/2019-04-24">24</a> <a class="" href="/bitcoin-core-dev/2019-04-25">25</a> <a class="" href="/bitcoin-core-dev/2019-04-26">26</a> <a class="" href="/bitcoin-core-dev/2019-04-27">27</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-04-28">28</a> <a class="" href="/bitcoin-core-dev/2019-04-29">29</a> <a class="" href="/bitcoin-core-dev/2019-04-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1555116960' id='663285'>
<a class='timestamp' href='#663285'><time timestamp='2019-04-13T00:56:00Z'>00:56</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
jnewbery: haha, thanks! I really need to learn how to push my own PRs though. I realize it&#x27;s my own fault, I just don&#x27;t really know how to do it without sounding demanding.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555133940' id='663286'>
<a class='timestamp' href='#663286'><time timestamp='2019-04-13T05:39:00Z'>05:39</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Have thrown some numbers up into #15751, the speedup is so significant it might be worth putting into 0.18 given another rc.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555133940' id='663287'>
<a class='timestamp' href='#663287'><time timestamp='2019-04-13T05:39:00Z'>05:39</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/15751" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/15751</a> | Speed up deriveaddresses for large ranges by sipa · Pull Request #15751 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1555134000' id='663288'>
<a class='timestamp' href='#663288'><time timestamp='2019-04-13T05:40:00Z'>05:40</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
fanquake: it&#x27;s worth noting that this never comes up unless you do something stupid
<br>
</div>

<div class='talk op-msg' data-timestamp='1555134000' id='663289'>
<a class='timestamp' href='#663289'><time timestamp='2019-04-13T05:40:00Z'>05:40</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
I triggered it by putting in 10k for the lulz, basically
<br>
</div>

<div class='talk op-msg' data-timestamp='1555134000' id='663290'>
<a class='timestamp' href='#663290'><time timestamp='2019-04-13T05:40:00Z'>05:40</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
I&#x27;m not aware of anybody ever running into this in actual use
<br>
</div>

<div class='talk op-msg' data-timestamp='1555134060' id='663291'>
<a class='timestamp' href='#663291'><time timestamp='2019-04-13T05:41:00Z'>05:41</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
gwillen no generating 1&#x27;000&#x27;000s of addrs then o.0
<br>
</div>

<div class='talk op-msg' data-timestamp='1555134180' id='663292'>
<a class='timestamp' href='#663292'><time timestamp='2019-04-13T05:43:00Z'>05:43</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
oh, my bad, I actually ran into <u>_importmulti_</u> being slow with a huge range, and I am thinking of #15741, which is a different PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1555134180' id='663293'>
<a class='timestamp' href='#663293'><time timestamp='2019-04-13T05:43:00Z'>05:43</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/15741" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/15741</a> | Batch write imported stuff in importmulti by achow101 · Pull Request #15741 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1555134480' id='663294'>
<a class='timestamp' href='#663294'><time timestamp='2019-04-13T05:48:00Z'>05:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
10,000 isn&#x27;t absurd in any case... esp since it doesn&#x27;t auto expand as addresses are used.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555134660' id='663295'>
<a class='timestamp' href='#663295'><time timestamp='2019-04-13T05:51:00Z'>05:51</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
yeah that&#x27;s fair
<br>
</div>

<div class='talk op-msg' data-timestamp='1555134660' id='663296'>
<a class='timestamp' href='#663296'><time timestamp='2019-04-13T05:51:00Z'>05:51</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
that&#x27;s sort of why I hit 10k in the first place (the fact that importmulti will give me a static pool and that&#x27;s it)
<br>
</div>

<div class='talk op-msg' data-timestamp='1555134660' id='663297'>
<a class='timestamp' href='#663297'><time timestamp='2019-04-13T05:51:00Z'>05:51</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
of course real descriptor wallets will obviate all of this in the Glorius Future
<br>
</div>

<div class='talk op-msg' data-timestamp='1555138500' id='663298'>
<a class='timestamp' href='#663298'><time timestamp='2019-04-13T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
The node used to generate those numbers has finally finished shutting down after a 2hr 3m wait.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555139340' id='663299'>
<a class='timestamp' href='#663299'><time timestamp='2019-04-13T07:09:00Z'>07:09</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
heh!
<br>
</div>

<div class='talk op-msg' data-timestamp='1555154040' id='663300'>
<a class='timestamp' href='#663300'><time timestamp='2019-04-13T11:14:00Z'>11:14</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
achow101: can you provide insight into why the Updater and Signer roles in BIP 174 got combined into the single &#x27;walletprocesspsbt&#x27; call in Core?
<br>
</div>

<div class='talk op-msg' data-timestamp='1555154100' id='663301'>
<a class='timestamp' href='#663301'><time timestamp='2019-04-13T11:15:00Z'>11:15</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
it&#x27;s becoming slightly annoying for some blockstream (Elements) stuff I&#x27;m working on, and I am wondering why it wasn&#x27;t &quot;walletfillpsbt&quot; and &quot;walletsignpsbt&quot; separately
<br>
</div>

<div class='talk op-msg' data-timestamp='1555165020' id='663302'>
<a class='timestamp' href='#663302'><time timestamp='2019-04-13T14:17:00Z'>14:17</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
If I use sendtoaddress to attempt to pay a bech32 address with a witness version &gt;0, the RPC succeeds (surprising me).  However, the tx isn&#x27;t added to the mempool and debug.log says &quot;[default wallet] CommitTransaction(): Transaction cannot be broadcast immediately, scriptpubkey (code 64)&quot;.  If I try sending the same tx via sendrawtransaction, that fails with the same error code (which I expected).  Is it intentional that 
<br>
</div>

<div class='talk op-msg' data-timestamp='1555165020' id='663303'>
<a class='timestamp' href='#663303'><time timestamp='2019-04-13T14:17:00Z'>14:17</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
sendtoaddress returns success despite other commands failing and the transaction not making it to the local node&#x27;s mempool?  Tested on latest master.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168080' id='663304'>
<a class='timestamp' href='#663304'><time timestamp='2019-04-13T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
harding: that sounds right to me.  mempool policy rejecting such transactions is intentional; we don&#x27;t want to start accepting version1 transactions until a future softfork is designed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168140' id='663305'>
<a class='timestamp' href='#663305'><time timestamp='2019-04-13T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
because the first step to deploying a new softfork is to ensure that policy rules will protect (eg) miners running old software 
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168200' id='663306'>
<a class='timestamp' href='#663306'><time timestamp='2019-04-13T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
wallet support also makes sense, so that we&#x27;re not gated on the whole ecosystem upgrading to support sending to new address formats every time new features are deployed in new segwit versions
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168260' id='663307'>
<a class='timestamp' href='#663307'><time timestamp='2019-04-13T15:11:00Z'>15:11</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
Miners should never be running old software.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168320' id='663308'>
<a class='timestamp' href='#663308'><time timestamp='2019-04-13T15:12:00Z'>15:12</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
luke-jr: fine, users running old software
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168320' id='663309'>
<a class='timestamp' href='#663309'><time timestamp='2019-04-13T15:12:00Z'>15:12</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if coordination of software changes were free, this would be much easier
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168440' id='663310'>
<a class='timestamp' href='#663310'><time timestamp='2019-04-13T15:14:00Z'>15:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
mempool policies don&#x27;t strictly need adjustment for non-miners
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168440' id='663311'>
<a class='timestamp' href='#663311'><time timestamp='2019-04-13T15:14:00Z'>15:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I mean, it&#x27;s nice to have, but I don&#x27;t think it&#x27;s essential
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168620' id='663312'>
<a class='timestamp' href='#663312'><time timestamp='2019-04-13T15:17:00Z'>15:17</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
oh wait, my reasoning is for not being able to spend a v1 output, not for not being able to send to a v1 output
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168800' id='663313'>
<a class='timestamp' href='#663313'><time timestamp='2019-04-13T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
the reason not to allow sending to a v1 output is the same i guess as not being able to send to any other anyone can spend output
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168800' id='663314'>
<a class='timestamp' href='#663314'><time timestamp='2019-04-13T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
?
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168800' id='663315'>
<a class='timestamp' href='#663315'><time timestamp='2019-04-13T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
which i guess is just footgun protection
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168860' id='663316'>
<a class='timestamp' href='#663316'><time timestamp='2019-04-13T15:21:00Z'>15:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168920' id='663317'>
<a class='timestamp' href='#663317'><time timestamp='2019-04-13T15:22:00Z'>15:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not being able to spend a v1 output is a script execution rule, designed for upgrada safety
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168920' id='663318'>
<a class='timestamp' href='#663318'><time timestamp='2019-04-13T15:22:00Z'>15:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i guess there is a separate standardness rule about sending to v1
<br>
</div>

<div class='talk op-msg' data-timestamp='1555168920' id='663319'>
<a class='timestamp' href='#663319'><time timestamp='2019-04-13T15:22:00Z'>15:22</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
Yeah, that&#x27;s what I assumed.  And testmempoolaccept and sendrawtransaction do prevent me from sending to a witness v1 address; it&#x27;s just sendtoaddress (and, I&#x27;m guessing, sendmany) that succeed as calls unexpectedly.  They add the tx to the wallet, but it doesn&#x27;t get added to the mempool.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555169040' id='663320'>
<a class='timestamp' href='#663320'><time timestamp='2019-04-13T15:24:00Z'>15:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s a surprising inconsistency
<br>
</div>

<div class='talk op-msg' data-timestamp='1555169100' id='663321'>
<a class='timestamp' href='#663321'><time timestamp='2019-04-13T15:25:00Z'>15:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: i&#x27;m surprised you are saying it&#x27;s surprising -- i thought you wanted it to work that way for the reason i gave above?
<br>
</div>

<div class='talk op-msg' data-timestamp='1555169100' id='663322'>
<a class='timestamp' href='#663322'><time timestamp='2019-04-13T15:25:00Z'>15:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
perhaps i misunderstood the deployment goals
<br>
</div>

<div class='talk op-msg' data-timestamp='1555169460' id='663323'>
<a class='timestamp' href='#663323'><time timestamp='2019-04-13T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: well the not-sending-to-v1-mempool rule should be consistent with the wallet, as they have similar goals
<br>
</div>

<div class='talk op-msg' data-timestamp='1555169520' id='663324'>
<a class='timestamp' href='#663324'><time timestamp='2019-04-13T15:32:00Z'>15:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think?
<br>
</div>

<div class='talk op-msg' data-timestamp='1555169580' id='663325'>
<a class='timestamp' href='#663325'><time timestamp='2019-04-13T15:33:00Z'>15:33</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
Third-party software I&#x27;ve investigated (e.g. Electrum) that implement bech32 sending support currently require that the witness version be 0 so that they don&#x27;t create policy-invalid transactions.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555169580' id='663326'>
<a class='timestamp' href='#663326'><time timestamp='2019-04-13T15:33:00Z'>15:33</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: if you put aside the issue that we have no user-friendly way to hand a transaction to someone else except via the p2p network, then i think making the wallet refuse to send creates deployment issues in the future
<br>
</div>

<div class='talk op-msg' data-timestamp='1555169640' id='663327'>
<a class='timestamp' href='#663327'><time timestamp='2019-04-13T15:34:00Z'>15:34</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so that when v1 comes out down the road, users will have to p2sh-wrap it in order to use
<br>
</div>

<div class='talk op-msg' data-timestamp='1555169640' id='663328'>
<a class='timestamp' href='#663328'><time timestamp='2019-04-13T15:34:00Z'>15:34</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
which is sort of terrible?
<br>
</div>

<div class='talk op-msg' data-timestamp='1555169880' id='663329'>
<a class='timestamp' href='#663329'><time timestamp='2019-04-13T15:38:00Z'>15:38</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if other software projects are already disabling sending to v1 though, then i guess we&#x27;re in trouble on that front regardless of what we do
<br>
</div>

<div class='talk op-msg' data-timestamp='1555170060' id='663330'>
<a class='timestamp' href='#663330'><time timestamp='2019-04-13T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: i&#x27;m trying to balance my gut feeling &quot;permitting sendkng to v1 feels like such a footgun!&quot; with the fact that we can&#x27;t do this for p2sh embedded regardless
<br>
</div>

<div class='talk op-msg' data-timestamp='1555170060' id='663331'>
<a class='timestamp' href='#663331'><time timestamp='2019-04-13T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and there are plenty of other ways to construct an anyonecanspend address
<br>
</div>

<div class='talk op-msg' data-timestamp='1555170060' id='663332'>
<a class='timestamp' href='#663332'><time timestamp='2019-04-13T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
I take that back; I just re-checked the Electrum code.  It just contains a redundant check that the witness version is 0-16; I remembered that wrongly because it&#x27;s a redundancy over the reference library code.  Sorry.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555170120' id='663333'>
<a class='timestamp' href='#663333'><time timestamp='2019-04-13T15:42:00Z'>15:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
really the protection ought to be in code that creates addresses rather than the code sending to it
<br>
</div>

<div class='talk op-msg' data-timestamp='1555171080' id='663334'>
<a class='timestamp' href='#663334'><time timestamp='2019-04-13T15:58:00Z'>15:58</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gwillen: to reduce the need to use an excessive number of RPC calls just do to make a transaction. it needed to be less than or equal to the number of step the *rawtransaction RPCs did otherwise people probably wouldn&#x27;t use them
<br>
</div>

<div class='talk op-msg' data-timestamp='1555171140' id='663335'>
<a class='timestamp' href='#663335'><time timestamp='2019-04-13T15:59:00Z'>15:59</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
also the logic for updating and signing in core are almost exactly the same.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555171140' id='663336'>
<a class='timestamp' href='#663336'><time timestamp='2019-04-13T15:59:00Z'>15:59</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
you can have walletprocesspsbt not sign, there&#x27;s a parameter to set sign to false.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555172160' id='663337'>
<a class='timestamp' href='#663337'><time timestamp='2019-04-13T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wait, people can&#x27;t even <b>*send*</b> to unknown witness versions? that seems like a bug and defeats the whole point of Bech32&#x27;s extensibility in that regard, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1555172280' id='663338'>
<a class='timestamp' href='#663338'><time timestamp='2019-04-13T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sure, it&#x27;s anyonecanspend for now, but so is a version 0 witness transaction that&#x27;s simply an OP_TRUE!
<br>
</div>

<div class='talk op-msg' data-timestamp='1555172940' id='663339'>
<a class='timestamp' href='#663339'><time timestamp='2019-04-13T16:29:00Z'>16:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101, gwillen: in fact making it sign but not update would be kind of hard
<br>
</div>

<div class='talk op-msg' data-timestamp='1555173060' id='663340'>
<a class='timestamp' href='#663340'><time timestamp='2019-04-13T16:31:00Z'>16:31</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
luke-jr: yes, that&#x27;s the case.  <a href="https://github.com/bitcoin/bitcoin/blob/master/src/policy/policy.cpp#L62" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/policy/policy.cpp#L62</a>    I don&#x27;t see any comments about this on the original implementation, <a href="https://github.com/bitcoin/bitcoin/pull/11167/files#diff-d22bc3e058f8982972e2eb381a1df668R79" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11167/files#diff-d22bc3e058f8982972e2eb381a1df668R79</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1555173120' id='663341'>
<a class='timestamp' href='#663341'><time timestamp='2019-04-13T16:32:00Z'>16:32</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
luke-jr: it&#x27;s nonstandard though. we don&#x27;t allow sending to nonstandard because nonstandard isn&#x27;t relayed
<br>
</div>

<div class='talk op-msg' data-timestamp='1555173180' id='663342'>
<a class='timestamp' href='#663342'><time timestamp='2019-04-13T16:33:00Z'>16:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: right, but arguably sending to it should be allowed, and allowing it should help upgrading when v1 is actually introduced
<br>
</div>

<div class='talk op-msg' data-timestamp='1555173180' id='663343'>
<a class='timestamp' href='#663343'><time timestamp='2019-04-13T16:33:00Z'>16:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
spending definitely needs to be nonstandard, but that&#x27;s an independent check
<br>
</div>

<div class='talk op-msg' data-timestamp='1555174260' id='663344'>
<a class='timestamp' href='#663344'><time timestamp='2019-04-13T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
yeah, I can&#x27;t think of any reason not to allow it to be policy-accepted and even mined
<br>
</div>

<div class='talk op-msg' data-timestamp='1555174320' id='663345'>
<a class='timestamp' href='#663345'><time timestamp='2019-04-13T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
otoh, accepting it into the wallet and policy-rejecting from mempool doesn&#x27;t seem too terrible either
<br>
</div>

<div class='talk op-msg' data-timestamp='1555174320' id='663346'>
<a class='timestamp' href='#663346'><time timestamp='2019-04-13T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
it would just sit unconfirmed until some future point where a softfork enables it
<br>
</div>

<div class='talk op-msg' data-timestamp='1555174320' id='663347'>
<a class='timestamp' href='#663347'><time timestamp='2019-04-13T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
and IIRC the GUI displays a warning about it when you send
<br>
</div>

<div class='talk op-msg' data-timestamp='1555174800' id='663348'>
<a class='timestamp' href='#663348'><time timestamp='2019-04-13T17:00:00Z'>17:00</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
luke-jr: just tested, there&#x27;s no warning in the GUI.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555174920' id='663349'>
<a class='timestamp' href='#663349'><time timestamp='2019-04-13T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hmm, there used to be a generic one for mempool rejecting it
<br>
</div>

<div class='talk op-msg' data-timestamp='1555174920' id='663350'>
<a class='timestamp' href='#663350'><time timestamp='2019-04-13T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
luke-jr: just a debug.log entry.  2019-04-13T16:59:27Z [default wallet] CommitTransaction(): Transaction cannot be broadcast immediately, scriptpubkey (code 64)
<br>
</div>

<div class='talk op-msg' data-timestamp='1555175580' id='663351'>
<a class='timestamp' href='#663351'><time timestamp='2019-04-13T17:13:00Z'>17:13</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I remember asking for v1+ test in functional suite, guess the only checks that were a createraw/decoderaw round-trip
<br>
</div>

<div class='talk op-msg' data-timestamp='1555175640' id='663352'>
<a class='timestamp' href='#663352'><time timestamp='2019-04-13T17:14:00Z'>17:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
this level of hand-holding really belongs in GUI only and not in RPC
<br>
</div>

<div class='talk op-msg' data-timestamp='1555177500' id='663353'>
<a class='timestamp' href='#663353'><time timestamp='2019-04-13T17:45:00Z'>17:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: the first question is whether it shohld be relay policy
<br>
</div>

<div class='talk op-msg' data-timestamp='1555177560' id='663354'>
<a class='timestamp' href='#663354'><time timestamp='2019-04-13T17:46:00Z'>17:46</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
I think that, if you want wallets and services to unconditionally accept bech32 addresses even if they use future witness versions, they need to be accepted into the mempool and mined by default.  Otherwise some griefer is going to initiate 0.0001 withdrawals from various services, get their transactions stuck, and then they&#x27;re going to either refuse to send to bech32 addresses altogether or just &gt;0 witness versions.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555178040' id='663355'>
<a class='timestamp' href='#663355'><time timestamp='2019-04-13T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] crackercracked opened pull request #15812: not generate coverage report on test failures (master...fix-issue-15648-test-coverage-report) <a href="https://github.com/bitcoin/bitcoin/pull/15812" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15812</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1555181160' id='663356'>
<a class='timestamp' href='#663356'><time timestamp='2019-04-13T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
harding: to answer your original question (why does sendtoaddress return success, even if the tx is not added to the mempool?), that was changed here: #9302
<br>
</div>

<div class='talk op-msg' data-timestamp='1555181160' id='663357'>
<a class='timestamp' href='#663357'><time timestamp='2019-04-13T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9302" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9302</a> | Return txid even if ATMP fails for new transaction by sipa · Pull Request #9302 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1555181220' id='663358'>
<a class='timestamp' href='#663358'><time timestamp='2019-04-13T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
wallet RPCs that use CommitTransaction() will return true even if AcceptToMemoryPool() fails
<br>
</div>

<div class='talk op-msg' data-timestamp='1555181220' id='663359'>
<a class='timestamp' href='#663359'><time timestamp='2019-04-13T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
(that also includes GUI sends)
<br>
</div>

<div class='talk op-msg' data-timestamp='1555181280' id='663360'>
<a class='timestamp' href='#663360'><time timestamp='2019-04-13T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i guess we need to distinguish between permanent and temporary failure
<br>
</div>

<div class='talk op-msg' data-timestamp='1555181280' id='663361'>
<a class='timestamp' href='#663361'><time timestamp='2019-04-13T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
The PR doesn&#x27;t contain a description/motivation, but I believe the reason is that the transaction exists in the wallet, so the RPC should return the txid so the user can find it
<br>
</div>

<div class='talk op-msg' data-timestamp='1555181400' id='663362'>
<a class='timestamp' href='#663362'><time timestamp='2019-04-13T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
sipa: yes. It&#x27;d be nice if all RPCs returned an object so fields could be added later. In this case a &quot;accepted_to_mempool&quot; boolean would be helpful, for example
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182120' id='663363'>
<a class='timestamp' href='#663363'><time timestamp='2019-04-13T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
jnewbery: thanks.  From the discussion, it looks like the purpose was to allow the wallet to create chains of transactions beyond the default limits and then trickle those into the mempool later as their ancestors got confirmed.  The non-standard witness version error, OTOH, isn&#x27;t something that&#x27;s going to resolve itself, so I think the wallet should probably reject what the mempool rejects.  (Distinguishing between temp_fail and 
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182120' id='663364'>
<a class='timestamp' href='#663364'><time timestamp='2019-04-13T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
perm_fail, if not more specific classes, seems like a good idea to me.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182240' id='663365'>
<a class='timestamp' href='#663365'><time timestamp='2019-04-13T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
temp_fail might not be a good fit for future witness versions though
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182240' id='663366'>
<a class='timestamp' href='#663366'><time timestamp='2019-04-13T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
since it&#x27;s potentially a long term
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182240' id='663367'>
<a class='timestamp' href='#663367'><time timestamp='2019-04-13T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
condition
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182240' id='663368'>
<a class='timestamp' href='#663368'><time timestamp='2019-04-13T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
policy updates usually aren&#x27;t activated while running the same software, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182360' id='663369'>
<a class='timestamp' href='#663369'><time timestamp='2019-04-13T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I guess it&#x27;s a tristate too: &quot;used to be okay, no longer is&quot;, &quot;currently okay&quot;, &quot;currently not okay, but will be in the future&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182420' id='663370'>
<a class='timestamp' href='#663370'><time timestamp='2019-04-13T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
problem is here previously nothing non-sendable had an address to decode
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182540' id='663371'>
<a class='timestamp' href='#663371'><time timestamp='2019-04-13T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
luke-jr: the main thing being distinguished in this discussion is unconfirmed tx chains longer than 25 (or larger than 100,000 vbytes), which is a temporary issue, versus future segwit versions which is a long-term issue (months, years, maybe never).  You&#x27;re right that the second category isn&#x27;t a perm_fail, but a trying_again_later_wont_help_fail.
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182540' id='663372'>
<a class='timestamp' href='#663372'><time timestamp='2019-04-13T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
probably_wont_help*
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182540' id='663373'>
<a class='timestamp' href='#663373'><time timestamp='2019-04-13T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
it can also happen with a plain old CreateTransaction making a tx that isn&#x27;t relay-valid
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182540' id='663374'>
<a class='timestamp' href='#663374'><time timestamp='2019-04-13T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
trying_again_with_the_same_software_wont_helo
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182540' id='663375'>
<a class='timestamp' href='#663375'><time timestamp='2019-04-13T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ie bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182600' id='663376'>
<a class='timestamp' href='#663376'><time timestamp='2019-04-13T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
also invalid signature e.g. should fail that way
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182660' id='663377'>
<a class='timestamp' href='#663377'><time timestamp='2019-04-13T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
s/IsValidDestination/IsValidRelayDestination/ ? :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182900' id='663378'>
<a class='timestamp' href='#663378'><time timestamp='2019-04-13T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how do i make a proposed meeti g topic?
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182960' id='663379'>
<a class='timestamp' href='#663379'><time timestamp='2019-04-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
moneyball, ^ :D 
<br>
</div>

<div class='talk op-msg' data-timestamp='1555182960' id='663380'>
<a class='timestamp' href='#663380'><time timestamp='2019-04-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
sipa: say: moneyball: #proposedmeetingtopic &lt;topic&gt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1555183080' id='663381'>
<a class='timestamp' href='#663381'><time timestamp='2019-04-13T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
moneyball: #proposedmeetingtopic Should send-to-non-v0-witness be standard (spending such outputs is nonstandard independently)
<br>
</div>

<div class='talk op-msg' data-timestamp='1555183200' id='663382'>
<a class='timestamp' href='#663382'><time timestamp='2019-04-13T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
thats what I was thinking
<br>
</div>

<div class='talk op-msg' data-timestamp='1555183380' id='663383'>
<a class='timestamp' href='#663383'><time timestamp='2019-04-13T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
moneyball: #proposedmeetingtopic Bitcoin Core design documentation
<br>
</div>

<div class='talk op-msg' data-timestamp='1555184880' id='663384'>
<a class='timestamp' href='#663384'><time timestamp='2019-04-13T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-11'> moneyball</span>&gt;
updated! <a href="https://gist.github.com/moneyball/071d608fdae217c2a6d7c35955881d8a" class="link" target="_blank">https://gist.github.com/moneyball/071d608fdae217c2a6d7c35955881d8a</a>
<br>
</div>

</div>
</section>

</body>
</html>
