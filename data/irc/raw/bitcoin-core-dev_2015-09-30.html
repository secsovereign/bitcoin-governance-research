<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2015-09-30
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2015-09-30' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:28 UTC</pre>
<pre>&lt;<span class='header'>  September 2015  </span><a href="/bitcoin-core-dev/2015-10-30">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;       1  2  3  4  5  &#x000A; 6  7  8  9 10 11 12  &#x000A;13 14 15 16 17 18 19  &#x000A;20 21 22 23 24 25 26  &#x000A;27 28 29 <a class="current" href="/bitcoin-core-dev/2015-09-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1443617280' id='426301'>
<a class='timestamp' href='#426301'><time timestamp='2015-09-30T12:48:00Z'>12:48</time></a>
&lt;<span class='nick nick-12'> GitHub21</span>&gt;
[bitcoin] laanwj opened pull request #6741: doc: Change #bitcoin-dev IRC channel to #bitcoin-core-dev (master...2015_09_channel_split) <a href="https://github.com/bitcoin/bitcoin/pull/6741" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6741</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1443617820' id='426302'>
<a class='timestamp' href='#426302'><time timestamp='2015-09-30T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Time to sit and watch the talent roll in
<br>
</div>

<div class='talk op-msg' data-timestamp='1443626040' id='426303'>
<a class='timestamp' href='#426303'><time timestamp='2015-09-30T15:14:00Z'>15:14</time></a>
&lt;<span class='nick nick-15'> GitHub156</span>&gt;
[bitcoin] laanwj pushed 1 new commit to master: <a href="https://github.com/bitcoin/bitcoin/commit/1119cc3f5918575ca397518c9fd31a64704c7e4f" class="link" target="_blank">https://github.com/bitcoin/bitcoin/commit/1119cc3f5918575ca397518c9fd31a64704c7e4f</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1443626040' id='426304'>
<a class='timestamp' href='#426304'><time timestamp='2015-09-30T15:14:00Z'>15:14</time></a>
&lt;<span class='nick nick-15'> GitHub156</span>&gt;
bitcoin/master 1119cc3 Wladimir J. van der Laan: Merge pull request #6741...
<br>
</div>

<div class='talk op-msg' data-timestamp='1443626040' id='426305'>
<a class='timestamp' href='#426305'><time timestamp='2015-09-30T15:14:00Z'>15:14</time></a>
&lt;<span class='nick nick-14'> GitHub69</span>&gt;
[bitcoin] laanwj closed pull request #6741: doc: Change #bitcoin-dev IRC channel to #bitcoin-core-dev (master...2015_09_channel_split) <a href="https://github.com/bitcoin/bitcoin/pull/6741" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6741</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1443628800' id='426306'>
<a class='timestamp' href='#426306'><time timestamp='2015-09-30T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-14'> GitHub166</span>&gt;
[bitcoin] arnuschky opened pull request #6742: Changed logging to make -logtimestamps to work also for -printtoconsole (master...feature-logtimestamps-toconsole) <a href="https://github.com/bitcoin/bitcoin/pull/6742" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6742</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644340' id='426307'>
<a class='timestamp' href='#426307'><time timestamp='2015-09-30T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
sipa: libsecp questions.  How do I check that the signature is in canonical form (small s value)?  You&#x27;ve made signature struct &quot;opaque&quot;.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644340' id='426308'>
<a class='timestamp' href='#426308'><time timestamp='2015-09-30T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
Does verify do this?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644400' id='426309'>
<a class='timestamp' href='#426309'><time timestamp='2015-09-30T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rusty: no, there is no functionality for doing that
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644400' id='426310'>
<a class='timestamp' href='#426310'><time timestamp='2015-09-30T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we should add it, though - i&#x27;m thinking about changing the signature parsing code anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644400' id='426311'>
<a class='timestamp' href='#426311'><time timestamp='2015-09-30T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
sipa: yeah... that&#x27;s what I figured.  I hand around sigs in lightning as 64 byte raw vals, and I&#x27;m having to hack it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644460' id='426312'>
<a class='timestamp' href='#426312'><time timestamp='2015-09-30T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how do you convert them from/to 64 byte format?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644460' id='426313'>
<a class='timestamp' href='#426313'><time timestamp='2015-09-30T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
struct signature { u8 r[32];u8 s[32]; };
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644460' id='426314'>
<a class='timestamp' href='#426314'><time timestamp='2015-09-30T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
sipa: I stole the DER encode/decode from bitcoin.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644460' id='426315'>
<a class='timestamp' href='#426315'><time timestamp='2015-09-30T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
got it
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644520' id='426316'>
<a class='timestamp' href='#426316'><time timestamp='2015-09-30T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, it would not be hard to add another parse/serialize function
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644520' id='426317'>
<a class='timestamp' href='#426317'><time timestamp='2015-09-30T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that converts to a well-defined 64-byte format
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644520' id='426318'>
<a class='timestamp' href='#426318'><time timestamp='2015-09-30T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
sipa: yes, your comments even refer to it :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644520' id='426319'>
<a class='timestamp' href='#426319'><time timestamp='2015-09-30T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
DER is a needless complication, both for client and library
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644520' id='426320'>
<a class='timestamp' href='#426320'><time timestamp='2015-09-30T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well there is such a format for the recoverable signatures
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644580' id='426321'>
<a class='timestamp' href='#426321'><time timestamp='2015-09-30T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
&quot;use the secp256k1_ecdsa_signature_serialize_* and  secp256k1_ecdsa_signature_serialize_* functions.&quot; :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644580' id='426322'>
<a class='timestamp' href='#426322'><time timestamp='2015-09-30T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rusty: someone sent a PR today to fix that
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644880' id='426323'>
<a class='timestamp' href='#426323'><time timestamp='2015-09-30T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we already produce canonical form in all cases, it&#x27;s just there is no way to verify it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644880' id='426324'>
<a class='timestamp' href='#426324'><time timestamp='2015-09-30T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If _parse too verification flags, it could be asked to check for that trivally.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644880' id='426325'>
<a class='timestamp' href='#426325'><time timestamp='2015-09-30T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
sipa: secp256k1_ecdsa_signature_serialize()/_parse() then?  I&#x27;ll have to dig into your slightly weird scalar system to implement it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644940' id='426326'>
<a class='timestamp' href='#426326'><time timestamp='2015-09-30T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
though perhaps it would better be done with a seperate sig_has_low_s().
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644940' id='426327'>
<a class='timestamp' href='#426327'><time timestamp='2015-09-30T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rusty: give me 5 mins, i&#x27;ll implement it
<br>
</div>

<div class='talk op-msg' data-timestamp='1443644940' id='426328'>
<a class='timestamp' href='#426328'><time timestamp='2015-09-30T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
gmaxwell: yes, I have a couple of &quot;assert(sig_valid(s))&quot; scattered through my code.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645000' id='426329'>
<a class='timestamp' href='#426329'><time timestamp='2015-09-30T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t like adding dozens of flags
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645000' id='426330'>
<a class='timestamp' href='#426330'><time timestamp='2015-09-30T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
gmaxwell: (which is &quot;return true;&quot; for schnorr, and tests for top s bit for ecdh)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645000' id='426331'>
<a class='timestamp' href='#426331'><time timestamp='2015-09-30T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in fact, i prefer none...
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645000' id='426332'>
<a class='timestamp' href='#426332'><time timestamp='2015-09-30T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
gmaxwell: so in practice, a standalone check would fit me better.  I guess that&#x27;s a data point?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645000' id='426333'>
<a class='timestamp' href='#426333'><time timestamp='2015-09-30T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rusty: good. decided.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645000' id='426334'>
<a class='timestamp' href='#426334'><time timestamp='2015-09-30T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I sort of dread doing the testing if there are flags. :(  Also I think parsing for lows but sloppy DER doesn&#x27;t make logical sense.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645060' id='426335'>
<a class='timestamp' href='#426335'><time timestamp='2015-09-30T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think i have a nearly-complete BER parser
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645060' id='426336'>
<a class='timestamp' href='#426336'><time timestamp='2015-09-30T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s only twice as long as the current parse code
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645060' id='426337'>
<a class='timestamp' href='#426337'><time timestamp='2015-09-30T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: I am ... really not looking forward to writing tests for that. :( Also, how can it be BER, I assume it must length limit the outputs?
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645120' id='426338'>
<a class='timestamp' href='#426338'><time timestamp='2015-09-30T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: yes, up to a fixed limit
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645180' id='426339'>
<a class='timestamp' href='#426339'><time timestamp='2015-09-30T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Also, there exist no other nearly complete BER parsers, so I dunno how I can do a differential test against it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645180' id='426340'>
<a class='timestamp' href='#426340'><time timestamp='2015-09-30T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
sipa: I really want to be able to insist it&#x27;s normalized.  Actually, I want that for everything.  If someone slips something in which causes me to build an invalid tx, I&#x27;m hosed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645180' id='426341'>
<a class='timestamp' href='#426341'><time timestamp='2015-09-30T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
my design goal is: accept everything that is valid BER or accepted by openssl
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645180' id='426342'>
<a class='timestamp' href='#426342'><time timestamp='2015-09-30T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rusty: oh, absolutely... i don&#x27;t want to encourage BER as default
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645240' id='426343'>
<a class='timestamp' href='#426343'><time timestamp='2015-09-30T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rusty: there needs to be a strict DER parser one (which is much easier)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645240' id='426344'>
<a class='timestamp' href='#426344'><time timestamp='2015-09-30T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but for use in Bitcoin we can&#x27;t just only have a strict DER one
<br>
</div>

<div class='talk op-msg' data-timestamp='1443645240' id='426345'>
<a class='timestamp' href='#426345'><time timestamp='2015-09-30T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rusty: also, #secp256k1
<br>
</div>

<div class='talk op-msg' data-timestamp='1443651720' id='426346'>
<a class='timestamp' href='#426346'><time timestamp='2015-09-30T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
<a href="https://usercontent.irccloud-cdn.com/file/s0ybRJT5/IMG_2998.PNG" class="link" target="_blank">https://usercontent.irccloud-cdn.com/file/s0ybRJT5/IMG_2998.PNG</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1443651780' id='426347'>
<a class='timestamp' href='#426347'><time timestamp='2015-09-30T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
<a href="https://usercontent.irccloud-cdn.com/file/lhLarj9q/IMG_2999.PNG" class="link" target="_blank">https://usercontent.irccloud-cdn.com/file/lhLarj9q/IMG_2999.PNG</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1443651780' id='426348'>
<a class='timestamp' href='#426348'><time timestamp='2015-09-30T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
michagogo: it should definitely recompute things (either on the fly, or at startup and update)
<br>
</div>

<div class='talk op-msg' data-timestamp='1443651840' id='426349'>
<a class='timestamp' href='#426349'><time timestamp='2015-09-30T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s how the BIP34/66 implementation works as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1443652440' id='426350'>
<a class='timestamp' href='#426350'><time timestamp='2015-09-30T22:34:00Z'>22:34</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
michagogo: I&#x27;ve been considering two approaches...either save state or recompute. I think it&#x27;s inevitable we need to save some state at runtime (i.e. as part of the block index)...but we can recompute at startup
<br>
</div>

</div>
</section>

</body>
</html>
