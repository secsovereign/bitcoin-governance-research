<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-06-08
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-06-08' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:24 UTC</pre>
<pre><a href="/bitcoin-core-dev/2017-05-08">&lt;</a><span class='header'>    June 2017     </span><a href="/bitcoin-core-dev/2017-07-08">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;             <a class="" href="/bitcoin-core-dev/2017-06-01">1</a>  <a class="" href="/bitcoin-core-dev/2017-06-02">2</a>  <a class="" href="/bitcoin-core-dev/2017-06-03">3</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-06-04">4</a>  <a class="" href="/bitcoin-core-dev/2017-06-05">5</a>  <a class="" href="/bitcoin-core-dev/2017-06-06">6</a>  <a class="" href="/bitcoin-core-dev/2017-06-07">7</a>  <a class="current" href="/bitcoin-core-dev/2017-06-08">8</a>  <a class="" href="/bitcoin-core-dev/2017-06-09">9</a> <a class="" href="/bitcoin-core-dev/2017-06-10">10</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-06-11">11</a> <a class="" href="/bitcoin-core-dev/2017-06-12">12</a> <a class="" href="/bitcoin-core-dev/2017-06-13">13</a> <a class="" href="/bitcoin-core-dev/2017-06-14">14</a> <a class="" href="/bitcoin-core-dev/2017-06-15">15</a> <a class="" href="/bitcoin-core-dev/2017-06-16">16</a> <a class="" href="/bitcoin-core-dev/2017-06-17">17</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-06-18">18</a> <a class="" href="/bitcoin-core-dev/2017-06-19">19</a> <a class="" href="/bitcoin-core-dev/2017-06-20">20</a> <a class="" href="/bitcoin-core-dev/2017-06-21">21</a> <a class="" href="/bitcoin-core-dev/2017-06-22">22</a> <a class="" href="/bitcoin-core-dev/2017-06-23">23</a> <a class="" href="/bitcoin-core-dev/2017-06-24">24</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-06-25">25</a> <a class="" href="/bitcoin-core-dev/2017-06-26">26</a> <a class="" href="/bitcoin-core-dev/2017-06-27">27</a> <a class="" href="/bitcoin-core-dev/2017-06-28">28</a> <a class="" href="/bitcoin-core-dev/2017-06-29">29</a> <a class="" href="/bitcoin-core-dev/2017-06-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1496880840' id='549400'>
<a class='timestamp' href='#549400'><time timestamp='2017-06-08T00:14:00Z'>00:14</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
is there any particular reason to be gathering coverage data for leveldb?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496880840' id='549401'>
<a class='timestamp' href='#549401'><time timestamp='2017-06-08T00:14:00Z'>00:14</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
cfields_: ^^ (you added it 4 years ago)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496881080' id='549402'>
<a class='timestamp' href='#549402'><time timestamp='2017-06-08T00:18:00Z'>00:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: when reporting you can easily filter it out by passing through lcov -r
<br>
</div>

<div class='talk op-msg' data-timestamp='1496881080' id='549403'>
<a class='timestamp' href='#549403'><time timestamp='2017-06-08T00:18:00Z'>00:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think it might be of interest at some point to know figures for how much of leveldb that our tests cover.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496881140' id='549404'>
<a class='timestamp' href='#549404'><time timestamp='2017-06-08T00:19:00Z'>00:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
though kinda odd to do it by default
<br>
</div>

<div class='talk op-msg' data-timestamp='1496881140' id='549405'>
<a class='timestamp' href='#549405'><time timestamp='2017-06-08T00:19:00Z'>00:19</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
lcov -r is really slow, but I have a workaround for that :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496881260' id='549406'>
<a class='timestamp' href='#549406'><time timestamp='2017-06-08T00:21:00Z'>00:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I don&#x27;t think having it is necessary so we can just skip gathering data for it altogether
<br>
</div>

<div class='talk op-msg' data-timestamp='1496881920' id='549407'>
<a class='timestamp' href='#549407'><time timestamp='2017-06-08T00:32:00Z'>00:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
faster computer. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1496881920' id='549408'>
<a class='timestamp' href='#549408'><time timestamp='2017-06-08T00:32:00Z'>00:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the way the lcov stuff is setup in our build seems kinda convoluted to me, but I&#x27;m not maintaining it.  I normally just do it with CFLAGS/CCFLAGS overriding and buildings.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496882040' id='549409'>
<a class='timestamp' href='#549409'><time timestamp='2017-06-08T00:34:00Z'>00:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: achow101 reimplemented lcov -r in python, making it run 60x faster
<br>
</div>

<div class='talk op-msg' data-timestamp='1496882040' id='549410'>
<a class='timestamp' href='#549410'><time timestamp='2017-06-08T00:34:00Z'>00:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(20 minutes -&gt; 20 sec)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496882160' id='549411'>
<a class='timestamp' href='#549411'><time timestamp='2017-06-08T00:36:00Z'>00:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
lol     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496882400' id='549412'>
<a class='timestamp' href='#549412'><time timestamp='2017-06-08T00:40:00Z'>00:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jtimon closed pull request #9579: Net: Trivial-review: Make SendMessages easier to review (master...0.15-split-sendmessages) <a href="https://github.com/bitcoin/bitcoin/pull/9579" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9579</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496882520' id='549413'>
<a class='timestamp' href='#549413'><time timestamp='2017-06-08T00:42:00Z'>00:42</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
can <a href="https://travis-ci.org/bitcoin/bitcoin/jobs/239728492" class="link" target="_blank">https://travis-ci.org/bitcoin/bitcoin/jobs/239728492</a> be restarted ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496883780' id='549414'>
<a class='timestamp' href='#549414'><time timestamp='2017-06-08T01:03:00Z'>01:03</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] achow101 opened pull request #10552: [Test] Tests for zmqpubrawtx and zmqpubrawblock (master...zmq-raw-tests) <a href="https://github.com/bitcoin/bitcoin/pull/10552" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10552</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496892240' id='549415'>
<a class='timestamp' href='#549415'><time timestamp='2017-06-08T03:24:00Z'>03:24</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
bitcoind in -regtest activates all soft forks (+ segwit) and enforces all Policy flags after generating ~500 blocks right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496904360' id='549416'>
<a class='timestamp' href='#549416'><time timestamp='2017-06-08T06:46:00Z'>06:46</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake closed pull request #10477: Use C++ initializer to initialze map and implement map comparator as const (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/10477" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10477</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496905140' id='549417'>
<a class='timestamp' href='#549417'><time timestamp='2017-06-08T06:59:00Z'>06:59</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
fanquake: I think you got the @name wrong in the comment on #10477 btw. (cg31 opened, you said @benma)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496905200' id='549418'>
<a class='timestamp' href='#549418'><time timestamp='2017-06-08T07:00:00Z'>07:00</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10477" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10477</a> | Use C++ initializer to initialze map and implement map comparator as const by cg31 · Pull Request #10477 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496905800' id='549419'>
<a class='timestamp' href='#549419'><time timestamp='2017-06-08T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
hhm thinking whether to add statistics such as number of incoming/outgoing connections, connections per bind point, to getnetworkinfo or just make a statistics script based on getpeerinfo on top for myself
<br>
</div>

<div class='talk op-msg' data-timestamp='1496905800' id='549420'>
<a class='timestamp' href='#549420'><time timestamp='2017-06-08T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the # in/out connections is in the GUI, so in principle it&#x27;s make sense to add it to RPC
<br>
</div>

<div class='talk op-msg' data-timestamp='1496906280' id='549421'>
<a class='timestamp' href='#549421'><time timestamp='2017-06-08T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
kallewoof oops, corrected.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496907780' id='549422'>
<a class='timestamp' href='#549422'><time timestamp='2017-06-08T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/e801084decf4...6c2d81f34dc4" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/e801084decf4...6c2d81f34dc4</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496907780' id='549423'>
<a class='timestamp' href='#549423'><time timestamp='2017-06-08T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 0abc588 practicalswift: [tests] Remove printf(...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496907780' id='549424'>
<a class='timestamp' href='#549424'><time timestamp='2017-06-08T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 6c2d81f Wladimir J. van der Laan: Merge #10524: [tests] Remove printf(...)...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496907840' id='549425'>
<a class='timestamp' href='#549425'><time timestamp='2017-06-08T07:44:00Z'>07:44</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #10524: [tests] Remove printf(...) (master...u-for-unsigned-int) <a href="https://github.com/bitcoin/bitcoin/pull/10524" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10524</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496911740' id='549426'>
<a class='timestamp' href='#549426'><time timestamp='2017-06-08T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #10553: Simplify &quot;bool x = y ? true : false&quot;. Remove unused function and trailing semicolon. (master...minor-cleanups) <a href="https://github.com/bitcoin/bitcoin/pull/10553" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10553</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496918400' id='549427'>
<a class='timestamp' href='#549427'><time timestamp='2017-06-08T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/6c2d81f34dc4...71ab6e553856" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/6c2d81f34dc4...71ab6e553856</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496918400' id='549428'>
<a class='timestamp' href='#549428'><time timestamp='2017-06-08T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 227ae9b practicalswift: [tests] Use FastRandomContext instead of boost::random::{mt19937,uniform_int_distribution}
<br>
</div>

<div class='talk op-msg' data-timestamp='1496918400' id='549429'>
<a class='timestamp' href='#549429'><time timestamp='2017-06-08T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 71ab6e5 Wladimir J. van der Laan: Merge #10547: [tests] Use FastRandomContext instead of boost::random::{mt19937,uniform_int_distribution}...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496918400' id='549430'>
<a class='timestamp' href='#549430'><time timestamp='2017-06-08T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #10547: [tests] Use FastRandomContext instead of boost::random::{mt19937,uniform_int_distribution} (master...remove-boost-random-dependency) <a href="https://github.com/bitcoin/bitcoin/pull/10547" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10547</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496918700' id='549431'>
<a class='timestamp' href='#549431'><time timestamp='2017-06-08T10:45:00Z'>10:45</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/71ab6e553856...35e7f13f68f9" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/71ab6e553856...35e7f13f68f9</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496918700' id='549432'>
<a class='timestamp' href='#549432'><time timestamp='2017-06-08T10:45:00Z'>10:45</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 246a02f practicalswift: Use std::unordered_{map,set} (C++11) instead of boost::unordered_{map,set}
<br>
</div>

<div class='talk op-msg' data-timestamp='1496918700' id='549433'>
<a class='timestamp' href='#549433'><time timestamp='2017-06-08T10:45:00Z'>10:45</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 35e7f13 Wladimir J. van der Laan: Merge #10548: Use std::unordered_{map,set} (C++11) instead of boost::unordered_{map,set}...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496918760' id='549434'>
<a class='timestamp' href='#549434'><time timestamp='2017-06-08T10:46:00Z'>10:46</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #10548: Use std::unordered_{map,set} (C++11) instead of boost::unordered_{map,set} (master...unordered_map) <a href="https://github.com/bitcoin/bitcoin/pull/10548" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10548</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496921820' id='549435'>
<a class='timestamp' href='#549435'><time timestamp='2017-06-08T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/35e7f13f68f9...9c248e39f280" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/35e7f13f68f9...9c248e39f280</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496921820' id='549436'>
<a class='timestamp' href='#549436'><time timestamp='2017-06-08T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 5b75c47 Andrew Chow: Add a valid opcode sanity check to CScript...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496921820' id='549437'>
<a class='timestamp' href='#549437'><time timestamp='2017-06-08T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ac4e438 Andrew Chow: Sanity check transaction scripts in DecodeHexTx...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496921820' id='549438'>
<a class='timestamp' href='#549438'><time timestamp='2017-06-08T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 9c248e3 Wladimir J. van der Laan: Merge #10481: Decodehextx scripts sanity check...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496921820' id='549439'>
<a class='timestamp' href='#549439'><time timestamp='2017-06-08T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #10481: Decodehextx scripts sanity check  (master...decodehextx-sanity) <a href="https://github.com/bitcoin/bitcoin/pull/10481" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10481</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496928120' id='549440'>
<a class='timestamp' href='#549440'><time timestamp='2017-06-08T13:22:00Z'>13:22</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] somdoron opened pull request #10554: ZMQ: add publishers for wallet transactions. (master...zmq_wallet_tx) <a href="https://github.com/bitcoin/bitcoin/pull/10554" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10554</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496933220' id='549441'>
<a class='timestamp' href='#549441'><time timestamp='2017-06-08T14:47:00Z'>14:47</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #10555: [tests] various improvements to zmq_test.py (master...zmqtestimprovements) <a href="https://github.com/bitcoin/bitcoin/pull/10555" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10555</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496934240' id='549442'>
<a class='timestamp' href='#549442'><time timestamp='2017-06-08T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #10556: Move stop/start functions from utils.py into BitcoinTestFramework (master...testframeworkstopstart) <a href="https://github.com/bitcoin/bitcoin/pull/10556" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10556</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496935920' id='549443'>
<a class='timestamp' href='#549443'><time timestamp='2017-06-08T15:32:00Z'>15:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] morcos opened pull request #10557: Make check to distinguish between orphan txs and old txs more efficient. (master...dontcheckoutputs) <a href="https://github.com/bitcoin/bitcoin/pull/10557" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10557</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496938560' id='549444'>
<a class='timestamp' href='#549444'><time timestamp='2017-06-08T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] morcos opened pull request #10558: Address nits from per-utxo change (master...10195nits) <a href="https://github.com/bitcoin/bitcoin/pull/10558" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10558</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496938920' id='549445'>
<a class='timestamp' href='#549445'><time timestamp='2017-06-08T16:22:00Z'>16:22</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
travis didn&#x27;t run for <a href="https://github.com/bitcoin/bitcoin/pull/9176" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9176</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496944620' id='549446'>
<a class='timestamp' href='#549446'><time timestamp='2017-06-08T17:57:00Z'>17:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] achow101 closed pull request #9522: [RPC] Fix decoderawtransaction decoding of segwit txs (master...fix-decoderawtx) <a href="https://github.com/bitcoin/bitcoin/pull/9522" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9522</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496945340' id='549447'>
<a class='timestamp' href='#549447'><time timestamp='2017-06-08T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-14'> arubi</span>&gt;
vindicated at last :) <a href="https://github.com/bitcoin/bitcoin/pull/8837#issuecomment-250542708" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8837#issuecomment-250542708</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496945460' id='549448'>
<a class='timestamp' href='#549448'><time timestamp='2017-06-08T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-14'> arubi</span>&gt;
luke-jr made a comment about changing that 0x00 to 0xff.  in case segwit is retried, this is very good input imo..
<br>
</div>

<div class='talk op-msg' data-timestamp='1496945580' id='549449'>
<a class='timestamp' href='#549449'><time timestamp='2017-06-08T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah we should have used 0xff
<br>
</div>

<div class='talk op-msg' data-timestamp='1496945580' id='549450'>
<a class='timestamp' href='#549450'><time timestamp='2017-06-08T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or even better... we should never have used normal transaction encoding for partial transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1496945700' id='549451'>
<a class='timestamp' href='#549451'><time timestamp='2017-06-08T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-14'> arubi</span>&gt;
right, I&#x27;d love for a blob of tx data to tell me what it wants to me to do with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496945700' id='549452'>
<a class='timestamp' href='#549452'><time timestamp='2017-06-08T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-4'> * sipa</span>&gt;
proposes ASN.1
<br>
</div>

<div class='talk op-msg' data-timestamp='1496945760' id='549453'>
<a class='timestamp' href='#549453'><time timestamp='2017-06-08T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-4'> * sipa</span>&gt;
hides
<br>
</div>

<div class='talk op-msg' data-timestamp='1496945760' id='549454'>
<a class='timestamp' href='#549454'><time timestamp='2017-06-08T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-14'> arubi</span>&gt;
haha, make the wallet even fatter
<br>
</div>

<div class='talk op-msg' data-timestamp='1496945760' id='549455'>
<a class='timestamp' href='#549455'><time timestamp='2017-06-08T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
arubi: so some sort of marker that says &#x27;needs signature&#x27;? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496945760' id='549456'>
<a class='timestamp' href='#549456'><time timestamp='2017-06-08T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-14'> arubi</span>&gt;
the scriptsig area itself can describe what it wants without hurting current layout
<br>
</div>

<div class='talk op-msg' data-timestamp='1496945820' id='549457'>
<a class='timestamp' href='#549457'><time timestamp='2017-06-08T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-14'> arubi</span>&gt;
&quot;oops, this is unsigned input&quot; or maybe a prevtxid &quot;oops, not funded...&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1496945820' id='549458'>
<a class='timestamp' href='#549458'><time timestamp='2017-06-08T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-14'> arubi</span>&gt;
I mean, it depends at what stage it&#x27;s parsed..  hard to tell for &quot;decoderawtransaction&quot; :\
<br>
</div>

<div class='talk op-msg' data-timestamp='1496946420' id='549459'>
<a class='timestamp' href='#549459'><time timestamp='2017-06-08T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/9c248e39f280...29f80cd230c3" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/9c248e39f280...29f80cd230c3</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496946420' id='549460'>
<a class='timestamp' href='#549460'><time timestamp='2017-06-08T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 3fb81a8 practicalswift: Use list initialization (C++11) for maps/vectors instead of boost::assign::map_list_of/list_of
<br>
</div>

<div class='talk op-msg' data-timestamp='1496946420' id='549461'>
<a class='timestamp' href='#549461'><time timestamp='2017-06-08T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 29f80cd Wladimir J. van der Laan: Merge #10545: Use list initialization (C++11) for maps/vectors instead of boost::assign::map_list_of/list_of...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496946420' id='549462'>
<a class='timestamp' href='#549462'><time timestamp='2017-06-08T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #10545: Use list initialization (C++11) for maps/vectors instead of boost::assign::map_list_of/list_of (master...list_of) <a href="https://github.com/bitcoin/bitcoin/pull/10545" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10545</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496947800' id='549463'>
<a class='timestamp' href='#549463'><time timestamp='2017-06-08T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sdaftuar reopened pull request #10357: Allow setting nMinimumChainWork on command line (master...2017-05-chainwork-commandline) <a href="https://github.com/bitcoin/bitcoin/pull/10357" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10357</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496947800' id='549464'>
<a class='timestamp' href='#549464'><time timestamp='2017-06-08T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Meeting in ten minutes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549465'>
<a class='timestamp' href='#549465'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
DOINK
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549466'>
<a class='timestamp' href='#549466'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#startmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549467'>
<a class='timestamp' href='#549467'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Meeting started Thu Jun  8 19:00:04 2017 UTC.  The chair is wumpus. Information about MeetBot at <a href="http://wiki.debian.org/MeetBot" class="link" target="_blank">http://wiki.debian.org/MeetBot</a>.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549468'>
<a class='timestamp' href='#549468'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Useful Commands: #action #agreed #help #info #idea #link #topic.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549469'>
<a class='timestamp' href='#549469'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#bitcoin-core-dev Meeting: wumpus sipa gmaxwell jonasschnelli morcos luke-jr btcdrak sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier jl2012 instagibbs
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549470'>
<a class='timestamp' href='#549470'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
hi     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549471'>
<a class='timestamp' href='#549471'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
hi     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549472'>
<a class='timestamp' href='#549472'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hi     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549473'>
<a class='timestamp' href='#549473'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
hi     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549474'>
<a class='timestamp' href='#549474'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
proposed topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549475'>
<a class='timestamp' href='#549475'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
hi.     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549476'>
<a class='timestamp' href='#549476'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
UI interaction with pertxout upgrade?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948400' id='549477'>
<a class='timestamp' href='#549477'><time timestamp='2017-06-08T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
#bitcoin-core-dev Meeting: wumpus sipa gmaxwell jonasschnelli morcos luke-jr btcdrak sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948460' id='549478'>
<a class='timestamp' href='#549478'><time timestamp='2017-06-08T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: ack
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948460' id='549479'>
<a class='timestamp' href='#549479'><time timestamp='2017-06-08T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok, let&#x27;s do high priority for review first, then that
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948460' id='549480'>
<a class='timestamp' href='#549480'><time timestamp='2017-06-08T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic high priority for review
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948460' id='549481'>
<a class='timestamp' href='#549481'><time timestamp='2017-06-08T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
#10148
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948460' id='549482'>
<a class='timestamp' href='#549482'><time timestamp='2017-06-08T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10148" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10148</a> | Use non-atomic flushing with block replay by sipa · Pull Request #10148 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948460' id='549483'>
<a class='timestamp' href='#549483'><time timestamp='2017-06-08T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I&#x27;ve rebased multiwallet etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948520' id='549484'>
<a class='timestamp' href='#549484'><time timestamp='2017-06-08T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: great!
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948520' id='549485'>
<a class='timestamp' href='#549485'><time timestamp='2017-06-08T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(^ will double our effectively available dbcache)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948520' id='549486'>
<a class='timestamp' href='#549486'><time timestamp='2017-06-08T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: sae there were some new review comments, did you address them yet?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948580' id='549487'>
<a class='timestamp' href='#549487'><time timestamp='2017-06-08T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: I believe all review comments are addressed or answered
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948580' id='549488'>
<a class='timestamp' href='#549488'><time timestamp='2017-06-08T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
added 10148
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948580' id='549489'>
<a class='timestamp' href='#549489'><time timestamp='2017-06-08T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948580' id='549490'>
<a class='timestamp' href='#549490'><time timestamp='2017-06-08T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
still waiting on my current one, thanks wumpus for benchmarking
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948580' id='549491'>
<a class='timestamp' href='#549491'><time timestamp='2017-06-08T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
#8694 now passes gitian, will re-utack soon
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948640' id='549492'>
<a class='timestamp' href='#549492'><time timestamp='2017-06-08T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8694" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8694</a> | Basic multiwallet support by luke-jr · Pull Request #8694 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948640' id='549493'>
<a class='timestamp' href='#549493'><time timestamp='2017-06-08T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jtimon: a very nice gain!
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948640' id='549494'>
<a class='timestamp' href='#549494'><time timestamp='2017-06-08T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
oh, there was a comment asking for tests..
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948640' id='549495'>
<a class='timestamp' href='#549495'><time timestamp='2017-06-08T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I didn&#x27;t write any, although I agree they would be nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948640' id='549496'>
<a class='timestamp' href='#549496'><time timestamp='2017-06-08T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jtimon: unfortunately bitcoind nuked my log so I can&#x27;t get the timings, but 26% savings in block hash operations is noce
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948700' id='549497'>
<a class='timestamp' href='#549497'><time timestamp='2017-06-08T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
wumpus: nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948700' id='549498'>
<a class='timestamp' href='#549498'><time timestamp='2017-06-08T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
we&#x27;re talking about #10339 in case someone is lost
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948700' id='549499'>
<a class='timestamp' href='#549499'><time timestamp='2017-06-08T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10339" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10339</a> | Optimization: Calculate block hash less times by jtimon · Pull Request #10339 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948700' id='549500'>
<a class='timestamp' href='#549500'><time timestamp='2017-06-08T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: well I&#x27;d say add those later, this is only the first in a series towards multiwallet after all
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948760' id='549501'>
<a class='timestamp' href='#549501'><time timestamp='2017-06-08T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: status on account to label conversion?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948760' id='549502'>
<a class='timestamp' href='#549502'><time timestamp='2017-06-08T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
indeed, it might not be possible to test right now since it&#x27;s not exposed to RPC
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948760' id='549503'>
<a class='timestamp' href='#549503'><time timestamp='2017-06-08T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: &quot;in block hash operations&quot; hmm? can you be more specific?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948760' id='549504'>
<a class='timestamp' href='#549504'><time timestamp='2017-06-08T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Related to hashing, does anyone here have AMD ryzen yet?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948760' id='549505'>
<a class='timestamp' href='#549505'><time timestamp='2017-06-08T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
whats that compared to total runtime?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948760' id='549506'>
<a class='timestamp' href='#549506'><time timestamp='2017-06-08T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: I don&#x27;t know about time, I just instrumented the block header hash function
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948760' id='549507'>
<a class='timestamp' href='#549507'><time timestamp='2017-06-08T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: it&#x27;s tiny vs total runtime, I assume-- but it should impact latency on block handling somewhat.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948760' id='549508'>
<a class='timestamp' href='#549508'><time timestamp='2017-06-08T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: no, but I&#x27;d been holding out for SHA2 acceleration before upgrading, so I might get one if AMD is competing with Intel again
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948760' id='549509'>
<a class='timestamp' href='#549509'><time timestamp='2017-06-08T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
related topic: sha2/crc32 hw accel?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948820' id='549510'>
<a class='timestamp' href='#549510'><time timestamp='2017-06-08T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
as I said, I lost the timings (blame bitcoind nuking the log if it&#x27;s too large)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948820' id='549511'>
<a class='timestamp' href='#549511'><time timestamp='2017-06-08T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: Ryzen has the sha2 instructions... so I&#x27;m asking to find out if anyone will be able to test support for them. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948820' id='549512'>
<a class='timestamp' href='#549512'><time timestamp='2017-06-08T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: right, that&#x27;s why ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948820' id='549513'>
<a class='timestamp' href='#549513'><time timestamp='2017-06-08T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I just haven&#x27;t had time to investigate the pros/cons otherwise yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948820' id='549514'>
<a class='timestamp' href='#549514'><time timestamp='2017-06-08T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: no progress on that yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948880' id='549515'>
<a class='timestamp' href='#549515'><time timestamp='2017-06-08T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
In any case, 98% of the work needed to support sha2 instructions is the same as using SSE4 SHA2 which will itself be a non-trival speedup.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948880' id='549516'>
<a class='timestamp' href='#549516'><time timestamp='2017-06-08T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
crc speedup should be possible after the leveldb upgrade that sipa PRed
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948880' id='549517'>
<a class='timestamp' href='#549517'><time timestamp='2017-06-08T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: we removed SSE4 stuff years ago, but I&#x27;m not sure if it was used for non-mining
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948880' id='549518'>
<a class='timestamp' href='#549518'><time timestamp='2017-06-08T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: it was only used for mining at the time
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948880' id='549519'>
<a class='timestamp' href='#549519'><time timestamp='2017-06-08T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: IIRC I instrumented and measured accepting a block at tip hashed the header ~6 times or so.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948880' id='549520'>
<a class='timestamp' href='#549520'><time timestamp='2017-06-08T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: it was mining only.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948940' id='549521'>
<a class='timestamp' href='#549521'><time timestamp='2017-06-08T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: that was a different one, the N-way-parallel
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948940' id='549522'>
<a class='timestamp' href='#549522'><time timestamp='2017-06-08T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yup 4-way parallel SSE2, iirc
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948940' id='549523'>
<a class='timestamp' href='#549523'><time timestamp='2017-06-08T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and it was a vector SHA2 that had to work on 4 elements at a time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948940' id='549524'>
<a class='timestamp' href='#549524'><time timestamp='2017-06-08T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
gmaxwell: that&#x27;s before or after the patch?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948940' id='549525'>
<a class='timestamp' href='#549525'><time timestamp='2017-06-08T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
What we should be implementing now is the one at a time SIMD sha2.  I believe matt uses it in fibre but without autodetection.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948940' id='549526'>
<a class='timestamp' href='#549526'><time timestamp='2017-06-08T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it seems we&#x27;ve strayed from the topic?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948940' id='549527'>
<a class='timestamp' href='#549527'><time timestamp='2017-06-08T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jtimon: before.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948940' id='549528'>
<a class='timestamp' href='#549528'><time timestamp='2017-06-08T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I wonder if it&#x27;d be worth using 4-way for merkle trees etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948940' id='549529'>
<a class='timestamp' href='#549529'><time timestamp='2017-06-08T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: yea, but if its not measurable on the total, unlikely to be worth the effort and complexity.....an alternative - do we have CBlockIndex*es in most of those places? pblockindex-&gt;GetBlockHash() is free and simpler than passing hashes around
<br>
</div>

<div class='talk op-msg' data-timestamp='1496948940' id='549530'>
<a class='timestamp' href='#549530'><time timestamp='2017-06-08T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Will have access to a Ryzen in a couple of days via Hetzner
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949000' id='549531'>
<a class='timestamp' href='#549531'><time timestamp='2017-06-08T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
wonders if the GCC compile farm has a Ryzen
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949000' id='549532'>
<a class='timestamp' href='#549532'><time timestamp='2017-06-08T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Without doing a thorough review of 10339, is the speedup worth it as opposed to the tradeoff on making the code a little more complicated/involved.  Who was it that said the primary point of source code is to communicate between developers
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949000' id='549533'>
<a class='timestamp' href='#549533'><time timestamp='2017-06-08T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
#10339
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949000' id='549534'>
<a class='timestamp' href='#549534'><time timestamp='2017-06-08T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
It just seems weird to pass a block and separately it&#x27;s hash into a bunch of functions
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949000' id='549535'>
<a class='timestamp' href='#549535'><time timestamp='2017-06-08T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10339" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10339</a> | Optimization: Calculate block hash less times by jtimon · Pull Request #10339 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949060' id='549536'>
<a class='timestamp' href='#549536'><time timestamp='2017-06-08T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
BlueMatt: what&#x27;s wrong with passing hashes around?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949060' id='549537'>
<a class='timestamp' href='#549537'><time timestamp='2017-06-08T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
DoPartOfConnectBlock(42 args)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949060' id='549538'>
<a class='timestamp' href='#549538'><time timestamp='2017-06-08T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic Optimization: Calculate block hash less times by jtimon
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949060' id='549539'>
<a class='timestamp' href='#549539'><time timestamp='2017-06-08T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
we already have too many args in many of those functions
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949060' id='549540'>
<a class='timestamp' href='#549540'><time timestamp='2017-06-08T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
&quot;fewer&quot; :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949060' id='549541'>
<a class='timestamp' href='#549541'><time timestamp='2017-06-08T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well if hashing is a bottleneck, the obvious optimization is to just to it less
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949060' id='549542'>
<a class='timestamp' href='#549542'><time timestamp='2017-06-08T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
instagibbs: i didn&#x27;t want to say anything :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949120' id='549543'>
<a class='timestamp' href='#549543'><time timestamp='2017-06-08T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: is it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949120' id='549544'>
<a class='timestamp' href='#549544'><time timestamp='2017-06-08T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if hashing is not a bottleneck, then going after SSE and such makes no sense either
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949120' id='549545'>
<a class='timestamp' href='#549545'><time timestamp='2017-06-08T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: i believe that in all places where we already have CBlockIndex, no new block hashes are computed
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949120' id='549546'>
<a class='timestamp' href='#549546'><time timestamp='2017-06-08T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
all of the cases in 10339 are before having a CBlockIndex
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949120' id='549547'>
<a class='timestamp' href='#549547'><time timestamp='2017-06-08T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so if #10339 is not an improvement then we can leave hashing alone
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949120' id='549548'>
<a class='timestamp' href='#549548'><time timestamp='2017-06-08T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10339" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10339</a> | Optimization: Calculate block hash less times by jtimon · Pull Request #10339 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949120' id='549549'>
<a class='timestamp' href='#549549'><time timestamp='2017-06-08T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Well my suggestion on that hash thing was just to cache the hash in the block object, but Pieter said he prefered this.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949120' id='549550'>
<a class='timestamp' href='#549550'><time timestamp='2017-06-08T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
instagibbs: calculate fewer times? thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949120' id='549551'>
<a class='timestamp' href='#549551'><time timestamp='2017-06-08T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(I also implemented that, though in a way that wasn&#x27;t correct for the mining code.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949180' id='549552'>
<a class='timestamp' href='#549552'><time timestamp='2017-06-08T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: I highly prefer that, though making CBlock const ala CTransaction is a bit more involved
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949180' id='549553'>
<a class='timestamp' href='#549553'><time timestamp='2017-06-08T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: if we create another CBlock for the cases where that&#x27;s not needed
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949180' id='549554'>
<a class='timestamp' href='#549554'><time timestamp='2017-06-08T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(like GetTransaction and mining code)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949180' id='549555'>
<a class='timestamp' href='#549555'><time timestamp='2017-06-08T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
Node also that we&#x27;re sometimes getting the hash from the index and sometimes from the CBlock
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949180' id='549556'>
<a class='timestamp' href='#549556'><time timestamp='2017-06-08T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right, calculating it eagerly can also result in overhead
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949180' id='549557'>
<a class='timestamp' href='#549557'><time timestamp='2017-06-08T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I&#x27;d just like to see some evidence, even a little bit, that this optimization is worth it.  26% fewer hashing operations results in what savings?  Or do people not agree it makes the code a bit more cumbersome
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949240' id='549558'>
<a class='timestamp' href='#549558'><time timestamp='2017-06-08T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t see much problem in passing a hash along with a block if you know it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949240' id='549559'>
<a class='timestamp' href='#549559'><time timestamp='2017-06-08T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
passing in the hash as a part of ProcessNewBlock? yuck
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949240' id='549560'>
<a class='timestamp' href='#549560'><time timestamp='2017-06-08T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s certainly a bit of complication, but a trivial one
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949240' id='549561'>
<a class='timestamp' href='#549561'><time timestamp='2017-06-08T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
morcos: sure, my point is just that if 26% fewer hashing operations isn&#x27;t worth it, then using special intstructions to gain a few % is netiher worth it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949240' id='549562'>
<a class='timestamp' href='#549562'><time timestamp='2017-06-08T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
seems like there are probably lower hanging fruit in optimizations but meh
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949240' id='549563'>
<a class='timestamp' href='#549563'><time timestamp='2017-06-08T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I just spent a bunch of time getting fewer args there
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949240' id='549564'>
<a class='timestamp' href='#549564'><time timestamp='2017-06-08T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
wumpus: well hashing occurs a lot more often than in the calculations of these block hashes
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949240' id='549565'>
<a class='timestamp' href='#549565'><time timestamp='2017-06-08T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
to separate the consensus code from net_processing, now we&#x27;re adding more coupling :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949240' id='549566'>
<a class='timestamp' href='#549566'><time timestamp='2017-06-08T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
it seems to me that the reserve is mostly a question of style
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949240' id='549567'>
<a class='timestamp' href='#549567'><time timestamp='2017-06-08T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: My reason for bringing it up is that I believe the repeated hashing is on the latency critical path for block propagation to the tune of maybe a millisecond-ish. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949300' id='549568'>
<a class='timestamp' href='#549568'><time timestamp='2017-06-08T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I mean calculating it eagerly can penalize in some cases, right
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949300' id='549569'>
<a class='timestamp' href='#549569'><time timestamp='2017-06-08T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: these optimizations just prevent repeated hashing of the headers, in terms of total bytes hashed while syncing thats pretty small even though we do have a high repetition factor.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949300' id='549570'>
<a class='timestamp' href='#549570'><time timestamp='2017-06-08T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jtimon: what case would computing it early peanalize? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949300' id='549571'>
<a class='timestamp' href='#549571'><time timestamp='2017-06-08T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: ok...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949300' id='549572'>
<a class='timestamp' href='#549572'><time timestamp='2017-06-08T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
BlueMatt: my preference is to sacrifice a little performance for better architecture ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949300' id='549573'>
<a class='timestamp' href='#549573'><time timestamp='2017-06-08T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i will try to benchmark the effect on validation speed for this
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949300' id='549574'>
<a class='timestamp' href='#549574'><time timestamp='2017-06-08T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
CodeShark: I think that&#x27;s a fair argument
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949300' id='549575'>
<a class='timestamp' href='#549575'><time timestamp='2017-06-08T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: transaction hashing accounts for far more than block header hashing, but not on the critical path
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949360' id='549576'>
<a class='timestamp' href='#549576'><time timestamp='2017-06-08T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
gmaxwell: when the validation fails for some other reason before you need the hash?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949360' id='549577'>
<a class='timestamp' href='#549577'><time timestamp='2017-06-08T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
would be more ok if we calculated it at the top of ProcessNewBlock and pass that one around, but still not ideal
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949360' id='549578'>
<a class='timestamp' href='#549578'><time timestamp='2017-06-08T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
passing it in to ProcessNewBlock is.....ugh
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949360' id='549579'>
<a class='timestamp' href='#549579'><time timestamp='2017-06-08T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jtimon: I don&#x27;t think there is any validation failure path where we don&#x27;t hash... after all, we&#x27;ll want to know <u>_what_</u> block hash failed to validate.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949360' id='549580'>
<a class='timestamp' href='#549580'><time timestamp='2017-06-08T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
BlueMatt: you could have said that when each function had a separated commit, but I can leave that out
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949360' id='549581'>
<a class='timestamp' href='#549581'><time timestamp='2017-06-08T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
or, really, chnging the signatures of stuff in validation.h for this without a benchmark showing its a real win :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949360' id='549582'>
<a class='timestamp' href='#549582'><time timestamp='2017-06-08T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
gmaxwell: yeah, fair enough
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949420' id='549583'>
<a class='timestamp' href='#549583'><time timestamp='2017-06-08T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-8'> * morcos</span>&gt;
has said his piece and is willing to let the people who spent more time thinking about this decide
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949420' id='549584'>
<a class='timestamp' href='#549584'><time timestamp='2017-06-08T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok, clear, better to close it I guess, would have made sense to have this discussion earlier
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949420' id='549585'>
<a class='timestamp' href='#549585'><time timestamp='2017-06-08T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
so we come back to only the &quot;ugh&quot; argument
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949420' id='549586'>
<a class='timestamp' href='#549586'><time timestamp='2017-06-08T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
But I still don&#x27;t understand why sipa prefered to do this jtimon patch instead of making the object cache it.   FWIW, just monkey patching it &#x27;works&#x27; and the only obvious issue is mining.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949420' id='549587'>
<a class='timestamp' href='#549587'><time timestamp='2017-06-08T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: and every other read from disk
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949480' id='549588'>
<a class='timestamp' href='#549588'><time timestamp='2017-06-08T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I preferred this because I think it&#x27;s simpler than the cache, even if it&#x27;s &quot;ugh&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949480' id='549589'>
<a class='timestamp' href='#549589'><time timestamp='2017-06-08T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: I don&#x27;t understand your comment.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949480' id='549590'>
<a class='timestamp' href='#549590'><time timestamp='2017-06-08T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i consider adding more arguments to validation-specific functions less invasively than changing a primitive datastructure
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949480' id='549591'>
<a class='timestamp' href='#549591'><time timestamp='2017-06-08T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we can do both, if needed
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949540' id='549592'>
<a class='timestamp' href='#549592'><time timestamp='2017-06-08T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: I tend to agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949540' id='549593'>
<a class='timestamp' href='#549593'><time timestamp='2017-06-08T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i believe we often read blocks from disk without caring about its hash, because we already know it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949540' id='549594'>
<a class='timestamp' href='#549594'><time timestamp='2017-06-08T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: just passing extra arguments is easier to reason about than extending primitive datastructures
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949540' id='549595'>
<a class='timestamp' href='#549595'><time timestamp='2017-06-08T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: the read funcion computes it!
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949540' id='549596'>
<a class='timestamp' href='#549596'><time timestamp='2017-06-08T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949600' id='549597'>
<a class='timestamp' href='#549597'><time timestamp='2017-06-08T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
currently, yes, as a checksum
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949600' id='549598'>
<a class='timestamp' href='#549598'><time timestamp='2017-06-08T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if we care about the checksum functionality, we should add a crc
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949600' id='549599'>
<a class='timestamp' href='#549599'><time timestamp='2017-06-08T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
    // Check the header
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949600' id='549600'>
<a class='timestamp' href='#549600'><time timestamp='2017-06-08T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
    if (!CheckProofOfWork(block.GetHash(), block.nBits, consensusParams))
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949600' id='549601'>
<a class='timestamp' href='#549601'><time timestamp='2017-06-08T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jtimon: I agree, caching is always somewhat risky and error prone, this is more explicit and clear
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949600' id='549602'>
<a class='timestamp' href='#549602'><time timestamp='2017-06-08T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
        return error(&quot;ReadBlockFromDisk: Errors in block header at %s&quot;, pos.ToString());
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949600' id='549603'>
<a class='timestamp' href='#549603'><time timestamp='2017-06-08T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
then again if it&#x27;s not worth it, performanec wise, we shouldn&#x27;t do it at all
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949600' id='549604'>
<a class='timestamp' href='#549604'><time timestamp='2017-06-08T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
not in another way either
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949660' id='549605'>
<a class='timestamp' href='#549605'><time timestamp='2017-06-08T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
making the block hash part of CBlock makes us unable to skip computing that hash
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949660' id='549606'>
<a class='timestamp' href='#549606'><time timestamp='2017-06-08T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
even in places where we don&#x27;t care about it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949660' id='549607'>
<a class='timestamp' href='#549607'><time timestamp='2017-06-08T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think I previously gave figures on the latency impact of caching.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949660' id='549608'>
<a class='timestamp' href='#549608'><time timestamp='2017-06-08T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
how can I benchmark this to convince morcos?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949660' id='549609'>
<a class='timestamp' href='#549609'><time timestamp='2017-06-08T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: Where are those places?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949660' id='549610'>
<a class='timestamp' href='#549610'><time timestamp='2017-06-08T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I don&#x27;t know, I tried
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949720' id='549611'>
<a class='timestamp' href='#549611'><time timestamp='2017-06-08T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: every time we read a block from disk, we already have its hash (because that&#x27;s how we look it up!)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949720' id='549612'>
<a class='timestamp' href='#549612'><time timestamp='2017-06-08T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: don&#x27;t we also hash all the transactions when we read a block from disk?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949720' id='549613'>
<a class='timestamp' href='#549613'><time timestamp='2017-06-08T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: recomputing it there serves as nothing more than a checksum
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949720' id='549614'>
<a class='timestamp' href='#549614'><time timestamp='2017-06-08T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
surely that dominates all this
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949720' id='549615'>
<a class='timestamp' href='#549615'><time timestamp='2017-06-08T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: i know i said i&#x27;d shut up, but you just read from DISK, who cares if you hash 80 bytes?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949720' id='549616'>
<a class='timestamp' href='#549616'><time timestamp='2017-06-08T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
might be time for next topic, if this is not a perf issue, might be better to discuss it after meeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949720' id='549617'>
<a class='timestamp' href='#549617'><time timestamp='2017-06-08T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: good point.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949780' id='549618'>
<a class='timestamp' href='#549618'><time timestamp='2017-06-08T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: we don&#x27;t. I used to think we did but we do not. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949780' id='549619'>
<a class='timestamp' href='#549619'><time timestamp='2017-06-08T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, we do
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949780' id='549620'>
<a class='timestamp' href='#549620'><time timestamp='2017-06-08T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: where? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949780' id='549621'>
<a class='timestamp' href='#549621'><time timestamp='2017-06-08T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
deserializing a transaction computes its hash
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949780' id='549622'>
<a class='timestamp' href='#549622'><time timestamp='2017-06-08T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh right, what we don&#x27;t do is validate the hashroot.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949780' id='549623'>
<a class='timestamp' href='#549623'><time timestamp='2017-06-08T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
let&#x27;s discuss this after the meeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949780' id='549624'>
<a class='timestamp' href='#549624'><time timestamp='2017-06-08T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
k     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949840' id='549625'>
<a class='timestamp' href='#549625'><time timestamp='2017-06-08T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
next topic?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949840' id='549626'>
<a class='timestamp' href='#549626'><time timestamp='2017-06-08T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic UI interaction with pertxout upgrade
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949900' id='549627'>
<a class='timestamp' href='#549627'><time timestamp='2017-06-08T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
in any case, BlueMatt morcos if you already knew you didn&#x27;t liked this, I would have appreaciated knowing it earlier, maybe a provisional concept NACK or something
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949900' id='549628'>
<a class='timestamp' href='#549628'><time timestamp='2017-06-08T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so, since 10195, we&#x27;ll have a possibly lengthy (minutes on decent hardware, possibly much longer elsewhere) upgrade process from the old per-txid utxo db to the per-txout one
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949900' id='549629'>
<a class='timestamp' href='#549629'><time timestamp='2017-06-08T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
jtimon: yes sorry, i only looked at the PR during todays meeting, also why i said i&#x27;d stop arguing about it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949960' id='549630'>
<a class='timestamp' href='#549630'><time timestamp='2017-06-08T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that needs some GUI interaction, i believe
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949960' id='549631'>
<a class='timestamp' href='#549631'><time timestamp='2017-06-08T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jtimon: same here, this should have been clear sooner, otherwise I wouldn&#x27;t have spent as much time on it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949960' id='549632'>
<a class='timestamp' href='#549632'><time timestamp='2017-06-08T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or perhaps even in bitcoind
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949960' id='549633'>
<a class='timestamp' href='#549633'><time timestamp='2017-06-08T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
wumpus: in general perf improvements shoudl include data in the PR request when possible I think
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949960' id='549634'>
<a class='timestamp' href='#549634'><time timestamp='2017-06-08T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jtimon: it&#x27;s kind of disappointing to discover this does what it says on the tin, save ~1/4th of block hash operations, just to discover that&#x27;s not even important
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949960' id='549635'>
<a class='timestamp' href='#549635'><time timestamp='2017-06-08T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Can you not just use uiInterface.Progress() like in VerifyDB?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949960' id='549636'>
<a class='timestamp' href='#549636'><time timestamp='2017-06-08T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jtimon: that kind of annoys me
<br>
</div>

<div class='talk op-msg' data-timestamp='1496949960' id='549637'>
<a class='timestamp' href='#549637'><time timestamp='2017-06-08T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: that doesn&#x27;t let you interrupt
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950020' id='549638'>
<a class='timestamp' href='#549638'><time timestamp='2017-06-08T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: yeah i noticed that it doesn&#x27;t even output to debug log that its doing an upgrade right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950020' id='549639'>
<a class='timestamp' href='#549639'><time timestamp='2017-06-08T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it should log
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950020' id='549640'>
<a class='timestamp' href='#549640'><time timestamp='2017-06-08T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
&quot;Upgrading database...&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950020' id='549641'>
<a class='timestamp' href='#549641'><time timestamp='2017-06-08T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: I&#x27;d think users should be able to send txs during the upgrade.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950020' id='549642'>
<a class='timestamp' href='#549642'><time timestamp='2017-06-08T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
oh     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950020' id='549643'>
<a class='timestamp' href='#549643'><time timestamp='2017-06-08T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: but RPC is also not ready in this case? RIght?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950020' id='549644'>
<a class='timestamp' href='#549644'><time timestamp='2017-06-08T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: it logs, but you won&#x27;t see it if you have leveldb logging turned on. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950020' id='549645'>
<a class='timestamp' href='#549645'><time timestamp='2017-06-08T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
nothing works during the upgrade
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950020' id='549646'>
<a class='timestamp' href='#549646'><time timestamp='2017-06-08T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there is no full node available
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950080' id='549647'>
<a class='timestamp' href='#549647'><time timestamp='2017-06-08T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
why would you then need interruption?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950080' id='549648'>
<a class='timestamp' href='#549648'><time timestamp='2017-06-08T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it should at least show a progress indicator and be interruptible indeed, ideally
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950080' id='549649'>
<a class='timestamp' href='#549649'><time timestamp='2017-06-08T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
because maybe it takes too long
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950080' id='549650'>
<a class='timestamp' href='#549650'><time timestamp='2017-06-08T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and they want to continue another time
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950080' id='549651'>
<a class='timestamp' href='#549651'><time timestamp='2017-06-08T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, because the user may want to do something else with the computer, having not expected to have to spend a long time upgrading
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950080' id='549652'>
<a class='timestamp' href='#549652'><time timestamp='2017-06-08T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
by interruption this means &#x27;crash&#x27;, not continue running without the upgrade.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950080' id='549653'>
<a class='timestamp' href='#549653'><time timestamp='2017-06-08T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
anyway, I would still like to benchmark it if anyone can help me (not sure what to do)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950080' id='549654'>
<a class='timestamp' href='#549654'><time timestamp='2017-06-08T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Ah.. the update can be done in multiple steps..
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950080' id='549655'>
<a class='timestamp' href='#549655'><time timestamp='2017-06-08T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950080' id='549656'>
<a class='timestamp' href='#549656'><time timestamp='2017-06-08T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
well that would also need communication then
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950080' id='549657'>
<a class='timestamp' href='#549657'><time timestamp='2017-06-08T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: well &#x27;exit&#x27; not crash
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950140' id='549658'>
<a class='timestamp' href='#549658'><time timestamp='2017-06-08T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
same difference
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950140' id='549659'>
<a class='timestamp' href='#549659'><time timestamp='2017-06-08T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: yeah i missed that somehow, sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950140' id='549660'>
<a class='timestamp' href='#549660'><time timestamp='2017-06-08T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
crashing &quot;should&quot; be fine
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950140' id='549661'>
<a class='timestamp' href='#549661'><time timestamp='2017-06-08T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it better be! :) (also, I&#x27;ve tested it a fair bit)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950140' id='549662'>
<a class='timestamp' href='#549662'><time timestamp='2017-06-08T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
[Updating 0%] \n You can shutdown and continue later [Shutdown-Button] &lt;-- something like that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950140' id='549663'>
<a class='timestamp' href='#549663'><time timestamp='2017-06-08T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jtimon: benchmarking the reindex chainstate maybe?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950140' id='549664'>
<a class='timestamp' href='#549664'><time timestamp='2017-06-08T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: like that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950140' id='549665'>
<a class='timestamp' href='#549665'><time timestamp='2017-06-08T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
what if you crash, run the old version, and then the new one again?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950140' id='549666'>
<a class='timestamp' href='#549666'><time timestamp='2017-06-08T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jtimon: I still wonder why -stopatblock doesn&#x27;t work
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950200' id='549667'>
<a class='timestamp' href='#549667'><time timestamp='2017-06-08T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: you get to keep both pieces? (I believe the old version will tell you the database is corrupt and stop there.... but I haven&#x27;t tested that, so it&#x27;s a good question.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950200' id='549668'>
<a class='timestamp' href='#549668'><time timestamp='2017-06-08T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: no; that&#x27;s dominated by tx validation/deserialization... a good benchmark tests block validation given fully populated mempool and sigcache etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950200' id='549669'>
<a class='timestamp' href='#549669'><time timestamp='2017-06-08T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
How about logging? Can we log similar to the VerifyDB [the non-newline % steps]?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950200' id='549670'>
<a class='timestamp' href='#549670'><time timestamp='2017-06-08T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950200' id='549671'>
<a class='timestamp' href='#549671'><time timestamp='2017-06-08T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: ok...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950200' id='549672'>
<a class='timestamp' href='#549672'><time timestamp='2017-06-08T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I can work on that. Seems to fit my skillset. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950200' id='549673'>
<a class='timestamp' href='#549673'><time timestamp='2017-06-08T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: IMO users may get tired of waiting and prefer to start the upgrade over in exchange for being able to use the old version in the meantime
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950200' id='549674'>
<a class='timestamp' href='#549674'><time timestamp='2017-06-08T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
sipa: perhaps it could be as simple as using -upgradeutxodb=1 once or something of the sort?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950200' id='549675'>
<a class='timestamp' href='#549675'><time timestamp='2017-06-08T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: good luck doing that in a deterministic way, though
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950200' id='549676'>
<a class='timestamp' href='#549676'><time timestamp='2017-06-08T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe VerifyDB or something like that can pass a bool saying &quot;interruptible&quot; ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950260' id='549677'>
<a class='timestamp' href='#549677'><time timestamp='2017-06-08T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: sounds like a case we should handle.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950260' id='549678'>
<a class='timestamp' href='#549678'><time timestamp='2017-06-08T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jtimon: you can&#x27;t not do it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950260' id='549679'>
<a class='timestamp' href='#549679'><time timestamp='2017-06-08T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jtimon: i mean, -upgradeutxodb=0 would mean just exiting immediately :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950260' id='549680'>
<a class='timestamp' href='#549680'><time timestamp='2017-06-08T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no, the upgrade needs to be done
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950260' id='549681'>
<a class='timestamp' href='#549681'><time timestamp='2017-06-08T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
we could prompt before starting to warn the user, but IMO we&#x27;d probably want to begin ASAP, even if we hold off destroying backward compat until the user OKs it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950260' id='549682'>
<a class='timestamp' href='#549682'><time timestamp='2017-06-08T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
meh.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950320' id='549683'>
<a class='timestamp' href='#549683'><time timestamp='2017-06-08T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sure, you could warn...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950320' id='549684'>
<a class='timestamp' href='#549684'><time timestamp='2017-06-08T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Keep in mind that on a reasonably fast computer the upgrade does not take long.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950320' id='549685'>
<a class='timestamp' href='#549685'><time timestamp='2017-06-08T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
no, I mean once you set -upgradeutxodb=1 once it doesn&#x27;t matter what you set anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950320' id='549686'>
<a class='timestamp' href='#549686'><time timestamp='2017-06-08T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s a new major release, i don&#x27;t care about backward compatibility; the user can always reindex if they really need to
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950320' id='549687'>
<a class='timestamp' href='#549687'><time timestamp='2017-06-08T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so just to be clear, right now if someone went back to an old version, there is some chance they&#x27;d screw themselves right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950320' id='549688'>
<a class='timestamp' href='#549688'><time timestamp='2017-06-08T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
(and need to reindex)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950320' id='549689'>
<a class='timestamp' href='#549689'><time timestamp='2017-06-08T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
morcos: yes, it simply doesn&#x27;t work. We should warn in the release notes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950320' id='549690'>
<a class='timestamp' href='#549690'><time timestamp='2017-06-08T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: i believe that with very high probability the startup sanity check will fail
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950320' id='549691'>
<a class='timestamp' href='#549691'><time timestamp='2017-06-08T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
pruned nodes cant reindex
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950320' id='549692'>
<a class='timestamp' href='#549692'><time timestamp='2017-06-08T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: old version rejects with a &quot;your database is corrupted&quot;  though luke was asking an interesting question about what happens if you do this mid-conversion.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950380' id='549693'>
<a class='timestamp' href='#549693'><time timestamp='2017-06-08T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
we coudl have added logic to 0.14.2 to detect the new format and give a more specific error
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950380' id='549694'>
<a class='timestamp' href='#549694'><time timestamp='2017-06-08T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: yeah that was my question, how far do you have to get along in the upgrade before your sanity check would fail with high probability
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950380' id='549695'>
<a class='timestamp' href='#549695'><time timestamp='2017-06-08T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: I did test that case, how could it not fail?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950380' id='549696'>
<a class='timestamp' href='#549696'><time timestamp='2017-06-08T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
we only go back 6 blocks now in the startup sanity check i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950380' id='549697'>
<a class='timestamp' href='#549697'><time timestamp='2017-06-08T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: IMO it&#x27;d be better to destroy the upgrade so it starts over, and work (for incomplete upgrades)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950380' id='549698'>
<a class='timestamp' href='#549698'><time timestamp='2017-06-08T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
isn&#x27;t it possible you don&#x27;t come across any bad entries?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950380' id='549699'>
<a class='timestamp' href='#549699'><time timestamp='2017-06-08T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: hm? I don&#x27;t think that would be the right way, the right way would be to make the new version more incompatible.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950380' id='549700'>
<a class='timestamp' href='#549700'><time timestamp='2017-06-08T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: ok...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549701'>
<a class='timestamp' href='#549701'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there is a trivial change we can make that guarantees old versions will treat it as an empty db
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549702'>
<a class='timestamp' href='#549702'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
change the dir name?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549703'>
<a class='timestamp' href='#549703'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549704'>
<a class='timestamp' href='#549704'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: I just mean a specific error like &#x27;the utxo database is in a newer format than supported by this version&#x27; would be clearer than a general sanity check error
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549705'>
<a class='timestamp' href='#549705'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, i&#x27;ve considered that too
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549706'>
<a class='timestamp' href='#549706'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
empty db == corrupt and leave it so the new version can continue
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549707'>
<a class='timestamp' href='#549707'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
no there is just the height index entry. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549708'>
<a class='timestamp' href='#549708'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
wumpus +1
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549709'>
<a class='timestamp' href='#549709'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but I don&#x27;t know ,sorry for suggesting it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549710'>
<a class='timestamp' href='#549710'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: oh, sure that would have been okay!
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549711'>
<a class='timestamp' href='#549711'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
thats at least somethign we shoudl do  for future changes
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549712'>
<a class='timestamp' href='#549712'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: unfortunately it doesn&#x27;t have a version number
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549713'>
<a class='timestamp' href='#549713'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
luke-jr: we could move the main datadir to ./bitcoin/main maybe
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549714'>
<a class='timestamp' href='#549714'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950440' id='549715'>
<a class='timestamp' href='#549715'><time timestamp='2017-06-08T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
using a new db would also mean users from pre-obfuscation get that enabled..
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950500' id='549716'>
<a class='timestamp' href='#549716'><time timestamp='2017-06-08T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
a new db is a possibility
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950500' id='549717'>
<a class='timestamp' href='#549717'><time timestamp='2017-06-08T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: we could have added one! but yes, too late.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950500' id='549718'>
<a class='timestamp' href='#549718'><time timestamp='2017-06-08T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
though i&#x27;d prefer to not need 2x disk storage during the upgrade
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950500' id='549719'>
<a class='timestamp' href='#549719'><time timestamp='2017-06-08T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not too late
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950500' id='549720'>
<a class='timestamp' href='#549720'><time timestamp='2017-06-08T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: what was the trivial change you were referring to
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950500' id='549721'>
<a class='timestamp' href='#549721'><time timestamp='2017-06-08T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: change the record name for the &#x27;best block hash&#x27; entry
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950500' id='549722'>
<a class='timestamp' href='#549722'><time timestamp='2017-06-08T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the database stores a record to indicate the current tip; we can just change that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950500' id='549723'>
<a class='timestamp' href='#549723'><time timestamp='2017-06-08T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and set the old one to something invalid
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950560' id='549724'>
<a class='timestamp' href='#549724'><time timestamp='2017-06-08T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
[19:35:19] &lt;sipa&gt; though i&#x27;d prefer to not need 2x disk storage during the upgrade &lt;-- IMO unavoidable if the &quot;user gets tired of waiting and runs old version&quot; is desired to work okay
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950560' id='549725'>
<a class='timestamp' href='#549725'><time timestamp='2017-06-08T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
FWIW the non-atomic flushing change already changes those records around.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950560' id='549726'>
<a class='timestamp' href='#549726'><time timestamp='2017-06-08T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yup     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950560' id='549727'>
<a class='timestamp' href='#549727'><time timestamp='2017-06-08T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, in a backward compatible way
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950560' id='549728'>
<a class='timestamp' href='#549728'><time timestamp='2017-06-08T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t think we should support user gets tired of waiting.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950560' id='549729'>
<a class='timestamp' href='#549729'><time timestamp='2017-06-08T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
too high a cost for too low a benefit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950560' id='549730'>
<a class='timestamp' href='#549730'><time timestamp='2017-06-08T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s even easier if it doesn&#x27;t need to be backward compatible
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950620' id='549731'>
<a class='timestamp' href='#549731'><time timestamp='2017-06-08T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: yes we shouldn&#x27;t support it, but it might be nice to support they tried to do it and didn&#x27;t corrupt their database by trying so they now have to reindex
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950620' id='549732'>
<a class='timestamp' href='#549732'><time timestamp='2017-06-08T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: yes, in practice that is the case but it isn&#x27;t guarenteed. We could make it guarenteed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950620' id='549733'>
<a class='timestamp' href='#549733'><time timestamp='2017-06-08T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: well just exiting and continuing the upgrade later would be ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950680' id='549734'>
<a class='timestamp' href='#549734'><time timestamp='2017-06-08T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: yea, that works except we don&#x27;t have an exit button other than kill -9 :) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950680' id='549735'>
<a class='timestamp' href='#549735'><time timestamp='2017-06-08T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: also, i don&#x27;t understand why the CompactRange doesn&#x27;t work for you
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950680' id='549736'>
<a class='timestamp' href='#549736'><time timestamp='2017-06-08T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if it&#x27;s not guaranteed (or even not likely) to work, maybe the 2x disk storage is inevitable
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950680' id='549737'>
<a class='timestamp' href='#549737'><time timestamp='2017-06-08T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and we&#x27;re better off explicitly creating a new db
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950680' id='549738'>
<a class='timestamp' href='#549738'><time timestamp='2017-06-08T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: I don&#x27;t know either, could try it again if you think it&#x27;s a fluke...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950680' id='549739'>
<a class='timestamp' href='#549739'><time timestamp='2017-06-08T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;ll test it myself again too
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950680' id='549740'>
<a class='timestamp' href='#549740'><time timestamp='2017-06-08T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I tested an earlier range compacting patch and it did work.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950740' id='549741'>
<a class='timestamp' href='#549741'><time timestamp='2017-06-08T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;ll also test.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950740' id='549742'>
<a class='timestamp' href='#549742'><time timestamp='2017-06-08T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
monitor disk usage during upgrade, with and without compactrange patch
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950740' id='549743'>
<a class='timestamp' href='#549743'><time timestamp='2017-06-08T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
would be nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950740' id='549744'>
<a class='timestamp' href='#549744'><time timestamp='2017-06-08T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and maybe this discussion depends on the outcome there
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950740' id='549745'>
<a class='timestamp' href='#549745'><time timestamp='2017-06-08T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
if indeed compacting isn&#x27;t reliable we should change to create a new database. IMO
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950800' id='549746'>
<a class='timestamp' href='#549746'><time timestamp='2017-06-08T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950800' id='549747'>
<a class='timestamp' href='#549747'><time timestamp='2017-06-08T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it might have to do with my test framework, I&#x27;ll copy the database directory next time instead of using my usual hardlink hack
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950860' id='549748'>
<a class='timestamp' href='#549748'><time timestamp='2017-06-08T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(FWIW, the reason I checked compacting before is because I was going to suggest changing to a new database if it didn&#x27;t work.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950860' id='549749'>
<a class='timestamp' href='#549749'><time timestamp='2017-06-08T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
other topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950860' id='549750'>
<a class='timestamp' href='#549750'><time timestamp='2017-06-08T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
crc32 leveldb 1.20?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950860' id='549751'>
<a class='timestamp' href='#549751'><time timestamp='2017-06-08T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
^     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950860' id='549752'>
<a class='timestamp' href='#549752'><time timestamp='2017-06-08T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic crc32 leveldb 1.20
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950860' id='549753'>
<a class='timestamp' href='#549753'><time timestamp='2017-06-08T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
gmaxwell: agreed on cost/benefit for supporting interruption, much easier to require confirmation with a warning &quot;this may take a while and cannot be interrupted&quot; or something
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950920' id='549754'>
<a class='timestamp' href='#549754'><time timestamp='2017-06-08T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: Why is travis failing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950920' id='549755'>
<a class='timestamp' href='#549755'><time timestamp='2017-06-08T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i personally really dislike the approach they&#x27;re using (which seems to be the advised way even), which requires a separate object compiled with different flags
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950920' id='549756'>
<a class='timestamp' href='#549756'><time timestamp='2017-06-08T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i assume incompatibility with our own build system integration of leveldb
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950920' id='549757'>
<a class='timestamp' href='#549757'><time timestamp='2017-06-08T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
compiling a separate object with special flags is  pretty much the standard way of doing it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950920' id='549758'>
<a class='timestamp' href='#549758'><time timestamp='2017-06-08T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
they&#x27;re even abusing it... they&#x27;re calling the new object without knowing that the CPU supports it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950980' id='549759'>
<a class='timestamp' href='#549759'><time timestamp='2017-06-08T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok, that&#x27;s not good
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950980' id='549760'>
<a class='timestamp' href='#549760'><time timestamp='2017-06-08T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Compiling a new object with different flags is standard and correct,  calling it without knowing, is wrong.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950980' id='549761'>
<a class='timestamp' href='#549761'><time timestamp='2017-06-08T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950980' id='549762'>
<a class='timestamp' href='#549762'><time timestamp='2017-06-08T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the detection function should not be in that object
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950980' id='549763'>
<a class='timestamp' href='#549763'><time timestamp='2017-06-08T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the approach in #10377 is so much easier 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950980' id='549764'>
<a class='timestamp' href='#549764'><time timestamp='2017-06-08T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10377" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10377</a> | Use rdrand as entropy source on supported platforms by sipa · Pull Request #10377 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496950980' id='549765'>
<a class='timestamp' href='#549765'><time timestamp='2017-06-08T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
simple as that
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951040' id='549766'>
<a class='timestamp' href='#549766'><time timestamp='2017-06-08T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that only works because you don&#x27;t spell out the instruction but put it in binary, if you spelled out the instruction it would have to be compiled with a special flag
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951040' id='549767'>
<a class='timestamp' href='#549767'><time timestamp='2017-06-08T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
you can&#x27;t use e.g. sse4.2 instructions if the object isn&#x27;t compiled with that
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951100' id='549768'>
<a class='timestamp' href='#549768'><time timestamp='2017-06-08T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
IIRC MSVC has banned inline ASM, if we don&#x27;t care about MSVC then we&#x27;re free to do other things.  However, you need to do the object thing if you want to use code that accesses simd via intrensics, for something like rdrand or clmul it&#x27;s no big deal to use asm.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951100' id='549769'>
<a class='timestamp' href='#549769'><time timestamp='2017-06-08T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951100' id='549770'>
<a class='timestamp' href='#549770'><time timestamp='2017-06-08T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: yes, intrinsics are more compatible
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951100' id='549771'>
<a class='timestamp' href='#549771'><time timestamp='2017-06-08T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
here!
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951160' id='549772'>
<a class='timestamp' href='#549772'><time timestamp='2017-06-08T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so we need to fix leveldb to now call into that object without having done the detection. Anything else needed there?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951160' id='549773'>
<a class='timestamp' href='#549773'><time timestamp='2017-06-08T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I don&#x27;t think leveldb&#x27;s way is wrong, except for putting the detection function in the instruction-set specific object
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951220' id='549774'>
<a class='timestamp' href='#549774'><time timestamp='2017-06-08T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, i was supposed to mention cfields_ would be late
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951220' id='549775'>
<a class='timestamp' href='#549775'><time timestamp='2017-06-08T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
heh, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951220' id='549776'>
<a class='timestamp' href='#549776'><time timestamp='2017-06-08T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
maybe we can open an issue on their repo or something?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951220' id='549777'>
<a class='timestamp' href='#549777'><time timestamp='2017-06-08T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
you&#x27;re welcome :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951220' id='549778'>
<a class='timestamp' href='#549778'><time timestamp='2017-06-08T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jtimon: the issue is in our own build system integration, i&#x27;m sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951220' id='549779'>
<a class='timestamp' href='#549779'><time timestamp='2017-06-08T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not upstream
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549780'>
<a class='timestamp' href='#549780'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, you mean for calling the machine specific object? yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549781'>
<a class='timestamp' href='#549781'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
wouldn&#x27;t upstream have the same problem then?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549782'>
<a class='timestamp' href='#549782'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jtimon might have been referring to the detection in the wrong object, thats just wrong.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549783'>
<a class='timestamp' href='#549783'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah, agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549784'>
<a class='timestamp' href='#549784'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if they ever look at issues...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549785'>
<a class='timestamp' href='#549785'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
gmaxwell: sipa right
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549786'>
<a class='timestamp' href='#549786'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we should submit a fix, it should be trivial.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549787'>
<a class='timestamp' href='#549787'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
that&#x27;s done already: <a href="https://github.com/theuni/bitcoin/commit/2cb7dda13884e44105f33c16e7e2c1a9aed46295" class="link" target="_blank">https://github.com/theuni/bitcoin/commit/2cb7dda13884e44105f33c16e7e2c1a9aed46295</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549788'>
<a class='timestamp' href='#549788'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes better to submit a fix, submitting an issue likely won&#x27;t help
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549789'>
<a class='timestamp' href='#549789'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields_: oh!
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549790'>
<a class='timestamp' href='#549790'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
or are you guys talking about something else?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549791'>
<a class='timestamp' href='#549791'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
probably not
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951280' id='549792'>
<a class='timestamp' href='#549792'><time timestamp='2017-06-08T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
let&#x27;s try
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951340' id='549793'>
<a class='timestamp' href='#549793'><time timestamp='2017-06-08T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
okay, we have actions here.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951340' id='549794'>
<a class='timestamp' href='#549794'><time timestamp='2017-06-08T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
lol &lt;long discussion&gt; oh, cfields did it already
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951340' id='549795'>
<a class='timestamp' href='#549795'><time timestamp='2017-06-08T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
that enables the runtime detection and separate object, but iirc there&#x27;s still a little generic code that may end up with the wrong instructions
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951340' id='549796'>
<a class='timestamp' href='#549796'><time timestamp='2017-06-08T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields_: yup...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951400' id='549797'>
<a class='timestamp' href='#549797'><time timestamp='2017-06-08T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
that just needs to be moved into another file, I expect.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951400' id='549798'>
<a class='timestamp' href='#549798'><time timestamp='2017-06-08T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yup     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951400' id='549799'>
<a class='timestamp' href='#549799'><time timestamp='2017-06-08T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
let&#x27;s do that independently
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951400' id='549800'>
<a class='timestamp' href='#549800'><time timestamp='2017-06-08T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, move all the code out of it except for the function itself
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951400' id='549801'>
<a class='timestamp' href='#549801'><time timestamp='2017-06-08T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
should be a trivial patch we can take locally and send upstream.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951400' id='549802'>
<a class='timestamp' href='#549802'><time timestamp='2017-06-08T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
i even linked it on the PR! :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951400' id='549803'>
<a class='timestamp' href='#549803'><time timestamp='2017-06-08T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
heh, sorry I was late. Movers showed up at 3:00 exactly :\
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951460' id='549804'>
<a class='timestamp' href='#549804'><time timestamp='2017-06-08T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We&#x27;ll need to do the same thing for SSE4 (and sha2 instruction) sha2.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951460' id='549805'>
<a class='timestamp' href='#549805'><time timestamp='2017-06-08T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
cfields_: that doesn&#x27;t seem related the meeting started at 21:00 :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951460' id='549806'>
<a class='timestamp' href='#549806'><time timestamp='2017-06-08T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
from what I remember that&#x27;s actual assembly code from intel, in .s format, not using intrinsics
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951520' id='549807'>
<a class='timestamp' href='#549807'><time timestamp='2017-06-08T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
ah. okay!
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951520' id='549808'>
<a class='timestamp' href='#549808'><time timestamp='2017-06-08T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jtimon: 3:00 is meeting time for east USA
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951520' id='549809'>
<a class='timestamp' href='#549809'><time timestamp='2017-06-08T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
luke-jr: sure, bad joke, sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951520' id='549810'>
<a class='timestamp' href='#549810'><time timestamp='2017-06-08T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
i suspect I missed this discussion too, but I have intrinsics done for sha2
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951520' id='549811'>
<a class='timestamp' href='#549811'><time timestamp='2017-06-08T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I usually expect corporate code to be intrinsics because having good performance is not enterprise enough. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951520' id='549812'>
<a class='timestamp' href='#549812'><time timestamp='2017-06-08T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
<a href="https://github.com/laanwj/bitcoin/commit/7e3e717892d96cae7f05dd1b6742425a298cc12e" class="link" target="_blank">https://github.com/laanwj/bitcoin/commit/7e3e717892d96cae7f05dd1b6742425a298cc12e</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951580' id='549813'>
<a class='timestamp' href='#549813'><time timestamp='2017-06-08T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s even in yasm format
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951580' id='549814'>
<a class='timestamp' href='#549814'><time timestamp='2017-06-08T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
wumpus: ah, i&#x27;ll shut up :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951580' id='549815'>
<a class='timestamp' href='#549815'><time timestamp='2017-06-08T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;m very exicited about getting the faster hash in, with all our other improvements, I&#x27;m now expecting a 8% IBD speedup. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951580' id='549816'>
<a class='timestamp' href='#549816'><time timestamp='2017-06-08T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
if not more.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951580' id='549817'>
<a class='timestamp' href='#549817'><time timestamp='2017-06-08T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields_: you mean sha-specific instructions? the stuff I quote is from before that
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951640' id='549818'>
<a class='timestamp' href='#549818'><time timestamp='2017-06-08T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-2'> * jtimon</span>&gt;
was used to the other notation and used assemble with nasm, but it&#x27;s pretty sure we don&#x27;t want that
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951640' id='549819'>
<a class='timestamp' href='#549819'><time timestamp='2017-06-08T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
wumpus: yea, intrinsics for intel sha1/2
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951640' id='549820'>
<a class='timestamp' href='#549820'><time timestamp='2017-06-08T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it just implements a SHA using SSE4/AVX, so it works on older architectures..
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951640' id='549821'>
<a class='timestamp' href='#549821'><time timestamp='2017-06-08T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jtimon: ha, cool
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951640' id='549822'>
<a class='timestamp' href='#549822'><time timestamp='2017-06-08T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: no license issues?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951640' id='549823'>
<a class='timestamp' href='#549823'><time timestamp='2017-06-08T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
sipa: not cool, I should have learned with the at &amp; t notation, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951700' id='549824'>
<a class='timestamp' href='#549824'><time timestamp='2017-06-08T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: it&#x27;s permissively licensed IIRC.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951700' id='549825'>
<a class='timestamp' href='#549825'><time timestamp='2017-06-08T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
wumpus: ah, nice. I suspect that&#x27;s where the leveldb discussion came from. We can re-use the build-time logic for sure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951700' id='549826'>
<a class='timestamp' href='#549826'><time timestamp='2017-06-08T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: it&#x27;s either MIT or BSD
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951700' id='549827'>
<a class='timestamp' href='#549827'><time timestamp='2017-06-08T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jtimon: just swap the argument order :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951700' id='549828'>
<a class='timestamp' href='#549828'><time timestamp='2017-06-08T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
spot-the-license <a href="https://github.com/laanwj/bitcoin/blob/7e3e717892d96cae7f05dd1b6742425a298cc12e/src/crypto/sha256_avx1.asm#L10" class="link" target="_blank">https://github.com/laanwj/bitcoin/blob/7e3e717892d96cae7f05dd1b6742425a298cc12e/src/crypto/sha256_avx1.asm#L10</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951700' id='549829'>
<a class='timestamp' href='#549829'><time timestamp='2017-06-08T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Before the metting closes, I&#x27;d like to remind people that Matt&#x27;s caching change #10192 is a 31% block connection speedup.  It&#x27;s done, rebased current, and needs review.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951700' id='549830'>
<a class='timestamp' href='#549830'><time timestamp='2017-06-08T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10192" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10192</a> | Cache full script execution results in addition to signatures by TheBlueMatt · Pull Request #10192 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951760' id='549831'>
<a class='timestamp' href='#549831'><time timestamp='2017-06-08T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic cache full script execution
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951760' id='549832'>
<a class='timestamp' href='#549832'><time timestamp='2017-06-08T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
sipa: yeah, I think that&#x27;s mostly it, and some minor things I think, but I was too lazzy to translate the programs I had
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951820' id='549833'>
<a class='timestamp' href='#549833'><time timestamp='2017-06-08T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t know that there is too much to say about 10192. It saves a lot of operations when checking if an already validated tx is cached.  It&#x27;s fairly straight forward.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951880' id='549834'>
<a class='timestamp' href='#549834'><time timestamp='2017-06-08T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah, let&#x27;s do it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951880' id='549835'>
<a class='timestamp' href='#549835'><time timestamp='2017-06-08T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
seems it had a lot of review, no (ut)ACKs though
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951880' id='549836'>
<a class='timestamp' href='#549836'><time timestamp='2017-06-08T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;m working on an ACK now. Just want other people to look, it sat for a long time needing rebase.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951940' id='549837'>
<a class='timestamp' href='#549837'><time timestamp='2017-06-08T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951940' id='549838'>
<a class='timestamp' href='#549838'><time timestamp='2017-06-08T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
on the list
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951940' id='549839'>
<a class='timestamp' href='#549839'><time timestamp='2017-06-08T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
+1     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951940' id='549840'>
<a class='timestamp' href='#549840'><time timestamp='2017-06-08T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s already on the high priority for review list
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951940' id='549841'>
<a class='timestamp' href='#549841'><time timestamp='2017-06-08T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The non-atomic flush stuff is also still outstanding, but I think it might get slightly changed based on todays per txo discussion.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496951940' id='549842'>
<a class='timestamp' href='#549842'><time timestamp='2017-06-08T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields_: yours commit (after trivial cherry pick) works
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952000' id='549843'>
<a class='timestamp' href='#549843'><time timestamp='2017-06-08T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#endmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952000' id='549844'>
<a class='timestamp' href='#549844'><time timestamp='2017-06-08T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Meeting ended Thu Jun  8 20:00:33 2017 UTC.  Information about MeetBot at <a href="http://wiki.debian.org/MeetBot" class="link" target="_blank">http://wiki.debian.org/MeetBot</a> . (v 0.1.4)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952000' id='549845'>
<a class='timestamp' href='#549845'><time timestamp='2017-06-08T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Minutes:        <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-06-08-19.00.html" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-06-08-19.00.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952000' id='549846'>
<a class='timestamp' href='#549846'><time timestamp='2017-06-08T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Minutes (text): <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-06-08-19.00.txt" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-06-08-19.00.txt</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952000' id='549847'>
<a class='timestamp' href='#549847'><time timestamp='2017-06-08T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Log:            <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-06-08-19.00.log.html" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-06-08-19.00.log.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952000' id='549848'>
<a class='timestamp' href='#549848'><time timestamp='2017-06-08T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952060' id='549849'>
<a class='timestamp' href='#549849'><time timestamp='2017-06-08T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
#10512&#x27;s travis failure is being weird :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952060' id='549850'>
<a class='timestamp' href='#549850'><time timestamp='2017-06-08T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10512" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10512</a> | Rework same-chain from abusing DoS banning, to explicit checks by luke-jr · Pull Request #10512 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952060' id='549851'>
<a class='timestamp' href='#549851'><time timestamp='2017-06-08T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
it seems like adding debugging logging is fixing the test
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952120' id='549852'>
<a class='timestamp' href='#549852'><time timestamp='2017-06-08T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, a heisenbu
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952120' id='549853'>
<a class='timestamp' href='#549853'><time timestamp='2017-06-08T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
+g     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952120' id='549854'>
<a class='timestamp' href='#549854'><time timestamp='2017-06-08T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
heisentypu
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952120' id='549855'>
<a class='timestamp' href='#549855'><time timestamp='2017-06-08T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
aside, I have a fair amount of distaste for intrensics; they&#x27;re slightly more portable but for a long time they had poor performance because they left register allocation up to the compliler and it usually did it wrong.    But newer compilers have been much better about register allocation around simd code. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952120' id='549856'>
<a class='timestamp' href='#549856'><time timestamp='2017-06-08T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
luke-jr: double the debug logging, close as fixed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952240' id='549857'>
<a class='timestamp' href='#549857'><time timestamp='2017-06-08T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
oh wait, I&#x27;m wrong. <b>*rubs eyes*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952240' id='549858'>
<a class='timestamp' href='#549858'><time timestamp='2017-06-08T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
forgot I had started a bisect last night
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952240' id='549859'>
<a class='timestamp' href='#549859'><time timestamp='2017-06-08T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I have the feeling that some who didn&#x27;t like #10339 may not like #8498 either for similar reasons
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952240' id='549860'>
<a class='timestamp' href='#549860'><time timestamp='2017-06-08T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10339" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10339</a> | Optimization: Calculate block hash less times by jtimon · Pull Request #10339 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952240' id='549861'>
<a class='timestamp' href='#549861'><time timestamp='2017-06-08T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
for ARM32, intrinsics were pretty bad, apparently there were some changes in ARM64 arch making them better suited for optimization by compilers
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952240' id='549862'>
<a class='timestamp' href='#549862'><time timestamp='2017-06-08T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8498" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8498</a> | Optimization: Minimize the number of times it is checked that no money... by jtimon · Pull Request #8498 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952300' id='549863'>
<a class='timestamp' href='#549863'><time timestamp='2017-06-08T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
BlueMatt: morcos ^^
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952300' id='549864'>
<a class='timestamp' href='#549864'><time timestamp='2017-06-08T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Sorry about earlier with jtimon caching patch,  I thought I had expressed the view that I thought the change was adding complexity-- on reread of my comment I can see that my effort to be more constructive (in the form of offering &quot;why not just cache&quot;) backfired.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952360' id='549865'>
<a class='timestamp' href='#549865'><time timestamp='2017-06-08T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t really think the complexity it adds is that big a deal. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952360' id='549866'>
<a class='timestamp' href='#549866'><time timestamp='2017-06-08T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but if reducing the number of header hashing operations isn&#x27;t worth it in the bigger scheme of things, it&#x27;s a boondoggle
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952360' id='549867'>
<a class='timestamp' href='#549867'><time timestamp='2017-06-08T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
gmaxwell: I think you were clear: you preferred a cache, but since there were more comments and you didn&#x27;t say anything else, I assumed it wasn&#x27;t a strong preference
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952360' id='549868'>
<a class='timestamp' href='#549868'><time timestamp='2017-06-08T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: i&#x27;m not convinced it&#x27;s not worth it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952420' id='549869'>
<a class='timestamp' href='#549869'><time timestamp='2017-06-08T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
sipa: i can patch up leveldb to move all ops to that file, if you&#x27;re not already working on it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952420' id='549870'>
<a class='timestamp' href='#549870'><time timestamp='2017-06-08T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
is there a benchmarking tutorial somewhere ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952420' id='549871'>
<a class='timestamp' href='#549871'><time timestamp='2017-06-08T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: but it will (if at all) only be relevant for blocks with pre-cached utxos, pre-checked sigs, already loaded...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952420' id='549872'>
<a class='timestamp' href='#549872'><time timestamp='2017-06-08T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which is what matters for relay, not reindex
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952480' id='549873'>
<a class='timestamp' href='#549873'><time timestamp='2017-06-08T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: well for what it&#x27;s worth it also helped with the number of hashes in reindex
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952480' id='549874'>
<a class='timestamp' href='#549874'><time timestamp='2017-06-08T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: i very much doubt it will be significant if you could all SHA256 operations (as opposed to just block header hashes)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952480' id='549875'>
<a class='timestamp' href='#549875'><time timestamp='2017-06-08T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*count
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952480' id='549876'>
<a class='timestamp' href='#549876'><time timestamp='2017-06-08T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
yeah, it should reduce the number of hashes when validating a block
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952540' id='549877'>
<a class='timestamp' href='#549877'><time timestamp='2017-06-08T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
luke-jr: I&#x27;ve noticed an issue with zmq_test.py not exiting correctly. #10555 fixes that and also adds a timeout for individual tests (which means travis should show more useful output if one of the tests hangs). Try rebasing your PR on that and see if it helps.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952540' id='549878'>
<a class='timestamp' href='#549878'><time timestamp='2017-06-08T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10555" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10555</a> | [tests] various improvements to zmq_test.py by jnewbery · Pull Request #10555 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952540' id='549879'>
<a class='timestamp' href='#549879'><time timestamp='2017-06-08T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well the point of the pull was to reduce header hashes, so that&#x27;s what I counted
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952540' id='549880'>
<a class='timestamp' href='#549880'><time timestamp='2017-06-08T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
jtimon: I
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952540' id='549881'>
<a class='timestamp' href='#549881'><time timestamp='2017-06-08T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m sure it reduces header hashes (and thanks for the concrete evidence for that)... but there are probably 2 orders of magnitude more hashes in computing merkle trees
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952540' id='549882'>
<a class='timestamp' href='#549882'><time timestamp='2017-06-08T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but I don&#x27;t care, won&#x27;t spend any more time on it at least
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952600' id='549883'>
<a class='timestamp' href='#549883'><time timestamp='2017-06-08T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
:)     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952600' id='549884'>
<a class='timestamp' href='#549884'><time timestamp='2017-06-08T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields_: that should go in our leveldb repo then
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952600' id='549885'>
<a class='timestamp' href='#549885'><time timestamp='2017-06-08T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
... or upstream
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952600' id='549886'>
<a class='timestamp' href='#549886'><time timestamp='2017-06-08T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
jtimon: I&#x27;d need to look at 8498 more closely, but that one doesn&#x27;t not seem to me to add that much complication.. it might be a nicer layout..  but i need to spend more time thinking it through
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952600' id='549887'>
<a class='timestamp' href='#549887'><time timestamp='2017-06-08T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
sipa: sure, first one, then the other
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952660' id='549888'>
<a class='timestamp' href='#549888'><time timestamp='2017-06-08T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jtimon: it wasn&#x27;t a strong preference, I&#x27;m okay with that PR if pieter is okay with it.  Though morcos seems to have stronger views.
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952660' id='549889'>
<a class='timestamp' href='#549889'><time timestamp='2017-06-08T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
morcos: thank you for the fast look, that already helps
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952720' id='549890'>
<a class='timestamp' href='#549890'><time timestamp='2017-06-08T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
gmaxwell: yeah, that&#x27;s why I should learn to benchmark these things, I&#x27;m sure it isn&#x27;t hard and it&#x27;s just that I&#x27;ve never tried
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952720' id='549891'>
<a class='timestamp' href='#549891'><time timestamp='2017-06-08T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
like i said, i personally don&#x27;t love the direction that 10339 goes, but if other people have already done the review and like it, i don&#x27;t think its worth further debate to stop it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952780' id='549892'>
<a class='timestamp' href='#549892'><time timestamp='2017-06-08T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it seems like premature optimization that makes the code less easy to use to me, but not something terrible
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952780' id='549893'>
<a class='timestamp' href='#549893'><time timestamp='2017-06-08T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right - perhaps there is no noticable performance gain, in which case it&#x27;s obviously not worth it
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952840' id='549894'>
<a class='timestamp' href='#549894'><time timestamp='2017-06-08T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i soft of assumed there would be, and if that&#x27;s the case, i think passing along a hash of an object with the object itself is a very reasonable thing to do
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952840' id='549895'>
<a class='timestamp' href='#549895'><time timestamp='2017-06-08T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but perhaps all of this is premature
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952840' id='549896'>
<a class='timestamp' href='#549896'><time timestamp='2017-06-08T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952840' id='549897'>
<a class='timestamp' href='#549897'><time timestamp='2017-06-08T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s all up to finding a way to benchmark it then
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952900' id='549898'>
<a class='timestamp' href='#549898'><time timestamp='2017-06-08T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i believe we should perhaps postpone this until after #10192
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952900' id='549899'>
<a class='timestamp' href='#549899'><time timestamp='2017-06-08T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10192" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10192</a> | Cache full script execution results in addition to signatures by TheBlueMatt · Pull Request #10192 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952900' id='549900'>
<a class='timestamp' href='#549900'><time timestamp='2017-06-08T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and then use the benchmark strategy that BlueMatt used there
<br>
</div>

<div class='talk op-msg' data-timestamp='1496952960' id='549901'>
<a class='timestamp' href='#549901'><time timestamp='2017-06-08T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or use some replay that feeds transactions and blocks into bitcoind over p2p...
<br>
</div>

<div class='talk op-msg' data-timestamp='1496953080' id='549902'>
<a class='timestamp' href='#549902'><time timestamp='2017-06-08T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I&#x27;ll go look that benchmarking stratedy
<br>
</div>

<div class='talk op-msg' data-timestamp='1496953500' id='549903'>
<a class='timestamp' href='#549903'><time timestamp='2017-06-08T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think there is a simpler way to argue the performance: benchmark hashing a header, and then count how many hashes the change saves.  Total saved time is no more than the product. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496953500' id='549904'>
<a class='timestamp' href='#549904'><time timestamp='2017-06-08T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the playback would work using morcos&#x27;s data
<br>
</div>

<div class='talk op-msg' data-timestamp='1496953560' id='549905'>
<a class='timestamp' href='#549905'><time timestamp='2017-06-08T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
so how did you counted it was about 6 ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1496953620' id='549906'>
<a class='timestamp' href='#549906'><time timestamp='2017-06-08T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jtimon: <a href="https://github.com/laanwj/bitcoin/commit/fcfd20ea01f413dd2aa19b0013fe2b7aa2e47ad8" class="link" target="_blank">https://github.com/laanwj/bitcoin/commit/fcfd20ea01f413dd2aa19b0013fe2b7aa2e47ad8</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496954700' id='549907'>
<a class='timestamp' href='#549907'><time timestamp='2017-06-08T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
wumpus: thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1496955900' id='549908'>
<a class='timestamp' href='#549908'><time timestamp='2017-06-08T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] morcos opened pull request #10559: Change semantics of HaveCoinInCache to match HaveCoin (master...haveunspentincache) <a href="https://github.com/bitcoin/bitcoin/pull/10559" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10559</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957160' id='549909'>
<a class='timestamp' href='#549909'><time timestamp='2017-06-08T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Am I alone in thinking we should have more comments in the code and commit message vs PRs?   E.g. when I wanted to cite the multiply/shift hash trick for the mailing list, I first looked at the source-- no explination of what its doing,  then the commit message that added the change,  all it said was allow non-power-of-two cache sizes, -- the PR text had the citation I wanted <a href="https://github.com/" class="link" target="_blank">https://github.com/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957160' id='549910'>
<a class='timestamp' href='#549910'><time timestamp='2017-06-08T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
bitcoin/bitcoin/pull/9533
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957280' id='549911'>
<a class='timestamp' href='#549911'><time timestamp='2017-06-08T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no, more (useful) source code comments would be nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957280' id='549912'>
<a class='timestamp' href='#549912'><time timestamp='2017-06-08T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;m always happy if people add them, or other documentation for that matter
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957340' id='549913'>
<a class='timestamp' href='#549913'><time timestamp='2017-06-08T21:29:00Z'>21:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
agreed, i&#x27;ve at least started to incororate most of my PR messages in the commits 
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957340' id='549914'>
<a class='timestamp' href='#549914'><time timestamp='2017-06-08T21:29:00Z'>21:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but more source code commentary would be good too, although it sometimes gets a bit stale when a major PR changes a lot of pieces
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957400' id='549915'>
<a class='timestamp' href='#549915'><time timestamp='2017-06-08T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes that&#x27;s the drawback, keeping comments up to date is extra maintenance work
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957400' id='549916'>
<a class='timestamp' href='#549916'><time timestamp='2017-06-08T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ideal would be self-illustrating code
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957400' id='549917'>
<a class='timestamp' href='#549917'><time timestamp='2017-06-08T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but uh, yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957400' id='549918'>
<a class='timestamp' href='#549918'><time timestamp='2017-06-08T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: I agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957460' id='549919'>
<a class='timestamp' href='#549919'><time timestamp='2017-06-08T21:31:00Z'>21:31</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
instead of answering questions on PRs, we should interpret it as a bug that it&#x27;s underdocumented ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957460' id='549920'>
<a class='timestamp' href='#549920'><time timestamp='2017-06-08T21:31:00Z'>21:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;ve tried, there&#x27;s many times I&#x27;ve encouraged people to add a code comment instead of just mentioning the rationale in a PR/commit message
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957520' id='549921'>
<a class='timestamp' href='#549921'><time timestamp='2017-06-08T21:32:00Z'>21:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
in any case being able to find it in the commit message or even PR is still better than if it was some discussion on IRC :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1496957640' id='549922'>
<a class='timestamp' href='#549922'><time timestamp='2017-06-08T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
heh     
<br>
</div>

<div class='talk op-msg' data-timestamp='1496959680' id='549923'>
<a class='timestamp' href='#549923'><time timestamp='2017-06-08T22:08:00Z'>22:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift closed pull request #10343: Remove redundant on-the-same-line-repetition of type names (DRY): RepeatedTypeName foo = static_cast&lt;RepeatedTypeName&gt;(bar) (master...auto) <a href="https://github.com/bitcoin/bitcoin/pull/10343" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10343</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496964060' id='549924'>
<a class='timestamp' href='#549924'><time timestamp='2017-06-08T23:21:00Z'>23:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #10560: Remove non-existing &quot;force safe mode&quot; (-testsafemode). Remove unused constants. (master...noop-modes) <a href="https://github.com/bitcoin/bitcoin/pull/10560" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10560</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1496964900' id='549925'>
<a class='timestamp' href='#549925'><time timestamp='2017-06-08T23:35:00Z'>23:35</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #10561: Remove duplicate includes (master...remove-duplicate-includes) <a href="https://github.com/bitcoin/bitcoin/pull/10561" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10561</a>
<br>
</div>

</div>
</section>

</body>
</html>
