<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-01-11
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-01-11' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:25 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-12-11">&lt;</a><span class='header'>   January 2017   </span><a href="/bitcoin-core-dev/2017-02-11">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2017-01-01">1</a>  <a class="" href="/bitcoin-core-dev/2017-01-02">2</a>  <a class="" href="/bitcoin-core-dev/2017-01-03">3</a>  <a class="" href="/bitcoin-core-dev/2017-01-04">4</a>  <a class="" href="/bitcoin-core-dev/2017-01-05">5</a>  <a class="" href="/bitcoin-core-dev/2017-01-06">6</a>  <a class="" href="/bitcoin-core-dev/2017-01-07">7</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-01-08">8</a>  <a class="" href="/bitcoin-core-dev/2017-01-09">9</a> <a class="" href="/bitcoin-core-dev/2017-01-10">10</a> <a class="current" href="/bitcoin-core-dev/2017-01-11">11</a> <a class="" href="/bitcoin-core-dev/2017-01-12">12</a> <a class="" href="/bitcoin-core-dev/2017-01-13">13</a> <a class="" href="/bitcoin-core-dev/2017-01-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-01-15">15</a> <a class="" href="/bitcoin-core-dev/2017-01-16">16</a> <a class="" href="/bitcoin-core-dev/2017-01-17">17</a> <a class="" href="/bitcoin-core-dev/2017-01-18">18</a> <a class="" href="/bitcoin-core-dev/2017-01-19">19</a> <a class="" href="/bitcoin-core-dev/2017-01-20">20</a> <a class="" href="/bitcoin-core-dev/2017-01-21">21</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-01-22">22</a> <a class="" href="/bitcoin-core-dev/2017-01-23">23</a> <a class="" href="/bitcoin-core-dev/2017-01-24">24</a> <a class="" href="/bitcoin-core-dev/2017-01-25">25</a> <a class="" href="/bitcoin-core-dev/2017-01-26">26</a> <a class="" href="/bitcoin-core-dev/2017-01-27">27</a> <a class="" href="/bitcoin-core-dev/2017-01-28">28</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-01-29">29</a> <a class="" href="/bitcoin-core-dev/2017-01-30">30</a> <a class="" href="/bitcoin-core-dev/2017-01-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1484094900' id='522262'>
<a class='timestamp' href='#522262'><time timestamp='2017-01-11T00:35:00Z'>00:35</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theuni closed pull request #9509: build: fix qt distdir builds (master...out-of-tree-build) <a href="https://github.com/bitcoin/bitcoin/pull/9509" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9509</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484097060' id='522263'>
<a class='timestamp' href='#522263'><time timestamp='2017-01-11T01:11:00Z'>01:11</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theuni opened pull request #9513: build: fix qt distdir builds (retry) (master...out-of-tree-build) <a href="https://github.com/bitcoin/bitcoin/pull/9513" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9513</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484098800' id='522264'>
<a class='timestamp' href='#522264'><time timestamp='2017-01-11T01:40:00Z'>01:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theuni opened pull request #9514: release: Windows signing script (master...win-signing-script) <a href="https://github.com/bitcoin/bitcoin/pull/9514" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9514</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484119020' id='522265'>
<a class='timestamp' href='#522265'><time timestamp='2017-01-11T07:17:00Z'>07:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
cfields: is this meant to be public: <a href="https://github.com/bitcoin/bitcoin/pull/9514/files#diff-6373b8b56e3d0425bbd3b0bb32c48162" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9514/files#diff-6373b8b56e3d0425bbd3b0bb32c48162</a>?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484119440' id='522266'>
<a class='timestamp' href='#522266'><time timestamp='2017-01-11T07:24:00Z'>07:24</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
jonasschnelli, it is a certificate only
<br>
</div>

<div class='talk op-msg' data-timestamp='1484119440' id='522267'>
<a class='timestamp' href='#522267'><time timestamp='2017-01-11T07:24:00Z'>07:24</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
no privkey
<br>
</div>

<div class='talk op-msg' data-timestamp='1484119500' id='522268'>
<a class='timestamp' href='#522268'><time timestamp='2017-01-11T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
paveljanik: okay. Not familiar with windows code signing...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484119500' id='522269'>
<a class='timestamp' href='#522269'><time timestamp='2017-01-11T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
-me is not familiar with Windows at all ů=0
<br>
</div>

<div class='talk op-msg' data-timestamp='1484119500' id='522270'>
<a class='timestamp' href='#522270'><time timestamp='2017-01-11T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
;-)     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484125560' id='522271'>
<a class='timestamp' href='#522271'><time timestamp='2017-01-11T09:06:00Z'>09:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] kallewoof opened pull request #9516: Bug-fix: listsinceblock: use max depth value for blocks in reorg&#x27;d chains (master...listsinceblock-reorg-fix) <a href="https://github.com/bitcoin/bitcoin/pull/9516" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9516</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484135760' id='522272'>
<a class='timestamp' href='#522272'><time timestamp='2017-01-11T11:56:00Z'>11:56</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
rewarding 8994 (custom chainparams), how important it is that it loads the chainparams from a different conf file instead of regular args and the existing config file? the arguments will be ignored for main, testnet and regtest anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1484135820' id='522273'>
<a class='timestamp' href='#522273'><time timestamp='2017-01-11T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
NicolasDorier: regarding your vision for libconsensus, do you mind if I make some more questions here?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484135820' id='522274'>
<a class='timestamp' href='#522274'><time timestamp='2017-01-11T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1484135820' id='522275'>
<a class='timestamp' href='#522275'><time timestamp='2017-01-11T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
I think trying the following
<br>
</div>

<div class='talk op-msg' data-timestamp='1484135820' id='522276'>
<a class='timestamp' href='#522276'><time timestamp='2017-01-11T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
brand new project
<br>
</div>

<div class='talk op-msg' data-timestamp='1484135820' id='522277'>
<a class='timestamp' href='#522277'><time timestamp='2017-01-11T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
copy/pasta of bitcoin core
<br>
</div>

<div class='talk op-msg' data-timestamp='1484135820' id='522278'>
<a class='timestamp' href='#522278'><time timestamp='2017-01-11T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
then stripping everything not related to consensus
<br>
</div>

<div class='talk op-msg' data-timestamp='1484135880' id='522279'>
<a class='timestamp' href='#522279'><time timestamp='2017-01-11T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
removing all dependencies to third party libs
<br>
</div>

<div class='talk op-msg' data-timestamp='1484135880' id='522280'>
<a class='timestamp' href='#522280'><time timestamp='2017-01-11T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
well, copy paste from core or doing it in core ignoring the rest is not that different is it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484135940' id='522281'>
<a class='timestamp' href='#522281'><time timestamp='2017-01-11T11:59:00Z'>11:59</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
I think it is harder
<br>
</div>

<div class='talk op-msg' data-timestamp='1484135940' id='522282'>
<a class='timestamp' href='#522282'><time timestamp='2017-01-11T11:59:00Z'>11:59</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
like there is so much reference to the utxo storage in the consensus code.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136000' id='522283'>
<a class='timestamp' href='#522283'><time timestamp='2017-01-11T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
I would prefer being able to strip that
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136000' id='522284'>
<a class='timestamp' href='#522284'><time timestamp='2017-01-11T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
rather than trying to make interfaces
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136000' id='522285'>
<a class='timestamp' href='#522285'><time timestamp='2017-01-11T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
anyway, one frequent discussion is abstract storage yes no, you told me you say yes (like BlueMatt and me), but it seems your way of doing it it&#x27;s a bit different. ie instead of function pointers, your API assumes that all the needed data will be provided directly in the parameters
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136060' id='522286'>
<a class='timestamp' href='#522286'><time timestamp='2017-01-11T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
I changed my mind. I think the consensus lib does not have to know anything about storage, I think we can ask the client to pass the UTXO necessary for validating the block
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136060' id='522287'>
<a class='timestamp' href='#522287'><time timestamp='2017-01-11T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
but then the client needs to know which ones will be relevant before calling
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136060' id='522288'>
<a class='timestamp' href='#522288'><time timestamp='2017-01-11T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
yes, and but the client know that
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136060' id='522289'>
<a class='timestamp' href='#522289'><time timestamp='2017-01-11T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
and will need to fetch them even if the tx/block was already invalid because of something trivial
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136060' id='522290'>
<a class='timestamp' href='#522290'><time timestamp='2017-01-11T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
since he has the block
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136120' id='522291'>
<a class='timestamp' href='#522291'><time timestamp='2017-01-11T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
correct. But the client can verify PoW before fetching
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136120' id='522292'>
<a class='timestamp' href='#522292'><time timestamp='2017-01-11T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
sure, just comparing with the function pointer version of it, in both cases it will need to have the data
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136120' id='522293'>
<a class='timestamp' href='#522293'><time timestamp='2017-01-11T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
another discussion was how the client gets that data
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136180' id='522294'>
<a class='timestamp' href='#522294'><time timestamp='2017-01-11T12:03:00Z'>12:03</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
this would be the client&#x27;s business
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136180' id='522295'>
<a class='timestamp' href='#522295'><time timestamp='2017-01-11T12:03:00Z'>12:03</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
this is simple enough stuff to do
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136180' id='522296'>
<a class='timestamp' href='#522296'><time timestamp='2017-01-11T12:03:00Z'>12:03</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
iffunction pointer
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136180' id='522297'>
<a class='timestamp' href='#522297'><time timestamp='2017-01-11T12:03:00Z'>12:03</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
it is complicated to use, and 
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136240' id='522298'>
<a class='timestamp' href='#522298'><time timestamp='2017-01-11T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
matt advocated for, using a function pointer like interface, he would expose something like processBlock rather than only verifyBlock, that way if the block is valid it will also call the necessary function pointer api for the abstracted storage to store the new block, update the utxo, etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136240' id='522299'>
<a class='timestamp' href='#522299'><time timestamp='2017-01-11T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
if the implementation cross boundary between languages, there is huge perf hit
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136300' id='522300'>
<a class='timestamp' href='#522300'><time timestamp='2017-01-11T12:05:00Z'>12:05</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
I don&#x27;t think this is the right approach. I think it is just easier to ask the client to fetch everything preventively
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136300' id='522301'>
<a class='timestamp' href='#522301'><time timestamp='2017-01-11T12:05:00Z'>12:05</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
right, that&#x27;s the advantage of your approach, less performance hit by avoiding the function pointers (although more in some cases by prefetching everything)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136300' id='522302'>
<a class='timestamp' href='#522302'><time timestamp='2017-01-11T12:05:00Z'>12:05</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
right, just comparing the different approaches
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136360' id='522303'>
<a class='timestamp' href='#522303'><time timestamp='2017-01-11T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
this also make it harder for us to break users of consensus
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136360' id='522304'>
<a class='timestamp' href='#522304'><time timestamp='2017-01-11T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
because we would make no assumption on how they deal with their storage
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136360' id='522305'>
<a class='timestamp' href='#522305'><time timestamp='2017-01-11T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
in my model, there was no processBlock, just verifyBlock that tells you whether a block is valid or not and nothing else: the caller needs to update the storage and manage reorg and the like on his own
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136420' id='522306'>
<a class='timestamp' href='#522306'><time timestamp='2017-01-11T12:07:00Z'>12:07</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
one method is not enough, you need also to verify PoW for example. The client wants to verify PoW before pulling out the UTXOs from storage
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136420' id='522307'>
<a class='timestamp' href='#522307'><time timestamp='2017-01-11T12:07:00Z'>12:07</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
right, that&#x27;s an advantage for both the abstracted storage API or the abstracted storage by prefetching
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136480' id='522308'>
<a class='timestamp' href='#522308'><time timestamp='2017-01-11T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
the people that don&#x27;t like to abstract the storage (at least greg and pieter), are happy with libconsensus depending on levelDB
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136540' id='522309'>
<a class='timestamp' href='#522309'><time timestamp='2017-01-11T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
I don&#x27;t think libconsensus should have any dependencies
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136540' id='522310'>
<a class='timestamp' href='#522310'><time timestamp='2017-01-11T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
it should be plain dumb lib like libsecpk)#*R#)*$
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136540' id='522311'>
<a class='timestamp' href='#522311'><time timestamp='2017-01-11T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
so you would expose a function to verify pow before fetching the data? why just pow? there&#x27;s many things that can be validated without storage
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136540' id='522312'>
<a class='timestamp' href='#522312'><time timestamp='2017-01-11T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
yes other things as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136540' id='522313'>
<a class='timestamp' href='#522313'><time timestamp='2017-01-11T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
like CheckContextual *
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136600' id='522314'>
<a class='timestamp' href='#522314'><time timestamp='2017-01-11T12:10:00Z'>12:10</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
well, I think at the very least it should have libsecp256k1 as a dependency, but I agree it shouldn
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136600' id='522315'>
<a class='timestamp' href='#522315'><time timestamp='2017-01-11T12:10:00Z'>12:10</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136600' id='522316'>
<a class='timestamp' href='#522316'><time timestamp='2017-01-11T12:10:00Z'>12:10</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
&#x27;t depend on levelDB
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136600' id='522317'>
<a class='timestamp' href='#522317'><time timestamp='2017-01-11T12:10:00Z'>12:10</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
just pointing out that other people disagree
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136660' id='522318'>
<a class='timestamp' href='#522318'><time timestamp='2017-01-11T12:11:00Z'>12:11</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136660' id='522319'>
<a class='timestamp' href='#522319'><time timestamp='2017-01-11T12:11:00Z'>12:11</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
so maybe you would expose checkblock and verifyBlock separately
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136660' id='522320'>
<a class='timestamp' href='#522320'><time timestamp='2017-01-11T12:11:00Z'>12:11</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
but what I plan to do is making it the way I see, using it with my C# full node, and if people are happy with it proposing to Core
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136660' id='522321'>
<a class='timestamp' href='#522321'><time timestamp='2017-01-11T12:11:00Z'>12:11</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
makes sense, I thought about it
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136720' id='522322'>
<a class='timestamp' href='#522322'><time timestamp='2017-01-11T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
do you plan to expose lower level functions like say verifyHeader or verifyTx ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136780' id='522323'>
<a class='timestamp' href='#522323'><time timestamp='2017-01-11T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
mh depends if my full node need it. VerifyHeader yes, VerifyTx might be good for mempool, but the problem is that it should not check policy rules
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136780' id='522324'>
<a class='timestamp' href='#522324'><time timestamp='2017-01-11T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
it would
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136780' id='522325'>
<a class='timestamp' href='#522325'><time timestamp='2017-01-11T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
yeah, I think I will finish my vision on top of 0.14 and then see what happens
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136780' id='522326'>
<a class='timestamp' href='#522326'><time timestamp='2017-01-11T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
it would not check policy rules
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136780' id='522327'>
<a class='timestamp' href='#522327'><time timestamp='2017-01-11T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I was kind of doing that for 0.12 but I decided I would wait for bip9 and segwit instead
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136780' id='522328'>
<a class='timestamp' href='#522328'><time timestamp='2017-01-11T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
I am tempted to still use my C# script validator for mempool stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136840' id='522329'>
<a class='timestamp' href='#522329'><time timestamp='2017-01-11T12:14:00Z'>12:14</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
not including verifyTx
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136840' id='522330'>
<a class='timestamp' href='#522330'><time timestamp='2017-01-11T12:14:00Z'>12:14</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
right, verifyTx would not check policy rules, perhaps we can have a verifyAndAcceptTx function too, but that&#x27;s more bitcoin core specific I think
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136900' id='522331'>
<a class='timestamp' href='#522331'><time timestamp='2017-01-11T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
C# script validator? you don&#x27;t use the verifyScript in current libconsensus ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136900' id='522332'>
<a class='timestamp' href='#522332'><time timestamp='2017-01-11T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
NBitcoin has its own script validator yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136960' id='522333'>
<a class='timestamp' href='#522333'><time timestamp='2017-01-11T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
libbitcoin has his own validator as well, but optionally they allow you to use libconsensus instead
<br>
</div>

<div class='talk op-msg' data-timestamp='1484136960' id='522334'>
<a class='timestamp' href='#522334'><time timestamp='2017-01-11T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
right now the full node I did does not depends on libconsensus, but I want people to be able to activate it if they want
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137020' id='522335'>
<a class='timestamp' href='#522335'><time timestamp='2017-01-11T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
the user can turn it for the script validation as well if he wants, but I want to verify the full block with libconsensus
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137020' id='522336'>
<a class='timestamp' href='#522336'><time timestamp='2017-01-11T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
is there any reason why you don&#x27;t use libconsensus::verifyScript in nbitcoin ? do you plan to do it later?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137020' id='522337'>
<a class='timestamp' href='#522337'><time timestamp='2017-01-11T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
you can use it
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137020' id='522338'>
<a class='timestamp' href='#522338'><time timestamp='2017-01-11T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
I do not by default because there is deployment headache
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137080' id='522339'>
<a class='timestamp' href='#522339'><time timestamp='2017-01-11T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
pure C# code just run everywhere
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137080' id='522340'>
<a class='timestamp' href='#522340'><time timestamp='2017-01-11T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
oh, so then NBitcoin optionally depends on libconsensus, got it
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137080' id='522341'>
<a class='timestamp' href='#522341'><time timestamp='2017-01-11T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137140' id='522342'>
<a class='timestamp' href='#522342'><time timestamp='2017-01-11T12:19:00Z'>12:19</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
I will also add a mode where you setup a trusted node, and just do not verify the blocks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137140' id='522343'>
<a class='timestamp' href='#522343'><time timestamp='2017-01-11T12:19:00Z'>12:19</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
what about caches? what do you plan for caches? bip9 cache, sigcache?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137200' id='522344'>
<a class='timestamp' href='#522344'><time timestamp='2017-01-11T12:20:00Z'>12:20</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I mean, how do you plan to handle that with your libconsensus ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137200' id='522345'>
<a class='timestamp' href='#522345'><time timestamp='2017-01-11T12:20:00Z'>12:20</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
not yes thought about it. BIP9 I think the easiest at beginning is that the user does it. I plan in v1 that the user will pass the consensus flags to activate
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137200' id='522346'>
<a class='timestamp' href='#522346'><time timestamp='2017-01-11T12:20:00Z'>12:20</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
so libconsensus will not depends on CBlockIndex
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137260' id='522347'>
<a class='timestamp' href='#522347'><time timestamp='2017-01-11T12:21:00Z'>12:21</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
hopefully, I would like to make that into libconsensus eventually though
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137260' id='522348'>
<a class='timestamp' href='#522348'><time timestamp='2017-01-11T12:21:00Z'>12:21</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
he has to count the 95% in the last diff adjustment period manually?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137260' id='522349'>
<a class='timestamp' href='#522349'><time timestamp='2017-01-11T12:21:00Z'>12:21</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
for the other cache, I have not decided yet I dont know
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137320' id='522350'>
<a class='timestamp' href='#522350'><time timestamp='2017-01-11T12:22:00Z'>12:22</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137320' id='522351'>
<a class='timestamp' href='#522351'><time timestamp='2017-01-11T12:22:00Z'>12:22</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
not perfect for sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137320' id='522352'>
<a class='timestamp' href='#522352'><time timestamp='2017-01-11T12:22:00Z'>12:22</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I guess no approach is perfect, all have drawbacks and advantages
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137380' id='522353'>
<a class='timestamp' href='#522353'><time timestamp='2017-01-11T12:23:00Z'>12:23</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I don&#x27;t think I have any more questions, thank you!
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137380' id='522354'>
<a class='timestamp' href='#522354'><time timestamp='2017-01-11T12:23:00Z'>12:23</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
I think it is possible to make it part of libconsensus, but not yet thought about it, I would like a v1 without CBlockIndex
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137380' id='522355'>
<a class='timestamp' href='#522355'><time timestamp='2017-01-11T12:23:00Z'>12:23</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
and btw, congrats on completing a full node alt implementation, not an easy task
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137440' id='522356'>
<a class='timestamp' href='#522356'><time timestamp='2017-01-11T12:24:00Z'>12:24</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
thanks, still stuff to do though. But happy with the results so far :D
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137440' id='522357'>
<a class='timestamp' href='#522357'><time timestamp='2017-01-11T12:24:00Z'>12:24</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
it is compatible with config file of Core, and has also rpc server
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137440' id='522358'>
<a class='timestamp' href='#522358'><time timestamp='2017-01-11T12:24:00Z'>12:24</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
my goal is to reuse the test suite of bitcoin core
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137440' id='522359'>
<a class='timestamp' href='#522359'><time timestamp='2017-01-11T12:24:00Z'>12:24</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
as is
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137500' id='522360'>
<a class='timestamp' href='#522360'><time timestamp='2017-01-11T12:25:00Z'>12:25</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
to test my implementation
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137500' id='522361'>
<a class='timestamp' href='#522361'><time timestamp='2017-01-11T12:25:00Z'>12:25</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
in my approach I planned to expose a getConsensusFlags, but it would depend on a function_pointer-based API for CBlockIndex (the same I was using for verifyHeader in #8493 )
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137500' id='522362'>
<a class='timestamp' href='#522362'><time timestamp='2017-01-11T12:25:00Z'>12:25</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8493" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8493</a> | Untested: libconsensus: Expose VerifyHeader by jtimon · Pull Request #8493 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137500' id='522363'>
<a class='timestamp' href='#522363'><time timestamp='2017-01-11T12:25:00Z'>12:25</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
yes I remember
<br>
</div>

<div class='talk op-msg' data-timestamp='1484137560' id='522364'>
<a class='timestamp' href='#522364'><time timestamp='2017-01-11T12:26:00Z'>12:26</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
reusing bitcoin core&#x27;s test suite is very interesting
<br>
</div>

<div class='talk op-msg' data-timestamp='1484138700' id='522365'>
<a class='timestamp' href='#522365'><time timestamp='2017-01-11T12:45:00Z'>12:45</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/5754e0341b7c...bbf193fef049" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/5754e0341b7c...bbf193fef049</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484138700' id='522366'>
<a class='timestamp' href='#522366'><time timestamp='2017-01-11T12:45:00Z'>12:45</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 67ca130 Cory Fields: build: fix for out-of-tree/distdir qt builds
<br>
</div>

<div class='talk op-msg' data-timestamp='1484138700' id='522367'>
<a class='timestamp' href='#522367'><time timestamp='2017-01-11T12:45:00Z'>12:45</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master bbf193f Wladimir J. van der Laan: Merge #9513: build: fix qt distdir builds (retry)...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484138760' id='522368'>
<a class='timestamp' href='#522368'><time timestamp='2017-01-11T12:46:00Z'>12:46</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9513: build: fix qt distdir builds (retry) (master...out-of-tree-build) <a href="https://github.com/bitcoin/bitcoin/pull/9513" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9513</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484139120' id='522369'>
<a class='timestamp' href='#522369'><time timestamp='2017-01-11T12:52:00Z'>12:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/bbf193fef049...593a00ce1935" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/bbf193fef049...593a00ce1935</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484139120' id='522370'>
<a class='timestamp' href='#522370'><time timestamp='2017-01-11T12:52:00Z'>12:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 74994c6 Pieter Wuille: Improve style w.r.t. if
<br>
</div>

<div class='talk op-msg' data-timestamp='1484139120' id='522371'>
<a class='timestamp' href='#522371'><time timestamp='2017-01-11T12:52:00Z'>12:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 593a00c Wladimir J. van der Laan: Merge #9506: RFC: Improve style for if indentation...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484139120' id='522372'>
<a class='timestamp' href='#522372'><time timestamp='2017-01-11T12:52:00Z'>12:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9506: RFC: Improve style for if indentation (master...newstyle) <a href="https://github.com/bitcoin/bitcoin/pull/9506" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9506</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484139360' id='522373'>
<a class='timestamp' href='#522373'><time timestamp='2017-01-11T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/593a00ce1935...ca615e6c05ef" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/593a00ce1935...ca615e6c05ef</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484139360' id='522374'>
<a class='timestamp' href='#522374'><time timestamp='2017-01-11T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 8217bd1 fanquake: [depends] libevent 2.1.7rc
<br>
</div>

<div class='talk op-msg' data-timestamp='1484139360' id='522375'>
<a class='timestamp' href='#522375'><time timestamp='2017-01-11T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ca615e6 Wladimir J. van der Laan: Merge #9471: [depends] libevent 2.1.7rc...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484139360' id='522376'>
<a class='timestamp' href='#522376'><time timestamp='2017-01-11T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9471: [depends] libevent 2.1.7rc (master...depends-0-14-0-libevent) <a href="https://github.com/bitcoin/bitcoin/pull/9471" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9471</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484139660' id='522377'>
<a class='timestamp' href='#522377'><time timestamp='2017-01-11T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
are there any remaining issues with #9375?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484139660' id='522378'>
<a class='timestamp' href='#522378'><time timestamp='2017-01-11T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9375" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9375</a> | Relay compact block messages prior to full block connection by TheBlueMatt · Pull Request #9375 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484140080' id='522379'>
<a class='timestamp' href='#522379'><time timestamp='2017-01-11T13:08:00Z'>13:08</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
same q for #9400
<br>
</div>

<div class='talk op-msg' data-timestamp='1484140080' id='522380'>
<a class='timestamp' href='#522380'><time timestamp='2017-01-11T13:08:00Z'>13:08</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9400" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9400</a> | Set peers as HB peers upon full block validation by instagibbs · Pull Request #9400 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484140320' id='522381'>
<a class='timestamp' href='#522381'><time timestamp='2017-01-11T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: i was planning to review 9375 today
<br>
</div>

<div class='talk op-msg' data-timestamp='1484140380' id='522382'>
<a class='timestamp' href='#522382'><time timestamp='2017-01-11T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: okay, great
<br>
</div>

<div class='talk op-msg' data-timestamp='1484141160' id='522383'>
<a class='timestamp' href='#522383'><time timestamp='2017-01-11T13:26:00Z'>13:26</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/ca615e6c05ef...e2e624d9ce54" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/ca615e6c05ef...e2e624d9ce54</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484141160' id='522384'>
<a class='timestamp' href='#522384'><time timestamp='2017-01-11T13:26:00Z'>13:26</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 1fc4ec7 mrbandrews: Add pruneblockchain RPC to enable manual block file pruning.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484141160' id='522385'>
<a class='timestamp' href='#522385'><time timestamp='2017-01-11T13:26:00Z'>13:26</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master afffeea Russell Yanofsky: fixup! Add pruneblockchain RPC to enable manual block file pruning....
<br>
</div>

<div class='talk op-msg' data-timestamp='1484141160' id='522386'>
<a class='timestamp' href='#522386'><time timestamp='2017-01-11T13:26:00Z'>13:26</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master e2e624d Wladimir J. van der Laan: Merge #7871: Manual block file pruning....
<br>
</div>

<div class='talk op-msg' data-timestamp='1484142720' id='522387'>
<a class='timestamp' href='#522387'><time timestamp='2017-01-11T13:52:00Z'>13:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] kallewoof opened pull request #9517: [refactor] Switched httpserver.cpp to use RAII wrapped libevents. (master...raii-httpserver) <a href="https://github.com/bitcoin/bitcoin/pull/9517" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9517</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484144580' id='522388'>
<a class='timestamp' href='#522388'><time timestamp='2017-01-11T14:23:00Z'>14:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i wonder why unique_ptr does not have an emplace method like the stl containers have
<br>
</div>

<div class='talk op-msg' data-timestamp='1484144580' id='522389'>
<a class='timestamp' href='#522389'><time timestamp='2017-01-11T14:23:00Z'>14:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
would be a neat and cheap way to avoid explicit new calls
<br>
</div>

<div class='talk op-msg' data-timestamp='1484145540' id='522390'>
<a class='timestamp' href='#522390'><time timestamp='2017-01-11T14:39:00Z'>14:39</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
oh, I didn&#x27;t know about contrib/devtools/check-doc.py
<br>
</div>

<div class='talk op-msg' data-timestamp='1484155200' id='522391'>
<a class='timestamp' href='#522391'><time timestamp='2017-01-11T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: see std::make_unique in c++14. I assume that&#x27;s what you mean?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484155380' id='522392'>
<a class='timestamp' href='#522392'><time timestamp='2017-01-11T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Lets upgreade to C++14! :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1484156640' id='522393'>
<a class='timestamp' href='#522393'><time timestamp='2017-01-11T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: but x.emplace(a,b) still looks nicer than x = std::make_unique&lt;x_t&gt;(a,b);
<br>
</div>

<div class='talk op-msg' data-timestamp='1484157000' id='522394'>
<a class='timestamp' href='#522394'><time timestamp='2017-01-11T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
always found emplace to look ugly, but doesn&#x27;t care enough to argue it
<br>
</div>

<div class='talk op-msg' data-timestamp='1484157060' id='522395'>
<a class='timestamp' href='#522395'><time timestamp='2017-01-11T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: ah, i see what you mean. seems a bit clumsy to me though, as emplace implies that you&#x27;re constructing a new value in place, rather than replacing a (the) current one
<br>
</div>

<div class='talk op-msg' data-timestamp='1484157960' id='522396'>
<a class='timestamp' href='#522396'><time timestamp='2017-01-11T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
Anyone have a link to the latest blockchain torrent?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484157960' id='522397'>
<a class='timestamp' href='#522397'><time timestamp='2017-01-11T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
profall: the blockchain torrent has been discontinued (at least by the bitcoin core maintainers) since 0.10
<br>
</div>

<div class='talk op-msg' data-timestamp='1484157960' id='522398'>
<a class='timestamp' href='#522398'><time timestamp='2017-01-11T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
ah ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1484157960' id='522399'>
<a class='timestamp' href='#522399'><time timestamp='2017-01-11T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as the bitcoin block download code is usually faster
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158020' id='522400'>
<a class='timestamp' href='#522400'><time timestamp='2017-01-11T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(it validates while downloading)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158020' id='522401'>
<a class='timestamp' href='#522401'><time timestamp='2017-01-11T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
yea     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158020' id='522402'>
<a class='timestamp' href='#522402'><time timestamp='2017-01-11T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
I am still experiencing issues with my node randomly dropping out of sync every few hours
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158020' id='522403'>
<a class='timestamp' href='#522403'><time timestamp='2017-01-11T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
I thought maybe a fresh resync might fix something, not sure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158080' id='522404'>
<a class='timestamp' href='#522404'><time timestamp='2017-01-11T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
define &#x27;dropping out of sync&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158080' id='522405'>
<a class='timestamp' href='#522405'><time timestamp='2017-01-11T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
It&#x27;ll be on the correct block if compared to blockchain.info or any other explorer. Then I will come back a few hours later and it&#x27;ll be stuck on some block from 2 hours ago and not in sync anymore.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158140' id='522406'>
<a class='timestamp' href='#522406'><time timestamp='2017-01-11T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
This is an E3 processor, 100mbps connection in a datacenter, 16GB ram server. Not resource starved. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158200' id='522407'>
<a class='timestamp' href='#522407'><time timestamp='2017-01-11T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
anything in debug.log?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158260' id='522408'>
<a class='timestamp' href='#522408'><time timestamp='2017-01-11T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
ping timeout 1200s
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158260' id='522409'>
<a class='timestamp' href='#522409'><time timestamp='2017-01-11T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
socket recv error Connection reset by peer (104)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158320' id='522410'>
<a class='timestamp' href='#522410'><time timestamp='2017-01-11T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s normal
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158320' id='522411'>
<a class='timestamp' href='#522411'><time timestamp='2017-01-11T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what version?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158320' id='522412'>
<a class='timestamp' href='#522412'><time timestamp='2017-01-11T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
of bitcoin core
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158320' id='522413'>
<a class='timestamp' href='#522413'><time timestamp='2017-01-11T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well it&#x27;s not normal if it happens to all peers?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158320' id='522414'>
<a class='timestamp' href='#522414'><time timestamp='2017-01-11T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
0.13.2 on Linux
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158380' id='522415'>
<a class='timestamp' href='#522415'><time timestamp='2017-01-11T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
I downloaded it straight from the website rather then use the repo, just in case as well.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158380' id='522416'>
<a class='timestamp' href='#522416'><time timestamp='2017-01-11T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
profall: can you send one of us a copy of your debug log including one of these incidents?  the debug log will identify your IP and potentially some of your transactions if you&#x27;re using it as a wallet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158380' id='522417'>
<a class='timestamp' href='#522417'><time timestamp='2017-01-11T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
could you share a few hours worth of debug.log somewhere?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484158440' id='522418'>
<a class='timestamp' href='#522418'><time timestamp='2017-01-11T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
Sure, ill PM you just give me a few moments to prepare it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159040' id='522419'>
<a class='timestamp' href='#522419'><time timestamp='2017-01-11T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
PM&#x27;d both of you with debug.log
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159040' id='522420'>
<a class='timestamp' href='#522420'><time timestamp='2017-01-11T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
Oops, realized it&#x27;s empty...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159100' id='522421'>
<a class='timestamp' href='#522421'><time timestamp='2017-01-11T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
morcos: c0507f800475edf003adb744061d864741d3ee12796834d4d7f9a72b0bbd4fe6 is the only one on your list that shows up in my debug.log
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159100' id='522422'>
<a class='timestamp' href='#522422'><time timestamp='2017-01-11T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
2017-01-10 21:23:32 not keeping orphan with rejected parents c0507f800475edf003adb744061d864741d3ee1279
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159100' id='522423'>
<a class='timestamp' href='#522423'><time timestamp='2017-01-11T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
And its parent was rejected because… 2017-01-10 21:23:32 d97b0571f984420ffebb8f4e69e3d1ed1467797105ad602747ff1ddff322ff40 from peer=14 was not accepted: bad-txns-inputs-spent (code 18)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159100' id='522424'>
<a class='timestamp' href='#522424'><time timestamp='2017-01-11T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
looks like a double-spend? … so the competing parent probably had enough fee for the mempool, but not enough to be mined, and d97b0571f9 didn&#x27;t have enough more to replace it
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159100' id='522425'>
<a class='timestamp' href='#522425'><time timestamp='2017-01-11T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
wonders if this might be exploitable
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159160' id='522426'>
<a class='timestamp' href='#522426'><time timestamp='2017-01-11T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-3'> profall</span>&gt;
Resent 
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159580' id='522427'>
<a class='timestamp' href='#522427'><time timestamp='2017-01-11T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: can you confirm that the new addnode behavior in master is sufficient to get rid of your fibre proxy thing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159580' id='522428'>
<a class='timestamp' href='#522428'><time timestamp='2017-01-11T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: based on what you wrote in your pull, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159640' id='522429'>
<a class='timestamp' href='#522429'><time timestamp='2017-01-11T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
okay, so if it does what it says on the tin you think its good to go.  fine with me.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159640' id='522430'>
<a class='timestamp' href='#522430'><time timestamp='2017-01-11T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I&#x27;d need to go re-test to confirm, but I did test pre-merge
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159640' id='522431'>
<a class='timestamp' href='#522431'><time timestamp='2017-01-11T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea     
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159640' id='522432'>
<a class='timestamp' href='#522432'><time timestamp='2017-01-11T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(I just wanted to make sure if you needed any other features that I wrote them ASAP.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159640' id='522433'>
<a class='timestamp' href='#522433'><time timestamp='2017-01-11T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
heh, yea, all good thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159700' id='522434'>
<a class='timestamp' href='#522434'><time timestamp='2017-01-11T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
in other news, I&#x27;m avoiding review because sick, and super pissed off about this :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159940' id='522435'>
<a class='timestamp' href='#522435'><time timestamp='2017-01-11T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
pissed about being sick?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484159940' id='522436'>
<a class='timestamp' href='#522436'><time timestamp='2017-01-11T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
both - i have so much review to do :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1484160420' id='522437'>
<a class='timestamp' href='#522437'><time timestamp='2017-01-11T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
should -maxmempool=0 imply -blocksonly ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484160480' id='522438'>
<a class='timestamp' href='#522438'><time timestamp='2017-01-11T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Probably, though blocksonly is still a hidden option.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484160480' id='522439'>
<a class='timestamp' href='#522439'><time timestamp='2017-01-11T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, really
<br>
</div>

<div class='talk op-msg' data-timestamp='1484160480' id='522440'>
<a class='timestamp' href='#522440'><time timestamp='2017-01-11T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It&#x27;s hidden because it would probably be better if we had a service bit related to it before having lots of nodes running it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484160480' id='522441'>
<a class='timestamp' href='#522441'><time timestamp='2017-01-11T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
probably thats too conservative, it&#x27;s unlikely lots of nodes would run it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161320' id='522442'>
<a class='timestamp' href='#522442'><time timestamp='2017-01-11T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: heh, i&#x27;m very behind on review as well. slowly making my way through yours.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161380' id='522443'>
<a class='timestamp' href='#522443'><time timestamp='2017-01-11T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
likewise
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161440' id='522444'>
<a class='timestamp' href='#522444'><time timestamp='2017-01-11T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Someone have the list of high-priority review on hand
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161500' id='522445'>
<a class='timestamp' href='#522445'><time timestamp='2017-01-11T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think we really want #9375 #9441 in
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161500' id='522446'>
<a class='timestamp' href='#522446'><time timestamp='2017-01-11T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9375" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9375</a> | Relay compact block messages prior to full block connection by TheBlueMatt · Pull Request #9375 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161500' id='522447'>
<a class='timestamp' href='#522447'><time timestamp='2017-01-11T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9441" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9441</a> | Net: Massive speedup. Net locks overhaul by theuni · Pull Request #9441 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161560' id='522448'>
<a class='timestamp' href='#522448'><time timestamp='2017-01-11T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: I&#x27;ve been stuck on the ActivateBestChain() kludge for quite a while now. I don&#x27;t like it, but with no better argument than &quot;it&#x27;s ugly&quot;. Would it be reasonable instead to maintain a list of announced-but-not-stored hashes, combined with maybe just a quick hack like WaitForValidation(hash) ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161560' id='522449'>
<a class='timestamp' href='#522449'><time timestamp='2017-01-11T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(i assume that question has been posed already)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161620' id='522450'>
<a class='timestamp' href='#522450'><time timestamp='2017-01-11T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: if you announce a block which turns out to be invalid, WaitForValidation wont help :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161620' id='522451'>
<a class='timestamp' href='#522451'><time timestamp='2017-01-11T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Ok, I really cant comment on the net locks overhaul but I&#x27;ll re-review the former
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161620' id='522452'>
<a class='timestamp' href='#522452'><time timestamp='2017-01-11T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: well presumably it&#x27;d drop out of the list, valid or no
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161740' id='522453'>
<a class='timestamp' href='#522453'><time timestamp='2017-01-11T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: i suppose at an even higher level it could just be WaitForBestChainActivated()
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161860' id='522454'>
<a class='timestamp' href='#522454'><time timestamp='2017-01-11T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: i mean the ActivateBestChain kludge is only there for the case where you caught the cs_main lock right in the middle of ProcessNewBlock where it unlocks cs_main for a sec
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161860' id='522455'>
<a class='timestamp' href='#522455'><time timestamp='2017-01-11T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ActivateBestChain literally is WaitForActivateBestChainActivated().....
<br>
</div>

<div class='talk op-msg' data-timestamp='1484161920' id='522456'>
<a class='timestamp' href='#522456'><time timestamp='2017-01-11T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
its just the version for when you&#x27;re already holding cs_main
<br>
</div>

<div class='talk op-msg' data-timestamp='1484162040' id='522457'>
<a class='timestamp' href='#522457'><time timestamp='2017-01-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: understood. Just seems scary to allow that to be manipulated so easily. Like I said though, I can&#x27;t come up with any realistic issue with it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484162040' id='522458'>
<a class='timestamp' href='#522458'><time timestamp='2017-01-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
&quot;manipulated&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484162040' id='522459'>
<a class='timestamp' href='#522459'><time timestamp='2017-01-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I mean I hope that its pretty much free if you&#x27;re already on the best chain
<br>
</div>

<div class='talk op-msg' data-timestamp='1484163120' id='522460'>
<a class='timestamp' href='#522460'><time timestamp='2017-01-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ryanofsky opened pull request #9518: Return height of last block pruned by pruneblockchain RPC (master...pr/prune-height) <a href="https://github.com/bitcoin/bitcoin/pull/9518" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9518</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484164080' id='522461'>
<a class='timestamp' href='#522461'><time timestamp='2017-01-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ryanofsky: feel like having a look at <a href="https://github.com/sipa/bitcoin/commits/pertxoutcache" class="link" target="_blank">https://github.com/sipa/bitcoin/commits/pertxoutcache</a> ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484164080' id='522462'>
<a class='timestamp' href='#522462'><time timestamp='2017-01-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I will be travling during the meeting tomorrow.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484165640' id='522463'>
<a class='timestamp' href='#522463'><time timestamp='2017-01-11T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: as an example of an unintended side-effect: miner mines a block, hands it to ProcessNewBlock, ProcessMessages (incoming GETBLOCKS) swoops in <u>_just_</u> after AcceptBlock and runs ActivateBestChain, before the mining thread gets a chance to. As a result, miner has to read the block from disk
<br>
</div>

<div class='talk op-msg' data-timestamp='1484165700' id='522464'>
<a class='timestamp' href='#522464'><time timestamp='2017-01-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: trivial and unlikely, but still a side-effect :\
<br>
</div>

<div class='talk op-msg' data-timestamp='1484165760' id='522465'>
<a class='timestamp' href='#522465'><time timestamp='2017-01-11T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
rather, the processor reads from disk.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484166360' id='522466'>
<a class='timestamp' href='#522466'><time timestamp='2017-01-11T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
luke-jr: that was a replay, that tx was mined on 01-03
<br>
</div>

<div class='talk op-msg' data-timestamp='1484166480' id='522467'>
<a class='timestamp' href='#522467'><time timestamp='2017-01-11T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] morcos opened pull request #9519: Exclude RBF replacement txs from fee estimation (master...excludeRBF) <a href="https://github.com/bitcoin/bitcoin/pull/9519" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9519</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484171940' id='522468'>
<a class='timestamp' href='#522468'><time timestamp='2017-01-11T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/e2e624d9ce54...05950427d310" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/e2e624d9ce54...05950427d310</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484171940' id='522469'>
<a class='timestamp' href='#522469'><time timestamp='2017-01-11T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fe7e593 Suhas Daftuar: Fix use-after-free in CTxMemPool::removeConflicts()
<br>
</div>

<div class='talk op-msg' data-timestamp='1484171940' id='522470'>
<a class='timestamp' href='#522470'><time timestamp='2017-01-11T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 0595042 Pieter Wuille: Merge #9507: Fix use-after-free in CTxMemPool::removeConflicts()...
<br>
</div>

<div class='talk op-msg' data-timestamp='1484171940' id='522471'>
<a class='timestamp' href='#522471'><time timestamp='2017-01-11T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #9507: Fix use-after-free in CTxMemPool::removeConflicts() (master...fix-mempool-useafterfree) <a href="https://github.com/bitcoin/bitcoin/pull/9507" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9507</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484172480' id='522472'>
<a class='timestamp' href='#522472'><time timestamp='2017-01-11T22:08:00Z'>22:08</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: I suppose I&#x27;m not too concerned by that kind of super-crazy race....in the future we probably do want to cache stuff like that more
<br>
</div>

<div class='talk op-msg' data-timestamp='1484172540' id='522473'>
<a class='timestamp' href='#522473'><time timestamp='2017-01-11T22:09:00Z'>22:09</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: i&#x27;m not at all concerned by it. My only concern is that it&#x27;s entirely non-obvious what the side-effects are. And that they&#x27;re bound to change in the future.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484172720' id='522474'>
<a class='timestamp' href='#522474'><time timestamp='2017-01-11T22:12:00Z'>22:12</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: The first path I was chasing down was whether or not, in the same scenario, the miner&#x27;s validationinterface would only receive a null pointer (in the case of the dummy ActivateBestChain) rather than the real block. That&#x27;s obviously not the case. My fear, though, is that if that <u>_were_</u> the case, we might not have noticed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484172720' id='522475'>
<a class='timestamp' href='#522475'><time timestamp='2017-01-11T22:12:00Z'>22:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes, I did check for that when writing the code :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1484172780' id='522476'>
<a class='timestamp' href='#522476'><time timestamp='2017-01-11T22:13:00Z'>22:13</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: I think the (real) solution is to make callbacks out of ValidationInterface go in a background thread, and make ProcessNewBlock hold the cs_main lock the whole time
<br>
</div>

<div class='talk op-msg' data-timestamp='1484172780' id='522477'>
<a class='timestamp' href='#522477'><time timestamp='2017-01-11T22:13:00Z'>22:13</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but that is definitely not a 0.14 refactor
<br>
</div>

<div class='talk op-msg' data-timestamp='1484172780' id='522478'>
<a class='timestamp' href='#522478'><time timestamp='2017-01-11T22:13:00Z'>22:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
great, but would I know to enforce that invariant if I were changing the code later?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484172840' id='522479'>
<a class='timestamp' href='#522479'><time timestamp='2017-01-11T22:14:00Z'>22:14</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
^^ what he said :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484172900' id='522480'>
<a class='timestamp' href='#522480'><time timestamp='2017-01-11T22:15:00Z'>22:15</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wait, which callback are you referring to?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484172900' id='522481'>
<a class='timestamp' href='#522481'><time timestamp='2017-01-11T22:15:00Z'>22:15</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
it was already the case that ActivateBestChain could be called &quot;loose&quot; and connect a block, so I dont think I changed the requirements on ABS?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173020' id='522482'>
<a class='timestamp' href='#522482'><time timestamp='2017-01-11T22:17:00Z'>22:17</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ABS ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173020' id='522483'>
<a class='timestamp' href='#522483'><time timestamp='2017-01-11T22:17:00Z'>22:17</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
activatebestchain
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173020' id='522484'>
<a class='timestamp' href='#522484'><time timestamp='2017-01-11T22:17:00Z'>22:17</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but the version that comes out when I&#x27;ve got a head-cold :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173020' id='522485'>
<a class='timestamp' href='#522485'><time timestamp='2017-01-11T22:17:00Z'>22:17</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ah, ActivateBeStchain :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173020' id='522486'>
<a class='timestamp' href='#522486'><time timestamp='2017-01-11T22:17:00Z'>22:17</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, that
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173080' id='522487'>
<a class='timestamp' href='#522487'><time timestamp='2017-01-11T22:18:00Z'>22:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Next PR: &quot;Correct ActivateBestChain to ActivateBestShain&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173080' id='522488'>
<a class='timestamp' href='#522488'><time timestamp='2017-01-11T22:18:00Z'>22:18</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
no, that didn&#x27;t change, but there&#x27;s now a publicly triggerable way to (try to) force an ABS between ProcessBlock and the ABS below it
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173080' id='522489'>
<a class='timestamp' href='#522489'><time timestamp='2017-01-11T22:18:00Z'>22:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
mmm, fair enough
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173140' id='522490'>
<a class='timestamp' href='#522490'><time timestamp='2017-01-11T22:19:00Z'>22:19</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: heh. Blockshain all the things!
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173260' id='522491'>
<a class='timestamp' href='#522491'><time timestamp='2017-01-11T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
since 9 days ago, the memory usage of mapBlockIndex exceeded 100M
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173320' id='522492'>
<a class='timestamp' href='#522492'><time timestamp='2017-01-11T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s using 224 bytes per entry
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173320' id='522493'>
<a class='timestamp' href='#522493'><time timestamp='2017-01-11T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
some of which could be avoided
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173320' id='522494'>
<a class='timestamp' href='#522494'><time timestamp='2017-01-11T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes, lets fix that
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173320' id='522495'>
<a class='timestamp' href='#522495'><time timestamp='2017-01-11T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
not that much could be avoided though.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173320' id='522496'>
<a class='timestamp' href='#522496'><time timestamp='2017-01-11T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s using 2 allocations per entry
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173380' id='522497'>
<a class='timestamp' href='#522497'><time timestamp='2017-01-11T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(which are included in the 224 number)
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173380' id='522498'>
<a class='timestamp' href='#522498'><time timestamp='2017-01-11T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wait, it is?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173380' id='522499'>
<a class='timestamp' href='#522499'><time timestamp='2017-01-11T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it should be 0
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173380' id='522500'>
<a class='timestamp' href='#522500'><time timestamp='2017-01-11T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: like 20 bytes per entry last I checked
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173380' id='522501'>
<a class='timestamp' href='#522501'><time timestamp='2017-01-11T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but at least 1 should be trivial to avoid
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173440' id='522502'>
<a class='timestamp' href='#522502'><time timestamp='2017-01-11T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
using a map&lt;uint256, CBlockIndex&gt; instead of map&lt;uint256, CBlockIndex*&gt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173440' id='522503'>
<a class='timestamp' href='#522503'><time timestamp='2017-01-11T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: how can it be zero? the data structure grows and things keep around pointers to it? no. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173440' id='522504'>
<a class='timestamp' href='#522504'><time timestamp='2017-01-11T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: direct hashtable
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173500' id='522505'>
<a class='timestamp' href='#522505'><time timestamp='2017-01-11T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and using map::iterators instead of CBlockIndex* all over the place
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173500' id='522506'>
<a class='timestamp' href='#522506'><time timestamp='2017-01-11T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
okay, perhaps we don&#x27;t actually keep any of the pointers.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173500' id='522507'>
<a class='timestamp' href='#522507'><time timestamp='2017-01-11T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but if we&#x27;re going to do that, i&#x27;d want a proper encapsulation too, that has its own lock, and has accessor methods for the fields that can be accessed without lock
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173500' id='522508'>
<a class='timestamp' href='#522508'><time timestamp='2017-01-11T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
... post 0.14
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173560' id='522509'>
<a class='timestamp' href='#522509'><time timestamp='2017-01-11T22:26:00Z'>22:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: well if the work is done to change how its accessed it should be encapsulated enough so that it could be diskbacked without changing any of the code.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173560' id='522510'>
<a class='timestamp' href='#522510'><time timestamp='2017-01-11T22:26:00Z'>22:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
even with all the overheads gone, it&#x27;s a significant chunk of memory.
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173620' id='522511'>
<a class='timestamp' href='#522511'><time timestamp='2017-01-11T22:27:00Z'>22:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173680' id='522512'>
<a class='timestamp' href='#522512'><time timestamp='2017-01-11T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ideally we&#x27;d also split up the disk-storage part and the validity-related part
<br>
</div>

<div class='talk op-msg' data-timestamp='1484173680' id='522513'>
<a class='timestamp' href='#522513'><time timestamp='2017-01-11T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
into two structures
<br>
</div>

<div class='talk op-msg' data-timestamp='1484176560' id='522514'>
<a class='timestamp' href='#522514'><time timestamp='2017-01-11T23:16:00Z'>23:16</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #8170: Remove lookup-tx-by-utxo functionality (master...betternotxindex) <a href="https://github.com/bitcoin/bitcoin/pull/8170" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8170</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484177820' id='522515'>
<a class='timestamp' href='#522515'><time timestamp='2017-01-11T23:37:00Z'>23:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa opened pull request #9520: Deprecate non-txindex getrawtransaction and better warning (master...warntxindex) <a href="https://github.com/bitcoin/bitcoin/pull/9520" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9520</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1484178960' id='522516'>
<a class='timestamp' href='#522516'><time timestamp='2017-01-11T23:56:00Z'>23:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
some review on #9261 plz?
<br>
</div>

<div class='talk op-msg' data-timestamp='1484178960' id='522517'>
<a class='timestamp' href='#522517'><time timestamp='2017-01-11T23:56:00Z'>23:56</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9261" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9261</a> | Add unstored orphans with rejected parents to recentRejects by morcos · Pull Request #9261 · bitcoin/bitcoin · GitHub
<br>
</div>

</div>
</section>

</body>
</html>
