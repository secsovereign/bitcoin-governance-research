<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-03-30
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-03-30' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:24 UTC</pre>
<pre><a href="/bitcoin-core-dev/2017-02-28">&lt;</a><span class='header'>    March 2017    </span><a href="/bitcoin-core-dev/2017-04-30">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;          <a class="" href="/bitcoin-core-dev/2017-03-01">1</a>  <a class="" href="/bitcoin-core-dev/2017-03-02">2</a>  <a class="" href="/bitcoin-core-dev/2017-03-03">3</a>  <a class="" href="/bitcoin-core-dev/2017-03-04">4</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-03-05">5</a>  <a class="" href="/bitcoin-core-dev/2017-03-06">6</a>  <a class="" href="/bitcoin-core-dev/2017-03-07">7</a>  <a class="" href="/bitcoin-core-dev/2017-03-08">8</a>  <a class="" href="/bitcoin-core-dev/2017-03-09">9</a> <a class="" href="/bitcoin-core-dev/2017-03-10">10</a> <a class="" href="/bitcoin-core-dev/2017-03-11">11</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-03-12">12</a> <a class="" href="/bitcoin-core-dev/2017-03-13">13</a> <a class="" href="/bitcoin-core-dev/2017-03-14">14</a> <a class="" href="/bitcoin-core-dev/2017-03-15">15</a> <a class="" href="/bitcoin-core-dev/2017-03-16">16</a> <a class="" href="/bitcoin-core-dev/2017-03-17">17</a> <a class="" href="/bitcoin-core-dev/2017-03-18">18</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-03-19">19</a> <a class="" href="/bitcoin-core-dev/2017-03-20">20</a> <a class="" href="/bitcoin-core-dev/2017-03-21">21</a> <a class="" href="/bitcoin-core-dev/2017-03-22">22</a> <a class="" href="/bitcoin-core-dev/2017-03-23">23</a> <a class="" href="/bitcoin-core-dev/2017-03-24">24</a> <a class="" href="/bitcoin-core-dev/2017-03-25">25</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-03-26">26</a> <a class="" href="/bitcoin-core-dev/2017-03-27">27</a> <a class="" href="/bitcoin-core-dev/2017-03-28">28</a> <a class="" href="/bitcoin-core-dev/2017-03-29">29</a> <a class="current" href="/bitcoin-core-dev/2017-03-30">30</a> <a class="" href="/bitcoin-core-dev/2017-03-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1490840520' id='537560'>
<a class='timestamp' href='#537560'><time timestamp='2017-03-30T02:22:00Z'>02:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I wonder if it would be better to prune debug.log with fallocate/FALLOC_FL_PUNCH_HOLE
<br>
</div>

<div class='talk op-msg' data-timestamp='1490850060' id='537561'>
<a class='timestamp' href='#537561'><time timestamp='2017-03-30T05:01:00Z'>05:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] tjps closed pull request #10059: [trivial] Removed one Boost usage and headers in util.cpp (master...tjps_boost) <a href="https://github.com/bitcoin/bitcoin/pull/10059" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10059</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490853960' id='537562'>
<a class='timestamp' href='#537562'><time timestamp='2017-03-30T06:06:00Z'>06:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
achow101: there&#x27;s been discussion of having a signal to prune the debug log on command, none exists though. SIGHUP does reopen it, so you could rotate it using a stock log rotator
<br>
</div>

<div class='talk op-msg' data-timestamp='1490854020' id='537563'>
<a class='timestamp' href='#537563'><time timestamp='2017-03-30T06:07:00Z'>06:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
with default settings the debug log grows only very slowly so this is not an issue for most users
<br>
</div>

<div class='talk op-msg' data-timestamp='1490854080' id='537564'>
<a class='timestamp' href='#537564'><time timestamp='2017-03-30T06:08:00Z'>06:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and developers that enable extra debug options tend to not want to automatically lose information
<br>
</div>

<div class='talk op-msg' data-timestamp='1490854080' id='537565'>
<a class='timestamp' href='#537565'><time timestamp='2017-03-30T06:08:00Z'>06:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
e.g. to collect info over a complete sync cycle
<br>
</div>

<div class='talk op-msg' data-timestamp='1490854200' id='537566'>
<a class='timestamp' href='#537566'><time timestamp='2017-03-30T06:10:00Z'>06:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the way the prune thing works kinda stinks in any case. when I get log data from users it very frequently has omitted the interesting part, because they restart before asking for help.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490854200' id='537567'>
<a class='timestamp' href='#537567'><time timestamp='2017-03-30T06:10:00Z'>06:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and so I can&#x27;t see why their node has rejected a valid block.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490858340' id='537568'>
<a class='timestamp' href='#537568'><time timestamp='2017-03-30T07:19:00Z'>07:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: I can&#x27;t follow your comment: <a href="https://github.com/bitcoin/bitcoin/pull/9681/files#r108679775" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9681/files#r108679775</a> ... can you elaborate?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490858580' id='537569'>
<a class='timestamp' href='#537569'><time timestamp='2017-03-30T07:23:00Z'>07:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jtimon opened pull request #10119: Util: Remove ArgsManager wrappers: (master...0.14-args-wrappers) <a href="https://github.com/bitcoin/bitcoin/pull/10119" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10119</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490858700' id='537570'>
<a class='timestamp' href='#537570'><time timestamp='2017-03-30T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/f34cdcbd806d...8ac804128671" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/f34cdcbd806d...8ac804128671</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490858700' id='537571'>
<a class='timestamp' href='#537571'><time timestamp='2017-03-30T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 159fe88 John Newbery: Remove SingleNodeConnCB...
<br>
</div>

<div class='talk op-msg' data-timestamp='1490858700' id='537572'>
<a class='timestamp' href='#537572'><time timestamp='2017-03-30T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 8ac8041 MarcoFalke: Merge #10109: Remove SingleNodeConnCB...
<br>
</div>

<div class='talk op-msg' data-timestamp='1490858700' id='537573'>
<a class='timestamp' href='#537573'><time timestamp='2017-03-30T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #10109: Remove SingleNodeConnCB (master...remove_single_node_conn_cb) <a href="https://github.com/bitcoin/bitcoin/pull/10109" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10109</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490860260' id='537574'>
<a class='timestamp' href='#537574'><time timestamp='2017-03-30T07:51:00Z'>07:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
FALLOC_FL_PUNCH_HOLE wouldn&#x27;t improve that; though maybe the aggressive name gives some outlet when there&#x27;s yet another issue with useless debug logs
<br>
</div>

<div class='talk op-msg' data-timestamp='1490860320' id='537575'>
<a class='timestamp' href='#537575'><time timestamp='2017-03-30T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
heh <a href="https://imgur.com/a/Q5Dsq" class="link" target="_blank">https://imgur.com/a/Q5Dsq</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490860380' id='537576'>
<a class='timestamp' href='#537576'><time timestamp='2017-03-30T07:53:00Z'>07:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: it&#x27;s eating blocks instead of syncing them!
<br>
</div>

<div class='talk op-msg' data-timestamp='1490860440' id='537577'>
<a class='timestamp' href='#537577'><time timestamp='2017-03-30T07:54:00Z'>07:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(yes yes &#x27;100% progress&#x27; is a moving target, so staying in the same place moves you backwards, relatively, you have to run to stay in the same place)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490860440' id='537578'>
<a class='timestamp' href='#537578'><time timestamp='2017-03-30T07:54:00Z'>07:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I guess we should add a max(0, progress)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490860800' id='537579'>
<a class='timestamp' href='#537579'><time timestamp='2017-03-30T08:00:00Z'>08:00</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus any schedule for 0.14.1 ? I&#x27;m going to remove 9464, not important enough to be fixed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490860860' id='537580'>
<a class='timestamp' href='#537580'><time timestamp='2017-03-30T08:01:00Z'>08:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: no precise shedule, though agreement seems to be that there should be a 0.14.1 &#x27;soon&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1490860920' id='537581'>
<a class='timestamp' href='#537581'><time timestamp='2017-03-30T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Only two issues tagged now, are there any more sitting around that should be making it in?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490860920' id='537582'>
<a class='timestamp' href='#537582'><time timestamp='2017-03-30T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s still blocked on the out of memory problems, we&#x27;re going to PR some workarounds for 0.14
<br>
</div>

<div class='talk op-msg' data-timestamp='1490860920' id='537583'>
<a class='timestamp' href='#537583'><time timestamp='2017-03-30T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yep I&#x27;m working on one and sipa should have one
<br>
</div>

<div class='talk op-msg' data-timestamp='1490860920' id='537584'>
<a class='timestamp' href='#537584'><time timestamp='2017-03-30T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
ok     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490861040' id='537585'>
<a class='timestamp' href='#537585'><time timestamp='2017-03-30T08:04:00Z'>08:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
agree about #9464, as a display problem it&#x27;s fairly low priority and should at least not block 0.14.1
<br>
</div>

<div class='talk op-msg' data-timestamp='1490861040' id='537586'>
<a class='timestamp' href='#537586'><time timestamp='2017-03-30T08:04:00Z'>08:04</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9464" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9464</a> | [GUI] No GUI updates when running with --reindex or --reindex-chainstate · Issue #9464 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490861040' id='537587'>
<a class='timestamp' href='#537587'><time timestamp='2017-03-30T08:04:00Z'>08:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but if someone fixes it it and the solution is not too invasive should be backported
<br>
</div>

<div class='talk op-msg' data-timestamp='1490861100' id='537588'>
<a class='timestamp' href='#537588'><time timestamp='2017-03-30T08:05:00Z'>08:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake closed pull request #10089: Fix shadowing of &#x27;what&#x27; as described in #10080. (master...fix-what-shadowing) <a href="https://github.com/bitcoin/bitcoin/pull/10089" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10089</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490861160' id='537589'>
<a class='timestamp' href='#537589'><time timestamp='2017-03-30T08:06:00Z'>08:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
hrm some RPCs such as getmemoryinfo could be available from the point the RPC server is launched, not just after iniitalization finishes
<br>
</div>

<div class='talk op-msg' data-timestamp='1490861220' id='537590'>
<a class='timestamp' href='#537590'><time timestamp='2017-03-30T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
also &#x27;stop&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1490861760' id='537591'>
<a class='timestamp' href='#537591'><time timestamp='2017-03-30T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj opened pull request #10120: util: Work around (virtual) memory exhaustion on 32-bit w/ glibc (master...2017_03_address_space_exhaustion_workaround) <a href="https://github.com/bitcoin/bitcoin/pull/10120" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10120</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490865660' id='537592'>
<a class='timestamp' href='#537592'><time timestamp='2017-03-30T09:21:00Z'>09:21</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: maybe debug.log should only be pruned when the node considers itself synced + some time has passed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490865720' id='537593'>
<a class='timestamp' href='#537593'><time timestamp='2017-03-30T09:22:00Z'>09:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
(FALLOC_FL_PUNCH_HOLE possible improvement is that it can do it without rewriting the kept data)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490865780' id='537594'>
<a class='timestamp' href='#537594'><time timestamp='2017-03-30T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
fanquake: does #9464 fixes the negative progress (<a href="https://imgur.com/a/Q5Dsq)" class="link" target="_blank">https://imgur.com/a/Q5Dsq)</a>?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490865780' id='537595'>
<a class='timestamp' href='#537595'><time timestamp='2017-03-30T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9464" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9464</a> | [GUI] No GUI updates when running with --reindex or --reindex-chainstate · Issue #9464 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490865900' id='537596'>
<a class='timestamp' href='#537596'><time timestamp='2017-03-30T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
jonasschnelli no, 9464 is just an issue I created that cover a few different GUI issues/quirks, I should add the negative progress output there as well.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490866620' id='537597'>
<a class='timestamp' href='#537597'><time timestamp='2017-03-30T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
btw travis is being flaky on master
<br>
</div>

<div class='talk op-msg' data-timestamp='1490866620' id='537598'>
<a class='timestamp' href='#537598'><time timestamp='2017-03-30T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
not sure if this is caused by #9294
<br>
</div>

<div class='talk op-msg' data-timestamp='1490866620' id='537599'>
<a class='timestamp' href='#537599'><time timestamp='2017-03-30T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9294" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9294</a> | Use internal HD chain for change outputs (hd split) by jonasschnelli · Pull Request #9294 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490866680' id='537600'>
<a class='timestamp' href='#537600'><time timestamp='2017-03-30T09:38:00Z'>09:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
oh... i&#x27;ll check
<br>
</div>

<div class='talk op-msg' data-timestamp='1490866740' id='537601'>
<a class='timestamp' href='#537601'><time timestamp='2017-03-30T09:39:00Z'>09:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
assumevalid.py failed... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490866740' id='537602'>
<a class='timestamp' href='#537602'><time timestamp='2017-03-30T09:39:00Z'>09:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
maybe a rebase/merge issue.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490866920' id='537603'>
<a class='timestamp' href='#537603'><time timestamp='2017-03-30T09:42:00Z'>09:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
travis is failing on #10120 as well, but on wallet-hd.py
<br>
</div>

<div class='talk op-msg' data-timestamp='1490866920' id='537604'>
<a class='timestamp' href='#537604'><time timestamp='2017-03-30T09:42:00Z'>09:42</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10120" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10120</a> | util: Work around (virtual) memory exhaustion on 32-bit w/ glibc by laanwj · Pull Request #10120 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490866920' id='537605'>
<a class='timestamp' href='#537605'><time timestamp='2017-03-30T09:42:00Z'>09:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
could also be a test framework related issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1490866980' id='537606'>
<a class='timestamp' href='#537606'><time timestamp='2017-03-30T09:43:00Z'>09:43</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
jonasschnelli what are your thoughts on the OSX Growl notification code? I&#x27;m not sure that it&#x27;s even being developed/supported anymore. They moved to selling it through the mac app store, and last update was in October 2013.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490867040' id='537607'>
<a class='timestamp' href='#537607'><time timestamp='2017-03-30T09:44:00Z'>09:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
test_framework.authproxy.JSONRPCException: non-JSON HTTP response with &#x27;503 Service Unavailable&#x27; from server (-342) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490867100' id='537608'>
<a class='timestamp' href='#537608'><time timestamp='2017-03-30T09:45:00Z'>09:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
while waiting for the node to come up... I think you&#x27;ll get that if no handler is installed
<br>
</div>

<div class='talk op-msg' data-timestamp='1490867100' id='537609'>
<a class='timestamp' href='#537609'><time timestamp='2017-03-30T09:45:00Z'>09:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there is a small window before handlers are registered
<br>
</div>

<div class='talk op-msg' data-timestamp='1490867100' id='537610'>
<a class='timestamp' href='#537610'><time timestamp='2017-03-30T09:45:00Z'>09:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so not completely unexpected
<br>
</div>

<div class='talk op-msg' data-timestamp='1490867160' id='537611'>
<a class='timestamp' href='#537611'><time timestamp='2017-03-30T09:46:00Z'>09:46</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus did you just restart the build? I was in the middle on reading the log heh
<br>
</div>

<div class='talk op-msg' data-timestamp='1490867160' id='537612'>
<a class='timestamp' href='#537612'><time timestamp='2017-03-30T09:46:00Z'>09:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes I restarted the build, sorry :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490867520' id='537613'>
<a class='timestamp' href='#537613'><time timestamp='2017-03-30T09:52:00Z'>09:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
may well be that travis is just being slow and brings this issue to the surface
<br>
</div>

<div class='talk op-msg' data-timestamp='1490874120' id='537614'>
<a class='timestamp' href='#537614'><time timestamp='2017-03-30T11:42:00Z'>11:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: hmmm.. assumevalid.py failed/failes on master (CRON travis): <a href="https://travis-ci.org/bitcoin/bitcoin/jobs/216360061#L5396" class="link" target="_blank">https://travis-ci.org/bitcoin/bitcoin/jobs/216360061#L5396</a> 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490874120' id='537615'>
<a class='timestamp' href='#537615'><time timestamp='2017-03-30T11:42:00Z'>11:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Can&#x27;t reproduce locally
<br>
</div>

<div class='talk op-msg' data-timestamp='1490874120' id='537616'>
<a class='timestamp' href='#537616'><time timestamp='2017-03-30T11:42:00Z'>11:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(I try now on Ubuntu 14.04
<br>
</div>

<div class='talk op-msg' data-timestamp='1490874600' id='537617'>
<a class='timestamp' href='#537617'><time timestamp='2017-03-30T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I couldn&#x27;t reproduce it locally either
<br>
</div>

<div class='talk op-msg' data-timestamp='1490877000' id='537618'>
<a class='timestamp' href='#537618'><time timestamp='2017-03-30T12:30:00Z'>12:30</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#10114 should fix assumevalid.py (and make assumptions in test cases more robust in general)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490877000' id='537619'>
<a class='timestamp' href='#537619'><time timestamp='2017-03-30T12:30:00Z'>12:30</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10114" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10114</a> | An error has occurred and has been logged. Please contact this bot&#x27;s administrator for more information.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490877060' id='537620'>
<a class='timestamp' href='#537620'><time timestamp='2017-03-30T12:31:00Z'>12:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jnewbery: great!
<br>
</div>

<div class='talk op-msg' data-timestamp='1490877060' id='537621'>
<a class='timestamp' href='#537621'><time timestamp='2017-03-30T12:31:00Z'>12:31</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
Travis is good (too good!) at uncovering sync and timing issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1490877120' id='537622'>
<a class='timestamp' href='#537622'><time timestamp='2017-03-30T12:32:00Z'>12:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490880540' id='537623'>
<a class='timestamp' href='#537623'><time timestamp='2017-03-30T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
jonasschnelli: ie the user might call bumpfee, get an error saying they need to pay more, then call bumpfee again with a higher number, and get another error saying they need to pay /even/ more
<br>
</div>

<div class='talk op-msg' data-timestamp='1490880540' id='537624'>
<a class='timestamp' href='#537624'><time timestamp='2017-03-30T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which is ok, but kinda annoying
<br>
</div>

<div class='talk op-msg' data-timestamp='1490880540' id='537625'>
<a class='timestamp' href='#537625'><time timestamp='2017-03-30T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
if they&#x27;re already checked back-to-back, might as well merge them into one error
<br>
</div>

<div class='talk op-msg' data-timestamp='1490880540' id='537626'>
<a class='timestamp' href='#537626'><time timestamp='2017-03-30T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
so that that cant happen
<br>
</div>

<div class='talk op-msg' data-timestamp='1490881980' id='537627'>
<a class='timestamp' href='#537627'><time timestamp='2017-03-30T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] shitakee opened pull request #10121: Add missing header file (master...patch-1) <a href="https://github.com/bitcoin/bitcoin/pull/10121" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10121</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490884320' id='537628'>
<a class='timestamp' href='#537628'><time timestamp='2017-03-30T14:32:00Z'>14:32</time></a>
&lt;<span class='nick nick-1'> compumatrix</span>&gt;
Is it really this silent in here?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490884560' id='537629'>
<a class='timestamp' href='#537629'><time timestamp='2017-03-30T14:36:00Z'>14:36</time></a>
&lt;<span class='nick nick-1'> compumatrix</span>&gt;
hi magicwund...
<br>
</div>

<div class='talk op-msg' data-timestamp='1490884680' id='537630'>
<a class='timestamp' href='#537630'><time timestamp='2017-03-30T14:38:00Z'>14:38</time></a>
&lt;<span class='nick nick-3'> magicwund</span>&gt;
hey     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490887920' id='537631'>
<a class='timestamp' href='#537631'><time timestamp='2017-03-30T15:32:00Z'>15:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #10123: Allow debug logs to be excluded from specified component (master...debugexclude) <a href="https://github.com/bitcoin/bitcoin/pull/10123" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10123</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490889720' id='537632'>
<a class='timestamp' href='#537632'><time timestamp='2017-03-30T16:02:00Z'>16:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #10124: [test] Suppress test logging spam (master...suppress_test_logging_spam) <a href="https://github.com/bitcoin/bitcoin/pull/10124" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10124</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490892600' id='537633'>
<a class='timestamp' href='#537633'><time timestamp='2017-03-30T16:50:00Z'>16:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Reminder for the european CEST people. Meeting will be in 2h 10&#x27; (summer time now!).
<br>
</div>

<div class='talk op-msg' data-timestamp='1490894400' id='537634'>
<a class='timestamp' href='#537634'><time timestamp='2017-03-30T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
i thought we had consensus to eliminate time zones?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490894460' id='537635'>
<a class='timestamp' href='#537635'><time timestamp='2017-03-30T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
kanzure: we did, but the rest of the world hasn&#x27;t yet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490897100' id='537636'>
<a class='timestamp' href='#537636'><time timestamp='2017-03-30T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] TheBlueMatt opened pull request #10125: Exit bitcoind immediately on shutdown instead of 200ms later (master...2017-03-faster-shutdown) <a href="https://github.com/bitcoin/bitcoin/pull/10125" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10125</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490898840' id='537637'>
<a class='timestamp' href='#537637'><time timestamp='2017-03-30T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery closed pull request #9630: Add logging to GetAncestor if pindex-&gt;pprev == NULL (master...crashlogging) <a href="https://github.com/bitcoin/bitcoin/pull/9630" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9630</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490899200' id='537638'>
<a class='timestamp' href='#537638'><time timestamp='2017-03-30T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
wumpus: i think #9959 is ready for merge
<br>
</div>

<div class='talk op-msg' data-timestamp='1490899200' id='537639'>
<a class='timestamp' href='#537639'><time timestamp='2017-03-30T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9959" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9959</a> | Mining: Prevent slowdown in CreateNewBlock on large mempools by sdaftuar · Pull Request #9959 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490899680' id='537640'>
<a class='timestamp' href='#537640'><time timestamp='2017-03-30T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sdaftuar: ok!
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900160' id='537641'>
<a class='timestamp' href='#537641'><time timestamp='2017-03-30T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 4 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/8ac804128671...cde9b1a864c1" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/8ac804128671...cde9b1a864c1</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900160' id='537642'>
<a class='timestamp' href='#537642'><time timestamp='2017-03-30T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master eed816a Suhas Daftuar: Mining: return early when block is almost full
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900160' id='537643'>
<a class='timestamp' href='#537643'><time timestamp='2017-03-30T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 42cd8c8 Suhas Daftuar: Add benchmarking for CreateNewBlock
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900160' id='537644'>
<a class='timestamp' href='#537644'><time timestamp='2017-03-30T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 011124a Suhas Daftuar: Update benchmarking with package statistics
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900160' id='537645'>
<a class='timestamp' href='#537645'><time timestamp='2017-03-30T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9959: Mining: Prevent slowdown in CreateNewBlock on large mempools (master...2017-03-cnb-optimizations) <a href="https://github.com/bitcoin/bitcoin/pull/9959" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9959</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900220' id='537646'>
<a class='timestamp' href='#537646'><time timestamp='2017-03-30T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900220' id='537647'>
<a class='timestamp' href='#537647'><time timestamp='2017-03-30T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: what restictions are there on what code you can call from signal handlers?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900280' id='537648'>
<a class='timestamp' href='#537648'><time timestamp='2017-03-30T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: as far as I know, only modify simple variables
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900280' id='537649'>
<a class='timestamp' href='#537649'><time timestamp='2017-03-30T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: almost nothing can be invoked from signal handlers because signals arrive synchronously, so can be called in any context from any thread
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900340' id='537650'>
<a class='timestamp' href='#537650'><time timestamp='2017-03-30T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
mmm     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900340' id='537651'>
<a class='timestamp' href='#537651'><time timestamp='2017-03-30T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
everything that has the slightest risk of crashing when called reentrantly can&#x27;t be used
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900340' id='537652'>
<a class='timestamp' href='#537652'><time timestamp='2017-03-30T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so yes, in practice most programs restrict to setting variables
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900340' id='537653'>
<a class='timestamp' href='#537653'><time timestamp='2017-03-30T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmm, alright
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900340' id='537654'>
<a class='timestamp' href='#537654'><time timestamp='2017-03-30T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
another used technique is a pipe
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900400' id='537655'>
<a class='timestamp' href='#537655'><time timestamp='2017-03-30T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
<b>*dong*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900400' id='537656'>
<a class='timestamp' href='#537656'><time timestamp='2017-03-30T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: plz backport #9959
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900400' id='537657'>
<a class='timestamp' href='#537657'><time timestamp='2017-03-30T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9959" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9959</a> | Mining: Prevent slowdown in CreateNewBlock on large mempools by sdaftuar · Pull Request #9959 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900400' id='537658'>
<a class='timestamp' href='#537658'><time timestamp='2017-03-30T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
#bitcoin-core-dev Meeting: wumpus sipa gmaxwell jonasschnelli morcos luke-jr btcdrak sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900400' id='537659'>
<a class='timestamp' href='#537659'><time timestamp='2017-03-30T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
hi.     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900400' id='537660'>
<a class='timestamp' href='#537660'><time timestamp='2017-03-30T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: will do (and here!)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900400' id='537661'>
<a class='timestamp' href='#537661'><time timestamp='2017-03-30T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
Hi!     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900400' id='537662'>
<a class='timestamp' href='#537662'><time timestamp='2017-03-30T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
<b>*reading*</b> from a pipe that has one byte in it, or something like that
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900400' id='537663'>
<a class='timestamp' href='#537663'><time timestamp='2017-03-30T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Oh, right, these are back to 10 PM now that DST is back
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900460' id='537664'>
<a class='timestamp' href='#537664'><time timestamp='2017-03-30T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
hi     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900460' id='537665'>
<a class='timestamp' href='#537665'><time timestamp='2017-03-30T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: yea, I get it, but man that sucks
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900460' id='537666'>
<a class='timestamp' href='#537666'><time timestamp='2017-03-30T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
hi     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900460' id='537667'>
<a class='timestamp' href='#537667'><time timestamp='2017-03-30T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, UNIX signals suck
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900460' id='537668'>
<a class='timestamp' href='#537668'><time timestamp='2017-03-30T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#meetingstart
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900460' id='537669'>
<a class='timestamp' href='#537669'><time timestamp='2017-03-30T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#startmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900460' id='537670'>
<a class='timestamp' href='#537670'><time timestamp='2017-03-30T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Meeting started Thu Mar 30 19:01:18 2017 UTC.  The chair is wumpus. Information about MeetBot at <a href="http://wiki.debian.org/MeetBot" class="link" target="_blank">http://wiki.debian.org/MeetBot</a>.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900460' id='537671'>
<a class='timestamp' href='#537671'><time timestamp='2017-03-30T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Useful Commands: #action #agreed #help #info #idea #link #topic.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900460' id='537672'>
<a class='timestamp' href='#537672'><time timestamp='2017-03-30T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
hi     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900460' id='537673'>
<a class='timestamp' href='#537673'><time timestamp='2017-03-30T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
here
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900460' id='537674'>
<a class='timestamp' href='#537674'><time timestamp='2017-03-30T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: it shouldn&#x27;t matter for the AbortNode() case though. Just make the conditional wait 200 milliseconds or so
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900520' id='537675'>
<a class='timestamp' href='#537675'><time timestamp='2017-03-30T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900520' id='537676'>
<a class='timestamp' href='#537676'><time timestamp='2017-03-30T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
doesn&#x27;t matter if signals are slightly delayed
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900520' id='537677'>
<a class='timestamp' href='#537677'><time timestamp='2017-03-30T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: the wait is already 200ms
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900520' id='537678'>
<a class='timestamp' href='#537678'><time timestamp='2017-03-30T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900520' id='537679'>
<a class='timestamp' href='#537679'><time timestamp='2017-03-30T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
talk about abortnode
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900520' id='537680'>
<a class='timestamp' href='#537680'><time timestamp='2017-03-30T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
thats a reasonable topic
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900520' id='537681'>
<a class='timestamp' href='#537681'><time timestamp='2017-03-30T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: yes, but make it a wait on a conditional
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900520' id='537682'>
<a class='timestamp' href='#537682'><time timestamp='2017-03-30T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
mmm, fair
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900520' id='537683'>
<a class='timestamp' href='#537683'><time timestamp='2017-03-30T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes, for sigterm its reasonable to wait a few 100 ms
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900580' id='537684'>
<a class='timestamp' href='#537684'><time timestamp='2017-03-30T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
for AbortNode it&#x27;ll wake it immediately
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900580' id='537685'>
<a class='timestamp' href='#537685'><time timestamp='2017-03-30T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900640' id='537686'>
<a class='timestamp' href='#537686'><time timestamp='2017-03-30T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
in other news, so we got 1/6 &quot;Review Priority&quot; PRs merged this week, that&#x27;s ok, but we can do better :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900640' id='537687'>
<a class='timestamp' href='#537687'><time timestamp='2017-03-30T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, nvm, got 2/6
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900640' id='537688'>
<a class='timestamp' href='#537688'><time timestamp='2017-03-30T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
FYI: <a href="https://github.com/bitcoin/bitcoin/projects/8" class="link" target="_blank">https://github.com/bitcoin/bitcoin/projects/8</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900700' id='537689'>
<a class='timestamp' href='#537689'><time timestamp='2017-03-30T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: 2/6.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900700' id='537690'>
<a class='timestamp' href='#537690'><time timestamp='2017-03-30T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
removed the two that have been merged
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900700' id='537691'>
<a class='timestamp' href='#537691'><time timestamp='2017-03-30T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
I don&#x27;t think anyone commented in mine, at least I got review in others
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900700' id='537692'>
<a class='timestamp' href='#537692'><time timestamp='2017-03-30T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I forgot about the project tracker thing, but reviewed some of them anyways.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900760' id='537693'>
<a class='timestamp' href='#537693'><time timestamp='2017-03-30T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
doesn&#x27;t matter, we&#x27;ll only add pulls that were mentioned to have priority in the meeting to that project tracker, so if you pay attention at the meeting you don&#x27;t need it :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900820' id='537694'>
<a class='timestamp' href='#537694'><time timestamp='2017-03-30T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
anyhow, everyone go review them 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900880' id='537695'>
<a class='timestamp' href='#537695'><time timestamp='2017-03-30T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
topic: 0.14.1?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900880' id='537696'>
<a class='timestamp' href='#537696'><time timestamp='2017-03-30T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa opened pull request #10126: Compensate for memory peak at flush time (master...peak_compensation) <a href="https://github.com/bitcoin/bitcoin/pull/10126" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10126</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900880' id='537697'>
<a class='timestamp' href='#537697'><time timestamp='2017-03-30T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yes, please.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900880' id='537698'>
<a class='timestamp' href='#537698'><time timestamp='2017-03-30T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
topic: slow tests?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900880' id='537699'>
<a class='timestamp' href='#537699'><time timestamp='2017-03-30T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic 0.14.1
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900940' id='537700'>
<a class='timestamp' href='#537700'><time timestamp='2017-03-30T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
already?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900940' id='537701'>
<a class='timestamp' href='#537701'><time timestamp='2017-03-30T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes. lots of nice fixes to ship. Minor releases are minor.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900940' id='537702'>
<a class='timestamp' href='#537702'><time timestamp='2017-03-30T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we have 11 merged PRs marked 0.14.1
<br>
</div>

<div class='talk op-msg' data-timestamp='1490900940' id='537703'>
<a class='timestamp' href='#537703'><time timestamp='2017-03-30T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and three open pulls <a href="https://github.com/bitcoin/bitcoin/pulls?q=is%3Aopen+is%3Apr+milestone%3A0.14.1" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pulls?q=is%3Aopen+is%3Apr+milestone%3A0.14.1</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901000' id='537704'>
<a class='timestamp' href='#537704'><time timestamp='2017-03-30T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: only one still has the &quot;needs backport&quot; tag, I think MarcoFalke ported the rest
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901000' id='537705'>
<a class='timestamp' href='#537705'><time timestamp='2017-03-30T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think when we get those three in and those and the recent ones backported, we should be goof for a 0.14.1.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901060' id='537706'>
<a class='timestamp' href='#537706'><time timestamp='2017-03-30T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
good too.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901060' id='537707'>
<a class='timestamp' href='#537707'><time timestamp='2017-03-30T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
agreed
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901120' id='537708'>
<a class='timestamp' href='#537708'><time timestamp='2017-03-30T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok, next topic I guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901120' id='537709'>
<a class='timestamp' href='#537709'><time timestamp='2017-03-30T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic slow tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901180' id='537710'>
<a class='timestamp' href='#537710'><time timestamp='2017-03-30T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I made an overview here: <a href="https://github.com/bitcoin/bitcoin/issues/10026" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10026</a>  of the slowest unit tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901180' id='537711'>
<a class='timestamp' href='#537711'><time timestamp='2017-03-30T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
A lot of it is my fault it seems. <a href="https://github.com/bitcoin/bitcoin/pull/10099" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10099</a> is ready to go
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901180' id='537712'>
<a class='timestamp' href='#537712'><time timestamp='2017-03-30T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
some of those have already been worked on or even PRs open to make them faster
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901180' id='537713'>
<a class='timestamp' href='#537713'><time timestamp='2017-03-30T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jnewbery: if you&#x27;re around, if 10106 doesn&#x27;t move forward in a few hours, I recommend you create a new pr, cherry picking that one fix, with your new tests and the fix for the other function.  (just because the PR wasn&#x27;t opened by a regular so they may not be responsive or may not know how to use github well enough to pull your changes.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901240' id='537714'>
<a class='timestamp' href='#537714'><time timestamp='2017-03-30T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
gmaxwell: I&#x27;ll do that this afternoon
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901240' id='537715'>
<a class='timestamp' href='#537715'><time timestamp='2017-03-30T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, tend to agree, they may not know how to cherry-pick them. I could cherry-pick them into his branch but meh
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901240' id='537716'>
<a class='timestamp' href='#537716'><time timestamp='2017-03-30T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-9'> MarcoFalke_lab</span>&gt;
wumpus: Yes, dropping GetRand() gave a 4* speedup.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901300' id='537717'>
<a class='timestamp' href='#537717'><time timestamp='2017-03-30T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jnewbery: and thanks for the awesome response.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901300' id='537718'>
<a class='timestamp' href='#537718'><time timestamp='2017-03-30T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
np     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901300' id='537719'>
<a class='timestamp' href='#537719'><time timestamp='2017-03-30T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
MarcoFalke_lab: that&#x27;ll at least move it down a bit in the top 20 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901300' id='537720'>
<a class='timestamp' href='#537720'><time timestamp='2017-03-30T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
The cuckoocache tests require a bit more discussion to decrease the parameters; I can pick something arbitrary 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901360' id='537721'>
<a class='timestamp' href='#537721'><time timestamp='2017-03-30T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
The checkqueue tests should also speed up a lot with #9938, but I&#x27;m preparing some tweaks to those
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901360' id='537722'>
<a class='timestamp' href='#537722'><time timestamp='2017-03-30T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9938" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9938</a> | Lock-Free CheckQueue by JeremyRubin · Pull Request #9938 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901360' id='537723'>
<a class='timestamp' href='#537723'><time timestamp='2017-03-30T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
re tests: Has anyone given any thought to #8469 , obviously this pull request sacrafices speed for exhaustiveness
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901360' id='537724'>
<a class='timestamp' href='#537724'><time timestamp='2017-03-30T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8469" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8469</a> | [POC] Introducing property based testing to Core by Christewart · Pull Request #8469 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901420' id='537725'>
<a class='timestamp' href='#537725'><time timestamp='2017-03-30T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
If anyone has high-core machines, they should try benching how that works
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901420' id='537726'>
<a class='timestamp' href='#537726'><time timestamp='2017-03-30T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jeremyrubin: alternatively we could have an -extended mode for the unit tests, like we have for the functional tests, to do extra-thorough tests that shouldn&#x27;t run every time
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901420' id='537727'>
<a class='timestamp' href='#537727'><time timestamp='2017-03-30T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-9'> MarcoFalke_lab</span>&gt;
jeremyrubin: If the parameters matter, you could provide a switch to test against quick_run and an expensive one
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901420' id='537728'>
<a class='timestamp' href='#537728'><time timestamp='2017-03-30T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes ^^
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901420' id='537729'>
<a class='timestamp' href='#537729'><time timestamp='2017-03-30T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think we should have an extended test, and make running it part of the release process.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901420' id='537730'>
<a class='timestamp' href='#537730'><time timestamp='2017-03-30T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901420' id='537731'>
<a class='timestamp' href='#537731'><time timestamp='2017-03-30T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but for the standard &#x27;make check&#x27; there should be a guideline of max ~1 second per test case
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901420' id='537732'>
<a class='timestamp' href='#537732'><time timestamp='2017-03-30T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-9'> MarcoFalke_lab</span>&gt;
Everyone agrees! :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901480' id='537733'>
<a class='timestamp' href='#537733'><time timestamp='2017-03-30T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t care if the tests take an hour to run if it&#x27;s only a mandatory once in release thing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901480' id='537734'>
<a class='timestamp' href='#537734'><time timestamp='2017-03-30T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sgtm
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901480' id='537735'>
<a class='timestamp' href='#537735'><time timestamp='2017-03-30T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
no, 2 seconds!
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901480' id='537736'>
<a class='timestamp' href='#537736'><time timestamp='2017-03-30T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: yes or once per day or so on master
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901480' id='537737'>
<a class='timestamp' href='#537737'><time timestamp='2017-03-30T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(which is failing currently)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901480' id='537738'>
<a class='timestamp' href='#537738'><time timestamp='2017-03-30T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: what is failing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901480' id='537739'>
<a class='timestamp' href='#537739'><time timestamp='2017-03-30T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, travis is broken again, but there&#x27;s a pull to fix that
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901480' id='537740'>
<a class='timestamp' href='#537740'><time timestamp='2017-03-30T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
note to self: gitian should run whatever extended tests it can
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901480' id='537741'>
<a class='timestamp' href='#537741'><time timestamp='2017-03-30T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh travis
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901480' id='537742'>
<a class='timestamp' href='#537742'><time timestamp='2017-03-30T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: <a href="https://travis-ci.org/bitcoin/bitcoin/builds" class="link" target="_blank">https://travis-ci.org/bitcoin/bitcoin/builds</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901540' id='537743'>
<a class='timestamp' href='#537743'><time timestamp='2017-03-30T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-9'> MarcoFalke_lab</span>&gt;
Jup, will merge the travis fix tonight when I have access to my keys. (If no one beats me to it)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901540' id='537744'>
<a class='timestamp' href='#537744'><time timestamp='2017-03-30T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
does anyone have the # perhaps?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901540' id='537745'>
<a class='timestamp' href='#537745'><time timestamp='2017-03-30T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think #10114?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901540' id='537746'>
<a class='timestamp' href='#537746'><time timestamp='2017-03-30T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-9'> MarcoFalke_lab</span>&gt;
Though, we should be cautious with putting too much into the cron jobs. The extended test rely on the cache being up to date
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901540' id='537747'>
<a class='timestamp' href='#537747'><time timestamp='2017-03-30T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10114" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10114</a> | An error has occurred and has been logged. Please contact this bot&#x27;s administrator for more information.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901600' id='537748'>
<a class='timestamp' href='#537748'><time timestamp='2017-03-30T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-9'> MarcoFalke_lab</span>&gt;
Otherwise they would break the 49 minute limit on traivs
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901600' id='537749'>
<a class='timestamp' href='#537749'><time timestamp='2017-03-30T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there&#x27;s also #10072
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901600' id='537750'>
<a class='timestamp' href='#537750'><time timestamp='2017-03-30T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10072" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10072</a> | Remove sources of unreliablility in extended functional tests by jnewbery · Pull Request #10072 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901600' id='537751'>
<a class='timestamp' href='#537751'><time timestamp='2017-03-30T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but yes 114 was the one I meant
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901600' id='537752'>
<a class='timestamp' href='#537752'><time timestamp='2017-03-30T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We should probably contemplate having some seperate process against master that does continual gitian builds or something.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901660' id='537753'>
<a class='timestamp' href='#537753'><time timestamp='2017-03-30T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-9'> MarcoFalke_lab</span>&gt;
jonasschnelli: Is doing that, gmaxwell
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901660' id='537754'>
<a class='timestamp' href='#537754'><time timestamp='2017-03-30T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh good.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901660' id='537755'>
<a class='timestamp' href='#537755'><time timestamp='2017-03-30T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
ignore me.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901660' id='537756'>
<a class='timestamp' href='#537756'><time timestamp='2017-03-30T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: <a href="https://bitcoin.jonasschnelli.ch" class="link" target="_blank">https://bitcoin.jonasschnelli.ch</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901660' id='537757'>
<a class='timestamp' href='#537757'><time timestamp='2017-03-30T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, jonasschnelli has a build server with a very nice web UI
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901660' id='537758'>
<a class='timestamp' href='#537758'><time timestamp='2017-03-30T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-9'> MarcoFalke_lab</span>&gt;
jonasschnelli: Are you running the tests?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901660' id='537759'>
<a class='timestamp' href='#537759'><time timestamp='2017-03-30T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(it&#x27;s currently by manual trigger)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901660' id='537760'>
<a class='timestamp' href='#537760'><time timestamp='2017-03-30T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
no.. just gitian
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901660' id='537761'>
<a class='timestamp' href='#537761'><time timestamp='2017-03-30T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
somehow I missed this. cool.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901720' id='537762'>
<a class='timestamp' href='#537762'><time timestamp='2017-03-30T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
travis already runs the tests, this is to get executables for testing
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901780' id='537763'>
<a class='timestamp' href='#537763'><time timestamp='2017-03-30T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
travis is only broken now because we&#x27;ve set it to run the extended tests once per day, so we&#x27;re currently flushing out all the extended tests that have always failed on travis. I think once #10114 and #10072 are merged the daily runs should succeed reliably
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901780' id='537764'>
<a class='timestamp' href='#537764'><time timestamp='2017-03-30T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10114" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10114</a> | An error has occurred and has been logged. Please contact this bot&#x27;s administrator for more information.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901780' id='537765'>
<a class='timestamp' href='#537765'><time timestamp='2017-03-30T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10072" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10072</a> | Remove sources of unreliablility in extended functional tests by jnewbery · Pull Request #10072 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901840' id='537766'>
<a class='timestamp' href='#537766'><time timestamp='2017-03-30T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
thanks jnewbery for the info (and the fixes)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901900' id='537767'>
<a class='timestamp' href='#537767'><time timestamp='2017-03-30T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sdaftuar opened pull request #10127: [0.14 backport] Mining: Prevent slowdown in CreateNewBlock on large mempools  (0.14...2017-03-backport-cnb-optimizations) <a href="https://github.com/bitcoin/bitcoin/pull/10127" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10127</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490901960' id='537768'>
<a class='timestamp' href='#537768'><time timestamp='2017-03-30T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok, any other topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902020' id='537769'>
<a class='timestamp' href='#537769'><time timestamp='2017-03-30T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/cde9b1a864c1...edc62c959ab3" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/cde9b1a864c1...edc62c959ab3</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902020' id='537770'>
<a class='timestamp' href='#537770'><time timestamp='2017-03-30T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 6426716 John Newbery: Add send_await_disconnect() method to p2p-compactblocks.py...
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902020' id='537771'>
<a class='timestamp' href='#537771'><time timestamp='2017-03-30T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 6a18bb9 John Newbery: [tests] sync_with_ping should assert that ping hasn&#x27;t timed out...
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902020' id='537772'>
<a class='timestamp' href='#537772'><time timestamp='2017-03-30T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master edc62c9 Wladimir J. van der Laan: Merge #10114: [tests] sync_with_ping should assert that ping hasn&#x27;t timed out...
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902020' id='537773'>
<a class='timestamp' href='#537773'><time timestamp='2017-03-30T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I should make notes for topics...
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902020' id='537774'>
<a class='timestamp' href='#537774'><time timestamp='2017-03-30T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, new prs
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902080' id='537775'>
<a class='timestamp' href='#537775'><time timestamp='2017-03-30T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
for review priority
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902080' id='537776'>
<a class='timestamp' href='#537776'><time timestamp='2017-03-30T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
looks like jonasschnelli already added his
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902080' id='537777'>
<a class='timestamp' href='#537777'><time timestamp='2017-03-30T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #10114: [tests] sync_with_ping should assert that ping hasn&#x27;t timed out (master...improve_sync_with_ping) <a href="https://github.com/bitcoin/bitcoin/pull/10114" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10114</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902080' id='537778'>
<a class='timestamp' href='#537778'><time timestamp='2017-03-30T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
anyone else have something to add (aside from 0.14.1-tagged things)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902080' id='537779'>
<a class='timestamp' href='#537779'><time timestamp='2017-03-30T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fine with me, but don&#x27;t forget the current bunch :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902080' id='537780'>
<a class='timestamp' href='#537780'><time timestamp='2017-03-30T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes please review 0.14.1 tagged things
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902080' id='537781'>
<a class='timestamp' href='#537781'><time timestamp='2017-03-30T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
although those should be easy
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902080' id='537782'>
<a class='timestamp' href='#537782'><time timestamp='2017-03-30T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
BlueMatt: Yes. The bumpfee refactor (to get a QT fee bump function)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902080' id='537783'>
<a class='timestamp' href='#537783'><time timestamp='2017-03-30T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
0.14.1 has priority, but i&#x27;d like to see #9792 in at some point to further the get-rid-of-openssl thing :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902140' id='537784'>
<a class='timestamp' href='#537784'><time timestamp='2017-03-30T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: there is a &quot;For backport&quot; column there...
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902140' id='537785'>
<a class='timestamp' href='#537785'><time timestamp='2017-03-30T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9792" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9792</a> | FastRandomContext improvements and switch to ChaCha20 by sipa · Pull Request #9792 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902140' id='537786'>
<a class='timestamp' href='#537786'><time timestamp='2017-03-30T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but I think we should be able to do 0.14.1 tomorrow so to have something to review for the rest of the week :D
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902140' id='537787'>
<a class='timestamp' href='#537787'><time timestamp='2017-03-30T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: yes good point
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902140' id='537788'>
<a class='timestamp' href='#537788'><time timestamp='2017-03-30T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ok, so morcos and sdaftuar get to propose new ones since they dont have ones up, anyone else want to propose ones?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902140' id='537789'>
<a class='timestamp' href='#537789'><time timestamp='2017-03-30T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh someone opened a PR to do something with debug log excludes, and it adds more insane string processing in the debugging critical path. Would anyone mind if I brought back the PR I shelved to make debug categories use an enum?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902200' id='537790'>
<a class='timestamp' href='#537790'><time timestamp='2017-03-30T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: wfm, the pr was jnewbery&#x27;s
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902200' id='537793'>
<a class='timestamp' href='#537793'><time timestamp='2017-03-30T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: ack enum debug categories
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902200' id='537794'>
<a class='timestamp' href='#537794'><time timestamp='2017-03-30T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: not sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902200' id='537795'>
<a class='timestamp' href='#537795'><time timestamp='2017-03-30T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
#10123
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902200' id='537796'>
<a class='timestamp' href='#537796'><time timestamp='2017-03-30T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10123" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10123</a> | Allow debug logs to be excluded from specified component by jnewbery · Pull Request #10123 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902200' id='537797'>
<a class='timestamp' href='#537797'><time timestamp='2017-03-30T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(the PR was just shelved because I opened it right before a release, and it is a conflict-the-universe PR)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902200' id='537798'>
<a class='timestamp' href='#537798'><time timestamp='2017-03-30T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: well no I guess it makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537799'>
<a class='timestamp' href='#537799'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: go for it now, I&#x27;d say
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537800'>
<a class='timestamp' href='#537800'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, do it
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537801'>
<a class='timestamp' href='#537801'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i&#x27;d like to get this DisconnectTip improvement wrapped up (#9208) but i need some help on resolving this annoying issue BlueMatt raised
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537802'>
<a class='timestamp' href='#537802'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9208" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9208</a> | Improve DisconnectTip performance by sdaftuar · Pull Request #9208 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537803'>
<a class='timestamp' href='#537803'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: +1.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537804'>
<a class='timestamp' href='#537804'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. ACK
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537805'>
<a class='timestamp' href='#537805'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
along the same lines, I&#x27;d like to do something similar for net messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537806'>
<a class='timestamp' href='#537806'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
then you can also map the enum values to strings and automate the help message generation
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537807'>
<a class='timestamp' href='#537807'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
#9424
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537808'>
<a class='timestamp' href='#537808'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9424" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9424</a> | Change LogAcceptCategory to use uint32_t rather than sets of strings. by gmaxwell · Pull Request #9424 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537809'>
<a class='timestamp' href='#537809'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sdaftuar: want to bring it up now/
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537810'>
<a class='timestamp' href='#537810'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
gmaxwell: +1. I&#x27;ll happily review that one
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537811'>
<a class='timestamp' href='#537811'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
?     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537812'>
<a class='timestamp' href='#537812'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: yes, should be fairly easy to do, I already changed the syntax for net messages to be enum-like at some point
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537813'>
<a class='timestamp' href='#537813'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
since #8855 didn&#x27;t got new review nor re-review I think just leave that (just remind to potential reviewers that #8994 continues it, in case you &quot;don&#x27;t see the point&quot;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537814'>
<a class='timestamp' href='#537814'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8855" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8855</a> | Use a proper factory for creating chainparams by jtimon · Pull Request #8855 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902260' id='537815'>
<a class='timestamp' href='#537815'><time timestamp='2017-03-30T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8994" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8994</a> | Testchains: Introduce custom chain whose constructor... by jtimon · Pull Request #8994 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902320' id='537816'>
<a class='timestamp' href='#537816'><time timestamp='2017-03-30T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: went as far as I could without making it an actual enum :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902320' id='537817'>
<a class='timestamp' href='#537817'><time timestamp='2017-03-30T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: I looked at adding a perfect hash for net messages... but didn&#x27;t know if that would be a way you&#x27;d want to go. :)  
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902320' id='537818'>
<a class='timestamp' href='#537818'><time timestamp='2017-03-30T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
new for review this week is 9792 and 9208
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902320' id='537819'>
<a class='timestamp' href='#537819'><time timestamp='2017-03-30T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: yes, it sure looks like an enum :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902320' id='537820'>
<a class='timestamp' href='#537820'><time timestamp='2017-03-30T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: just make sure all debug category names have different length
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902380' id='537821'>
<a class='timestamp' href='#537821'><time timestamp='2017-03-30T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: well we don&#x27;t need to do any runtime lookup of category names at all.. so no need to do anything performant there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902380' id='537822'>
<a class='timestamp' href='#537822'><time timestamp='2017-03-30T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
at least give them consecutive values so a bit field can be used to represent the set
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902380' id='537823'>
<a class='timestamp' href='#537823'><time timestamp='2017-03-30T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
intead of a per-thread map :-(
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902380' id='537825'>
<a class='timestamp' href='#537825'><time timestamp='2017-03-30T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: i had considered making it an array&lt;char, 12&gt;. But I really don&#x27;t care, as long as it&#x27;s switchable and a compile-time constant
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902380' id='537826'>
<a class='timestamp' href='#537826'><time timestamp='2017-03-30T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: that is what PR 9424 does. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902380' id='537827'>
<a class='timestamp' href='#537827'><time timestamp='2017-03-30T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: ok, great
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902380' id='537828'>
<a class='timestamp' href='#537828'><time timestamp='2017-03-30T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: it assigns them each to a bit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902440' id='537829'>
<a class='timestamp' href='#537829'><time timestamp='2017-03-30T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the current code that assigns it a thread-local variable is really strange
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902440' id='537830'>
<a class='timestamp' href='#537830'><time timestamp='2017-03-30T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] JeremyRubin opened pull request #10128: Speed Up CuckooCache tests (master...cuckoo-tests-faster) <a href="https://github.com/bitcoin/bitcoin/pull/10128" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10128</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902440' id='537831'>
<a class='timestamp' href='#537831'><time timestamp='2017-03-30T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(and now that I think about it, std::array probably isn&#x27;t switchable anyway)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902440' id='537832'>
<a class='timestamp' href='#537832'><time timestamp='2017-03-30T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes. horrors from beyond time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902440' id='537833'>
<a class='timestamp' href='#537833'><time timestamp='2017-03-30T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
topic suggestion: dealing with abortnode / ConnectTip / DisconnectTip failures
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902500' id='537834'>
<a class='timestamp' href='#537834'><time timestamp='2017-03-30T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case, if people support-- 9424 is hard to rebase because it touches the whole codebase.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902500' id='537835'>
<a class='timestamp' href='#537835'><time timestamp='2017-03-30T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: in some modern languages it&#x27;s possible to switch on compound types and arrays and strings, but no, not c++XX before XX=50 or so :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902500' id='537836'>
<a class='timestamp' href='#537836'><time timestamp='2017-03-30T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but I think it also makes jnewbery&#x27;s exclude trivial. (in fact: no runtime impact...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902500' id='537837'>
<a class='timestamp' href='#537837'><time timestamp='2017-03-30T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: yes, it&#x27;s how it should be done
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902560' id='537838'>
<a class='timestamp' href='#537838'><time timestamp='2017-03-30T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in haskell it&#x27;s pretty much the only way you can inspect a compound type at all :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902560' id='537839'>
<a class='timestamp' href='#537839'><time timestamp='2017-03-30T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
gmaxwell: agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902560' id='537840'>
<a class='timestamp' href='#537840'><time timestamp='2017-03-30T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902560' id='537841'>
<a class='timestamp' href='#537841'><time timestamp='2017-03-30T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok, sdaftuar&#x27;s topic?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902560' id='537842'>
<a class='timestamp' href='#537842'><time timestamp='2017-03-30T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
cfields: my intution for that would be using gperf to map the messages to integers. then switching on them... but perhaps overkill.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902560' id='537843'>
<a class='timestamp' href='#537843'><time timestamp='2017-03-30T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic dealing with abortnode / ConnectTip / DisconnectTip failures
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902620' id='537844'>
<a class='timestamp' href='#537844'><time timestamp='2017-03-30T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
context: #9208
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902620' id='537845'>
<a class='timestamp' href='#537845'><time timestamp='2017-03-30T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9208" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9208</a> | Improve DisconnectTip performance by sdaftuar · Pull Request #9208 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902620' id='537846'>
<a class='timestamp' href='#537846'><time timestamp='2017-03-30T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: i saw i was pinged in the PR, but haven&#x27;t read it
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902620' id='537847'>
<a class='timestamp' href='#537847'><time timestamp='2017-03-30T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so this issue might be hard to grasp without reviewing #9208
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902620' id='537848'>
<a class='timestamp' href='#537848'><time timestamp='2017-03-30T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9208" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9208</a> | Improve DisconnectTip performance by sdaftuar · Pull Request #9208 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902620' id='537849'>
<a class='timestamp' href='#537849'><time timestamp='2017-03-30T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: will that work for unknown messages too?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902620' id='537850'>
<a class='timestamp' href='#537850'><time timestamp='2017-03-30T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but basically matt brought up that we have some edge cases in our code if ConnectTip or DisconnectTip return false
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902620' id='537851'>
<a class='timestamp' href='#537851'><time timestamp='2017-03-30T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: does a perfect hash handle collisions? I don&#x27;t remember
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902680' id='537852'>
<a class='timestamp' href='#537852'><time timestamp='2017-03-30T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: perfect hash means no collisions :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902680' id='537853'>
<a class='timestamp' href='#537853'><time timestamp='2017-03-30T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: for known values
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902680' id='537854'>
<a class='timestamp' href='#537854'><time timestamp='2017-03-30T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
wouldn&#x27;t that not be backwards compatible?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902680' id='537855'>
<a class='timestamp' href='#537855'><time timestamp='2017-03-30T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: gperf can check, it&#x27;s an option.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902680' id='537856'>
<a class='timestamp' href='#537856'><time timestamp='2017-03-30T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: but what if &#x27;moo&#x27; maps to the same 32-bit value as &#x27;block&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902680' id='537857'>
<a class='timestamp' href='#537857'><time timestamp='2017-03-30T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
someone sends you a new type of message that hashes to something else
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902740' id='537858'>
<a class='timestamp' href='#537858'><time timestamp='2017-03-30T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
scary
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902740' id='537859'>
<a class='timestamp' href='#537859'><time timestamp='2017-03-30T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: hmm, i&#x27;ll review the PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902740' id='537860'>
<a class='timestamp' href='#537860'><time timestamp='2017-03-30T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
the last issue i&#x27;m trying to resolve is if ConnectTip fails (but the block is not invalid), then we should be in an AbortNode() state.  what consistency are we aiming for in this situation?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902740' id='537861'>
<a class='timestamp' href='#537861'><time timestamp='2017-03-30T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: ah, true
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902740' id='537862'>
<a class='timestamp' href='#537862'><time timestamp='2017-03-30T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: making it never have collisions for unknows is just an extra comparison with the correct value.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902740' id='537863'>
<a class='timestamp' href='#537863'><time timestamp='2017-03-30T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: which IIRC the gperf emitted code will do, if enabled.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902740' id='537864'>
<a class='timestamp' href='#537864'><time timestamp='2017-03-30T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(actually, looks like it&#x27;s the default)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902740' id='537865'>
<a class='timestamp' href='#537865'><time timestamp='2017-03-30T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lol, ok, so lets pick a topic instead of two
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902800' id='537866'>
<a class='timestamp' href='#537866'><time timestamp='2017-03-30T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: we should be able to shut down and come back up with the underlying issue resolved and continue.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902800' id='537867'>
<a class='timestamp' href='#537867'><time timestamp='2017-03-30T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, sorry, I was just curous about gperf
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902800' id='537868'>
<a class='timestamp' href='#537868'><time timestamp='2017-03-30T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: I don&#x27;t care if we lose a bunch of recent blocks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902800' id='537869'>
<a class='timestamp' href='#537869'><time timestamp='2017-03-30T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: it&#x27;s fine if we lose progress in that case, but if at all avoidable, the on disk state should not be corrupted
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902800' id='537870'>
<a class='timestamp' href='#537870'><time timestamp='2017-03-30T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
anyway, so I further observed that shutdown upon AbortNode can take up to 200ms (see recent PR), which is somewhat frightening, given that mempool and chainstate may not be consistent which we assume in many places :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902800' id='537871'>
<a class='timestamp' href='#537871'><time timestamp='2017-03-30T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: sipa: what should we do with the mempool?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902860' id='537872'>
<a class='timestamp' href='#537872'><time timestamp='2017-03-30T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: who cares?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902860' id='537873'>
<a class='timestamp' href='#537873'><time timestamp='2017-03-30T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
so we keep running for a while normally and possibly have incorrect assumptions
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902860' id='537874'>
<a class='timestamp' href='#537874'><time timestamp='2017-03-30T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t care.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902860' id='537875'>
<a class='timestamp' href='#537875'><time timestamp='2017-03-30T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
just drop it
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902860' id='537876'>
<a class='timestamp' href='#537876'><time timestamp='2017-03-30T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: at restart we&#x27;ll try to reimport what is on disk
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902860' id='537877'>
<a class='timestamp' href='#537877'><time timestamp='2017-03-30T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and re-run all necessary consistency checks
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902860' id='537878'>
<a class='timestamp' href='#537878'><time timestamp='2017-03-30T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so mempool.dat doesn&#x27;t need to be consistent with the chainstate
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902860' id='537879'>
<a class='timestamp' href='#537879'><time timestamp='2017-03-30T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and wallet?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902920' id='537880'>
<a class='timestamp' href='#537880'><time timestamp='2017-03-30T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think the concern matt was raising was if before shutdown, it&#x27;s possible for eg an RPC call to get incorrect results
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902920' id='537881'>
<a class='timestamp' href='#537881'><time timestamp='2017-03-30T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
or the wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902920' id='537882'>
<a class='timestamp' href='#537882'><time timestamp='2017-03-30T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, no tight coupling, good design
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902920' id='537883'>
<a class='timestamp' href='#537883'><time timestamp='2017-03-30T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: point is we <b>*have*</b> tight coupling
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902920' id='537884'>
<a class='timestamp' href='#537884'><time timestamp='2017-03-30T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
wallet doesn&#x27;t need to be in sync either, though it should not be ahead
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902920' id='537885'>
<a class='timestamp' href='#537885'><time timestamp='2017-03-30T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: ugh
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902920' id='537886'>
<a class='timestamp' href='#537886'><time timestamp='2017-03-30T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and continue running after realizing something is corrupted
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902920' id='537887'>
<a class='timestamp' href='#537887'><time timestamp='2017-03-30T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well abortnode should be instant-ish.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902920' id='537888'>
<a class='timestamp' href='#537888'><time timestamp='2017-03-30T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: so you&#x27;re fixing that, what is there to discuss?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902920' id='537889'>
<a class='timestamp' href='#537889'><time timestamp='2017-03-30T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
a bit behind (as long as it&#x27;s not further than the prune distance) is ok, it will catch up in next start
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902920' id='537890'>
<a class='timestamp' href='#537890'><time timestamp='2017-03-30T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: i mean the new pr is an improvement, but its not a fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902980' id='537891'>
<a class='timestamp' href='#537891'><time timestamp='2017-03-30T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
its not like you cant have something pending cs_main when coming out of Disconnect/ConnectTip
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902980' id='537892'>
<a class='timestamp' href='#537892'><time timestamp='2017-03-30T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but if the wallet is ahead of the chain it will trigger a rescan IIRC
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902980' id='537893'>
<a class='timestamp' href='#537893'><time timestamp='2017-03-30T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so perhaps abortnode needs to Abort()?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902980' id='537894'>
<a class='timestamp' href='#537894'><time timestamp='2017-03-30T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: thats pretty much the question
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902980' id='537895'>
<a class='timestamp' href='#537895'><time timestamp='2017-03-30T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
thats super shit, though, of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902980' id='537896'>
<a class='timestamp' href='#537896'><time timestamp='2017-03-30T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and not faffabout witht politely shutting off threads.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902980' id='537897'>
<a class='timestamp' href='#537897'><time timestamp='2017-03-30T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I don&#x27;t think so
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902980' id='537898'>
<a class='timestamp' href='#537898'><time timestamp='2017-03-30T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i inadvertently introduced an assert failure in one of these situations.  maybe that&#x27;s a feature not a flaw! :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902980' id='537899'>
<a class='timestamp' href='#537899'><time timestamp='2017-03-30T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Why is it shit? we should be durable across a power off, which is worse than aborting.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902980' id='537900'>
<a class='timestamp' href='#537900'><time timestamp='2017-03-30T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the point of abortnode is to be able to show a GUI dialog to the user
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902980' id='537901'>
<a class='timestamp' href='#537901'><time timestamp='2017-03-30T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
ah     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490902980' id='537902'>
<a class='timestamp' href='#537902'><time timestamp='2017-03-30T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if you abort() the user will never know to check the debug.log
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537903'>
<a class='timestamp' href='#537903'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: well we can show a gui dialog and abort() prior to unlocking cs_main
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537904'>
<a class='timestamp' href='#537904'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
:P     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537905'>
<a class='timestamp' href='#537905'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
have a graceful shutdown falg
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537906'>
<a class='timestamp' href='#537906'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
*flag
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537907'>
<a class='timestamp' href='#537907'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: but it&#x27;s not unlikely that we can&#x27;t show a gui... if we can&#x27;t allocate (likely cause). 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537908'>
<a class='timestamp' href='#537908'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which would effectively be sufficient
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537909'>
<a class='timestamp' href='#537909'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I always thought that AbortNode was for errors that could tolerate a graceful shutdown
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537910'>
<a class='timestamp' href='#537910'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the really terrible errors we already assert() or abort() on
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537911'>
<a class='timestamp' href='#537911'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
and if we&#x27;re shutting down gracefully, write to a file &quot;was graceful&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537912'>
<a class='timestamp' href='#537912'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: AbortNode() is usually disk corruption
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537913'>
<a class='timestamp' href='#537913'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
On next start, show dialogue first thing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537914'>
<a class='timestamp' href='#537914'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
please don&#x27;t make it routine to abort() for everything
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903040' id='537915'>
<a class='timestamp' href='#537915'><time timestamp='2017-03-30T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
only for things that really warrant it
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903100' id='537916'>
<a class='timestamp' href='#537916'><time timestamp='2017-03-30T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
not crash on every single error
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903100' id='537917'>
<a class='timestamp' href='#537917'><time timestamp='2017-03-30T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
or too little disk space
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903100' id='537918'>
<a class='timestamp' href='#537918'><time timestamp='2017-03-30T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
or too little disk space, not quite teh same as corruption
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903100' id='537919'>
<a class='timestamp' href='#537919'><time timestamp='2017-03-30T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s just a mess
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903100' id='537920'>
<a class='timestamp' href='#537920'><time timestamp='2017-03-30T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
okay, sure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903100' id='537921'>
<a class='timestamp' href='#537921'><time timestamp='2017-03-30T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
for some problems it&#x27;s fine to try to clean up normally
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903100' id='537922'>
<a class='timestamp' href='#537922'><time timestamp='2017-03-30T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but we still need to exit with a message
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903100' id='537923'>
<a class='timestamp' href='#537923'><time timestamp='2017-03-30T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s what abortnode is for
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903100' id='537924'>
<a class='timestamp' href='#537924'><time timestamp='2017-03-30T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if BlueMatt can make it work faster that&#x27;s great, but don&#x27;t silently kill the program on every error
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903160' id='537925'>
<a class='timestamp' href='#537925'><time timestamp='2017-03-30T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: how about every other error?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903160' id='537926'>
<a class='timestamp' href='#537926'><time timestamp='2017-03-30T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
:P     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903160' id='537927'>
<a class='timestamp' href='#537927'><time timestamp='2017-03-30T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: hehe
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903160' id='537928'>
<a class='timestamp' href='#537928'><time timestamp='2017-03-30T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
do #9208 and #9725 interact?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903220' id='537929'>
<a class='timestamp' href='#537929'><time timestamp='2017-03-30T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9208" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9208</a> | Improve DisconnectTip performance by sdaftuar · Pull Request #9208 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903220' id='537930'>
<a class='timestamp' href='#537930'><time timestamp='2017-03-30T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9725" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9725</a> | CValidationInterface Cleanups by TheBlueMatt · Pull Request #9725 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903220' id='537931'>
<a class='timestamp' href='#537931'><time timestamp='2017-03-30T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Y&#x27;all so worried about the dressings on the coffin.  &quot;It&#x27;s already dead!&quot;  But sure. Sorry I was only thinking of OOM, it&#x27;s just a recent subject.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903220' id='537932'>
<a class='timestamp' href='#537932'><time timestamp='2017-03-30T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: they dont, afaik, aside from there now being two structs that can be merged
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903220' id='537933'>
<a class='timestamp' href='#537933'><time timestamp='2017-03-30T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I think deleting a file on graceful shutdown should work
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903220' id='537934'>
<a class='timestamp' href='#537934'><time timestamp='2017-03-30T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
And then starting when that file is present shows the dialouge rather than starting
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903220' id='537935'>
<a class='timestamp' href='#537935'><time timestamp='2017-03-30T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: yea, AbortNode isnt used for thigns like OOM and total death
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903220' id='537936'>
<a class='timestamp' href='#537936'><time timestamp='2017-03-30T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
disk space also does it
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903220' id='537937'>
<a class='timestamp' href='#537937'><time timestamp='2017-03-30T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but it can also be db corruption
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903280' id='537938'>
<a class='timestamp' href='#537938'><time timestamp='2017-03-30T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
This means you don&#x27;t do anything at all on the Abort, but requires the user to restart their node to see the message
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903280' id='537939'>
<a class='timestamp' href='#537939'><time timestamp='2017-03-30T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
so maybe the solution is AbortNode gets renamed to ShutdownSoon() and use make sure disk corruption is something different?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903280' id='537940'>
<a class='timestamp' href='#537940'><time timestamp='2017-03-30T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: yes, makes sense to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903280' id='537941'>
<a class='timestamp' href='#537941'><time timestamp='2017-03-30T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: or add a flag
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903280' id='537942'>
<a class='timestamp' href='#537942'><time timestamp='2017-03-30T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I haven&#x27;t really thought this all the way through, but doesn&#x27;t it seem that as we move more and more towards things happening in other threads, that you&#x27;d rather let those threads finish what they are doing
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903280' id='537943'>
<a class='timestamp' href='#537943'><time timestamp='2017-03-30T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: you could also harden things up against your current concer by having the rpc stuff always check the shutdown flag right after taking cs_main (whenever it does)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903280' id='537944'>
<a class='timestamp' href='#537944'><time timestamp='2017-03-30T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
If you&#x27;re committing wallet changes for instance
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903280' id='537945'>
<a class='timestamp' href='#537945'><time timestamp='2017-03-30T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: and if it finds out that its on its way down, just returning at that point.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903340' id='537946'>
<a class='timestamp' href='#537946'><time timestamp='2017-03-30T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
in the long run morcos we should move toward looser coupling of things
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903340' id='537947'>
<a class='timestamp' href='#537947'><time timestamp='2017-03-30T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903340' id='537948'>
<a class='timestamp' href='#537948'><time timestamp='2017-03-30T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: yea, I&#x27;m worried that if we start down that path we have to check it everywhere
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903340' id='537949'>
<a class='timestamp' href='#537949'><time timestamp='2017-03-30T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
eg wallet may make decisions based on some corrupted mempool state
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903340' id='537950'>
<a class='timestamp' href='#537950'><time timestamp='2017-03-30T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Let&#x27;s say you just got some new address from the wallet, and the wallet hasn&#x27;t committed that state yet and then you Abort()
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903340' id='537951'>
<a class='timestamp' href='#537951'><time timestamp='2017-03-30T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(I havent thought all the way through all the potential issues here, just a potential concern)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903400' id='537952'>
<a class='timestamp' href='#537952'><time timestamp='2017-03-30T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
morcos: luckily we have the keypool to handle that specific contingency
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903400' id='537953'>
<a class='timestamp' href='#537953'><time timestamp='2017-03-30T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Every thread could have their own unique ungraceful-close file that it should delete (via RAII) on clean exit. Starting with any present would show error. Uncoupled!
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903400' id='537954'>
<a class='timestamp' href='#537954'><time timestamp='2017-03-30T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: well at least the worst you get there is replay (due to keypool/hdwallets).. though replay can be pretty bad.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903460' id='537955'>
<a class='timestamp' href='#537955'><time timestamp='2017-03-30T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
pretty bad but well at least they will never lose live keys
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903460' id='537956'>
<a class='timestamp' href='#537956'><time timestamp='2017-03-30T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
jeremyrubin: I have a feeling we can be more agressive on the super-strange issues, afaiu this stuff is pretty much hit just with out-of-disk everything else is rare enough.....
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903520' id='537957'>
<a class='timestamp' href='#537957'><time timestamp='2017-03-30T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe we should just have some std::atomic&lt;bool&gt; shits_on_fire_yo; which when set prevents RPCs etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903520' id='537958'>
<a class='timestamp' href='#537958'><time timestamp='2017-03-30T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jeremyrubin: that&#x27;s not what I mean with uncoupling, what I mean is that if one thread messes up it doesn&#x27;t need to take the others with it because it can operate more-or-less independently
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903520' id='537959'>
<a class='timestamp' href='#537959'><time timestamp='2017-03-30T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: well shutdown can be more or less that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903580' id='537960'>
<a class='timestamp' href='#537960'><time timestamp='2017-03-30T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that can even be set from a signal handler
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903580' id='537961'>
<a class='timestamp' href='#537961'><time timestamp='2017-03-30T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
&lt;BlueMatt&gt; so maybe the solution is AbortNode gets renamed to ShutdownSoon() and use make sure disk corruption is something different?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903580' id='537962'>
<a class='timestamp' href='#537962'><time timestamp='2017-03-30T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sipa: what do you do with an in progress RPC?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903640' id='537963'>
<a class='timestamp' href='#537963'><time timestamp='2017-03-30T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
in ShutdownSoon cases (eg out of disk) we&#x27;re ok to continue and just shut down, i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903640' id='537964'>
<a class='timestamp' href='#537964'><time timestamp='2017-03-30T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jeremyrubin: we can only do so much
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903640' id='537965'>
<a class='timestamp' href='#537965'><time timestamp='2017-03-30T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
you can&#x27;t generally break off an in-progress RPC
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903640' id='537966'>
<a class='timestamp' href='#537966'><time timestamp='2017-03-30T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
in other cases, we can just assert(false)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903640' id='537967'>
<a class='timestamp' href='#537967'><time timestamp='2017-03-30T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
although some will pay attention to fShutdown
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903640' id='537968'>
<a class='timestamp' href='#537968'><time timestamp='2017-03-30T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
because they&#x27;re super rare anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903640' id='537969'>
<a class='timestamp' href='#537969'><time timestamp='2017-03-30T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
wumpus: ^ yes, O
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903640' id='537970'>
<a class='timestamp' href='#537970'><time timestamp='2017-03-30T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but really, what probably should be done is having the rpcs being able to handle being told &quot;No, you can&#x27;t have access to [whatever chain state you wanted] right now.&quot;  then these error conditions that could leave them unstable... could set them. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903640' id='537971'>
<a class='timestamp' href='#537971'><time timestamp='2017-03-30T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and if your disk is corrupted we probably shouldnt be flushing wallet and chainstate as a part of shutdown anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903640' id='537972'>
<a class='timestamp' href='#537972'><time timestamp='2017-03-30T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: yea, but thats a huge rewrite for cases that should be super rare
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903700' id='537973'>
<a class='timestamp' href='#537973'><time timestamp='2017-03-30T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Or we take a whole different approach to failure messages, .e.g. wrap bitcoin-qt in another program that when qt exists it can go through the logs and give you a useful error. (though this doesn&#x27;t answer morcos&#x27; wallet flush, but really that should be in another process.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903700' id='537974'>
<a class='timestamp' href='#537974'><time timestamp='2017-03-30T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: I think there should be a clear separation between (A) I/O issues such as out of disk spae, which just happen regularly (B) rare implementation issues such as internal consistency errors
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903700' id='537975'>
<a class='timestamp' href='#537975'><time timestamp='2017-03-30T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
iirc rpc has a IsRPCShuttingDown() or so, but only a few things (gbt only, maybe?) checks it
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903700' id='537976'>
<a class='timestamp' href='#537976'><time timestamp='2017-03-30T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
wumpus: * yes, I&#x27;m aware that isn&#x27;t quite what you meant, just making noise about having a graceful shutdown file because I think it&#x27;s a reasonable way to mark if a node shut down dirty
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903700' id='537977'>
<a class='timestamp' href='#537977'><time timestamp='2017-03-30T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(A) normal errors should just give the user an error as AbortNode does now and shut down properly
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903760' id='537978'>
<a class='timestamp' href='#537978'><time timestamp='2017-03-30T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(B) internal state corruption errors could break off the process immediately 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903760' id='537979'>
<a class='timestamp' href='#537979'><time timestamp='2017-03-30T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It&#x27;s obnoxious that we can&#x27;t preallocate resources such that we can guarentee that we never take a failure at an inoppturtune time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903760' id='537980'>
<a class='timestamp' href='#537980'><time timestamp='2017-03-30T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
having to slather the code in error handling to deal with that is not ideal.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903760' id='537981'>
<a class='timestamp' href='#537981'><time timestamp='2017-03-30T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: you can preallocate lots of things?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903760' id='537982'>
<a class='timestamp' href='#537982'><time timestamp='2017-03-30T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: &quot;I had to abort processing a block&quot; is a weak kind of internal state corruption. It leaves assumed invariants violated.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903760' id='537983'>
<a class='timestamp' href='#537983'><time timestamp='2017-03-30T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jeremyrubin: in particular we can&#x27;t make leveldb&#x27;s disk usage constant.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903760' id='537984'>
<a class='timestamp' href='#537984'><time timestamp='2017-03-30T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: yes, thats my proposal
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903820' id='537985'>
<a class='timestamp' href='#537985'><time timestamp='2017-03-30T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: but, specifically, B would include things like chainstate-on-disk-corruption
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903820' id='537986'>
<a class='timestamp' href='#537986'><time timestamp='2017-03-30T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which it already partially does, just not completely
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903820' id='537987'>
<a class='timestamp' href='#537987'><time timestamp='2017-03-30T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
having code to handle normal errors is perfectly normal and all code has that, I agree that paranoid memory/disk corruption errors tend not to be possible to handle in a sane way
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903820' id='537988'>
<a class='timestamp' href='#537988'><time timestamp='2017-03-30T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903820' id='537989'>
<a class='timestamp' href='#537989'><time timestamp='2017-03-30T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ok, soooo, acks on:&lt;BlueMatt&gt; &lt;BlueMatt&gt; so maybe the solution is AbortNode gets renamed to ShutdownSoon() and use make sure disk corruption is something different?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903880' id='537990'>
<a class='timestamp' href='#537990'><time timestamp='2017-03-30T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: as I said beforer, yes, that or add a flag/criticality level
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903880' id='537991'>
<a class='timestamp' href='#537991'><time timestamp='2017-03-30T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
s/use make sure/make sure/
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903880' id='537992'>
<a class='timestamp' href='#537992'><time timestamp='2017-03-30T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
BlueMatt: maybe if you paste it again
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903880' id='537993'>
<a class='timestamp' href='#537993'><time timestamp='2017-03-30T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sure, that too
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903880' id='537994'>
<a class='timestamp' href='#537994'><time timestamp='2017-03-30T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
jeremyrubin: ok, &lt;BlueMatt&gt; ok, soooo, acks on:&lt;BlueMatt&gt; &lt;BlueMatt&gt; so maybe the solution is AbortNode gets renamed to ShutdownSoon() and use make sure disk corruption is something different?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903880' id='537995'>
<a class='timestamp' href='#537995'><time timestamp='2017-03-30T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: for example, if we run out of space while flushing our view of the blockchain will be corrupt, and information about the blockchain from rpcs will be wrong.  In a world where error handling is free, every code path that gets access to the blockchain data would be able to gracefully handle being told it&#x27;s just not available.  But I think that would be an unreasonable and dangerous amount 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903880' id='537996'>
<a class='timestamp' href='#537996'><time timestamp='2017-03-30T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
of complexity. :( 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903880' id='537997'>
<a class='timestamp' href='#537997'><time timestamp='2017-03-30T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: I missed that statement, but, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903940' id='537998'>
<a class='timestamp' href='#537998'><time timestamp='2017-03-30T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: that sounds okay to me. but I don&#x27;t know that diskfull is really a shutdown soon though we really do need to give it a nice message. :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903940' id='537999'>
<a class='timestamp' href='#537999'><time timestamp='2017-03-30T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: note that the out-of-disk error happens <b>*before*</b> the disk is entirely full
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903940' id='538000'>
<a class='timestamp' href='#538000'><time timestamp='2017-03-30T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
BlueMatt: sgtm
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903940' id='538001'>
<a class='timestamp' href='#538001'><time timestamp='2017-03-30T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: there&#x27;s a threshold
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903940' id='538002'>
<a class='timestamp' href='#538002'><time timestamp='2017-03-30T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: so that should already be mitigated
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903940' id='538003'>
<a class='timestamp' href='#538003'><time timestamp='2017-03-30T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: yes, but it&#x27;s not atomic. you can&#x27;t check and then successfully allocate space.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903940' id='538004'>
<a class='timestamp' href='#538004'><time timestamp='2017-03-30T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no, it&#x27;s not perfect, but it works pretty well
<br>
</div>

<div class='talk op-msg' data-timestamp='1490903940' id='538005'>
<a class='timestamp' href='#538005'><time timestamp='2017-03-30T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;ve never had corruption on full disk
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904000' id='538006'>
<a class='timestamp' href='#538006'><time timestamp='2017-03-30T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
also leveldb write failing shouldn&#x27;t generally be fatal
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904000' id='538007'>
<a class='timestamp' href='#538007'><time timestamp='2017-03-30T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
on my desktop, which runs with debug=1 it almost always gets checked at the start of the flush. It doesn&#x27;t corrupt things on disk, but as matt points out the rpc would return somewhat incorrect results during that time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904000' id='538008'>
<a class='timestamp' href='#538008'><time timestamp='2017-03-30T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it just means the last transaction is not committed
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904060' id='538009'>
<a class='timestamp' href='#538009'><time timestamp='2017-03-30T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-13'> jtimon</span>&gt;
it seems it&#x27;s time to abort the meeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904060' id='538010'>
<a class='timestamp' href='#538010'><time timestamp='2017-03-30T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#endmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904060' id='538011'>
<a class='timestamp' href='#538011'><time timestamp='2017-03-30T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Meeting ended Thu Mar 30 20:01:06 2017 UTC.  Information about MeetBot at <a href="http://wiki.debian.org/MeetBot" class="link" target="_blank">http://wiki.debian.org/MeetBot</a> . (v 0.1.4)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904060' id='538012'>
<a class='timestamp' href='#538012'><time timestamp='2017-03-30T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Minutes:        <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-03-30-19.01.html" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-03-30-19.01.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904060' id='538013'>
<a class='timestamp' href='#538013'><time timestamp='2017-03-30T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Minutes (text): <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-03-30-19.01.txt" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-03-30-19.01.txt</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904060' id='538014'>
<a class='timestamp' href='#538014'><time timestamp='2017-03-30T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Log:            <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-03-30-19.01.log.html" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2017/bitcoin-core-dev.2017-03-30-19.01.log.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904060' id='538015'>
<a class='timestamp' href='#538015'><time timestamp='2017-03-30T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: we need to change that to #abort()
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904060' id='538016'>
<a class='timestamp' href='#538016'><time timestamp='2017-03-30T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
But I wanted to cleanly flush!
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904120' id='538017'>
<a class='timestamp' href='#538017'><time timestamp='2017-03-30T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theuni opened pull request #10129: scheduler: fix sub-second precision with boost &lt; 1.50 (master...fix-scheduler-millisecs) <a href="https://github.com/bitcoin/bitcoin/pull/10129" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10129</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904120' id='538018'>
<a class='timestamp' href='#538018'><time timestamp='2017-03-30T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: ^^ fixes the ramped-up cpu issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904180' id='538019'>
<a class='timestamp' href='#538019'><time timestamp='2017-03-30T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: 10129 needs backport I suppose?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904180' id='538020'>
<a class='timestamp' href='#538020'><time timestamp='2017-03-30T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: ahh, lol, I dont have old boost
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904180' id='538021'>
<a class='timestamp' href='#538021'><time timestamp='2017-03-30T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: only if we also backport the wallet-flush-in-cscheduler, probably?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904180' id='538022'>
<a class='timestamp' href='#538022'><time timestamp='2017-03-30T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(which i think we should, but....)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904180' id='538023'>
<a class='timestamp' href='#538023'><time timestamp='2017-03-30T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
questionable given boost issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904180' id='538024'>
<a class='timestamp' href='#538024'><time timestamp='2017-03-30T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
eh no, let&#x27;s not do that, sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904180' id='538025'>
<a class='timestamp' href='#538025'><time timestamp='2017-03-30T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: won&#x27;t hurt, but doesn&#x27;t currently matter
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904240' id='538026'>
<a class='timestamp' href='#538026'><time timestamp='2017-03-30T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: fair, yea
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904240' id='538027'>
<a class='timestamp' href='#538027'><time timestamp='2017-03-30T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: probably best to go ahead and backport, just in case any other stuff is backported in the future that relies on the correct behavior
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904240' id='538028'>
<a class='timestamp' href='#538028'><time timestamp='2017-03-30T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, i mean if it turns out there are complications and its not dead simple, not backporting seems like the best idea
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904240' id='538029'>
<a class='timestamp' href='#538029'><time timestamp='2017-03-30T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wallet-flush-in-cscheduler removes a thread?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904240' id='538030'>
<a class='timestamp' href='#538030'><time timestamp='2017-03-30T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: I assued that was the point because one of your other pulls changes the times to std::chrono instead
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904240' id='538031'>
<a class='timestamp' href='#538031'><time timestamp='2017-03-30T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
this one is backportable at least
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904300' id='538032'>
<a class='timestamp' href='#538032'><time timestamp='2017-03-30T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: yes, and BlueMatt was discussing possibly backporting other scheduler changes. Was just being proactive :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904300' id='538033'>
<a class='timestamp' href='#538033'><time timestamp='2017-03-30T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
if wallet-flush-in-cscheduler reduces the thread count, then it&#x27;s also perhaps interesting in a backport. (less memory / address space!)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904300' id='538034'>
<a class='timestamp' href='#538034'><time timestamp='2017-03-30T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: it does, but imo it&#x27;s too risky to backport, we&#x27;re not entirely sure of it yet this might be only the first issue with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904300' id='538035'>
<a class='timestamp' href='#538035'><time timestamp='2017-03-30T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
aww     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904300' id='538036'>
<a class='timestamp' href='#538036'><time timestamp='2017-03-30T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
:P     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904300' id='538037'>
<a class='timestamp' href='#538037'><time timestamp='2017-03-30T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
K     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904360' id='538038'>
<a class='timestamp' href='#538038'><time timestamp='2017-03-30T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: yea, thats why i was proposing backport....but its not simple, apparently, because boost :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904360' id='538039'>
<a class='timestamp' href='#538039'><time timestamp='2017-03-30T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;ve always been kind of wary of cscheduler
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904360' id='538040'>
<a class='timestamp' href='#538040'><time timestamp='2017-03-30T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: yea.....
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904360' id='538041'>
<a class='timestamp' href='#538041'><time timestamp='2017-03-30T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea... well we&#x27;ve had a lot of problems with it in the past.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904360' id='538042'>
<a class='timestamp' href='#538042'><time timestamp='2017-03-30T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there&#x27;s been lots of issues with it historically at least in the tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904360' id='538043'>
<a class='timestamp' href='#538043'><time timestamp='2017-03-30T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904360' id='538044'>
<a class='timestamp' href='#538044'><time timestamp='2017-03-30T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: same. even moreso after diving in to debug that one.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904420' id='538045'>
<a class='timestamp' href='#538045'><time timestamp='2017-03-30T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
in fairness though, i think many issues have been boost-related
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904420' id='538046'>
<a class='timestamp' href='#538046'><time timestamp='2017-03-30T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the general idea of having all the rare periodic stuff in a thread that handles them, is perfectly reasonsble.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904420' id='538047'>
<a class='timestamp' href='#538047'><time timestamp='2017-03-30T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, and most bugs don&#x27;t show up in our actual single-threaded usage
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904420' id='538048'>
<a class='timestamp' href='#538048'><time timestamp='2017-03-30T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: right. I&#x27;d be very wary of adding a second thread. I&#x27;d expect to uncover a bug or two for sure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904480' id='538049'>
<a class='timestamp' href='#538049'><time timestamp='2017-03-30T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, the idea is reasonable
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904480' id='538050'>
<a class='timestamp' href='#538050'><time timestamp='2017-03-30T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh we were thinking about adding another thread to service the schedueler?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904480' id='538051'>
<a class='timestamp' href='#538051'><time timestamp='2017-03-30T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: that&#x27;s how it&#x27;s designed, anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904480' id='538052'>
<a class='timestamp' href='#538052'><time timestamp='2017-03-30T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: nonono, please not, it&#x27;s just that it was designed to be able to work with multiple threads, but that functionality has never been properly verified
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904540' id='538053'>
<a class='timestamp' href='#538053'><time timestamp='2017-03-30T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea, well I think thats a bad idea.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904540' id='538054'>
<a class='timestamp' href='#538054'><time timestamp='2017-03-30T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there used to be a test that tested it with multiple threads, but that failed randomly and we never found out why
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904540' id='538055'>
<a class='timestamp' href='#538055'><time timestamp='2017-03-30T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
At least it always seemed to be that the whole utility for such a thing is periodic things that don&#x27;t have strong realtime requirements.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904540' id='538056'>
<a class='timestamp' href='#538056'><time timestamp='2017-03-30T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: sounds like its time to just rewrite the thing from scratch just because....
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904600' id='538057'>
<a class='timestamp' href='#538057'><time timestamp='2017-03-30T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: or just drop the mult-thread functionality
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904600' id='538058'>
<a class='timestamp' href='#538058'><time timestamp='2017-03-30T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
well, ok, that too
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904600' id='538059'>
<a class='timestamp' href='#538059'><time timestamp='2017-03-30T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I think it could be shortened a lot with c++11 functionality like lambdas and tasks etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904600' id='538060'>
<a class='timestamp' href='#538060'><time timestamp='2017-03-30T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i mean whatever, leave it there, I plan on moving lots of things to cscheduler, just will have to make it sane before turning it on
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904600' id='538061'>
<a class='timestamp' href='#538061'><time timestamp='2017-03-30T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ie c++11 stuff, probably
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904660' id='538062'>
<a class='timestamp' href='#538062'><time timestamp='2017-03-30T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the periodic wallet flush is seperate from the realtime wallet flush that happens after issuing a key or whatever, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904660' id='538063'>
<a class='timestamp' href='#538063'><time timestamp='2017-03-30T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
std::map&lt;std::chrono::time_point, std::packaged_task&gt; done :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904720' id='538064'>
<a class='timestamp' href='#538064'><time timestamp='2017-03-30T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
same for the closure stuff and worker queue in http_server
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904720' id='538065'>
<a class='timestamp' href='#538065'><time timestamp='2017-03-30T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well it should be a min-heap, :P I&#x27;m sure there is one of those in stl no? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904780' id='538066'>
<a class='timestamp' href='#538066'><time timestamp='2017-03-30T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: by &quot;wallet flush&quot;, I mean &quot;wallet compaction&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904780' id='538067'>
<a class='timestamp' href='#538067'><time timestamp='2017-03-30T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no, stl does not have heap types afaik
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904780' id='538068'>
<a class='timestamp' href='#538068'><time timestamp='2017-03-30T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wallet flush, indeed, is the thing that happens when you write something directly
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904780' id='538069'>
<a class='timestamp' href='#538069'><time timestamp='2017-03-30T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
boost does <b>*ducks*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904780' id='538070'>
<a class='timestamp' href='#538070'><time timestamp='2017-03-30T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes please call it compaction not flush
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904840' id='538071'>
<a class='timestamp' href='#538071'><time timestamp='2017-03-30T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: okay sounds fine then... not the stuff that we need a critical realtime response on.
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904840' id='538072'>
<a class='timestamp' href='#538072'><time timestamp='2017-03-30T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904900' id='538073'>
<a class='timestamp' href='#538073'><time timestamp='2017-03-30T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
indeed, the function name changed to compaction from flush when it moved into cscheduler
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904900' id='538074'>
<a class='timestamp' href='#538074'><time timestamp='2017-03-30T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
because thats a more accurate description
<br>
</div>

<div class='talk op-msg' data-timestamp='1490904900' id='538075'>
<a class='timestamp' href='#538075'><time timestamp='2017-03-30T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] gmaxwell reopened pull request #9424: Change LogAcceptCategory to use uint32_t rather than sets of strings. (master...log_category_simplify) <a href="https://github.com/bitcoin/bitcoin/pull/9424" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9424</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490905320' id='538076'>
<a class='timestamp' href='#538076'><time timestamp='2017-03-30T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I don&#x27;t think I remember ever seeing that pull before. Then again, so many pulls get openened, it&#x27;s easy to lose track :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1490905440' id='538077'>
<a class='timestamp' href='#538077'><time timestamp='2017-03-30T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh end of dec 2016, yea, wasn&#x27;t too active at that time
<br>
</div>

<div class='talk op-msg' data-timestamp='1490906520' id='538078'>
<a class='timestamp' href='#538078'><time timestamp='2017-03-30T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #10130: bitcoin-tx input verification (master...bitcoin_tx_input_sanitiser) <a href="https://github.com/bitcoin/bitcoin/pull/10130" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10130</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1490906880' id='538079'>
<a class='timestamp' href='#538079'><time timestamp='2017-03-30T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
wait there&#x27;s an issue with flush in csceduler?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490906940' id='538080'>
<a class='timestamp' href='#538080'><time timestamp='2017-03-30T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
phantomcircuit: only with old boost
<br>
</div>

<div class='talk op-msg' data-timestamp='1490907060' id='538081'>
<a class='timestamp' href='#538081'><time timestamp='2017-03-30T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
oh     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490909460' id='538082'>
<a class='timestamp' href='#538082'><time timestamp='2017-03-30T21:31:00Z'>21:31</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
if a ping message is sent, but a pong is not received, will other messages still be sent to the pinged node until the ping timeout?
<br>
</div>

<div class='talk op-msg' data-timestamp='1490909880' id='538083'>
<a class='timestamp' href='#538083'><time timestamp='2017-03-30T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1490909880' id='538084'>
<a class='timestamp' href='#538084'><time timestamp='2017-03-30T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
interesting, I&#x27;m not seeing that on wireshark..
<br>
</div>

<div class='talk op-msg' data-timestamp='1490909940' id='538085'>
<a class='timestamp' href='#538085'><time timestamp='2017-03-30T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
for that matter, I don&#x27;t see the ping in question being sent, I just see it in the debug.log
<br>
</div>

<div class='talk op-msg' data-timestamp='1490915340' id='538086'>
<a class='timestamp' href='#538086'><time timestamp='2017-03-30T23:09:00Z'>23:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake closed pull request #10106: bitcoin-tx: Fix missing range check (master...bitcointx-addoutaddr) <a href="https://github.com/bitcoin/bitcoin/pull/10106" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10106</a>
<br>
</div>

</div>
</section>

</body>
</html>
