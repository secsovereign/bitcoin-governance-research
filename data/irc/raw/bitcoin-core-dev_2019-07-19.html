<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2019-07-19
 ‚Äî 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2019-07-19' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:19 UTC</pre>
<pre><a href="/bitcoin-core-dev/2019-06-19">&lt;</a><span class='header'>    July 2019     </span><a href="/bitcoin-core-dev/2019-08-19">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;    <a class="" href="/bitcoin-core-dev/2019-07-01">1</a>  <a class="" href="/bitcoin-core-dev/2019-07-02">2</a>  <a class="" href="/bitcoin-core-dev/2019-07-03">3</a>  <a class="" href="/bitcoin-core-dev/2019-07-04">4</a>  <a class="" href="/bitcoin-core-dev/2019-07-05">5</a>  <a class="" href="/bitcoin-core-dev/2019-07-06">6</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2019-07-07">7</a>  <a class="" href="/bitcoin-core-dev/2019-07-08">8</a>  <a class="" href="/bitcoin-core-dev/2019-07-09">9</a> <a class="" href="/bitcoin-core-dev/2019-07-10">10</a> <a class="" href="/bitcoin-core-dev/2019-07-11">11</a> <a class="" href="/bitcoin-core-dev/2019-07-12">12</a> <a class="" href="/bitcoin-core-dev/2019-07-13">13</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-07-14">14</a> <a class="" href="/bitcoin-core-dev/2019-07-15">15</a> <a class="" href="/bitcoin-core-dev/2019-07-16">16</a> <a class="" href="/bitcoin-core-dev/2019-07-17">17</a> <a class="" href="/bitcoin-core-dev/2019-07-18">18</a> <a class="current" href="/bitcoin-core-dev/2019-07-19">19</a> <a class="" href="/bitcoin-core-dev/2019-07-20">20</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-07-21">21</a> <a class="" href="/bitcoin-core-dev/2019-07-22">22</a> <a class="" href="/bitcoin-core-dev/2019-07-23">23</a> <a class="" href="/bitcoin-core-dev/2019-07-24">24</a> <a class="" href="/bitcoin-core-dev/2019-07-25">25</a> <a class="" href="/bitcoin-core-dev/2019-07-26">26</a> <a class="" href="/bitcoin-core-dev/2019-07-27">27</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-07-28">28</a> <a class="" href="/bitcoin-core-dev/2019-07-29">29</a> <a class="" href="/bitcoin-core-dev/2019-07-30">30</a> <a class="" href="/bitcoin-core-dev/2019-07-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1563497040' id='672678'>
<a class='timestamp' href='#672678'><time timestamp='2019-07-19T00:44:00Z'>00:44</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] zenosage opened pull request #16422: test: remove redundant setup in addrman_tests (master...addrman_tests) <a href="https://github.com/bitcoin/bitcoin/pull/16422" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16422</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563498420' id='672679'>
<a class='timestamp' href='#672679'><time timestamp='2019-07-19T01:07:00Z'>01:07</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/e5abb59a9a66...89d7229c9c18" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/e5abb59a9a66...89d7229c9c18</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563498420' id='672680'>
<a class='timestamp' href='#672680'><time timestamp='2019-07-19T01:07:00Z'>01:07</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 024ecd7 Jonas Schnelli: QA: Fix race condition in wallet_encryption test
<br>
</div>

<div class='talk op-msg' data-timestamp='1563498420' id='672681'>
<a class='timestamp' href='#672681'><time timestamp='2019-07-19T01:07:00Z'>01:07</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 89d7229 fanquake: Merge #16420: QA: Fix race condition in wallet_encryption test
<br>
</div>

<div class='talk op-msg' data-timestamp='1563498480' id='672682'>
<a class='timestamp' href='#672682'><time timestamp='2019-07-19T01:08:00Z'>01:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake merged pull request #16420: QA: Fix race condition in wallet_encryption test (master...2019/07/wallet_enc_test_fix) <a href="https://github.com/bitcoin/bitcoin/pull/16420" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16420</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563498780' id='672683'>
<a class='timestamp' href='#672683'><time timestamp='2019-07-19T01:13:00Z'>01:13</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
yay!
<br>
</div>

<div class='talk op-msg' data-timestamp='1563514260' id='672684'>
<a class='timestamp' href='#672684'><time timestamp='2019-07-19T05:31:00Z'>05:31</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
achow101: There is a wallet meeting scheduled tomorrow 
<br>
</div>

<div class='talk op-msg' data-timestamp='1563514320' id='672685'>
<a class='timestamp' href='#672685'><time timestamp='2019-07-19T05:32:00Z'>05:32</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
But i will be on a bus so I won&#x27;t be able to host it
<br>
</div>

<div class='talk op-msg' data-timestamp='1563514320' id='672686'>
<a class='timestamp' href='#672686'><time timestamp='2019-07-19T05:32:00Z'>05:32</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Someone else want to volunteer?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563515820' id='672687'>
<a class='timestamp' href='#672687'><time timestamp='2019-07-19T05:57:00Z'>05:57</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Would it be horrible to remove the assume valid stuff from bitcoin core? It feels like signature validation is pretty fast these days.
<br>
</div>

<div class='talk op-msg' data-timestamp='1563517440' id='672688'>
<a class='timestamp' href='#672688'><time timestamp='2019-07-19T06:24:00Z'>06:24</time></a>
&lt;<span class='nick nick-3'> mryandao</span>&gt;
why not set the default to off instead?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563517500' id='672689'>
<a class='timestamp' href='#672689'><time timestamp='2019-07-19T06:25:00Z'>06:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
kallewoof: really?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563517560' id='672690'>
<a class='timestamp' href='#672690'><time timestamp='2019-07-19T06:26:00Z'>06:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think it&#x27;s around a week of CPU time to verify all historical signatures
<br>
</div>

<div class='talk op-msg' data-timestamp='1563517560' id='672691'>
<a class='timestamp' href='#672691'><time timestamp='2019-07-19T06:26:00Z'>06:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
on a modern x86 cpu
<br>
</div>

<div class='talk op-msg' data-timestamp='1563517620' id='672692'>
<a class='timestamp' href='#672692'><time timestamp='2019-07-19T06:27:00Z'>06:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you have 32 cores that&#x27;s perhaps acceptable
<br>
</div>

<div class='talk op-msg' data-timestamp='1563518340' id='672693'>
<a class='timestamp' href='#672693'><time timestamp='2019-07-19T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
It&#x27;s that big of a difference? I must have misheard numbers then.
<br>
</div>

<div class='talk op-msg' data-timestamp='1563519300' id='672694'>
<a class='timestamp' href='#672694'><time timestamp='2019-07-19T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s 50 microseconds or so per signature check
<br>
</div>

<div class='talk op-msg' data-timestamp='1563519360' id='672695'>
<a class='timestamp' href='#672695'><time timestamp='2019-07-19T06:56:00Z'>06:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
assuming a billion sigcheck (rough guess) in the chain, that&#x27;s 5 days of CPU time (divided by the number of threads to get real time)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563519420' id='672696'>
<a class='timestamp' href='#672696'><time timestamp='2019-07-19T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-3'> mryandao</span>&gt;
is there a plot that tracks number of sigcheck ops to date?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563519420' id='672697'>
<a class='timestamp' href='#672697'><time timestamp='2019-07-19T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
MarcoFalke: are you sure CCACHE_SIZE is the right directive: <a href="https://github.com/bitcoin/bitcoin/blob/master/.travis.yml#L49" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/.travis.yml#L49</a>?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563519480' id='672698'>
<a class='timestamp' href='#672698'><time timestamp='2019-07-19T06:58:00Z'>06:58</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
maybe it&#x27;s travis special 
<br>
</div>

<div class='talk op-msg' data-timestamp='1563519480' id='672699'>
<a class='timestamp' href='#672699'><time timestamp='2019-07-19T06:58:00Z'>06:58</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But it looks like that the ccache env var would be CCACHE_MAXSIZE (instead of CCACHE_SIZE) <a href="https://ccache.dev/manual/3.4.html#_cache_size_management" class="link" target="_blank">https://ccache.dev/manual/3.4.html#_cache_size_management</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563519720' id='672700'>
<a class='timestamp' href='#672700'><time timestamp='2019-07-19T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
jonasschnelli: hard to tell. Looks like there are usages of either VAR in .travis.yml files on github. i.e <a href="https://github.com/search?l=yaml&amp;q=CCACHE_MAXSIZE&amp;type=Code" class="link" target="_blank">https://github.com/search?l=yaml&amp;q=CCACHE_MAXSIZE&amp;type=Code</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563519780' id='672701'>
<a class='timestamp' href='#672701'><time timestamp='2019-07-19T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
maybe set both <b>*duck*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563519840' id='672702'>
<a class='timestamp' href='#672702'><time timestamp='2019-07-19T07:04:00Z'>07:04</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
CCACHE_MAXSIZE is correct according to man ccache
<br>
</div>

<div class='talk op-msg' data-timestamp='1563520200' id='672703'>
<a class='timestamp' href='#672703'><time timestamp='2019-07-19T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Just me or is travis not creating new jobs when pushing to a PR branch..? (it creates local instances for my own repo but not for bitcoin).
<br>
</div>

<div class='talk op-msg' data-timestamp='1563528840' id='672704'>
<a class='timestamp' href='#672704'><time timestamp='2019-07-19T09:34:00Z'>09:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake pushed 4 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/89d7229c9c18...59ce537a4994" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/89d7229c9c18...59ce537a4994</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563528840' id='672705'>
<a class='timestamp' href='#672705'><time timestamp='2019-07-19T09:34:00Z'>09:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 5efcb77 Matt Corallo: Disable bloom filtering by default.
<br>
</div>

<div class='talk op-msg' data-timestamp='1563528840' id='672706'>
<a class='timestamp' href='#672706'><time timestamp='2019-07-19T09:34:00Z'>09:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master f27309f Matt Corallo: Move DEFAULT_PEERBLOOMFILTERS from validation.h to net_processing.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1563528840' id='672707'>
<a class='timestamp' href='#672707'><time timestamp='2019-07-19T09:34:00Z'>09:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master bead32e Matt Corallo: Add release notes for DEFAULT_BLOOM change
<br>
</div>

<div class='talk op-msg' data-timestamp='1563528900' id='672708'>
<a class='timestamp' href='#672708'><time timestamp='2019-07-19T09:35:00Z'>09:35</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake merged pull request #16152: Disable bloom filtering by default. (master...2019-06-fix-dos) <a href="https://github.com/bitcoin/bitcoin/pull/16152" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16152</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563534900' id='672709'>
<a class='timestamp' href='#672709'><time timestamp='2019-07-19T11:15:00Z'>11:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Would someone mind if I add a webhook to bitcoin/bitcoin (a &quot;readonly&quot; webhook) to drive the CI i have built in the last weeks?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563534900' id='672710'>
<a class='timestamp' href='#672710'><time timestamp='2019-07-19T11:15:00Z'>11:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
It&#x27;s non-invasive (as said, readonly)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563534900' id='672711'>
<a class='timestamp' href='#672711'><time timestamp='2019-07-19T11:15:00Z'>11:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
^ wumpus, MarcoFalke, fanquake
<br>
</div>

<div class='talk op-msg' data-timestamp='1563534960' id='672712'>
<a class='timestamp' href='#672712'><time timestamp='2019-07-19T11:16:00Z'>11:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
the CI is currently under heave development: <a href="https://bitcoinbuilds.org/" class="link" target="_blank">https://bitcoinbuilds.org/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563534960' id='672713'>
<a class='timestamp' href='#672713'><time timestamp='2019-07-19T11:16:00Z'>11:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But I want to test it with some load and integrate building all PR pushes
<br>
</div>

<div class='talk op-msg' data-timestamp='1563535560' id='672714'>
<a class='timestamp' href='#672714'><time timestamp='2019-07-19T11:26:00Z'>11:26</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
jonasschnelli: Interesting. Is the source for the site going to live here: <a href="https://github.com/jonasschnelli/bitcoin-core-ci" class="link" target="_blank">https://github.com/jonasschnelli/bitcoin-core-ci</a>?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563535560' id='672715'>
<a class='timestamp' href='#672715'><time timestamp='2019-07-19T11:26:00Z'>11:26</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
What hardware are you running the builds on atm?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563535560' id='672716'>
<a class='timestamp' href='#672716'><time timestamp='2019-07-19T11:26:00Z'>11:26</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. The source code will end up at that repo (as soon as its ready)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563535620' id='672717'>
<a class='timestamp' href='#672717'><time timestamp='2019-07-19T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Its running on a relatively powerful physical host
<br>
</div>

<div class='talk op-msg' data-timestamp='1563535620' id='672718'>
<a class='timestamp' href='#672718'><time timestamp='2019-07-19T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
It&#x27;s based on KVM
<br>
</div>

<div class='talk op-msg' data-timestamp='1563535620' id='672719'>
<a class='timestamp' href='#672719'><time timestamp='2019-07-19T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Full custom software though
<br>
</div>

<div class='talk op-msg' data-timestamp='1563535620' id='672720'>
<a class='timestamp' href='#672720'><time timestamp='2019-07-19T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
The site looks pretty nice. At least looking at large logs is more responsive than Travis üëç
<br>
</div>

<div class='talk op-msg' data-timestamp='1563535620' id='672721'>
<a class='timestamp' href='#672721'><time timestamp='2019-07-19T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
I assume you&#x27;ll be adding macOS and other builds later on?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563535620' id='672722'>
<a class='timestamp' href='#672722'><time timestamp='2019-07-19T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yeah... travis logs are a nightmare.
<br>
</div>

<div class='talk op-msg' data-timestamp='1563535680' id='672723'>
<a class='timestamp' href='#672723'><time timestamp='2019-07-19T11:28:00Z'>11:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
fanquake: Yes. All possible. Just caping to three platforms right now then later expand
<br>
</div>

<div class='talk op-msg' data-timestamp='1563535680' id='672724'>
<a class='timestamp' href='#672724'><time timestamp='2019-07-19T11:28:00Z'>11:28</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Cool. I&#x27;m not opposed to a read-only hook if you want to stress / load test for a week or two. Probably worth bring up at a meeting after that. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1563535740' id='672725'>
<a class='timestamp' href='#672725'><time timestamp='2019-07-19T11:29:00Z'>11:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. We can discuss that next thursday
<br>
</div>

<div class='talk op-msg' data-timestamp='1563539640' id='672726'>
<a class='timestamp' href='#672726'><time timestamp='2019-07-19T12:34:00Z'>12:34</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Weird. Github claims &quot;all checks passed&quot; for #16411 but in reality, the travis check never actually executed, only the appveyor one. :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1563539640' id='672727'>
<a class='timestamp' href='#672727'><time timestamp='2019-07-19T12:34:00Z'>12:34</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/16411" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/16411</a> | Signet support by kallewoof ¬∑ Pull Request #16411 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1563540000' id='672728'>
<a class='timestamp' href='#672728'><time timestamp='2019-07-19T12:40:00Z'>12:40</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Travis has a habit of doing weird things like that. Sometimes it&#x27;ll show Travis failing when in fact all tests have passed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1563546000' id='672729'>
<a class='timestamp' href='#672729'><time timestamp='2019-07-19T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/59ce537a4994...c7b7cf299a9e" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/59ce537a4994...c7b7cf299a9e</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563546000' id='672730'>
<a class='timestamp' href='#672730'><time timestamp='2019-07-19T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 5c3c24c zenosage: test: remove redundant setup in addrman_tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1563546000' id='672731'>
<a class='timestamp' href='#672731'><time timestamp='2019-07-19T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master c7b7cf2 MarcoFalke: Merge #16422: test: remove redundant setup in addrman_tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1563546120' id='672732'>
<a class='timestamp' href='#672732'><time timestamp='2019-07-19T14:22:00Z'>14:22</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #16422: test: remove redundant setup in addrman_tests (master...addrman_tests) <a href="https://github.com/bitcoin/bitcoin/pull/16422" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16422</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563549600' id='672733'>
<a class='timestamp' href='#672733'><time timestamp='2019-07-19T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/c7b7cf299a9e...f4b1fe7165c8" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/c7b7cf299a9e...f4b1fe7165c8</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563549600' id='672734'>
<a class='timestamp' href='#672734'><time timestamp='2019-07-19T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master a52818c tecnovert: net: Make poll in InterruptibleRecv only filter for POLLIN events.
<br>
</div>

<div class='talk op-msg' data-timestamp='1563549600' id='672735'>
<a class='timestamp' href='#672735'><time timestamp='2019-07-19T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master f4b1fe7 Wladimir J. van der Laan: Merge #16412: net: Make poll in InterruptibleRecv only filter for POLLIN e...
<br>
</div>

<div class='talk op-msg' data-timestamp='1563549660' id='672736'>
<a class='timestamp' href='#672736'><time timestamp='2019-07-19T15:21:00Z'>15:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj merged pull request #16412: net: Make poll in InterruptibleRecv only filter for POLLIN events. (master...bitcoin-poll) <a href="https://github.com/bitcoin/bitcoin/pull/16412" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16412</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563552000' id='672737'>
<a class='timestamp' href='#672737'><time timestamp='2019-07-19T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 1 commit to 0.18: <a href="https://github.com/bitcoin/bitcoin/compare/3f76160087c0...063c8ce7a054" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/3f76160087c0...063c8ce7a054</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563552000' id='672738'>
<a class='timestamp' href='#672738'><time timestamp='2019-07-19T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/0.18 063c8ce tecnovert: net: Make poll in InterruptibleRecv only filter for POLLIN events.
<br>
</div>

<div class='talk op-msg' data-timestamp='1563552120' id='672739'>
<a class='timestamp' href='#672739'><time timestamp='2019-07-19T16:02:00Z'>16:02</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
0.18.1 can go
<br>
</div>

<div class='talk op-msg' data-timestamp='1563552840' id='672740'>
<a class='timestamp' href='#672740'><time timestamp='2019-07-19T16:14:00Z'>16:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
MarcoFalke: what about #16414?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563552840' id='672741'>
<a class='timestamp' href='#672741'><time timestamp='2019-07-19T16:14:00Z'>16:14</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/16414" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/16414</a> | 0.18: wallet: Fix -maxtxfee check by moving it to CWallet::CreateTransaction by promag ¬∑ Pull Request #16414 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1563552900' id='672742'>
<a class='timestamp' href='#672742'><time timestamp='2019-07-19T16:15:00Z'>16:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(I think that is the last one)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563552960' id='672743'>
<a class='timestamp' href='#672743'><time timestamp='2019-07-19T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
going to do pre-rc1 translations update
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558660' id='672744'>
<a class='timestamp' href='#672744'><time timestamp='2019-07-19T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 3 commits to 0.18: <a href="https://github.com/bitcoin/bitcoin/compare/063c8ce7a054...a6cba19831da" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/063c8ce7a054...a6cba19831da</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558660' id='672745'>
<a class='timestamp' href='#672745'><time timestamp='2019-07-19T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/0.18 641b2ff Wladimir J. van der Laan: qt: pre-rc1 translations update
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558660' id='672746'>
<a class='timestamp' href='#672746'><time timestamp='2019-07-19T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/0.18 aa2d12a Wladimir J. van der Laan: build: Bump version to 0.18.1rc1
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558660' id='672747'>
<a class='timestamp' href='#672747'><time timestamp='2019-07-19T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/0.18 a6cba19 Wladimir J. van der Laan: doc: Update manpages for rc1
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558780' id='672748'>
<a class='timestamp' href='#672748'><time timestamp='2019-07-19T17:53:00Z'>17:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: plz2merge #15681
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558780' id='672749'>
<a class='timestamp' href='#672749'><time timestamp='2019-07-19T17:53:00Z'>17:53</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/15681" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/15681</a> | [mempool] Allow one extra single-ancestor transaction per package by TheBlueMatt ¬∑ Pull Request #15681 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558780' id='672750'>
<a class='timestamp' href='#672750'><time timestamp='2019-07-19T17:53:00Z'>17:53</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
sipa: kallewoof that&#x27;s not right
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558780' id='672751'>
<a class='timestamp' href='#672751'><time timestamp='2019-07-19T17:53:00Z'>17:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
looks like recent changes in master broke compatibility with c-lightning 
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558780' id='672752'>
<a class='timestamp' href='#672752'><time timestamp='2019-07-19T17:53:00Z'>17:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: looking
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558840' id='672753'>
<a class='timestamp' href='#672753'><time timestamp='2019-07-19T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
I did it yesterday. did a full IBD with assumbalid=0 from scratch in ~6 hours
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558840' id='672754'>
<a class='timestamp' href='#672754'><time timestamp='2019-07-19T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
*assumevalid
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558840' id='672755'>
<a class='timestamp' href='#672755'><time timestamp='2019-07-19T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
user@medea:~ % ./launch-lightning.sh
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558840' id='672756'>
<a class='timestamp' href='#672756'><time timestamp='2019-07-19T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
bitcoin-cli getblockchaininfo: invalid response
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558840' id='672757'>
<a class='timestamp' href='#672757'><time timestamp='2019-07-19T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
not sure why yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1563558960' id='672758'>
<a class='timestamp' href='#672758'><time timestamp='2019-07-19T17:56:00Z'>17:56</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
(fair point that I do have 8 cores and 16 threads, NVMe and a ~600MiB internet connection and I set dbcache=4096)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559080' id='672759'>
<a class='timestamp' href='#672759'><time timestamp='2019-07-19T17:58:00Z'>17:58</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
Could someone help me figure out where the memory leak being reported here is: <a href="https://travis-ci.org/bitcoin/bitcoin/jobs/560780816" class="link" target="_blank">https://travis-ci.org/bitcoin/bitcoin/jobs/560780816</a> ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559140' id='672760'>
<a class='timestamp' href='#672760'><time timestamp='2019-07-19T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
It seems like it&#x27;s something happening in std::map but I don&#x27;t know why it happens here
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559200' id='672761'>
<a class='timestamp' href='#672761'><time timestamp='2019-07-19T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/f4b1fe7165c8...51a6e2c41929" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/f4b1fe7165c8...51a6e2c41929</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559200' id='672762'>
<a class='timestamp' href='#672762'><time timestamp='2019-07-19T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 50cede3 Matt Corallo: [mempool] Allow one extra single-ancestor transaction per package
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559200' id='672763'>
<a class='timestamp' href='#672763'><time timestamp='2019-07-19T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 51a6e2c Wladimir J. van der Laan: Merge #15681: [mempool] Allow one extra single-ancestor transaction per pa...
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559200' id='672764'>
<a class='timestamp' href='#672764'><time timestamp='2019-07-19T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
woooo
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559260' id='672765'>
<a class='timestamp' href='#672765'><time timestamp='2019-07-19T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj merged pull request #15681: [mempool] Allow one extra single-ancestor transaction per package (master...2019-03-lightning-policy) <a href="https://github.com/bitcoin/bitcoin/pull/15681" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15681</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559320' id='672766'>
<a class='timestamp' href='#672766'><time timestamp='2019-07-19T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
elichai2: what kind of hardware?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559320' id='672767'>
<a class='timestamp' href='#672767'><time timestamp='2019-07-19T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, just saw the later message
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559320' id='672768'>
<a class='timestamp' href='#672768'><time timestamp='2019-07-19T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
elichai2: 16 * 6 hours = 4 days
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559380' id='672769'>
<a class='timestamp' href='#672769'><time timestamp='2019-07-19T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t think i&#x27;m far off
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559380' id='672770'>
<a class='timestamp' href='#672770'><time timestamp='2019-07-19T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
Most laptops these days have at least 4 threads. And I&#x27;m not even entirely sure what was the bottleneck because nothing maxed out
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559440' id='672771'>
<a class='timestamp' href='#672771'><time timestamp='2019-07-19T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
Probably the peers internet connection
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559440' id='672772'>
<a class='timestamp' href='#672772'><time timestamp='2019-07-19T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
with 4 threads it would be a day...
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559440' id='672773'>
<a class='timestamp' href='#672773'><time timestamp='2019-07-19T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
6 hours is already pretty terrible on itself
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559500' id='672774'>
<a class='timestamp' href='#672774'><time timestamp='2019-07-19T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
though admittedly there is little we can do about the time to download the chain (except assumeutxo like security model changes)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563559560' id='672775'>
<a class='timestamp' href='#672775'><time timestamp='2019-07-19T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
most laptop cpus will also downclock when many cores are used at once, so it may not be fair to assume more threads linearly oncreases speed
<br>
</div>

<div class='talk op-msg' data-timestamp='1563560220' id='672776'>
<a class='timestamp' href='#672776'><time timestamp='2019-07-19T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
one thing I saw is that there&#x27;s no logic that chooses prefers peers by their bandwidth
<br>
</div>

<div class='talk op-msg' data-timestamp='1563560280' id='672777'>
<a class='timestamp' href='#672777'><time timestamp='2019-07-19T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
so when I manually when to <a href="https://bitnodes.earn.com" class="link" target="_blank">https://bitnodes.earn.com</a> and looked for closer peers that share the same ISP and added then via `addnode` I got faster download
<br>
</div>

<div class='talk op-msg' data-timestamp='1563560340' id='672778'>
<a class='timestamp' href='#672778'><time timestamp='2019-07-19T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
and if everyone had good cpus we could try and use compression algorithms before sending the blocks around to move some of the weight from the internet to the cpu
<br>
</div>

<div class='talk op-msg' data-timestamp='1563560460' id='672779'>
<a class='timestamp' href='#672779'><time timestamp='2019-07-19T18:21:00Z'>18:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
elichai2: not explicitly, though there is the &quot;stall detection&quot; logic which tends to kick out the slowest peers from time to time in many cases
<br>
</div>

<div class='talk op-msg' data-timestamp='1563560580' id='672780'>
<a class='timestamp' href='#672780'><time timestamp='2019-07-19T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
elichai2: yeah, we have someone working on transaction compression (though primarily aimed at satellite links, where a large amount of CPU to gain some bandwidth is much more acceptable than on the general P2P network), still some of the results are likely useful for a P2P compression mechanism too
<br>
</div>

<div class='talk op-msg' data-timestamp='1563560640' id='672781'>
<a class='timestamp' href='#672781'><time timestamp='2019-07-19T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
cool. I was actually impressed by the 6 hours. really thought it will take me at least a day with the `assumevalid=0`
<br>
</div>

<div class='talk op-msg' data-timestamp='1563561360' id='672782'>
<a class='timestamp' href='#672782'><time timestamp='2019-07-19T18:36:00Z'>18:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so no-one else has had issues with c-lightning and recent bitcoind yet?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563561360' id='672783'>
<a class='timestamp' href='#672783'><time timestamp='2019-07-19T18:36:00Z'>18:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
trying to bisect it
<br>
</div>

<div class='talk op-msg' data-timestamp='1563565380' id='672784'>
<a class='timestamp' href='#672784'><time timestamp='2019-07-19T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
wumpus: Thinking about implementation of addrv2... I&#x27;m thinking: rework CAddress to be more enum-y and less weird-IPv6-y, and do the weird-IPV6-y tricks in the serialization code only if `s.GetVersion() &lt; GOSSIP_ADDRV2_VERSION`
<br>
</div>

<div class='talk op-msg' data-timestamp='1563565380' id='672785'>
<a class='timestamp' href='#672785'><time timestamp='2019-07-19T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
lmk if that makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1563565380' id='672786'>
<a class='timestamp' href='#672786'><time timestamp='2019-07-19T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #16424: build: Treat -Wswitch as error when --enable-werror (master...1907-buildSwitchError) <a href="https://github.com/bitcoin/bitcoin/pull/16424" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16424</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563566580' id='672787'>
<a class='timestamp' href='#672787'><time timestamp='2019-07-19T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #16425: addrman: Add sleep to while(1) loops (master...1907-addrmanNomNomCpu) <a href="https://github.com/bitcoin/bitcoin/pull/16425" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16425</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567180' id='672788'>
<a class='timestamp' href='#672788'><time timestamp='2019-07-19T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
dongcarl: rust enums would be really nice here
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567180' id='672789'>
<a class='timestamp' href='#672789'><time timestamp='2019-07-19T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
wumpus: Haha yeah... But, alas...
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567180' id='672790'>
<a class='timestamp' href='#672790'><time timestamp='2019-07-19T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
dongcarl: but I don&#x27;t think you need to change the internal representation for this
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567240' id='672791'>
<a class='timestamp' href='#672791'><time timestamp='2019-07-19T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh wait, you do, ofc
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567240' id='672792'>
<a class='timestamp' href='#672792'><time timestamp='2019-07-19T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-7'> * dongcarl</span>&gt;
almost got gaslighted
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567240' id='672793'>
<a class='timestamp' href='#672793'><time timestamp='2019-07-19T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567240' id='672794'>
<a class='timestamp' href='#672794'><time timestamp='2019-07-19T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
boost::variant?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567240' id='672795'>
<a class='timestamp' href='#672795'><time timestamp='2019-07-19T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-4'> * sipa</span>&gt;
ducks
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567240' id='672796'>
<a class='timestamp' href='#672796'><time timestamp='2019-07-19T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lets just use rust?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567300' id='672797'>
<a class='timestamp' href='#672797'><time timestamp='2019-07-19T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
tfw no std::variant
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567300' id='672798'>
<a class='timestamp' href='#672798'><time timestamp='2019-07-19T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
dont we already have rust build support? time to start using it :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567360' id='672799'>
<a class='timestamp' href='#672799'><time timestamp='2019-07-19T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(only like 90% joke, fwiw)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567420' id='672800'>
<a class='timestamp' href='#672800'><time timestamp='2019-07-19T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-7'> * dongcarl</span>&gt;
is going to do it the stupid way first
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567480' id='672801'>
<a class='timestamp' href='#672801'><time timestamp='2019-07-19T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just a uint256 and an enum?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567540' id='672802'>
<a class='timestamp' href='#672802'><time timestamp='2019-07-19T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how will you deal with serialization in addrman.dat?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567540' id='672803'>
<a class='timestamp' href='#672803'><time timestamp='2019-07-19T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
peers.dat, i guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567660' id='672804'>
<a class='timestamp' href='#672804'><time timestamp='2019-07-19T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
yes just a uint256 and an enum (do we have uint256&#x27;s?)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567660' id='672805'>
<a class='timestamp' href='#672805'><time timestamp='2019-07-19T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-4'> * sipa</span>&gt;
points to uint256.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567660' id='672806'>
<a class='timestamp' href='#672806'><time timestamp='2019-07-19T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
oh cool!
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567720' id='672807'>
<a class='timestamp' href='#672807'><time timestamp='2019-07-19T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we use 256-bit values here and there in bitcoin :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567720' id='672808'>
<a class='timestamp' href='#672808'><time timestamp='2019-07-19T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567720' id='672809'>
<a class='timestamp' href='#672809'><time timestamp='2019-07-19T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
I haven&#x27;t looked at peers.dat serialization...
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567780' id='672810'>
<a class='timestamp' href='#672810'><time timestamp='2019-07-19T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
What are potential problems?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567840' id='672811'>
<a class='timestamp' href='#672811'><time timestamp='2019-07-19T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
Oh... we need to maintain back-compat I guess?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567900' id='672812'>
<a class='timestamp' href='#672812'><time timestamp='2019-07-19T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567960' id='672813'>
<a class='timestamp' href='#672813'><time timestamp='2019-07-19T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, not backward compatibility
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567960' id='672814'>
<a class='timestamp' href='#672814'><time timestamp='2019-07-19T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;ll be impossible anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567960' id='672815'>
<a class='timestamp' href='#672815'><time timestamp='2019-07-19T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but you do need forward compatibility
<br>
</div>

<div class='talk op-msg' data-timestamp='1563567960' id='672816'>
<a class='timestamp' href='#672816'><time timestamp='2019-07-19T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(new code will need to be able to read an old peers.dat)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568020' id='672817'>
<a class='timestamp' href='#672817'><time timestamp='2019-07-19T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
Right, sorry that&#x27;s what I meant... What&#x27;s usually done in this case? One-off migration of peers.dat?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568020' id='672818'>
<a class='timestamp' href='#672818'><time timestamp='2019-07-19T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
up to you
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568080' id='672819'>
<a class='timestamp' href='#672819'><time timestamp='2019-07-19T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
Cool. Thanks for tips!
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568080' id='672820'>
<a class='timestamp' href='#672820'><time timestamp='2019-07-19T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if there is a way to serialize a CADdress (haven&#x27;t checked if there is) that would be compatible, that would be great
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568140' id='672821'>
<a class='timestamp' href='#672821'><time timestamp='2019-07-19T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
sipa: You mean serialize an addrv2 in a way that&#x27;s back-compatible with addv1?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568140' id='672822'>
<a class='timestamp' href='#672822'><time timestamp='2019-07-19T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568140' id='672823'>
<a class='timestamp' href='#672823'><time timestamp='2019-07-19T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, there is
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568140' id='672824'>
<a class='timestamp' href='#672824'><time timestamp='2019-07-19T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
SER_DISK mode for CAddress stores a version number
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568140' id='672825'>
<a class='timestamp' href='#672825'><time timestamp='2019-07-19T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #16425: addrman: Add sleep to while(1) loops (master...1907-addrmanNomNomCpu) <a href="https://github.com/bitcoin/bitcoin/pull/16425" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16425</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568200' id='672826'>
<a class='timestamp' href='#672826'><time timestamp='2019-07-19T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you can leverage that to just use old serializtion for things compatible with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568200' id='672827'>
<a class='timestamp' href='#672827'><time timestamp='2019-07-19T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and new serialization otherwise
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568200' id='672828'>
<a class='timestamp' href='#672828'><time timestamp='2019-07-19T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(which you can define i guess identical to how the addrv2 bip encodes addressrs)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568260' id='672829'>
<a class='timestamp' href='#672829'><time timestamp='2019-07-19T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that would be automatically forward compatible
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568260' id='672830'>
<a class='timestamp' href='#672830'><time timestamp='2019-07-19T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and backward compatible as long as no new style addresses are stored
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568440' id='672831'>
<a class='timestamp' href='#672831'><time timestamp='2019-07-19T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
sipa: Ah... So if I understand you correctly, this way disk serialization of ipv4, v6, and torv2 will be in the older format... Which means if I generate a peers.dat in a newer client and feed it to an older one, the older client will pick up everything except torv3, i2p, and CJDNS?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568500' id='672832'>
<a class='timestamp' href='#672832'><time timestamp='2019-07-19T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it will just fail to deserialize entirely if it contains torv3/i2p/cjdns
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568500' id='672833'>
<a class='timestamp' href='#672833'><time timestamp='2019-07-19T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as it has no idea about the length of the field it&#x27;s trying to read
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568500' id='672834'>
<a class='timestamp' href='#672834'><time timestamp='2019-07-19T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so i think there are two ways:
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568500' id='672835'>
<a class='timestamp' href='#672835'><time timestamp='2019-07-19T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-7'> * dongcarl</span>&gt;
listening
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568560' id='672836'>
<a class='timestamp' href='#672836'><time timestamp='2019-07-19T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
1) have a global peers.dat-wide field (it has an nVersion for this) that says &quot;this file uses new encoding&quot;, and then all addresses in it use new encoding; you&#x27;d have read support for the old format, but always write in the new format
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568680' id='672837'>
<a class='timestamp' href='#672837'><time timestamp='2019-07-19T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
2) you use the per-address nVersion field to distinguish between old and new (right now the nVersion field there is just the client version number which is a terrible practice anyway; define some cutoff equivalent to say 0.99.0 which means &quot;new format&quot; and stick to 0.18.x for old format), but use old encoding when writing tor/ipv4/ipv6
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568740' id='672838'>
<a class='timestamp' href='#672838'><time timestamp='2019-07-19T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the first idea is perhaps simpler and much more compact
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568740' id='672839'>
<a class='timestamp' href='#672839'><time timestamp='2019-07-19T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as ipv4 is hugely wasteful in the old serialization
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568740' id='672840'>
<a class='timestamp' href='#672840'><time timestamp='2019-07-19T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
Yeah that makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568740' id='672841'>
<a class='timestamp' href='#672841'><time timestamp='2019-07-19T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
I&#x27;m gunna aim for #1 first
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568740' id='672842'>
<a class='timestamp' href='#672842'><time timestamp='2019-07-19T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/1" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/1</a> | JSON-RPC support for mobile devices (&quot;ultra-lightweight&quot; clients) ¬∑ Issue #1 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568800' id='672843'>
<a class='timestamp' href='#672843'><time timestamp='2019-07-19T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
sipa: Thanks for helping think this thru!
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568920' id='672844'>
<a class='timestamp' href='#672844'><time timestamp='2019-07-19T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
to switch between old and new encoding, i suggest not actually using nVersion directly (it&#x27;s messy...), but instead ORing some field flag into like, like SERIALIZE_TRANSACTION_NO_WITNESS for transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1563568920' id='672845'>
<a class='timestamp' href='#672845'><time timestamp='2019-07-19T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
then you can also use OverrideStream in the P2P code to select between old and new encoding based on what the peer supports
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569100' id='672846'>
<a class='timestamp' href='#672846'><time timestamp='2019-07-19T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
sipa: Hmmm I think the spec wants me to use nVersion? <a href="https://github.com/bitcoin/bips/blob/f5174192e2d5fb3dfa7232be62d1b9d586a7f8d6/bip-0155.mediawiki#compatibility" class="link" target="_blank">https://github.com/bitcoin/bips/blob/f5174192e2d5fb3dfa7232be62d1b9d586a7f8d6/bip-0155.mediawiki#compatibility</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569160' id='672847'>
<a class='timestamp' href='#672847'><time timestamp='2019-07-19T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
dongcarl: i mean, don&#x27;t use the p2p protocol nVersion directly to select between features
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569160' id='672848'>
<a class='timestamp' href='#672848'><time timestamp='2019-07-19T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that feels like an enormous layer violation, and makes things messy in addrman (where nVersion is the <u>_client_</u> version, while on the wire it&#x27;s the protocol version...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569220' id='672849'>
<a class='timestamp' href='#672849'><time timestamp='2019-07-19T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
even if at connection time nVersion is used to signal readiness for the new protocol, set a flag in CNode or so to remember what addr protocol is used, and then explicitly choose a flag to set when serializing addr messages based on that
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569280' id='672850'>
<a class='timestamp' href='#672850'><time timestamp='2019-07-19T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-7'> * dongcarl</span>&gt;
reading and trying to understand
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569280' id='672851'>
<a class='timestamp' href='#672851'><time timestamp='2019-07-19T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
dongcarl: basically my opinion is that it&#x27;s a mistake that there is a single &quot;stream version&quot; number that influences serialization
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569340' id='672852'>
<a class='timestamp' href='#672852'><time timestamp='2019-07-19T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
sipa: You mean like our existing logic for CADDR_TIME_VERSION?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569340' id='672853'>
<a class='timestamp' href='#672853'><time timestamp='2019-07-19T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
That&#x27;s the mistake?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569340' id='672854'>
<a class='timestamp' href='#672854'><time timestamp='2019-07-19T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569340' id='672855'>
<a class='timestamp' href='#672855'><time timestamp='2019-07-19T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, that&#x27;s historical, and dates from a time when client versions and protocol versions were the same thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569340' id='672856'>
<a class='timestamp' href='#672856'><time timestamp='2019-07-19T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but right now those two are distinct things, and it&#x27;s not the CAddress that should know exactly which protocols require which serializations
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569400' id='672857'>
<a class='timestamp' href='#672857'><time timestamp='2019-07-19T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it should be the protocol implementations that decide that, and just tell CAddress whether to use v1 or v2 (which is something CAddress should know about)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569460' id='672858'>
<a class='timestamp' href='#672858'><time timestamp='2019-07-19T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
Okay, I think I understand that. What&#x27;s a good way of passing the v1 vs v2 info to CAddress so it knows how to serialize?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569520' id='672859'>
<a class='timestamp' href='#672859'><time timestamp='2019-07-19T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
by essentially using the high bits of nVersion as a bit field, and using one bit in it to indicate which encoding to use
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569520' id='672860'>
<a class='timestamp' href='#672860'><time timestamp='2019-07-19T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
like SERIALIZE_TRANSACTION_NO_WITNESS (which is equal to 0x40000000)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569580' id='672861'>
<a class='timestamp' href='#672861'><time timestamp='2019-07-19T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
Oh I see... Seems hacky but there&#x27;s no way we&#x27;re serializing a transaction while we&#x27;re also serializing an address so that&#x27;s okay, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569580' id='672862'>
<a class='timestamp' href='#672862'><time timestamp='2019-07-19T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right, they don&#x27;t need to live in the same namespace
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569580' id='672863'>
<a class='timestamp' href='#672863'><time timestamp='2019-07-19T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
for segwit, based on whether segwit support was negotiated with the peer (and/or whether the witness flag in a CInv request is set), a wrapper makes the stream temporarily report that flag in its nVersion
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569640' id='672864'>
<a class='timestamp' href='#672864'><time timestamp='2019-07-19T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
Okay that makes sense!
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569640' id='672865'>
<a class='timestamp' href='#672865'><time timestamp='2019-07-19T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
sipa: Glad you pointed this out because I was about to copy the CADDR_TIME_VERSION logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569700' id='672866'>
<a class='timestamp' href='#672866'><time timestamp='2019-07-19T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
for example, see the line in net_processing:
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569700' id='672867'>
<a class='timestamp' href='#672867'><time timestamp='2019-07-19T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
connman-&gt;PushMessage(pfrom, msgMaker.Make(SERIALIZE_TRANSACTION_NO_WITNESS, NetMsgType::BLOCK, *pblock));
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569700' id='672868'>
<a class='timestamp' href='#672868'><time timestamp='2019-07-19T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569700' id='672869'>
<a class='timestamp' href='#672869'><time timestamp='2019-07-19T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
int nSendFlags = (inv.type == MSG_TX ? SERIALIZE_TRANSACTION_NO_WITNESS : 0);
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569700' id='672870'>
<a class='timestamp' href='#672870'><time timestamp='2019-07-19T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
connman-&gt;PushMessage(pfrom, msgMaker.Make(nSendFlags, NetMsgType::TX, *mi-&gt;second));
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569820' id='672871'>
<a class='timestamp' href='#672871'><time timestamp='2019-07-19T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
Ah! Very good examples... I should probably define a SERIALIZE_ADDR_AS_V2 or something
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569820' id='672872'>
<a class='timestamp' href='#672872'><time timestamp='2019-07-19T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569880' id='672873'>
<a class='timestamp' href='#672873'><time timestamp='2019-07-19T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in the v2 stuff you can probably drop the nVersion/SER_DISK/... logic too
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569880' id='672874'>
<a class='timestamp' href='#672874'><time timestamp='2019-07-19T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no need to encode a per-addr version number if that version is being communicated externally
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569880' id='672875'>
<a class='timestamp' href='#672875'><time timestamp='2019-07-19T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
sipa: True!
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569880' id='672876'>
<a class='timestamp' href='#672876'><time timestamp='2019-07-19T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-7'> * dongcarl</span>&gt;
is glad he understood
<br>
</div>

<div class='talk op-msg' data-timestamp='1563569940' id='672877'>
<a class='timestamp' href='#672877'><time timestamp='2019-07-19T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
much of this is my personal opinion btw, i don&#x27;t want to give a false impression that this approach is some commonly agreed upon way of doing things
<br>
</div>

<div class='talk op-msg' data-timestamp='1563570000' id='672878'>
<a class='timestamp' href='#672878'><time timestamp='2019-07-19T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
sipa: It&#x27;s certainly given me a solid direction for implementation... Much better than me designing in the dark, and I&#x27;m happy to iterate once I have an MVP working. :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1563570300' id='672879'>
<a class='timestamp' href='#672879'><time timestamp='2019-07-19T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
great
<br>
</div>

<div class='talk op-msg' data-timestamp='1563577020' id='672880'>
<a class='timestamp' href='#672880'><time timestamp='2019-07-19T22:57:00Z'>22:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #16409: Remove mempool expiry, treat txs as replaceable instead (master...1907-noExpiryButReplace) <a href="https://github.com/bitcoin/bitcoin/pull/16409" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16409</a>
<br>
</div>

</div>
</section>

</body>
</html>
