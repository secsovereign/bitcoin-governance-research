<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2020-06-07
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2020-06-07' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:18 UTC</pre>
<pre><a href="/bitcoin-core-dev/2020-05-07">&lt;</a><span class='header'>    June 2020     </span><a href="/bitcoin-core-dev/2020-07-07">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;    <a class="" href="/bitcoin-core-dev/2020-06-01">1</a>  <a class="" href="/bitcoin-core-dev/2020-06-02">2</a>  <a class="" href="/bitcoin-core-dev/2020-06-03">3</a>  <a class="" href="/bitcoin-core-dev/2020-06-04">4</a>  <a class="" href="/bitcoin-core-dev/2020-06-05">5</a>  <a class="" href="/bitcoin-core-dev/2020-06-06">6</a>  &#x000A; <a class="current" href="/bitcoin-core-dev/2020-06-07">7</a>  <a class="" href="/bitcoin-core-dev/2020-06-08">8</a>  <a class="" href="/bitcoin-core-dev/2020-06-09">9</a> <a class="" href="/bitcoin-core-dev/2020-06-10">10</a> <a class="" href="/bitcoin-core-dev/2020-06-11">11</a> <a class="" href="/bitcoin-core-dev/2020-06-12">12</a> <a class="" href="/bitcoin-core-dev/2020-06-13">13</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-06-14">14</a> <a class="" href="/bitcoin-core-dev/2020-06-15">15</a> <a class="" href="/bitcoin-core-dev/2020-06-16">16</a> <a class="" href="/bitcoin-core-dev/2020-06-17">17</a> <a class="" href="/bitcoin-core-dev/2020-06-18">18</a> <a class="" href="/bitcoin-core-dev/2020-06-19">19</a> <a class="" href="/bitcoin-core-dev/2020-06-20">20</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-06-21">21</a> <a class="" href="/bitcoin-core-dev/2020-06-22">22</a> <a class="" href="/bitcoin-core-dev/2020-06-23">23</a> <a class="" href="/bitcoin-core-dev/2020-06-24">24</a> <a class="" href="/bitcoin-core-dev/2020-06-25">25</a> <a class="" href="/bitcoin-core-dev/2020-06-26">26</a> <a class="" href="/bitcoin-core-dev/2020-06-27">27</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-06-28">28</a> <a class="" href="/bitcoin-core-dev/2020-06-29">29</a> <a class="" href="/bitcoin-core-dev/2020-06-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1591491600' id='391061'>
<a class='timestamp' href='#391061'><time timestamp='2020-06-07T01:00:00Z'>01:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] svannord opened pull request #19196: Create Starting Out (master...patch-1) <a href="https://github.com/bitcoin/bitcoin/pull/19196" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19196</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591491660' id='391062'>
<a class='timestamp' href='#391062'><time timestamp='2020-06-07T01:01:00Z'>01:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake closed pull request #19196: Create Starting Out (master...patch-1) <a href="https://github.com/bitcoin/bitcoin/pull/19196" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19196</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591499040' id='391063'>
<a class='timestamp' href='#391063'><time timestamp='2020-06-07T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, for the asmap stuff is there a simple &quot;is this ip in this asn?&quot; function?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591499820' id='391064'>
<a class='timestamp' href='#391064'><time timestamp='2020-06-07T03:17:00Z'>03:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: my asmap tool PR has a lookup function
<br>
</div>

<div class='talk op-msg' data-timestamp='1591499820' id='391065'>
<a class='timestamp' href='#391065'><time timestamp='2020-06-07T03:17:00Z'>03:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i also have python code that can do the same
<br>
</div>

<div class='talk op-msg' data-timestamp='1591499880' id='391066'>
<a class='timestamp' href='#391066'><time timestamp='2020-06-07T03:18:00Z'>03:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
#18573
<br>
</div>

<div class='talk op-msg' data-timestamp='1591499880' id='391067'>
<a class='timestamp' href='#391067'><time timestamp='2020-06-07T03:18:00Z'>03:18</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18573" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18573</a> | [RFC] bitcoin-asmap utility by sipa · Pull Request #18573 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1591500000' id='391068'>
<a class='timestamp' href='#391068'><time timestamp='2020-06-07T03:20:00Z'>03:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
also testmap.py in <a href="https://github.com/sipa/asmap" class="link" target="_blank">https://github.com/sipa/asmap</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591500060' id='391069'>
<a class='timestamp' href='#391069'><time timestamp='2020-06-07T03:21:00Z'>03:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: or you mean inside bitcoin core codebase? GetMappedAs in CNetAddr
<br>
</div>

<div class='talk op-msg' data-timestamp='1591508220' id='391070'>
<a class='timestamp' href='#391070'><time timestamp='2020-06-07T05:37:00Z'>05:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake opened pull request #19197: init: use std::thread for ThreadImport() (master...thread_import_no_boost) <a href="https://github.com/bitcoin/bitcoin/pull/19197" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19197</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591511460' id='391071'>
<a class='timestamp' href='#391071'><time timestamp='2020-06-07T06:31:00Z'>06:31</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, i mean for banning by AS
<br>
</div>

<div class='talk op-msg' data-timestamp='1591511580' id='391072'>
<a class='timestamp' href='#391072'><time timestamp='2020-06-07T06:33:00Z'>06:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, is there a reason the asmap isn&#x27;t a global? seems like something that should be a global
<br>
</div>

<div class='talk op-msg' data-timestamp='1591512060' id='391073'>
<a class='timestamp' href='#391073'><time timestamp='2020-06-07T06:41:00Z'>06:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: i think connman or addrman is a reasonable place for.it
<br>
</div>

<div class='talk op-msg' data-timestamp='1591512120' id='391074'>
<a class='timestamp' href='#391074'><time timestamp='2020-06-07T06:42:00Z'>06:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i forget where it&#x27;s held
<br>
</div>

<div class='talk op-msg' data-timestamp='1591526580' id='391075'>
<a class='timestamp' href='#391075'><time timestamp='2020-06-07T10:43:00Z'>10:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/b1b173994406...1b90a7b61a37" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/b1b173994406...1b90a7b61a37</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591526580' id='391076'>
<a class='timestamp' href='#391076'><time timestamp='2020-06-07T10:43:00Z'>10:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 501e6ab Calvin Kim: doc: Add documentation for &#x27;checklevel&#x27; argument in &#x27;verifychain&#x27; RPC call
<br>
</div>

<div class='talk op-msg' data-timestamp='1591526580' id='391077'>
<a class='timestamp' href='#391077'><time timestamp='2020-06-07T10:43:00Z'>10:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 1b90a7b MarcoFalke: Merge #19005: doc: Add documentation for &#x27;checklevel&#x27; argument in &#x27;verifyc...
<br>
</div>

<div class='talk op-msg' data-timestamp='1591526640' id='391078'>
<a class='timestamp' href='#391078'><time timestamp='2020-06-07T10:44:00Z'>10:44</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #19005: doc: Add documentation for &#x27;checklevel&#x27; argument in &#x27;verifychain&#x27; RPC… (master...add-documentation-for-verifychain) <a href="https://github.com/bitcoin/bitcoin/pull/19005" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19005</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591537440' id='391079'>
<a class='timestamp' href='#391079'><time timestamp='2020-06-07T13:44:00Z'>13:44</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #19198: test: Check that peers with forcerelay permission are not asked to feefilter (master...2006-testForcerelayFeefilter) <a href="https://github.com/bitcoin/bitcoin/pull/19198" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19198</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591538940' id='391080'>
<a class='timestamp' href='#391080'><time timestamp='2020-06-07T14:09:00Z'>14:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonatack opened pull request #19200: rpc: remove deprecated getaddressinfo fields (master...remove-deprecated-getaddressinfo-fields) <a href="https://github.com/bitcoin/bitcoin/pull/19200" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19200</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591540320' id='391081'>
<a class='timestamp' href='#391081'><time timestamp='2020-06-07T14:32:00Z'>14:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #19201: ci: Switch to bitcoincore.org download (master...2006-ci404) <a href="https://github.com/bitcoin/bitcoin/pull/19201" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19201</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591540920' id='391082'>
<a class='timestamp' href='#391082'><time timestamp='2020-06-07T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/1b90a7b61a37...43695b0cf851" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/1b90a7b61a37...43695b0cf851</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591540920' id='391083'>
<a class='timestamp' href='#391083'><time timestamp='2020-06-07T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fa4cd1f MarcoFalke: ci: Switch to bitcoincore.org download
<br>
</div>

<div class='talk op-msg' data-timestamp='1591540920' id='391084'>
<a class='timestamp' href='#391084'><time timestamp='2020-06-07T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 43695b0 MarcoFalke: Merge #19201: ci: Switch to bitcoincore.org download
<br>
</div>

<div class='talk op-msg' data-timestamp='1591540980' id='391085'>
<a class='timestamp' href='#391085'><time timestamp='2020-06-07T14:43:00Z'>14:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #19201: ci: Switch to bitcoincore.org download (master...2006-ci404) <a href="https://github.com/bitcoin/bitcoin/pull/19201" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19201</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591543920' id='391086'>
<a class='timestamp' href='#391086'><time timestamp='2020-06-07T15:32:00Z'>15:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonatack opened pull request #19202: log: remove deprecated `db` log category (master...remove-deprecated-db-log-category) <a href="https://github.com/bitcoin/bitcoin/pull/19202" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19202</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591547520' id='391087'>
<a class='timestamp' href='#391087'><time timestamp='2020-06-07T16:32:00Z'>16:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 3 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/43695b0cf851...b3091b2be7d1" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/43695b0cf851...b3091b2be7d1</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591547520' id='391088'>
<a class='timestamp' href='#391088'><time timestamp='2020-06-07T16:32:00Z'>16:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 4c0c893 Jon Atack: log: remove deprecated `db` log category
<br>
</div>

<div class='talk op-msg' data-timestamp='1591547520' id='391089'>
<a class='timestamp' href='#391089'><time timestamp='2020-06-07T16:32:00Z'>16:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master c514a4f Jon Atack: doc: release note for `db` log category removal
<br>
</div>

<div class='talk op-msg' data-timestamp='1591547520' id='391090'>
<a class='timestamp' href='#391090'><time timestamp='2020-06-07T16:32:00Z'>16:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master b3091b2 MarcoFalke: Merge #19202: log: remove deprecated `db` log category
<br>
</div>

<div class='talk op-msg' data-timestamp='1591547520' id='391091'>
<a class='timestamp' href='#391091'><time timestamp='2020-06-07T16:32:00Z'>16:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #19202: log: remove deprecated `db` log category (master...remove-deprecated-db-log-category) <a href="https://github.com/bitcoin/bitcoin/pull/19202" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19202</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550100' id='391092'>
<a class='timestamp' href='#391092'><time timestamp='2020-06-07T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, can i get all of the subnets in an asn from the asmap?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550100' id='391093'>
<a class='timestamp' href='#391093'><time timestamp='2020-06-07T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not without decoding the entire thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550100' id='391094'>
<a class='timestamp' href='#391094'><time timestamp='2020-06-07T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
it looks like no
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550100' id='391095'>
<a class='timestamp' href='#391095'><time timestamp='2020-06-07T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but that&#x27;s still pretty fast
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550100' id='391096'>
<a class='timestamp' href='#391096'><time timestamp='2020-06-07T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
that makes adding asn based bans much harder but yeah definitely still doable
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550160' id='391097'>
<a class='timestamp' href='#391097'><time timestamp='2020-06-07T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah i see
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550160' id='391098'>
<a class='timestamp' href='#391098'><time timestamp='2020-06-07T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you want to translate banned ASes to subnets
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550160' id='391099'>
<a class='timestamp' href='#391099'><time timestamp='2020-06-07T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
would it be reasonable to do that when adding asn bans? cause that changes it to like two lines of code from many more
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550220' id='391100'>
<a class='timestamp' href='#391100'><time timestamp='2020-06-07T17:17:00Z'>17:17</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
maybe the banlist should support ASNs directly?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550220' id='391101'>
<a class='timestamp' href='#391101'><time timestamp='2020-06-07T17:17:00Z'>17:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that would certainly be cleaner
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550220' id='391102'>
<a class='timestamp' href='#391102'><time timestamp='2020-06-07T17:17:00Z'>17:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i see how that would be harder to implement
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550280' id='391103'>
<a class='timestamp' href='#391103'><time timestamp='2020-06-07T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think if banlists on disk supported ASes natively, but at runtime they&#x27;re converted to subnets, maybe it&#x27;s ok?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550280' id='391104'>
<a class='timestamp' href='#391104'><time timestamp='2020-06-07T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i can definitely support asn&#x27;s directly instead, it&#x27;s not something where one approach is obviously better to me though
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550280' id='391105'>
<a class='timestamp' href='#391105'><time timestamp='2020-06-07T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so that they correctly persist across restarts if asmap gets updated
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550400' id='391106'>
<a class='timestamp' href='#391106'><time timestamp='2020-06-07T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
adding support naively will break backwards compat with banlist.dat though
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550400' id='391107'>
<a class='timestamp' href='#391107'><time timestamp='2020-06-07T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: nah imo
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550460' id='391108'>
<a class='timestamp' href='#391108'><time timestamp='2020-06-07T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: setban should support adding/removing AS bans, without affecting overlapping subnet bans, IMO
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550460' id='391109'>
<a class='timestamp' href='#391109'><time timestamp='2020-06-07T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: that&#x27;s reasonable
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550460' id='391110'>
<a class='timestamp' href='#391110'><time timestamp='2020-06-07T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
plus we might want to update ASmaps at runtime someday
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550520' id='391111'>
<a class='timestamp' href='#391111'><time timestamp='2020-06-07T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: i think it&#x27;s expected that banlist.dat compatibility breaks when you ban an AS - there is no way for an old version to behave correctly
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550520' id='391112'>
<a class='timestamp' href='#391112'><time timestamp='2020-06-07T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you wouldn&#x27;t want to run with a partial set of bans
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550520' id='391113'>
<a class='timestamp' href='#391113'><time timestamp='2020-06-07T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, no i mean doing this naively would mean clearing all your old bans
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550520' id='391114'>
<a class='timestamp' href='#391114'><time timestamp='2020-06-07T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550520' id='391115'>
<a class='timestamp' href='#391115'><time timestamp='2020-06-07T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550580' id='391116'>
<a class='timestamp' href='#391116'><time timestamp='2020-06-07T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: do we have a way to sanely handle an incompatible banlist in current/old versions?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550580' id='391117'>
<a class='timestamp' href='#391117'><time timestamp='2020-06-07T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no clue
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550580' id='391118'>
<a class='timestamp' href='#391118'><time timestamp='2020-06-07T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
losing the banlist entirely would be strictly worse than just losing AS bans
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550580' id='391119'>
<a class='timestamp' href='#391119'><time timestamp='2020-06-07T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i have never looked at its serialization
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550640' id='391120'>
<a class='timestamp' href='#391120'><time timestamp='2020-06-07T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550640' id='391121'>
<a class='timestamp' href='#391121'><time timestamp='2020-06-07T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550640' id='391122'>
<a class='timestamp' href='#391122'><time timestamp='2020-06-07T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, banlist.dat is basically just a serialized banmap_t which is a map of subnets
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550640' id='391123'>
<a class='timestamp' href='#391123'><time timestamp='2020-06-07T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think that if you add an AS ban, you should not lose existing subnet bans
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550700' id='391124'>
<a class='timestamp' href='#391124'><time timestamp='2020-06-07T17:25:00Z'>17:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but if you add an AS ban, and then downgrade to a version that does not support AS bans, ideally it just fails to start
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550700' id='391125'>
<a class='timestamp' href='#391125'><time timestamp='2020-06-07T17:25:00Z'>17:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: banlist serialized entries have a version number
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550760' id='391126'>
<a class='timestamp' href='#391126'><time timestamp='2020-06-07T17:26:00Z'>17:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so there is no problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550760' id='391127'>
<a class='timestamp' href='#391127'><time timestamp='2020-06-07T17:26:00Z'>17:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just increment the version number of AS-based bans; but keep supporting the old subnet-only one in the deserializer
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550820' id='391128'>
<a class='timestamp' href='#391128'><time timestamp='2020-06-07T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
unfortunately the version number is not enforced
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550820' id='391129'>
<a class='timestamp' href='#391129'><time timestamp='2020-06-07T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so old versions with read corrupted data
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550880' id='391130'>
<a class='timestamp' href='#391130'><time timestamp='2020-06-07T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
looks like if we change the root type (currently map&lt;CSubNet, CBanEntry&gt;) old versions should refuse to load it
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550880' id='391131'>
<a class='timestamp' href='#391131'><time timestamp='2020-06-07T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
that means changing a bunch of the logic for serialize/deserialize
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550880' id='391132'>
<a class='timestamp' href='#391132'><time timestamp='2020-06-07T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
and refuse to start
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550880' id='391133'>
<a class='timestamp' href='#391133'><time timestamp='2020-06-07T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
or i could just map asn&#x27;s to subnet and it&#x27;s potentially much less code and compatible...
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550880' id='391134'>
<a class='timestamp' href='#391134'><time timestamp='2020-06-07T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: there&#x27;s a checksum to stop corrupted data
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550940' id='391135'>
<a class='timestamp' href='#391135'><time timestamp='2020-06-07T17:29:00Z'>17:29</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
phantomcircuit: could make a new type that serialises the same for subnets?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591550940' id='391136'>
<a class='timestamp' href='#391136'><time timestamp='2020-06-07T17:29:00Z'>17:29</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
and just serialise ::0/0 followed by AS info for anAS ban
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551000' id='391137'>
<a class='timestamp' href='#391137'><time timestamp='2020-06-07T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
the checksum should stop it from loading that as ::0/0 in old versions
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551000' id='391138'>
<a class='timestamp' href='#391138'><time timestamp='2020-06-07T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
(possibly stored as ::ASN/0 in memory to avoid wasting extra RAM
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551000' id='391139'>
<a class='timestamp' href='#391139'><time timestamp='2020-06-07T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: i&#x27;ll have a look at making the ser/deser code more upgradable
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551120' id='391140'>
<a class='timestamp' href='#391140'><time timestamp='2020-06-07T17:32:00Z'>17:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, the addrdb and bandb share the ser/deser logic to do this they probably just need to be split
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551120' id='391141'>
<a class='timestamp' href='#391141'><time timestamp='2020-06-07T17:32:00Z'>17:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: perhaps
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551120' id='391142'>
<a class='timestamp' href='#391142'><time timestamp='2020-06-07T17:32:00Z'>17:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: std::map is serialized with a size prefix
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551180' id='391143'>
<a class='timestamp' href='#391143'><time timestamp='2020-06-07T17:33:00Z'>17:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so we could change the serialization to stary with a giant number
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551180' id='391144'>
<a class='timestamp' href='#391144'><time timestamp='2020-06-07T17:33:00Z'>17:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
to indicate a new version
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551180' id='391145'>
<a class='timestamp' href='#391145'><time timestamp='2020-06-07T17:33:00Z'>17:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so that it will fail to load on old versions
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551180' id='391146'>
<a class='timestamp' href='#391146'><time timestamp='2020-06-07T17:33:00Z'>17:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*start
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551240' id='391147'>
<a class='timestamp' href='#391147'><time timestamp='2020-06-07T17:34:00Z'>17:34</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
just start with a dummy db that has a bad checksum
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551240' id='391148'>
<a class='timestamp' href='#391148'><time timestamp='2020-06-07T17:34:00Z'>17:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s also possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551300' id='391149'>
<a class='timestamp' href='#391149'><time timestamp='2020-06-07T17:35:00Z'>17:35</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
that seems like it would be more obvious
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551420' id='391150'>
<a class='timestamp' href='#391150'><time timestamp='2020-06-07T17:37:00Z'>17:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
also changing banmap_t is going to effect a whole bunch of logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551480' id='391151'>
<a class='timestamp' href='#391151'><time timestamp='2020-06-07T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i know
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551480' id='391152'>
<a class='timestamp' href='#391152'><time timestamp='2020-06-07T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but that code is due for a cleanup anyway, o think
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551540' id='391153'>
<a class='timestamp' href='#391153'><time timestamp='2020-06-07T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*i
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551600' id='391154'>
<a class='timestamp' href='#391154'><time timestamp='2020-06-07T17:40:00Z'>17:40</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
…
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551660' id='391155'>
<a class='timestamp' href='#391155'><time timestamp='2020-06-07T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
these all sound much more complex than what I just suggested :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551720' id='391156'>
<a class='timestamp' href='#391156'><time timestamp='2020-06-07T17:42:00Z'>17:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which is?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551900' id='391157'>
<a class='timestamp' href='#391157'><time timestamp='2020-06-07T17:45:00Z'>17:45</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
[17:29:56] &lt;luke-jr&gt; and just serialise ::0/0 followed by AS info for anAS ban
<br>
</div>

<div class='talk op-msg' data-timestamp='1591551960' id='391158'>
<a class='timestamp' href='#391158'><time timestamp='2020-06-07T17:46:00Z'>17:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that won&#x27;t work
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552020' id='391159'>
<a class='timestamp' href='#391159'><time timestamp='2020-06-07T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
why not?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552020' id='391160'>
<a class='timestamp' href='#391160'><time timestamp='2020-06-07T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it will result in old software reading corrupted datae
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552020' id='391161'>
<a class='timestamp' href='#391161'><time timestamp='2020-06-07T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
which will fail the checksum
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552020' id='391162'>
<a class='timestamp' href='#391162'><time timestamp='2020-06-07T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, indeed!
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552080' id='391163'>
<a class='timestamp' href='#391163'><time timestamp='2020-06-07T17:48:00Z'>17:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so you&#x27;d need a new data type instead of CSubNet to use as key in the map
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552080' id='391164'>
<a class='timestamp' href='#391164'><time timestamp='2020-06-07T17:48:00Z'>17:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which can represent either a CSubNet or an ASN
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552140' id='391165'>
<a class='timestamp' href='#391165'><time timestamp='2020-06-07T17:49:00Z'>17:49</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552140' id='391166'>
<a class='timestamp' href='#391166'><time timestamp='2020-06-07T17:49:00Z'>17:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and csubnet&#x27;s remain serialized as-is
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552140' id='391167'>
<a class='timestamp' href='#391167'><time timestamp='2020-06-07T17:49:00Z'>17:49</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
exactly
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552200' id='391168'>
<a class='timestamp' href='#391168'><time timestamp='2020-06-07T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and ASN are serialized as some sentinel value that&#x27;s unlikely to be already present in banmans (::0/0 seems right as luke-jr suggests) + version number + ASN
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552260' id='391169'>
<a class='timestamp' href='#391169'><time timestamp='2020-06-07T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I mean, we could use the CSubNet part for ASN data too, so long as we don&#x27;t end up with the same length
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552260' id='391170'>
<a class='timestamp' href='#391170'><time timestamp='2020-06-07T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it needs to be recognizable as an AS entry to the deserializer
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552260' id='391171'>
<a class='timestamp' href='#391171'><time timestamp='2020-06-07T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CSubNets do not have an explicit length in their serialization afaik
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552320' id='391172'>
<a class='timestamp' href='#391172'><time timestamp='2020-06-07T17:52:00Z'>17:52</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552740' id='391173'>
<a class='timestamp' href='#391173'><time timestamp='2020-06-07T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
uh whuch checksum would that fail?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552740' id='391174'>
<a class='timestamp' href='#391174'><time timestamp='2020-06-07T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i dont see any reason that would fail the checksum in DeserializeDB
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552800' id='391175'>
<a class='timestamp' href='#391175'><time timestamp='2020-06-07T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: because the data deserialized wouldn&#x27;t match
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552800' id='391176'>
<a class='timestamp' href='#391176'><time timestamp='2020-06-07T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so it would read a checksum in the wrong place
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552860' id='391177'>
<a class='timestamp' href='#391177'><time timestamp='2020-06-07T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i mean we can just append the asn stuff then and the checksum will be wrong that way to
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552920' id='391178'>
<a class='timestamp' href='#391178'><time timestamp='2020-06-07T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, but how would a deserializer notice that there is more stuff to follow?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591552920' id='391179'>
<a class='timestamp' href='#391179'><time timestamp='2020-06-07T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it would need to distinguish ban entries from the checksum...
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553100' id='391180'>
<a class='timestamp' href='#391180'><time timestamp='2020-06-07T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
start/data/data/hash and try to read data as both a hash and a map of asns
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553160' id='391181'>
<a class='timestamp' href='#391181'><time timestamp='2020-06-07T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s pretty ugly i think, but yes it will work
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553160' id='391182'>
<a class='timestamp' href='#391182'><time timestamp='2020-06-07T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think it&#x27;s a bigger change
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553340' id='391183'>
<a class='timestamp' href='#391183'><time timestamp='2020-06-07T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, could equally just have v1/v2 deserializers
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553340' id='391184'>
<a class='timestamp' href='#391184'><time timestamp='2020-06-07T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: and try both?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553400' id='391185'>
<a class='timestamp' href='#391185'><time timestamp='2020-06-07T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553400' id='391186'>
<a class='timestamp' href='#391186'><time timestamp='2020-06-07T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, see it this way: i think you&#x27;re going to need a data type that represents &quot;subnet or ASN&quot; anyway, to put in the banmap map as key
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553460' id='391187'>
<a class='timestamp' href='#391187'><time timestamp='2020-06-07T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you give that data type a serialization that&#x27;s identical to a subnet&#x27;s for subsets, and to some sentinal + ASN for asns, you have no other serialization issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553520' id='391188'>
<a class='timestamp' href='#391188'><time timestamp='2020-06-07T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*sentinel
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553640' id='391189'>
<a class='timestamp' href='#391189'><time timestamp='2020-06-07T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
yeah that&#x27;s a good point
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553640' id='391190'>
<a class='timestamp' href='#391190'><time timestamp='2020-06-07T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
why is it `using banman_t = std::map...` and not a typedef ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553700' id='391191'>
<a class='timestamp' href='#391191'><time timestamp='2020-06-07T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
using is the newer syntax
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553700' id='391192'>
<a class='timestamp' href='#391192'><time timestamp='2020-06-07T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it does the same as a typedef, but is more flexible
<br>
</div>

<div class='talk op-msg' data-timestamp='1591553760' id='391193'>
<a class='timestamp' href='#391193'><time timestamp='2020-06-07T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<a href="https://stackoverflow.com/questions/10747810/what-is-the-difference-between-typedef-and-using-in-c11" class="link" target="_blank">https://stackoverflow.com/questions/10747810/what-is-the-difference-between-typedef-and-using-in-c11</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591554000' id='391194'>
<a class='timestamp' href='#391194'><time timestamp='2020-06-07T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
ok so they can still be templated where typedef cannot be
<br>
</div>

<div class='talk op-msg' data-timestamp='1591554000' id='391195'>
<a class='timestamp' href='#391195'><time timestamp='2020-06-07T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
interesting
<br>
</div>

<div class='talk op-msg' data-timestamp='1591554240' id='391196'>
<a class='timestamp' href='#391196'><time timestamp='2020-06-07T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, oh CSubNet has a bool is valid flag
<br>
</div>

<div class='talk op-msg' data-timestamp='1591554300' id='391197'>
<a class='timestamp' href='#391197'><time timestamp='2020-06-07T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, and it&#x27;s serialized!
<br>
</div>

<div class='talk op-msg' data-timestamp='1591555020' id='391198'>
<a class='timestamp' href='#391198'><time timestamp='2020-06-07T18:37:00Z'>18:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so all you need to do is serialize ASN entries as something that gets read as valid=false by old nodes, and has a different length
<br>
</div>

<div class='talk op-msg' data-timestamp='1591556820' id='391199'>
<a class='timestamp' href='#391199'><time timestamp='2020-06-07T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1591557720' id='391200'>
<a class='timestamp' href='#391200'><time timestamp='2020-06-07T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
CSubNetOrAsn ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591557780' id='391201'>
<a class='timestamp' href='#391201'><time timestamp='2020-06-07T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
CNetworkBlock?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591557780' id='391202'>
<a class='timestamp' href='#391202'><time timestamp='2020-06-07T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BanMatch ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1591557780' id='391203'>
<a class='timestamp' href='#391203'><time timestamp='2020-06-07T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
im bad at naming things
<br>
</div>

<div class='talk op-msg' data-timestamp='1591557780' id='391204'>
<a class='timestamp' href='#391204'><time timestamp='2020-06-07T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(no more C prefix for classes)
<br>
</div>

<div class='talk op-msg' data-timestamp='1591557780' id='391205'>
<a class='timestamp' href='#391205'><time timestamp='2020-06-07T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
banmatch is good
<br>
</div>

<div class='talk op-msg' data-timestamp='1591557840' id='391206'>
<a class='timestamp' href='#391206'><time timestamp='2020-06-07T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
asn&#x27;s are being represented just as a 32bit number right
<br>
</div>

<div class='talk op-msg' data-timestamp='1591557840' id='391207'>
<a class='timestamp' href='#391207'><time timestamp='2020-06-07T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1591561440' id='391208'>
<a class='timestamp' href='#391208'><time timestamp='2020-06-07T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #19203: tests/net: Add regression fuzz harness for CVE-2017-18350. Add FuzzedSocket. Add thin SOCKET wrapper. (master...fuzzers-Socks5) <a href="https://github.com/bitcoin/bitcoin/pull/19203" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19203</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1591573920' id='391209'>
<a class='timestamp' href='#391209'><time timestamp='2020-06-07T23:52:00Z'>23:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #19204: p2p: Reduce inv traffic during IBD (master...2006-netInvWaste) <a href="https://github.com/bitcoin/bitcoin/pull/19204" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19204</a>
<br>
</div>

</div>
</section>

</body>
</html>
