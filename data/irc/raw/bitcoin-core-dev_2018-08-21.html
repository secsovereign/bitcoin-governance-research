<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2018-08-21
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2018-08-21' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:21 UTC</pre>
<pre><a href="/bitcoin-core-dev/2018-07-21">&lt;</a><span class='header'>   August 2018    </span><a href="/bitcoin-core-dev/2018-09-21">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;          <a class="" href="/bitcoin-core-dev/2018-08-01">1</a>  <a class="" href="/bitcoin-core-dev/2018-08-02">2</a>  <a class="" href="/bitcoin-core-dev/2018-08-03">3</a>  <a class="" href="/bitcoin-core-dev/2018-08-04">4</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2018-08-05">5</a>  <a class="" href="/bitcoin-core-dev/2018-08-06">6</a>  <a class="" href="/bitcoin-core-dev/2018-08-07">7</a>  <a class="" href="/bitcoin-core-dev/2018-08-08">8</a>  <a class="" href="/bitcoin-core-dev/2018-08-09">9</a> <a class="" href="/bitcoin-core-dev/2018-08-10">10</a> <a class="" href="/bitcoin-core-dev/2018-08-11">11</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-08-12">12</a> <a class="" href="/bitcoin-core-dev/2018-08-13">13</a> <a class="" href="/bitcoin-core-dev/2018-08-14">14</a> <a class="" href="/bitcoin-core-dev/2018-08-15">15</a> <a class="" href="/bitcoin-core-dev/2018-08-16">16</a> <a class="" href="/bitcoin-core-dev/2018-08-17">17</a> <a class="" href="/bitcoin-core-dev/2018-08-18">18</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-08-19">19</a> <a class="" href="/bitcoin-core-dev/2018-08-20">20</a> <a class="current" href="/bitcoin-core-dev/2018-08-21">21</a> <a class="" href="/bitcoin-core-dev/2018-08-22">22</a> <a class="" href="/bitcoin-core-dev/2018-08-23">23</a> <a class="" href="/bitcoin-core-dev/2018-08-24">24</a> <a class="" href="/bitcoin-core-dev/2018-08-25">25</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-08-26">26</a> <a class="" href="/bitcoin-core-dev/2018-08-27">27</a> <a class="" href="/bitcoin-core-dev/2018-08-28">28</a> <a class="" href="/bitcoin-core-dev/2018-08-29">29</a> <a class="" href="/bitcoin-core-dev/2018-08-30">30</a> <a class="" href="/bitcoin-core-dev/2018-08-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1534810380' id='625994'>
<a class='timestamp' href='#625994'><time timestamp='2018-08-21T00:13:00Z'>00:13</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
cfields I think once #14005 is merged we could just skip to an rc2? Might also be able to get #13968 in before that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534810380' id='625995'>
<a class='timestamp' href='#625995'><time timestamp='2018-08-21T00:13:00Z'>00:13</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/14005" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/14005</a> | [0.17] depends: fix qt determinism by MarcoFalke · Pull Request #14005 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1534810380' id='625996'>
<a class='timestamp' href='#625996'><time timestamp='2018-08-21T00:13:00Z'>00:13</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13968" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13968</a> | [wallet] couple of walletcreatefundedpsbt fixes by instagibbs · Pull Request #13968 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823100' id='625997'>
<a class='timestamp' href='#625997'><time timestamp='2018-08-21T03:45:00Z'>03:45</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
Where is Bitcoin Core&#x27;s serialization and deserialization code for values in various structures such as transactions, block headers, and protocol data?  This code shows the endianness used
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823160' id='625998'>
<a class='timestamp' href='#625998'><time timestamp='2018-08-21T03:46:00Z'>03:46</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
serialization.h and the various class headers
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823280' id='625999'>
<a class='timestamp' href='#625999'><time timestamp='2018-08-21T03:48:00Z'>03:48</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
luke-jr: great - in what cases (except for TCP/IP ip:s and ports) is small endian <b>*not*</b> useD?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823340' id='626000'>
<a class='timestamp' href='#626000'><time timestamp='2018-08-21T03:49:00Z'>03:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
everything in bitcoin uses little endian
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823340' id='626001'>
<a class='timestamp' href='#626001'><time timestamp='2018-08-21T03:49:00Z'>03:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<b>*but*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823340' id='626002'>
<a class='timestamp' href='#626002'><time timestamp='2018-08-21T03:49:00Z'>03:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the output of hash functions is seen as byte arrays, which are just serialized byte-per-byte
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823340' id='626003'>
<a class='timestamp' href='#626003'><time timestamp='2018-08-21T03:49:00Z'>03:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(SHA256 internally uses big endian, but that&#x27;s black box - it&#x27;s a function that takes as input a byte array and produces another byte array from bitcoin&#x27;s pov)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823640' id='626004'>
<a class='timestamp' href='#626004'><time timestamp='2018-08-21T03:54:00Z'>03:54</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
sipa, the SHA256 specific about Bitcoin is why you need to byte-reverse most(all?) SHA256 libraries&#x27; results within Bitcoin merkle tree merkle node calculations, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823700' id='626005'>
<a class='timestamp' href='#626005'><time timestamp='2018-08-21T03:55:00Z'>03:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Jmabsd: no
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823700' id='626006'>
<a class='timestamp' href='#626006'><time timestamp='2018-08-21T03:55:00Z'>03:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
what? no. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823700' id='626007'>
<a class='timestamp' href='#626007'><time timestamp='2018-08-21T03:55:00Z'>03:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Jmabsd: for human consumption the bytes are sometimes printed in reverse order
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823700' id='626008'>
<a class='timestamp' href='#626008'><time timestamp='2018-08-21T03:55:00Z'>03:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but inside the protocol and data structures, there is never any swapping
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823820' id='626009'>
<a class='timestamp' href='#626009'><time timestamp='2018-08-21T03:57:00Z'>03:57</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
endianness is so comical, smartphones (ARM) are big endian, derp. :)) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823820' id='626010'>
<a class='timestamp' href='#626010'><time timestamp='2018-08-21T03:57:00Z'>03:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t believe any smartphone is BE.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823880' id='626011'>
<a class='timestamp' href='#626011'><time timestamp='2018-08-21T03:58:00Z'>03:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(ARM can run in BE mode or LE mode, but the smartphones all use them in LE mode)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823880' id='626012'>
<a class='timestamp' href='#626012'><time timestamp='2018-08-21T03:58:00Z'>03:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(as does virtually all modern stuff)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823880' id='626013'>
<a class='timestamp' href='#626013'><time timestamp='2018-08-21T03:58:00Z'>03:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
iOS and Android are LE
<br>
</div>

<div class='talk op-msg' data-timestamp='1534823940' id='626014'>
<a class='timestamp' href='#626014'><time timestamp='2018-08-21T03:59:00Z'>03:59</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
wait, where are Bitcoin Core&#x27;s logics to actually enforce little-endian serialization   - say I run Bitcoin Core on an ARM.. is this the line that will cause the big endian (native to my computer) to little endian (serialization form) conversoin: <a href="https://github.com/bitcoin/bitcoin/blob/master/src/serialize.h#L89" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/serialize.h#L89</a> ? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824000' id='626015'>
<a class='timestamp' href='#626015'><time timestamp='2018-08-21T04:00:00Z'>04:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824000' id='626016'>
<a class='timestamp' href='#626016'><time timestamp='2018-08-21T04:00:00Z'>04:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
htole means &quot;host to little endian&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824000' id='626017'>
<a class='timestamp' href='#626017'><time timestamp='2018-08-21T04:00:00Z'>04:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
on LE systems that function is a dummy; on BE systems it does a byteswap
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824060' id='626018'>
<a class='timestamp' href='#626018'><time timestamp='2018-08-21T04:01:00Z'>04:01</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
right so, posix stipulates these, <a href="https://linux.die.net/man/3/htole32" class="link" target="_blank">https://linux.die.net/man/3/htole32</a> , right.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824060' id='626019'>
<a class='timestamp' href='#626019'><time timestamp='2018-08-21T04:01:00Z'>04:01</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
cool!
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824240' id='626020'>
<a class='timestamp' href='#626020'><time timestamp='2018-08-21T04:04:00Z'>04:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
Jmabsd: actually, htole32 isn&#x27;t POSIX
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824300' id='626021'>
<a class='timestamp' href='#626021'><time timestamp='2018-08-21T04:05:00Z'>04:05</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
luke-jr: oh you are right, but instead, ..&quot; functions are <b>**expected**</b> to conform to a future version of IEEE Std 1003.1 (“POSIX.1”). The other functions are extensions that should not be used when portability is required. &quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824420' id='626022'>
<a class='timestamp' href='#626022'><time timestamp='2018-08-21T04:07:00Z'>04:07</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
(this may be more of a #bitcoin question), what is an authoritative reference on that the DER signature&#x27;s max size is 72 bytes?     i see some discussion like this <a href="https://bitcoin.stackexchange.com/questions/12554/why-the-signature-is-always-65-13232-bytes-long" class="link" target="_blank">https://bitcoin.stackexchange.com/questions/12554/why-the-signature-is-always-65-13232-bytes-long</a>  but it&#x27;s not super clea.r
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824480' id='626023'>
<a class='timestamp' href='#626023'><time timestamp='2018-08-21T04:08:00Z'>04:08</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
sipa writes in this thread that &quot;This results in 71 bytes signatures (on average)&quot; - but what&#x27;s the max
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824480' id='626024'>
<a class='timestamp' href='#626024'><time timestamp='2018-08-21T04:08:00Z'>04:08</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
and why
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824540' id='626025'>
<a class='timestamp' href='#626025'><time timestamp='2018-08-21T04:09:00Z'>04:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Jmabsd: the R and S value are 256-bit values, which are at most 33 bytes when encoded in DER
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824540' id='626026'>
<a class='timestamp' href='#626026'><time timestamp='2018-08-21T04:09:00Z'>04:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
then there is 6 bytes of DER headers
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824540' id='626027'>
<a class='timestamp' href='#626027'><time timestamp='2018-08-21T04:09:00Z'>04:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and bitcoin adds a 1 byte sighash to the end
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824540' id='626028'>
<a class='timestamp' href='#626028'><time timestamp='2018-08-21T04:09:00Z'>04:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so together 33+33+6+1 = 73 max
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824600' id='626029'>
<a class='timestamp' href='#626029'><time timestamp='2018-08-21T04:10:00Z'>04:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
however, since the introduction of the low-s rule (which is just policy, not a consensus rule), S values are at most 255 bits, which encodes to at most 32 bytes, reducing the maximum to 72
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824660' id='626030'>
<a class='timestamp' href='#626030'><time timestamp='2018-08-21T04:11:00Z'>04:11</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
aha, so when low-s is not applied, 33B R + 33B S + 6B headers + 1B sighash = 73 bytes
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824720' id='626031'>
<a class='timestamp' href='#626031'><time timestamp='2018-08-21T04:12:00Z'>04:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824720' id='626032'>
<a class='timestamp' href='#626032'><time timestamp='2018-08-21T04:12:00Z'>04:12</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
and with low-s, S (and not R) is 255 instead of 256 bits, meaning 33B R + 32B S + 6B headers + 1B sighash = 72B.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534824780' id='626033'>
<a class='timestamp' href='#626033'><time timestamp='2018-08-21T04:13:00Z'>04:13</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
very well noted thanks!    if you like you can add what you just wrote to me here to that stackexchange thread, as final clarification. thanks for clarifying.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534825440' id='626034'>
<a class='timestamp' href='#626034'><time timestamp='2018-08-21T04:24:00Z'>04:24</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
sipa: wait, the way this max of 72/73B applies to P2PKH and P2PK sigscripts is... P2PK is only &lt;signature&gt;, since this is &lt;= 75 only one byte for PUSHDATA is needed, and then follows up to <b>**73**</b> bytes of signature data, meaning P2PK may take <b>**74**</b> bytes at most?  and, P2PKH is &lt;signature&gt; &lt;pubkey&gt;, pubkey is normally 33B or for legacy uncompressed 65B, both push-datas are single-byte due to &lt;=75B, and the signature may be <b>**73B**</b> 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534825440' id='626035'>
<a class='timestamp' href='#626035'><time timestamp='2018-08-21T04:24:00Z'>04:24</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
so 1 + 73 + 1 + 33/65 = 108 or 140B sigscript max for P2PKH?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534825500' id='626036'>
<a class='timestamp' href='#626036'><time timestamp='2018-08-21T04:25:00Z'>04:25</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
libbitcoin though says &quot;static BC_CONSTEXPR size_t max_der_signature_size = 72;&quot;, hm
<br>
</div>

<div class='talk op-msg' data-timestamp='1534825500' id='626037'>
<a class='timestamp' href='#626037'><time timestamp='2018-08-21T04:25:00Z'>04:25</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
..which is excluding sighash byte, meaning 73B max here too?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534825500' id='626038'>
<a class='timestamp' href='#626038'><time timestamp='2018-08-21T04:25:00Z'>04:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
low s is not a consensus rule
<br>
</div>

<div class='talk op-msg' data-timestamp='1534825680' id='626039'>
<a class='timestamp' href='#626039'><time timestamp='2018-08-21T04:28:00Z'>04:28</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
sipa: are the calculations I made about max size sigscript for P2PKH and P2PK (108/140B and 74B) correct?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534825740' id='626040'>
<a class='timestamp' href='#626040'><time timestamp='2018-08-21T04:29:00Z'>04:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i believe they&#x27;re right
<br>
</div>

<div class='talk op-msg' data-timestamp='1534826340' id='626041'>
<a class='timestamp' href='#626041'><time timestamp='2018-08-21T04:39:00Z'>04:39</time></a>
&lt;<span class='nick nick-14'> arubi</span>&gt;
just like low is isn&#x27;t consensus rule, neither is a clean scriptsig for p2pk\p2pkh :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534826520' id='626042'>
<a class='timestamp' href='#626042'><time timestamp='2018-08-21T04:42:00Z'>04:42</time></a>
&lt;<span class='nick nick-14'> arubi</span>&gt;
er, low <b>*s*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534830960' id='626043'>
<a class='timestamp' href='#626043'><time timestamp='2018-08-21T05:56:00Z'>05:56</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
arubi: wait, what do you mean?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832040' id='626044'>
<a class='timestamp' href='#626044'><time timestamp='2018-08-21T06:14:00Z'>06:14</time></a>
&lt;<span class='nick nick-14'> arubi</span>&gt;
Jmabsd, I mean yes, you can calculate the maximum size of a signature and a pubkey, and also yes, normally it&#x27;s only the signature in scriptsig for p2pk and pubkey+signature for p2pkh, but there is no rule that says that other things can&#x27;t added in a p2pk or p2pkh spend scriptsig
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832160' id='626045'>
<a class='timestamp' href='#626045'><time timestamp='2018-08-21T06:16:00Z'>06:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: doc/man/Makefile -AWK = gawk+AWK = mawk
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832220' id='626046'>
<a class='timestamp' href='#626046'><time timestamp='2018-08-21T06:17:00Z'>06:17</time></a>
&lt;<span class='nick nick-14'> arubi</span>&gt;
so saying that 108\140 bytes is the maximum size of such a scriptsig is not /wrong/, but it&#x27;s not consensus accurate.  the only reason I brought it up is because it&#x27;s the same thing with low s
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832280' id='626047'>
<a class='timestamp' href='#626047'><time timestamp='2018-08-21T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: agree, no need to sign rc1
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832280' id='626048'>
<a class='timestamp' href='#626048'><time timestamp='2018-08-21T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: we can skip over it and do rc2, there&#x27;s another fix that needs to be merged to IIRC
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832280' id='626049'>
<a class='timestamp' href='#626049'><time timestamp='2018-08-21T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
so I guess I need to uninstall gawk somehow
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832280' id='626050'>
<a class='timestamp' href='#626050'><time timestamp='2018-08-21T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: I&#x27;m not sure I understand
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832340' id='626051'>
<a class='timestamp' href='#626051'><time timestamp='2018-08-21T06:19:00Z'>06:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so the difference between awk and gawk causes non-determinism?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832400' id='626052'>
<a class='timestamp' href='#626052'><time timestamp='2018-08-21T06:20:00Z'>06:20</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: gawk and mawk, but yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832460' id='626053'>
<a class='timestamp' href='#626053'><time timestamp='2018-08-21T06:21:00Z'>06:21</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
if gawk is found, configure prefers it, and it ends up in doc/man/Makefile
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832460' id='626054'>
<a class='timestamp' href='#626054'><time timestamp='2018-08-21T06:21:00Z'>06:21</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
so I guess the only way to fix it is to either guarantee all base VMs have no gawk, or to always install gawk so they do
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832520' id='626055'>
<a class='timestamp' href='#626055'><time timestamp='2018-08-21T06:22:00Z'>06:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
what bothers me is that the different tool causes a different output
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832520' id='626056'>
<a class='timestamp' href='#626056'><time timestamp='2018-08-21T06:22:00Z'>06:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the build system is supposed to choose between <b>*equivalent*</b> tools
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832520' id='626057'>
<a class='timestamp' href='#626057'><time timestamp='2018-08-21T06:22:00Z'>06:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if it makes a difference which one is chosen I think it should reject either one, or we should change the usage so that the output matches
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832520' id='626058'>
<a class='timestamp' href='#626058'><time timestamp='2018-08-21T06:22:00Z'>06:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: I&#x27;m sure the tools produce equivalent output
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832520' id='626059'>
<a class='timestamp' href='#626059'><time timestamp='2018-08-21T06:22:00Z'>06:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
the difference is the command line in the Makefile
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832580' id='626060'>
<a class='timestamp' href='#626060'><time timestamp='2018-08-21T06:23:00Z'>06:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
then why is this a non-determinism issue?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832580' id='626061'>
<a class='timestamp' href='#626061'><time timestamp='2018-08-21T06:23:00Z'>06:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
how does that affect the executable?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832580' id='626062'>
<a class='timestamp' href='#626062'><time timestamp='2018-08-21T06:23:00Z'>06:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I&#x27;m not sure why the Makefile is included in the output
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832580' id='626063'>
<a class='timestamp' href='#626063'><time timestamp='2018-08-21T06:23:00Z'>06:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh, me neither, are you sure that file needs to be deterministic at all? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832580' id='626064'>
<a class='timestamp' href='#626064'><time timestamp='2018-08-21T06:23:00Z'>06:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if it includes a makefile it seems it&#x27;s an intermediate product for something
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832580' id='626065'>
<a class='timestamp' href='#626065'><time timestamp='2018-08-21T06:23:00Z'>06:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I guess that&#x27;s the real bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832580' id='626066'>
<a class='timestamp' href='#626066'><time timestamp='2018-08-21T06:23:00Z'>06:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832640' id='626067'>
<a class='timestamp' href='#626067'><time timestamp='2018-08-21T06:24:00Z'>06:24</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
the nsis script seems to just include doc/*
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832640' id='626068'>
<a class='timestamp' href='#626068'><time timestamp='2018-08-21T06:24:00Z'>06:24</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I think &#x27;make install&#x27; is supposed to install the man pages, but not a makefile?!?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832700' id='626069'>
<a class='timestamp' href='#626069'><time timestamp='2018-08-21T06:25:00Z'>06:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
it uses @abs_top_srcdir@/doc\*.*
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832700' id='626070'>
<a class='timestamp' href='#626070'><time timestamp='2018-08-21T06:25:00Z'>06:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
so make install isn&#x27;t involved
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832820' id='626071'>
<a class='timestamp' href='#626071'><time timestamp='2018-08-21T06:27:00Z'>06:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right--anyhow, let&#x27;s try to fix this for rc2 as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832820' id='626072'>
<a class='timestamp' href='#626072'><time timestamp='2018-08-21T06:27:00Z'>06:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
thanks for narrowing this down
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832880' id='626073'>
<a class='timestamp' href='#626073'><time timestamp='2018-08-21T06:28:00Z'>06:28</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I suppose the dumbest way would be to delete Makefile* there first, or even all of the man directory (Windows can&#x27;t view them anyeway?)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832880' id='626074'>
<a class='timestamp' href='#626074'><time timestamp='2018-08-21T06:28:00Z'>06:28</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I&#x27;m not sure what a <b>*good*</b> solution would look like
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832880' id='626075'>
<a class='timestamp' href='#626075'><time timestamp='2018-08-21T06:28:00Z'>06:28</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
fwiw, removing gawk implies: The following packages will be REMOVED:  byobu gawk ubuntu-server
<br>
</div>

<div class='talk op-msg' data-timestamp='1534832940' id='626076'>
<a class='timestamp' href='#626076'><time timestamp='2018-08-21T06:29:00Z'>06:29</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
so apparently y&#x27;all have base VMs without ubuntu-server O.o
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833000' id='626077'>
<a class='timestamp' href='#626077'><time timestamp='2018-08-21T06:30:00Z'>06:30</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
what may arubi have meant by &quot;just like low is isn&#x27;t consensus rule, neither is a clean scriptsig for p2pk\p2pkh :)&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833300' id='626078'>
<a class='timestamp' href='#626078'><time timestamp='2018-08-21T06:35:00Z'>06:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: I think you&#x27;d want to delete everything that isn&#x27;t a man page, isn&#x27;t there a VARIABLE that has the man page names?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833300' id='626079'>
<a class='timestamp' href='#626079'><time timestamp='2018-08-21T06:35:00Z'>06:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: and,say, copy those instead of everything
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833360' id='626080'>
<a class='timestamp' href='#626080'><time timestamp='2018-08-21T06:36:00Z'>06:36</time></a>
&lt;<span class='nick nick-9'> Jmabsd</span>&gt;
(ah he responded on #bitcoin, great.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833480' id='626081'>
<a class='timestamp' href='#626081'><time timestamp='2018-08-21T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: uh? Windows users want everything except the manpages I would think
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833600' id='626082'>
<a class='timestamp' href='#626082'><time timestamp='2018-08-21T06:40:00Z'>06:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
src/doc only has manpages
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833660' id='626083'>
<a class='timestamp' href='#626083'><time timestamp='2018-08-21T06:41:00Z'>06:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so if you don&#x27;t want the manpages then yes you can skip the entire directory
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833720' id='626084'>
<a class='timestamp' href='#626084'><time timestamp='2018-08-21T06:42:00Z'>06:42</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
it&#x27;s just doc/ not src/doc/
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833720' id='626085'>
<a class='timestamp' href='#626085'><time timestamp='2018-08-21T06:42:00Z'>06:42</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
src/doc/ doesn&#x27;t exist &lt;.&lt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833720' id='626086'>
<a class='timestamp' href='#626086'><time timestamp='2018-08-21T06:42:00Z'>06:42</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
doc/ has the various README files etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833840' id='626087'>
<a class='timestamp' href='#626087'><time timestamp='2018-08-21T06:44:00Z'>06:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833840' id='626088'>
<a class='timestamp' href='#626088'><time timestamp='2018-08-21T06:44:00Z'>06:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, this is a drawback of not explicitly listing files but using wildcards, cfields has been discouraging those for about forever :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833900' id='626089'>
<a class='timestamp' href='#626089'><time timestamp='2018-08-21T06:45:00Z'>06:45</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
don&#x27;t see a nice way to delete stuff :x
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833960' id='626090'>
<a class='timestamp' href='#626090'><time timestamp='2018-08-21T06:46:00Z'>06:46</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
maybe /x Makefile* for now
<br>
</div>

<div class='talk op-msg' data-timestamp='1534833960' id='626091'>
<a class='timestamp' href='#626091'><time timestamp='2018-08-21T06:46:00Z'>06:46</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
<a href="http://nsis.sourceforge.net/Reference/File" class="link" target="_blank">http://nsis.sourceforge.net/Reference/File</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534834020' id='626092'>
<a class='timestamp' href='#626092'><time timestamp='2018-08-21T06:47:00Z'>06:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I guess /x man might work too
<br>
</div>

<div class='talk op-msg' data-timestamp='1534834020' id='626093'>
<a class='timestamp' href='#626093'><time timestamp='2018-08-21T06:47:00Z'>06:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
if we definitely don&#x27;t want the manpages install
<br>
</div>

<div class='talk op-msg' data-timestamp='1534834320' id='626094'>
<a class='timestamp' href='#626094'><time timestamp='2018-08-21T06:52:00Z'>06:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;d prefer to exclude copying the makefile instead of deleting it
<br>
</div>

<div class='talk op-msg' data-timestamp='1534834320' id='626095'>
<a class='timestamp' href='#626095'><time timestamp='2018-08-21T06:52:00Z'>06:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1534834320' id='626096'>
<a class='timestamp' href='#626096'><time timestamp='2018-08-21T06:52:00Z'>06:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
excluding it from the archive would work too I suppose
<br>
</div>

<div class='talk op-msg' data-timestamp='1534834380' id='626097'>
<a class='timestamp' href='#626097'><time timestamp='2018-08-21T06:53:00Z'>06:53</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: want to make a branch we both build and compare? ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534834500' id='626098'>
<a class='timestamp' href='#626098'><time timestamp='2018-08-21T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I pushed fix_nsis_makefile to my github
<br>
</div>

<div class='talk op-msg' data-timestamp='1534834500' id='626099'>
<a class='timestamp' href='#626099'><time timestamp='2018-08-21T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
pushing*
<br>
</div>

<div class='talk op-msg' data-timestamp='1534837860' id='626100'>
<a class='timestamp' href='#626100'><time timestamp='2018-08-21T07:51:00Z'>07:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sure, I can build that
<br>
</div>

<div class='talk op-msg' data-timestamp='1534839480' id='626101'>
<a class='timestamp' href='#626101'><time timestamp='2018-08-21T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
promag: whoops, sorry about making #13529 need rebase again, we really need to get that in--asap
<br>
</div>

<div class='talk op-msg' data-timestamp='1534839480' id='626102'>
<a class='timestamp' href='#626102'><time timestamp='2018-08-21T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13529" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13529</a> | Use new Qt5 connect syntax by promag · Pull Request #13529 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1534841220' id='626103'>
<a class='timestamp' href='#626103'><time timestamp='2018-08-21T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
wumpus: rebased #13529
<br>
</div>

<div class='talk op-msg' data-timestamp='1534841220' id='626104'>
<a class='timestamp' href='#626104'><time timestamp='2018-08-21T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13529" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13529</a> | Use new Qt5 connect syntax by promag · Pull Request #13529 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1534841580' id='626105'>
<a class='timestamp' href='#626105'><time timestamp='2018-08-21T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
wumpus: I also think #13501 should go as soon as possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1534841580' id='626106'>
<a class='timestamp' href='#626106'><time timestamp='2018-08-21T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13501" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13501</a> | Correctly terminate HTTP server by promag · Pull Request #13501 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1534842300' id='626107'>
<a class='timestamp' href='#626107'><time timestamp='2018-08-21T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
What is the guideline for using the UniValue [] operator or find_value?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534842420' id='626108'>
<a class='timestamp' href='#626108'><time timestamp='2018-08-21T09:07:00Z'>09:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
stevenroose: [] is for indexing arrays, find_value for finding a value associated to a key in an object, IIRC
<br>
</div>

<div class='talk op-msg' data-timestamp='1534842420' id='626109'>
<a class='timestamp' href='#626109'><time timestamp='2018-08-21T09:07:00Z'>09:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I don&#x27;t think it&#x27;s posbbile to use them interchangably
<br>
</div>

<div class='talk op-msg' data-timestamp='1534843080' id='626110'>
<a class='timestamp' href='#626110'><time timestamp='2018-08-21T09:18:00Z'>09:18</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
wumpus: I found these lines almost underneath each other
<br>
</div>

<div class='talk op-msg' data-timestamp='1534843080' id='626111'>
<a class='timestamp' href='#626111'><time timestamp='2018-08-21T09:18:00Z'>09:18</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
UniValue error = find_value(reply, &quot;error&quot;);
<br>
</div>

<div class='talk op-msg' data-timestamp='1534843080' id='626112'>
<a class='timestamp' href='#626112'><time timestamp='2018-08-21T09:18:00Z'>09:18</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
UniValue result = reply[&quot;result&quot;];
<br>
</div>

<div class='talk op-msg' data-timestamp='1534843080' id='626113'>
<a class='timestamp' href='#626113'><time timestamp='2018-08-21T09:18:00Z'>09:18</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
Reply object is the same, it&#x27;s an RPC response.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534843140' id='626114'>
<a class='timestamp' href='#626114'><time timestamp='2018-08-21T09:19:00Z'>09:19</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
Looking at the implementation of both, they both seem to do the same in a different way :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1534843200' id='626115'>
<a class='timestamp' href='#626115'><time timestamp='2018-08-21T09:20:00Z'>09:20</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
wumpus: <a href="https://gist.github.com/stevenroose/b5a9a79e84bb949b08112d560ccec9e0" class="link" target="_blank">https://gist.github.com/stevenroose/b5a9a79e84bb949b08112d560ccec9e0</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534843320' id='626116'>
<a class='timestamp' href='#626116'><time timestamp='2018-08-21T09:22:00Z'>09:22</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
Something else: the RPC error code RPC_IN_WARMUP, once one call does not respond with that code, can one assume all other calls to also not give it? I.e. do different RPC calls have different warmup times?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534843380' id='626117'>
<a class='timestamp' href='#626117'><time timestamp='2018-08-21T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-7'> stevenroose</span>&gt;
Hmm, looking at the few times that variable is used, it seems to be a global one-time thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1534843620' id='626118'>
<a class='timestamp' href='#626118'><time timestamp='2018-08-21T09:27:00Z'>09:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;d personally prefer find_value to override operator magic, but that&#x27;s just my opinion, if they do effectively the same then I wouldn&#x27;t know
<br>
</div>

<div class='talk op-msg' data-timestamp='1534843680' id='626119'>
<a class='timestamp' href='#626119'><time timestamp='2018-08-21T09:28:00Z'>09:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
stevenroose: yes, warmup is a global process
<br>
</div>

<div class='talk op-msg' data-timestamp='1534843800' id='626120'>
<a class='timestamp' href='#626120'><time timestamp='2018-08-21T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it was introduced to give feedback about the initialization process in bitcoind to RPC clients, a long time ago the RPC server was spun up as last thing after initialization but this meant that the process launching bitcoind had no idea of the status
<br>
</div>

<div class='talk op-msg' data-timestamp='1534845240' id='626121'>
<a class='timestamp' href='#626121'><time timestamp='2018-08-21T09:54:00Z'>09:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so yes, it is valid to poll with a NOP RPC call such as &#x27;echo&#x27; until it is out of warmup status, and assume everything after that will work
<br>
</div>

<div class='talk op-msg' data-timestamp='1534846980' id='626122'>
<a class='timestamp' href='#626122'><time timestamp='2018-08-21T10:23:00Z'>10:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: build output for your branch <a href="https://0bin.net/paste/JTH+pG9fCKr2zDdL#eiSYVxfEOv7lgguDxAI4AcgqOjNG4REi5m4NqlbgWQz" class="link" target="_blank">https://0bin.net/paste/JTH+pG9fCKr2zDdL#eiSYVxfEOv7lgguDxAI4AcgqOjNG4REi5m4NqlbgWQz</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534853580' id='626123'>
<a class='timestamp' href='#626123'><time timestamp='2018-08-21T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-3'> someone235</span>&gt;
someone knows what this script tries to test? [&quot;1&quot;, &quot;0x01 0x01 EQUAL&quot;, &quot;P2SH,STRICTENC&quot;, &quot;OK&quot;, &quot;The following is useful for checking implementations of BN_bn2mpi&quot;],
<br>
</div>

<div class='talk op-msg' data-timestamp='1534853580' id='626124'>
<a class='timestamp' href='#626124'><time timestamp='2018-08-21T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-3'> someone235</span>&gt;
from here <a href="https://github.com/bitcoin/bitcoin/blob/master/src/test/data/script_tests.json#L354" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/test/data/script_tests.json#L354</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534856940' id='626125'>
<a class='timestamp' href='#626125'><time timestamp='2018-08-21T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well at least not BN_nb2mpi, that&#x27;s an openSSL function and hasn&#x27;t been used from consensus code for ages
<br>
</div>

<div class='talk op-msg' data-timestamp='1534856940' id='626126'>
<a class='timestamp' href='#626126'><time timestamp='2018-08-21T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
still, apparently the goal is to check number conversion
<br>
</div>

<div class='talk op-msg' data-timestamp='1534857780' id='626127'>
<a class='timestamp' href='#626127'><time timestamp='2018-08-21T13:23:00Z'>13:23</time></a>
&lt;<span class='nick nick-3'> someone235</span>&gt;
wumpus, what do you mean?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534857840' id='626128'>
<a class='timestamp' href='#626128'><time timestamp='2018-08-21T13:24:00Z'>13:24</time></a>
&lt;<span class='nick nick-3'> someone235</span>&gt;
wumpus, you mean it checks if the string parser works correctly?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534857960' id='626129'>
<a class='timestamp' href='#626129'><time timestamp='2018-08-21T13:26:00Z'>13:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no, I don&#x27;t actually know, BN_bn2mpi/BN_mpi2bn was used for compact number representation (as in the PoW target), it&#x27;s not used anywhere in the scripting language
<br>
</div>

<div class='talk op-msg' data-timestamp='1534858020' id='626130'>
<a class='timestamp' href='#626130'><time timestamp='2018-08-21T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and as far as I know, never was
<br>
</div>

<div class='talk op-msg' data-timestamp='1534858020' id='626131'>
<a class='timestamp' href='#626131'><time timestamp='2018-08-21T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but you can be certain it&#x27;s not about a &quot;string parser&quot;, nothing in bitcoin script uses strings
<br>
</div>

<div class='talk op-msg' data-timestamp='1534859100' id='626132'>
<a class='timestamp' href='#626132'><time timestamp='2018-08-21T13:45:00Z'>13:45</time></a>
&lt;<span class='nick nick-3'> someone235</span>&gt;
wumpus, the parser of script_tests.json uses strings
<br>
</div>

<div class='talk op-msg' data-timestamp='1534859100' id='626133'>
<a class='timestamp' href='#626133'><time timestamp='2018-08-21T13:45:00Z'>13:45</time></a>
&lt;<span class='nick nick-3'> someone235</span>&gt;
wumpus, it knows to convert &quot;1&quot; -&gt; OP_1 etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1534860960' id='626134'>
<a class='timestamp' href='#626134'><time timestamp='2018-08-21T14:16:00Z'>14:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ohh like that, no, there&#x27;s separate unit tests for that, the script tests are for testing the script system
<br>
</div>

<div class='talk op-msg' data-timestamp='1534872780' id='626135'>
<a class='timestamp' href='#626135'><time timestamp='2018-08-21T17:33:00Z'>17:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
kallewoof: <a href="https://github.com/bitcoin-core/bitcoin-devwiki/wiki/0.17.0-Release-notes#partial-spend-avoidance" class="link" target="_blank">https://github.com/bitcoin-core/bitcoin-devwiki/wiki/0.17.0-Release-notes#partial-spend-avoidance</a>  does this sound okay?
<br>
</div>

<div class='talk op-msg' data-timestamp='1534872780' id='626136'>
<a class='timestamp' href='#626136'><time timestamp='2018-08-21T17:33:00Z'>17:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The earlier text made it sound like there was no change at all if the argument wasn&#x27;t set.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534873500' id='626137'>
<a class='timestamp' href='#626137'><time timestamp='2018-08-21T17:45:00Z'>17:45</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
<a href="http://diyhpl.us/wiki/transcripts/london-bitcoin-devs/jnewbery-bitcoin-core-v0.17/" class="link" target="_blank">http://diyhpl.us/wiki/transcripts/london-bitcoin-devs/jnewbery-bitcoin-core-v0.17/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534874880' id='626138'>
<a class='timestamp' href='#626138'><time timestamp='2018-08-21T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: that&#x27;s Linux builds.. this is a Windows issue :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1534879680' id='626139'>
<a class='timestamp' href='#626139'><time timestamp='2018-08-21T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: I don&#x27;t feel comfortable with replacing the shake256/fips202 part with sha256 in the nist submitted newhope code (<a href="https://github.com/newhopecrypto/newhope/tree/master/ref)" class="link" target="_blank">https://github.com/newhopecrypto/newhope/tree/master/ref)</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534879740' id='626140'>
<a class='timestamp' href='#626140'><time timestamp='2018-08-21T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: OKAY, don&#x27;t! 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534879740' id='626141'>
<a class='timestamp' href='#626141'><time timestamp='2018-08-21T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
one of the hash uses in newhope is protocol normative.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534879800' id='626142'>
<a class='timestamp' href='#626142'><time timestamp='2018-08-21T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(it sends a random seed, and the other side needs to generate the same random stream from it)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534879860' id='626143'>
<a class='timestamp' href='#626143'><time timestamp='2018-08-21T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yeah. I think we should keep the fips202/shake256 part
<br>
</div>

<div class='talk op-msg' data-timestamp='1534879980' id='626144'>
<a class='timestamp' href='#626144'><time timestamp='2018-08-21T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess we better use the implementation as it is and feed the NEWHOPE_KEY into out HKDF function together with the ECDH secret.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534879980' id='626145'>
<a class='timestamp' href='#626145'><time timestamp='2018-08-21T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
HKDF( NEWHOPE_KEY || ECDH_KEY)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880040' id='626146'>
<a class='timestamp' href='#626146'><time timestamp='2018-08-21T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: IIRC we need to at a minimum change the implementation to not read /dev/urandom itself.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880100' id='626147'>
<a class='timestamp' href='#626147'><time timestamp='2018-08-21T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
though we don&#x27;t have to do that now, just for testing/review.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880100' id='626148'>
<a class='timestamp' href='#626148'><time timestamp='2018-08-21T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. RIght.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880100' id='626149'>
<a class='timestamp' href='#626149'><time timestamp='2018-08-21T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
The encryption / protocol V2 implementation is ready (only secp256k1 ecdh), added tests and did exhausting field testing... its ~2014 lines of code already,...
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880100' id='626150'>
<a class='timestamp' href='#626150'><time timestamp='2018-08-21T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I&#x27;m not sure if we should load the newhope on top or add it later but within the same release
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880220' id='626151'>
<a class='timestamp' href='#626151'><time timestamp='2018-08-21T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Strategy A would be to publish/alter the BIP with NewHope and implement it within two steps... but I know it&#x27;s also meh-ish
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880280' id='626152'>
<a class='timestamp' href='#626152'><time timestamp='2018-08-21T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Strategy B would open a +~2600 line pull request with 4 new crypto modules (ECDH, ChaCha, Poly1305, NewHope)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880280' id='626153'>
<a class='timestamp' href='#626153'><time timestamp='2018-08-21T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I <u>_expect_</u> that if no extra deployment logic is needed, adding new hope is litterally a few additional lines, plus dropping in the newhope reference code.  So then at least we could compare there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880340' id='626154'>
<a class='timestamp' href='#626154'><time timestamp='2018-08-21T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. The handshake part is already implemented with maximum flexibility...
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880340' id='626155'>
<a class='timestamp' href='#626155'><time timestamp='2018-08-21T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
And the impact on the non-newhope module is minimal
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880460' id='626156'>
<a class='timestamp' href='#626156'><time timestamp='2018-08-21T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case, my thinking was just that deploying newhope in the inital is simpler than any after the fact addition, but we can see what other people think when the look at the impementation.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880580' id='626157'>
<a class='timestamp' href='#626157'><time timestamp='2018-08-21T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. Agree.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534880640' id='626158'>
<a class='timestamp' href='#626158'><time timestamp='2018-08-21T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
implementation*
<br>
</div>

<div class='talk op-msg' data-timestamp='1534885320' id='626159'>
<a class='timestamp' href='#626159'><time timestamp='2018-08-21T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/pull/14018" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/14018</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1534886460' id='626160'>
<a class='timestamp' href='#626160'><time timestamp='2018-08-21T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: if you send me the patch w/ newhope, I can spin it up here and we can addnode each other interop test with PPC too. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1534886520' id='626161'>
<a class='timestamp' href='#626161'><time timestamp='2018-08-21T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I wonder how much bandwidth overhead there would be in making dandelion largely traffic analysis immune
<br>
</div>

<div class='talk op-msg' data-timestamp='1534886820' id='626162'>
<a class='timestamp' href='#626162'><time timestamp='2018-08-21T21:27:00Z'>21:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
A way to do that would be to intoduce a new message type &quot;txtrickle&quot; that has a fixed payload size such as 64 bytes. And we&#x27;d send these messages to four outbound peers, two of which are our dandelion outedges, at some constant rate R.   If we have stem tx to send, they queue up and ride in these messages. Otherwise, the messages are just filled with zeros.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534886880' id='626163'>
<a class='timestamp' href='#626163'><time timestamp='2018-08-21T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Rate R starts at some initial value and adjusts every 24 hours or something to keep tranmission delay low.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534886880' id='626164'>
<a class='timestamp' href='#626164'><time timestamp='2018-08-21T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Some information would get leaked by R changing, but not a ton.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534887180' id='626165'>
<a class='timestamp' href='#626165'><time timestamp='2018-08-21T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
R should end up being some factor of txn_rate / listeners * dandelion_path length... which would be a really low number.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534887240' id='626166'>
<a class='timestamp' href='#626166'><time timestamp='2018-08-21T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So I think that the actual bandwidth overhead might be really low.
<br>
</div>

<div class='talk op-msg' data-timestamp='1534887960' id='626167'>
<a class='timestamp' href='#626167'><time timestamp='2018-08-21T21:46:00Z'>21:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So, for example... at 4m weight max, assuming constant hashrate, maximum bandwidth of the blockchain is 53kbit/sec. with 10,000 listeners and a stem length of 10, we&#x27;d expect each listner to see at most ~53 bits/sec of stem forwarding. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1534888140' id='626168'>
<a class='timestamp' href='#626168'><time timestamp='2018-08-21T21:49:00Z'>21:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So the actual rate we need would be really decided by how much latency we were willing to tolerate adding.
<br>
</div>

</div>
</section>

</body>
</html>
