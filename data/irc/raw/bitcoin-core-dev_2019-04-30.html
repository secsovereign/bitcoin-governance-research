<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2019-04-30
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2019-04-30' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:20 UTC</pre>
<pre><a href="/bitcoin-core-dev/2019-03-30">&lt;</a><span class='header'>    April 2019    </span><a href="/bitcoin-core-dev/2019-05-30">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;    <a class="" href="/bitcoin-core-dev/2019-04-01">1</a>  <a class="" href="/bitcoin-core-dev/2019-04-02">2</a>  <a class="" href="/bitcoin-core-dev/2019-04-03">3</a>  <a class="" href="/bitcoin-core-dev/2019-04-04">4</a>  <a class="" href="/bitcoin-core-dev/2019-04-05">5</a>  <a class="" href="/bitcoin-core-dev/2019-04-06">6</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2019-04-07">7</a>  <a class="" href="/bitcoin-core-dev/2019-04-08">8</a>  <a class="" href="/bitcoin-core-dev/2019-04-09">9</a> <a class="" href="/bitcoin-core-dev/2019-04-10">10</a> <a class="" href="/bitcoin-core-dev/2019-04-11">11</a> <a class="" href="/bitcoin-core-dev/2019-04-12">12</a> <a class="" href="/bitcoin-core-dev/2019-04-13">13</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-04-14">14</a> <a class="" href="/bitcoin-core-dev/2019-04-15">15</a> <a class="" href="/bitcoin-core-dev/2019-04-16">16</a> <a class="" href="/bitcoin-core-dev/2019-04-17">17</a> <a class="" href="/bitcoin-core-dev/2019-04-18">18</a> <a class="" href="/bitcoin-core-dev/2019-04-19">19</a> <a class="" href="/bitcoin-core-dev/2019-04-20">20</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-04-21">21</a> <a class="" href="/bitcoin-core-dev/2019-04-22">22</a> <a class="" href="/bitcoin-core-dev/2019-04-23">23</a> <a class="" href="/bitcoin-core-dev/2019-04-24">24</a> <a class="" href="/bitcoin-core-dev/2019-04-25">25</a> <a class="" href="/bitcoin-core-dev/2019-04-26">26</a> <a class="" href="/bitcoin-core-dev/2019-04-27">27</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-04-28">28</a> <a class="" href="/bitcoin-core-dev/2019-04-29">29</a> <a class="current" href="/bitcoin-core-dev/2019-04-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1556604000' id='665151'>
<a class='timestamp' href='#665151'><time timestamp='2019-04-30T06:00:00Z'>06:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jnewbery: yes, 15141 looks pretty much ready
<br>
</div>

<div class='talk op-msg' data-timestamp='1556606520' id='665152'>
<a class='timestamp' href='#665152'><time timestamp='2019-04-30T06:42:00Z'>06:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jamesob: ok with me
<br>
</div>

<div class='talk op-msg' data-timestamp='1556606700' id='665153'>
<a class='timestamp' href='#665153'><time timestamp='2019-04-30T06:45:00Z'>06:45</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
jamesob / wumpus I&#x27;ve created the two. Will add related issues/card etc.
<br>
</div>

<div class='talk op-msg' data-timestamp='1556606700' id='665154'>
<a class='timestamp' href='#665154'><time timestamp='2019-04-30T06:45:00Z'>06:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: oh that&#x27;s awesome!
<br>
</div>

<div class='talk op-msg' data-timestamp='1556606820' id='665155'>
<a class='timestamp' href='#665155'><time timestamp='2019-04-30T06:47:00Z'>06:47</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Sounds like james is going to split 15606 up quite a bit, so can dump all that in there shortly
<br>
</div>

<div class='talk op-msg' data-timestamp='1556607060' id='665156'>
<a class='timestamp' href='#665156'><time timestamp='2019-04-30T06:51:00Z'>06:51</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
ryanofsky if you&#x27;ve got PRs / issues you want added to <a href="https://github.com/bitcoin/bitcoin/projects/10" class="link" target="_blank">https://github.com/bitcoin/bitcoin/projects/10</a> just dump them in here
<br>
</div>

<div class='talk op-msg' data-timestamp='1556607240' id='665157'>
<a class='timestamp' href='#665157'><time timestamp='2019-04-30T06:54:00Z'>06:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
weird test failure: <a href="https://github.com/bitcoin/bitcoin/pull/15141#issuecomment-487835088" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15141#issuecomment-487835088</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556607240' id='665158'>
<a class='timestamp' href='#665158'><time timestamp='2019-04-30T06:54:00Z'>06:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
how is &#x27;shutting down&#x27; even an error
<br>
</div>

<div class='talk op-msg' data-timestamp='1556607240' id='665159'>
<a class='timestamp' href='#665159'><time timestamp='2019-04-30T06:54:00Z'>06:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I guess, because it shuts down unexpectedly
<br>
</div>

<div class='talk op-msg' data-timestamp='1556607420' id='665160'>
<a class='timestamp' href='#665160'><time timestamp='2019-04-30T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the thread doesn&#x27;t exit in 5 seconds-should be plenty of time, normally, though it&#x27;s a slow system
<br>
</div>

<div class='talk op-msg' data-timestamp='1556611380' id='665161'>
<a class='timestamp' href='#665161'><time timestamp='2019-04-30T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
re: #15141 &quot;ValidationInvalidReason::TX_PREMATURE_SPEND is non-standard in AcceptToMemoryPoolWorker (two occurences) but invalid in Consensus::CheckTxInputs&quot; this one is pretty weird isn&#x27;t it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556611380' id='665162'>
<a class='timestamp' href='#665162'><time timestamp='2019-04-30T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/15141" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/15141</a> | Rewrite DoS interface between validation and net_processing by sdaftuar Â· Pull Request #15141 Â· bitcoin/bitcoin Â· GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1556616840' id='665163'>
<a class='timestamp' href='#665163'><time timestamp='2019-04-30T09:34:00Z'>09:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
how are things looking for 0.18.0 final today?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556617020' id='665164'>
<a class='timestamp' href='#665164'><time timestamp='2019-04-30T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus Looking ok. Discussion in #15555 has dried up a bit. #15665 is still open, but no more reports of it occurring. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1556617020' id='665165'>
<a class='timestamp' href='#665165'><time timestamp='2019-04-30T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/15555" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/15555</a> | v0.18.0 testing Â· Issue #15555 Â· bitcoin/bitcoin Â· GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1556617020' id='665166'>
<a class='timestamp' href='#665166'><time timestamp='2019-04-30T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/15665" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/15665</a> | 0.18.0 rc2 CPU spike in thread bitcoin-opencon Â· Issue #15665 Â· bitcoin/bitcoin Â· GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1556617080' id='665167'>
<a class='timestamp' href='#665167'><time timestamp='2019-04-30T09:38:00Z'>09:38</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Release is currently only 1 month &quot;overdue&quot; according to #14438 :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1556617080' id='665168'>
<a class='timestamp' href='#665168'><time timestamp='2019-04-30T09:38:00Z'>09:38</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/14438" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/14438</a> | Release schedule for 0.18.0 Â· Issue #14438 Â· bitcoin/bitcoin Â· GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1556623560' id='665169'>
<a class='timestamp' href='#665169'><time timestamp='2019-04-30T11:26:00Z'>11:26</time></a>
&lt;<span class='nick nick-4'> jamesob</span>&gt;
fanquake: thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1556623620' id='665170'>
<a class='timestamp' href='#665170'><time timestamp='2019-04-30T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
jamesob np
<br>
</div>

<div class='talk op-msg' data-timestamp='1556625060' id='665171'>
<a class='timestamp' href='#665171'><time timestamp='2019-04-30T11:51:00Z'>11:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: looks like the release notes issues were also fixed, time to tag then !
<br>
</div>

<div class='talk op-msg' data-timestamp='1556625300' id='665172'>
<a class='timestamp' href='#665172'><time timestamp='2019-04-30T11:55:00Z'>11:55</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus \o/
<br>
</div>

<div class='talk op-msg' data-timestamp='1556626320' id='665173'>
<a class='timestamp' href='#665173'><time timestamp='2019-04-30T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 1 commit to 0.18: <a href="https://github.com/bitcoin/bitcoin/compare/825ecb5758f6...2472733a24a9" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/825ecb5758f6...2472733a24a9</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556626320' id='665174'>
<a class='timestamp' href='#665174'><time timestamp='2019-04-30T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/0.18 2472733 Wladimir J. van der Laan: build: Bump version to -final
<br>
</div>

<div class='talk op-msg' data-timestamp='1556626440' id='665175'>
<a class='timestamp' href='#665175'><time timestamp='2019-04-30T12:14:00Z'>12:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed tag v0.18.0: <a href="https://github.com/bitcoin/bitcoin/compare/v0.18.0" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/v0.18.0</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556633520' id='665176'>
<a class='timestamp' href='#665176'><time timestamp='2019-04-30T14:12:00Z'>14:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 3 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/ce6762030f81...45d8b7177851" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/ce6762030f81...45d8b7177851</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556633520' id='665177'>
<a class='timestamp' href='#665177'><time timestamp='2019-04-30T14:12:00Z'>14:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 8728a66 John Newbery: [tests] fix block time in feature_pruning.py
<br>
</div>

<div class='talk op-msg' data-timestamp='1556633520' id='665178'>
<a class='timestamp' href='#665178'><time timestamp='2019-04-30T14:12:00Z'>14:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fafb55e MarcoFalke: [qa] test_runner: Move feature_pruning to base tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1556633520' id='665179'>
<a class='timestamp' href='#665179'><time timestamp='2019-04-30T14:12:00Z'>14:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 45d8b71 MarcoFalke: Merge #15696: [qa] test_runner: Move feature_pruning to base tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1556633520' id='665180'>
<a class='timestamp' href='#665180'><time timestamp='2019-04-30T14:12:00Z'>14:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #15696: [qa] test_runner: Move feature_pruning to base tests (master...1904-qaPruning) <a href="https://github.com/bitcoin/bitcoin/pull/15696" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15696</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556640900' id='665181'>
<a class='timestamp' href='#665181'><time timestamp='2019-04-30T16:15:00Z'>16:15</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/45d8b7177851...10ed4dff2447" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/45d8b7177851...10ed4dff2447</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556640900' id='665182'>
<a class='timestamp' href='#665182'><time timestamp='2019-04-30T16:15:00Z'>16:15</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 151f3e9 Russell Yanofsky: Add settings merge test to prevent regresssions
<br>
</div>

<div class='talk op-msg' data-timestamp='1556640900' id='665183'>
<a class='timestamp' href='#665183'><time timestamp='2019-04-30T16:15:00Z'>16:15</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 10ed4df MarcoFalke: Merge #15869: Add settings merge test to prevent regresssions
<br>
</div>

<div class='talk op-msg' data-timestamp='1556640900' id='665184'>
<a class='timestamp' href='#665184'><time timestamp='2019-04-30T16:15:00Z'>16:15</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #15869: Add settings merge test to prevent regresssions (master...pr/testset) <a href="https://github.com/bitcoin/bitcoin/pull/15869" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15869</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556647320' id='665185'>
<a class='timestamp' href='#665185'><time timestamp='2019-04-30T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #15926: tinyformat: Add format_no_throw (master...1904-tinyformatNoThrow) <a href="https://github.com/bitcoin/bitcoin/pull/15926" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15926</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556652420' id='665186'>
<a class='timestamp' href='#665186'><time timestamp='2019-04-30T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 6 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/10ed4dff2447...2c35fe623813" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/10ed4dff2447...2c35fe623813</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556652420' id='665187'>
<a class='timestamp' href='#665187'><time timestamp='2019-04-30T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 188ca75 James O&#x27;Beirne: disable HAVE_THREAD_LOCAL on unreliable platforms
<br>
</div>

<div class='talk op-msg' data-timestamp='1556652420' id='665188'>
<a class='timestamp' href='#665188'><time timestamp='2019-04-30T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ae5f2b6 James O&#x27;Beirne: threads: introduce util/threadnames, refactor thread naming
<br>
</div>

<div class='talk op-msg' data-timestamp='1556652420' id='665189'>
<a class='timestamp' href='#665189'><time timestamp='2019-04-30T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ddd95cc James O&#x27;Beirne: tests: add threadutil tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1556652480' id='665190'>
<a class='timestamp' href='#665190'><time timestamp='2019-04-30T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #15849: Thread names in logs and deadlock debug tools (master...2018-05-threadnames-take-2) <a href="https://github.com/bitcoin/bitcoin/pull/15849" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15849</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556654040' id='665191'>
<a class='timestamp' href='#665191'><time timestamp='2019-04-30T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
MarcoFalke, re 15881 what about having it set via parameter, and specific build in CI runs with it as mainnet default?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556654100' id='665192'>
<a class='timestamp' href='#665192'><time timestamp='2019-04-30T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I realize there are alrady too many cooks
<br>
</div>

<div class='talk op-msg' data-timestamp='1556655300' id='665193'>
<a class='timestamp' href='#665193'><time timestamp='2019-04-30T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #15858: Faster tests with topological mempool rpc sync ðŸš€ (master...1904-qaSync) <a href="https://github.com/bitcoin/bitcoin/pull/15858" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15858</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556655480' id='665194'>
<a class='timestamp' href='#665194'><time timestamp='2019-04-30T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
what was wrong with the #15858 approach? I liked keeping the change contained to the tests only
<br>
</div>

<div class='talk op-msg' data-timestamp='1556655480' id='665195'>
<a class='timestamp' href='#665195'><time timestamp='2019-04-30T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/15858" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/15858</a> | Faster tests with topological mempool rpc sync ðŸš€ by MarcoFalke Â· Pull Request #15858 Â· bitcoin/bitcoin Â· GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1556655600' id='665196'>
<a class='timestamp' href='#665196'><time timestamp='2019-04-30T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
confused why it got closed
<br>
</div>

<div class='talk op-msg' data-timestamp='1556655600' id='665197'>
<a class='timestamp' href='#665197'><time timestamp='2019-04-30T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #15927: [tests] log thread names by default in functional tests (master...2019-04-log-threads-tests) <a href="https://github.com/bitcoin/bitcoin/pull/15927" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15927</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556656680' id='665198'>
<a class='timestamp' href='#665198'><time timestamp='2019-04-30T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
wumpus: I prefer 15881 since it&#x27;s a smaller deviation from what happens for tx propogation on mainnet
<br>
</div>

<div class='talk op-msg' data-timestamp='1556657640' id='665199'>
<a class='timestamp' href='#665199'><time timestamp='2019-04-30T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
#define stacktop(i)  (stack.at(stack.size()+(i)))
<br>
</div>

<div class='talk op-msg' data-timestamp='1556657700' id='665200'>
<a class='timestamp' href='#665200'><time timestamp='2019-04-30T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
LLVM likes to cast i to unsigned and do the addition with an overflow :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1556657700' id='665201'>
<a class='timestamp' href='#665201'><time timestamp='2019-04-30T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
should we just cast stack.size() to ssize_t or something else?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556657880' id='665202'>
<a class='timestamp' href='#665202'><time timestamp='2019-04-30T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
wumpus: FYI, 0.18.0 release PR for BitcoinCore.org is here: <a href="https://github.com/bitcoin-core/bitcoincore.org/pull/649" class="link" target="_blank">https://github.com/bitcoin-core/bitcoincore.org/pull/649</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556657940' id='665203'>
<a class='timestamp' href='#665203'><time timestamp='2019-04-30T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
it&#x27;s not really up to LLVM, the C integer promotion rules are fixed
<br>
</div>

<div class='talk op-msg' data-timestamp='1556657940' id='665204'>
<a class='timestamp' href='#665204'><time timestamp='2019-04-30T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
it should depend only on the integer types involved
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658000' id='665205'>
<a class='timestamp' href='#665205'><time timestamp='2019-04-30T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
unfortunately they are extremely arcane
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658000' id='665206'>
<a class='timestamp' href='#665206'><time timestamp='2019-04-30T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
can we do a search replace stacktop(-i) -&gt; stacktop(i) and then use (stack.at(stack.size()-(i)))
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658120' id='665207'>
<a class='timestamp' href='#665207'><time timestamp='2019-04-30T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
it seems like the offending rule is &quot;If the operand that has unsigned integer type has rank greater than or equal to the rank of the type of the other operand, the operand with signed integer type is converted to the type of the operand with unsigned integer type.&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658180' id='665208'>
<a class='timestamp' href='#665208'><time timestamp='2019-04-30T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
so if you do math with a size_t (64 bit unsigned) and an int (32-bit signed) you get flattened
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658180' id='665209'>
<a class='timestamp' href='#665209'><time timestamp='2019-04-30T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: if we do that, let&#x27;s rename stacktop
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658180' id='665210'>
<a class='timestamp' href='#665210'><time timestamp='2019-04-30T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
it&#x27;s a weird rule.
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658180' id='665211'>
<a class='timestamp' href='#665211'><time timestamp='2019-04-30T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
but casting to ssize_t should solve it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658180' id='665212'>
<a class='timestamp' href='#665212'><time timestamp='2019-04-30T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*(stack.rbegin() + i) also works :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658240' id='665213'>
<a class='timestamp' href='#665213'><time timestamp='2019-04-30T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
+ -i ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658240' id='665214'>
<a class='timestamp' href='#665214'><time timestamp='2019-04-30T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
with positive i, i mean
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658240' id='665215'>
<a class='timestamp' href='#665215'><time timestamp='2019-04-30T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, no; *(stack.rbegin() + (i - 1))
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658240' id='665216'>
<a class='timestamp' href='#665216'><time timestamp='2019-04-30T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
positive i is a hazard
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658300' id='665217'>
<a class='timestamp' href='#665217'><time timestamp='2019-04-30T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658300' id='665218'>
<a class='timestamp' href='#665218'><time timestamp='2019-04-30T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
too easy to accidentally merge or backport with an invisible error
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658300' id='665219'>
<a class='timestamp' href='#665219'><time timestamp='2019-04-30T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s fair
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658300' id='665220'>
<a class='timestamp' href='#665220'><time timestamp='2019-04-30T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
this seems like something you could check statically, if it&#x27;s generally a constant
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658300' id='665221'>
<a class='timestamp' href='#665221'><time timestamp='2019-04-30T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gwillen: it&#x27;s not always a constant
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658360' id='665222'>
<a class='timestamp' href='#665222'><time timestamp='2019-04-30T21:06:00Z'>21:06</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
anyway, keeping the negative i should be harmless
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658780' id='665223'>
<a class='timestamp' href='#665223'><time timestamp='2019-04-30T21:13:00Z'>21:13</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
luke-jr: how did it come to pass that this is coming up -- did core change, or did LLVM change?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658780' id='665224'>
<a class='timestamp' href='#665224'><time timestamp='2019-04-30T21:13:00Z'>21:13</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gwillen: -fsanitize=undefined
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658840' id='665225'>
<a class='timestamp' href='#665225'><time timestamp='2019-04-30T21:14:00Z'>21:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
(apparently while we have a Travis job for it, we also have a suppressions file to hide all our existing issues!)
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658840' id='665226'>
<a class='timestamp' href='#665226'><time timestamp='2019-04-30T21:14:00Z'>21:14</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
that&#x27;s odd... there shouldn&#x27;t be anything undefined about that, should there? Does it cite chapter and verse?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658840' id='665227'>
<a class='timestamp' href='#665227'><time timestamp='2019-04-30T21:14:00Z'>21:14</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
I can imagine it getting the wrong answer, but not being undefined
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658900' id='665228'>
<a class='timestamp' href='#665228'><time timestamp='2019-04-30T21:15:00Z'>21:15</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
and it sounds like it&#x27;s not in fact getting the wrong answer in practice or we&#x27;d have hit this before?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658900' id='665229'>
<a class='timestamp' href='#665229'><time timestamp='2019-04-30T21:15:00Z'>21:15</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gwillen: overflows are undefined behaviour
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658900' id='665230'>
<a class='timestamp' href='#665230'><time timestamp='2019-04-30T21:15:00Z'>21:15</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
not unsigned overflows
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658900' id='665231'>
<a class='timestamp' href='#665231'><time timestamp='2019-04-30T21:15:00Z'>21:15</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
only signed
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658900' id='665232'>
<a class='timestamp' href='#665232'><time timestamp='2019-04-30T21:15:00Z'>21:15</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
if it gets converted to unsigned first it should be well-defined
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658900' id='665233'>
<a class='timestamp' href='#665233'><time timestamp='2019-04-30T21:15:00Z'>21:15</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
UBSan says unsigned are undefined too &lt;.&lt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1556658960' id='665234'>
<a class='timestamp' href='#665234'><time timestamp='2019-04-30T21:16:00Z'>21:16</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
maybe that&#x27;s why it was suppressed...
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659020' id='665235'>
<a class='timestamp' href='#665235'><time timestamp='2019-04-30T21:17:00Z'>21:17</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
see e.g. <a href="https://stackoverflow.com/questions/18195715/why-is-unsigned-integer-overflow-defined-behavior-but-signed-integer-overflow-is" class="link" target="_blank">https://stackoverflow.com/questions/18195715/why-is-unsigned-integer-overflow-defined-behavior-but-signed-integer-overflow-is</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659020' id='665236'>
<a class='timestamp' href='#665236'><time timestamp='2019-04-30T21:17:00Z'>21:17</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
can you pastebin the ubsan complaint?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659080' id='665237'>
<a class='timestamp' href='#665237'><time timestamp='2019-04-30T21:18:00Z'>21:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: by default ubsan does not warn on unsigned overflow, but there is an optional flag to enable them
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659080' id='665238'>
<a class='timestamp' href='#665238'><time timestamp='2019-04-30T21:18:00Z'>21:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
they&#x27;re not undefined behavior, but a common red flag
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659140' id='665239'>
<a class='timestamp' href='#665239'><time timestamp='2019-04-30T21:19:00Z'>21:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gwillen: it scrolled out of my terminal - and I&#x27;m not entirely sure how I triggered it, since I wasn&#x27;t running on mainnet â˜º
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659140' id='665240'>
<a class='timestamp' href='#665240'><time timestamp='2019-04-30T21:19:00Z'>21:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: odd, I didn&#x27;t explicitly set any flag
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659140' id='665241'>
<a class='timestamp' href='#665241'><time timestamp='2019-04-30T21:19:00Z'>21:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the core build system enables it afaik
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659140' id='665242'>
<a class='timestamp' href='#665242'><time timestamp='2019-04-30T21:19:00Z'>21:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659200' id='665243'>
<a class='timestamp' href='#665243'><time timestamp='2019-04-30T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
is the cast from negative to unsigned also well-defined?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659200' id='665244'>
<a class='timestamp' href='#665244'><time timestamp='2019-04-30T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
script/interpreter.cpp:922:42: runtime error: unsigned integer overflow: 2 + 18446744073709551615 cannot be represented in type &#x27;unsigned long&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659200' id='665245'>
<a class='timestamp' href='#665245'><time timestamp='2019-04-30T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
SUMMARY: UndefinedBehaviorSanitizer: undefined-behavior script/interpreter.cpp:922:42 in 
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659200' id='665246'>
<a class='timestamp' href='#665246'><time timestamp='2019-04-30T21:20:00Z'>21:20</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gwillen: ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659320' id='665247'>
<a class='timestamp' href='#665247'><time timestamp='2019-04-30T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: cast from signed to unsigned is well defined
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659320' id='665248'>
<a class='timestamp' href='#665248'><time timestamp='2019-04-30T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the other way isn&#x27;t afaik
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659320' id='665249'>
<a class='timestamp' href='#665249'><time timestamp='2019-04-30T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
typically avoids answering these questions by being explicit on anything that could reasonably be undefined :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659500' id='665250'>
<a class='timestamp' href='#665250'><time timestamp='2019-04-30T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
yeah so it seems like we are in one of the corners of integer promotion that is weird but not bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659560' id='665251'>
<a class='timestamp' href='#665251'><time timestamp='2019-04-30T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
wherein C promotes from signed to unsigned in a way that creates apparent integer overflow that actually gives the correct answer consistently
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659560' id='665252'>
<a class='timestamp' href='#665252'><time timestamp='2019-04-30T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
casting to ssize_t will probably get rid of the weirdness but will cause undefined behavior (I think) if the stack has more than 2 billion elements, which I expect is not a concern
<br>
</div>

<div class='talk op-msg' data-timestamp='1556659620' id='665253'>
<a class='timestamp' href='#665253'><time timestamp='2019-04-30T21:27:00Z'>21:27</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
actually if size_t is 64 bit it would need to be a lot more than that
<br>
</div>

<div class='talk op-msg' data-timestamp='1556660700' id='665254'>
<a class='timestamp' href='#665254'><time timestamp='2019-04-30T21:45:00Z'>21:45</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gwillen: ssize_t isn&#x27;t guaranteed to be large enough for all sizes?
<br>
</div>

<div class='talk op-msg' data-timestamp='1556662140' id='665255'>
<a class='timestamp' href='#665255'><time timestamp='2019-04-30T22:09:00Z'>22:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
gwillen: we are misusing sanitization tools
<br>
</div>

<div class='talk op-msg' data-timestamp='1556662140' id='665256'>
<a class='timestamp' href='#665256'><time timestamp='2019-04-30T22:09:00Z'>22:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and using suppression files to cover up the misuse
<br>
</div>

<div class='talk op-msg' data-timestamp='1556662200' id='665257'>
<a class='timestamp' href='#665257'><time timestamp='2019-04-30T22:10:00Z'>22:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and then probably just giving up on making useful changes, to cover up the difficulty of updating the suppressions.
<br>
</div>

<div class='talk op-msg' data-timestamp='1556662380' id='665258'>
<a class='timestamp' href='#665258'><time timestamp='2019-04-30T22:13:00Z'>22:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
there are a ton of sanitizers which are available which trigger on behavior that is sometimes (even only rarely) a mistake, and turning them on means either (1) you leave them producing false positives which you ignore, causing you to miss real reports, (2) go change the code in ways that silence them, often lowering code quality or even adding bugs, (3) suppress them, and then deal with the 
<br>
</div>

<div class='talk op-msg' data-timestamp='1556662380' id='665259'>
<a class='timestamp' href='#665259'><time timestamp='2019-04-30T22:13:00Z'>22:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
returning every time you add a new instance of the same idiom or refactor something
<br>
</div>

<div class='talk op-msg' data-timestamp='1556662440' id='665260'>
<a class='timestamp' href='#665260'><time timestamp='2019-04-30T22:14:00Z'>22:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
In commercial tools like coverity these concerns are addressed by not emitting warnings for anything that has a high false positive rate (even if that misses some true positives), and by havinga nice database that lets you track suppressions, keep notes on them, and which manages to survive refactoring most of the time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1556664900' id='665261'>
<a class='timestamp' href='#665261'><time timestamp='2019-04-30T22:55:00Z'>22:55</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #15881: net: Send txs without delay on regtest (master...1904-txRelayRegtest) <a href="https://github.com/bitcoin/bitcoin/pull/15881" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15881</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1556666580' id='665262'>
<a class='timestamp' href='#665262'><time timestamp='2019-04-30T23:23:00Z'>23:23</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
gmaxwell: *nod*, that all makes sense
<br>
</div>

</div>
</section>

</body>
</html>
