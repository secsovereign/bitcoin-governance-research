<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-06-20
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-06-20' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:24 UTC</pre>
<pre><a href="/bitcoin-core-dev/2017-05-20">&lt;</a><span class='header'>    June 2017     </span><a href="/bitcoin-core-dev/2017-07-20">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;             <a class="" href="/bitcoin-core-dev/2017-06-01">1</a>  <a class="" href="/bitcoin-core-dev/2017-06-02">2</a>  <a class="" href="/bitcoin-core-dev/2017-06-03">3</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-06-04">4</a>  <a class="" href="/bitcoin-core-dev/2017-06-05">5</a>  <a class="" href="/bitcoin-core-dev/2017-06-06">6</a>  <a class="" href="/bitcoin-core-dev/2017-06-07">7</a>  <a class="" href="/bitcoin-core-dev/2017-06-08">8</a>  <a class="" href="/bitcoin-core-dev/2017-06-09">9</a> <a class="" href="/bitcoin-core-dev/2017-06-10">10</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-06-11">11</a> <a class="" href="/bitcoin-core-dev/2017-06-12">12</a> <a class="" href="/bitcoin-core-dev/2017-06-13">13</a> <a class="" href="/bitcoin-core-dev/2017-06-14">14</a> <a class="" href="/bitcoin-core-dev/2017-06-15">15</a> <a class="" href="/bitcoin-core-dev/2017-06-16">16</a> <a class="" href="/bitcoin-core-dev/2017-06-17">17</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-06-18">18</a> <a class="" href="/bitcoin-core-dev/2017-06-19">19</a> <a class="current" href="/bitcoin-core-dev/2017-06-20">20</a> <a class="" href="/bitcoin-core-dev/2017-06-21">21</a> <a class="" href="/bitcoin-core-dev/2017-06-22">22</a> <a class="" href="/bitcoin-core-dev/2017-06-23">23</a> <a class="" href="/bitcoin-core-dev/2017-06-24">24</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-06-25">25</a> <a class="" href="/bitcoin-core-dev/2017-06-26">26</a> <a class="" href="/bitcoin-core-dev/2017-06-27">27</a> <a class="" href="/bitcoin-core-dev/2017-06-28">28</a> <a class="" href="/bitcoin-core-dev/2017-06-29">29</a> <a class="" href="/bitcoin-core-dev/2017-06-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1497938520' id='551646'>
<a class='timestamp' href='#551646'><time timestamp='2017-06-20T06:02:00Z'>06:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
travis cancels jobs: &quot; This job ran on our Trusty, sudo: required environment which will be updated on Wednesday, June 21st. Please add group: edge to your .travis.yml file to try the new images and check our blog for more details about this update.&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1497938580' id='551647'>
<a class='timestamp' href='#551647'><time timestamp='2017-06-20T06:03:00Z'>06:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Seems only here: <a href="https://github.com/bitcoin/bitcoin/pull/10633" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10633</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497940260' id='551648'>
<a class='timestamp' href='#551648'><time timestamp='2017-06-20T06:31:00Z'>06:31</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
has anyone tested that? will edge just work? :x
<br>
</div>

<div class='talk op-msg' data-timestamp='1497944820' id='551649'>
<a class='timestamp' href='#551649'><time timestamp='2017-06-20T07:47:00Z'>07:47</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
jup, tested it a few days ago. No issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1497945000' id='551650'>
<a class='timestamp' href='#551650'><time timestamp='2017-06-20T07:50:00Z'>07:50</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
btw jonasschnelli. Do you think would be hard to get machine readable urls for your gitian builds?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497945000' id='551651'>
<a class='timestamp' href='#551651'><time timestamp='2017-06-20T07:50:00Z'>07:50</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Maybe /nightly/2017/06/19/ or /nightly/latest/
<br>
</div>

<div class='talk op-msg' data-timestamp='1497945000' id='551652'>
<a class='timestamp' href='#551652'><time timestamp='2017-06-20T07:50:00Z'>07:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. I can do that...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497945060' id='551653'>
<a class='timestamp' href='#551653'><time timestamp='2017-06-20T07:51:00Z'>07:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I already did that for PRs: <a href="https://bitcoin.jonasschnelli.ch/build/PR/10628" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/build/PR/10628</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497945060' id='551654'>
<a class='timestamp' href='#551654'><time timestamp='2017-06-20T07:51:00Z'>07:51</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Awesome, thx.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497945060' id='551655'>
<a class='timestamp' href='#551655'><time timestamp='2017-06-20T07:51:00Z'>07:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(redirects to the newest build id of that PR)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497945720' id='551656'>
<a class='timestamp' href='#551656'><time timestamp='2017-06-20T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] dimitris-t closed pull request #10634: Fixed typos in optionsdialog.ui (master...patch-2) <a href="https://github.com/bitcoin/bitcoin/pull/10634" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10634</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497945780' id='551657'>
<a class='timestamp' href='#551657'><time timestamp='2017-06-20T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] dimitris-t closed pull request #10635: Fixed typo in rpcconsole.cpp (master...patch-3) <a href="https://github.com/bitcoin/bitcoin/pull/10635" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10635</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497946320' id='551658'>
<a class='timestamp' href='#551658'><time timestamp='2017-06-20T08:12:00Z'>08:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
MarcoFalke: okay. Works: <a href="https://bitcoin.jonasschnelli.ch/build/nightly/latest" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/build/nightly/latest</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497946320' id='551659'>
<a class='timestamp' href='#551659'><time timestamp='2017-06-20T08:12:00Z'>08:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
<a href="https://bitcoin.jonasschnelli.ch/build/nightly/2017/06/17" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/build/nightly/2017/06/17</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497959820' id='551660'>
<a class='timestamp' href='#551660'><time timestamp='2017-06-20T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #10636: [qa] util: Check return code after closing bitcoind proc (master...Mf1706-qaTraceback) <a href="https://github.com/bitcoin/bitcoin/pull/10636" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10636</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497977940' id='551661'>
<a class='timestamp' href='#551661'><time timestamp='2017-06-20T16:59:00Z'>16:59</time></a>
&lt;<span class='nick nick-7'> sturles</span>&gt;
If I add a watchonly address to Bitcoin Core, and it receives a transaction output, and add the private key for the same address later.  Will the output become spendable without a rescan?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497979800' id='551662'>
<a class='timestamp' href='#551662'><time timestamp='2017-06-20T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-7'> ryanofsky_</span>&gt;
sturles, it should unless there is a bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1497981720' id='551663'>
<a class='timestamp' href='#551663'><time timestamp='2017-06-20T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-7'> sturles</span>&gt;
ryanofsky_: Cool!  I&#x27;ll try to use it with pull request #9728 in a semi-hot wallet.  Just add private keys as required to fill up.  Avoiding a bitcoin transaction to refill the hot wallet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497981720' id='551664'>
<a class='timestamp' href='#551664'><time timestamp='2017-06-20T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9728" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9728</a> | Can create Watch Only HD wallet with -hdwatchonly by NicolasDorier · Pull Request #9728 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1497982140' id='551665'>
<a class='timestamp' href='#551665'><time timestamp='2017-06-20T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] achow101 opened pull request #10637: Coin Selection with Murch&#x27;s algorithm (master...bnb-coin-select) <a href="https://github.com/bitcoin/bitcoin/pull/10637" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10637</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497983160' id='551666'>
<a class='timestamp' href='#551666'><time timestamp='2017-06-20T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
sturles, if you&#x27;re doing p2sh you may need to pass the redeemscript as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1497983880' id='551667'>
<a class='timestamp' href='#551667'><time timestamp='2017-06-20T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
cfields: any idea how it is possible that passing libbitcoin_util before libbitcoin_wallet on the linking cmdline works?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497983880' id='551668'>
<a class='timestamp' href='#551668'><time timestamp='2017-06-20T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
achow101, so your PR doesn&#x27;t touch the looping or target behavior, just coin selection itself?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497983880' id='551669'>
<a class='timestamp' href='#551669'><time timestamp='2017-06-20T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1497983940' id='551670'>
<a class='timestamp' href='#551670'><time timestamp='2017-06-20T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
cfields: wallet.cpp uses FastRandomContext&#x27;s constructor, which is defined in libbitcoin_util...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497983940' id='551671'>
<a class='timestamp' href='#551671'><time timestamp='2017-06-20T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
instagibbs: It needs to use effective values and access to fee rate so I only borrowed a few parts of your effective value PR for those
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984000' id='551672'>
<a class='timestamp' href='#551672'><time timestamp='2017-06-20T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa_: they&#x27;re all tangled up. iirc last time i checked, there was no ordering that wasn&#x27;t circular.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984060' id='551673'>
<a class='timestamp' href='#551673'><time timestamp='2017-06-20T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
i worked out how it was working at that point, let me refresh my memory
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984120' id='551674'>
<a class='timestamp' href='#551674'><time timestamp='2017-06-20T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
but we&#x27;re not passing any grouping to the linker, so it shouldn&#x27;t be able to resolve circular dependencies?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984180' id='551675'>
<a class='timestamp' href='#551675'><time timestamp='2017-06-20T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
i can swap util and wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984180' id='551676'>
<a class='timestamp' href='#551676'><time timestamp='2017-06-20T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
but there are other pairs that i can&#x27;t swap
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984300' id='551677'>
<a class='timestamp' href='#551677'><time timestamp='2017-06-20T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
achow101, trying to decide how dangerous that is on its own. If it results in no change, but too high of a fee due to the looping, we&#x27;ll dump all that value into fee :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984300' id='551678'>
<a class='timestamp' href='#551678'><time timestamp='2017-06-20T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
knapsack specializes in exact matches, so red flags are going up for me
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984360' id='551679'>
<a class='timestamp' href='#551679'><time timestamp='2017-06-20T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
instagibbs: the idea is that the extra fee will not be more than what it would cost to create + spend change
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984420' id='551680'>
<a class='timestamp' href='#551680'><time timestamp='2017-06-20T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
sipa_, hold on let me get the issue im speaking of
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984420' id='551681'>
<a class='timestamp' href='#551681'><time timestamp='2017-06-20T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
ok     
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984420' id='551682'>
<a class='timestamp' href='#551682'><time timestamp='2017-06-20T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10247" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10247</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984420' id='551683'>
<a class='timestamp' href='#551683'><time timestamp='2017-06-20T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
basically what happens is if it loops it keeps accumulating what it thinks is &quot;enough absolute fee&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984420' id='551684'>
<a class='timestamp' href='#551684'><time timestamp='2017-06-20T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
so on subsequent attempts the number of inputs may shrink dramatically, but still results in large fee
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984480' id='551685'>
<a class='timestamp' href='#551685'><time timestamp='2017-06-20T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
if there&#x27;s a change output, we handle it gracefully now by bumping the change
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984480' id='551686'>
<a class='timestamp' href='#551686'><time timestamp='2017-06-20T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
no change, we still dump
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984480' id='551687'>
<a class='timestamp' href='#551687'><time timestamp='2017-06-20T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I attempted to address this in <a href="https://github.com/bitcoin/bitcoin/pull/10333" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10333</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984480' id='551688'>
<a class='timestamp' href='#551688'><time timestamp='2017-06-20T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
instagibbs: i see
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984540' id='551689'>
<a class='timestamp' href='#551689'><time timestamp='2017-06-20T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
interesting. how would we know if that&#x27;s a problem with the different coin selection?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984540' id='551690'>
<a class='timestamp' href='#551690'><time timestamp='2017-06-20T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
that sounds like an existing issue that we need to fix, and perhaps the knapsack coin selection could make it worse
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984540' id='551691'>
<a class='timestamp' href='#551691'><time timestamp='2017-06-20T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
well it only rears it&#x27;s head on &quot;exact matches&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984540' id='551692'>
<a class='timestamp' href='#551692'><time timestamp='2017-06-20T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
yep that ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984540' id='551693'>
<a class='timestamp' href='#551693'><time timestamp='2017-06-20T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
imo #10333 is pretty easy to review, and is 0.15 possible if people start reviewing
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984600' id='551694'>
<a class='timestamp' href='#551694'><time timestamp='2017-06-20T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10333" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10333</a> | [wallet] fee fixes: always create change, adjust value, and p… by instagibbs · Pull Request #10333 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984660' id='551695'>
<a class='timestamp' href='#551695'><time timestamp='2017-06-20T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
instagibbs: so since the new coin selection is supposed to get &quot;exact matches&quot; more frequently, we could be running into the high fees problem?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984720' id='551696'>
<a class='timestamp' href='#551696'><time timestamp='2017-06-20T18:52:00Z'>18:52</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
if it loops a few times, failing to &quot;get enough&quot;, then when it does, it&#x27;s more likely to get an exact match, then vastly overpay fees. This tends to happen on wallets with lots of utxos
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984720' id='551697'>
<a class='timestamp' href='#551697'><time timestamp='2017-06-20T18:52:00Z'>18:52</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
the PR you got the commits from should also fix this issue more holistically, but larger review surface
<br>
</div>

<div class='talk op-msg' data-timestamp='1497984960' id='551698'>
<a class='timestamp' href='#551698'><time timestamp='2017-06-20T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa_: just finished what I was working on. looking and refreshing now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497985020' id='551699'>
<a class='timestamp' href='#551699'><time timestamp='2017-06-20T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
instagibbs: I thought about taking the entire rewritten loop from the effective value PR but I wasn&#x27;t sure if that would break anything or use stuff that you changed that I didn&#x27;t grab
<br>
</div>

<div class='talk op-msg' data-timestamp='1497985500' id='551700'>
<a class='timestamp' href='#551700'><time timestamp='2017-06-20T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa_: ah, i believe it works because of the libs already added. eg. FastRandomContext was already emitted by util for server
<br>
</div>

<div class='talk op-msg' data-timestamp='1497985560' id='551701'>
<a class='timestamp' href='#551701'><time timestamp='2017-06-20T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(I recently discussed a strategy for nuking wallet&#x27;s deps on server with jonasschnelli, i believe he&#x27;s begun PRing some of the necessary changes)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986040' id='551702'>
<a class='timestamp' href='#551702'><time timestamp='2017-06-20T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
cfields: But that PR is a very first beginning... it would require much more work
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986100' id='551703'>
<a class='timestamp' href='#551703'><time timestamp='2017-06-20T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli: sure. I just wanted to point out that there&#x27;s at least <u>_some_</u> desire to work out the dependency mess :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986100' id='551704'>
<a class='timestamp' href='#551704'><time timestamp='2017-06-20T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. Lets clean this up
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986340' id='551705'>
<a class='timestamp' href='#551705'><time timestamp='2017-06-20T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli: what&#x27;s the PR you&#x27;ve already opened? I need to make sure to review/ack
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986340' id='551706'>
<a class='timestamp' href='#551706'><time timestamp='2017-06-20T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: at least based on the design I understand, when achows&#x27; patch does something there will be no looping because by design it picked a solution that had enough fee.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986340' id='551707'>
<a class='timestamp' href='#551707'><time timestamp='2017-06-20T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
cfields: #10517
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986340' id='551708'>
<a class='timestamp' href='#551708'><time timestamp='2017-06-20T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10517" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10517</a> | Factor out CCoinsView based AreInputsStandard/IsWitnessStandard by jonasschnelli · Pull Request #10517 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986340' id='551709'>
<a class='timestamp' href='#551709'><time timestamp='2017-06-20T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(needs rebase)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986340' id='551710'>
<a class='timestamp' href='#551710'><time timestamp='2017-06-20T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli: thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986400' id='551711'>
<a class='timestamp' href='#551711'><time timestamp='2017-06-20T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: it takes the original target feerate as an argument and does all its calculations with effective fees, and only allows overpayment to the extent that costs equal or less than the future change spend that it avoided.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986460' id='551712'>
<a class='timestamp' href='#551712'><time timestamp='2017-06-20T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
gmaxwell, ok let me re-read, because that&#x27;s what my PR is supposed to be doing, heh
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986520' id='551713'>
<a class='timestamp' href='#551713'><time timestamp='2017-06-20T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: no, your PR does it on everything; not just in the exact match case. Which I raised the dust inflation concern above. (which it seems no one is interested in doing anything about...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986520' id='551714'>
<a class='timestamp' href='#551714'><time timestamp='2017-06-20T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
This doesn&#x27;t have the dust inflation concern, since it only has an effect when there is no change (thus no increase in the number of outputs).
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986700' id='551715'>
<a class='timestamp' href='#551715'><time timestamp='2017-06-20T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
cfields: FastRandomContext iirc is only in libbitcoin_util... how is wallet able to use it? wallet is passed later on the cmdline
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986700' id='551716'>
<a class='timestamp' href='#551716'><time timestamp='2017-06-20T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
To reiterate: the concern I have with your effective rate change is that it will make wallets be unlikely to select low effective rate coins and never select negative effective rate coins. But will still create change, which seems almost certian to cause an increase in UTXO set bloat.  And this effect is mostly tangential from the problem you&#x27;re trying to solve, which is related to non-convexity
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986700' id='551717'>
<a class='timestamp' href='#551717'><time timestamp='2017-06-20T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
 of the fee search. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986760' id='551718'>
<a class='timestamp' href='#551718'><time timestamp='2017-06-20T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
gmaxwell, I removed that a long time ago
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986760' id='551719'>
<a class='timestamp' href='#551719'><time timestamp='2017-06-20T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
anyways, let met do a fuller review, I&#x27;m getting myself turned around
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986820' id='551720'>
<a class='timestamp' href='#551720'><time timestamp='2017-06-20T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa_: it&#x27;s used by net_processing in server, which marks it as undefined. Then util resolves it. Then it&#x27;s already resolved for wallet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986880' id='551721'>
<a class='timestamp' href='#551721'><time timestamp='2017-06-20T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
cfields: ugh
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986880' id='551722'>
<a class='timestamp' href='#551722'><time timestamp='2017-06-20T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
ok     
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986940' id='551723'>
<a class='timestamp' href='#551723'><time timestamp='2017-06-20T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: ah, I had lost track of the fact that you had PRed a change that addressed the overpayment without doing the effective rate thing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986940' id='551724'>
<a class='timestamp' href='#551724'><time timestamp='2017-06-20T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I&#x27;m confused :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1497986940' id='551725'>
<a class='timestamp' href='#551725'><time timestamp='2017-06-20T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
achow101, wallet code makes people scared and afraid, don&#x27;t worry
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987000' id='551726'>
<a class='timestamp' href='#551726'><time timestamp='2017-06-20T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: this new PR creates dust change. :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987060' id='551727'>
<a class='timestamp' href='#551727'><time timestamp='2017-06-20T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
gmaxwell, it tries &quot;relatively hard&quot; to avoid making something less than MIN_FINAL_CHANGE
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987060' id='551728'>
<a class='timestamp' href='#551728'><time timestamp='2017-06-20T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
unfortunately without something smarter we just have to pick something and shoot for it
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987060' id='551729'>
<a class='timestamp' href='#551729'><time timestamp='2017-06-20T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
open to ideas though
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987120' id='551730'>
<a class='timestamp' href='#551730'><time timestamp='2017-06-20T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gmaxwell: which PR creates dust change? Mine?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987120' id='551731'>
<a class='timestamp' href='#551731'><time timestamp='2017-06-20T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: instagibbs
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987120' id='551732'>
<a class='timestamp' href='#551732'><time timestamp='2017-06-20T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
#10333
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987180' id='551733'>
<a class='timestamp' href='#551733'><time timestamp='2017-06-20T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10333" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10333</a> | [wallet] fee fixes: always create change, adjust value, and p… by instagibbs · Pull Request #10333 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987180' id='551734'>
<a class='timestamp' href='#551734'><time timestamp='2017-06-20T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ah, ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987240' id='551735'>
<a class='timestamp' href='#551735'><time timestamp='2017-06-20T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
achow101, <a href="https://github.com/bitcoin/bitcoin/pull/10333/files#diff-b2bb174788c7409b671c46ccc86034bdR2630" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10333/files#diff-b2bb174788c7409b671c46ccc86034bdR2630</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987240' id='551736'>
<a class='timestamp' href='#551736'><time timestamp='2017-06-20T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It could use murch&#x27;s hurestic to cut that down further. (Murch&#x27;s hurestic is that you can throw away change if it&#x27;s less that FeeRate*(34+4+1+34+74)  (cost to create and spend that change output).
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987240' id='551737'>
<a class='timestamp' href='#551737'><time timestamp='2017-06-20T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
so there&#x27;s the &quot;I will enver make an output this small&quot; level which could be that ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987240' id='551738'>
<a class='timestamp' href='#551738'><time timestamp='2017-06-20T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(with adjustments for different script types)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987300' id='551739'>
<a class='timestamp' href='#551739'><time timestamp='2017-06-20T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
then there&#x27;s also the &quot;I&#x27;m willing to try again&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987300' id='551740'>
<a class='timestamp' href='#551740'><time timestamp='2017-06-20T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
and get something bigger or an exact match
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987300' id='551741'>
<a class='timestamp' href='#551741'><time timestamp='2017-06-20T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
toss vs rety, I mean
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987360' id='551742'>
<a class='timestamp' href='#551742'><time timestamp='2017-06-20T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: the patch achow submitted is fairly close to guarenteed to give an &#x27;exact&#x27; (uses that hurestic) match if one is possible.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987420' id='551743'>
<a class='timestamp' href='#551743'><time timestamp='2017-06-20T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
so if we simply fail to get an exact match we should likely grab some buffer more we want as change, whatever that is
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987780' id='551744'>
<a class='timestamp' href='#551744'><time timestamp='2017-06-20T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: what instagibbs is talking about at this start of this conversation is related to how fees are handled by selecting coins, finding we need to pay a larger fee than we selected, then going back with a bigger target.  What can happen now is that on one iteration you select a zillion inputs, decide you need a lot of fee, then go back, but this time your higher targets means you select onl
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987840' id='551745'>
<a class='timestamp' href='#551745'><time timestamp='2017-06-20T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
y a couple inputs, but you got close enough to your fee-inflated-target that you do not include a change output... and then you overpay fee.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987900' id='551746'>
<a class='timestamp' href='#551746'><time timestamp='2017-06-20T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: and I think what you are intending to accomplish is completely orthorgonal with that defect. (perhaps the implementation isn&#x27;t-- but the idea is)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987900' id='551747'>
<a class='timestamp' href='#551747'><time timestamp='2017-06-20T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gmaxwell: oh, ok.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497987960' id='551748'>
<a class='timestamp' href='#551748'><time timestamp='2017-06-20T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gmaxwell: as the implementation is right now, I don&#x27;t think it will exit the loop if a BnB algo passes though
<br>
</div>

<div class='talk op-msg' data-timestamp='1497988020' id='551749'>
<a class='timestamp' href='#551749'><time timestamp='2017-06-20T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
also, something else to consider is if the BnB algo fails on one loop so it falls back to the original algo, but then on the next pass (with the fee regtarget thing) the BnB algo passes. I&#x27;m not sure what would happen in that case
<br>
</div>

<div class='talk op-msg' data-timestamp='1497988140' id='551750'>
<a class='timestamp' href='#551750'><time timestamp='2017-06-20T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
lots of fee, I think
<br>
</div>

<div class='talk op-msg' data-timestamp='1497988260' id='551751'>
<a class='timestamp' href='#551751'><time timestamp='2017-06-20T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
achow101: thats the &quot;perhaps the implemetation isn&#x27;t-- but the idea is&quot; part.  Probably the BnB should just be skipped after the first iteration.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497989040' id='551752'>
<a class='timestamp' href='#551752'><time timestamp='2017-06-20T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: I think your 10333 is more attractive in light of achow&#x27;s PR, assuming they were correctly combined.  Since his PR will do a pretty good job of finding a changless solution, if there is one, I think it&#x27;s fine to make the rest of the behavior just assume there will be change.   Though perhaps I gave achow bad advice on the integration.  I suggested just replacing out the selectcoins p
<br>
</div>

<div class='talk op-msg' data-timestamp='1497989040' id='551753'>
<a class='timestamp' href='#551753'><time timestamp='2017-06-20T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
art in order to avoid having to handle coincontrol and fee-from-amount. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1497989100' id='551754'>
<a class='timestamp' href='#551754'><time timestamp='2017-06-20T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
combined naievely it will be pretty bad. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1497991320' id='551755'>
<a class='timestamp' href='#551755'><time timestamp='2017-06-20T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli: ping. still around?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497991440' id='551756'>
<a class='timestamp' href='#551756'><time timestamp='2017-06-20T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-1'> gaf_</span>&gt;
is any reason to worry about segwitx2 has about 77~ or who cares about it, because this donest affecting anything?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497991920' id='551757'>
<a class='timestamp' href='#551757'><time timestamp='2017-06-20T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
gmaxwell, if we limit the BnB stuff to the first step, this removes any need for 10333 to correct any additional bad behavior
<br>
</div>

<div class='talk op-msg' data-timestamp='1497992520' id='551758'>
<a class='timestamp' href='#551758'><time timestamp='2017-06-20T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
If not here, where can I discuss this?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497992520' id='551759'>
<a class='timestamp' href='#551759'><time timestamp='2017-06-20T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
I have a set of directories, sandbox-1493974463, sandbox-1494226733, and the like.  I have set up a git server, and put the earliest sandbox under git control following, e.g., <a href="https://git-scm.com/book/en/v2/Git-on-the-Server-Setting-Up-the-Server" class="link" target="_blank">https://git-scm.com/book/en/v2/Git-on-the-Server-Setting-Up-the-Server</a>  Now I want to move to the next sandbox.  I assume I need to do git {init, remote add,  ...} but I am a little wobbly about &quot;pull&quot;  The goal is to add the changes in the 2nd sandb
<br>
</div>

<div class='talk op-msg' data-timestamp='1497993960' id='551760'>
<a class='timestamp' href='#551760'><time timestamp='2017-06-20T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #10638: [rpc] Clarify pblock assumption via an assertion (master...nnonce) <a href="https://github.com/bitcoin/bitcoin/pull/10638" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10638</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497994140' id='551761'>
<a class='timestamp' href='#551761'><time timestamp='2017-06-20T21:29:00Z'>21:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: hm? perhaps I don&#x27;t get your comment.  Are you saying 10333 is not needed post achow making his pr run only on the first step?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497994740' id='551762'>
<a class='timestamp' href='#551762'><time timestamp='2017-06-20T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
gmaxwell, I don&#x27;t think it&#x27;s needed for the first BnB run, but just as needed otherwise as before
<br>
</div>

<div class='talk op-msg' data-timestamp='1497995400' id='551763'>
<a class='timestamp' href='#551763'><time timestamp='2017-06-20T21:50:00Z'>21:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: okay agreed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497995460' id='551764'>
<a class='timestamp' href='#551764'><time timestamp='2017-06-20T21:51:00Z'>21:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: question I have is with all those changes, should the exact match attempt just be taken out of the loop?  it will mean duplicating recipent pays fes logic.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497995940' id='551765'>
<a class='timestamp' href='#551765'><time timestamp='2017-06-20T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
instagibbs: I was also thinking of another strategy for your loop logic that I think may be better and more clear:  target=amount; 1. Assume change. Attempt selection. if it fails is there a saved solution? if so return that.  Compute fees? if not increase target to current fees, goto 1.  Can change be elimiated (&lt;murch hurestic) if so do so and return solution. If not, is the change above the M
<br>
</div>

<div class='talk op-msg' data-timestamp='1497995940' id='551766'>
<a class='timestamp' href='#551766'><time timestamp='2017-06-20T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
IN_CHANGE? if so then stop and take that one. If not, save the solution, and target=max(amount+fee+min_change, target*1.01) and goto 1. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1497996000' id='551767'>
<a class='timestamp' href='#551767'><time timestamp='2017-06-20T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so basically it guarentees the target goes up with every iteration, and only gives up and uses the dusty solution if its already tried raising the target beyond the wallet&#x27;s capacity. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1497996060' id='551768'>
<a class='timestamp' href='#551768'><time timestamp='2017-06-20T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it doesn&#x27;t make any real attempt to avoid change, since I assume achow101&#x27;s first step handles that.. though if it happens to find itself with an acceptably changeless solution then it will accept it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497997020' id='551769'>
<a class='timestamp' href='#551769'><time timestamp='2017-06-20T22:17:00Z'>22:17</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
&quot;should the exact match attempt just be taken out of the loop&quot; had this exact thought. It&#x27;s something to look at imo.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497997140' id='551770'>
<a class='timestamp' href='#551770'><time timestamp='2017-06-20T22:19:00Z'>22:19</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
what would a &quot;saved solution&quot; be in this case?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497997140' id='551771'>
<a class='timestamp' href='#551771'><time timestamp='2017-06-20T22:19:00Z'>22:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
saved solution would just be the transaction, one where the solution was viable but had non-eliminatable change under the min_change target.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497997200' id='551772'>
<a class='timestamp' href='#551772'><time timestamp='2017-06-20T22:20:00Z'>22:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so we keep looking (with ever higher targets) after it, hoping to get something that passes, but if we don&#x27;t we can return the dusty one.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497997320' id='551773'>
<a class='timestamp' href='#551773'><time timestamp='2017-06-20T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ah, so if &lt; dust, accept, &lt; min_change, save and try again higher, loop
<br>
</div>

<div class='talk op-msg' data-timestamp='1497997380' id='551774'>
<a class='timestamp' href='#551774'><time timestamp='2017-06-20T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea, so long as the loop increases enough each iteration it&#x27;ll terminate in acceptable time. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1497997440' id='551775'>
<a class='timestamp' href='#551775'><time timestamp='2017-06-20T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so, e.g. when the wallet doesn&#x27;t have enough in it to meet min_change you&#x27;ll go for that the next iteration, find your selection fails, then take the slightly dusty one from the last go.
<br>
</div>

<div class='talk op-msg' data-timestamp='1498000620' id='551776'>
<a class='timestamp' href='#551776'><time timestamp='2017-06-20T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/c38f540298f0...d636f3943d39" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/c38f540298f0...d636f3943d39</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1498000620' id='551777'>
<a class='timestamp' href='#551777'><time timestamp='2017-06-20T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 4265bf3 practicalswift: Remove unreachable or otherwise redundant code
<br>
</div>

<div class='talk op-msg' data-timestamp='1498000620' id='551778'>
<a class='timestamp' href='#551778'><time timestamp='2017-06-20T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master d636f39 Pieter Wuille: Merge #10536: Remove unreachable or otherwise redundant code...
<br>
</div>

<div class='talk op-msg' data-timestamp='1498000620' id='551779'>
<a class='timestamp' href='#551779'><time timestamp='2017-06-20T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #10536: Remove unreachable or otherwise redundant code (master...unreachable) <a href="https://github.com/bitcoin/bitcoin/pull/10536" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10536</a>
<br>
</div>

</div>
</section>

</body>
</html>
