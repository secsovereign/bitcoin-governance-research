<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2016-04-11
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2016-04-11' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:27 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-03-11">&lt;</a><span class='header'>    April 2016    </span><a href="/bitcoin-core-dev/2016-05-11">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                <a class="" href="/bitcoin-core-dev/2016-04-01">1</a>  <a class="" href="/bitcoin-core-dev/2016-04-02">2</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-04-03">3</a>  <a class="" href="/bitcoin-core-dev/2016-04-04">4</a>  <a class="" href="/bitcoin-core-dev/2016-04-05">5</a>  <a class="" href="/bitcoin-core-dev/2016-04-06">6</a>  <a class="" href="/bitcoin-core-dev/2016-04-07">7</a>  <a class="" href="/bitcoin-core-dev/2016-04-08">8</a>  <a class="" href="/bitcoin-core-dev/2016-04-09">9</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-04-10">10</a> <a class="current" href="/bitcoin-core-dev/2016-04-11">11</a> <a class="" href="/bitcoin-core-dev/2016-04-12">12</a> <a class="" href="/bitcoin-core-dev/2016-04-13">13</a> <a class="" href="/bitcoin-core-dev/2016-04-14">14</a> <a class="" href="/bitcoin-core-dev/2016-04-15">15</a> <a class="" href="/bitcoin-core-dev/2016-04-16">16</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-04-17">17</a> <a class="" href="/bitcoin-core-dev/2016-04-18">18</a> <a class="" href="/bitcoin-core-dev/2016-04-19">19</a> <a class="" href="/bitcoin-core-dev/2016-04-20">20</a> <a class="" href="/bitcoin-core-dev/2016-04-21">21</a> <a class="" href="/bitcoin-core-dev/2016-04-22">22</a> <a class="" href="/bitcoin-core-dev/2016-04-23">23</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-04-24">24</a> <a class="" href="/bitcoin-core-dev/2016-04-25">25</a> <a class="" href="/bitcoin-core-dev/2016-04-26">26</a> <a class="" href="/bitcoin-core-dev/2016-04-27">27</a> <a class="" href="/bitcoin-core-dev/2016-04-28">28</a> <a class="" href="/bitcoin-core-dev/2016-04-29">29</a> <a class="" href="/bitcoin-core-dev/2016-04-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1460337720' id='462372'>
<a class='timestamp' href='#462372'><time timestamp='2016-04-11T01:22:00Z'>01:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
anyone around who might have a node which restarts occasionally, could you grep for &quot;prev block not found&quot; in debug.log and report the frequency?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460337840' id='462373'>
<a class='timestamp' href='#462373'><time timestamp='2016-04-11T01:24:00Z'>01:24</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
BlueMatt: I&#x27;ve got it twive
<br>
</div>

<div class='talk op-msg' data-timestamp='1460337840' id='462374'>
<a class='timestamp' href='#462374'><time timestamp='2016-04-11T01:24:00Z'>01:24</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
*twice
<br>
</div>

<div class='talk op-msg' data-timestamp='1460337840' id='462375'>
<a class='timestamp' href='#462375'><time timestamp='2016-04-11T01:24:00Z'>01:24</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
across how many days/restarts?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460337960' id='462376'>
<a class='timestamp' href='#462376'><time timestamp='2016-04-11T01:26:00Z'>01:26</time></a>
&lt;<span class='nick nick-11'> GitHub121</span>&gt;
[bitcoin] gmaxwell opened pull request #7856: Only send one GetAddr response per connection. (master...addr_once) <a href="https://github.com/bitcoin/bitcoin/pull/7856" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7856</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460337960' id='462377'>
<a class='timestamp' href='#462377'><time timestamp='2016-04-11T01:26:00Z'>01:26</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
since march 10th and 51 restarts
<br>
</div>

<div class='talk op-msg' data-timestamp='1460338020' id='462378'>
<a class='timestamp' href='#462378'><time timestamp='2016-04-11T01:27:00Z'>01:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
achow101: thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1460358180' id='462379'>
<a class='timestamp' href='#462379'><time timestamp='2016-04-11T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Holly! The Github traffic on weekends is extremely intense. Catch up after a weekend (people where supposed to not work on weekend,.. once) needs 1-2h! :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1460358240' id='462380'>
<a class='timestamp' href='#462380'><time timestamp='2016-04-11T07:04:00Z'>07:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
weekends are highly overratee
<br>
</div>

<div class='talk op-msg' data-timestamp='1460358240' id='462381'>
<a class='timestamp' href='#462381'><time timestamp='2016-04-11T07:04:00Z'>07:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
weekends are highly overrated
<br>
</div>

<div class='talk op-msg' data-timestamp='1460358480' id='462382'>
<a class='timestamp' href='#462382'><time timestamp='2016-04-11T07:08:00Z'>07:08</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yah! Tell that my wife. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1460359560' id='462383'>
<a class='timestamp' href='#462383'><time timestamp='2016-04-11T07:26:00Z'>07:26</time></a>
&lt;<span class='nick nick-15'> GitHub84</span>&gt;
[bitcoin] promag opened pull request #7857: Add fee to fundrawtransaction (master...enhancement/add-fee-to-fundrawtransaction) <a href="https://github.com/bitcoin/bitcoin/pull/7857" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7857</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460361660' id='462384'>
<a class='timestamp' href='#462384'><time timestamp='2016-04-11T08:01:00Z'>08:01</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmm, the sendheaders stuff is pretty bitcoin-core-specific
<br>
</div>

<div class='talk op-msg' data-timestamp='1460361660' id='462385'>
<a class='timestamp' href='#462385'><time timestamp='2016-04-11T08:01:00Z'>08:01</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
we DoS a node for sending us a header that doesnt connect to our chain, because bitcoin core keeps track of what it thinks its peers have for headers (and assumes they never throw away headers)
<br>
</div>

<div class='talk op-msg' data-timestamp='1460361660' id='462386'>
<a class='timestamp' href='#462386'><time timestamp='2016-04-11T08:01:00Z'>08:01</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1460361720' id='462387'>
<a class='timestamp' href='#462387'><time timestamp='2016-04-11T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
if, for example, a peer didnt want to keep track of what it thought we had in our block-headers-tree, it couldnt implement sendheaders
<br>
</div>

<div class='talk op-msg' data-timestamp='1460361900' id='462388'>
<a class='timestamp' href='#462388'><time timestamp='2016-04-11T08:05:00Z'>08:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you can always send all headers along the new branch you&#x27;re switching to
<br>
</div>

<div class='talk op-msg' data-timestamp='1460361960' id='462389'>
<a class='timestamp' href='#462389'><time timestamp='2016-04-11T08:06:00Z'>08:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
also, we assume a node doesnt have a given set of headers based on only the most recently received or sent hash/header...this works fine for non-forked chains, but if the chain forks at the tip, we may very well fall back to sending invs
<br>
</div>

<div class='talk op-msg' data-timestamp='1460361960' id='462390'>
<a class='timestamp' href='#462390'><time timestamp='2016-04-11T08:06:00Z'>08:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: but we dont do this
<br>
</div>

<div class='talk op-msg' data-timestamp='1460361960' id='462391'>
<a class='timestamp' href='#462391'><time timestamp='2016-04-11T08:06:00Z'>08:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: also, why not just remove the DoS?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362020' id='462392'>
<a class='timestamp' href='#462392'><time timestamp='2016-04-11T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: and if it doesnt connect, just send a getheaders for further-back headers
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362020' id='462393'>
<a class='timestamp' href='#462393'><time timestamp='2016-04-11T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which case are you talking about, a non-core peer sending headers to core, or the other way around?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362020' id='462394'>
<a class='timestamp' href='#462394'><time timestamp='2016-04-11T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
in this case I&#x27;m talking about core-to-core
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362020' id='462395'>
<a class='timestamp' href='#462395'><time timestamp='2016-04-11T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
from my (not so in depth) reading, this looks like it can very easily fall back to invs if the chain is forked near the tip
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362080' id='462396'>
<a class='timestamp' href='#462396'><time timestamp='2016-04-11T08:08:00Z'>08:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it should send all new headers along the new branch
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362080' id='462397'>
<a class='timestamp' href='#462397'><time timestamp='2016-04-11T08:08:00Z'>08:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
unless there are too many, in which case it intentionally falls back to using invs
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362080' id='462398'>
<a class='timestamp' href='#462398'><time timestamp='2016-04-11T08:08:00Z'>08:08</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
eg we just got a new block on our chaintip B (based on A), but we only know they have C (which we may not even have, but lets say its based on A)
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362080' id='462399'>
<a class='timestamp' href='#462399'><time timestamp='2016-04-11T08:08:00Z'>08:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
then we send the header for B
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362140' id='462400'>
<a class='timestamp' href='#462400'><time timestamp='2016-04-11T08:09:00Z'>08:09</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I dont think it will? It will only ever send invs/headers that were added to vBlockHashesTonnounce
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362140' id='462401'>
<a class='timestamp' href='#462401'><time timestamp='2016-04-11T08:09:00Z'>08:09</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
no, because B wont be in vBlockHashesToAnnounce
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362140' id='462402'>
<a class='timestamp' href='#462402'><time timestamp='2016-04-11T08:09:00Z'>08:09</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
only D (based on B) will be
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362200' id='462403'>
<a class='timestamp' href='#462403'><time timestamp='2016-04-11T08:10:00Z'>08:10</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
in any case, it is much more flexible to handle the headers-msg-that-didnt-connect case by requesting a headers with our locator and see what they come back with instead of marking that peer a DoS
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362260' id='462404'>
<a class='timestamp' href='#462404'><time timestamp='2016-04-11T08:11:00Z'>08:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
would make it much easier for other implementors (they can skip all block inv sending, though that would be a bit less effecient)
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362320' id='462405'>
<a class='timestamp' href='#462405'><time timestamp='2016-04-11T08:12:00Z'>08:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: eg <a href="https://github.com/TheBlueMatt/bitcoin/commits/1daf94f540592345dca5818321a28996fe7e04fd" class="link" target="_blank">https://github.com/TheBlueMatt/bitcoin/commits/1daf94f540592345dca5818321a28996fe7e04fd</a> 
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362320' id='462406'>
<a class='timestamp' href='#462406'><time timestamp='2016-04-11T08:12:00Z'>08:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362440' id='462407'>
<a class='timestamp' href='#462407'><time timestamp='2016-04-11T08:14:00Z'>08:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hmm, i&#x27;d still like to understand the use case
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362560' id='462408'>
<a class='timestamp' href='#462408'><time timestamp='2016-04-11T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: the use-case is simpler code for other implementors (or maybe us in the future)
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362560' id='462409'>
<a class='timestamp' href='#462409'><time timestamp='2016-04-11T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we have D-B-A as tip, a peer has C-A as tip
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362560' id='462410'>
<a class='timestamp' href='#462410'><time timestamp='2016-04-11T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: they could even skip the inv logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362560' id='462411'>
<a class='timestamp' href='#462411'><time timestamp='2016-04-11T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: that is a separate bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362560' id='462412'>
<a class='timestamp' href='#462412'><time timestamp='2016-04-11T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
let&#x27;s talk one thing at a timr
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362620' id='462413'>
<a class='timestamp' href='#462413'><time timestamp='2016-04-11T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but the peer will have the headers for D and B already
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362620' id='462414'>
<a class='timestamp' href='#462414'><time timestamp='2016-04-11T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
eh, B
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362620' id='462415'>
<a class='timestamp' href='#462415'><time timestamp='2016-04-11T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so just sending D should be fine?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362680' id='462416'>
<a class='timestamp' href='#462416'><time timestamp='2016-04-11T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
this only works if either the last header we sent them or the last header they sent us is B
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362680' id='462417'>
<a class='timestamp' href='#462417'><time timestamp='2016-04-11T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s possible that B was sent just as an inv
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362680' id='462418'>
<a class='timestamp' href='#462418'><time timestamp='2016-04-11T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and the peer hasn&#x27;t getdata&#x27;d yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362740' id='462419'>
<a class='timestamp' href='#462419'><time timestamp='2016-04-11T08:19:00Z'>08:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
no, its worse
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362740' id='462420'>
<a class='timestamp' href='#462420'><time timestamp='2016-04-11T08:19:00Z'>08:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
they could have had B already from another peer
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362740' id='462421'>
<a class='timestamp' href='#462421'><time timestamp='2016-04-11T08:19:00Z'>08:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
well, yea, i suppose it would be an inv, then
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362740' id='462422'>
<a class='timestamp' href='#462422'><time timestamp='2016-04-11T08:19:00Z'>08:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but they wouldnt request it
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362740' id='462423'>
<a class='timestamp' href='#462423'><time timestamp='2016-04-11T08:19:00Z'>08:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we would still have either sent an inv or a header, indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362800' id='462424'>
<a class='timestamp' href='#462424'><time timestamp='2016-04-11T08:20:00Z'>08:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
anyway, minor bug, just means if chain is forked when you first connect to a peer, you will probably send block as inv instead of header
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362860' id='462425'>
<a class='timestamp' href='#462425'><time timestamp='2016-04-11T08:21:00Z'>08:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
butttt, this does feed into my more general protocol suggestion/question here, which is that we seem to have half-assed the sendheaders stuff....I can get that if you&#x27;re sending a lot you might prefer invs over headers, but if you&#x27;re only sending a few, this semi-duplicated logic doesnt make sense to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362860' id='462426'>
<a class='timestamp' href='#462426'><time timestamp='2016-04-11T08:21:00Z'>08:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
why not just always use headers and if you got headers that you cant connect, treat them as invs and request more headers
<br>
</div>

<div class='talk op-msg' data-timestamp='1460362980' id='462427'>
<a class='timestamp' href='#462427'><time timestamp='2016-04-11T08:23:00Z'>08:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
anyway, bedtime for me
<br>
</div>

<div class='talk op-msg' data-timestamp='1460367120' id='462428'>
<a class='timestamp' href='#462428'><time timestamp='2016-04-11T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-7'> GitHub33</span>&gt;
[bitcoin] jl2012 opened pull request #7858: Add jl2012 public key for gitian build (master...patch-9) <a href="https://github.com/bitcoin/bitcoin/pull/7858" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7858</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460371560' id='462429'>
<a class='timestamp' href='#462429'><time timestamp='2016-04-11T10:46:00Z'>10:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh, that&#x27;s too bad, I saw a &quot;Merge button&quot; setting under repository settings, I thought because we use a custom script we could disable it entirely. Unfortunately &quot;You must select at least one option&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1460371560' id='462430'>
<a class='timestamp' href='#462430'><time timestamp='2016-04-11T10:46:00Z'>10:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
going to request this
<br>
</div>

<div class='talk op-msg' data-timestamp='1460371740' id='462431'>
<a class='timestamp' href='#462431'><time timestamp='2016-04-11T10:49:00Z'>10:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: that will be interesting :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1460371860' id='462432'>
<a class='timestamp' href='#462432'><time timestamp='2016-04-11T10:51:00Z'>10:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: hah! and remember that if you take all time zones into account, I think there&#x27;s only one full day it&#x27;s &#x27;weekend&#x27; everywhere
<br>
</div>

<div class='talk op-msg' data-timestamp='1460371920' id='462433'>
<a class='timestamp' href='#462433'><time timestamp='2016-04-11T10:52:00Z'>10:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes it&#x27;d be nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1460372220' id='462434'>
<a class='timestamp' href='#462434'><time timestamp='2016-04-11T10:57:00Z'>10:57</time></a>
&lt;<span class='nick nick-13'> GitHub183</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/065c6b443f3e...934f2b5e7693" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/065c6b443f3e...934f2b5e7693</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460372220' id='462435'>
<a class='timestamp' href='#462435'><time timestamp='2016-04-11T10:57:00Z'>10:57</time></a>
&lt;<span class='nick nick-13'> GitHub183</span>&gt;
bitcoin/master 64c22be Johnson Lau: Add jl2012 public key for gitian build
<br>
</div>

<div class='talk op-msg' data-timestamp='1460372220' id='462436'>
<a class='timestamp' href='#462436'><time timestamp='2016-04-11T10:57:00Z'>10:57</time></a>
&lt;<span class='nick nick-13'> GitHub183</span>&gt;
bitcoin/master 934f2b5 Wladimir J. van der Laan: Merge #7858: Add jl2012 public key for gitian build...
<br>
</div>

<div class='talk op-msg' data-timestamp='1460372280' id='462437'>
<a class='timestamp' href='#462437'><time timestamp='2016-04-11T10:58:00Z'>10:58</time></a>
&lt;<span class='nick nick-7'> GitHub114</span>&gt;
[bitcoin] laanwj closed pull request #7858: Add jl2012 public key for gitian build (master...patch-9) <a href="https://github.com/bitcoin/bitcoin/pull/7858" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7858</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460372520' id='462438'>
<a class='timestamp' href='#462438'><time timestamp='2016-04-11T11:02:00Z'>11:02</time></a>
&lt;<span class='nick nick-15'> GitHub100</span>&gt;
[bitcoin] laanwj pushed 2 new commits to 0.12: <a href="https://github.com/bitcoin/bitcoin/compare/465d30915cd3...9779e1e1f320" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/465d30915cd3...9779e1e1f320</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460372520' id='462439'>
<a class='timestamp' href='#462439'><time timestamp='2016-04-11T11:02:00Z'>11:02</time></a>
&lt;<span class='nick nick-15'> GitHub100</span>&gt;
bitcoin/0.12 de7c34c BtcDrak: Add missing link to BIP113
<br>
</div>

<div class='talk op-msg' data-timestamp='1460372520' id='462440'>
<a class='timestamp' href='#462440'><time timestamp='2016-04-11T11:02:00Z'>11:02</time></a>
&lt;<span class='nick nick-12'> GitHub192</span>&gt;
[bitcoin] laanwj closed pull request #7852: [0.12] Add missing reference to release notes (0.12...bip113) <a href="https://github.com/bitcoin/bitcoin/pull/7852" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7852</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460372520' id='462441'>
<a class='timestamp' href='#462441'><time timestamp='2016-04-11T11:02:00Z'>11:02</time></a>
&lt;<span class='nick nick-15'> GitHub100</span>&gt;
bitcoin/0.12 9779e1e Wladimir J. van der Laan: Merge #7852: [0.12] Add missing reference to release notes...
<br>
</div>

<div class='talk op-msg' data-timestamp='1460375940' id='462442'>
<a class='timestamp' href='#462442'><time timestamp='2016-04-11T11:59:00Z'>11:59</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
wumpus, you pointed to rc1 in the source on mailing list, FYI :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1460375940' id='462443'>
<a class='timestamp' href='#462443'><time timestamp='2016-04-11T11:59:00Z'>11:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes I sent a mail after it correcting it right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460375940' id='462444'>
<a class='timestamp' href='#462444'><time timestamp='2016-04-11T11:59:00Z'>11:59</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
maybe my email is slow
<br>
</div>

<div class='talk op-msg' data-timestamp='1460376000' id='462445'>
<a class='timestamp' href='#462445'><time timestamp='2016-04-11T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
<a href="https://lists.linuxfoundation.org/pipermail/bitcoin-core-dev/2016-April/000002.html" class="link" target="_blank">https://lists.linuxfoundation.org/pipermail/bitcoin-core-dev/2016-April/000002.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460376000' id='462446'>
<a class='timestamp' href='#462446'><time timestamp='2016-04-11T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
oh i see it, maybe I checked email while asleep :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1460376360' id='462447'>
<a class='timestamp' href='#462447'><time timestamp='2016-04-11T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
:)
<br>
</div>

<div class='talk op-msg' data-timestamp='1460376600' id='462448'>
<a class='timestamp' href='#462448'><time timestamp='2016-04-11T12:10:00Z'>12:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, you&#x27;re a sleepmailer too?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460378760' id='462449'>
<a class='timestamp' href='#462449'><time timestamp='2016-04-11T12:46:00Z'>12:46</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
with new baby you never quite know when you checked things fully awake
<br>
</div>

<div class='talk op-msg' data-timestamp='1460382780' id='462450'>
<a class='timestamp' href='#462450'><time timestamp='2016-04-11T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-8'> GitHub23</span>&gt;
[bitcoin] jonasschnelli closed pull request #7831: [CLI] refactor wallets RPC JSON conversions (master...2016/04/cli_conversion) <a href="https://github.com/bitcoin/bitcoin/pull/7831" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7831</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460385960' id='462451'>
<a class='timestamp' href='#462451'><time timestamp='2016-04-11T14:46:00Z'>14:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
hmm... these guys: <a href="https://twitter.com/kawalgrover/status/719535585153716224" class="link" target="_blank">https://twitter.com/kawalgrover/status/719535585153716224</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460386620' id='462452'>
<a class='timestamp' href='#462452'><time timestamp='2016-04-11T14:57:00Z'>14:57</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Is CScriptNum(0) bitwise equivalent to OP_0?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460386680' id='462453'>
<a class='timestamp' href='#462453'><time timestamp='2016-04-11T14:58:00Z'>14:58</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
aka CScriptNum(0) OP_0 OP_EQUAL would push an OP_TRUE on the stack?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460386680' id='462454'>
<a class='timestamp' href='#462454'><time timestamp='2016-04-11T14:58:00Z'>14:58</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
sanity check for my own sake..
<br>
</div>

<div class='talk op-msg' data-timestamp='1460386800' id='462455'>
<a class='timestamp' href='#462455'><time timestamp='2016-04-11T15:00:00Z'>15:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CScriptNum(0) is a C++ expression
<br>
</div>

<div class='talk op-msg' data-timestamp='1460386800' id='462456'>
<a class='timestamp' href='#462456'><time timestamp='2016-04-11T15:00:00Z'>15:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
OP_0 is a script operator
<br>
</div>

<div class='talk op-msg' data-timestamp='1460386860' id='462457'>
<a class='timestamp' href='#462457'><time timestamp='2016-04-11T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
OP_0 pushes an empty bytearray onto the execution stack
<br>
</div>

<div class='talk op-msg' data-timestamp='1460386860' id='462458'>
<a class='timestamp' href='#462458'><time timestamp='2016-04-11T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which, if fed as input to CScriptNum will indeed produce the same as feeding it the number 0
<br>
</div>

<div class='talk op-msg' data-timestamp='1460386980' id='462459'>
<a class='timestamp' href='#462459'><time timestamp='2016-04-11T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
interesting. Is that just something we have to live with since Satoshi put it their or have we put that in after the fact? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1460386980' id='462460'>
<a class='timestamp' href='#462460'><time timestamp='2016-04-11T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
but the little script I gave about would evaluate to OP_FALSE then since an empty byte vector != 0 right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460387040' id='462461'>
<a class='timestamp' href='#462461'><time timestamp='2016-04-11T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Seems like CScriptNum(OP_0) is a little strange.. surprised that even type checks 
<br>
</div>

<div class='talk op-msg' data-timestamp='1460387280' id='462462'>
<a class='timestamp' href='#462462'><time timestamp='2016-04-11T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Chris_Stewart_5: &quot;CScriotNum(0) OP_0 OP_EQUAL&quot; has no meaning, i cannot answer your question
<br>
</div>

<div class='talk op-msg' data-timestamp='1460387340' id='462463'>
<a class='timestamp' href='#462463'><time timestamp='2016-04-11T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CScriotNum(0) is C++
<br>
</div>

<div class='talk op-msg' data-timestamp='1460387340' id='462464'>
<a class='timestamp' href='#462464'><time timestamp='2016-04-11T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it is not something that makes sense in a bitcoin script
<br>
</div>

<div class='talk op-msg' data-timestamp='1460387940' id='462465'>
<a class='timestamp' href='#462465'><time timestamp='2016-04-11T15:19:00Z'>15:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Chris_Stewart_5: CScriptNum(OP_0) unfortunately works due to C++ type conversion (OP_0 is part of the opcodes enum, and gets automatically converted to an int when passing to CScriptNum&#x27;s constructor
<br>
</div>

<div class='talk op-msg' data-timestamp='1460388180' id='462466'>
<a class='timestamp' href='#462466'><time timestamp='2016-04-11T15:23:00Z'>15:23</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
sipa: is the number 0 and the empty byte vector bitwise equivalent in Script? I think that is what I was really trying to ask 
<br>
</div>

<div class='talk op-msg' data-timestamp='1460388180' id='462467'>
<a class='timestamp' href='#462467'><time timestamp='2016-04-11T15:23:00Z'>15:23</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
I&#x27;m just trying to understand how exactly it is handled, it seems in the interpreter these lines are how it is interpreted
<br>
</div>

<div class='talk op-msg' data-timestamp='1460388180' id='462468'>
<a class='timestamp' href='#462468'><time timestamp='2016-04-11T15:23:00Z'>15:23</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/blob/master/src/script/interpreter.cpp#L290-L294" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/script/interpreter.cpp#L290-L294</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460388240' id='462469'>
<a class='timestamp' href='#462469'><time timestamp='2016-04-11T15:24:00Z'>15:24</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
I&#x27;m not sure how the idea of 0 is handled in most PLs, is it represented as 0x00 or just an empty byte vector... I guess i&#x27;ll have to more research on that later :-) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1460388360' id='462470'>
<a class='timestamp' href='#462470'><time timestamp='2016-04-11T15:26:00Z'>15:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Chris_Stewart_5: in most languages, numbers and byte arrays are different data types, so the question does not even arise
<br>
</div>

<div class='talk op-msg' data-timestamp='1460388420' id='462471'>
<a class='timestamp' href='#462471'><time timestamp='2016-04-11T15:27:00Z'>15:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but in Scriot, yes, an empty stack elemented is interpreted as tje number 0, when fed to ancoperator that expects a number
<br>
</div>

<div class='talk op-msg' data-timestamp='1460388480' id='462472'>
<a class='timestamp' href='#462472'><time timestamp='2016-04-11T15:28:00Z'>15:28</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Thanks! 
<br>
</div>

<div class='talk op-msg' data-timestamp='1460389260' id='462473'>
<a class='timestamp' href='#462473'><time timestamp='2016-04-11T15:41:00Z'>15:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there are other valid serializations for 0, though.
<br>
</div>

<div class='talk op-msg' data-timestamp='1460390160' id='462474'>
<a class='timestamp' href='#462474'><time timestamp='2016-04-11T15:56:00Z'>15:56</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
sipa: Are you planning on doing something similar to tx_valid/invalid.json as you did with your recent pull request?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460390220' id='462475'>
<a class='timestamp' href='#462475'><time timestamp='2016-04-11T15:57:00Z'>15:57</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
wrt to script_valid/invalid.json
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401020' id='462476'>
<a class='timestamp' href='#462476'><time timestamp='2016-04-11T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: sipa: i was looking at 7840, and i think i must not understand gmaxwell&#x27;s comment about &quot;by eliminating queued entries from the mempool response and responding only at trickle time, this makes the mempool no longer leak transaction arrival order information...&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401080' id='462477'>
<a class='timestamp' href='#462477'><time timestamp='2016-04-11T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
it seemed to me that if we are responding to mempool messages only at trickle time, then we might as well include everything and clear the relay queue for that peer instead?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401140' id='462478'>
<a class='timestamp' href='#462478'><time timestamp='2016-04-11T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sdaftuar: that would allow you to bypass the rate limiting by continuously requesting mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401200' id='462479'>
<a class='timestamp' href='#462479'><time timestamp='2016-04-11T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
you already bypass the rate limit via the mempool results itself though.
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401200' id='462480'>
<a class='timestamp' href='#462480'><time timestamp='2016-04-11T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401200' id='462481'>
<a class='timestamp' href='#462481'><time timestamp='2016-04-11T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but with my approach, you can learn about more than just 35 transactions or whatever
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401260' id='462482'>
<a class='timestamp' href='#462482'><time timestamp='2016-04-11T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
At least my view is that it&#x27;s not necessary to enforce the limit in that case. The limit is there to soften traffic surges when floods of new transactions come in. If you&#x27;re making a mempool request, you clearly don&#x27;t care. ... the alernative would be to add the mempool to the inv to send set and subject it to the rate limiter... but that would make mempool requests rather slow. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401260' id='462483'>
<a class='timestamp' href='#462483'><time timestamp='2016-04-11T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401500' id='462484'>
<a class='timestamp' href='#462484'><time timestamp='2016-04-11T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so if we&#x27;re not concerned about rate limiting being weakened by a mempool-attacker, is there any downside to responding with everything?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401620' id='462485'>
<a class='timestamp' href='#462485'><time timestamp='2016-04-11T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think it should respond with everything*, and remove them from the set-to-send as it goes.   (*ignoring my general complaint about there existing any P2P message that sends megabytes of response to a single query)
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401680' id='462486'>
<a class='timestamp' href='#462486'><time timestamp='2016-04-11T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
ok that makes sense to me, though i don&#x27;t know if there&#x27;s any point to relaying something that has been evicted in between deciding to relay and trying to relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401680' id='462487'>
<a class='timestamp' href='#462487'><time timestamp='2016-04-11T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
it&#x27;s an unlikely edge case regardless
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401680' id='462488'>
<a class='timestamp' href='#462488'><time timestamp='2016-04-11T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It probably shouldn&#x27;t relay it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401740' id='462489'>
<a class='timestamp' href='#462489'><time timestamp='2016-04-11T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
actually, with the rate limiting, we should probably remove things that are mined or evicted prior to relay, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401740' id='462490'>
<a class='timestamp' href='#462490'><time timestamp='2016-04-11T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
it&#x27;s conceivable that you could have a big backlog if someone dumped their mempool at you
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401860' id='462491'>
<a class='timestamp' href='#462491'><time timestamp='2016-04-11T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: related to that, I&#x27;m looking to moving all the filtering to just-in-time  <a href="https://people.xiph.org/~greg/temp/0001-Just-in-time-inventory-filtering.patch" class="link" target="_blank">https://people.xiph.org/~greg/temp/0001-Just-in-time-inventory-filtering.patch</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401860' id='462492'>
<a class='timestamp' href='#462492'><time timestamp='2016-04-11T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Not a PR yet because I wanted pieter&#x27;s input before going and ripping out the feerate from the RelayTransaction prototype everywhere.
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401920' id='462493'>
<a class='timestamp' href='#462493'><time timestamp='2016-04-11T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So that applies the bloom and fee-filter right before relaying, not on the queue... so that effects of changing these filters is not delayed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401920' id='462494'>
<a class='timestamp' href='#462494'><time timestamp='2016-04-11T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
that seems nice, and makes the code clearer too i suspect
<br>
</div>

<div class='talk op-msg' data-timestamp='1460401980' id='462495'>
<a class='timestamp' href='#462495'><time timestamp='2016-04-11T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i guess at the expense of slightly more memory, especially for bloom-filtering peers?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402040' id='462496'>
<a class='timestamp' href='#462496'><time timestamp='2016-04-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i&#x27;m not sure i understand the privacy gain though
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402040' id='462497'>
<a class='timestamp' href='#462497'><time timestamp='2016-04-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Very slightly, but it doesn&#x27;t increase the worst case.
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402040' id='462498'>
<a class='timestamp' href='#462498'><time timestamp='2016-04-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
agreed
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402040' id='462499'>
<a class='timestamp' href='#462499'><time timestamp='2016-04-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sdaftuar: without that change, I can rotate my filtering to &#x27;time tag&#x27; arrivals. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402040' id='462500'>
<a class='timestamp' href='#462500'><time timestamp='2016-04-11T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So even though the queuing destroys timing information, by modulating my filtering I could restore some of it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402100' id='462501'>
<a class='timestamp' href='#462501'><time timestamp='2016-04-11T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
assuming a single peer connection?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402100' id='462502'>
<a class='timestamp' href='#462502'><time timestamp='2016-04-11T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
or multiple?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402100' id='462503'>
<a class='timestamp' href='#462503'><time timestamp='2016-04-11T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If it&#x27;s done with just a single, it means you&#x27;ll miss some transactions. More effective with multiple.
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402220' id='462504'>
<a class='timestamp' href='#462504'><time timestamp='2016-04-11T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
But it&#x27;s justifyable just on the basis of making the relays more accurate. Likewise, something that was evicted shouldn&#x27;t get relayed. Though thats corner case enough I don&#x27;t know if it&#x27;s worth checking.
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402280' id='462505'>
<a class='timestamp' href='#462505'><time timestamp='2016-04-11T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
ok i think i see what you&#x27;re talking about, makes sense.
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402400' id='462506'>
<a class='timestamp' href='#462506'><time timestamp='2016-04-11T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
do you think it&#x27;s worth trying to drain a peer&#x27;s tx relay set faster if there&#x27;s a big backlog?  i&#x27;m a little worried that this thing is bounded only by the size of the mempool, and drains at a fixed rate
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402460' id='462507'>
<a class='timestamp' href='#462507'><time timestamp='2016-04-11T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
100k transactions would take 4 hours or so, and in the meantime you&#x27;re using a bunch of memory and slowing down the heapify, i suppose
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402520' id='462508'>
<a class='timestamp' href='#462508'><time timestamp='2016-04-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;d rather drop stragglers than drain much faster. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402520' id='462509'>
<a class='timestamp' href='#462509'><time timestamp='2016-04-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yeah that seems better
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402520' id='462510'>
<a class='timestamp' href='#462510'><time timestamp='2016-04-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
otherwise a peer who dumps you garbage ruins relay for everyone...
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402940' id='462511'>
<a class='timestamp' href='#462511'><time timestamp='2016-04-11T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
right now someone flooding at the boundary of what you&#x27;ll accept turns you into a big relay amplifier, spamming people with junk. The fee filter will help that a lot, but not completely. I was thinking about using a map on id-&gt;{depth,feerate,insert time}, and using the first two for sorting (without taking the mempool lock), the feerate for filtering (again no mempool lock), and the insert time 
<br>
</div>

<div class='talk op-msg' data-timestamp='1460402940' id='462512'>
<a class='timestamp' href='#462512'><time timestamp='2016-04-11T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
to expire things that sat around too long.
<br>
</div>

<div class='talk op-msg' data-timestamp='1460404080' id='462513'>
<a class='timestamp' href='#462513'><time timestamp='2016-04-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> JackH</span>&gt;
!seen bramc
<br>
</div>

<div class='talk op-msg' data-timestamp='1460404080' id='462514'>
<a class='timestamp' href='#462514'><time timestamp='2016-04-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
I have not seen bramc.
<br>
</div>

<div class='talk op-msg' data-timestamp='1460405400' id='462515'>
<a class='timestamp' href='#462515'><time timestamp='2016-04-11T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-6'> GitHub88</span>&gt;
[bitcoin] sdaftuar opened pull request #7862: Use txid as key in mapAlreadyAskedFor (master...inv-to-txid-mapalreadyaskedfor) <a href="https://github.com/bitcoin/bitcoin/pull/7862" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7862</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1460409120' id='462516'>
<a class='timestamp' href='#462516'><time timestamp='2016-04-11T21:12:00Z'>21:12</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Why does the DISCOURAGE_UPGRADABLE_NOPS flag allow a OP_NOP?
<br>
</div>

<div class='talk op-msg' data-timestamp='1460409120' id='462517'>
<a class='timestamp' href='#462517'><time timestamp='2016-04-11T21:12:00Z'>21:12</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
i.e. this test case [&quot;1&quot;, &quot;NOP&quot;, &quot;P2SH,STRICTENC,DISCOURAGE_UPGRADABLE_NOPS&quot;, &quot;OK&quot;, &quot;Discourage NOPx flag allows OP_NOP&quot;]
<br>
</div>

<div class='talk op-msg' data-timestamp='1460410260' id='462518'>
<a class='timestamp' href='#462518'><time timestamp='2016-04-11T21:31:00Z'>21:31</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
OP_NOP isn&#x27;t in the set of NOPx
<br>
</div>

<div class='talk op-msg' data-timestamp='1460410260' id='462519'>
<a class='timestamp' href='#462519'><time timestamp='2016-04-11T21:31:00Z'>21:31</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
although that probably doesn&#x27;t answer your question
<br>
</div>

<div class='talk op-msg' data-timestamp='1460410320' id='462520'>
<a class='timestamp' href='#462520'><time timestamp='2016-04-11T21:32:00Z'>21:32</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
OP_NOP is 0x61 while the other NOPS are 0xb0, so they were probably created for different reasons
<br>
</div>

<div class='talk op-msg' data-timestamp='1460410320' id='462521'>
<a class='timestamp' href='#462521'><time timestamp='2016-04-11T21:32:00Z'>21:32</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Meaning OP_NOP will probably not be relied on for future softforks, especially if they aren&#x27;t currently discouraged
<br>
</div>

</div>
</section>

</body>
</html>
