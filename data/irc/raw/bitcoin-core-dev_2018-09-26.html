<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2018-09-26
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2018-09-26' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:21 UTC</pre>
<pre><a href="/bitcoin-core-dev/2018-08-26">&lt;</a><span class='header'>  September 2018  </span><a href="/bitcoin-core-dev/2018-10-26">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                   <a class="" href="/bitcoin-core-dev/2018-09-01">1</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2018-09-02">2</a>  <a class="" href="/bitcoin-core-dev/2018-09-03">3</a>  <a class="" href="/bitcoin-core-dev/2018-09-04">4</a>  <a class="" href="/bitcoin-core-dev/2018-09-05">5</a>  <a class="" href="/bitcoin-core-dev/2018-09-06">6</a>  <a class="" href="/bitcoin-core-dev/2018-09-07">7</a>  <a class="" href="/bitcoin-core-dev/2018-09-08">8</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2018-09-09">9</a> <a class="" href="/bitcoin-core-dev/2018-09-10">10</a> <a class="" href="/bitcoin-core-dev/2018-09-11">11</a> <a class="" href="/bitcoin-core-dev/2018-09-12">12</a> <a class="" href="/bitcoin-core-dev/2018-09-13">13</a> <a class="" href="/bitcoin-core-dev/2018-09-14">14</a> <a class="" href="/bitcoin-core-dev/2018-09-15">15</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-09-16">16</a> <a class="" href="/bitcoin-core-dev/2018-09-17">17</a> <a class="" href="/bitcoin-core-dev/2018-09-18">18</a> <a class="" href="/bitcoin-core-dev/2018-09-19">19</a> <a class="" href="/bitcoin-core-dev/2018-09-20">20</a> <a class="" href="/bitcoin-core-dev/2018-09-21">21</a> <a class="" href="/bitcoin-core-dev/2018-09-22">22</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-09-23">23</a> <a class="" href="/bitcoin-core-dev/2018-09-24">24</a> 25 <a class="current" href="/bitcoin-core-dev/2018-09-26">26</a> <a class="" href="/bitcoin-core-dev/2018-09-27">27</a> <a class="" href="/bitcoin-core-dev/2018-09-28">28</a> <a class="" href="/bitcoin-core-dev/2018-09-29">29</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-09-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1537949820' id='631829'>
<a class='timestamp' href='#631829'><time timestamp='2018-09-26T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
[back home from Riga, will probably need to catch up on a lot of things]
<br>
</div>

<div class='talk op-msg' data-timestamp='1537950120' id='631830'>
<a class='timestamp' href='#631830'><time timestamp='2018-09-26T08:22:00Z'>08:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
did anything come in preventing us from tagging 0.17.0 final?
<br>
</div>

<div class='talk op-msg' data-timestamp='1537950180' id='631831'>
<a class='timestamp' href='#631831'><time timestamp='2018-09-26T08:23:00Z'>08:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: i&#x27;d like to make sure #14289 is not a regression
<br>
</div>

<div class='talk op-msg' data-timestamp='1537950180' id='631832'>
<a class='timestamp' href='#631832'><time timestamp='2018-09-26T08:23:00Z'>08:23</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/14289" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/14289</a> | Unbounded growth of scheduler queue · Issue #14289 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1537950240' id='631833'>
<a class='timestamp' href='#631833'><time timestamp='2018-09-26T08:24:00Z'>08:24</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
okay
<br>
</div>

<div class='talk op-msg' data-timestamp='1537950300' id='631834'>
<a class='timestamp' href='#631834'><time timestamp='2018-09-26T08:25:00Z'>08:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes that one is fairly nasty
<br>
</div>

<div class='talk op-msg' data-timestamp='1537950300' id='631835'>
<a class='timestamp' href='#631835'><time timestamp='2018-09-26T08:25:00Z'>08:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
provoostenator said he was going to retry with 0.16 tomorrow
<br>
</div>

<div class='talk op-msg' data-timestamp='1537950300' id='631836'>
<a class='timestamp' href='#631836'><time timestamp='2018-09-26T08:25:00Z'>08:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i guess today
<br>
</div>

<div class='talk op-msg' data-timestamp='1537950600' id='631837'>
<a class='timestamp' href='#631837'><time timestamp='2018-09-26T08:30:00Z'>08:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
even if its not a regression (... I&#x27;m pretty sure it is, just maybe not vs 0.16), we still need to do something about it, something could be a release note that just says you can&#x27;t upgrade from pre-0.13 
<br>
</div>

<div class='talk op-msg' data-timestamp='1537951200' id='631838'>
<a class='timestamp' href='#631838'><time timestamp='2018-09-26T08:40:00Z'>08:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
breaking backwards compatibility, even temporarily, is kind of a bummer — though they could always reindex
<br>
</div>

<div class='talk op-msg' data-timestamp='1537951200' id='631839'>
<a class='timestamp' href='#631839'><time timestamp='2018-09-26T08:40:00Z'>08:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
would it be possible to detect this scenario and bail out? people might read over it in the release notes, which are huge for major releases
<br>
</div>

<div class='talk op-msg' data-timestamp='1537951260' id='631840'>
<a class='timestamp' href='#631840'><time timestamp='2018-09-26T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we could easily add an exit in that rewind code. though at that point, it might make sense to just fix the problem.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537951680' id='631841'>
<a class='timestamp' href='#631841'><time timestamp='2018-09-26T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
also depends on the risk of the change, e.g. queue limited naively at least could introduce deadlocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1537951740' id='631842'>
<a class='timestamp' href='#631842'><time timestamp='2018-09-26T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea, obviously not that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537953120' id='631843'>
<a class='timestamp' href='#631843'><time timestamp='2018-09-26T09:12:00Z'>09:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right, that was just an example, but I mean, for master we obviously want a proper long-term solution, for 0.17 it might be safer to prevent it from happening w/ a smaller patch
<br>
</div>

<div class='talk op-msg' data-timestamp='1537961580' id='631844'>
<a class='timestamp' href='#631844'><time timestamp='2018-09-26T11:33:00Z'>11:33</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
Hello. I have been thinking about changing the RPC doc format slightly, so it is better parseable to something better looking than this - <a href="https://bitcoincore.org/en/doc/0.16.2/rpc/wallet/sendmany/" class="link" target="_blank">https://bitcoincore.org/en/doc/0.16.2/rpc/wallet/sendmany/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1537961640' id='631845'>
<a class='timestamp' href='#631845'><time timestamp='2018-09-26T11:34:00Z'>11:34</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
I have tried to write something like a proposal for unified formatting that would help with parsing... I wrote it here
<br>
</div>

<div class='talk op-msg' data-timestamp='1537961640' id='631846'>
<a class='timestamp' href='#631846'><time timestamp='2018-09-26T11:34:00Z'>11:34</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
<a href="https://gist.github.com/karel-3d/1490786786525b0365ea8f459a9fc683" class="link" target="_blank">https://gist.github.com/karel-3d/1490786786525b0365ea8f459a9fc683</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1537961640' id='631847'>
<a class='timestamp' href='#631847'><time timestamp='2018-09-26T11:34:00Z'>11:34</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
this is like draft 0
<br>
</div>

<div class='talk op-msg' data-timestamp='1537961640' id='631848'>
<a class='timestamp' href='#631848'><time timestamp='2018-09-26T11:34:00Z'>11:34</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
do you think it&#x27;s a good idea?
<br>
</div>

<div class='talk op-msg' data-timestamp='1537961700' id='631849'>
<a class='timestamp' href='#631849'><time timestamp='2018-09-26T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
It requires some small changes to current documentation
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963080' id='631850'>
<a class='timestamp' href='#631850'><time timestamp='2018-09-26T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the idea to have machine-parseable documentation format that is formatted on the fly has been floated before, at least
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963200' id='631851'>
<a class='timestamp' href='#631851'><time timestamp='2018-09-26T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I remember one of the dividing issues was whether to have the documentation at the point where the RPC function is implemented (like now) versus in an external, say JSON, file that is embedded at compile time
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963200' id='631852'>
<a class='timestamp' href='#631852'><time timestamp='2018-09-26T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
all in all though it&#x27;d certainly be an improvement, the manual space-pushing that has to be done now is silly
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963260' id='631853'>
<a class='timestamp' href='#631853'><time timestamp='2018-09-26T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and it&#x27;s also hard to keep things (such as type names) consistent
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963320' id='631854'>
<a class='timestamp' href='#631854'><time timestamp='2018-09-26T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I think your proposal has the same drawback: it&#x27;s based on precise text formatting within strings, instead of something more structured; I <b>*guess*</b> it could be enforced by (sigh) another linter, but...
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963440' id='631855'>
<a class='timestamp' href='#631855'><time timestamp='2018-09-26T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
I tried to make the current proposal close to the current format
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963500' id='631856'>
<a class='timestamp' href='#631856'><time timestamp='2018-09-26T12:05:00Z'>12:05</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
In a prior discussion, an option was starting with a linter to get things into a uniform structure and then developing the tooling to make adhearing to that structure easy (e.g. the external JSON file).
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963560' id='631857'>
<a class='timestamp' href='#631857'><time timestamp='2018-09-26T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
I think external JSON would get outdated soon and people would forget to update
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963740' id='631858'>
<a class='timestamp' href='#631858'><time timestamp='2018-09-26T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
karelb: although that&#x27;s a risk, the project seems to have an abundance of people willing to PR minor string updates at the moment, so I wouldn&#x27;t be too worried.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963740' id='631859'>
<a class='timestamp' href='#631859'><time timestamp='2018-09-26T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
harding: yes, might be the best option in this case, fairly easy in most cases where the text is one text blob in &quot;&quot; (it&#x27;s mostly the \ escaping of quotes inside that that makes horizontal alignment annoying to do)
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963860' id='631860'>
<a class='timestamp' href='#631860'><time timestamp='2018-09-26T12:11:00Z'>12:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right, in the case of an external file, <b>*should*</b> add a comment to each function where it&#x27;s documented...
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963860' id='631861'>
<a class='timestamp' href='#631861'><time timestamp='2018-09-26T12:11:00Z'>12:11</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
the proposal I wrote comes from the viewpoint &quot;let&#x27;s make small changes to current format to make it parseable&quot;... I did not think about lint-ablitiy
<br>
</div>

<div class='talk op-msg' data-timestamp='1537963920' id='631862'>
<a class='timestamp' href='#631862'><time timestamp='2018-09-26T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
karelb: if it&#x27;s not linted, then it&#x27;ll be up to you to either hassle people to use the correct format or to PR lots of minor whitespace changes yourself, neither of which sounds very fun.  :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1537964040' id='631863'>
<a class='timestamp' href='#631863'><time timestamp='2018-09-26T12:14:00Z'>12:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so if you create a format that&#x27;s consistent ehough to be machine-parseable, for say, generation of formatted web docs, linting is the same process I&#x27;d say?
<br>
</div>

<div class='talk op-msg' data-timestamp='1537964040' id='631864'>
<a class='timestamp' href='#631864'><time timestamp='2018-09-26T12:14:00Z'>12:14</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
the biggest changes are the Markdown stuff which would force backticks, and also would force to add spaces somewhere, so the &quot;description&quot; of the argument don&#x27;t fall into &quot;pseudocode&quot; on the left
<br>
</div>

<div class='talk op-msg' data-timestamp='1537964040' id='631865'>
<a class='timestamp' href='#631865'><time timestamp='2018-09-26T12:14:00Z'>12:14</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
wumpus: I guess so!
<br>
</div>

<div class='talk op-msg' data-timestamp='1537964040' id='631866'>
<a class='timestamp' href='#631866'><time timestamp='2018-09-26T12:14:00Z'>12:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it doesn&#x27;t even have to lint on the source code BTW - it could simply call the RPC server, request help, lint that
<br>
</div>

<div class='talk op-msg' data-timestamp='1537964100' id='631867'>
<a class='timestamp' href='#631867'><time timestamp='2018-09-26T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
karelb: an alternative approach is to maintain your own diff between the `bitcoin-cli help` in its current inconsistent format and the idealized consistent format you suggest, which shouldn&#x27;t be too much work as the current help is pretty stable, then develop your tooling around that, proving its worth.  Then you&#x27;ll not only have stronger evidence that it&#x27;s externally useful, but you&#x27;ll also have the parsing tools to help create 
<br>
</div>

<div class='talk op-msg' data-timestamp='1537964100' id='631868'>
<a class='timestamp' href='#631868'><time timestamp='2018-09-26T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
the linted and a list of changes that actually need to be made.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537964100' id='631869'>
<a class='timestamp' href='#631869'><time timestamp='2018-09-26T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(FWIW this is how the manual page generation also works; it calls bitcoind &amp;c --help and generates from that)
<br>
</div>

<div class='talk op-msg' data-timestamp='1537964160' id='631870'>
<a class='timestamp' href='#631870'><time timestamp='2018-09-26T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
in any case work on improving the docs is always welcome, thanks for thinking about this
<br>
</div>

<div class='talk op-msg' data-timestamp='1537964160' id='631871'>
<a class='timestamp' href='#631871'><time timestamp='2018-09-26T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
harding: good idea
<br>
</div>

<div class='talk op-msg' data-timestamp='1537964220' id='631872'>
<a class='timestamp' href='#631872'><time timestamp='2018-09-26T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
wumpus: I am basically scratching my own itch :D the same with this issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1537964220' id='631873'>
<a class='timestamp' href='#631873'><time timestamp='2018-09-26T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
<a href="https://github.com/achow101/btcinformation.org/issues/23" class="link" target="_blank">https://github.com/achow101/btcinformation.org/issues/23</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1537964280' id='631874'>
<a class='timestamp' href='#631874'><time timestamp='2018-09-26T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-6'> karelb</span>&gt;
just today I was trying to google &quot;what is a sighash again?&quot; (since when I do not work on bitcoin for a while I keep forgetting its terminology) and I keep ending up at bitcoin.org developer docs
<br>
</div>

<div class='talk op-msg' data-timestamp='1537965300' id='631875'>
<a class='timestamp' href='#631875'><time timestamp='2018-09-26T12:35:00Z'>12:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I never forget what a sighash is, but I must admit I forget what are the different combinations for it sometimes
<br>
</div>

<div class='talk op-msg' data-timestamp='1537966260' id='631876'>
<a class='timestamp' href='#631876'><time timestamp='2018-09-26T12:51:00Z'>12:51</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
It&#x27;s that time of the year again where a the new macOS breaks stuff #14327. QT from homebrew doesn&#x27;t work, depends building is also broken.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537966260' id='631877'>
<a class='timestamp' href='#631877'><time timestamp='2018-09-26T12:51:00Z'>12:51</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/14327" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/14327</a> | macOS Mojave QT 5.11 compilation fails · Issue #14327 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1537966380' id='631878'>
<a class='timestamp' href='#631878'><time timestamp='2018-09-26T12:53:00Z'>12:53</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Maybe when I buy a new laptop I&#x27;ll keep the old one around to test beta releases, so we get a few months heads up.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537968900' id='631879'>
<a class='timestamp' href='#631879'><time timestamp='2018-09-26T13:35:00Z'>13:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
why doesn&#x27;t travis catch this?
<br>
</div>

<div class='talk op-msg' data-timestamp='1537968900' id='631880'>
<a class='timestamp' href='#631880'><time timestamp='2018-09-26T13:35:00Z'>13:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh, it&#x27;s a build <b>*on*</b> mac not for mac
<br>
</div>

<div class='talk op-msg' data-timestamp='1537968900' id='631881'>
<a class='timestamp' href='#631881'><time timestamp='2018-09-26T13:35:00Z'>13:35</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
I haven&#x27;t tried a cross compile to the latest macOS SDK; we build for a much older version afaik.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537968960' id='631882'>
<a class='timestamp' href='#631882'><time timestamp='2018-09-26T13:36:00Z'>13:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that would be one of the most difficult things to automate unless there&#x27;s something like Appveyor for windows for macs
<br>
</div>

<div class='talk op-msg' data-timestamp='1537968960' id='631883'>
<a class='timestamp' href='#631883'><time timestamp='2018-09-26T13:36:00Z'>13:36</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Perhaps trying to cross-compile to a beta release (~ June / July / August) might also help catch this.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537971600' id='631884'>
<a class='timestamp' href='#631884'><time timestamp='2018-09-26T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
achow101: do you plan to fix #14019 nits?
<br>
</div>

<div class='talk op-msg' data-timestamp='1537971600' id='631885'>
<a class='timestamp' href='#631885'><time timestamp='2018-09-26T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/14019" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/14019</a> | Import pubkeys when importing p2sh with importmulti by achow101 · Pull Request #14019 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1537971600' id='631886'>
<a class='timestamp' href='#631886'><time timestamp='2018-09-26T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
I can push those fixes if you want
<br>
</div>

<div class='talk op-msg' data-timestamp='1537971600' id='631887'>
<a class='timestamp' href='#631887'><time timestamp='2018-09-26T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
sipa: looks like 0.16.3 memory explodes just as bad during rollback. I&#x27;ll update the ticket in a bit. Perhaps the easiest solution is to disable it if there&#x27;s more than ~1000 blocks since SegWit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537971600' id='631888'>
<a class='timestamp' href='#631888'><time timestamp='2018-09-26T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
I&#x27;ll try 0.15.2 later today too.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537971780' id='631889'>
<a class='timestamp' href='#631889'><time timestamp='2018-09-26T14:23:00Z'>14:23</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Speaking of 0.15.2 I&#x27;m having a hard time signing the code-signed Windows gitian binary.  macOS worked fine. v0.14.3 worked fine too. I&#x27;m using a Debian VM. Is it picky about the gitian-build.sh version?
<br>
</div>

<div class='talk op-msg' data-timestamp='1537971840' id='631890'>
<a class='timestamp' href='#631890'><time timestamp='2018-09-26T14:24:00Z'>14:24</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Getting &quot;failed to run on-target setarch x86_64 bash -x &lt; var/build-script &gt; var/build.log 2&gt;&amp;1 (RuntimeError)&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1537974540' id='631891'>
<a class='timestamp' href='#631891'><time timestamp='2018-09-26T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
promag: oh, I didn&#x27;t see those. I&#x27;ll fix them later today
<br>
</div>

<div class='talk op-msg' data-timestamp='1537974600' id='631892'>
<a class='timestamp' href='#631892'><time timestamp='2018-09-26T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
achow101: no problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1537979100' id='631893'>
<a class='timestamp' href='#631893'><time timestamp='2018-09-26T16:25:00Z'>16:25</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
(fixed Gitian by deleting images from gitian-builder and rebuilding using the v0.16 gitan script)
<br>
</div>

<div class='talk op-msg' data-timestamp='1537979520' id='631894'>
<a class='timestamp' href='#631894'><time timestamp='2018-09-26T16:32:00Z'>16:32</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
achow101: i have a question about psbt BIP 174
<br>
</div>

<div class='talk op-msg' data-timestamp='1537979520' id='631895'>
<a class='timestamp' href='#631895'><time timestamp='2018-09-26T16:32:00Z'>16:32</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
what&#x27;s the expected behaviour regarding uncompressed ECDSA keys
<br>
</div>

<div class='talk op-msg' data-timestamp='1537979580' id='631896'>
<a class='timestamp' href='#631896'><time timestamp='2018-09-26T16:33:00Z'>16:33</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
the spec doesn&#x27;t mention this at all and the test vectors only have compressed keys in them
<br>
</div>

<div class='talk op-msg' data-timestamp='1537979880' id='631897'>
<a class='timestamp' href='#631897'><time timestamp='2018-09-26T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
provoostenator: thanks, so it&#x27;s an earlier regression
<br>
</div>

<div class='talk op-msg' data-timestamp='1537979940' id='631898'>
<a class='timestamp' href='#631898'><time timestamp='2018-09-26T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
provoostenator:, gmaxwell, wumpus: agree with just listing in the release notes that upgrading from 0.13 may not be practical
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981320' id='631899'>
<a class='timestamp' href='#631899'><time timestamp='2018-09-26T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
andytoshi: the same as compressed keys
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981320' id='631900'>
<a class='timestamp' href='#631900'><time timestamp='2018-09-26T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
bip32 is defined for compressed keys only though, so you should only use compressed keys in the bip32 derivs
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981440' id='631901'>
<a class='timestamp' href='#631901'><time timestamp='2018-09-26T17:04:00Z'>17:04</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
ARGHGGHHGHGHGHGHHGHGHHGHHHHGGHHHH
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981440' id='631902'>
<a class='timestamp' href='#631902'><time timestamp='2018-09-26T17:04:00Z'>17:04</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
k
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981440' id='631903'>
<a class='timestamp' href='#631903'><time timestamp='2018-09-26T17:04:00Z'>17:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: probably worth pointing that out in the bip
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981500' id='631904'>
<a class='timestamp' href='#631904'><time timestamp='2018-09-26T17:05:00Z'>17:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s also not all that clear in bip32... it just only talks about serialization using compressed form
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981560' id='631905'>
<a class='timestamp' href='#631905'><time timestamp='2018-09-26T17:06:00Z'>17:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
andytoshi: my view is that compressed and uncompressed are both legal inside bip174, but it&#x27;s up to each signer/updater/... to choose what they support anyway; some may only support compressed keys
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981620' id='631906'>
<a class='timestamp' href='#631906'><time timestamp='2018-09-26T17:07:00Z'>17:07</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
ok. the issue is that in rust-bitcoin, we don&#x27;t store whether a pubkey is compressed or uncompressed, it&#x27;s just a libsecp secp256k1_pubkey. (our Address and Privkey have this extra info ofc, but the raw ecdsa pubkey type does not)
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981620' id='631907'>
<a class='timestamp' href='#631907'><time timestamp='2018-09-26T17:07:00Z'>17:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
andytoshi: that sounds like it&#x27;d make your life hard :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981620' id='631908'>
<a class='timestamp' href='#631908'><time timestamp='2018-09-26T17:07:00Z'>17:07</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
so we&#x27;ll need to do something ad-hoc when parsing public keys to preserve the fact that they were uncompressed (and i think we&#x27;re just gonna reject hybrid keys)
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981620' id='631909'>
<a class='timestamp' href='#631909'><time timestamp='2018-09-26T17:07:00Z'>17:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you want to support uncompressed keys at all
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981680' id='631910'>
<a class='timestamp' href='#631910'><time timestamp='2018-09-26T17:08:00Z'>17:08</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
we haven&#x27;t had trouble thus far having the compressed/uncompressed distinction only exist as part of bitcoin Privkeys that correspond to bitcoin addresses
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981680' id='631911'>
<a class='timestamp' href='#631911'><time timestamp='2018-09-26T17:08:00Z'>17:08</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
so yeah.. we&#x27;re basically only supporting uncompressed keys for that one specific use case
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981680' id='631912'>
<a class='timestamp' href='#631912'><time timestamp='2018-09-26T17:08:00Z'>17:08</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
and nowhere else
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981740' id='631913'>
<a class='timestamp' href='#631913'><time timestamp='2018-09-26T17:09:00Z'>17:09</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i don&#x27;t follow what the problem is
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981740' id='631914'>
<a class='timestamp' href='#631914'><time timestamp='2018-09-26T17:09:00Z'>17:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: i assume the difficulty is that if they&#x27;re deserializing and reserializing a psbt with uncompressed keys, the uncompressedness information would be lost
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981800' id='631915'>
<a class='timestamp' href='#631915'><time timestamp='2018-09-26T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as the internal type for pubkeys does not store this
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981800' id='631916'>
<a class='timestamp' href='#631916'><time timestamp='2018-09-26T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
yep
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981860' id='631917'>
<a class='timestamp' href='#631917'><time timestamp='2018-09-26T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
so if we wrote a combiner with this lib, and it was used in some multiparty protocol where somebody was giving us uncompressed keys, we&#x27;d wind up compressing them as a side-effect of combining, and confuse everyone else
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981920' id='631918'>
<a class='timestamp' href='#631918'><time timestamp='2018-09-26T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah, i think the correct thing to do is to treat a bitcoin-pubkey as a pair of (ec-pubkey, compressedness), as from bitcoin&#x27;s perspective they&#x27;re really different things
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981920' id='631919'>
<a class='timestamp' href='#631919'><time timestamp='2018-09-26T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hash is different, p2pkh spend is different, address is different, ...
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981980' id='631920'>
<a class='timestamp' href='#631920'><time timestamp='2018-09-26T17:13:00Z'>17:13</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1537981980' id='631921'>
<a class='timestamp' href='#631921'><time timestamp='2018-09-26T17:13:00Z'>17:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i also think it&#x27;s more efficient to keep pubkeys in serialized form, and only convert to secp when signing
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982040' id='631922'>
<a class='timestamp' href='#631922'><time timestamp='2018-09-26T17:14:00Z'>17:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
because most operations care about its serialization and not its EC identity
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982040' id='631923'>
<a class='timestamp' href='#631923'><time timestamp='2018-09-26T17:14:00Z'>17:14</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
andytoshi can&#x27;t you just copy the bytes instead of parsing it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982040' id='631924'>
<a class='timestamp' href='#631924'><time timestamp='2018-09-26T17:14:00Z'>17:14</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
in many cases, you don&#x27;t need to know that it&#x27;s a pubkey, you just need to compare the bytes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982100' id='631925'>
<a class='timestamp' href='#631925'><time timestamp='2018-09-26T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
sipa: verification and bip32 operations all care about the EC identity
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982100' id='631926'>
<a class='timestamp' href='#631926'><time timestamp='2018-09-26T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
andytoshi: sure, but computing a hash or lookup don&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982100' id='631927'>
<a class='timestamp' href='#631927'><time timestamp='2018-09-26T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
sipa: you never hash a public key directly, only scriptpubkeys containing public keys
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982160' id='631928'>
<a class='timestamp' href='#631928'><time timestamp='2018-09-26T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
andytoshi: eh, no :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982160' id='631929'>
<a class='timestamp' href='#631929'><time timestamp='2018-09-26T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
achow101: (a) i don&#x27;t want to do this for type-safety reasons, it&#x27;s very hard to reason about data structures that might have invalid data in them; (b) i&#x27;m pretty sure i need the EC identity in more cases than i need the serialization
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982160' id='631930'>
<a class='timestamp' href='#631930'><time timestamp='2018-09-26T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
P2PKH addresses
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982160' id='631931'>
<a class='timestamp' href='#631931'><time timestamp='2018-09-26T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
oh right
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982160' id='631932'>
<a class='timestamp' href='#631932'><time timestamp='2018-09-26T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
andytoshi: but all things that care about EC identity tend to be one-off things; you load an sPK and a witness, convert to secp structures, and verify, and done
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982220' id='631933'>
<a class='timestamp' href='#631933'><time timestamp='2018-09-26T17:17:00Z'>17:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so you already have the deserialization cost anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982280' id='631934'>
<a class='timestamp' href='#631934'><time timestamp='2018-09-26T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
type safety is a good argument, but you can have a pubkey type that just stores the bytes, but still can only be filled with sensible things (starts with 02, 03, 04, length 33/65, ...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982280' id='631935'>
<a class='timestamp' href='#631935'><time timestamp='2018-09-26T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
then i might as well use a (compressedness, secp pubkey) pair
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982280' id='631936'>
<a class='timestamp' href='#631936'><time timestamp='2018-09-26T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s expensive :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982340' id='631937'>
<a class='timestamp' href='#631937'><time timestamp='2018-09-26T17:19:00Z'>17:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
converting a compressed serialization to that format requires deserialization
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982340' id='631938'>
<a class='timestamp' href='#631938'><time timestamp='2018-09-26T17:19:00Z'>17:19</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
i&#x27;m still not convinced that EC operations are &quot;one off things&quot; when i need them to verify signatures and derive public keys, which i do all the time, vs serialization which is only needed when converting to scriptpubkeys or doing network communication
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982340' id='631939'>
<a class='timestamp' href='#631939'><time timestamp='2018-09-26T17:19:00Z'>17:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the things you do all the time are looking up &quot;does this pubkey belong to me&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982400' id='631940'>
<a class='timestamp' href='#631940'><time timestamp='2018-09-26T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
in Core maybe
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982400' id='631941'>
<a class='timestamp' href='#631941'><time timestamp='2018-09-26T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
fair, in a library it&#x27;s less clear what the usage pattern is
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982400' id='631942'>
<a class='timestamp' href='#631942'><time timestamp='2018-09-26T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
right.. this isn&#x27;t the case in liquid for example where we spend a lot of time doing p2c derivations and verifying other peoples&#x27; signatures
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982400' id='631943'>
<a class='timestamp' href='#631943'><time timestamp='2018-09-26T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but &quot;all the time&quot; isn&#x27;t what matters; the question is what kind of operations do you do on a pubkey in one batch
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982460' id='631944'>
<a class='timestamp' href='#631944'><time timestamp='2018-09-26T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
or in a generic PSBT validator where you&#x27;re really just checking sigs and doing derivations and never really interacting whith the blockchain
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982460' id='631945'>
<a class='timestamp' href='#631945'><time timestamp='2018-09-26T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
does libsecp expose a way to determine that a pubkey is valid or not without decompressing it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982520' id='631946'>
<a class='timestamp' href='#631946'><time timestamp='2018-09-26T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t think so
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982520' id='631947'>
<a class='timestamp' href='#631947'><time timestamp='2018-09-26T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
yeah..doesn&#x27;t look like it
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982520' id='631948'>
<a class='timestamp' href='#631948'><time timestamp='2018-09-26T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but whether a pubkey is valid only matters when doing validation
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982520' id='631949'>
<a class='timestamp' href='#631949'><time timestamp='2018-09-26T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or signing
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982520' id='631950'>
<a class='timestamp' href='#631950'><time timestamp='2018-09-26T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
or deriving child keys
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982580' id='631951'>
<a class='timestamp' href='#631951'><time timestamp='2018-09-26T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982580' id='631952'>
<a class='timestamp' href='#631952'><time timestamp='2018-09-26T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
all cases where you need to convert to the secp type anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982580' id='631953'>
<a class='timestamp' href='#631953'><time timestamp='2018-09-26T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
right, but it would be much nicer if i caught invalid data when i received it
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982640' id='631954'>
<a class='timestamp' href='#631954'><time timestamp='2018-09-26T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
andytoshi: concrete example: a PSBT signer is more efficient if it doesn&#x27;t need to deserialize all pubkeys listed in the PSBT file before knowing which ones it can sign with
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982640' id='631955'>
<a class='timestamp' href='#631955'><time timestamp='2018-09-26T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but checking which ones you can sign with is something you can totally do on the byte representation
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982640' id='631956'>
<a class='timestamp' href='#631956'><time timestamp='2018-09-26T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
hmm, this is true
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982760' id='631957'>
<a class='timestamp' href='#631957'><time timestamp='2018-09-26T17:26:00Z'>17:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe it also doesn&#x27;t matter; i think we can decompress 200000 keys per second
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982760' id='631958'>
<a class='timestamp' href='#631958'><time timestamp='2018-09-26T17:26:00Z'>17:26</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
it would plausibly matter for an HSM
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982820' id='631959'>
<a class='timestamp' href='#631959'><time timestamp='2018-09-26T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
possibly
<br>
</div>

<div class='talk op-msg' data-timestamp='1537982820' id='631960'>
<a class='timestamp' href='#631960'><time timestamp='2018-09-26T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-8'> andytoshi</span>&gt;
in any case I think for the purposes of rust-bitcoin we&#x27;re not too concerned about that
<br>
</div>

<div class='talk op-msg' data-timestamp='1537987320' id='631961'>
<a class='timestamp' href='#631961'><time timestamp='2018-09-26T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
sipa: v0.15.2 doesn&#x27;t have the issue, so it was introduces somewhere in 0.16 
<br>
</div>

<div class='talk op-msg' data-timestamp='1537987380' id='631962'>
<a class='timestamp' href='#631962'><time timestamp='2018-09-26T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
provoostenator: interesting, thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1537987500' id='631963'>
<a class='timestamp' href='#631963'><time timestamp='2018-09-26T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
I might be able to do a (partial) bisect tomorrow if you&#x27;re really at a loss where this bug started.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537987500' id='631964'>
<a class='timestamp' href='#631964'><time timestamp='2018-09-26T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m sure i can guess by looking at the PR list :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1537990920' id='631965'>
<a class='timestamp' href='#631965'><time timestamp='2018-09-26T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
someone willing to spend a minute in #14148?
<br>
</div>

<div class='talk op-msg' data-timestamp='1537990920' id='631966'>
<a class='timestamp' href='#631966'><time timestamp='2018-09-26T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/14148" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/14148</a> | abandontransaction needed after spending orphaned block reward · Issue #14148 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1537991880' id='631967'>
<a class='timestamp' href='#631967'><time timestamp='2018-09-26T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: see, I said it wasn&#x27;t always there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537997520' id='631968'>
<a class='timestamp' href='#631968'><time timestamp='2018-09-26T21:32:00Z'>21:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, i simplified the ThreadSocketHandler cleanup in #14335
<br>
</div>

<div class='talk op-msg' data-timestamp='1537997520' id='631969'>
<a class='timestamp' href='#631969'><time timestamp='2018-09-26T21:32:00Z'>21:32</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/14335" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/14335</a> | net: refactor: cleanup ThreadSocketHandler by pstratem · Pull Request #14335 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1537997640' id='631970'>
<a class='timestamp' href='#631970'><time timestamp='2018-09-26T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: sweet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1537998120' id='631971'>
<a class='timestamp' href='#631971'><time timestamp='2018-09-26T21:42:00Z'>21:42</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
rfc: sounds good a bool CWallet::IsExternal() const? which returns false if wallet path is in -walletdir ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1537998120' id='631972'>
<a class='timestamp' href='#631972'><time timestamp='2018-09-26T21:42:00Z'>21:42</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
jnewbery: ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1538001420' id='631973'>
<a class='timestamp' href='#631973'><time timestamp='2018-09-26T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, and #14336 actually implements poll()
<br>
</div>

<div class='talk op-msg' data-timestamp='1538001420' id='631974'>
<a class='timestamp' href='#631974'><time timestamp='2018-09-26T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/14336" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/14336</a> | net: implement poll by pstratem · Pull Request #14336 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1538001420' id='631975'>
<a class='timestamp' href='#631975'><time timestamp='2018-09-26T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
im still not sure how to detect whether the poll() available is functional or not
<br>
</div>

<div class='talk op-msg' data-timestamp='1538001480' id='631976'>
<a class='timestamp' href='#631976'><time timestamp='2018-09-26T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
apparently it&#x27;s broken on OS X &lt;= 10.4
<br>
</div>

<div class='talk op-msg' data-timestamp='1538001480' id='631977'>
<a class='timestamp' href='#631977'><time timestamp='2018-09-26T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the &#x27;brokenness&#x27; I saw reported seems irrelevant to us (or at least has a trivial workaround)
<br>
</div>

<div class='talk op-msg' data-timestamp='1538001480' id='631978'>
<a class='timestamp' href='#631978'><time timestamp='2018-09-26T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the brokenness I saw was that when called with an empty fd set it didn&#x27;t sleep, and instead busylooped.
<br>
</div>

<div class='talk op-msg' data-timestamp='1538001540' id='631979'>
<a class='timestamp' href='#631979'><time timestamp='2018-09-26T22:39:00Z'>22:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1538001540' id='631980'>
<a class='timestamp' href='#631980'><time timestamp='2018-09-26T22:39:00Z'>22:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1538001600' id='631981'>
<a class='timestamp' href='#631981'><time timestamp='2018-09-26T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
well it is possible for us to have no peers but is definitely extremely unusual
<br>
</div>

<div class='talk op-msg' data-timestamp='1538001780' id='631982'>
<a class='timestamp' href='#631982'><time timestamp='2018-09-26T22:43:00Z'>22:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, sure but just add a check if there is an empty fdset, sleep instead of calling poll.
<br>
</div>

<div class='talk op-msg' data-timestamp='1538001780' id='631983'>
<a class='timestamp' href='#631983'><time timestamp='2018-09-26T22:43:00Z'>22:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
which is a perfectly reasonable thing to do.
<br>
</div>

<div class='talk op-msg' data-timestamp='1538002320' id='631984'>
<a class='timestamp' href='#631984'><time timestamp='2018-09-26T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1538002320' id='631985'>
<a class='timestamp' href='#631985'><time timestamp='2018-09-26T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
should probably do the same for select() actually
<br>
</div>

<div class='talk op-msg' data-timestamp='1538002500' id='631986'>
<a class='timestamp' href='#631986'><time timestamp='2018-09-26T22:55:00Z'>22:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea, it would be a simple thing to do.
<br>
</div>

<div class='talk op-msg' data-timestamp='1538002500' id='631987'>
<a class='timestamp' href='#631987'><time timestamp='2018-09-26T22:55:00Z'>22:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I mean, absent bugs, pool/select are a perfectly reasonable way to sleep.
<br>
</div>

<div class='talk op-msg' data-timestamp='1538002800' id='631988'>
<a class='timestamp' href='#631988'><time timestamp='2018-09-26T23:00:00Z'>23:00</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, yeah but bugs lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1538002800' id='631989'>
<a class='timestamp' href='#631989'><time timestamp='2018-09-26T23:00:00Z'>23:00</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
iirc the boost implementation actually uses them in certain cases but as like th absolute final thing it tries
<br>
</div>

<div class='talk op-msg' data-timestamp='1538002920' id='631990'>
<a class='timestamp' href='#631990'><time timestamp='2018-09-26T23:02:00Z'>23:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
poll*
<br>
</div>

<div class='talk op-msg' data-timestamp='1538003280' id='631991'>
<a class='timestamp' href='#631991'><time timestamp='2018-09-26T23:08:00Z'>23:08</time></a>
&lt;<span class='nick nick-6'> TD-Linux</span>&gt;
bitcoin runs on os x 10.4?
<br>
</div>

<div class='talk op-msg' data-timestamp='1538003340' id='631992'>
<a class='timestamp' href='#631992'><time timestamp='2018-09-26T23:09:00Z'>23:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think in the prior discussion we concluded that it didn&#x27;t but then there was some comment that someone somewhere said OSX brought the bug back.
<br>
</div>

<div class='talk op-msg' data-timestamp='1538003880' id='631993'>
<a class='timestamp' href='#631993'><time timestamp='2018-09-26T23:18:00Z'>23:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
fyi - someone seems to have mined an invalid block on testnet, exploiting the duplicate-input issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1538003880' id='631994'>
<a class='timestamp' href='#631994'><time timestamp='2018-09-26T23:18:00Z'>23:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If someone wants a lot of sweet sweet testnet coins, they should start mining with a fixed node. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1538003880' id='631995'>
<a class='timestamp' href='#631995'><time timestamp='2018-09-26T23:18:00Z'>23:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
it&#x27;s currently the most work chain, though there appears to be a competing chain that is not too far behind
<br>
</div>

<div class='talk op-msg' data-timestamp='1538003940' id='631996'>
<a class='timestamp' href='#631996'><time timestamp='2018-09-26T23:19:00Z'>23:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
heh, I mean if you timewarp it it takes seconds to mine a few blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1538004000' id='631997'>
<a class='timestamp' href='#631997'><time timestamp='2018-09-26T23:20:00Z'>23:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
When the fixed chain catches up, all the vulnerable nodes will shut off, as disconnecting the inflation will trigger an assertion.
<br>
</div>

<div class='talk op-msg' data-timestamp='1538004120' id='631998'>
<a class='timestamp' href='#631998'><time timestamp='2018-09-26T23:22:00Z'>23:22</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, also <a href="http://www.greenend.org.uk/rjk/tech/poll.html" class="link" target="_blank">http://www.greenend.org.uk/rjk/tech/poll.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1538004120' id='631999'>
<a class='timestamp' href='#631999'><time timestamp='2018-09-26T23:22:00Z'>23:22</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
doesn&#x27;t actually matter for us since we do the same thing for IN/HUP/ERR
<br>
</div>

<div class='talk op-msg' data-timestamp='1538004120' id='632000'>
<a class='timestamp' href='#632000'><time timestamp='2018-09-26T23:22:00Z'>23:22</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
but none the less something to keep in mind
<br>
</div>

<div class='talk op-msg' data-timestamp='1538004180' id='632001'>
<a class='timestamp' href='#632001'><time timestamp='2018-09-26T23:23:00Z'>23:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
phantomcircuit: dont you have an asic lying around? plz timewarp testnet
<br>
</div>

<div class='talk op-msg' data-timestamp='1538004180' id='632002'>
<a class='timestamp' href='#632002'><time timestamp='2018-09-26T23:23:00Z'>23:23</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
BlueMatt, effort
<br>
</div>

</div>
</section>

</body>
</html>
