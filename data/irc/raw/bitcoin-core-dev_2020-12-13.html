<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2020-12-13
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2020-12-13' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:17 UTC</pre>
<pre><a href="/bitcoin-core-dev/2020-11-13">&lt;</a><span class='header'>  December 2020   </span><a href="/bitcoin-core-dev/2021-01-13">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;       <a class="" href="/bitcoin-core-dev/2020-12-01">1</a>  <a class="" href="/bitcoin-core-dev/2020-12-02">2</a>  <a class="" href="/bitcoin-core-dev/2020-12-03">3</a>  <a class="" href="/bitcoin-core-dev/2020-12-04">4</a>  <a class="" href="/bitcoin-core-dev/2020-12-05">5</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2020-12-06">6</a>  <a class="" href="/bitcoin-core-dev/2020-12-07">7</a>  <a class="" href="/bitcoin-core-dev/2020-12-08">8</a>  <a class="" href="/bitcoin-core-dev/2020-12-09">9</a> <a class="" href="/bitcoin-core-dev/2020-12-10">10</a> <a class="" href="/bitcoin-core-dev/2020-12-11">11</a> <a class="" href="/bitcoin-core-dev/2020-12-12">12</a>  &#x000A;<a class="current" href="/bitcoin-core-dev/2020-12-13">13</a> <a class="" href="/bitcoin-core-dev/2020-12-14">14</a> <a class="" href="/bitcoin-core-dev/2020-12-15">15</a> <a class="" href="/bitcoin-core-dev/2020-12-16">16</a> <a class="" href="/bitcoin-core-dev/2020-12-17">17</a> <a class="" href="/bitcoin-core-dev/2020-12-18">18</a> <a class="" href="/bitcoin-core-dev/2020-12-19">19</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-12-20">20</a> <a class="" href="/bitcoin-core-dev/2020-12-21">21</a> <a class="" href="/bitcoin-core-dev/2020-12-22">22</a> <a class="" href="/bitcoin-core-dev/2020-12-23">23</a> <a class="" href="/bitcoin-core-dev/2020-12-24">24</a> <a class="" href="/bitcoin-core-dev/2020-12-25">25</a> <a class="" href="/bitcoin-core-dev/2020-12-26">26</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-12-27">27</a> <a class="" href="/bitcoin-core-dev/2020-12-28">28</a> <a class="" href="/bitcoin-core-dev/2020-12-29">29</a> <a class="" href="/bitcoin-core-dev/2020-12-30">30</a> <a class="" href="/bitcoin-core-dev/2020-12-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1607817660' id='419524'>
<a class='timestamp' href='#419524'><time timestamp='2020-12-13T00:01:00Z'>00:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
achow101: great!
<br>
</div>

<div class='talk op-msg' data-timestamp='1607817720' id='419525'>
<a class='timestamp' href='#419525'><time timestamp='2020-12-13T00:02:00Z'>00:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
let&#x27;s see if python asncrypto.cms can handle this
<br>
</div>

<div class='talk op-msg' data-timestamp='1607817780' id='419526'>
<a class='timestamp' href='#419526'><time timestamp='2020-12-13T00:03:00Z'>00:03</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I got something!
<br>
</div>

<div class='talk op-msg' data-timestamp='1607817840' id='419527'>
<a class='timestamp' href='#419527'><time timestamp='2020-12-13T00:04:00Z'>00:04</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the tool sipa mentioned earlier seems to work if I pass the CMS data through openssl cms first
<br>
</div>

<div class='talk op-msg' data-timestamp='1607818080' id='419528'>
<a class='timestamp' href='#419528'><time timestamp='2020-12-13T00:08:00Z'>00:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1607818140' id='419529'>
<a class='timestamp' href='#419529'><time timestamp='2020-12-13T00:09:00Z'>00:09</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it&#x27;s hard to tell where the signature is
<br>
</div>

<div class='talk op-msg' data-timestamp='1607818200' id='419530'>
<a class='timestamp' href='#419530'><time timestamp='2020-12-13T00:10:00Z'>00:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
what <b>*kind*</b> of CMS structure is it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607818260' id='419531'>
<a class='timestamp' href='#419531'><time timestamp='2020-12-13T00:11:00Z'>00:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
trying ContentInfo first as that&#x27;s appearntly the normal wrapper type
<br>
</div>

<div class='talk op-msg' data-timestamp='1607818260' id='419532'>
<a class='timestamp' href='#419532'><time timestamp='2020-12-13T00:11:00Z'>00:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ah openssl pkcs7 -in sig -inform der -print seems to come out with something usable
<br>
</div>

<div class='talk op-msg' data-timestamp='1607818320' id='419533'>
<a class='timestamp' href='#419533'><time timestamp='2020-12-13T00:12:00Z'>00:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
bingo content = ContentInfo.load(blob_data) content[&#x27;content_type&#x27;]  &#x27;1.2.840.113549.1.7.2&#x27;: &#x27;signed_data&#x27;,
<br>
</div>

<div class='talk op-msg' data-timestamp='1607818380' id='419534'>
<a class='timestamp' href='#419534'><time timestamp='2020-12-13T00:13:00Z'>00:13</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
The signed hash should be 137856b0cd53ec8e9053f3518b4edf864643138ed548ef61c400068756a2fe48
<br>
</div>

<div class='talk op-msg' data-timestamp='1607818440' id='419535'>
<a class='timestamp' href='#419535'><time timestamp='2020-12-13T00:14:00Z'>00:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
macho binaries aren&#x27;t that intimidating to me anymore :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1607818980' id='419536'>
<a class='timestamp' href='#419536'><time timestamp='2020-12-13T00:23:00Z'>00:23</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
at least we can probably verify the signatures now
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819040' id='419537'>
<a class='timestamp' href='#419537'><time timestamp='2020-12-13T00:24:00Z'>00:24</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I get three different certificatechoices
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819100' id='419538'>
<a class='timestamp' href='#419538'><time timestamp='2020-12-13T00:25:00Z'>00:25</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
what are they?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819460' id='419539'>
<a class='timestamp' href='#419539'><time timestamp='2020-12-13T00:31:00Z'>00:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sha256_rsa sha1_rsa, and another sha256_rsa
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819460' id='419540'>
<a class='timestamp' href='#419540'><time timestamp='2020-12-13T00:31:00Z'>00:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
this is for 0.20.1 fwiw
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819460' id='419541'>
<a class='timestamp' href='#419541'><time timestamp='2020-12-13T00:31:00Z'>00:31</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
should be the same for rc3
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819520' id='419542'>
<a class='timestamp' href='#419542'><time timestamp='2020-12-13T00:32:00Z'>00:32</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I see there are 3 embedded certs: Apple, Devloper ID Certification Authority, and Bitcoin Core Code Signing Association
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819520' id='419543'>
<a class='timestamp' href='#419543'><time timestamp='2020-12-13T00:32:00Z'>00:32</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
presumably it&#x27;s the cert chain
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819580' id='419544'>
<a class='timestamp' href='#419544'><time timestamp='2020-12-13T00:33:00Z'>00:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh that makes sense i guess, have to agree the nesting on this is crazy
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819640' id='419545'>
<a class='timestamp' href='#419545'><time timestamp='2020-12-13T00:34:00Z'>00:34</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
there&#x27;s also a timestamp token thing which seems to be another CMS sig that apple produces
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819700' id='419546'>
<a class='timestamp' href='#419546'><time timestamp='2020-12-13T00:35:00Z'>00:35</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I wonder if codesign is phoning home for every sig
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819700' id='419547'>
<a class='timestamp' href='#419547'><time timestamp='2020-12-13T00:35:00Z'>00:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, it is
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819700' id='419548'>
<a class='timestamp' href='#419548'><time timestamp='2020-12-13T00:35:00Z'>00:35</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
not surprising
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819760' id='419549'>
<a class='timestamp' href='#419549'><time timestamp='2020-12-13T00:36:00Z'>00:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that sounds annoying to replicate
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819760' id='419550'>
<a class='timestamp' href='#419550'><time timestamp='2020-12-13T00:36:00Z'>00:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
depending on the protocol
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819760' id='419551'>
<a class='timestamp' href='#419551'><time timestamp='2020-12-13T00:36:00Z'>00:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
&quot;Set up to call Timestamp server if requested&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819760' id='419552'>
<a class='timestamp' href='#419552'><time timestamp='2020-12-13T00:36:00Z'>00:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
line 820 in signer.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819820' id='419553'>
<a class='timestamp' href='#419553'><time timestamp='2020-12-13T00:37:00Z'>00:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s rfc3161 iir
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819820' id='419554'>
<a class='timestamp' href='#419554'><time timestamp='2020-12-13T00:37:00Z'>00:37</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
should we disable that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819820' id='419555'>
<a class='timestamp' href='#419555'><time timestamp='2020-12-13T00:37:00Z'>00:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the timestamp is used for notarization
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819820' id='419556'>
<a class='timestamp' href='#419556'><time timestamp='2020-12-13T00:37:00Z'>00:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so probably not
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819880' id='419557'>
<a class='timestamp' href='#419557'><time timestamp='2020-12-13T00:38:00Z'>00:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ugh
<br>
</div>

<div class='talk op-msg' data-timestamp='1607819880' id='419558'>
<a class='timestamp' href='#419558'><time timestamp='2020-12-13T00:38:00Z'>00:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
but we don&#x27;t even notarize
<br>
</div>

<div class='talk op-msg' data-timestamp='1607820660' id='419559'>
<a class='timestamp' href='#419559'><time timestamp='2020-12-13T00:51:00Z'>00:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
this looks similar <a href="https://blog.umangis.me/a-deep-dive-into-ios-code-signing/" class="link" target="_blank">https://blog.umangis.me/a-deep-dive-into-ios-code-signing/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607820720' id='419560'>
<a class='timestamp' href='#419560'><time timestamp='2020-12-13T00:52:00Z'>00:52</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
seems so
<br>
</div>

<div class='talk op-msg' data-timestamp='1607820720' id='419561'>
<a class='timestamp' href='#419561'><time timestamp='2020-12-13T00:52:00Z'>00:52</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
from what I can tell, iOS binaries are macho as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1607820780' id='419562'>
<a class='timestamp' href='#419562'><time timestamp='2020-12-13T00:53:00Z'>00:53</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
wumpus: are you currently writing a verification tool?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607820780' id='419563'>
<a class='timestamp' href='#419563'><time timestamp='2020-12-13T00:53:00Z'>00:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
searching for oid 1.2.840.113635.100.9.1 and 1.2.840.113635.100.9.2 (as appear in the CMS OIDs) gives some matches
<br>
</div>

<div class='talk op-msg' data-timestamp='1607820900' id='419564'>
<a class='timestamp' href='#419564'><time timestamp='2020-12-13T00:55:00Z'>00:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
nah just trying to see if asn1crypto.cms in python can make sense of it, and it can, actually verifying anything is far away :): 
<br>
</div>

<div class='talk op-msg' data-timestamp='1607820900' id='419565'>
<a class='timestamp' href='#419565'><time timestamp='2020-12-13T00:55:00Z'>00:55</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I&#x27;ll put together something to extract the hashes so we can at least verify those
<br>
</div>

<div class='talk op-msg' data-timestamp='1607820960' id='419566'>
<a class='timestamp' href='#419566'><time timestamp='2020-12-13T00:56:00Z'>00:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
which oid has the hashlist/hashdict?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607820960' id='419567'>
<a class='timestamp' href='#419567'><time timestamp='2020-12-13T00:56:00Z'>00:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
or is that those 9.1/9.2
<br>
</div>

<div class='talk op-msg' data-timestamp='1607820960' id='419568'>
<a class='timestamp' href='#419568'><time timestamp='2020-12-13T00:56:00Z'>00:56</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
1.2.840.113635.100.9.2 probably
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821020' id='419569'>
<a class='timestamp' href='#419569'><time timestamp='2020-12-13T00:57:00Z'>00:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
they&#x27;re seperate so it makes sense to be those two
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821020' id='419570'>
<a class='timestamp' href='#419570'><time timestamp='2020-12-13T00:57:00Z'>00:57</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
9.1 is the string for a plist file
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821020' id='419571'>
<a class='timestamp' href='#419571'><time timestamp='2020-12-13T00:57:00Z'>00:57</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it does contain the hashes in there
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821080' id='419572'>
<a class='timestamp' href='#419572'><time timestamp='2020-12-13T00:58:00Z'>00:58</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
9.2 is a sequence containing a single bye string that matches the code directory hash
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821140' id='419573'>
<a class='timestamp' href='#419573'><time timestamp='2020-12-13T00:59:00Z'>00:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes that makes sense if it&#x27;s the same data in some legacy format and the new format
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821140' id='419574'>
<a class='timestamp' href='#419574'><time timestamp='2020-12-13T00:59:00Z'>00:59</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the hash in 9.1 is also trunctaed to 20 bytes
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821140' id='419575'>
<a class='timestamp' href='#419575'><time timestamp='2020-12-13T00:59:00Z'>00:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
probably fine to ignore the .1 one
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821140' id='419576'>
<a class='timestamp' href='#419576'><time timestamp='2020-12-13T00:59:00Z'>00:59</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yep
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821560' id='419577'>
<a class='timestamp' href='#419577'><time timestamp='2020-12-13T01:06:00Z'>01:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
by tomorrow morning i&#x27;m sure you guys have a tough compatible signer
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821560' id='419578'>
<a class='timestamp' href='#419578'><time timestamp='2020-12-13T01:06:00Z'>01:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the day after i expect one that doesn&#x27;t need a private key
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821680' id='419579'>
<a class='timestamp' href='#419579'><time timestamp='2020-12-13T01:08:00Z'>01:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok, after some more digging: 1.2.840.113635.100.9.1 is appleHashAgility/SEC_OID_APPLE_HASH_AGILITY/kCMSAttrAppleCodesigningHashAgility, .2 is appleHashAgilityV2/SEC_OID_APPLE_HASH_AGILITY_V2/kCMSAttrAppleCodesigningHashAgilityV2, .3 is appleExpirationTime/SEC_OID_APPLE_EXPIRATION_TIME/kCMSAttrAppleExpirationTime
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821680' id='419580'>
<a class='timestamp' href='#419580'><time timestamp='2020-12-13T01:08:00Z'>01:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: haha yesss
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821740' id='419581'>
<a class='timestamp' href='#419581'><time timestamp='2020-12-13T01:09:00Z'>01:09</time></a>
&lt;<span class='nick nick-12'> * fanquake</span>&gt;
is just waiting for the  TLDR
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821800' id='419582'>
<a class='timestamp' href='#419582'><time timestamp='2020-12-13T01:10:00Z'>01:10</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i&#x27;m sure that once a compatible signer is written, apple will change codesigning
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821800' id='419583'>
<a class='timestamp' href='#419583'><time timestamp='2020-12-13T01:10:00Z'>01:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
fanquake: apple opensource codesign_allocate code behaves differently from the used binary; we found a workaround
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821860' id='419584'>
<a class='timestamp' href='#419584'><time timestamp='2020-12-13T01:11:00Z'>01:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
fanquake: now achow101 and wumpus are trying to reverse engineer the signature format
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821860' id='419585'>
<a class='timestamp' href='#419585'><time timestamp='2020-12-13T01:11:00Z'>01:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
so that we can implement an independent verifier, and maybe an independent signer
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821920' id='419586'>
<a class='timestamp' href='#419586'><time timestamp='2020-12-13T01:12:00Z'>01:12</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Sounds like everything is under control
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821920' id='419587'>
<a class='timestamp' href='#419587'><time timestamp='2020-12-13T01:12:00Z'>01:12</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Apple being a pain in the arse as per usual 
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821980' id='419588'>
<a class='timestamp' href='#419588'><time timestamp='2020-12-13T01:13:00Z'>01:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<a href="https://twitter.com/_jonasschnelli_/status/1337693216167120902" class="link" target="_blank">https://twitter.com/_jonasschnelli_/status/1337693216167120902</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607821980' id='419589'>
<a class='timestamp' href='#419589'><time timestamp='2020-12-13T01:13:00Z'>01:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<a href="https://twitter.com/pwuille/status/1337829501804265472" class="link" target="_blank">https://twitter.com/pwuille/status/1337829501804265472</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822460' id='419590'>
<a class='timestamp' href='#419590'><time timestamp='2020-12-13T01:21:00Z'>01:21</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
is the dmg signature being invalid only an issue when opening the .dmg on macOS Big Sur?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822460' id='419591'>
<a class='timestamp' href='#419591'><time timestamp='2020-12-13T01:21:00Z'>01:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it&#x27;s invalid everywhere
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822460' id='419592'>
<a class='timestamp' href='#419592'><time timestamp='2020-12-13T01:21:00Z'>01:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
when the verifier tries to hash the binary, it&#x27;s literally the wrong hash
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822460' id='419593'>
<a class='timestamp' href='#419593'><time timestamp='2020-12-13T01:21:00Z'>01:21</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
what&#x27;s meant to happen? The .dmg opens fine here
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822520' id='419594'>
<a class='timestamp' href='#419594'><time timestamp='2020-12-13T01:22:00Z'>01:22</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
or does it just fail silently / log something
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822520' id='419595'>
<a class='timestamp' href='#419595'><time timestamp='2020-12-13T01:22:00Z'>01:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the signature is on the binary, not on the dmg i think?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822520' id='419596'>
<a class='timestamp' href='#419596'><time timestamp='2020-12-13T01:22:00Z'>01:22</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
try opening it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822520' id='419597'>
<a class='timestamp' href='#419597'><time timestamp='2020-12-13T01:22:00Z'>01:22</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the app itself
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822520' id='419598'>
<a class='timestamp' href='#419598'><time timestamp='2020-12-13T01:22:00Z'>01:22</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
right, not the .dmg
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822520' id='419599'>
<a class='timestamp' href='#419599'><time timestamp='2020-12-13T01:22:00Z'>01:22</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
if you open the dmg and do the drag into Applications, it should give you the warning
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822520' id='419600'>
<a class='timestamp' href='#419600'><time timestamp='2020-12-13T01:22:00Z'>01:22</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
I can run the app just fine from the cmd  line
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822580' id='419601'>
<a class='timestamp' href='#419601'><time timestamp='2020-12-13T01:23:00Z'>01:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
fanquake: both when doing the actual signing and when attaching the sig to the binary, some changes to the binary need to be made first; the apple tool does this <b>*slightly*</b> differently than their published source code, so the resulting binary after attaching isn&#x27;t exactly identical to what the codesigning app produced
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822580' id='419602'>
<a class='timestamp' href='#419602'><time timestamp='2020-12-13T01:23:00Z'>01:23</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
fanquake: do &quot;codesign -v Bitcoin-Qt.app&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822580' id='419603'>
<a class='timestamp' href='#419603'><time timestamp='2020-12-13T01:23:00Z'>01:23</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
with rc3 installed
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822700' id='419604'>
<a class='timestamp' href='#419604'><time timestamp='2020-12-13T01:25:00Z'>01:25</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Yea i see the invalid signature warnings.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822700' id='419605'>
<a class='timestamp' href='#419605'><time timestamp='2020-12-13T01:25:00Z'>01:25</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
It seems like macOS will only stop you from opening the .app though. You can still run Bitcoin-Qt with an invalid signature
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822700' id='419606'>
<a class='timestamp' href='#419606'><time timestamp='2020-12-13T01:25:00Z'>01:25</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Although that&#x27;s not useful for us
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822760' id='419607'>
<a class='timestamp' href='#419607'><time timestamp='2020-12-13T01:26:00Z'>01:26</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
By Bitcoin-Qt I mean: Bitcoin-Qt.app/Contents/MacOS/Bitcoin-Qt
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822760' id='419608'>
<a class='timestamp' href='#419608'><time timestamp='2020-12-13T01:26:00Z'>01:26</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
fanquake: #20638 for your enjoyment
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822760' id='419609'>
<a class='timestamp' href='#419609'><time timestamp='2020-12-13T01:26:00Z'>01:26</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/20638" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/20638</a> | Mac codesign fixed alloc by achow101 · Pull Request #20638 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1607822820' id='419610'>
<a class='timestamp' href='#419610'><time timestamp='2020-12-13T01:27:00Z'>01:27</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
achow101: Nice. I do enjoy a good write-up
<br>
</div>

<div class='talk op-msg' data-timestamp='1607827020' id='419611'>
<a class='timestamp' href='#419611'><time timestamp='2020-12-13T02:37:00Z'>02:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake pushed 3 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/b18978066d87...ade38b6ee8f9" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/b18978066d87...ade38b6ee8f9</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607827020' id='419612'>
<a class='timestamp' href='#419612'><time timestamp='2020-12-13T02:37:00Z'>02:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master faac315 MarcoFalke: Remove unused and confusing CTransaction constructor
<br>
</div>

<div class='talk op-msg' data-timestamp='1607827020' id='419613'>
<a class='timestamp' href='#419613'><time timestamp='2020-12-13T02:37:00Z'>02:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fac39c1 MarcoFalke: wallet: document that tx in CreateTransaction is purely an out-param
<br>
</div>

<div class='talk op-msg' data-timestamp='1607827020' id='419614'>
<a class='timestamp' href='#419614'><time timestamp='2020-12-13T02:37:00Z'>02:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ade38b6 fanquake: Merge #20588: Remove unused and confusing CTransaction constructor
<br>
</div>

<div class='talk op-msg' data-timestamp='1607827020' id='419615'>
<a class='timestamp' href='#419615'><time timestamp='2020-12-13T02:37:00Z'>02:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake merged pull request #20588: Remove unused and confusing CTransaction constructor (master...2012-txConstructor) <a href="https://github.com/bitcoin/bitcoin/pull/20588" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20588</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607832180' id='419616'>
<a class='timestamp' href='#419616'><time timestamp='2020-12-13T04:03:00Z'>04:03</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theStack opened pull request #20640: wallet, refactor: return out-params of CreateTransaction() as optional struct (master...202012-refactor-wallet-createtransaction-return_out_params_in_optstruct) <a href="https://github.com/bitcoin/bitcoin/pull/20640" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20640</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607840640' id='419617'>
<a class='timestamp' href='#419617'><time timestamp='2020-12-13T06:24:00Z'>06:24</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #20639: doc: fix case of GitHub (master...fix-case-of-github) <a href="https://github.com/bitcoin/bitcoin/pull/20639" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20639</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607842200' id='419618'>
<a class='timestamp' href='#419618'><time timestamp='2020-12-13T06:50:00Z'>06:50</time></a>
&lt;<span class='nick nick-12'> dhruvm</span>&gt;
Networking question: Are legal CIDR netmasks always 1s followed by 0s? i.e. mask=255.96.0.0 is an illegal mask?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607842560' id='419619'>
<a class='timestamp' href='#419619'><time timestamp='2020-12-13T06:56:00Z'>06:56</time></a>
&lt;<span class='nick nick-12'> dhruvm</span>&gt;
I am trying to reason whether given two CIDR subnet representations, it is possible to have partial address overlap between them.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607842620' id='419620'>
<a class='timestamp' href='#419620'><time timestamp='2020-12-13T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no, either they don&#x27;t overlap at all, or one is a subset of the other
<br>
</div>

<div class='talk op-msg' data-timestamp='1607842620' id='419621'>
<a class='timestamp' href='#419621'><time timestamp='2020-12-13T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or identical to it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607842680' id='419622'>
<a class='timestamp' href='#419622'><time timestamp='2020-12-13T06:58:00Z'>06:58</time></a>
&lt;<span class='nick nick-12'> dhruvm</span>&gt;
I see. So, the mask is always 1s followed by 0s then?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607842800' id='419623'>
<a class='timestamp' href='#419623'><time timestamp='2020-12-13T07:00:00Z'>07:00</time></a>
&lt;<span class='nick nick-12'> dhruvm</span>&gt;
They seem to be represented as /32 /24 in most places, but some places I&#x27;ve seen 255.255.0.0 etc which has me confused
<br>
</div>

<div class='talk op-msg' data-timestamp='1607842800' id='419624'>
<a class='timestamp' href='#419624'><time timestamp='2020-12-13T07:00:00Z'>07:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah, in CIDR the netmask has to be 1s and then 0s
<br>
</div>

<div class='talk op-msg' data-timestamp='1607842800' id='419625'>
<a class='timestamp' href='#419625'><time timestamp='2020-12-13T07:00:00Z'>07:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you can have netmask that are not CIDR though
<br>
</div>

<div class='talk op-msg' data-timestamp='1607842860' id='419626'>
<a class='timestamp' href='#419626'><time timestamp='2020-12-13T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
those aren&#x27;t used in practocr afaik though
<br>
</div>

<div class='talk op-msg' data-timestamp='1607842860' id='419627'>
<a class='timestamp' href='#419627'><time timestamp='2020-12-13T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*practice
<br>
</div>

<div class='talk op-msg' data-timestamp='1607842980' id='419628'>
<a class='timestamp' href='#419628'><time timestamp='2020-12-13T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-12'> dhruvm</span>&gt;
thanks sipa
<br>
</div>

<div class='talk op-msg' data-timestamp='1607843400' id='419629'>
<a class='timestamp' href='#419629'><time timestamp='2020-12-13T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yw
<br>
</div>

<div class='talk op-msg' data-timestamp='1607849400' id='419630'>
<a class='timestamp' href='#419630'><time timestamp='2020-12-13T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I upgraded my system and my gitian LXC console can no longer access the internet (it can fetch via apt-cacher-ng, but not the depends packages). Any idea?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607849460' id='419631'>
<a class='timestamp' href='#419631'><time timestamp='2020-12-13T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sudo lxc-execute  -n gitian -f var/lxc.config -- sudo -u root -i -- ping 8.8.8.8                  &lt;- times out
<br>
</div>

<div class='talk op-msg' data-timestamp='1607849640' id='419632'>
<a class='timestamp' href='#419632'><time timestamp='2020-12-13T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: there is that snippet of code you need to run to set up network interfaces
<br>
</div>

<div class='talk op-msg' data-timestamp='1607849640' id='419633'>
<a class='timestamp' href='#419633'><time timestamp='2020-12-13T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: I guess you&#x27;r refering to <a href="https://github.com/bitcoin-core/docs/blob/master/gitian-building/gitian-building-setup-gitian-debian.md#setting-up-debian-for-gitian-building" class="link" target="_blank">https://github.com/bitcoin-core/docs/blob/master/gitian-building/gitian-building-setup-gitian-debian.md#setting-up-debian-for-gitian-building</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607849640' id='419634'>
<a class='timestamp' href='#419634'><time timestamp='2020-12-13T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I did that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607849880' id='419635'>
<a class='timestamp' href='#419635'><time timestamp='2020-12-13T08:58:00Z'>08:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1607849880' id='419636'>
<a class='timestamp' href='#419636'><time timestamp='2020-12-13T08:58:00Z'>08:58</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: what do you have in gitian-builder/var/lxc-config for the key lxc.net.0.ipv4.address?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607849880' id='419637'>
<a class='timestamp' href='#419637'><time timestamp='2020-12-13T08:58:00Z'>08:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i just followed the docs, on a fresh debian install
<br>
</div>

<div class='talk op-msg' data-timestamp='1607849940' id='419638'>
<a class='timestamp' href='#419638'><time timestamp='2020-12-13T08:59:00Z'>08:59</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
and my br0 has inet 10.0.2.2?! shouldn&#x27;t it be 10.0.3.1?!
<br>
</div>

<div class='talk op-msg' data-timestamp='1607858820' id='419639'>
<a class='timestamp' href='#419639'><time timestamp='2020-12-13T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
on my gitian host the host br0 is 10.0.3.2
<br>
</div>

<div class='talk op-msg' data-timestamp='1607860620' id='419640'>
<a class='timestamp' href='#419640'><time timestamp='2020-12-13T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
though as long as they&#x27;re used consistently throughout it doesn&#x27;t really matter what the exact addresses are
<br>
</div>

<div class='talk op-msg' data-timestamp='1607864220' id='419641'>
<a class='timestamp' href='#419641'><time timestamp='2020-12-13T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
achow101: phantomcircuit: FWIW here&#x27;s my (very makeshift) python script from last night that uses macholib and asn1crypto to extract and print the signature information from a macos binary: <a href="https://gist.github.com/laanwj/a0e00bcd3fe4cd2aa1c0803e91310495" class="link" target="_blank">https://gist.github.com/laanwj/a0e00bcd3fe4cd2aa1c0803e91310495</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607864580' id='419642'>
<a class='timestamp' href='#419642'><time timestamp='2020-12-13T13:03:00Z'>13:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
all dependencies are pure python as it is now; but for actual verification it&#x27;s hard to get around openssl i&#x27;m afraid
<br>
</div>

<div class='talk op-msg' data-timestamp='1607865240' id='419643'>
<a class='timestamp' href='#419643'><time timestamp='2020-12-13T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-15'> Talkless</span>&gt;
Anyone using QtCreator to work with bitcoin core? It&#x27;s code model does not find any of bitcoin core includes, all underlined. I&#x27;ve created project as Autotools.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607866620' id='419644'>
<a class='timestamp' href='#419644'><time timestamp='2020-12-13T13:37:00Z'>13:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
i think you need to manually configure somehow what paths to look in for include files 
<br>
</div>

<div class='talk op-msg' data-timestamp='1607868120' id='419645'>
<a class='timestamp' href='#419645'><time timestamp='2020-12-13T14:02:00Z'>14:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
<a href="https://github.com/wbond/certvalidator" class="link" target="_blank">https://github.com/wbond/certvalidator</a> &quot;A Python library for validating X.509 certificates or paths&quot; maybe this is useful
<br>
</div>

<div class='talk op-msg' data-timestamp='1607868540' id='419646'>
<a class='timestamp' href='#419646'><time timestamp='2020-12-13T14:09:00Z'>14:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
some examples <a href="https://github.com/wbond/certvalidator/blob/master/docs/usage.md" class="link" target="_blank">https://github.com/wbond/certvalidator/blob/master/docs/usage.md</a>, iwonder if the simple example simply works
<br>
</div>

<div class='talk op-msg' data-timestamp='1607869320' id='419647'>
<a class='timestamp' href='#419647'><time timestamp='2020-12-13T14:22:00Z'>14:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh that only validates the certificates, not the CMS SignerInfo
<br>
</div>

<div class='talk op-msg' data-timestamp='1607869500' id='419648'>
<a class='timestamp' href='#419648'><time timestamp='2020-12-13T14:25:00Z'>14:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
this handles <b>*some kinds of*</b> SignerINfo, but not the CMS one: <a href="https://github.com/ralphje/signify/blob/master/signify/signerinfo.py" class="link" target="_blank">https://github.com/ralphje/signify/blob/master/signify/signerinfo.py</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607869620' id='419649'>
<a class='timestamp' href='#419649'><time timestamp='2020-12-13T14:27:00Z'>14:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
though rfc2315 and rfc5652 look very similar
<br>
</div>

<div class='talk op-msg' data-timestamp='1607869740' id='419650'>
<a class='timestamp' href='#419650'><time timestamp='2020-12-13T14:29:00Z'>14:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
wait, CMS is RFC 5652
<br>
</div>

<div class='talk op-msg' data-timestamp='1607869860' id='419651'>
<a class='timestamp' href='#419651'><time timestamp='2020-12-13T14:31:00Z'>14:31</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto opened pull request #20641: depends: Use Qt top-level build facilities (master...201213-top) <a href="https://github.com/bitcoin/bitcoin/pull/20641" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20641</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607869920' id='419652'>
<a class='timestamp' href='#419652'><time timestamp='2020-12-13T14:32:00Z'>14:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s just the pyasn naming instead of asn1crypto, because of course, crypto can never be confusing enough
<br>
</div>

<div class='talk op-msg' data-timestamp='1607869980' id='419653'>
<a class='timestamp' href='#419653'><time timestamp='2020-12-13T14:33:00Z'>14:33</time></a>
&lt;<span class='nick nick-4'> jamesob</span>&gt;
hm, when importing a watch-only wallet, is there any risk to using `scantxoutset` to find the oldest UTXO, and then using that as the base block to pass to `rescanblockchain` for that wallet? you might miss the transactions for some spent coins, but wondering if that even matters.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607870040' id='419654'>
<a class='timestamp' href='#419654'><time timestamp='2020-12-13T14:34:00Z'>14:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
we&#x27;ll get there, apparently it is a very similar mechanism as PE authenticode (windows code signing)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607870100' id='419655'>
<a class='timestamp' href='#419655'><time timestamp='2020-12-13T14:35:00Z'>14:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jamesob: you&#x27;d say the resulting balance and utxo set should be the same, would definitely test though
<br>
</div>

<div class='talk op-msg' data-timestamp='1607870100' id='419656'>
<a class='timestamp' href='#419656'><time timestamp='2020-12-13T14:35:00Z'>14:35</time></a>
&lt;<span class='nick nick-4'> jamesob</span>&gt;
wumpus: right, that&#x27;s what I&#x27;d think
<br>
</div>

<div class='talk op-msg' data-timestamp='1607870400' id='419657'>
<a class='timestamp' href='#419657'><time timestamp='2020-12-13T14:40:00Z'>14:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto opened pull request #20642: depends: Drop unneeded patches for qt package (master...201213-patch) <a href="https://github.com/bitcoin/bitcoin/pull/20642" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20642</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607870700' id='419658'>
<a class='timestamp' href='#419658'><time timestamp='2020-12-13T14:45:00Z'>14:45</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
jamesob: you&#x27;d have to guess the range for scantxoutset, though.  If you guess too low then it&#x27;ll look like the wallet is empty.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607870760' id='419659'>
<a class='timestamp' href='#419659'><time timestamp='2020-12-13T14:46:00Z'>14:46</time></a>
&lt;<span class='nick nick-4'> jamesob</span>&gt;
you mean the upper end of the range? I&#x27;d just assume go to tip; I&#x27;m just thinking you could use `scatxoutset` to truncate the lower bound
<br>
</div>

<div class='talk op-msg' data-timestamp='1607870820' id='419660'>
<a class='timestamp' href='#419660'><time timestamp='2020-12-13T14:47:00Z'>14:47</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
jamesob: sorry, I meant the derived address range, which I think non-Bitcoin Core software usually calls the gap limit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607870820' id='419661'>
<a class='timestamp' href='#419661'><time timestamp='2020-12-13T14:47:00Z'>14:47</time></a>
&lt;<span class='nick nick-4'> jamesob</span>&gt;
harding: oh! gotcha; yeah I was talking about the rescan range in height units
<br>
</div>

<div class='talk op-msg' data-timestamp='1607870820' id='419662'>
<a class='timestamp' href='#419662'><time timestamp='2020-12-13T14:47:00Z'>14:47</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
$ bitcoin-cli help scantxoutset | grep &#x27;&quot;range&quot;&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607870820' id='419663'>
<a class='timestamp' href='#419663'><time timestamp='2020-12-13T14:47:00Z'>14:47</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
         &quot;range&quot;: n or [n,n],    (numeric or array, optional, default=1000) The range of HD chain indexes to explore (either end or [begin,end])
<br>
</div>

<div class='talk op-msg' data-timestamp='1607870880' id='419664'>
<a class='timestamp' href='#419664'><time timestamp='2020-12-13T14:48:00Z'>14:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
maybe the best way forward is to add apple macho verification support to signify and upstream it; conceptually it&#x27;s similar and there&#x27;s bound to be so much shared code, e.g. this is the signature extraction and check for signed PE files: <a href="https://github.com/ralphje/signify/blob/master/signify/signed_pe.py" class="link" target="_blank">https://github.com/ralphje/signify/blob/master/signify/signed_pe.py</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607878080' id='419665'>
<a class='timestamp' href='#419665'><time timestamp='2020-12-13T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
okay, scrap that, of couuurse pyasn1 (in contrast to asn1crypto) can&#x27;t parse the signature data, well let&#x27;s see if i can get it to work with that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607879220' id='419666'>
<a class='timestamp' href='#419666'><time timestamp='2020-12-13T17:07:00Z'>17:07</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Will we want a BIP 44 coin type index for Signet? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1607879220' id='419667'>
<a class='timestamp' href='#419667'><time timestamp='2020-12-13T17:07:00Z'>17:07</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
The default Signet
<br>
</div>

<div class='talk op-msg' data-timestamp='1607879280' id='419668'>
<a class='timestamp' href='#419668'><time timestamp='2020-12-13T17:08:00Z'>17:08</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Looking at the registered coin types for BIP 44. Sooooo many s***coins <a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md" class="link" target="_blank">https://github.com/satoshilabs/slips/blob/master/slip-0044.md</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607879340' id='419669'>
<a class='timestamp' href='#419669'><time timestamp='2020-12-13T17:09:00Z'>17:09</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Perhaps too early. Perhaps should only be considered once Signet is more stable/mature
<br>
</div>

<div class='talk op-msg' data-timestamp='1607880420' id='419670'>
<a class='timestamp' href='#419670'><time timestamp='2020-12-13T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
wow i got it to validate
<br>
</div>

<div class='talk op-msg' data-timestamp='1607880540' id='419671'>
<a class='timestamp' href='#419671'><time timestamp='2020-12-13T17:29:00Z'>17:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
michaelfolkson: the consensus seems to be that new testnets will simply use testnet&#x27;s parameters
<br>
</div>

<div class='talk op-msg' data-timestamp='1607880900' id='419672'>
<a class='timestamp' href='#419672'><time timestamp='2020-12-13T17:35:00Z'>17:35</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
wumpus: Are there any parameters (descriptors, HD wallet, network etc) where this could pose problems? I guess it only gets complicated if the user is switching between testnet and signet
<br>
</div>

<div class='talk op-msg' data-timestamp='1607880960' id='419673'>
<a class='timestamp' href='#419673'><time timestamp='2020-12-13T17:36:00Z'>17:36</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
And presumably not many will be doing that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607880960' id='419674'>
<a class='timestamp' href='#419674'><time timestamp='2020-12-13T17:36:00Z'>17:36</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
(regularly switching back and forth I mean)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607880960' id='419675'>
<a class='timestamp' href='#419675'><time timestamp='2020-12-13T17:36:00Z'>17:36</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
michaelfolkson: signet is for testing only. any problems, you get to pick up pieces ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607881020' id='419676'>
<a class='timestamp' href='#419676'><time timestamp='2020-12-13T17:37:00Z'>17:37</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
user is assumed to know what he is doing
<br>
</div>

<div class='talk op-msg' data-timestamp='1607881140' id='419677'>
<a class='timestamp' href='#419677'><time timestamp='2020-12-13T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
luke-jr: I guess... would still be nice to help them avoid unnecessary gotchas perhaps
<br>
</div>

<div class='talk op-msg' data-timestamp='1607882700' id='419678'>
<a class='timestamp' href='#419678'><time timestamp='2020-12-13T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
wumpus: nice! does it rely on openssl for the validation?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607882760' id='419679'>
<a class='timestamp' href='#419679'><time timestamp='2020-12-13T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
achow101: it uses oscrypto.asymmetric, no idea what that uses internally
<br>
</div>

<div class='talk op-msg' data-timestamp='1607882760' id='419680'>
<a class='timestamp' href='#419680'><time timestamp='2020-12-13T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
can you update the gist?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607882820' id='419681'>
<a class='timestamp' href='#419681'><time timestamp='2020-12-13T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1607883120' id='419682'>
<a class='timestamp' href='#419682'><time timestamp='2020-12-13T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
achow101: updated, note that it doesn&#x27;t verify the intermediate certificate chain yet, only the final signatures on the SignerDatas
<br>
</div>

<div class='talk op-msg' data-timestamp='1607883120' id='419683'>
<a class='timestamp' href='#419683'><time timestamp='2020-12-13T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
great
<br>
</div>

<div class='talk op-msg' data-timestamp='1607883240' id='419684'>
<a class='timestamp' href='#419684'><time timestamp='2020-12-13T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I tried to use certvalidator to do that, but it gets into problems, even when manually providing the sorted certificate chain to the path validator it barks on some apple-specific extension <b>*shrug*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607883360' id='419685'>
<a class='timestamp' href='#419685'><time timestamp='2020-12-13T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s cool to find so much code that <b>*almost*</b> does what i want but is just that little bit off
<br>
</div>

<div class='talk op-msg' data-timestamp='1607885400' id='419686'>
<a class='timestamp' href='#419686'><time timestamp='2020-12-13T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok, updated gist again, it can now optionally validate the certificate chain (however, this required a one-line patch to certvalidator unfortunately)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607885640' id='419687'>
<a class='timestamp' href='#419687'><time timestamp='2020-12-13T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
awesome
<br>
</div>

<div class='talk op-msg' data-timestamp='1607885700' id='419688'>
<a class='timestamp' href='#419688'><time timestamp='2020-12-13T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
shall I try to gbuild and detach-sign 20638?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607885760' id='419689'>
<a class='timestamp' href='#419689'><time timestamp='2020-12-13T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
or are you guys in the middle of fixing the internet?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607885820' id='419690'>
<a class='timestamp' href='#419690'><time timestamp='2020-12-13T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
#20638
<br>
</div>

<div class='talk op-msg' data-timestamp='1607885820' id='419691'>
<a class='timestamp' href='#419691'><time timestamp='2020-12-13T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/20638" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/20638</a> | build: Fix macOS code signing by pre-allocating space for the code signature during gitian build by achow101 · Pull Request #20638 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1607885820' id='419692'>
<a class='timestamp' href='#419692'><time timestamp='2020-12-13T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: yeah, try please
<br>
</div>

<div class='talk op-msg' data-timestamp='1607885940' id='419693'>
<a class='timestamp' href='#419693'><time timestamp='2020-12-13T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: i guess we&#x27;re working on a tool that checks the signature (i wrote the part that validates the CMS envelope, achow101 the part that checks hashes against the binary), this doesn&#x27;t replace or delay #20638
<br>
</div>

<div class='talk op-msg' data-timestamp='1607885940' id='419694'>
<a class='timestamp' href='#419694'><time timestamp='2020-12-13T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/20638" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/20638</a> | build: Fix macOS code signing by pre-allocating space for the code signature during gitian build by achow101 · Pull Request #20638 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886000' id='419695'>
<a class='timestamp' href='#419695'><time timestamp='2020-12-13T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
wumpus: are you sure that it&#x27;s validating the right thing? the data being passed into verify is more than just the hash of the CodeDirectory
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886000' id='419696'>
<a class='timestamp' href='#419696'><time timestamp='2020-12-13T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it also seems like it hashes the data too
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886060' id='419697'>
<a class='timestamp' href='#419697'><time timestamp='2020-12-13T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;m pretty sure it validtes the right thing, the SignerInfos contain signed_attrs that has the list of hashes
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886060' id='419698'>
<a class='timestamp' href='#419698'><time timestamp='2020-12-13T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
my script doesn&#x27;t validate the actual hashes against the binary of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886060' id='419699'>
<a class='timestamp' href='#419699'><time timestamp='2020-12-13T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
right, that&#x27;s the part I&#x27;m adding to it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886120' id='419700'>
<a class='timestamp' href='#419700'><time timestamp='2020-12-13T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
do you know where to find the page sizes used?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886120' id='419701'>
<a class='timestamp' href='#419701'><time timestamp='2020-12-13T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i&#x27;d be surprised if the verify is able to pull out the hashes from the &quot;signed_attrs&quot; because that seems like some apple specific stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886120' id='419702'>
<a class='timestamp' href='#419702'><time timestamp='2020-12-13T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sipa: it&#x27;s embedded in CodeDirectory
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886120' id='419703'>
<a class='timestamp' href='#419703'><time timestamp='2020-12-13T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
or do you mean in the source?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886240' id='419704'>
<a class='timestamp' href='#419704'><time timestamp='2020-12-13T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: just wondering if you can account for that (so that it&#x27;d keep working if a different page size is used at some point)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886240' id='419705'>
<a class='timestamp' href='#419705'><time timestamp='2020-12-13T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yep, definitely accounting for that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886240' id='419706'>
<a class='timestamp' href='#419706'><time timestamp='2020-12-13T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus, achow101: easy to test if it&#x27;s validating the right thing; if you damage the signature, does it fail?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886300' id='419707'>
<a class='timestamp' href='#419707'><time timestamp='2020-12-13T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or better, damage the message being signed
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886360' id='419708'>
<a class='timestamp' href='#419708'><time timestamp='2020-12-13T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
to get out your hashes data you need for attr in signerinfo[&#x27;signed_attrs&#x27;]: if attr[&#x27;type&#x27;].native == SEC_OID_APPLE_HASH_AGILITY_V2: print(attr[&#x27;values&#x27;][0].contents)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886420' id='419709'>
<a class='timestamp' href='#419709'><time timestamp='2020-12-13T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that gets the byte data, which i guess is simply concatenated hashes
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886480' id='419710'>
<a class='timestamp' href='#419710'><time timestamp='2020-12-13T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it can extract everything, it&#x27;s of no help parsing it of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886600' id='419711'>
<a class='timestamp' href='#419711'><time timestamp='2020-12-13T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
there&#x27;s a field named &quot;message_digest&quot; that I&#x27;m trying to grab
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886600' id='419712'>
<a class='timestamp' href='#419712'><time timestamp='2020-12-13T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
that&#x27;s not an apple specific thing apparently
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886660' id='419713'>
<a class='timestamp' href='#419713'><time timestamp='2020-12-13T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
apparently the hash is in the sig 3 times in 3 different fields
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886720' id='419714'>
<a class='timestamp' href='#419714'><time timestamp='2020-12-13T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
attr[&#x27;type&#x27;].native == &#x27;message_digest&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886720' id='419715'>
<a class='timestamp' href='#419715'><time timestamp='2020-12-13T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
also, oscrypto uses openssl in the backend
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886720' id='419716'>
<a class='timestamp' href='#419716'><time timestamp='2020-12-13T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes it seems so, on linux
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886840' id='419717'>
<a class='timestamp' href='#419717'><time timestamp='2020-12-13T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: 6b2c9ac15da01cc4fa3951059fdf44c4eebd432288af6691ef94604f601b9ab9  bitcoin-6753b74195d8-osx-unsigned.tar.gz
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886840' id='419718'>
<a class='timestamp' href='#419718'><time timestamp='2020-12-13T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
in any case if you can find something else that does the &quot;rsa_pkcs1v15_verify&quot; i guess it&#x27;d be straightforward to replace
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886900' id='419719'>
<a class='timestamp' href='#419719'><time timestamp='2020-12-13T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: yes, damaging either the signature or data makes it fail
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886960' id='419720'>
<a class='timestamp' href='#419720'><time timestamp='2020-12-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
bad new
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886960' id='419721'>
<a class='timestamp' href='#419721'><time timestamp='2020-12-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
+s
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886960' id='419722'>
<a class='timestamp' href='#419722'><time timestamp='2020-12-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
dist/Bitcoin-Qt.app: invalid or unsupported format for signature
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886960' id='419723'>
<a class='timestamp' href='#419723'><time timestamp='2020-12-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
when calling ./detached-sig-create.sh -s &quot;Bitcoin&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886960' id='419724'>
<a class='timestamp' href='#419724'><time timestamp='2020-12-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
^ achow101 
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886960' id='419725'>
<a class='timestamp' href='#419725'><time timestamp='2020-12-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ugh
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886960' id='419726'>
<a class='timestamp' href='#419726'><time timestamp='2020-12-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
eh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607886960' id='419727'>
<a class='timestamp' href='#419727'><time timestamp='2020-12-13T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
damnit
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887020' id='419728'>
<a class='timestamp' href='#419728'><time timestamp='2020-12-13T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it detects that too much space was added?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887020' id='419729'>
<a class='timestamp' href='#419729'><time timestamp='2020-12-13T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
probably
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887020' id='419730'>
<a class='timestamp' href='#419730'><time timestamp='2020-12-13T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or that it has too much space which isn&quot;t 0x2000 aligned?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887020' id='419731'>
<a class='timestamp' href='#419731'><time timestamp='2020-12-13T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
no, it tries to parse existing signatures
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887020' id='419732'>
<a class='timestamp' href='#419732'><time timestamp='2020-12-13T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887020' id='419733'>
<a class='timestamp' href='#419733'><time timestamp='2020-12-13T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it&#x27;s all 0&#x27;s, so obviouslyu it doesn&#x27;t parse
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887020' id='419734'>
<a class='timestamp' href='#419734'><time timestamp='2020-12-13T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I thought the -f option we give it ignores that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887140' id='419735'>
<a class='timestamp' href='#419735'><time timestamp='2020-12-13T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
The file has a MP_EMPTY_SPACE of size 8, then MP_CODE_SIG with size 256208
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887200' id='419736'>
<a class='timestamp' href='#419736'><time timestamp='2020-12-13T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: -f option?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887200' id='419737'>
<a class='timestamp' href='#419737'><time timestamp='2020-12-13T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
--force
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887200' id='419738'>
<a class='timestamp' href='#419738'><time timestamp='2020-12-13T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what binary is called that fails?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887260' id='419739'>
<a class='timestamp' href='#419739'><time timestamp='2020-12-13T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: I ran  ./detached-sig-create.sh but I guess the one that matter is the dist/Bitcoin-Qt.app/Contents/MacOS/Bitcoin-Qt
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887260' id='419740'>
<a class='timestamp' href='#419740'><time timestamp='2020-12-13T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: but your PR doesn&#x27;t add --force or -f
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887260' id='419741'>
<a class='timestamp' href='#419741'><time timestamp='2020-12-13T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it&#x27;s already there
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887260' id='419742'>
<a class='timestamp' href='#419742'><time timestamp='2020-12-13T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
look at the codesign command in detached-sig-create
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887260' id='419743'>
<a class='timestamp' href='#419743'><time timestamp='2020-12-13T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: i mean what tool is called that gives that error
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887260' id='419744'>
<a class='timestamp' href='#419744'><time timestamp='2020-12-13T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
let me look...
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887320' id='419745'>
<a class='timestamp' href='#419745'><time timestamp='2020-12-13T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
is it codesign or something else
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887320' id='419746'>
<a class='timestamp' href='#419746'><time timestamp='2020-12-13T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
set -x tells me: + codesign -f --file-list sign.temp/signatures.txt -s Bitcoin dist/Bitcoin-Qt.app
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887320' id='419747'>
<a class='timestamp' href='#419747'><time timestamp='2020-12-13T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it&#x27;s codesign
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887380' id='419748'>
<a class='timestamp' href='#419748'><time timestamp='2020-12-13T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
stupid question: why can&#x27;t we just use the open source variant of codesign (if that exists)? to match codesign_allocate?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887380' id='419749'>
<a class='timestamp' href='#419749'><time timestamp='2020-12-13T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
mmm, what if we cut off the allocated space?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887440' id='419750'>
<a class='timestamp' href='#419750'><time timestamp='2020-12-13T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: there&#x27;s no open source variant of codesign. codesign also requires codesign_allocate to be signed by apple, so we can&#x27;t use the open source variant of that either
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887440' id='419751'>
<a class='timestamp' href='#419751'><time timestamp='2020-12-13T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: codesign only accepts apple-signed versions of codesign_allocate
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887440' id='419752'>
<a class='timestamp' href='#419752'><time timestamp='2020-12-13T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
&quot;If the CODESIGN_ALLOCATE environment variable is set, it identifies a substitute codesign_allocate tool used to allocate space for code signatures in Mach-O binaries. This is used by Xcode SDK distributions to provide architectural support for non-native platforms such as iPhones.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887440' id='419753'>
<a class='timestamp' href='#419753'><time timestamp='2020-12-13T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
     The system will not accept such substitutes unless they are specially signed (by Apple).&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887440' id='419754'>
<a class='timestamp' href='#419754'><time timestamp='2020-12-13T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
hmm.. apple style again
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887500' id='419755'>
<a class='timestamp' href='#419755'><time timestamp='2020-12-13T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we can also try patching our codesign_allocate to roubd to 0x2000
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887500' id='419756'>
<a class='timestamp' href='#419756'><time timestamp='2020-12-13T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s a bit more brittle, but i don&#x27;t see how it can fail
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887680' id='419757'>
<a class='timestamp' href='#419757'><time timestamp='2020-12-13T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
should we also file a bug at apples issue tracker for a long term fix of this?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887740' id='419758'>
<a class='timestamp' href='#419758'><time timestamp='2020-12-13T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
they have one?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607887740' id='419759'>
<a class='timestamp' href='#419759'><time timestamp='2020-12-13T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
hmm, what if we put in an empty SuperBlob?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888100' id='419760'>
<a class='timestamp' href='#419760'><time timestamp='2020-12-13T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: if you do &quot;printf &quot;\xfa\xde\x0c\xc0&quot; | dd of=dist/Bitcoin-Qt.app/Contents/MacOS/Bitcoin-Qt bs=1 seek=26391600 count=4 conv=notrunc&quot; and then try to sign, does it work?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888100' id='419761'>
<a class='timestamp' href='#419761'><time timestamp='2020-12-13T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-12'> * jonasschnelli</span>&gt;
doing...
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888160' id='419762'>
<a class='timestamp' href='#419762'><time timestamp='2020-12-13T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
still getting: dist/Bitcoin-Qt.app: invalid or unsupported format for signature
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888160' id='419763'>
<a class='timestamp' href='#419763'><time timestamp='2020-12-13T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
darn
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888220' id='419764'>
<a class='timestamp' href='#419764'><time timestamp='2020-12-13T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
what if we overwrite the bytes with an &quot;valid&quot; signature we extract from a successful signing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888280' id='419765'>
<a class='timestamp' href='#419765'><time timestamp='2020-12-13T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa opened pull request #20644: Add patch to make codesign_allocate compatible with Apple&#x27;s (master...202012_codesign_allocate_segalign) <a href="https://github.com/bitcoin/bitcoin/pull/20644" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20644</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888280' id='419766'>
<a class='timestamp' href='#419766'><time timestamp='2020-12-13T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: can you try that? ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888280' id='419767'>
<a class='timestamp' href='#419767'><time timestamp='2020-12-13T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(entirely untested)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888280' id='419768'>
<a class='timestamp' href='#419768'><time timestamp='2020-12-13T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: would probably work
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888280' id='419769'>
<a class='timestamp' href='#419769'><time timestamp='2020-12-13T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
okay.. I&#x27;ll clear the cache and run it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888340' id='419770'>
<a class='timestamp' href='#419770'><time timestamp='2020-12-13T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: I mean you could probably replace the zero signature (the allocation) with the largest signature you find in 0.12
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888340' id='419771'>
<a class='timestamp' href='#419771'><time timestamp='2020-12-13T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
maybe the tool only validates the header or so,.. so combining with the allocation hack might work?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888340' id='419772'>
<a class='timestamp' href='#419772'><time timestamp='2020-12-13T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
trying sipa patch now
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888400' id='419773'>
<a class='timestamp' href='#419773'><time timestamp='2020-12-13T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
with the -f option, codesign will only warn if the existing sig is invalid. but I guess it needs to be properly formatted first
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888400' id='419774'>
<a class='timestamp' href='#419774'><time timestamp='2020-12-13T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
maybe not even warn
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888400' id='419775'>
<a class='timestamp' href='#419775'><time timestamp='2020-12-13T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
so you could try to apply the rc3 sig to the pr&#x27;s build and then sign that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888460' id='419776'>
<a class='timestamp' href='#419776'><time timestamp='2020-12-13T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: what does codesign_allocate do with the existing sig? Just expand?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888460' id='419777'>
<a class='timestamp' href='#419777'><time timestamp='2020-12-13T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(I mean in your PR)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888460' id='419778'>
<a class='timestamp' href='#419778'><time timestamp='2020-12-13T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888460' id='419779'>
<a class='timestamp' href='#419779'><time timestamp='2020-12-13T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
that could work...
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888460' id='419780'>
<a class='timestamp' href='#419780'><time timestamp='2020-12-13T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
wumpus: huh, I guess it does sign the whole &quot;signed_attrs&quot; thing and not just the message digest as I previously thought
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888460' id='419781'>
<a class='timestamp' href='#419781'><time timestamp='2020-12-13T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But how would I apply the sig?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888520' id='419782'>
<a class='timestamp' href='#419782'><time timestamp='2020-12-13T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
run detached-sig-apply.sh locally
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888520' id='419783'>
<a class='timestamp' href='#419783'><time timestamp='2020-12-13T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
yes... I could try that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888640' id='419784'>
<a class='timestamp' href='#419784'><time timestamp='2020-12-13T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
my PR doesn&#x27;t work
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888640' id='419785'>
<a class='timestamp' href='#419785'><time timestamp='2020-12-13T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
fixing
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888760' id='419786'>
<a class='timestamp' href='#419786'><time timestamp='2020-12-13T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: can I take a unsigned.tar.gz from master,... manually apply the sig (detached-sig-apply.sh) on linux, execute your patch ${CODESIGN_ALLOCATE} -i ${BINARY_RESULT} -a x86_64 ${SIG_SIZE_EST} -o ${BINARY_RESULT} and then try to sign on OSX?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888760' id='419787'>
<a class='timestamp' href='#419787'><time timestamp='2020-12-13T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
without gitian at all?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888760' id='419788'>
<a class='timestamp' href='#419788'><time timestamp='2020-12-13T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I can take the same cc_tools (form the cache)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888820' id='419789'>
<a class='timestamp' href='#419789'><time timestamp='2020-12-13T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
to test, the sig creation, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888820' id='419790'>
<a class='timestamp' href='#419790'><time timestamp='2020-12-13T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: so 6e9f0fa7f7ce95cc4ddf0e5cc4c49ab75361efe7 is it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888880' id='419791'>
<a class='timestamp' href='#419791'><time timestamp='2020-12-13T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: yup
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888880' id='419792'>
<a class='timestamp' href='#419792'><time timestamp='2020-12-13T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
unfortunately, this working isn&#x27;t a guarantee it will always work
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888880' id='419793'>
<a class='timestamp' href='#419793'><time timestamp='2020-12-13T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
because the build may randomly be 0x2000 aligned
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888940' id='419794'>
<a class='timestamp' href='#419794'><time timestamp='2020-12-13T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: could we detect this easly?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888940' id='419795'>
<a class='timestamp' href='#419795'><time timestamp='2020-12-13T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(well,... wumpus verification tool would)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888940' id='419796'>
<a class='timestamp' href='#419796'><time timestamp='2020-12-13T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: is there some kind of dev testing code signing cert? I&#x27;d like to be able to test this stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1607888940' id='419797'>
<a class='timestamp' href='#419797'><time timestamp='2020-12-13T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: sure. I can try to make you one
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889000' id='419798'>
<a class='timestamp' href='#419798'><time timestamp='2020-12-13T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
There&#x27;s no apple default?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889000' id='419799'>
<a class='timestamp' href='#419799'><time timestamp='2020-12-13T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I don&#x27;t know
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889000' id='419800'>
<a class='timestamp' href='#419800'><time timestamp='2020-12-13T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ah, i&#x27;ll look into it later
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889000' id='419801'>
<a class='timestamp' href='#419801'><time timestamp='2020-12-13T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess if I hand you out a different certificate, end uses would have no plan/idea to differenciate those
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889000' id='419802'>
<a class='timestamp' href='#419802'><time timestamp='2020-12-13T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889060' id='419803'>
<a class='timestamp' href='#419803'><time timestamp='2020-12-13T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you won&#x27;t have a certificate chain leading back to apple
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889060' id='419804'>
<a class='timestamp' href='#419804'><time timestamp='2020-12-13T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or perhaps one which doesn&#x27;t convey codesigning rights
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889120' id='419805'>
<a class='timestamp' href='#419805'><time timestamp='2020-12-13T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I wouldn&#x27;t be surprised if apple didn&#x27;t let you sign with such a cert
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889120' id='419806'>
<a class='timestamp' href='#419806'><time timestamp='2020-12-13T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: so your cctools patch is only relevant for the signing step? I don&#x27;t need to rebuild the actual unsigned release build?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889180' id='419807'>
<a class='timestamp' href='#419807'><time timestamp='2020-12-13T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
it only affects detached-sig-apply.sh, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889180' id='419808'>
<a class='timestamp' href='#419808'><time timestamp='2020-12-13T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889240' id='419809'>
<a class='timestamp' href='#419809'><time timestamp='2020-12-13T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: right
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889240' id='419810'>
<a class='timestamp' href='#419810'><time timestamp='2020-12-13T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ah, there&#x27;s instructions for a self signed cert. this may work
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889300' id='419811'>
<a class='timestamp' href='#419811'><time timestamp='2020-12-13T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
but! gitian-osx-signer.yml does not build the depends? So I need to clear the cache and do the release build anyways
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889360' id='419812'>
<a class='timestamp' href='#419812'><time timestamp='2020-12-13T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah right
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889360' id='419813'>
<a class='timestamp' href='#419813'><time timestamp='2020-12-13T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you need it because the signing step uses the binaries produced in the unsigned build step
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889360' id='419814'>
<a class='timestamp' href='#419814'><time timestamp='2020-12-13T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889420' id='419815'>
<a class='timestamp' href='#419815'><time timestamp='2020-12-13T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ugh
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889420' id='419816'>
<a class='timestamp' href='#419816'><time timestamp='2020-12-13T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
my patch fails
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889480' id='419817'>
<a class='timestamp' href='#419817'><time timestamp='2020-12-13T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sorry i will test this more and get back
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889480' id='419818'>
<a class='timestamp' href='#419818'><time timestamp='2020-12-13T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: sure. No hurry
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889840' id='419819'>
<a class='timestamp' href='#419819'><time timestamp='2020-12-13T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
at this point it feels like the long term solution is to write our own codesigning tool
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889960' id='419820'>
<a class='timestamp' href='#419820'><time timestamp='2020-12-13T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sounds like you&#x27;re well on the way to do that :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889960' id='419821'>
<a class='timestamp' href='#419821'><time timestamp='2020-12-13T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you have a tool that can verify signatures, signing doesn&#x27;t sound too far away
<br>
</div>

<div class='talk op-msg' data-timestamp='1607889960' id='419822'>
<a class='timestamp' href='#419822'><time timestamp='2020-12-13T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
signing is probably 2 orders of magnitude harder than verification
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890020' id='419823'>
<a class='timestamp' href='#419823'><time timestamp='2020-12-13T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the current unknown things being how to generate Info.plist, CodeResources file, and the internal requirements blob
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890020' id='419824'>
<a class='timestamp' href='#419824'><time timestamp='2020-12-13T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: fatal error: /home/jonasschnelli/bitcoin-depends2/depends/x86_64-apple-darwin20/native/bin/x86_64-apple-darwin20-codesign_allocate: size for &#x27;-a x86_64 258611375&#x27; not a multiple of 16
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890080' id='419825'>
<a class='timestamp' href='#419825'><time timestamp='2020-12-13T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
round up to a multiple of 16
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890080' id='419826'>
<a class='timestamp' href='#419826'><time timestamp='2020-12-13T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
stat -c %s signed-app/Bitcoin-Qt.app/Contents/MacOS/Bitcoin-Qt 
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890080' id='419827'>
<a class='timestamp' href='#419827'><time timestamp='2020-12-13T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
-&gt; 26698160
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890080' id='419828'>
<a class='timestamp' href='#419828'><time timestamp='2020-12-13T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
oh, I totally forgot about that didn&#x27;t I
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890140' id='419829'>
<a class='timestamp' href='#419829'><time timestamp='2020-12-13T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
((((26698160 / 4096) + 1) * 32) + 50000) == 258611375
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890140' id='419830'>
<a class='timestamp' href='#419830'><time timestamp='2020-12-13T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
use 51200 instead of 50000
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890140' id='419831'>
<a class='timestamp' href='#419831'><time timestamp='2020-12-13T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
50*1024
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890140' id='419832'>
<a class='timestamp' href='#419832'><time timestamp='2020-12-13T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or so
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890140' id='419833'>
<a class='timestamp' href='#419833'><time timestamp='2020-12-13T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
can I round up to 258611376?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890140' id='419834'>
<a class='timestamp' href='#419834'><time timestamp='2020-12-13T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
26698160 to
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890140' id='419835'>
<a class='timestamp' href='#419835'><time timestamp='2020-12-13T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
258611376
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890140' id='419836'>
<a class='timestamp' href='#419836'><time timestamp='2020-12-13T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ahm.. no
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890200' id='419837'>
<a class='timestamp' href='#419837'><time timestamp='2020-12-13T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how do i see files inside lxc?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890200' id='419838'>
<a class='timestamp' href='#419838'><time timestamp='2020-12-13T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
lxc-attach
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890200' id='419839'>
<a class='timestamp' href='#419839'><time timestamp='2020-12-13T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hmm?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890260' id='419840'>
<a class='timestamp' href='#419840'><time timestamp='2020-12-13T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
my build failed and it created a file with the rejected patch description
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890260' id='419841'>
<a class='timestamp' href='#419841'><time timestamp='2020-12-13T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sudo lxc-attach -n gitian -f var/lxc.config
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890260' id='419842'>
<a class='timestamp' href='#419842'><time timestamp='2020-12-13T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(and you should get a shell of your lxc container)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890260' id='419843'>
<a class='timestamp' href='#419843'><time timestamp='2020-12-13T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
make sure you are in the gitian-builder dir
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890260' id='419844'>
<a class='timestamp' href='#419844'><time timestamp='2020-12-13T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
1095 failed to get init pid
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890320' id='419845'>
<a class='timestamp' href='#419845'><time timestamp='2020-12-13T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
oh.. dunno
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890320' id='419846'>
<a class='timestamp' href='#419846'><time timestamp='2020-12-13T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sudo lxc-start -n gitian -f var/lxc.config   (maybe that first)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890320' id='419847'>
<a class='timestamp' href='#419847'><time timestamp='2020-12-13T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
thanks, works!
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890560' id='419848'>
<a class='timestamp' href='#419848'><time timestamp='2020-12-13T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it just fails to apple the patch
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890560' id='419849'>
<a class='timestamp' href='#419849'><time timestamp='2020-12-13T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that makes no sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890560' id='419850'>
<a class='timestamp' href='#419850'><time timestamp='2020-12-13T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
seems to be very apple-y
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890620' id='419851'>
<a class='timestamp' href='#419851'><time timestamp='2020-12-13T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890620' id='419852'>
<a class='timestamp' href='#419852'><time timestamp='2020-12-13T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that was a typo
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890620' id='419853'>
<a class='timestamp' href='#419853'><time timestamp='2020-12-13T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: still getting dist/Bitcoin-Qt.app: invalid or unsupported format for signature
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890680' id='419854'>
<a class='timestamp' href='#419854'><time timestamp='2020-12-13T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(when manually apply the signature on linux with /detached-sig-apply.sh, adding the codesign_allocate thing and trying to sign again
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890680' id='419855'>
<a class='timestamp' href='#419855'><time timestamp='2020-12-13T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
do codesign_allocate first then detached sig apply?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890680' id='419856'>
<a class='timestamp' href='#419856'><time timestamp='2020-12-13T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
no.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890680' id='419857'>
<a class='timestamp' href='#419857'><time timestamp='2020-12-13T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
codesign_allocate might be overwriting the sig with 0s
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890980' id='419858'>
<a class='timestamp' href='#419858'><time timestamp='2020-12-13T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101 the other way around work for signing...
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890980' id='419859'>
<a class='timestamp' href='#419859'><time timestamp='2020-12-13T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(I mean for successful signing on my mac)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890980' id='419860'>
<a class='timestamp' href='#419860'><time timestamp='2020-12-13T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yay
<br>
</div>

<div class='talk op-msg' data-timestamp='1607890980' id='419861'>
<a class='timestamp' href='#419861'><time timestamp='2020-12-13T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
dist/Bitcoin-Qt.app: replacing existing signature
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891040' id='419862'>
<a class='timestamp' href='#419862'><time timestamp='2020-12-13T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
this is such a stupid workaround
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891040' id='419863'>
<a class='timestamp' href='#419863'><time timestamp='2020-12-13T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
shall I try to use this detached signature to build the release?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891040' id='419864'>
<a class='timestamp' href='#419864'><time timestamp='2020-12-13T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
to be clear, you did codesign-allocate with the overestimate, applied some other signature, then signed
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891040' id='419865'>
<a class='timestamp' href='#419865'><time timestamp='2020-12-13T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yes, try that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891100' id='419866'>
<a class='timestamp' href='#419866'><time timestamp='2020-12-13T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
yes...
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891100' id='419867'>
<a class='timestamp' href='#419867'><time timestamp='2020-12-13T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I did: /home/jonasschnelli/bitcoin-depends2/depends/x86_64-apple-darwin20/native/bin/x86_64-apple-darwin20-codesign_allocate -i dist/Bitcoin-Qt.app/Contents/MacOS/Bitcoin-Qt -a x86_64 258611376 -o dist/Bitcoin-Qt.app/Contents/MacOS/Bitcoin-Qt
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891100' id='419868'>
<a class='timestamp' href='#419868'><time timestamp='2020-12-13T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
tar -czf bitcoin-0.21.0rc3-osx-unsigned.tar.gz ./
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891160' id='419869'>
<a class='timestamp' href='#419869'><time timestamp='2020-12-13T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
./detached-sig-apply.sh bitcoin-0.21.0rc3-osx-unsigned.tar.gz ../bitcoin-detached-sigs/osx (&lt;--- the git repo for the signatures)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891160' id='419870'>
<a class='timestamp' href='#419870'><time timestamp='2020-12-13T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok it seems copy-pasting the &quot;git diff&quot; output introduced some space/tab changes...
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891160' id='419871'>
<a class='timestamp' href='#419871'><time timestamp='2020-12-13T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: awesome
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891160' id='419872'>
<a class='timestamp' href='#419872'><time timestamp='2020-12-13T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
let me 2bl check first
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891220' id='419873'>
<a class='timestamp' href='#419873'><time timestamp='2020-12-13T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. I think I have done that correctly
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891280' id='419874'>
<a class='timestamp' href='#419874'><time timestamp='2020-12-13T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I mean I can just try to apply this signature I created on my mac no on linux with  ./detached-sig-apply.sh
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891280' id='419875'>
<a class='timestamp' href='#419875'><time timestamp='2020-12-13T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891280' id='419876'>
<a class='timestamp' href='#419876'><time timestamp='2020-12-13T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
no need for gitian
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891280' id='419877'>
<a class='timestamp' href='#419877'><time timestamp='2020-12-13T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i believe so
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891280' id='419878'>
<a class='timestamp' href='#419878'><time timestamp='2020-12-13T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yea
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891640' id='419879'>
<a class='timestamp' href='#419879'><time timestamp='2020-12-13T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: ok gitian manages to compile native_cctools with my patch now
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891640' id='419880'>
<a class='timestamp' href='#419880'><time timestamp='2020-12-13T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
The dbl-signing approach seems not to work
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891640' id='419881'>
<a class='timestamp' href='#419881'><time timestamp='2020-12-13T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you want to try (if the other approach works, also fine of course)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891700' id='419882'>
<a class='timestamp' href='#419882'><time timestamp='2020-12-13T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: how so?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891700' id='419883'>
<a class='timestamp' href='#419883'><time timestamp='2020-12-13T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
What I did:
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891700' id='419884'>
<a class='timestamp' href='#419884'><time timestamp='2020-12-13T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
1. I replace the signature in the detached-signtaure local repo with the one I just successfully did on my mac (after codesign_allocate on linux
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891760' id='419885'>
<a class='timestamp' href='#419885'><time timestamp='2020-12-13T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
2. on linux, I executed      ./detached-sig-apply.sh bitcoin-0.21.0rc3-osx-unsigned-2.tar.gz ../bitcoin-detached-sigs/osx
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891760' id='419886'>
<a class='timestamp' href='#419886'><time timestamp='2020-12-13T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(bitcoin-0.21.0rc3-osx-unsigned-2.tar.gz is from the rc3 release, unsigned, untouched)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891760' id='419887'>
<a class='timestamp' href='#419887'><time timestamp='2020-12-13T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(../bitcoin-detached-sigs/osx hold the new signature)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891820' id='419888'>
<a class='timestamp' href='#419888'><time timestamp='2020-12-13T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
then downloaded signed-app/Bitcoin-Qt.app to my mac
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891820' id='419889'>
<a class='timestamp' href='#419889'><time timestamp='2020-12-13T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: for the final apply, you need to use the one that had the codesign-allocate and bad sig thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891820' id='419890'>
<a class='timestamp' href='#419890'><time timestamp='2020-12-13T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: ah... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891820' id='419891'>
<a class='timestamp' href='#419891'><time timestamp='2020-12-13T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
okay.. let me try that
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891880' id='419892'>
<a class='timestamp' href='#419892'><time timestamp='2020-12-13T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: still getting /Users/jonasschnelli/Desktop/Bitcoin-Qt.app: invalid Info.plist (plist or signature have been modified)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891940' id='419893'>
<a class='timestamp' href='#419893'><time timestamp='2020-12-13T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Maybe I did something wrong...
<br>
</div>

<div class='talk op-msg' data-timestamp='1607891940' id='419894'>
<a class='timestamp' href='#419894'><time timestamp='2020-12-13T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
let me upload some files so you can test it
<br>
</div>

<div class='talk op-msg' data-timestamp='1607892000' id='419895'>
<a class='timestamp' href='#419895'><time timestamp='2020-12-13T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
you started with the original rc3?
<br>
</div>

<div class='talk op-msg' data-timestamp='1607892000' id='419896'>
<a class='timestamp' href='#419896'><time timestamp='2020-12-13T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
<a href="https://bitcoin.jonasschnelli.ch/bitcoin-0.21.0rc3-osx-unsigned-dbl-sign.tar.gz" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/bitcoin-0.21.0rc3-osx-unsigned-dbl-sign.tar.gz</a>   (&lt;--- the 1. codesign_alloc, apply rc3 sig)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607892180' id='419897'>
<a class='timestamp' href='#419897'><time timestamp='2020-12-13T20:43:00Z'>20:43</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
<a href="https://bitcoin.jonasschnelli.ch/signature-osx-dbl-sign.tar.gz" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/signature-osx-dbl-sign.tar.gz</a> (&lt;--- the output from detach-sig-create on my mac which run successful on the output above)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607892360' id='419898'>
<a class='timestamp' href='#419898'><time timestamp='2020-12-13T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: ok, gitian unsigned build with my patch works (which doesn&#x27;t mean much, aS the codesign_allocate tool hasn&#x27;t been invoked)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607892360' id='419899'>
<a class='timestamp' href='#419899'><time timestamp='2020-12-13T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: somehow the Info.plist hash doesn&#x27;t match.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607892360' id='419900'>
<a class='timestamp' href='#419900'><time timestamp='2020-12-13T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: okay... I try that asap
<br>
</div>

<div class='talk op-msg' data-timestamp='1607892420' id='419901'>
<a class='timestamp' href='#419901'><time timestamp='2020-12-13T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: I&#x27;m going to fixup my pr and I think we should try again from scratch
<br>
</div>

<div class='talk op-msg' data-timestamp='1607892420' id='419902'>
<a class='timestamp' href='#419902'><time timestamp='2020-12-13T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: yes. Lets do that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607892420' id='419903'>
<a class='timestamp' href='#419903'><time timestamp='2020-12-13T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think I mixed up your PR with rc3 (different version numbers)
<br>
</div>

<div class='talk op-msg' data-timestamp='1607892420' id='419904'>
<a class='timestamp' href='#419904'><time timestamp='2020-12-13T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1607892480' id='419905'>
<a class='timestamp' href='#419905'><time timestamp='2020-12-13T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
okay.. gbuilding a4118c6e200e02e7560f8bc213697aa2909d95b1
<br>
</div>

<div class='talk op-msg' data-timestamp='1607893020' id='419906'>
<a class='timestamp' href='#419906'><time timestamp='2020-12-13T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I can&#x27;t use the rc3 sig for the cctool patch test,.. since it&#x27;s master now and has different version numbers.
<br>
</div>

<div class='talk op-msg' data-timestamp='1607893020' id='419907'>
<a class='timestamp' href='#419907'><time timestamp='2020-12-13T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
So trying to sign independent
<br>
</div>

<div class='talk op-msg' data-timestamp='1607893080' id='419908'>
<a class='timestamp' href='#419908'><time timestamp='2020-12-13T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I hoped by deleting the cctools only in the cache, I can avoid rebuilding the whole dependencies.... but it looks like it builds everything again
<br>
</div>

<div class='talk op-msg' data-timestamp='1607893320' id='419909'>
<a class='timestamp' href='#419909'><time timestamp='2020-12-13T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I have to continue tomorrow (10pm here,... will start again in 11h)...
<br>
</div>

<div class='talk op-msg' data-timestamp='1607897160' id='419910'>
<a class='timestamp' href='#419910'><time timestamp='2020-12-13T22:06:00Z'>22:06</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
updated wumpus&#x27;s script to do hash checking <a href="https://gist.github.com/achow101/fef2415d99965de66ac083b54b83df6e" class="link" target="_blank">https://gist.github.com/achow101/fef2415d99965de66ac083b54b83df6e</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607899020' id='419911'>
<a class='timestamp' href='#419911'><time timestamp='2020-12-13T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonatack opened pull request #20646: p2p: do not disconnect post-verack sendaddrv2 on signet (master...signet-keep-post-verack-sendaddrv2-peers) <a href="https://github.com/bitcoin/bitcoin/pull/20646" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20646</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1607900820' id='419912'>
<a class='timestamp' href='#419912'><time timestamp='2020-12-13T23:07:00Z'>23:07</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sipa: does your pr gitian build? I have a self signed cert so I can test codesigning now
<br>
</div>

<div class='talk op-msg' data-timestamp='1607901180' id='419913'>
<a class='timestamp' href='#419913'><time timestamp='2020-12-13T23:13:00Z'>23:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1607901180' id='419914'>
<a class='timestamp' href='#419914'><time timestamp='2020-12-13T23:13:00Z'>23:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i did a gitian build of the unsigned stage myself
<br>
</div>

</div>
</section>

</body>
</html>
