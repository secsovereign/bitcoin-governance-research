<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2020-09-24
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2020-09-24' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:17 UTC</pre>
<pre><a href="/bitcoin-core-dev/2020-08-24">&lt;</a><span class='header'>  September 2020  </span><a href="/bitcoin-core-dev/2020-10-24">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;       <a class="" href="/bitcoin-core-dev/2020-09-01">1</a>  <a class="" href="/bitcoin-core-dev/2020-09-02">2</a>  <a class="" href="/bitcoin-core-dev/2020-09-03">3</a>  <a class="" href="/bitcoin-core-dev/2020-09-04">4</a>  <a class="" href="/bitcoin-core-dev/2020-09-05">5</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2020-09-06">6</a>  <a class="" href="/bitcoin-core-dev/2020-09-07">7</a>  <a class="" href="/bitcoin-core-dev/2020-09-08">8</a>  <a class="" href="/bitcoin-core-dev/2020-09-09">9</a> <a class="" href="/bitcoin-core-dev/2020-09-10">10</a> <a class="" href="/bitcoin-core-dev/2020-09-11">11</a> <a class="" href="/bitcoin-core-dev/2020-09-12">12</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-09-13">13</a> <a class="" href="/bitcoin-core-dev/2020-09-14">14</a> <a class="" href="/bitcoin-core-dev/2020-09-15">15</a> <a class="" href="/bitcoin-core-dev/2020-09-16">16</a> <a class="" href="/bitcoin-core-dev/2020-09-17">17</a> <a class="" href="/bitcoin-core-dev/2020-09-18">18</a> <a class="" href="/bitcoin-core-dev/2020-09-19">19</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-09-20">20</a> <a class="" href="/bitcoin-core-dev/2020-09-21">21</a> <a class="" href="/bitcoin-core-dev/2020-09-22">22</a> <a class="" href="/bitcoin-core-dev/2020-09-23">23</a> <a class="current" href="/bitcoin-core-dev/2020-09-24">24</a> <a class="" href="/bitcoin-core-dev/2020-09-25">25</a> <a class="" href="/bitcoin-core-dev/2020-09-26">26</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-09-27">27</a> <a class="" href="/bitcoin-core-dev/2020-09-28">28</a> <a class="" href="/bitcoin-core-dev/2020-09-29">29</a> <a class="" href="/bitcoin-core-dev/2020-09-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1600914120' id='405234'>
<a class='timestamp' href='#405234'><time timestamp='2020-09-24T02:22:00Z'>02:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
FWIW, I just had a 0.13 wallet go corrupt (so sipa&#x27;s instance probably wasn&#x27;t a regression)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600915560' id='405235'>
<a class='timestamp' href='#405235'><time timestamp='2020-09-24T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
anyone know off-hand what GCC we use in gitian builds? :x
<br>
</div>

<div class='talk op-msg' data-timestamp='1600915680' id='405236'>
<a class='timestamp' href='#405236'><time timestamp='2020-09-24T02:48:00Z'>02:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
linux builds use bionic, so GCC 7 i believe
<br>
</div>

<div class='talk op-msg' data-timestamp='1600915860' id='405237'>
<a class='timestamp' href='#405237'><time timestamp='2020-09-24T02:51:00Z'>02:51</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: do you happen to know this bug in detail enough, to be able to reasonably tell if we would be affected at all?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600915980' id='405238'>
<a class='timestamp' href='#405238'><time timestamp='2020-09-24T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I suppose the only way to be <u>_sure_</u> would be to do a before/after build using GCC master and master minus 1
<br>
</div>

<div class='talk op-msg' data-timestamp='1600915980' id='405239'>
<a class='timestamp' href='#405239'><time timestamp='2020-09-24T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: affected, i think yes - in particular the cnetaddr code may incorrectly classify IP addresses
<br>
</div>

<div class='talk op-msg' data-timestamp='1600915980' id='405240'>
<a class='timestamp' href='#405240'><time timestamp='2020-09-24T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;ll look deeper into whether that is actually an issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1600916400' id='405241'>
<a class='timestamp' href='#405241'><time timestamp='2020-09-24T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
it would be funny if compilers turned memcmp(…) &gt; -2 and  memcmp(…) &lt; 2 into a constant 1 &lt;.&lt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1600916460' id='405242'>
<a class='timestamp' href='#405242'><time timestamp='2020-09-24T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
actually, looking at the code in 0.20, and my understanding of the bug, i don&#x27;t see why it wouldn&#x27;t make IsIPv4() return true for literally every address
<br>
</div>

<div class='talk op-msg' data-timestamp='1600916580' id='405243'>
<a class='timestamp' href='#405243'><time timestamp='2020-09-24T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so i&#x27;m probably misunderstanding the bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1600916820' id='405244'>
<a class='timestamp' href='#405244'><time timestamp='2020-09-24T03:07:00Z'>03:07</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
h mm
<br>
</div>

<div class='talk op-msg' data-timestamp='1600916940' id='405245'>
<a class='timestamp' href='#405245'><time timestamp='2020-09-24T03:09:00Z'>03:09</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
Based on my limited experimation it does seem limited to cases where the static array begins with 0.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600916940' id='405246'>
<a class='timestamp' href='#405246'><time timestamp='2020-09-24T03:09:00Z'>03:09</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
Though I don&#x27;t really understand why.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600916940' id='405247'>
<a class='timestamp' href='#405247'><time timestamp='2020-09-24T03:09:00Z'>03:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that happens to be the case for the IsIPv4 code
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917060' id='405248'>
<a class='timestamp' href='#405248'><time timestamp='2020-09-24T03:11:00Z'>03:11</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
is it constexpr?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917120' id='405249'>
<a class='timestamp' href='#405249'><time timestamp='2020-09-24T03:12:00Z'>03:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it should be
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917120' id='405250'>
<a class='timestamp' href='#405250'><time timestamp='2020-09-24T03:12:00Z'>03:12</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
FWIW it looks like the fix is a clean apply to 10.2, so I&#x27;m doing a before/after build
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917120' id='405251'>
<a class='timestamp' href='#405251'><time timestamp='2020-09-24T03:12:00Z'>03:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what fix? to what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917180' id='405252'>
<a class='timestamp' href='#405252'><time timestamp='2020-09-24T03:13:00Z'>03:13</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
<a href="https://gcc.gnu.org/git/?p=gcc.git;a=patch;h=d5803b9876b3d11c93d1a10fabb3fbb1c4a14bd6;hp=3e99ed65cbedf7a6c0abb9cd63c191326995fd34" class="link" target="_blank">https://gcc.gnu.org/git/?p=gcc.git;a=patch;h=d5803b9876b3d11c93d1a10fabb3fbb1c4a14bd6;hp=3e99ed65cbedf7a6c0abb9cd63c191326995fd34</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917180' id='405253'>
<a class='timestamp' href='#405253'><time timestamp='2020-09-24T03:13:00Z'>03:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/blob/v0.20.1/src/netaddress.cpp#L12" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/v0.20.1/src/netaddress.cpp#L12</a> and <a href="https://github.com/bitcoin/bitcoin/blob/v0.20.1/src/netaddress.cpp#L127" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/v0.20.1/src/netaddress.cpp#L127</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917180' id='405254'>
<a class='timestamp' href='#405254'><time timestamp='2020-09-24T03:13:00Z'>03:13</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: I&#x27;m building Knots with 10.2 and then 10.2 patched with the fix, then comparing to see if anything changed
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917240' id='405255'>
<a class='timestamp' href='#405255'><time timestamp='2020-09-24T03:14:00Z'>03:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, good idea
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917240' id='405256'>
<a class='timestamp' href='#405256'><time timestamp='2020-09-24T03:14:00Z'>03:14</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
Does IsIPv4 always return true?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917300' id='405257'>
<a class='timestamp' href='#405257'><time timestamp='2020-09-24T03:15:00Z'>03:15</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I guess if it only affects a minority of nodes, it could and we might not notice?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917300' id='405258'>
<a class='timestamp' href='#405258'><time timestamp='2020-09-24T03:15:00Z'>03:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
this test should fail: <a href="https://github.com/bitcoin/bitcoin/blob/v0.20.1/src/test/netbase_tests.cpp#L53" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/v0.20.1/src/test/netbase_tests.cpp#L53</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917360' id='405259'>
<a class='timestamp' href='#405259'><time timestamp='2020-09-24T03:16:00Z'>03:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(is IsIPv6() calls !IsIPv4() &amp;&amp; ...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917360' id='405260'>
<a class='timestamp' href='#405260'><time timestamp='2020-09-24T03:16:00Z'>03:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hrm
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917540' id='405261'>
<a class='timestamp' href='#405261'><time timestamp='2020-09-24T03:19:00Z'>03:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
doh, was building with LLVM
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917540' id='405262'>
<a class='timestamp' href='#405262'><time timestamp='2020-09-24T03:19:00Z'>03:19</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
starts over quickly
<br>
</div>

<div class='talk op-msg' data-timestamp='1600917840' id='405263'>
<a class='timestamp' href='#405263'><time timestamp='2020-09-24T03:24:00Z'>03:24</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ajtowns closed pull request #19970: sync.h: fix LockAssertion error reporting (master...202009-lockassertion) <a href="https://github.com/bitcoin/bitcoin/pull/19970" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19970</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600918200' id='405264'>
<a class='timestamp' href='#405264'><time timestamp='2020-09-24T03:30:00Z'>03:30</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/blob/0.20/src/netaddress.cpp#L237" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/0.20/src/netaddress.cpp#L237</a> also. ... assuming that IsIPv4 somehow isn&#x27;t always returning true.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600918260' id='405265'>
<a class='timestamp' href='#405265'><time timestamp='2020-09-24T03:31:00Z'>03:31</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
Though that test file does seem to be run.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600930860' id='405266'>
<a class='timestamp' href='#405266'><time timestamp='2020-09-24T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
sipa: technically it was thursday when you said &#x27;hi&#x27; 12 hours ago. it just wasn&#x27;t thursday in the right place (it was thursday in japan tho)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600933980' id='405267'>
<a class='timestamp' href='#405267'><time timestamp='2020-09-24T07:53:00Z'>07:53</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] naumenkogs closed pull request #19958: p2p: Better document features of feelers (master...2020-09-rename-feeler-to-probe) <a href="https://github.com/bitcoin/bitcoin/pull/19958" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19958</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600933980' id='405268'>
<a class='timestamp' href='#405268'><time timestamp='2020-09-24T07:53:00Z'>07:53</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] naumenkogs reopened pull request #19958: p2p: Better document features of feelers (master...2020-09-rename-feeler-to-probe) <a href="https://github.com/bitcoin/bitcoin/pull/19958" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19958</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600935120' id='405269'>
<a class='timestamp' href='#405269'><time timestamp='2020-09-24T08:12:00Z'>08:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
kallewoof: timezones are evil
<br>
</div>

<div class='talk op-msg' data-timestamp='1600936860' id='405270'>
<a class='timestamp' href='#405270'><time timestamp='2020-09-24T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #20008: [Backport] #19839 and #19842 to v0.20 (0.20...2020-09-appveyor-backport) <a href="https://github.com/bitcoin/bitcoin/pull/20008" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20008</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600936920' id='405271'>
<a class='timestamp' href='#405271'><time timestamp='2020-09-24T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
wumpus: those appveyor commits fixed my issue. I&#x27;ve opened a PR to just backport those two commits. Thanks for your help!
<br>
</div>

<div class='talk op-msg' data-timestamp='1600940940' id='405272'>
<a class='timestamp' href='#405272'><time timestamp='2020-09-24T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] naumenkogs closed pull request #19843: Refactoring and minor improvement for self-advertisements (master...2020-08-refactor-advertiselocal) <a href="https://github.com/bitcoin/bitcoin/pull/19843" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19843</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600940940' id='405273'>
<a class='timestamp' href='#405273'><time timestamp='2020-09-24T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] naumenkogs reopened pull request #19843: Refactoring and minor improvement for self-advertisements (master...2020-08-refactor-advertiselocal) <a href="https://github.com/bitcoin/bitcoin/pull/19843" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19843</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600948620' id='405274'>
<a class='timestamp' href='#405274'><time timestamp='2020-09-24T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jnewbery: great! yes, seems good to backport them separately and get them in first
<br>
</div>

<div class='talk op-msg' data-timestamp='1600949280' id='405275'>
<a class='timestamp' href='#405275'><time timestamp='2020-09-24T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 3 commits to 0.20: <a href="https://github.com/bitcoin/bitcoin/compare/30926997fa15...80aa83aa4064" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/30926997fa15...80aa83aa4064</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600949280' id='405276'>
<a class='timestamp' href='#405276'><time timestamp='2020-09-24T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/0.20 ad99777 Aaron Clauson: Set appveyor vm version to previous Visual Studio 2019 release.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600949280' id='405277'>
<a class='timestamp' href='#405277'><time timestamp='2020-09-24T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/0.20 498b7cb Aaron Clauson: Update the vcpkg checkout commit ID in appveyor config.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600949280' id='405278'>
<a class='timestamp' href='#405278'><time timestamp='2020-09-24T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/0.20 80aa83a Wladimir J. van der Laan: Merge #20008: [Backport] #19839 and #19842 to v0.20
<br>
</div>

<div class='talk op-msg' data-timestamp='1600949280' id='405279'>
<a class='timestamp' href='#405279'><time timestamp='2020-09-24T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj merged pull request #20008: [Backport] #19839 and #19842 to v0.20 (0.20...2020-09-appveyor-backport) <a href="https://github.com/bitcoin/bitcoin/pull/20008" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20008</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600950180' id='405280'>
<a class='timestamp' href='#405280'><time timestamp='2020-09-24T12:23:00Z'>12:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery closed pull request #19759: [doc] Struct members should have m_ prefix (master...2020-08-struct-members) <a href="https://github.com/bitcoin/bitcoin/pull/19759" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19759</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600972560' id='405281'>
<a class='timestamp' href='#405281'><time timestamp='2020-09-24T18:36:00Z'>18:36</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: a ton of CNetAddr stuff is changed
<br>
</div>

<div class='talk op-msg' data-timestamp='1600972680' id='405282'>
<a class='timestamp' href='#405282'><time timestamp='2020-09-24T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: yes, i was talking about the 0.20.1 codebase fwiw
<br>
</div>

<div class='talk op-msg' data-timestamp='1600972680' id='405283'>
<a class='timestamp' href='#405283'><time timestamp='2020-09-24T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think it&#x27;s the same in master though
<br>
</div>

<div class='talk op-msg' data-timestamp='1600972740' id='405284'>
<a class='timestamp' href='#405284'><time timestamp='2020-09-24T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
<u>_ZN26PartiallySignedTransaction11UnserializeI11CDataStreamEEvRT_</u>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600972800' id='405285'>
<a class='timestamp' href='#405285'><time timestamp='2020-09-24T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
this seems to be the worst of it
<br>
</div>

<div class='talk op-msg' data-timestamp='1600972800' id='405286'>
<a class='timestamp' href='#405286'><time timestamp='2020-09-24T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s a function you see changed with the gcc patch?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600972920' id='405287'>
<a class='timestamp' href='#405287'><time timestamp='2020-09-24T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1600972920' id='405288'>
<a class='timestamp' href='#405288'><time timestamp='2020-09-24T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
is there a good way to get objdump disassembly without addresses and similar diff-complicating stuff?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600973100' id='405289'>
<a class='timestamp' href='#405289'><time timestamp='2020-09-24T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
<a href="https://dpaste.com/23HQPNBF4" class="link" target="_blank">https://dpaste.com/23HQPNBF4</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600973220' id='405290'>
<a class='timestamp' href='#405290'><time timestamp='2020-09-24T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
list of changed code symbols: <a href="https://dpaste.com/GU4GPSPB8" class="link" target="_blank">https://dpaste.com/GU4GPSPB8</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974000' id='405291'>
<a class='timestamp' href='#405291'><time timestamp='2020-09-24T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
(been offline from IRC for two weeks. If there are any questions I missed, let me know)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974000' id='405292'>
<a class='timestamp' href='#405292'><time timestamp='2020-09-24T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Also meeting time?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974000' id='405293'>
<a class='timestamp' href='#405293'><time timestamp='2020-09-24T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
jep
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974060' id='405294'>
<a class='timestamp' href='#405294'><time timestamp='2020-09-24T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974060' id='405295'>
<a class='timestamp' href='#405295'><time timestamp='2020-09-24T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
MarcoFalke: wb
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405296'>
<a class='timestamp' href='#405296'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
sipa: The qa-assets can be cloned with --depth=1, but it shouldn&#x27;t make a difference right now, as all files were append only
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405297'>
<a class='timestamp' href='#405297'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Might change when we start deleting fuzz seeds
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405298'>
<a class='timestamp' href='#405298'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#startmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405299'>
<a class='timestamp' href='#405299'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Meeting started Thu Sep 24 19:02:37 2020 UTC.  The chair is wumpus. Information about MeetBot at <a href="http://wiki.debian.org/MeetBot" class="link" target="_blank">http://wiki.debian.org/MeetBot</a>.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405300'>
<a class='timestamp' href='#405300'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Useful Commands: #action #agreed #help #info #idea #link #topic.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405301'>
<a class='timestamp' href='#405301'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405302'>
<a class='timestamp' href='#405302'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405303'>
<a class='timestamp' href='#405303'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405304'>
<a class='timestamp' href='#405304'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-14'> hebasto</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405305'>
<a class='timestamp' href='#405305'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405306'>
<a class='timestamp' href='#405306'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-8'> fjahr</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405307'>
<a class='timestamp' href='#405307'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405308'>
<a class='timestamp' href='#405308'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974120' id='405309'>
<a class='timestamp' href='#405309'><time timestamp='2020-09-24T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974180' id='405310'>
<a class='timestamp' href='#405310'><time timestamp='2020-09-24T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#bitcoin-core-dev Meeting: wumpus sipa gmaxwell jonasschnelli morcos luke-jr sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier jl2012 achow101 meshcollider jnewbery maaku fanquake promag provoostenator aj Chris_Stewart_5 dongcarl gwillen jamesob ken281221 ryanofsky gleb moneyball kvaciral ariard digi_james
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974180' id='405311'>
<a class='timestamp' href='#405311'><time timestamp='2020-09-24T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
amiti fjahr jeremyrubin lightlike emilengler jonatack hebasto jb55 elichai2
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974180' id='405312'>
<a class='timestamp' href='#405312'><time timestamp='2020-09-24T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974180' id='405313'>
<a class='timestamp' href='#405313'><time timestamp='2020-09-24T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974180' id='405314'>
<a class='timestamp' href='#405314'><time timestamp='2020-09-24T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
one proposed topic: what sipa just said (will have to look up in the log what :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974240' id='405315'>
<a class='timestamp' href='#405315'><time timestamp='2020-09-24T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: #20005
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974240' id='405316'>
<a class='timestamp' href='#405316'><time timestamp='2020-09-24T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/20005" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/20005</a> | memcmp with constants that contain zero bytes are broken in GCC · Issue #20005 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974240' id='405317'>
<a class='timestamp' href='#405317'><time timestamp='2020-09-24T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
<a href="https://dpaste.com/GU4GPSPB8" class="link" target="_blank">https://dpaste.com/GU4GPSPB8</a> &lt;-- affected symbols in bitcoind
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974240' id='405318'>
<a class='timestamp' href='#405318'><time timestamp='2020-09-24T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974240' id='405319'>
<a class='timestamp' href='#405319'><time timestamp='2020-09-24T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I see
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974300' id='405320'>
<a class='timestamp' href='#405320'><time timestamp='2020-09-24T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah i just wanted to draw attention to this potentially very scary bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974300' id='405321'>
<a class='timestamp' href='#405321'><time timestamp='2020-09-24T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
how did they manage to break such a basic library function
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974300' id='405322'>
<a class='timestamp' href='#405322'><time timestamp='2020-09-24T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974300' id='405323'>
<a class='timestamp' href='#405323'><time timestamp='2020-09-24T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: they turned it into strcmp sometimes it looks like
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974300' id='405324'>
<a class='timestamp' href='#405324'><time timestamp='2020-09-24T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: it&#x27;s not a libc bug, it&#x27;s bug in gcc&#x27;s implementation of __builtin_memcmp
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974300' id='405325'>
<a class='timestamp' href='#405325'><time timestamp='2020-09-24T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
at least the consensus code seems to have dodged it
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974360' id='405326'>
<a class='timestamp' href='#405326'><time timestamp='2020-09-24T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but otherwise yes, this is really concerning
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974360' id='405327'>
<a class='timestamp' href='#405327'><time timestamp='2020-09-24T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i believe none of our gitian builds are affected, as we use older GCCs
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974360' id='405328'>
<a class='timestamp' href='#405328'><time timestamp='2020-09-24T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
can someone verify that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974360' id='405329'>
<a class='timestamp' href='#405329'><time timestamp='2020-09-24T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s at least good to know, let me see
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974360' id='405330'>
<a class='timestamp' href='#405330'><time timestamp='2020-09-24T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
macOS build should use LLVM IIRC
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974360' id='405331'>
<a class='timestamp' href='#405331'><time timestamp='2020-09-24T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974420' id='405332'>
<a class='timestamp' href='#405332'><time timestamp='2020-09-24T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sipa: is this a generaly class of bugs do you reckon or pretty specific to memcmp? should we be auditing all builtins?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974420' id='405333'>
<a class='timestamp' href='#405333'><time timestamp='2020-09-24T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
sipa: Gitian should use 7 and 8 
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974420' id='405334'>
<a class='timestamp' href='#405334'><time timestamp='2020-09-24T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I <b>*assume*</b> LLVM didn&#x27;t reimplement this bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974420' id='405335'>
<a class='timestamp' href='#405335'><time timestamp='2020-09-24T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gcc 8 it seems
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974420' id='405336'>
<a class='timestamp' href='#405336'><time timestamp='2020-09-24T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jeremyrubin: i don&#x27;t think we have the manpower to do actual auditing of all of gcc&#x27;s builtins (and other potential bugs), nor is that our job
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974420' id='405337'>
<a class='timestamp' href='#405337'><time timestamp='2020-09-24T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
bionic uses gcc 7, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974480' id='405338'>
<a class='timestamp' href='#405338'><time timestamp='2020-09-24T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974480' id='405339'>
<a class='timestamp' href='#405339'><time timestamp='2020-09-24T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: but we explicitly install 8 for some platforms
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974480' id='405340'>
<a class='timestamp' href='#405340'><time timestamp='2020-09-24T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
^
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974480' id='405341'>
<a class='timestamp' href='#405341'><time timestamp='2020-09-24T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jeremyrubin: i think it&#x27;s important to note that while the bug was known, we stumbled upon it in the libsecp256k1 repo, in a test
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974480' id='405342'>
<a class='timestamp' href='#405342'><time timestamp='2020-09-24T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Ah. Yes. Arm / risc uses gcc-8
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974480' id='405343'>
<a class='timestamp' href='#405343'><time timestamp='2020-09-24T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974480' id='405344'>
<a class='timestamp' href='#405344'><time timestamp='2020-09-24T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so that&#x27;s kind of a sign that our processes are at least capable of catching some issues like this
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974540' id='405345'>
<a class='timestamp' href='#405345'><time timestamp='2020-09-24T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: should I be concerned I <b>*didn&#x27;t*</b> get any libsecp symbols in my comparison?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974540' id='405346'>
<a class='timestamp' href='#405346'><time timestamp='2020-09-24T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I honestly don&#x27;t now how to prevent us being affected by problems like this
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974540' id='405347'>
<a class='timestamp' href='#405347'><time timestamp='2020-09-24T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
or is the test only in a newer version?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974540' id='405348'>
<a class='timestamp' href='#405348'><time timestamp='2020-09-24T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: no, i think this is expected (it&#x27;s in code added in a new test)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974540' id='405349'>
<a class='timestamp' href='#405349'><time timestamp='2020-09-24T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
computers are broken
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974540' id='405350'>
<a class='timestamp' href='#405350'><time timestamp='2020-09-24T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974600' id='405351'>
<a class='timestamp' href='#405351'><time timestamp='2020-09-24T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
reality is often disappointing
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974600' id='405352'>
<a class='timestamp' href='#405352'><time timestamp='2020-09-24T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I can understand libc bugs in some cases but this is something so low-level
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974600' id='405353'>
<a class='timestamp' href='#405353'><time timestamp='2020-09-24T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
anyway, i think we should see what performance impact building with -fno-builtin-memcmp has
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974600' id='405354'>
<a class='timestamp' href='#405354'><time timestamp='2020-09-24T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: yes but only for affected compilers
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974600' id='405355'>
<a class='timestamp' href='#405355'><time timestamp='2020-09-24T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if that is sufficiently low, i think that&#x27;s a sufficient solution - perhaps restricted to GCC 9 and 10
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974600' id='405356'>
<a class='timestamp' href='#405356'><time timestamp='2020-09-24T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: that won&#x27;t fix C++ afaik
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974660' id='405357'>
<a class='timestamp' href='#405357'><time timestamp='2020-09-24T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: it will
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974660' id='405358'>
<a class='timestamp' href='#405358'><time timestamp='2020-09-24T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: std::lexicographical_compare (in the .h file) just calls __builting_memcmp
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974660' id='405359'>
<a class='timestamp' href='#405359'><time timestamp='2020-09-24T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Should we also add a test that fails with gcc9/10?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974660' id='405360'>
<a class='timestamp' href='#405360'><time timestamp='2020-09-24T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I don&#x27;t even care about peformance there, just add the option, it needs to be correct, if people want performance don&#x27;t use a broken compiler
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974660' id='405361'>
<a class='timestamp' href='#405361'><time timestamp='2020-09-24T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
MarcoFalke: definitely
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974660' id='405362'>
<a class='timestamp' href='#405362'><time timestamp='2020-09-24T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: -fno-builtin-* doesn&#x27;t affect __builtin_*
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974660' id='405363'>
<a class='timestamp' href='#405363'><time timestamp='2020-09-24T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: hmm!
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974720' id='405364'>
<a class='timestamp' href='#405364'><time timestamp='2020-09-24T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s a good point, let&#x27;s test that
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974720' id='405365'>
<a class='timestamp' href='#405365'><time timestamp='2020-09-24T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s the important thing thoug hthat it fixes the issue, a test like MarcoFalke says makes a lot of sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974720' id='405366'>
<a class='timestamp' href='#405366'><time timestamp='2020-09-24T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
at least GCC&#x27;s docs suggest to whitelist builtins, one should use -fno-builtin and call __builtin_* directly ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974780' id='405367'>
<a class='timestamp' href='#405367'><time timestamp='2020-09-24T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
or just fail compiling on affected compilers, they&#x27;re going to backport a fix right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974780' id='405368'>
<a class='timestamp' href='#405368'><time timestamp='2020-09-24T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974780' id='405369'>
<a class='timestamp' href='#405369'><time timestamp='2020-09-24T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: supposedly, but it looks non-trivial and they haven&#x27;t yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974780' id='405370'>
<a class='timestamp' href='#405370'><time timestamp='2020-09-24T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;d prefer things to build at all on compilers with a broken memcmp
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974780' id='405371'>
<a class='timestamp' href='#405371'><time timestamp='2020-09-24T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
+not
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974780' id='405372'>
<a class='timestamp' href='#405372'><time timestamp='2020-09-24T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s fixed in master, but not in any release
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974840' id='405373'>
<a class='timestamp' href='#405373'><time timestamp='2020-09-24T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
gcc 9.3 and 10.1 seem afficted
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974840' id='405374'>
<a class='timestamp' href='#405374'><time timestamp='2020-09-24T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(whatever we end up doing, we need a test for this in configure)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974840' id='405375'>
<a class='timestamp' href='#405375'><time timestamp='2020-09-24T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
personally, I neutered my builtin memcmp to always fail (fallback to libc) and am rebuilding my system
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974840' id='405376'>
<a class='timestamp' href='#405376'><time timestamp='2020-09-24T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: my first thought was adding a configure test that exploits the bug... but that won&#x27;t work when crosscompiling
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974840' id='405377'>
<a class='timestamp' href='#405377'><time timestamp='2020-09-24T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974840' id='405378'>
<a class='timestamp' href='#405378'><time timestamp='2020-09-24T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
well, crosscompiling, we can&#x27;t run it
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974840' id='405379'>
<a class='timestamp' href='#405379'><time timestamp='2020-09-24T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: ... ugh
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974900' id='405380'>
<a class='timestamp' href='#405380'><time timestamp='2020-09-24T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
why not add a sanity check? we have others
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974900' id='405381'>
<a class='timestamp' href='#405381'><time timestamp='2020-09-24T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
unless we assume that building for the host platform is always similarly affected as the target platform
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974900' id='405382'>
<a class='timestamp' href='#405382'><time timestamp='2020-09-24T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, you&#x27;d need to run it to figure it out right
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974900' id='405383'>
<a class='timestamp' href='#405383'><time timestamp='2020-09-24T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Is memcmp constexpr?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974900' id='405384'>
<a class='timestamp' href='#405384'><time timestamp='2020-09-24T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Maybe it can static_assert...
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974900' id='405385'>
<a class='timestamp' href='#405385'><time timestamp='2020-09-24T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jeremyrubin: it&#x27;s a C function constexpr is a C++ concept
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974900' id='405386'>
<a class='timestamp' href='#405386'><time timestamp='2020-09-24T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
holy shit this is <b>*really*</b> bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974900' id='405387'>
<a class='timestamp' href='#405387'><time timestamp='2020-09-24T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: bad assumption
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974900' id='405388'>
<a class='timestamp' href='#405388'><time timestamp='2020-09-24T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: yes, i think so
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974900' id='405389'>
<a class='timestamp' href='#405389'><time timestamp='2020-09-24T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
maybe it could expect the symbols generated or something, if it generates a call to strcpy instead?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974960' id='405390'>
<a class='timestamp' href='#405390'><time timestamp='2020-09-24T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: there are no calls involved
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974960' id='405391'>
<a class='timestamp' href='#405391'><time timestamp='2020-09-24T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: it doesn&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974960' id='405392'>
<a class='timestamp' href='#405392'><time timestamp='2020-09-24T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s the autogenerated builtin code that is wrong
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974960' id='405393'>
<a class='timestamp' href='#405393'><time timestamp='2020-09-24T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: it&#x27;s unrolling the memcmp
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974960' id='405394'>
<a class='timestamp' href='#405394'><time timestamp='2020-09-24T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok...
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974960' id='405395'>
<a class='timestamp' href='#405395'><time timestamp='2020-09-24T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which makes it implementation something more or less equal to strcmp rather than memcmp
<br>
</div>

<div class='talk op-msg' data-timestamp='1600974960' id='405396'>
<a class='timestamp' href='#405396'><time timestamp='2020-09-24T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
basically turns it into if (a[0] == &quot;x&quot; &amp;&amp; a[1] == &quot;x&quot; &amp;&amp; …)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975020' id='405397'>
<a class='timestamp' href='#405397'><time timestamp='2020-09-24T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
aiui
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975020' id='405398'>
<a class='timestamp' href='#405398'><time timestamp='2020-09-24T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s impossible to check in a platform independent way
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975020' id='405399'>
<a class='timestamp' href='#405399'><time timestamp='2020-09-24T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
it&#x27;s unclear to me if the patch is in the gcc 10.2 release?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975020' id='405400'>
<a class='timestamp' href='#405400'><time timestamp='2020-09-24T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonatack: no
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975020' id='405401'>
<a class='timestamp' href='#405401'><time timestamp='2020-09-24T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonatack: it is not in any release
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975020' id='405402'>
<a class='timestamp' href='#405402'><time timestamp='2020-09-24T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
thank you
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975080' id='405403'>
<a class='timestamp' href='#405403'><time timestamp='2020-09-24T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-2'> real_or_random</span>&gt;
fwiw, this is (part of) the GCC patch that fixes this: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=blobdiff;f=gcc" class="link" target="_blank">https://gcc.gnu.org/git/?p=gcc.git;a=blobdiff;f=gcc</a>/builtins.c;h=228db78f32bfdcce31e23850e878843d7a45adcc;hp=eb662112b32e5ad377d2a865d9977c64dc12cc93;hb=d5803b9876b3d11c93d1a10fabb3fbb1c4a14bd6;hpb=3e99ed65cbedf7a6c0abb9cd63c191326995fd34
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975080' id='405404'>
<a class='timestamp' href='#405404'><time timestamp='2020-09-24T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Could we wrap memcmp with a compile time wrapper that static asserts we aren&#x27;t using a const array with a 0 byte? Not sure if you can enable-if-fu around constexpr args.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975080' id='405405'>
<a class='timestamp' href='#405405'><time timestamp='2020-09-24T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-2'> real_or_random</span>&gt;
it&#x27;s hard to read but I think it&#x27;s possible to deduce a few condition under which this bug can&#x27;t happen
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975080' id='405406'>
<a class='timestamp' href='#405406'><time timestamp='2020-09-24T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jeremyrubin: that&#x27;s not a solution
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975080' id='405407'>
<a class='timestamp' href='#405407'><time timestamp='2020-09-24T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
The bug only happens when it&#x27;s a const array right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975140' id='405408'>
<a class='timestamp' href='#405408'><time timestamp='2020-09-24T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jeremyrubin: if we can identify all potentially affected code paths, we could just replace them with my_memcmp that doesn&#x27;t have the bug too
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975140' id='405409'>
<a class='timestamp' href='#405409'><time timestamp='2020-09-24T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
ah right you&#x27;re worried about other stdlib calls and stuff.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975140' id='405410'>
<a class='timestamp' href='#405410'><time timestamp='2020-09-24T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but C++ also generates memcmps it&#x27;s not just our own code
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975140' id='405411'>
<a class='timestamp' href='#405411'><time timestamp='2020-09-24T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s a very low-level function
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975140' id='405412'>
<a class='timestamp' href='#405412'><time timestamp='2020-09-24T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: I just did that? :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975200' id='405413'>
<a class='timestamp' href='#405413'><time timestamp='2020-09-24T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right - &quot;all code paths&quot; also contains std::lexicographical_compare and a few other things
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975200' id='405414'>
<a class='timestamp' href='#405414'><time timestamp='2020-09-24T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: right, but not in a guaranteed automated way
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975200' id='405415'>
<a class='timestamp' href='#405415'><time timestamp='2020-09-24T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: it&#x27;s a really useful way of finding potential issues now, though
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975200' id='405416'>
<a class='timestamp' href='#405416'><time timestamp='2020-09-24T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
thanks for that
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975260' id='405417'>
<a class='timestamp' href='#405417'><time timestamp='2020-09-24T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;ve tried making configure detect the version of GCC, and so far been unsuccesful
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975320' id='405418'>
<a class='timestamp' href='#405418'><time timestamp='2020-09-24T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
my google-fu led me to 9-year old stackoverflow posts with comments &quot;ah yes, that doesn&#x27;t work anymore, let&#x27;s just delete that functionality&quot; from the m4 gcc scripts
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975320' id='405419'>
<a class='timestamp' href='#405419'><time timestamp='2020-09-24T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(though i&#x27;m sure people with more autoconf skills can do better)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975320' id='405420'>
<a class='timestamp' href='#405420'><time timestamp='2020-09-24T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
&gt;_&lt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975320' id='405421'>
<a class='timestamp' href='#405421'><time timestamp='2020-09-24T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the idea is that in general you should test for compiler features, rather than exact versions
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975320' id='405422'>
<a class='timestamp' href='#405422'><time timestamp='2020-09-24T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which is absolutely true, except for bug workarounds :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975320' id='405423'>
<a class='timestamp' href='#405423'><time timestamp='2020-09-24T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and as soon as the patch is backported to gcc 9 and 10 it will become more difficult too
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975320' id='405424'>
<a class='timestamp' href='#405424'><time timestamp='2020-09-24T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: ideally, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975320' id='405425'>
<a class='timestamp' href='#405425'><time timestamp='2020-09-24T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: even for bug workarounds, you can&#x27;t use the version number to see that my GCC is patched ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975380' id='405426'>
<a class='timestamp' href='#405426'><time timestamp='2020-09-24T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s true, but it&#x27;s a safe superset
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975380' id='405427'>
<a class='timestamp' href='#405427'><time timestamp='2020-09-24T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
worse, some distributions might backport the single patch without changing the version number
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975380' id='405428'>
<a class='timestamp' href='#405428'><time timestamp='2020-09-24T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sure, it dpeends on what it does in that case
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975380' id='405429'>
<a class='timestamp' href='#405429'><time timestamp='2020-09-24T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
anyway, what&#x27;s the plan?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975380' id='405430'>
<a class='timestamp' href='#405430'><time timestamp='2020-09-24T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if it only passes an extra command line flag it&#x27;s ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975380' id='405431'>
<a class='timestamp' href='#405431'><time timestamp='2020-09-24T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think the first thing to do is add a unit test that catches the bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975380' id='405432'>
<a class='timestamp' href='#405432'><time timestamp='2020-09-24T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: why not sanity test?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975380' id='405433'>
<a class='timestamp' href='#405433'><time timestamp='2020-09-24T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
though we also need to make sure it doesn&#x27;t become an &quot;expected failure&quot; thing that people ignore
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975380' id='405434'>
<a class='timestamp' href='#405434'><time timestamp='2020-09-24T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but it shouldn&#x27;t fail the build for versions that have been fixed
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975440' id='405435'>
<a class='timestamp' href='#405435'><time timestamp='2020-09-24T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: that&#x27;s a good point
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975440' id='405436'>
<a class='timestamp' href='#405436'><time timestamp='2020-09-24T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
a sanity check makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975500' id='405437'>
<a class='timestamp' href='#405437'><time timestamp='2020-09-24T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
the GCC bug tracker has a reduced test (note the first test <b>*didn&#x27;t*</b> fail on my unpatched GCC)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975500' id='405438'>
<a class='timestamp' href='#405438'><time timestamp='2020-09-24T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: yeah, it seems the cases you need to catch it differ slightly between gcc 9 and 10
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975500' id='405439'>
<a class='timestamp' href='#405439'><time timestamp='2020-09-24T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975560' id='405440'>
<a class='timestamp' href='#405440'><time timestamp='2020-09-24T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I wonder if that means different code could be affected by GCC 9?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975560' id='405441'>
<a class='timestamp' href='#405441'><time timestamp='2020-09-24T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
or is GCC 9&#x27;s affected a strict subset of GCC 10&#x27;s?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975560' id='405442'>
<a class='timestamp' href='#405442'><time timestamp='2020-09-24T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we also should figure out if -fno-builtin-memcmp fixes std::lexicographical_compare
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975560' id='405443'>
<a class='timestamp' href='#405443'><time timestamp='2020-09-24T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I very doubt it does
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975560' id='405444'>
<a class='timestamp' href='#405444'><time timestamp='2020-09-24T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: i don&#x27;t know
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975620' id='405445'>
<a class='timestamp' href='#405445'><time timestamp='2020-09-24T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t want to monopolize the meeting with this; we can also continue discussion on #20005
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975620' id='405446'>
<a class='timestamp' href='#405446'><time timestamp='2020-09-24T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/20005" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/20005</a> | memcmp with constants that contain zero bytes are broken in GCC · Issue #20005 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975620' id='405447'>
<a class='timestamp' href='#405447'><time timestamp='2020-09-24T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i think this is deserves some priority
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975620' id='405448'>
<a class='timestamp' href='#405448'><time timestamp='2020-09-24T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
we don&#x27;t have any proposed topics at least
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975620' id='405449'>
<a class='timestamp' href='#405449'><time timestamp='2020-09-24T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but we can go to high priority for review if this topic is finished
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975680' id='405450'>
<a class='timestamp' href='#405450'><time timestamp='2020-09-24T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#topic High priority for review
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975740' id='405451'>
<a class='timestamp' href='#405451'><time timestamp='2020-09-24T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/projects/8" class="link" target="_blank">https://github.com/bitcoin/bitcoin/projects/8</a>  13 blockers, 1 bugfix, 2 chasing concept ACK
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975740' id='405452'>
<a class='timestamp' href='#405452'><time timestamp='2020-09-24T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-2'> real_or_random</span>&gt;
i&#x27;m somewhat curious to add a patch to GCC that makes it emit a message if it applies this optimization wrongly. that may be possible with some effort given that we have the GCC patch that fixes the issue. but not sure if I&#x27;ll find time
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975740' id='405453'>
<a class='timestamp' href='#405453'><time timestamp='2020-09-24T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
real_or_random: luke modified his compiler with the patch, and then tried to see which symbols differ before and after
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975740' id='405454'>
<a class='timestamp' href='#405454'><time timestamp='2020-09-24T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(we can continue after the high priority for review topic)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975800' id='405455'>
<a class='timestamp' href='#405455'><time timestamp='2020-09-24T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-2'> real_or_random</span>&gt;
sipa: oh I missed that, cool
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975800' id='405456'>
<a class='timestamp' href='#405456'><time timestamp='2020-09-24T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-2'> real_or_random</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975800' id='405457'>
<a class='timestamp' href='#405457'><time timestamp='2020-09-24T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
patching gcc is not a solution that we can rely on in general as most people don&#x27;t build their own gcc
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975860' id='405458'>
<a class='timestamp' href='#405458'><time timestamp='2020-09-24T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
right, I was just doing it to quickly audit what was affected
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975860' id='405459'>
<a class='timestamp' href='#405459'><time timestamp='2020-09-24T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sure, for that it&#x27;s a great way
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975920' id='405460'>
<a class='timestamp' href='#405460'><time timestamp='2020-09-24T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: btw, I think it&#x27;s using __builtin_memcmp for std::equal or == in PSBT stuff?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975980' id='405461'>
<a class='timestamp' href='#405461'><time timestamp='2020-09-24T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
nothing to discuss about high priority for review PRs?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975980' id='405462'>
<a class='timestamp' href='#405462'><time timestamp='2020-09-24T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i guess not...
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975980' id='405463'>
<a class='timestamp' href='#405463'><time timestamp='2020-09-24T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
pls review rwconf :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975980' id='405464'>
<a class='timestamp' href='#405464'><time timestamp='2020-09-24T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
high-priority: #19845 might be close
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975980' id='405465'>
<a class='timestamp' href='#405465'><time timestamp='2020-09-24T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/19845" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/19845</a> | net: CNetAddr: add support to (un)serialize as ADDRv2 by vasild · Pull Request #19845 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1600975980' id='405466'>
<a class='timestamp' href='#405466'><time timestamp='2020-09-24T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
was good to see signet get in this week
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976040' id='405467'>
<a class='timestamp' href='#405467'><time timestamp='2020-09-24T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976040' id='405468'>
<a class='timestamp' href='#405468'><time timestamp='2020-09-24T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: oh, we could build with -O1 ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976100' id='405469'>
<a class='timestamp' href='#405469'><time timestamp='2020-09-24T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976100' id='405470'>
<a class='timestamp' href='#405470'><time timestamp='2020-09-24T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
wonders how -O1 works but -fno-builtin-memcmp doesn&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976100' id='405471'>
<a class='timestamp' href='#405471'><time timestamp='2020-09-24T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Doesn&#x27;t that make IBD take twice as long?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976100' id='405472'>
<a class='timestamp' href='#405472'><time timestamp='2020-09-24T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
probably
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976100' id='405473'>
<a class='timestamp' href='#405473'><time timestamp='2020-09-24T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
still better than broken builtins though
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976100' id='405474'>
<a class='timestamp' href='#405474'><time timestamp='2020-09-24T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Might be better to refuse to start with the sanity check
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976100' id='405475'>
<a class='timestamp' href='#405475'><time timestamp='2020-09-24T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
maybe there&#x27;s some more granular thing we can disable
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976100' id='405476'>
<a class='timestamp' href='#405476'><time timestamp='2020-09-24T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
MarcoFalke: both ☺
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976160' id='405477'>
<a class='timestamp' href='#405477'><time timestamp='2020-09-24T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
luke-jr: could you build with -fno-builtin-memcmp without the gcc patch, and then (for the affected symbols from your previous list) check if which ones become equal to the fixed gcc output?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976220' id='405478'>
<a class='timestamp' href='#405478'><time timestamp='2020-09-24T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: I don&#x27;t have the unpatched compiler anymore :x
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976220' id='405479'>
<a class='timestamp' href='#405479'><time timestamp='2020-09-24T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
on an x86 server, however, -fno-builtin-memcmp did not fix the bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976220' id='405480'>
<a class='timestamp' href='#405480'><time timestamp='2020-09-24T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
for    int x= __builtin_memcmp (a, &quot;\0\0\0\0&quot;, 4);
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976280' id='405481'>
<a class='timestamp' href='#405481'><time timestamp='2020-09-24T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sure, but we never call __builtin_memcmp directly from our code
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976280' id='405482'>
<a class='timestamp' href='#405482'><time timestamp='2020-09-24T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
speaking of that, what about other dependency libraries that can be assumed to have been built with the broken compiler
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976340' id='405483'>
<a class='timestamp' href='#405483'><time timestamp='2020-09-24T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
boost, libupnp, libevent ...
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976340' id='405484'>
<a class='timestamp' href='#405484'><time timestamp='2020-09-24T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
we can&#x27;t fix everything
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976340' id='405485'>
<a class='timestamp' href='#405485'><time timestamp='2020-09-24T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
wumpus: is it even remotely possible to check what compiler compiled an already compiled library?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976340' id='405486'>
<a class='timestamp' href='#405486'><time timestamp='2020-09-24T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no, we can&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976340' id='405487'>
<a class='timestamp' href='#405487'><time timestamp='2020-09-24T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
doesn&#x27;t mean we can&#x27;t work around it
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976340' id='405488'>
<a class='timestamp' href='#405488'><time timestamp='2020-09-24T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I suppose that&#x27;s an argument for just the sanity check, and not trying to workaround it
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976340' id='405489'>
<a class='timestamp' href='#405489'><time timestamp='2020-09-24T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
elichai2: not in gneral
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976400' id='405490'>
<a class='timestamp' href='#405490'><time timestamp='2020-09-24T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
like just not permitting building with known-to-be-affected compilers, which at least in some cases will avoid the situation where dependencies are built with the same thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976400' id='405491'>
<a class='timestamp' href='#405491'><time timestamp='2020-09-24T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: right
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976400' id='405492'>
<a class='timestamp' href='#405492'><time timestamp='2020-09-24T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but... if your system itself has bugs introduced by this, i think there is very little we can do about it
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976460' id='405493'>
<a class='timestamp' href='#405493'><time timestamp='2020-09-24T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
for many distributions at least, the dependencies will have been built with the same gcc/g++ that is available
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976520' id='405494'>
<a class='timestamp' href='#405494'><time timestamp='2020-09-24T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i believe my python3 binary is built with GCC 9.3
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976520' id='405495'>
<a class='timestamp' href='#405495'><time timestamp='2020-09-24T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
$ strings python3.8 | fgrep GCC
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976520' id='405496'>
<a class='timestamp' href='#405496'><time timestamp='2020-09-24T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
[GCC 9.3.0]
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976700' id='405497'>
<a class='timestamp' href='#405497'><time timestamp='2020-09-24T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
luke-jr: did the tests in the final patch fail on your unpatched gcc?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976700' id='405498'>
<a class='timestamp' href='#405498'><time timestamp='2020-09-24T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
didn&#x27;t try
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976760' id='405499'>
<a class='timestamp' href='#405499'><time timestamp='2020-09-24T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;m going to close the meeting, can continue this discussion afterwards and we&#x27;re out of topics
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976760' id='405500'>
<a class='timestamp' href='#405500'><time timestamp='2020-09-24T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
#endmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976760' id='405501'>
<a class='timestamp' href='#405501'><time timestamp='2020-09-24T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Meeting ended Thu Sep 24 19:46:51 2020 UTC.  Information about MeetBot at <a href="http://wiki.debian.org/MeetBot" class="link" target="_blank">http://wiki.debian.org/MeetBot</a> . (v 0.1.4)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976760' id='405502'>
<a class='timestamp' href='#405502'><time timestamp='2020-09-24T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Minutes:        <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2020/bitcoin-core-dev.2020-09-24-19.02.html" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2020/bitcoin-core-dev.2020-09-24-19.02.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976760' id='405503'>
<a class='timestamp' href='#405503'><time timestamp='2020-09-24T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Minutes (text): <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2020/bitcoin-core-dev.2020-09-24-19.02.txt" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2020/bitcoin-core-dev.2020-09-24-19.02.txt</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976760' id='405504'>
<a class='timestamp' href='#405504'><time timestamp='2020-09-24T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-4'> lightningbot</span>&gt;
Log:            <a href="http://www.erisian.com.au/meetbot/bitcoin-core-dev/2020/bitcoin-core-dev.2020-09-24-19.02.log.html" class="link" target="_blank">http://www.erisian.com.au/meetbot/bitcoin-core-dev/2020/bitcoin-core-dev.2020-09-24-19.02.log.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976760' id='405505'>
<a class='timestamp' href='#405505'><time timestamp='2020-09-24T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sg
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976820' id='405506'>
<a class='timestamp' href='#405506'><time timestamp='2020-09-24T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I can&#x27;t find a flag that makes -O1 fail :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976820' id='405507'>
<a class='timestamp' href='#405507'><time timestamp='2020-09-24T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
unless both of the sides are constants I can&#x27;t manage to get `std::lexicographical_compare` to <b>*not*</b> produce a `memcmp` call. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976880' id='405508'>
<a class='timestamp' href='#405508'><time timestamp='2020-09-24T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
elichai2: what if one side is a constant that starts with a 0 byte?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976880' id='405509'>
<a class='timestamp' href='#405509'><time timestamp='2020-09-24T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or the length is restricted to at most 3 bytes
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976940' id='405510'>
<a class='timestamp' href='#405510'><time timestamp='2020-09-24T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
sipa: here: <a href="https://godbolt.org/z/65WWPf" class="link" target="_blank">https://godbolt.org/z/65WWPf</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600976940' id='405511'>
<a class='timestamp' href='#405511'><time timestamp='2020-09-24T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
even 2 bytes, where in compile time it can see it&#x27;s 2 bytes, it still produces a memcmp
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977000' id='405512'>
<a class='timestamp' href='#405512'><time timestamp='2020-09-24T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
only when the array is 1 byte it doesn&#x27;t call to memcmp, and instead it generates a `cmp     BYTE PTR [rdi], 0` instruction (compare with zero(because my other array is zero))
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977060' id='405513'>
<a class='timestamp' href='#405513'><time timestamp='2020-09-24T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and if you take the same code but with memcmp instead of std::lexicographical_compare, it does avoid the memcmp call
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977060' id='405514'>
<a class='timestamp' href='#405514'><time timestamp='2020-09-24T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
luke-jr: my understanding is that it isn&#x27;t quite that builtin_memcmp is broken but an optimization surrounding it that is invoked at level -O2 is broken.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977120' id='405515'>
<a class='timestamp' href='#405515'><time timestamp='2020-09-24T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i changed the 0.20.1 source code to replace IsIPv4() with &quot;return ip[0] == 0;&quot; (which is what I understand the bug would turn it into now)... the tests fail
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977180' id='405516'>
<a class='timestamp' href='#405516'><time timestamp='2020-09-24T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so whatever it&#x27;s doing, it&#x27;s not doing that, or we&#x27;d have caught it
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977240' id='405517'>
<a class='timestamp' href='#405517'><time timestamp='2020-09-24T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
sipa: yes. if I just replace with `memcmp` it produces bad code
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977240' id='405518'>
<a class='timestamp' href='#405518'><time timestamp='2020-09-24T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
<a href="https://godbolt.org/z/a9Wf11" class="link" target="_blank">https://godbolt.org/z/a9Wf11</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977420' id='405519'>
<a class='timestamp' href='#405519'><time timestamp='2020-09-24T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
I think it <b>***might***</b> be because `lexicographical_compare` gets both start and end iterators of both sides, then it sees they&#x27;re the same size, so it replaces with memcmp but it might be the same round where they replace memcmp so it doesn&#x27;t do this deduction again, <b>***maybe***</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977420' id='405520'>
<a class='timestamp' href='#405520'><time timestamp='2020-09-24T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Tomorrow is the wallet meeting but I won&#x27;t be able to make it. So either someone else might want to host, or since it has been quiet the last few meetings we might just cancel it tomorrow
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977540' id='405521'>
<a class='timestamp' href='#405521'><time timestamp='2020-09-24T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
<a href="https://dpaste.com/GT7VUNFKV" class="link" target="_blank">https://dpaste.com/GT7VUNFKV</a> &lt;-- _ZNK8CNetAddr6IsIPv4Ev diff
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977600' id='405522'>
<a class='timestamp' href='#405522'><time timestamp='2020-09-24T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
luke-jr: is this MIPS?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977600' id='405523'>
<a class='timestamp' href='#405523'><time timestamp='2020-09-24T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
elichai2: PPC
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977600' id='405524'>
<a class='timestamp' href='#405524'><time timestamp='2020-09-24T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sorry, I guess it&#x27;s not quite familiar to most
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977720' id='405525'>
<a class='timestamp' href='#405525'><time timestamp='2020-09-24T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
<a href="https://dpaste.com/9E7Z9NNZ7" class="link" target="_blank">https://dpaste.com/9E7Z9NNZ7</a> &lt;-- full assembly dump of it
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977780' id='405526'>
<a class='timestamp' href='#405526'><time timestamp='2020-09-24T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if i change IsIPv4() to memcmp(...) &gt; 0 (rather than == 0), gcc 9.3 emits broken code
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977780' id='405527'>
<a class='timestamp' href='#405527'><time timestamp='2020-09-24T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m beginning to suspect that (in)equality checks use a different optimization path that isn&#x27;t affected
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977900' id='405528'>
<a class='timestamp' href='#405528'><time timestamp='2020-09-24T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which if true would be good news, as it means automatically generated operator== code isn&#x27;t affected either (and there exists no automatically generated &lt; &lt;= &gt;= &gt;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977960' id='405529'>
<a class='timestamp' href='#405529'><time timestamp='2020-09-24T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
!= also doesn&#x27;t seem affected
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977960' id='405530'>
<a class='timestamp' href='#405530'><time timestamp='2020-09-24T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
Error: &quot;=&quot; is not a valid command.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600977960' id='405531'>
<a class='timestamp' href='#405531'><time timestamp='2020-09-24T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
stupid bot
<br>
</div>

<div class='talk op-msg' data-timestamp='1600978200' id='405532'>
<a class='timestamp' href='#405532'><time timestamp='2020-09-24T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
sipa: I also can&#x27;t manage to trigger this in `std::equal`
<br>
</div>

<div class='talk op-msg' data-timestamp='1600978260' id='405533'>
<a class='timestamp' href='#405533'><time timestamp='2020-09-24T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
meshcollider: thanks for the heads up. i guess we&#x27;ll see who is around.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600978260' id='405534'>
<a class='timestamp' href='#405534'><time timestamp='2020-09-24T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
(although unlike lexicographical_compare std::equal does optimize nicely)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600978440' id='405535'>
<a class='timestamp' href='#405535'><time timestamp='2020-09-24T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
damn it
<br>
</div>

<div class='talk op-msg' data-timestamp='1600978440' id='405536'>
<a class='timestamp' href='#405536'><time timestamp='2020-09-24T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
it also happens with lexicographical_compare
<br>
</div>

<div class='talk op-msg' data-timestamp='1600978500' id='405537'>
<a class='timestamp' href='#405537'><time timestamp='2020-09-24T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
if you replace the reference with a copy it happens, you can play with the optimization level and see the output changes: <a href="https://godbolt.org/z/vxEo8d" class="link" target="_blank">https://godbolt.org/z/vxEo8d</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600979580' id='405538'>
<a class='timestamp' href='#405538'><time timestamp='2020-09-24T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
lol `base_uint` in arith_uint256.h seems to have dodged the bullet by pure luck <a href="https://github.com/bitcoin/bitcoin/blob/master/src/arith_uint256.h#L217-L222" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/arith_uint256.h#L217-L222</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600979580' id='405539'>
<a class='timestamp' href='#405539'><time timestamp='2020-09-24T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
(actually, it&#x27;s really NOT funny)
<br>
</div>

<div class='talk op-msg' data-timestamp='1600979760' id='405540'>
<a class='timestamp' href='#405540'><time timestamp='2020-09-24T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
uint256.h doesn&#x27;t compare with a static array, so it should be fine right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600979760' id='405541'>
<a class='timestamp' href='#405541'><time timestamp='2020-09-24T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
roconnor: it could be a compile-time known value in some cases
<br>
</div>

<div class='talk op-msg' data-timestamp='1600979760' id='405542'>
<a class='timestamp' href='#405542'><time timestamp='2020-09-24T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
isn&#x27;t max PoW static?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600979760' id='405543'>
<a class='timestamp' href='#405543'><time timestamp='2020-09-24T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
fair.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600979820' id='405544'>
<a class='timestamp' href='#405544'><time timestamp='2020-09-24T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t know if being a compile-time known constant it enough to trigger it; maybe it actually has to be a comparison with a constant
<br>
</div>

<div class='talk op-msg' data-timestamp='1600979820' id='405545'>
<a class='timestamp' href='#405545'><time timestamp='2020-09-24T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*compile-time-known value
<br>
</div>

<div class='talk op-msg' data-timestamp='1600979820' id='405546'>
<a class='timestamp' href='#405546'><time timestamp='2020-09-24T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
I hate this
<br>
</div>

<div class='talk op-msg' data-timestamp='1600979940' id='405547'>
<a class='timestamp' href='#405547'><time timestamp='2020-09-24T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
elichai2: great find
<br>
</div>

<div class='talk op-msg' data-timestamp='1600979940' id='405548'>
<a class='timestamp' href='#405548'><time timestamp='2020-09-24T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
It has to be a value that GCC&#x27;s c_getstr is able to figure out object byte representation for from the source code, however c_getstr works.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980000' id='405549'>
<a class='timestamp' href='#405549'><time timestamp='2020-09-24T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
elichai2: so, we learn that -fno-builtin-memcmp is not enough
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980000' id='405550'>
<a class='timestamp' href='#405550'><time timestamp='2020-09-24T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
yes :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980060' id='405551'>
<a class='timestamp' href='#405551'><time timestamp='2020-09-24T20:41:00Z'>20:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it should be possible to find the subset of functions in STL that are affected by this
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980060' id='405552'>
<a class='timestamp' href='#405552'><time timestamp='2020-09-24T20:41:00Z'>20:41</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
rather than -fno-buildin-memcmp, we need to find a flag that disables this suite of optimizations :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980120' id='405553'>
<a class='timestamp' href='#405553'><time timestamp='2020-09-24T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
we could decide to remove <b>*all*</b> usages of functions comparing stuff, but even `&gt;` gets misoptimized on some containers :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980180' id='405554'>
<a class='timestamp' href='#405554'><time timestamp='2020-09-24T20:43:00Z'>20:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
roconnor: that&#x27;s a possibility too
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980240' id='405555'>
<a class='timestamp' href='#405555'><time timestamp='2020-09-24T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
is -O2 stand in for a series of -f flags?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980240' id='405556'>
<a class='timestamp' href='#405556'><time timestamp='2020-09-24T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980300' id='405557'>
<a class='timestamp' href='#405557'><time timestamp='2020-09-24T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
do we know which ones?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980360' id='405558'>
<a class='timestamp' href='#405558'><time timestamp='2020-09-24T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
roconnor: yes, I&#x27;m testing them now
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980360' id='405559'>
<a class='timestamp' href='#405559'><time timestamp='2020-09-24T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
3&gt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980360' id='405560'>
<a class='timestamp' href='#405560'><time timestamp='2020-09-24T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
<a href="https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html" class="link" target="_blank">https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980360' id='405561'>
<a class='timestamp' href='#405561'><time timestamp='2020-09-24T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
oops
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980360' id='405562'>
<a class='timestamp' href='#405562'><time timestamp='2020-09-24T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
&lt;3
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980420' id='405563'>
<a class='timestamp' href='#405563'><time timestamp='2020-09-24T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
what, when I manually turn the flags on I don&#x27;t get the bug OoO
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980420' id='405564'>
<a class='timestamp' href='#405564'><time timestamp='2020-09-24T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m cloning the gcc mirror repo; it&#x27;s probably not too hard to find which exact flags controls this optimization
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980480' id='405565'>
<a class='timestamp' href='#405565'><time timestamp='2020-09-24T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
elichai2: I can believe that :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980480' id='405566'>
<a class='timestamp' href='#405566'><time timestamp='2020-09-24T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
elichai2: did you turn on both the -O and -O2 flags?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980540' id='405567'>
<a class='timestamp' href='#405567'><time timestamp='2020-09-24T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
or do an -O  + all the -O2 flags?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980540' id='405568'>
<a class='timestamp' href='#405568'><time timestamp='2020-09-24T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
I did `-O1` + all the `-O2` flags
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980600' id='405569'>
<a class='timestamp' href='#405569'><time timestamp='2020-09-24T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gcc -c -Q -O3 --help=optimizers
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980600' id='405570'>
<a class='timestamp' href='#405570'><time timestamp='2020-09-24T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
prints all the enabled flags
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980720' id='405571'>
<a class='timestamp' href='#405571'><time timestamp='2020-09-24T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
sipa: +1
<br>
</div>

<div class='talk op-msg' data-timestamp='1600980780' id='405572'>
<a class='timestamp' href='#405572'><time timestamp='2020-09-24T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
gcc -c -Q -O2 --help=optimizers | grep -v disabled   ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600981620' id='405573'>
<a class='timestamp' href='#405573'><time timestamp='2020-09-24T21:07:00Z'>21:07</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
first `-fno-inline` seems to solve this, but that makes sense and has hugee perf penalty
<br>
</div>

<div class='talk op-msg' data-timestamp='1600982460' id='405574'>
<a class='timestamp' href='#405574'><time timestamp='2020-09-24T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
`-O2 -fno-tree-dce -fno-tree-dominator-opts -fno-tree-fre -fno-tree-pre -fno-code-hoisting`
<br>
</div>

<div class='talk op-msg' data-timestamp='1600982460' id='405575'>
<a class='timestamp' href='#405575'><time timestamp='2020-09-24T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
all of those are needed? :S
<br>
</div>

<div class='talk op-msg' data-timestamp='1600982460' id='405576'>
<a class='timestamp' href='#405576'><time timestamp='2020-09-24T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
looks like it
<br>
</div>

<div class='talk op-msg' data-timestamp='1600982520' id='405577'>
<a class='timestamp' href='#405577'><time timestamp='2020-09-24T21:22:00Z'>21:22</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
although some flags might imply others so it might be possible to get more granular but this sounds like an NP problem lol 
<br>
</div>

<div class='talk op-msg' data-timestamp='1600982640' id='405578'>
<a class='timestamp' href='#405578'><time timestamp='2020-09-24T21:24:00Z'>21:24</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
ignore what I just said. with `-O2` and all the O2 flags actually disabled, if any of these 5 flags aren&#x27;t disabled I get the wrong result, they all need to be disabled to get the right results
<br>
</div>

<div class='talk op-msg' data-timestamp='1600982940' id='405579'>
<a class='timestamp' href='#405579'><time timestamp='2020-09-24T21:29:00Z'>21:29</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
who has admin role in travis?
<br>
</div>

<div class='talk op-msg' data-timestamp='1600982940' id='405580'>
<a class='timestamp' href='#405580'><time timestamp='2020-09-24T21:29:00Z'>21:29</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
`-O2 -fno-tree-dce -fno-tree-dominator-opts -fno-tree-fre -fno-code-hoisting` seems to do something different.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600983000' id='405581'>
<a class='timestamp' href='#405581'><time timestamp='2020-09-24T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
roconnor: I still get the wrong result there, through a different path it seems but still the wrong one hehe
<br>
</div>

<div class='talk op-msg' data-timestamp='1600983000' id='405582'>
<a class='timestamp' href='#405582'><time timestamp='2020-09-24T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
right.  sorry, yes it still appears wrong, but with different wrong asm.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600983240' id='405583'>
<a class='timestamp' href='#405583'><time timestamp='2020-09-24T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
 it scares me that my current default compiler in my machine is so much broken right now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600984140' id='405584'>
<a class='timestamp' href='#405584'><time timestamp='2020-09-24T21:49:00Z'>21:49</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
... I&#x27;ve been scrambling to recompile my entire system with gcc 8...
<br>
</div>

<div class='talk op-msg' data-timestamp='1600984140' id='405585'>
<a class='timestamp' href='#405585'><time timestamp='2020-09-24T21:49:00Z'>21:49</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
I don&#x27;t know if I&#x27;m being too paranoid...
<br>
</div>

<div class='talk op-msg' data-timestamp='1600984140' id='405586'>
<a class='timestamp' href='#405586'><time timestamp='2020-09-24T21:49:00Z'>21:49</time></a>
&lt;<span class='nick nick-2'> real_or_random</span>&gt;
idk, this bug seems scary at first glance but maybe if the scope is indeed limited, it&#x27;s just one of hundreds of bugs in GCC. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1600984260' id='405587'>
<a class='timestamp' href='#405587'><time timestamp='2020-09-24T21:51:00Z'>21:51</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
real_or_random: If I figure out that you are right that GCC&#x27;s miscompiling its own string_length function, I am definitely going to recompile my system.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600984260' id='405588'>
<a class='timestamp' href='#405588'><time timestamp='2020-09-24T21:51:00Z'>21:51</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
I am not waiting for the outcome of such a mess.
<br>
</div>

<div class='talk op-msg' data-timestamp='1600984380' id='405589'>
<a class='timestamp' href='#405589'><time timestamp='2020-09-24T21:53:00Z'>21:53</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
roconnor: I&#x27;m thinking of recompiling with clang
<br>
</div>

<div class='talk op-msg' data-timestamp='1600991340' id='405590'>
<a class='timestamp' href='#405590'><time timestamp='2020-09-24T23:49:00Z'>23:49</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
roconnor: I&#x27;ve been rebuilding my system as well, but with GCC 9 patched to never use the builtin memcmp
<br>
</div>

<div class='talk op-msg' data-timestamp='1600991400' id='405591'>
<a class='timestamp' href='#405591'><time timestamp='2020-09-24T23:50:00Z'>23:50</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
real_or_random: it&#x27;s a bug that&#x27;s higher-than-average risk to create security vulnerabilities
<br>
</div>

<div class='talk op-msg' data-timestamp='1600991460' id='405592'>
<a class='timestamp' href='#405592'><time timestamp='2020-09-24T23:51:00Z'>23:51</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
roconnor: real_or_random: what&#x27;s this about string_length func?
<br>
</div>

</div>
</section>

</body>
</html>
