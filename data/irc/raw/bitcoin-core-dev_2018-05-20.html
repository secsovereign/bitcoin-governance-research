<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2018-05-20
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2018-05-20' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:22 UTC</pre>
<pre><a href="/bitcoin-core-dev/2018-04-20">&lt;</a><span class='header'>     May 2018     </span><a href="/bitcoin-core-dev/2018-06-20">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;       <a class="" href="/bitcoin-core-dev/2018-05-01">1</a>  <a class="" href="/bitcoin-core-dev/2018-05-02">2</a>  <a class="" href="/bitcoin-core-dev/2018-05-03">3</a>  <a class="" href="/bitcoin-core-dev/2018-05-04">4</a>  <a class="" href="/bitcoin-core-dev/2018-05-05">5</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2018-05-06">6</a>  <a class="" href="/bitcoin-core-dev/2018-05-07">7</a>  <a class="" href="/bitcoin-core-dev/2018-05-08">8</a>  <a class="" href="/bitcoin-core-dev/2018-05-09">9</a> <a class="" href="/bitcoin-core-dev/2018-05-10">10</a> <a class="" href="/bitcoin-core-dev/2018-05-11">11</a> <a class="" href="/bitcoin-core-dev/2018-05-12">12</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-05-13">13</a> <a class="" href="/bitcoin-core-dev/2018-05-14">14</a> <a class="" href="/bitcoin-core-dev/2018-05-15">15</a> <a class="" href="/bitcoin-core-dev/2018-05-16">16</a> <a class="" href="/bitcoin-core-dev/2018-05-17">17</a> <a class="" href="/bitcoin-core-dev/2018-05-18">18</a> <a class="" href="/bitcoin-core-dev/2018-05-19">19</a>  &#x000A;<a class="current" href="/bitcoin-core-dev/2018-05-20">20</a> <a class="" href="/bitcoin-core-dev/2018-05-21">21</a> <a class="" href="/bitcoin-core-dev/2018-05-22">22</a> <a class="" href="/bitcoin-core-dev/2018-05-23">23</a> <a class="" href="/bitcoin-core-dev/2018-05-24">24</a> <a class="" href="/bitcoin-core-dev/2018-05-25">25</a> <a class="" href="/bitcoin-core-dev/2018-05-26">26</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-05-27">27</a> <a class="" href="/bitcoin-core-dev/2018-05-28">28</a> <a class="" href="/bitcoin-core-dev/2018-05-29">29</a> <a class="" href="/bitcoin-core-dev/2018-05-30">30</a> <a class="" href="/bitcoin-core-dev/2018-05-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1526783160' id='613324'>
<a class='timestamp' href='#613324'><time timestamp='2018-05-20T02:26:00Z'>02:26</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] qshuai closed pull request #13042: Calculated nBits will be replaced by the following GetNextWorkRequire… (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/13042" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13042</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1526784900' id='613325'>
<a class='timestamp' href='#613325'><time timestamp='2018-05-20T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
sipa: gmaxwell: I am on macOS running natively
<br>
</div>

<div class='talk op-msg' data-timestamp='1526784900' id='613326'>
<a class='timestamp' href='#613326'><time timestamp='2018-05-20T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
(sorry for late response)
<br>
</div>

<div class='talk op-msg' data-timestamp='1526789160' id='613327'>
<a class='timestamp' href='#613327'><time timestamp='2018-05-20T04:06:00Z'>04:06</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
wumpus fanquake: You can drop #12634 from high priority list. Jimpo brought up some points that I hadn&#x27;t considered, so I think I need to rework this before bringing it up for review. :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1526789160' id='613328'>
<a class='timestamp' href='#613328'><time timestamp='2018-05-20T04:06:00Z'>04:06</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/12634" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/12634</a> | [refactor] Make TransactionWithinChainLimit more flexible by kallewoof · Pull Request #12634 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1526789640' id='613329'>
<a class='timestamp' href='#613329'><time timestamp='2018-05-20T04:14:00Z'>04:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
kallewoof: it was a longshot... windows has some really obnoxious behavior around exclusive access to files... so much for that guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1526789940' id='613330'>
<a class='timestamp' href='#613330'><time timestamp='2018-05-20T04:19:00Z'>04:19</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
gmaxwell: I haven&#x27;t closed the lldb session. Not sure what I can glean from lldb/gdb commands though. Looking at threads it doesn&#x27;t seem like two threads are doing things with leveldb.
<br>
</div>

<div class='talk op-msg' data-timestamp='1526793780' id='613331'>
<a class='timestamp' href='#613331'><time timestamp='2018-05-20T05:23:00Z'>05:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] brandonrninefive opened pull request #13284: Fix for Issue #13231 - [gui] visual &quot;overflow&quot; of amount input. (master...ui_amount_overflow_fix) <a href="https://github.com/bitcoin/bitcoin/pull/13284" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13284</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1526795640' id='613332'>
<a class='timestamp' href='#613332'><time timestamp='2018-05-20T05:54:00Z'>05:54</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
kallewoof done
<br>
</div>

<div class='talk op-msg' data-timestamp='1526804340' id='613333'>
<a class='timestamp' href='#613333'><time timestamp='2018-05-20T08:19:00Z'>08:19</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
fanquake: Thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1526842800' id='613334'>
<a class='timestamp' href='#613334'><time timestamp='2018-05-20T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
im writing for a bitcoin core PR, this is rpc_net.py <a href="https://pastebin.com/SJKwnfKQ" class="link" target="_blank">https://pastebin.com/SJKwnfKQ</a> my part starts at line 102, i open a p2pconnection to a node and send it some addresses, but then the node doesnt have those addresses in its getaddr as it should, can anyone see anything wrong?
<br>
</div>

<div class='talk op-msg' data-timestamp='1526851080' id='613335'>
<a class='timestamp' href='#613335'><time timestamp='2018-05-20T21:18:00Z'>21:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] Empact opened pull request #13288: Remove the need to include &quot;rpc/blockchain.cpp&#x27; in order to put `GetDifficulty` under test (master...get-difficulty) <a href="https://github.com/bitcoin/bitcoin/pull/13288" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13288</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1526855940' id='613336'>
<a class='timestamp' href='#613336'><time timestamp='2018-05-20T22:39:00Z'>22:39</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
belcher: all of those addresses are probably considered &quot;terrible&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1526855940' id='613337'>
<a class='timestamp' href='#613337'><time timestamp='2018-05-20T22:39:00Z'>22:39</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
belcher: see <a href="https://github.com/bitcoin/bitcoin/blob/master/src/addrman.cpp#L33" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/addrman.cpp#L33</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856120' id='613338'>
<a class='timestamp' href='#613338'><time timestamp='2018-05-20T22:42:00Z'>22:42</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
achow101 i tried changing it to addr.time = 1526774400 + i*60 #20th may 2018 but still gives an empty string
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856120' id='613339'>
<a class='timestamp' href='#613339'><time timestamp='2018-05-20T22:42:00Z'>22:42</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/20" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/20</a> | JSON-RPC callback · Issue #20 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856120' id='613340'>
<a class='timestamp' href='#613340'><time timestamp='2018-05-20T22:42:00Z'>22:42</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
belcher: actually you need to set services to match those for a full node
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856120' id='613341'>
<a class='timestamp' href='#613341'><time timestamp='2018-05-20T22:42:00Z'>22:42</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/blob/master/src/net_processing.cpp#L1840" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/net_processing.cpp#L1840</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856120' id='613342'>
<a class='timestamp' href='#613342'><time timestamp='2018-05-20T22:42:00Z'>22:42</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
otherwise they won&#x27;t get stored
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856180' id='613343'>
<a class='timestamp' href='#613343'><time timestamp='2018-05-20T22:43:00Z'>22:43</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
sec, trying that
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856420' id='613344'>
<a class='timestamp' href='#613344'><time timestamp='2018-05-20T22:47:00Z'>22:47</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
so thats node_network | node_witness or node_network_limited | node_witness.. that didnt help either, still returns an empty list
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856420' id='613345'>
<a class='timestamp' href='#613345'><time timestamp='2018-05-20T22:47:00Z'>22:47</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
belcher: check if they are being added to addrman. There should be lines in the debug.log about it
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856480' id='613346'>
<a class='timestamp' href='#613346'><time timestamp='2018-05-20T22:48:00Z'>22:48</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
where does debug.log end up when running tests? like ./test/functional/rpc_net.py
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856480' id='613347'>
<a class='timestamp' href='#613347'><time timestamp='2018-05-20T22:48:00Z'>22:48</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
something should be printed that says the datadir
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856540' id='613348'>
<a class='timestamp' href='#613348'><time timestamp='2018-05-20T22:49:00Z'>22:49</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the debug.log will be in there in the regtest folder
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856540' id='613349'>
<a class='timestamp' href='#613349'><time timestamp='2018-05-20T22:49:00Z'>22:49</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
ah that must be Initializing test directory /tmp/testqo7f6r9j
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856540' id='613350'>
<a class='timestamp' href='#613350'><time timestamp='2018-05-20T22:49:00Z'>22:49</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yeah, that&#x27;s it
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856540' id='613351'>
<a class='timestamp' href='#613351'><time timestamp='2018-05-20T22:49:00Z'>22:49</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
within that is a datadir for each node started for the test
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856840' id='613352'>
<a class='timestamp' href='#613352'><time timestamp='2018-05-20T22:54:00Z'>22:54</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
ok so, the datadir gets cleaned up after the test
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856840' id='613353'>
<a class='timestamp' href='#613353'><time timestamp='2018-05-20T22:54:00Z'>22:54</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
it gets deleted
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856840' id='613354'>
<a class='timestamp' href='#613354'><time timestamp='2018-05-20T22:54:00Z'>22:54</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
run with --nocleanup
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856840' id='613355'>
<a class='timestamp' href='#613355'><time timestamp='2018-05-20T22:54:00Z'>22:54</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
or something like that (check -h)
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856900' id='613356'>
<a class='timestamp' href='#613356'><time timestamp='2018-05-20T22:55:00Z'>22:55</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
also i ran it a few times and once it worked, giving the list of addresses, but i ran it again and it gave an empty list again... so maybe its something to do with the time?
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856960' id='613357'>
<a class='timestamp' href='#613357'><time timestamp='2018-05-20T22:56:00Z'>22:56</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
the debug.log has this line 2018-05-20T22:55:12.580402Z Added 1000 addresses from 127.0.0.1: 0 tried, 64 new
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856960' id='613358'>
<a class='timestamp' href='#613358'><time timestamp='2018-05-20T22:56:00Z'>22:56</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the time does matter, but I think the first step to debugging this is to figure out whether the addresses make it into addrman in the first place
<br>
</div>

<div class='talk op-msg' data-timestamp='1526856960' id='613359'>
<a class='timestamp' href='#613359'><time timestamp='2018-05-20T22:56:00Z'>22:56</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
a little later: 2018-05-20T22:55:12.921387Z Flushed 64 addresses to peers.dat  141ms
<br>
</div>

<div class='talk op-msg' data-timestamp='1526857020' id='613360'>
<a class='timestamp' href='#613360'><time timestamp='2018-05-20T22:57:00Z'>22:57</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
aren&#x27;t you adding 1000 addresses though?
<br>
</div>

<div class='talk op-msg' data-timestamp='1526857020' id='613361'>
<a class='timestamp' href='#613361'><time timestamp='2018-05-20T22:57:00Z'>22:57</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
yes.. i dont know where 64 comes from
<br>
</div>

<div class='talk op-msg' data-timestamp='1526857080' id='613362'>
<a class='timestamp' href='#613362'><time timestamp='2018-05-20T22:58:00Z'>22:58</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
hold on, I&#x27;ll try running it too
<br>
</div>

<div class='talk op-msg' data-timestamp='1526857080' id='613363'>
<a class='timestamp' href='#613363'><time timestamp='2018-05-20T22:58:00Z'>22:58</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
iv run it again, now its &quot;received: addr (30003 bytes) peer=4&quot; and later &quot;Flushed 0 addresses to peers.dat  291ms&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1526857080' id='613364'>
<a class='timestamp' href='#613364'><time timestamp='2018-05-20T22:58:00Z'>22:58</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
so zero addresses this time
<br>
</div>

<div class='talk op-msg' data-timestamp='1526857140' id='613365'>
<a class='timestamp' href='#613365'><time timestamp='2018-05-20T22:59:00Z'>22:59</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
here&#x27;s the exact file im running, sec
<br>
</div>

<div class='talk op-msg' data-timestamp='1526857140' id='613366'>
<a class='timestamp' href='#613366'><time timestamp='2018-05-20T22:59:00Z'>22:59</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
<a href="https://pastebin.com/RbXLPGP5" class="link" target="_blank">https://pastebin.com/RbXLPGP5</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1526857320' id='613367'>
<a class='timestamp' href='#613367'><time timestamp='2018-05-20T23:02:00Z'>23:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
one thing I&#x27;m noticing is that the rpc call is happening before the addr is received, if the ordering in the debug.log is correct
<br>
</div>

<div class='talk op-msg' data-timestamp='1526857440' id='613368'>
<a class='timestamp' href='#613368'><time timestamp='2018-05-20T23:04:00Z'>23:04</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
i just added time.sleep(3) in case that helps, didnt seem to
<br>
</div>

<div class='talk op-msg' data-timestamp='1526857500' id='613369'>
<a class='timestamp' href='#613369'><time timestamp='2018-05-20T23:05:00Z'>23:05</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I&#x27;m not seeing anything in the debug.log that indicates that addrman is adding anything
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858160' id='613370'>
<a class='timestamp' href='#613370'><time timestamp='2018-05-20T23:16:00Z'>23:16</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
belcher: One problem is that the addresses are 192.168.x.x which addrman won&#x27;t add. I changed those to something else and addrman is adding the addresses
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858220' id='613371'>
<a class='timestamp' href='#613371'><time timestamp='2018-05-20T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
oh yes good point
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858220' id='613372'>
<a class='timestamp' href='#613372'><time timestamp='2018-05-20T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
i just did that and it seems to be working
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858280' id='613373'>
<a class='timestamp' href='#613373'><time timestamp='2018-05-20T23:18:00Z'>23:18</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
weirdly the output says &#x27;services&#x27;: 1 even though i assigned it as node_network | node_witness
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858280' id='613374'>
<a class='timestamp' href='#613374'><time timestamp='2018-05-20T23:18:00Z'>23:18</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
although it still seems to only be adding 64 addresses
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858280' id='613375'>
<a class='timestamp' href='#613375'><time timestamp='2018-05-20T23:18:00Z'>23:18</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
ah, i still had the time.sleep
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858340' id='613376'>
<a class='timestamp' href='#613376'><time timestamp='2018-05-20T23:19:00Z'>23:19</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
when i remove time.sleep it returns an empty list again
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858340' id='613377'>
<a class='timestamp' href='#613377'><time timestamp='2018-05-20T23:19:00Z'>23:19</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
and you need the time.sleep
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858340' id='613378'>
<a class='timestamp' href='#613378'><time timestamp='2018-05-20T23:19:00Z'>23:19</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
that will slow down the test runtime :\ i wonder if theres a better way, but i dont think the p2p protocol gives a response to &#x27;addr&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858400' id='613379'>
<a class='timestamp' href='#613379'><time timestamp='2018-05-20T23:20:00Z'>23:20</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I don&#x27;t think it does
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858400' id='613380'>
<a class='timestamp' href='#613380'><time timestamp='2018-05-20T23:20:00Z'>23:20</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
you could send a ping and then wait for pong right after sending addr
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858460' id='613381'>
<a class='timestamp' href='#613381'><time timestamp='2018-05-20T23:21:00Z'>23:21</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
good idea
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858460' id='613382'>
<a class='timestamp' href='#613382'><time timestamp='2018-05-20T23:21:00Z'>23:21</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
an interesting thing, i tried to make it send 2000 and 2500 addresses instead of 1000, but it returned an empty list then
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858580' id='613383'>
<a class='timestamp' href='#613383'><time timestamp='2018-05-20T23:23:00Z'>23:23</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
addr can&#x27;t be greater than 1000
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858580' id='613384'>
<a class='timestamp' href='#613384'><time timestamp='2018-05-20T23:23:00Z'>23:23</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
ah ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1526858640' id='613385'>
<a class='timestamp' href='#613385'><time timestamp='2018-05-20T23:24:00Z'>23:24</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
the 64 addresses thing is weird but those 64 can be obtained with getnodeaddresses so its enough to write a test
<br>
</div>

<div class='talk op-msg' data-timestamp='1526859120' id='613386'>
<a class='timestamp' href='#613386'><time timestamp='2018-05-20T23:32:00Z'>23:32</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
achow101 mininode.py already has a function sync_with_ping() where it sends a ping and waits for the pong :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1526859120' id='613387'>
<a class='timestamp' href='#613387'><time timestamp='2018-05-20T23:32:00Z'>23:32</time></a>
&lt;<span class='nick nick-2'> belcher</span>&gt;
because that sleep() problem has obviously happened a lot before :p
<br>
</div>

</div>
</section>

</body>
</html>
