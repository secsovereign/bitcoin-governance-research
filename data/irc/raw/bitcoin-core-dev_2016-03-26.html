<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2016-03-26
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2016-03-26' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:27 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-02-26">&lt;</a><span class='header'>    March 2016    </span><a href="/bitcoin-core-dev/2016-04-26">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;       <a class="" href="/bitcoin-core-dev/2016-03-01">1</a>  <a class="" href="/bitcoin-core-dev/2016-03-02">2</a>  <a class="" href="/bitcoin-core-dev/2016-03-03">3</a>  <a class="" href="/bitcoin-core-dev/2016-03-04">4</a>  <a class="" href="/bitcoin-core-dev/2016-03-05">5</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-03-06">6</a>  <a class="" href="/bitcoin-core-dev/2016-03-07">7</a>  <a class="" href="/bitcoin-core-dev/2016-03-08">8</a>  <a class="" href="/bitcoin-core-dev/2016-03-09">9</a> <a class="" href="/bitcoin-core-dev/2016-03-10">10</a> <a class="" href="/bitcoin-core-dev/2016-03-11">11</a> <a class="" href="/bitcoin-core-dev/2016-03-12">12</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-03-13">13</a> <a class="" href="/bitcoin-core-dev/2016-03-14">14</a> <a class="" href="/bitcoin-core-dev/2016-03-15">15</a> <a class="" href="/bitcoin-core-dev/2016-03-16">16</a> <a class="" href="/bitcoin-core-dev/2016-03-17">17</a> <a class="" href="/bitcoin-core-dev/2016-03-18">18</a> <a class="" href="/bitcoin-core-dev/2016-03-19">19</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-03-20">20</a> <a class="" href="/bitcoin-core-dev/2016-03-21">21</a> <a class="" href="/bitcoin-core-dev/2016-03-22">22</a> <a class="" href="/bitcoin-core-dev/2016-03-23">23</a> <a class="" href="/bitcoin-core-dev/2016-03-24">24</a> <a class="" href="/bitcoin-core-dev/2016-03-25">25</a> <a class="current" href="/bitcoin-core-dev/2016-03-26">26</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-03-27">27</a> <a class="" href="/bitcoin-core-dev/2016-03-28">28</a> <a class="" href="/bitcoin-core-dev/2016-03-29">29</a> <a class="" href="/bitcoin-core-dev/2016-03-30">30</a> <a class="" href="/bitcoin-core-dev/2016-03-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1458954480' id='459017'>
<a class='timestamp' href='#459017'><time timestamp='2016-03-26T01:08:00Z'>01:08</time></a>
&lt;<span class='nick nick-3'> GitHub73</span>&gt;
[bitcoin] accraze opened pull request #7747: [docs] added depends cross compile info (master...depends-build-docs) <a href="https://github.com/bitcoin/bitcoin/pull/7747" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7747</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979200' id='459018'>
<a class='timestamp' href='#459018'><time timestamp='2016-03-26T08:00:00Z'>08:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: good point with including the ciphersuite into the KDF to avoid a weak-ciphersuite-attack. Haven&#x27;t thought about that!
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979200' id='459019'>
<a class='timestamp' href='#459019'><time timestamp='2016-03-26T08:00:00Z'>08:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: you said &quot;Personally I&#x27;d just suggest dropping the negoation;&quot;. I guess you mean only the ciphersuite-negotiation? Not the whole ECDH?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979260' id='459020'>
<a class='timestamp' href='#459020'><time timestamp='2016-03-26T08:01:00Z'>08:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
nor did the authors of dozens of other protocols that didn&#x27;t. I am not so smart, lots of people have failed here before, and I&#x27;m only repeating their mistakes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979260' id='459021'>
<a class='timestamp' href='#459021'><time timestamp='2016-03-26T08:01:00Z'>08:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: right. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979320' id='459022'>
<a class='timestamp' href='#459022'><time timestamp='2016-03-26T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: you said: &quot; (also, you&#x27;re going to need a 256 bit session ID for later auth, and two 512 bit keys for the authenticated encryption);&quot; I don&#x27;t understand that. I&#x27;m only aware of two 256bit keys for both directions ECDH.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979320' id='459023'>
<a class='timestamp' href='#459023'><time timestamp='2016-03-26T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I don&#x27;t see a need for a auth session id.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979380' id='459024'>
<a class='timestamp' href='#459024'><time timestamp='2016-03-26T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Because I assume the encryption negotiation followed by a auth identity pubkey check will keep the authentication withing the encryption session? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979380' id='459025'>
<a class='timestamp' href='#459025'><time timestamp='2016-03-26T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: you&#x27;ll need a session id to sign when doing identity checking
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979440' id='459026'>
<a class='timestamp' href='#459026'><time timestamp='2016-03-26T08:04:00Z'>08:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the authentication must bind the session or varrious kinds of MITM identity proxying attacks turn up.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979440' id='459027'>
<a class='timestamp' href='#459027'><time timestamp='2016-03-26T08:04:00Z'>08:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sure, you could sign one of the encryption keys or the ECDH output directly, but it&#x27;s generally better to separate them
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979440' id='459028'>
<a class='timestamp' href='#459028'><time timestamp='2016-03-26T08:04:00Z'>08:04</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: Ah. So during the encryption negotiation both side produce a 256bit session id and the other party needs to sign that (together with the pubkey) to ensure a link between the auth and the enc?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979500' id='459029'>
<a class='timestamp' href='#459029'><time timestamp='2016-03-26T08:05:00Z'>08:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: auth is an overloaded term; do you mean MAC or identity verification?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979500' id='459030'>
<a class='timestamp' href='#459030'><time timestamp='2016-03-26T08:05:00Z'>08:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
identity verification. sry.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979560' id='459031'>
<a class='timestamp' href='#459031'><time timestamp='2016-03-26T08:06:00Z'>08:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: right thats what the session ID is for.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979560' id='459032'>
<a class='timestamp' href='#459032'><time timestamp='2016-03-26T08:06:00Z'>08:06</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
So the session ID can be transported unencrypted during ECDH nego.?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979560' id='459033'>
<a class='timestamp' href='#459033'><time timestamp='2016-03-26T08:06:00Z'>08:06</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
no... wait.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979560' id='459034'>
<a class='timestamp' href='#459034'><time timestamp='2016-03-26T08:06:00Z'>08:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the session ID is just a result of the ECDH.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979560' id='459035'>
<a class='timestamp' href='#459035'><time timestamp='2016-03-26T08:06:00Z'>08:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: the session ID never ever transported
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979620' id='459036'>
<a class='timestamp' href='#459036'><time timestamp='2016-03-26T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not encrypted, not unencrypted
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979620' id='459037'>
<a class='timestamp' href='#459037'><time timestamp='2016-03-26T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
hmm...
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979620' id='459038'>
<a class='timestamp' href='#459038'><time timestamp='2016-03-26T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The ECDH runs, and the result is a session ID and a set of keys for the encryption/mac.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979620' id='459039'>
<a class='timestamp' href='#459039'><time timestamp='2016-03-26T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
And the session ID can (optionally) be authenticated.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979620' id='459040'>
<a class='timestamp' href='#459040'><time timestamp='2016-03-26T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
so the ECDH calculated point could be the session ID, then run a KDF, get the sym. cipher key?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979680' id='459041'>
<a class='timestamp' href='#459041'><time timestamp='2016-03-26T08:08:00Z'>08:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: ECDH output is used as seed for a PRNG; from that PRNG you read session id, IV, encryption keys, ... whatever you need
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979740' id='459042'>
<a class='timestamp' href='#459042'><time timestamp='2016-03-26T08:09:00Z'>08:09</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
And to verify identity (identity auth) the requesting peer needs to sign the ECDH calculated point (or a PRNG result from that seed) with his pre-shared idendity pubkey?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979740' id='459043'>
<a class='timestamp' href='#459043'><time timestamp='2016-03-26T08:09:00Z'>08:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979740' id='459044'>
<a class='timestamp' href='#459044'><time timestamp='2016-03-26T08:09:00Z'>08:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
you never use the ECDH value directly. They&#x27;d sign the session ID. (a PRNG result)
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979740' id='459045'>
<a class='timestamp' href='#459045'><time timestamp='2016-03-26T08:09:00Z'>08:09</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Okay. Got it!
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979800' id='459046'>
<a class='timestamp' href='#459046'><time timestamp='2016-03-26T08:10:00Z'>08:10</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Wasn&#x27;t aware of the possibility to use the ECDH point as seed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979800' id='459047'>
<a class='timestamp' href='#459047'><time timestamp='2016-03-26T08:10:00Z'>08:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The PRNG input should include the ECDH along with all the &#x27;session context&#x27; e.g. any paramter negoiation that was sent. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979800' id='459048'>
<a class='timestamp' href='#459048'><time timestamp='2016-03-26T08:10:00Z'>08:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(I recommend including one of the public keys in the KDF, to avoid the gratitious loss of entropy; but this is a minor thing) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979800' id='459049'>
<a class='timestamp' href='#459049'><time timestamp='2016-03-26T08:10:00Z'>08:10</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
And probably the ciphersuite (if we keep this).
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979860' id='459050'>
<a class='timestamp' href='#459050'><time timestamp='2016-03-26T08:11:00Z'>08:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: i think it makes sense to have ciphersuite versions
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979860' id='459051'>
<a class='timestamp' href='#459051'><time timestamp='2016-03-26T08:11:00Z'>08:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and just have one currently
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979860' id='459052'>
<a class='timestamp' href='#459052'><time timestamp='2016-03-26T08:11:00Z'>08:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. I also reserved it for future changes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979860' id='459053'>
<a class='timestamp' href='#459053'><time timestamp='2016-03-26T08:11:00Z'>08:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
negotiation is hard, and general trend is moving away from it
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979920' id='459054'>
<a class='timestamp' href='#459054'><time timestamp='2016-03-26T08:12:00Z'>08:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
instead just have version numbers of the protocol, and each version has one fixed set of ciphers
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979920' id='459055'>
<a class='timestamp' href='#459055'><time timestamp='2016-03-26T08:12:00Z'>08:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: I&#x27;m not sure this is better though! consider, if you merely do that, how do you guard against downgrade attacks-- I guess only by supporting just a single version?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458979920' id='459056'>
<a class='timestamp' href='#459056'><time timestamp='2016-03-26T08:12:00Z'>08:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
otherwise, what you need to do is have the protocol commit to whatever versions were offered.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980040' id='459057'>
<a class='timestamp' href='#459057'><time timestamp='2016-03-26T08:14:00Z'>08:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Okay. I&#x27;ll update the BIP and write more specification about the negotiation, session ID, KDF
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980040' id='459058'>
<a class='timestamp' href='#459058'><time timestamp='2016-03-26T08:14:00Z'>08:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
pbkdf2?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980100' id='459059'>
<a class='timestamp' href='#459059'><time timestamp='2016-03-26T08:15:00Z'>08:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
for KDF you could use rfc6979 (slow!), just a simple SHA256 of ECDH together with a counter, chacha20, or maybe SHAKE (sha3 variant with arbitrary length output)
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980160' id='459060'>
<a class='timestamp' href='#459060'><time timestamp='2016-03-26T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i like sha3 because it has such large state, so you can put a lot of context in without limiting entropy
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980220' id='459061'>
<a class='timestamp' href='#459061'><time timestamp='2016-03-26T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the pb in pbkdf stands for password based :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980220' id='459062'>
<a class='timestamp' href='#459062'><time timestamp='2016-03-26T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: another thing your spec is missing is rekeying. The chacha20/poly must be rekeyed periodically. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980220' id='459063'>
<a class='timestamp' href='#459063'><time timestamp='2016-03-26T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
^^
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980280' id='459064'>
<a class='timestamp' href='#459064'><time timestamp='2016-03-26T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
pbkdf2 is intentionally slow, not a requirement here.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980280' id='459065'>
<a class='timestamp' href='#459065'><time timestamp='2016-03-26T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: my assumption was that you&#x27;d do another encinit session occasionally within the encrypted channel
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980280' id='459066'>
<a class='timestamp' href='#459066'><time timestamp='2016-03-26T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t know if you noticed but I suggested that authentication could be done in a way combined with rekeying which would have some very nice properties.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980280' id='459067'>
<a class='timestamp' href='#459067'><time timestamp='2016-03-26T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
So... rekey = re-negotiate the whole ECDH secret every x minutes/hours?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980280' id='459068'>
<a class='timestamp' href='#459068'><time timestamp='2016-03-26T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
every gigabyte
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980340' id='459069'>
<a class='timestamp' href='#459069'><time timestamp='2016-03-26T08:19:00Z'>08:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
though having time limits is good too
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980340' id='459070'>
<a class='timestamp' href='#459070'><time timestamp='2016-03-26T08:19:00Z'>08:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
an right. would something speak against sipas idea of re-key within the current enc session?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980400' id='459071'>
<a class='timestamp' href='#459071'><time timestamp='2016-03-26T08:20:00Z'>08:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Would probably make the implementation simpler.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980400' id='459072'>
<a class='timestamp' href='#459072'><time timestamp='2016-03-26T08:20:00Z'>08:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(different message formats)
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980400' id='459073'>
<a class='timestamp' href='#459073'><time timestamp='2016-03-26T08:20:00Z'>08:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: gmaxwell&#x27;s identity check idea would also automatically result in a rekey
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980400' id='459074'>
<a class='timestamp' href='#459074'><time timestamp='2016-03-26T08:20:00Z'>08:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I suggested that to auth, the auth requester send X H(sessionid,server_pubkey), and if the server knows the pubkey for X, she responds with a message saying that she is changing her encryption key, and changes to H(old_encryption_key, server_pubkey) as the new one.. and in the newly encrypted segment she tranmits the signature that proves she knows the secret.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980460' id='459075'>
<a class='timestamp' href='#459075'><time timestamp='2016-03-26T08:21:00Z'>08:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
This has a nice properity that if the server pubkey is kept secret; the confidentiality of past communications is preserved even if ECC is broken.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980460' id='459076'>
<a class='timestamp' href='#459076'><time timestamp='2016-03-26T08:21:00Z'>08:21</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
And it also proves that the servers identity key has remained online, if that procedure is used for each rekeying in the future.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980580' id='459077'>
<a class='timestamp' href='#459077'><time timestamp='2016-03-26T08:23:00Z'>08:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: H(old_encryption_key, server_pubkey)  &lt;--- &quot;old_encryption_key&quot; would be the KDF derived  symmetric key?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980580' id='459078'>
<a class='timestamp' href='#459078'><time timestamp='2016-03-26T08:23:00Z'>08:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980640' id='459079'>
<a class='timestamp' href='#459079'><time timestamp='2016-03-26T08:24:00Z'>08:24</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
And... right. That would be required &quot;in both directions&quot;...
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980700' id='459080'>
<a class='timestamp' href='#459080'><time timestamp='2016-03-26T08:25:00Z'>08:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
My thought on that is that even when you don&#x27;t have an identity you&#x27;re expecting everyone could just support using the generator (private key 1).. so even without a known identity the same protocol would always be used... good for QA and for traffic analysis resistance.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980700' id='459081'>
<a class='timestamp' href='#459081'><time timestamp='2016-03-26T08:25:00Z'>08:25</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: and a re-keying without identity auth? new ECDH nego., new session id, but sym. key could be H(old_encryption_key, new_encryption_key)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980760' id='459082'>
<a class='timestamp' href='#459082'><time timestamp='2016-03-26T08:26:00Z'>08:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes it could be there is no need to redo ECDH, just a waste of CPU time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980820' id='459083'>
<a class='timestamp' href='#459083'><time timestamp='2016-03-26T08:27:00Z'>08:27</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
but how would you create a new shared secret? Using a counter on both sides?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980820' id='459084'>
<a class='timestamp' href='#459084'><time timestamp='2016-03-26T08:27:00Z'>08:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
H(old_key) is sufficient.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980820' id='459085'>
<a class='timestamp' href='#459085'><time timestamp='2016-03-26T08:27:00Z'>08:27</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ah.. okay. I see. Just hash the hash, ...
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980880' id='459086'>
<a class='timestamp' href='#459086'><time timestamp='2016-03-26T08:28:00Z'>08:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
for forward security reasons you don&#x27;t want to be forced to keep the old keys around... they should be destroyed as soon as they&#x27;re not in use.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980880' id='459087'>
<a class='timestamp' href='#459087'><time timestamp='2016-03-26T08:28:00Z'>08:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
How would the other peer know when it is time to re-key. Probably requested by the responding peer with a new message type.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980940' id='459088'>
<a class='timestamp' href='#459088'><time timestamp='2016-03-26T08:29:00Z'>08:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
s/./?
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980940' id='459089'>
<a class='timestamp' href='#459089'><time timestamp='2016-03-26T08:29:00Z'>08:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
by sending a message in the channel, &quot;everything that follows will be the next key&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1458980940' id='459090'>
<a class='timestamp' href='#459090'><time timestamp='2016-03-26T08:29:00Z'>08:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
right. That makes sense.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458981000' id='459091'>
<a class='timestamp' href='#459091'><time timestamp='2016-03-26T08:30:00Z'>08:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and my earlier suggestion was to make the auth do this so that the pubkey could be used as a symmetric secret in the rekeying.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458981120' id='459092'>
<a class='timestamp' href='#459092'><time timestamp='2016-03-26T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
And I suppose the identity auth also needs a timeout (probably time instead of consumed bandwith).
<br>
</div>

<div class='talk op-msg' data-timestamp='1458981180' id='459093'>
<a class='timestamp' href='#459093'><time timestamp='2016-03-26T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
forward secrecy also wants a timeout, so something like 1 hour or 1GB whichever comes first.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458981180' id='459094'>
<a class='timestamp' href='#459094'><time timestamp='2016-03-26T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
not that our need for forward secrecy is so great, but if we&#x27;re going to do something might as well do it right.
<br>
</div>

<div class='talk op-msg' data-timestamp='1458981360' id='459095'>
<a class='timestamp' href='#459095'><time timestamp='2016-03-26T08:36:00Z'>08:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Okay... Let me update the BIP. I think this iterative improvement approach might lead to something we can use (at least use it for later improvments).
<br>
</div>

<div class='talk op-msg' data-timestamp='1459000320' id='459096'>
<a class='timestamp' href='#459096'><time timestamp='2016-03-26T13:52:00Z'>13:52</time></a>
&lt;<span class='nick nick-6'> GitHub145</span>&gt;
[bitcoin] mruddy opened pull request #7748: test and regtest mempool: not require standard, non-mandatory, input script verification flags (master...nonstandard-sighash) <a href="https://github.com/bitcoin/bitcoin/pull/7748" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7748</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459023540' id='459097'>
<a class='timestamp' href='#459097'><time timestamp='2016-03-26T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-3'> GitHub135</span>&gt;
[bitcoin] sipa opened pull request #7749: Enforce expected outbound services (master...checkservices) <a href="https://github.com/bitcoin/bitcoin/pull/7749" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7749</a>
<br>
</div>

</div>
</section>

</body>
</html>
