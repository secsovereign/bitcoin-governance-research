<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-02-15
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-02-15' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:24 UTC</pre>
<pre><a href="/bitcoin-core-dev/2017-01-15">&lt;</a><span class='header'>  February 2017   </span><a href="/bitcoin-core-dev/2017-03-15">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;          <a class="" href="/bitcoin-core-dev/2017-02-01">1</a>  <a class="" href="/bitcoin-core-dev/2017-02-02">2</a>  <a class="" href="/bitcoin-core-dev/2017-02-03">3</a>  <a class="" href="/bitcoin-core-dev/2017-02-04">4</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-02-05">5</a>  <a class="" href="/bitcoin-core-dev/2017-02-06">6</a>  <a class="" href="/bitcoin-core-dev/2017-02-07">7</a>  <a class="" href="/bitcoin-core-dev/2017-02-08">8</a>  <a class="" href="/bitcoin-core-dev/2017-02-09">9</a> <a class="" href="/bitcoin-core-dev/2017-02-10">10</a> <a class="" href="/bitcoin-core-dev/2017-02-11">11</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-02-12">12</a> <a class="" href="/bitcoin-core-dev/2017-02-13">13</a> <a class="" href="/bitcoin-core-dev/2017-02-14">14</a> <a class="current" href="/bitcoin-core-dev/2017-02-15">15</a> <a class="" href="/bitcoin-core-dev/2017-02-16">16</a> <a class="" href="/bitcoin-core-dev/2017-02-17">17</a> <a class="" href="/bitcoin-core-dev/2017-02-18">18</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-02-19">19</a> <a class="" href="/bitcoin-core-dev/2017-02-20">20</a> <a class="" href="/bitcoin-core-dev/2017-02-21">21</a> <a class="" href="/bitcoin-core-dev/2017-02-22">22</a> <a class="" href="/bitcoin-core-dev/2017-02-23">23</a> <a class="" href="/bitcoin-core-dev/2017-02-24">24</a> <a class="" href="/bitcoin-core-dev/2017-02-25">25</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-02-26">26</a> <a class="" href="/bitcoin-core-dev/2017-02-27">27</a> <a class="" href="/bitcoin-core-dev/2017-02-28">28</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1487119920' id='528220'>
<a class='timestamp' href='#528220'><time timestamp='2017-02-15T00:52:00Z'>00:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmmmmmm...i asked to use the MTP of the current block in the default importmulti timestamps because I thought that would be sufficient (+/- reorgs)...I assume #9761 is pretty much just for reorgs, then?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487119920' id='528221'>
<a class='timestamp' href='#528221'><time timestamp='2017-02-15T00:52:00Z'>00:52</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9761" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9761</a> | Use 2 hour grace period for key timestamps in importmulti rescans by ryanofsky · Pull Request #9761 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1487119920' id='528222'>
<a class='timestamp' href='#528222'><time timestamp='2017-02-15T00:52:00Z'>00:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: maybe?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487122440' id='528223'>
<a class='timestamp' href='#528223'><time timestamp='2017-02-15T01:34:00Z'>01:34</time></a>
&lt;<span class='nick nick-11'> morcos_</span>&gt;
BlueMatt: the motivation of 9761 was a hypothetical situation that i didn&#x27;t bother to test the reasonability of
<br>
</div>

<div class='talk op-msg' data-timestamp='1487122440' id='528224'>
<a class='timestamp' href='#528224'><time timestamp='2017-02-15T01:34:00Z'>01:34</time></a>
&lt;<span class='nick nick-11'> morcos_</span>&gt;
how do we think someone is going to get these birthdates
<br>
</div>

<div class='talk op-msg' data-timestamp='1487122500' id='528225'>
<a class='timestamp' href='#528225'><time timestamp='2017-02-15T01:35:00Z'>01:35</time></a>
&lt;<span class='nick nick-11'> morcos_</span>&gt;
in particular is it likely that you&#x27;ll get it from a dumpprivkey or a validateaddress call or something else from a node where the key was created in the wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1487122500' id='528226'>
<a class='timestamp' href='#528226'><time timestamp='2017-02-15T01:35:00Z'>01:35</time></a>
&lt;<span class='nick nick-11'> morcos_</span>&gt;
if that wallet created timestamp is exposed, then thats not created with MTP
<br>
</div>

<div class='talk op-msg' data-timestamp='1487122500' id='528227'>
<a class='timestamp' href='#528227'><time timestamp='2017-02-15T01:35:00Z'>01:35</time></a>
&lt;<span class='nick nick-11'> morcos_</span>&gt;
so you need the buffer
<br>
</div>

<div class='talk op-msg' data-timestamp='1487122800' id='528228'>
<a class='timestamp' href='#528228'><time timestamp='2017-02-15T01:40:00Z'>01:40</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i guess looking now before the recent change to validateaddress, there was no way to expose nCreateTime?  but in any case there is now i think.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487122980' id='528229'>
<a class='timestamp' href='#528229'><time timestamp='2017-02-15T01:43:00Z'>01:43</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
kind of a weird feature then when it was created.  what were people expected to put in for the timestamp?  how would they know?  i guess maybe they know separately the time of the first block that was relevant?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487126700' id='528230'>
<a class='timestamp' href='#528230'><time timestamp='2017-02-15T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-6'> Arvidt_</span>&gt;
When running bitcoind with onlynet=onion, proxy=1.2.3.4:9050, listen=1 and externalip=xxx.onion  (Tor with bitcoind hidden service xxx.onion on 1.2.3.4)  can I still connect directly to bitcoind on 127.0.0.1:8333 ? How could I test that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487126760' id='528231'>
<a class='timestamp' href='#528231'><time timestamp='2017-02-15T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1487126760' id='528232'>
<a class='timestamp' href='#528232'><time timestamp='2017-02-15T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you can test by running a second bitcoind and -connect=127.0.0.1:8333 to it
<br>
</div>

<div class='talk op-msg' data-timestamp='1487126760' id='528233'>
<a class='timestamp' href='#528233'><time timestamp='2017-02-15T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(with a different datadir, -port, and -rpcport)
<br>
</div>

<div class='talk op-msg' data-timestamp='1487126940' id='528234'>
<a class='timestamp' href='#528234'><time timestamp='2017-02-15T02:49:00Z'>02:49</time></a>
&lt;<span class='nick nick-6'> Arvidt_</span>&gt;
Thanks a lot for answer. Hm I thought more of a little telnet test, second instance is a little bit too much for me for test setup.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487127300' id='528235'>
<a class='timestamp' href='#528235'><time timestamp='2017-02-15T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
a telnet test would work too, but you&#x27;d need to construct a handshake
<br>
</div>

<div class='talk op-msg' data-timestamp='1487127300' id='528236'>
<a class='timestamp' href='#528236'><time timestamp='2017-02-15T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just a version message should be enough, which you could send with netcat
<br>
</div>

<div class='talk op-msg' data-timestamp='1487129400' id='528237'>
<a class='timestamp' href='#528237'><time timestamp='2017-02-15T03:30:00Z'>03:30</time></a>
&lt;<span class='nick nick-6'> Arvidt_</span>&gt;
@sipa thanks for the tip. I took the second example from <a href="https://en.bitcoin.it/wiki/Protocol_documentation#version" class="link" target="_blank">https://en.bitcoin.it/wiki/Protocol_documentation#version</a>  to bitcoind and got a VERACK :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1487129400' id='528238'>
<a class='timestamp' href='#528238'><time timestamp='2017-02-15T03:30:00Z'>03:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cool
<br>
</div>

<div class='talk op-msg' data-timestamp='1487142540' id='528239'>
<a class='timestamp' href='#528239'><time timestamp='2017-02-15T07:09:00Z'>07:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] CryptAxe opened pull request #9763: [Trivial] Update comments referencing main.cpp (master...comments) <a href="https://github.com/bitcoin/bitcoin/pull/9763" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9763</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487146380' id='528240'>
<a class='timestamp' href='#528240'><time timestamp='2017-02-15T08:13:00Z'>08:13</time></a>
&lt;<span class='nick nick-6'> bakunin</span>&gt;
hiho, just wanted to say thank you, bitcoin core developers, you are doing an outstanding job.-Thank you very much.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487147040' id='528241'>
<a class='timestamp' href='#528241'><time timestamp='2017-02-15T08:24:00Z'>08:24</time></a>
&lt;<span class='nick nick-2'> wump</span>&gt;
good to hear that bakunin
<br>
</div>

<div class='talk op-msg' data-timestamp='1487147280' id='528242'>
<a class='timestamp' href='#528242'><time timestamp='2017-02-15T08:28:00Z'>08:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/a441db01b527...4c69d683f22a" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/a441db01b527...4c69d683f22a</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487147280' id='528243'>
<a class='timestamp' href='#528243'><time timestamp='2017-02-15T08:28:00Z'>08:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master a47da4b practicalswift: Use z = std::max(x - y, 0); instead of z = x - y; if (z &lt; 0) z = 0;
<br>
</div>

<div class='talk op-msg' data-timestamp='1487147280' id='528244'>
<a class='timestamp' href='#528244'><time timestamp='2017-02-15T08:28:00Z'>08:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 4c69d68 Wladimir J. van der Laan: Merge #9553: Use z = std::max(x - y, 0) instead of z = x - y; if (z &lt; 0) z = 0;...
<br>
</div>

<div class='talk op-msg' data-timestamp='1487147280' id='528245'>
<a class='timestamp' href='#528245'><time timestamp='2017-02-15T08:28:00Z'>08:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9553: Use z = std::max(x - y, 0) instead of z = x - y; if (z &lt; 0) z = 0; (master...std-max) <a href="https://github.com/bitcoin/bitcoin/pull/9553" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9553</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487153640' id='528246'>
<a class='timestamp' href='#528246'><time timestamp='2017-02-15T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/4c69d683f22a...d8e8b06bd065" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/4c69d683f22a...d8e8b06bd065</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487153640' id='528247'>
<a class='timestamp' href='#528247'><time timestamp='2017-02-15T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master a58370e Russell Yanofsky: Dedup nTimeFirstKey update logic...
<br>
</div>

<div class='talk op-msg' data-timestamp='1487153640' id='528248'>
<a class='timestamp' href='#528248'><time timestamp='2017-02-15T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master a80f98b Russell Yanofsky: Use importmulti timestamp when importing watch only keys...
<br>
</div>

<div class='talk op-msg' data-timestamp='1487153640' id='528249'>
<a class='timestamp' href='#528249'><time timestamp='2017-02-15T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master d8e8b06 Wladimir J. van der Laan: Merge #9108: Use importmulti timestamp when importing watch only keys (on top of #9682)...
<br>
</div>

<div class='talk op-msg' data-timestamp='1487153640' id='528250'>
<a class='timestamp' href='#528250'><time timestamp='2017-02-15T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9108: Use importmulti timestamp when importing watch only keys (on top of #9682) (master...watchtime) <a href="https://github.com/bitcoin/bitcoin/pull/9108" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9108</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487153760' id='528251'>
<a class='timestamp' href='#528251'><time timestamp='2017-02-15T10:16:00Z'>10:16</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
^ about that, is the function to remove watch-only addresses from your wallet coming in the near future?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487155080' id='528252'>
<a class='timestamp' href='#528252'><time timestamp='2017-02-15T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj opened pull request #9764: wallet: Prevent &quot;overrides a member function but is not marked &#x27;override&#x27;&quot; warnings (master...2017_02_wallet_inconsistent_missing_override) <a href="https://github.com/bitcoin/bitcoin/pull/9764" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9764</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487156280' id='528253'>
<a class='timestamp' href='#528253'><time timestamp='2017-02-15T10:58:00Z'>10:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
Victorsueca: depends on whether someone picks up <a href="https://github.com/bitcoin/bitcoin/pull/5525" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/5525</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487156280' id='528254'>
<a class='timestamp' href='#528254'><time timestamp='2017-02-15T10:58:00Z'>10:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
Victorsueca: it needs rebase and needs tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1487162340' id='528255'>
<a class='timestamp' href='#528255'><time timestamp='2017-02-15T12:39:00Z'>12:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: ahh, so you&#x27;re saying people will import with dates that dont match block time, yea, ok, that sucks
<br>
</div>

<div class='talk op-msg' data-timestamp='1487162400' id='528256'>
<a class='timestamp' href='#528256'><time timestamp='2017-02-15T12:40:00Z'>12:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
would be nice if we had been using some mtp-or-hours-back rule to generate the birthdays to begin with :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1487162400' id='528257'>
<a class='timestamp' href='#528257'><time timestamp='2017-02-15T12:40:00Z'>12:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh well
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163360' id='528258'>
<a class='timestamp' href='#528258'><time timestamp='2017-02-15T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: ryanofsky suggested changing the way the wallet generates the key birthday to be MTP...  i couldn&#x27;t immediately see why that would be a problem.., but regardless i think we need the buffer for now
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163360' id='528259'>
<a class='timestamp' href='#528259'><time timestamp='2017-02-15T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes, well if users are going to get key birthdays from generated birthdays from old wallets then we&#x27;re gonna need a buffer as long as they do that
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163420' id='528260'>
<a class='timestamp' href='#528260'><time timestamp='2017-02-15T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
in retrospect we should have used birth block number instead of birthdate
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163420' id='528261'>
<a class='timestamp' href='#528261'><time timestamp='2017-02-15T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163420' id='528262'>
<a class='timestamp' href='#528262'><time timestamp='2017-02-15T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
usability issues with that if you&#x27;re not syned, but, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163420' id='528263'>
<a class='timestamp' href='#528263'><time timestamp='2017-02-15T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the drawback is that then it&#x27;s no longer possible to generate keys on hardware that has no block chain access
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163480' id='528264'>
<a class='timestamp' href='#528264'><time timestamp='2017-02-15T12:58:00Z'>12:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well no big one in that case, it&#x27;d just make the birth block a bit earlier
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163480' id='528265'>
<a class='timestamp' href='#528265'><time timestamp='2017-02-15T12:58:00Z'>12:58</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
but keys have timestamps as birthdays
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163480' id='528266'>
<a class='timestamp' href='#528266'><time timestamp='2017-02-15T12:58:00Z'>12:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, it&#x27;s no longer possible to do that, that&#x27;s why I said in retrospect
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163540' id='528267'>
<a class='timestamp' href='#528267'><time timestamp='2017-02-15T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
keeping a safety margin of 2 hours seems prudent to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163540' id='528268'>
<a class='timestamp' href='#528268'><time timestamp='2017-02-15T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163540' id='528269'>
<a class='timestamp' href='#528269'><time timestamp='2017-02-15T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163540' id='528270'>
<a class='timestamp' href='#528270'><time timestamp='2017-02-15T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I also mentioned this in the initial importmulti PR IIRC
<br>
</div>

<div class='talk op-msg' data-timestamp='1487163600' id='528271'>
<a class='timestamp' href='#528271'><time timestamp='2017-02-15T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/pull/7551#discussion_r80929574" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7551#discussion_r80929574</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487164680' id='528272'>
<a class='timestamp' href='#528272'><time timestamp='2017-02-15T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] NicolasDorier closed pull request #8460: Parametrize buried soft fork in regtest and refactor (master...buriedsf) <a href="https://github.com/bitcoin/bitcoin/pull/8460" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8460</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487164980' id='528273'>
<a class='timestamp' href='#528273'><time timestamp='2017-02-15T13:23:00Z'>13:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sdaftuar opened pull request #9765: Harden against mistakes handling invalid blocks (master...fix-checkblock-call) <a href="https://github.com/bitcoin/bitcoin/pull/9765" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9765</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487167740' id='528274'>
<a class='timestamp' href='#528274'><time timestamp='2017-02-15T14:09:00Z'>14:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/d8e8b06bd065...476cc47da084" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/d8e8b06bd065...476cc47da084</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487167740' id='528275'>
<a class='timestamp' href='#528275'><time timestamp='2017-02-15T14:09:00Z'>14:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 4b6cccc Jonas Schnelli: Selectively suppress deprecation warnings
<br>
</div>

<div class='talk op-msg' data-timestamp='1487167740' id='528276'>
<a class='timestamp' href='#528276'><time timestamp='2017-02-15T14:09:00Z'>14:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 476cc47 Wladimir J. van der Laan: Merge #9758: Selectively suppress deprecation warnings...
<br>
</div>

<div class='talk op-msg' data-timestamp='1487167740' id='528277'>
<a class='timestamp' href='#528277'><time timestamp='2017-02-15T14:09:00Z'>14:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9758: Selectively suppress deprecation warnings (master...2017/02/deprac_warns) <a href="https://github.com/bitcoin/bitcoin/pull/9758" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9758</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487171160' id='528278'>
<a class='timestamp' href='#528278'><time timestamp='2017-02-15T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #9766: Add --exclude option to rpc-tests.py (master...rpctestexclude) <a href="https://github.com/bitcoin/bitcoin/pull/9766" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9766</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487172540' id='528279'>
<a class='timestamp' href='#528279'><time timestamp='2017-02-15T15:29:00Z'>15:29</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/476cc47da084...7a93af8340d9" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/476cc47da084...7a93af8340d9</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487172540' id='528280'>
<a class='timestamp' href='#528280'><time timestamp='2017-02-15T15:29:00Z'>15:29</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 9acf25c Russell Yanofsky: Return error when importmulti called with invalid address....
<br>
</div>

<div class='talk op-msg' data-timestamp='1487172540' id='528281'>
<a class='timestamp' href='#528281'><time timestamp='2017-02-15T15:29:00Z'>15:29</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 7a93af8 Wladimir J. van der Laan: Merge #9756: Return error when importmulti called with invalid address....
<br>
</div>

<div class='talk op-msg' data-timestamp='1487172600' id='528282'>
<a class='timestamp' href='#528282'><time timestamp='2017-02-15T15:30:00Z'>15:30</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9756: Return error when importmulti called with invalid address. (master...pr/multiaddr) <a href="https://github.com/bitcoin/bitcoin/pull/9756" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9756</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487173980' id='528283'>
<a class='timestamp' href='#528283'><time timestamp='2017-02-15T15:53:00Z'>15:53</time></a>
&lt;<span class='nick nick-13'> Guest74962</span>&gt;
hey     
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175420' id='528284'>
<a class='timestamp' href='#528284'><time timestamp='2017-02-15T16:17:00Z'>16:17</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
wumpus: can we powwow on what we want to do about importmulti and pruned nodes?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175420' id='528285'>
<a class='timestamp' href='#528285'><time timestamp='2017-02-15T16:17:00Z'>16:17</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
you mentioned its the same issues as importwallet, but that is just disabled for pruned nodes, importmulti isn&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175480' id='528286'>
<a class='timestamp' href='#528286'><time timestamp='2017-02-15T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
importmulti should ideally work when using timestamps more recent than what is pruned
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175480' id='528287'>
<a class='timestamp' href='#528287'><time timestamp='2017-02-15T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think right now it&#x27;ll mostly silently fail if you importmulti with a key timestamp before your earliest on disk block...  (looks to me like ReadBlockFromDisk will fail and error to debug log, but rescan should keep chugging along until it finds blocks)
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175540' id='528288'>
<a class='timestamp' href='#528288'><time timestamp='2017-02-15T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
right, agreed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175540' id='528289'>
<a class='timestamp' href='#528289'><time timestamp='2017-02-15T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if that is broken then I&#x27;d say disable it for 0.14 and worry about it later
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175540' id='528290'>
<a class='timestamp' href='#528290'><time timestamp='2017-02-15T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but important enough to fix that for 0.14?  
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175540' id='528291'>
<a class='timestamp' href='#528291'><time timestamp='2017-02-15T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
ah ok, that was the question
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175540' id='528292'>
<a class='timestamp' href='#528292'><time timestamp='2017-02-15T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so just disable importmulti for pruned nodes altogether for 0.14, then fix properly later
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175540' id='528293'>
<a class='timestamp' href='#528293'><time timestamp='2017-02-15T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
that seems reasonable to me..  gmaxwell or sipa any serious objections?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175600' id='528294'>
<a class='timestamp' href='#528294'><time timestamp='2017-02-15T16:20:00Z'>16:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
my mention about the problem being the same as for importwallet was about the 2-hour grace period, we had that for importwallet and I think it should be the same for importmulti
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175660' id='528295'>
<a class='timestamp' href='#528295'><time timestamp='2017-02-15T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no matter how that interacts with nodes that have just pruned those two hours, it should just be documented that the grace period is there and blocks should exist for its duration until now
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175660' id='528296'>
<a class='timestamp' href='#528296'><time timestamp='2017-02-15T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but anyhow if importmulti doesn&#x27;t even throw an error when there&#x27;s not enough block data then disabling it would be better
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175660' id='528297'>
<a class='timestamp' href='#528297'><time timestamp='2017-02-15T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
right..  it&#x27;s a separate edge case to be solved later if your last non-pruned block falls in the grace period.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175660' id='528298'>
<a class='timestamp' href='#528298'><time timestamp='2017-02-15T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;d assume the ReadBlockFromDisk error would not be ignored
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175720' id='528299'>
<a class='timestamp' href='#528299'><time timestamp='2017-02-15T16:22:00Z'>16:22</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
just from a quick read my guess is it does not error, but i have not tried anything...   
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175720' id='528300'>
<a class='timestamp' href='#528300'><time timestamp='2017-02-15T16:22:00Z'>16:22</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah i agree thats a problem, b/c you could think you have all the funds and not
<br>
</div>

<div class='talk op-msg' data-timestamp='1487175900' id='528301'>
<a class='timestamp' href='#528301'><time timestamp='2017-02-15T16:25:00Z'>16:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, silently missing blocks is a very bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1487176080' id='528302'>
<a class='timestamp' href='#528302'><time timestamp='2017-02-15T16:28:00Z'>16:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
important disctinction: importprivkey is only disabled in pruning mode when a rescan is requested
<br>
</div>

<div class='talk op-msg' data-timestamp='1487176080' id='528303'>
<a class='timestamp' href='#528303'><time timestamp='2017-02-15T16:28:00Z'>16:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
probably should be the same for importmulti then, it should bark when any keys are not &#x27;now&#x27;, otherwise it&#x27;d lose functionality compared to importprivkey
<br>
</div>

<div class='talk op-msg' data-timestamp='1487177520' id='528304'>
<a class='timestamp' href='#528304'><time timestamp='2017-02-15T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jaladin1222 opened pull request #9767: 0.9 (master...0.9) <a href="https://github.com/bitcoin/bitcoin/pull/9767" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9767</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487179860' id='528305'>
<a class='timestamp' href='#528305'><time timestamp='2017-02-15T17:31:00Z'>17:31</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #9767: 0.9 (master...0.9) <a href="https://github.com/bitcoin/bitcoin/pull/9767" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9767</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487180880' id='528306'>
<a class='timestamp' href='#528306'><time timestamp='2017-02-15T17:48:00Z'>17:48</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #9768: [qa] [WIP] Add logging to test_framework.py (master...rpctestlogging) <a href="https://github.com/bitcoin/bitcoin/pull/9768" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9768</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487181480' id='528307'>
<a class='timestamp' href='#528307'><time timestamp='2017-02-15T17:58:00Z'>17:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: it should only be disabled where the rescan would scan pruned blocks... that is really the only utility in having the timestamps at all.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487184960' id='528308'>
<a class='timestamp' href='#528308'><time timestamp='2017-02-15T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
gmaxwell, are you talking about a preemptive check? would there be any problem with importing the keys then throwing an exception saying import succeeded, but some blocks were not present and some transactions might be missing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487185080' id='528309'>
<a class='timestamp' href='#528309'><time timestamp='2017-02-15T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
also i don&#x27;t understand what&#x27;s wrong with the suggestion from wumpus to just forbid rescan=True on pruned nodes
<br>
</div>

<div class='talk op-msg' data-timestamp='1487185140' id='528310'>
<a class='timestamp' href='#528310'><time timestamp='2017-02-15T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Because it guts the utility of pruning, when you lose major functionality outright just because you were so foolish as to not waste 100GB of diskspace.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487185140' id='528311'>
<a class='timestamp' href='#528311'><time timestamp='2017-02-15T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Esp because rescans of the whole chain take hours, so it&#x27;s not like they were even all that usable (except in emergencies) in any case.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487185140' id='528312'>
<a class='timestamp' href='#528312'><time timestamp='2017-02-15T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
As far as after the fact, I think that would be way less bad than denying it completely.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487185200' id='528313'>
<a class='timestamp' href='#528313'><time timestamp='2017-02-15T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it would be best to deny it first but the way importmulti is constructed makes that harder to implement.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487185200' id='528314'>
<a class='timestamp' href='#528314'><time timestamp='2017-02-15T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
oh ok, i got that part, i didn&#x27;t understand what you were saying about the defeating the &quot;utility of timestamps&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1487185800' id='528315'>
<a class='timestamp' href='#528315'><time timestamp='2017-02-15T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Bascially the only good timestamps do is that they let you import a key without reading all the blocks. (scanning extra blocks is something no one would care about.)   If pruning is prevented then you do save some rescan time, but still take on the 100GB of cost, -- this is a major barrier for people doing their own payment processing on VPSes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487185860' id='528316'>
<a class='timestamp' href='#528316'><time timestamp='2017-02-15T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The workflow there is that they have a payment processing front end which generates keys using BIP32 public derrivation, and then imports the addresses. Because of contingencies around multiple nodes and restarts they may need to rescan a bit.  The imported keys are used to watch for payments so they can display status to the user.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487185860' id='528317'>
<a class='timestamp' href='#528317'><time timestamp='2017-02-15T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The actual private keys are not put onto the VPS systems, for obvious reasons. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1487185980' id='528318'>
<a class='timestamp' href='#528318'><time timestamp='2017-02-15T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The alternative to this setup is to use a third party payment processor. But this has the downside of introducing trust where it could be avoided, and all the major processors are known to capricious shut down merchants or block customers on the basis of flimsy risk (that they piss off banks or regulators) analysis. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1487185980' id='528319'>
<a class='timestamp' href='#528319'><time timestamp='2017-02-15T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(and, of course, the systemic risk created by those processors holding large amounts of customer funds).
<br>
</div>

<div class='talk op-msg' data-timestamp='1487186220' id='528320'>
<a class='timestamp' href='#528320'><time timestamp='2017-02-15T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #9770: Allow maxsigcachesize to be zero (master...sigcachemaxsize) <a href="https://github.com/bitcoin/bitcoin/pull/9770" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9770</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487186220' id='528321'>
<a class='timestamp' href='#528321'><time timestamp='2017-02-15T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery closed pull request #9770: Allow maxsigcachesize to be zero (master...sigcachemaxsize) <a href="https://github.com/bitcoin/bitcoin/pull/9770" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9770</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487186280' id='528322'>
<a class='timestamp' href='#528322'><time timestamp='2017-02-15T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
ok this use both requires import timestamps and pruning, makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1487186340' id='528323'>
<a class='timestamp' href='#528323'><time timestamp='2017-02-15T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the other somewhat related bug is that even when you don&#x27;t import a private key, it requires that the wallet be unlocked.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487186400' id='528324'>
<a class='timestamp' href='#528324'><time timestamp='2017-02-15T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the same design make it difficult to reject the rpc based on the arguments.
<br>
</div>

<div class='talk op-msg' data-timestamp='1487186460' id='528325'>
<a class='timestamp' href='#528325'><time timestamp='2017-02-15T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery reopened pull request #9770: Allow maxsigcachesize to be zero (master...sigcachemaxsize) <a href="https://github.com/bitcoin/bitcoin/pull/9770" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9770</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487191560' id='528326'>
<a class='timestamp' href='#528326'><time timestamp='2017-02-15T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: I&#x27;m going to add a little blurb about the net speedup in the changelog. I think i remember you mentioning you&#x27;d prefer to see some sort of &quot;validation improvements&quot; or &quot;ibd speedups&quot; section, which may be a more useful way to describe it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193240' id='528327'>
<a class='timestamp' href='#528327'><time timestamp='2017-02-15T21:14:00Z'>21:14</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Should we be making it so POTENTIAL DEADLOCK DETECTED&#x27;s are elimintated or is it impossible to eliminate them all
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193300' id='528328'>
<a class='timestamp' href='#528328'><time timestamp='2017-02-15T21:15:00Z'>21:15</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I was just trackign down what caused one and I think its not an issue, but is there somehwere I should comment what caused it, or should we actually change the code to not lock incorrectly
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193300' id='528329'>
<a class='timestamp' href='#528329'><time timestamp='2017-02-15T21:15:00Z'>21:15</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i&#x27;m just not very familar with DEBUG_LOCKORDER
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193360' id='528330'>
<a class='timestamp' href='#528330'><time timestamp='2017-02-15T21:16:00Z'>21:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think we can replace it with tsan soon
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193360' id='528331'>
<a class='timestamp' href='#528331'><time timestamp='2017-02-15T21:16:00Z'>21:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and/or helgrind
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193360' id='528332'>
<a class='timestamp' href='#528332'><time timestamp='2017-02-15T21:16:00Z'>21:16</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
This particular case is the loading of a wallet can call Mark Conflicted, which causes cs_wallet then cs_main which is the opposite order it happens elsewhere
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193420' id='528333'>
<a class='timestamp' href='#528333'><time timestamp='2017-02-15T21:17:00Z'>21:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what is the other case?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193420' id='528334'>
<a class='timestamp' href='#528334'><time timestamp='2017-02-15T21:17:00Z'>21:17</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
we have tons of LOCK2(cs_main, cs_wallet)&#x27;s
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193480' id='528335'>
<a class='timestamp' href='#528335'><time timestamp='2017-02-15T21:18:00Z'>21:18</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i was assuming this isn&#x27;t a problem b/c the wallet loading is done before other threads are spun up, but maybe thats actually not right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193480' id='528336'>
<a class='timestamp' href='#528336'><time timestamp='2017-02-15T21:18:00Z'>21:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well the only question is whether those 2 orders can occur simultaneously
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193540' id='528337'>
<a class='timestamp' href='#528337'><time timestamp='2017-02-15T21:19:00Z'>21:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yes thats what i mean, can anything else happen while the wallet is still loading?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193660' id='528338'>
<a class='timestamp' href='#528338'><time timestamp='2017-02-15T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
dpesm
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193660' id='528339'>
<a class='timestamp' href='#528339'><time timestamp='2017-02-15T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
oops
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193660' id='528340'>
<a class='timestamp' href='#528340'><time timestamp='2017-02-15T21:21:00Z'>21:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
doesn&#x27;t look like it i suppose...
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193840' id='528341'>
<a class='timestamp' href='#528341'><time timestamp='2017-02-15T21:24:00Z'>21:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
regardless, i think we should have consistent lock orders everywhere
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193840' id='528342'>
<a class='timestamp' href='#528342'><time timestamp='2017-02-15T21:24:00Z'>21:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;d say all those LOCK2(cs_main, cs_wallet)s can be swapped
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193900' id='528343'>
<a class='timestamp' href='#528343'><time timestamp='2017-02-15T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yikes!!
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193900' id='528344'>
<a class='timestamp' href='#528344'><time timestamp='2017-02-15T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wallet should call main, not the other way around IMHO
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193900' id='528345'>
<a class='timestamp' href='#528345'><time timestamp='2017-02-15T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i bet several of them are reentrant
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193900' id='528346'>
<a class='timestamp' href='#528346'><time timestamp='2017-02-15T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
main is already held before we get there
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193900' id='528347'>
<a class='timestamp' href='#528347'><time timestamp='2017-02-15T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, that&#x27;s the issue then
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193900' id='528348'>
<a class='timestamp' href='#528348'><time timestamp='2017-02-15T21:25:00Z'>21:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
main shouldn&#x27;t be held while calling wallet code
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193960' id='528349'>
<a class='timestamp' href='#528349'><time timestamp='2017-02-15T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
:)  we&#x27;re working on it!   see #9725
<br>
</div>

<div class='talk op-msg' data-timestamp='1487193960' id='528350'>
<a class='timestamp' href='#528350'><time timestamp='2017-02-15T21:26:00Z'>21:26</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9725" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9725</a> | CValidationInterface Cleanups by TheBlueMatt · Pull Request #9725 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1487194020' id='528351'>
<a class='timestamp' href='#528351'><time timestamp='2017-02-15T21:27:00Z'>21:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
great
<br>
</div>

<div class='talk op-msg' data-timestamp='1487194140' id='528352'>
<a class='timestamp' href='#528352'><time timestamp='2017-02-15T21:29:00Z'>21:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
hmm     
<br>
</div>

<div class='talk op-msg' data-timestamp='1487194140' id='528353'>
<a class='timestamp' href='#528353'><time timestamp='2017-02-15T21:29:00Z'>21:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it assert fails when you have a potential deadlock?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487194200' id='528354'>
<a class='timestamp' href='#528354'><time timestamp='2017-02-15T21:30:00Z'>21:30</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so this must have been somehow recently introduced?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487194860' id='528355'>
<a class='timestamp' href='#528355'><time timestamp='2017-02-15T21:41:00Z'>21:41</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
mm, I&#x27;m going to go ahead and PR some mutex cleanups I&#x27;ve been waiting on for a while. I&#x27;m going to start moving the net code towards non-recursive locks. Would you guys prefer a generic LOCK(cs) that takes any mutex, or NON_RECURSIVE_LOCK(cs) as a form of self-documentation?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487196000' id='528356'>
<a class='timestamp' href='#528356'><time timestamp='2017-02-15T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so...  what should i do about this stupid deadlock warnign for now?  seems like it might annoy someone else..  but only obvious fix i could see would be holding cs_main for all of loadwallet.  its not immediately apparent to me whether that is bad?
<br>
</div>

<div class='talk op-msg' data-timestamp='1487196060' id='528357'>
<a class='timestamp' href='#528357'><time timestamp='2017-02-15T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
eh.. i&#x27;ll move on and make an issue..  if you have a clean wallet, i think the problem goes away
<br>
</div>

<div class='talk op-msg' data-timestamp='1487196480' id='528358'>
<a class='timestamp' href='#528358'><time timestamp='2017-02-15T22:08:00Z'>22:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ryanofsky opened pull request #9771: Add missing cs_wallet lock that triggers new lock held assertion (master...pr/loadlock) <a href="https://github.com/bitcoin/bitcoin/pull/9771" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9771</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487197140' id='528359'>
<a class='timestamp' href='#528359'><time timestamp='2017-02-15T22:19:00Z'>22:19</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ryanofsky opened pull request #9773: WIP: Return errors from importmulti if complete rescans are not successful (master...pr/multicheck) <a href="https://github.com/bitcoin/bitcoin/pull/9773" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9773</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1487198700' id='528360'>
<a class='timestamp' href='#528360'><time timestamp='2017-02-15T22:45:00Z'>22:45</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] pstratem closed pull request #9762: Add txdetails parameter to getblock. (master...2017-02-14-getblock-includetxs) <a href="https://github.com/bitcoin/bitcoin/pull/9762" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9762</a>
<br>
</div>

</div>
</section>

</body>
</html>
