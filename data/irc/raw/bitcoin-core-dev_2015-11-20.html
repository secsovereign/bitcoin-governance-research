<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2015-11-20
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2015-11-20' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:27 UTC</pre>
<pre><a href="/bitcoin-core-dev/2015-10-20">&lt;</a><span class='header'>  November 2015   </span><a href="/bitcoin-core-dev/2015-12-20">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2015-11-01">1</a>  <a class="" href="/bitcoin-core-dev/2015-11-02">2</a>  <a class="" href="/bitcoin-core-dev/2015-11-03">3</a>  <a class="" href="/bitcoin-core-dev/2015-11-04">4</a>  <a class="" href="/bitcoin-core-dev/2015-11-05">5</a>  <a class="" href="/bitcoin-core-dev/2015-11-06">6</a>  <a class="" href="/bitcoin-core-dev/2015-11-07">7</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2015-11-08">8</a>  <a class="" href="/bitcoin-core-dev/2015-11-09">9</a> <a class="" href="/bitcoin-core-dev/2015-11-10">10</a> <a class="" href="/bitcoin-core-dev/2015-11-11">11</a> <a class="" href="/bitcoin-core-dev/2015-11-12">12</a> <a class="" href="/bitcoin-core-dev/2015-11-13">13</a> <a class="" href="/bitcoin-core-dev/2015-11-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-11-15">15</a> <a class="" href="/bitcoin-core-dev/2015-11-16">16</a> <a class="" href="/bitcoin-core-dev/2015-11-17">17</a> <a class="" href="/bitcoin-core-dev/2015-11-18">18</a> <a class="" href="/bitcoin-core-dev/2015-11-19">19</a> <a class="current" href="/bitcoin-core-dev/2015-11-20">20</a> <a class="" href="/bitcoin-core-dev/2015-11-21">21</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-11-22">22</a> <a class="" href="/bitcoin-core-dev/2015-11-23">23</a> <a class="" href="/bitcoin-core-dev/2015-11-24">24</a> <a class="" href="/bitcoin-core-dev/2015-11-25">25</a> <a class="" href="/bitcoin-core-dev/2015-11-26">26</a> <a class="" href="/bitcoin-core-dev/2015-11-27">27</a> <a class="" href="/bitcoin-core-dev/2015-11-28">28</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-11-29">29</a> <a class="" href="/bitcoin-core-dev/2015-11-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1447981800' id='438908'>
<a class='timestamp' href='#438908'><time timestamp='2015-11-20T01:10:00Z'>01:10</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
everytime I read IBLT, I think to myself &quot;inverted bacon lettuce tomato&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1447981800' id='438909'>
<a class='timestamp' href='#438909'><time timestamp='2015-11-20T01:10:00Z'>01:10</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
Sigh
<br>
</div>

<div class='talk op-msg' data-timestamp='1447982100' id='438910'>
<a class='timestamp' href='#438910'><time timestamp='2015-11-20T01:15:00Z'>01:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
LOL
<br>
</div>

<div class='talk op-msg' data-timestamp='1447984620' id='438911'>
<a class='timestamp' href='#438911'><time timestamp='2015-11-20T01:57:00Z'>01:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
likewise, fwiw
<br>
</div>

<div class='talk op-msg' data-timestamp='1447986540' id='438912'>
<a class='timestamp' href='#438912'><time timestamp='2015-11-20T02:29:00Z'>02:29</time></a>
&lt;<span class='nick nick-1'> GitHub122</span>&gt;
[bitcoin] pstratem opened pull request #7064: Perform entire CWallet::TopUpKeyPool in a transaction. (master...2015-11-19-wallet-topupkeypool) <a href="https://github.com/bitcoin/bitcoin/pull/7064" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7064</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1447986840' id='438913'>
<a class='timestamp' href='#438913'><time timestamp='2015-11-20T02:34:00Z'>02:34</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
CDB::Close abort&#x27;s any active transaction, it seems like any time we&#x27;re calling CDB::Close and have an active transaction in play that&#x27;s an exception
<br>
</div>

<div class='talk op-msg' data-timestamp='1448004900' id='438914'>
<a class='timestamp' href='#438914'><time timestamp='2015-11-20T07:35:00Z'>07:35</time></a>
&lt;<span class='nick nick-5'> GitHub13</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/c983d6fcb47b...a1bfca80521e" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/c983d6fcb47b...a1bfca80521e</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448004900' id='438915'>
<a class='timestamp' href='#438915'><time timestamp='2015-11-20T07:35:00Z'>07:35</time></a>
&lt;<span class='nick nick-5'> GitHub13</span>&gt;
bitcoin/master 2798e0b daniel: add powerpc build support for openssl lib
<br>
</div>

<div class='talk op-msg' data-timestamp='1448004900' id='438916'>
<a class='timestamp' href='#438916'><time timestamp='2015-11-20T07:35:00Z'>07:35</time></a>
&lt;<span class='nick nick-5'> GitHub13</span>&gt;
bitcoin/master a1bfca8 Wladimir J. van der Laan: Merge pull request #7059...
<br>
</div>

<div class='talk op-msg' data-timestamp='1448004900' id='438917'>
<a class='timestamp' href='#438917'><time timestamp='2015-11-20T07:35:00Z'>07:35</time></a>
&lt;<span class='nick nick-15'> GitHub156</span>&gt;
[bitcoin] laanwj closed pull request #7059: add powerpc build support for openssl lib (master...ppc) <a href="https://github.com/bitcoin/bitcoin/pull/7059" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7059</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448005080' id='438918'>
<a class='timestamp' href='#438918'><time timestamp='2015-11-20T07:38:00Z'>07:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;m bummed that my ppc debian host stopped booting. I think something is wrong with the PSU.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448005140' id='438919'>
<a class='timestamp' href='#438919'><time timestamp='2015-11-20T07:39:00Z'>07:39</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
I still got mine running!
<br>
</div>

<div class='talk op-msg' data-timestamp='1448005200' id='438920'>
<a class='timestamp' href='#438920'><time timestamp='2015-11-20T07:40:00Z'>07:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
midnightmagic: can you update to bitcoin core master and see that it still works there?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448005200' id='438921'>
<a class='timestamp' href='#438921'><time timestamp='2015-11-20T07:40:00Z'>07:40</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
sure!
<br>
</div>

<div class='talk op-msg' data-timestamp='1448005200' id='438922'>
<a class='timestamp' href='#438922'><time timestamp='2015-11-20T07:40:00Z'>07:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;d wanted to use it to test the switch to libsecp256k1 validation.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448005260' id='438923'>
<a class='timestamp' href='#438923'><time timestamp='2015-11-20T07:41:00Z'>07:41</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
hrm. i think it&#x27;s trying to do a kernel update.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448006460' id='438924'>
<a class='timestamp' href='#438924'><time timestamp='2015-11-20T08:01:00Z'>08:01</time></a>
&lt;<span class='nick nick-14'> GitHub118</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/a1bfca80521e...07b770caf3f5" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/a1bfca80521e...07b770caf3f5</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448006460' id='438925'>
<a class='timestamp' href='#438925'><time timestamp='2015-11-20T08:01:00Z'>08:01</time></a>
&lt;<span class='nick nick-14'> GitHub118</span>&gt;
bitcoin/master 33b7f83 MarcoFalke: [qa] travis: cover <b>*receivedby*</b> rpcs
<br>
</div>

<div class='talk op-msg' data-timestamp='1448006460' id='438926'>
<a class='timestamp' href='#438926'><time timestamp='2015-11-20T08:01:00Z'>08:01</time></a>
&lt;<span class='nick nick-14'> GitHub118</span>&gt;
bitcoin/master 07b770c Wladimir J. van der Laan: Merge pull request #7019...
<br>
</div>

<div class='talk op-msg' data-timestamp='1448006460' id='438927'>
<a class='timestamp' href='#438927'><time timestamp='2015-11-20T08:01:00Z'>08:01</time></a>
&lt;<span class='nick nick-9'> GitHub39</span>&gt;
[bitcoin] laanwj closed pull request #7019: [qa] travis: cover more tests (master...MarcoFalke-2015-receivedby) <a href="https://github.com/bitcoin/bitcoin/pull/7019" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7019</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448008860' id='438928'>
<a class='timestamp' href='#438928'><time timestamp='2015-11-20T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: you said when the mempool evicts a tx, the wallet threats it as conflicted. I wrote a test and &quot;gettransaction&quot; on a mempool-evicted tx responses confirmations:-1 but no walletconflicts (=[]). The GUI will probably threats -1 confirmations as conflicted.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448008860' id='438929'>
<a class='timestamp' href='#438929'><time timestamp='2015-11-20T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
did you mean -1 confirmation = conflicted?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009040' id='438930'>
<a class='timestamp' href='#438930'><time timestamp='2015-11-20T08:44:00Z'>08:44</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: -1 is conflicted; that it shows -1 is a bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009100' id='438931'>
<a class='timestamp' href='#438931'><time timestamp='2015-11-20T08:45:00Z'>08:45</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
I wonder if it&#x27;s safe to use the same logic as walletconflicts for that
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009160' id='438932'>
<a class='timestamp' href='#438932'><time timestamp='2015-11-20T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: But looking at CMerkleTx::GetDepthInMainChain(), it seems like that -1 just means:  &quot;not in the chain, not in the mempool&quot;.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009160' id='438933'>
<a class='timestamp' href='#438933'><time timestamp='2015-11-20T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: at the time that was written, it implied a conflict
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009220' id='438934'>
<a class='timestamp' href='#438934'><time timestamp='2015-11-20T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
there is an assumption that anything not conflicted, will be in the mempool or chain
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009220' id='438935'>
<a class='timestamp' href='#438935'><time timestamp='2015-11-20T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: right. This assumption fails as soon as mempool can evict txes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009220' id='438936'>
<a class='timestamp' href='#438936'><time timestamp='2015-11-20T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
it&#x27;s possible doing a more through check could harm performance
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009220' id='438937'>
<a class='timestamp' href='#438937'><time timestamp='2015-11-20T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
so I&#x27;m not sure what the best way to fix it is
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009280' id='438938'>
<a class='timestamp' href='#438938'><time timestamp='2015-11-20T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
what about &quot;removetransaction&quot; call for -1 confirmations txes? GUI: right click -&gt; remove tx?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009280' id='438939'>
<a class='timestamp' href='#438939'><time timestamp='2015-11-20T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
so only allow removing conflicted ones?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009280' id='438940'>
<a class='timestamp' href='#438940'><time timestamp='2015-11-20T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
right.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009340' id='438941'>
<a class='timestamp' href='#438941'><time timestamp='2015-11-20T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
sounds fine, except s/remove/hide/ at least in the low-level
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009340' id='438942'>
<a class='timestamp' href='#438942'><time timestamp='2015-11-20T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
agreed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009340' id='438943'>
<a class='timestamp' href='#438943'><time timestamp='2015-11-20T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
gah, sipa pointed earlier that we can just check for the actual reason.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009400' id='438944'>
<a class='timestamp' href='#438944'><time timestamp='2015-11-20T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Luke-Jr: it won&#x27;t harm performance any more than what we currently do.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009400' id='438945'>
<a class='timestamp' href='#438945'><time timestamp='2015-11-20T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: did you mean that point: <a href="http://bitcoinstats.com/irc/bitcoin-dev/logs/2015/11/19#l1447960611" class="link" target="_blank">http://bitcoinstats.com/irc/bitcoin-dev/logs/2015/11/19#l1447960611</a>.0
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009400' id='438946'>
<a class='timestamp' href='#438946'><time timestamp='2015-11-20T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
gmaxwell: oh, good, so it should be easy
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009400' id='438947'>
<a class='timestamp' href='#438947'><time timestamp='2015-11-20T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: yes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009460' id='438948'>
<a class='timestamp' href='#438948'><time timestamp='2015-11-20T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: my issue with that is, that i slowly like to reduce mempool/wallet coupling to have the possibility to detact the wallet over a SPV like connection
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009460' id='438949'>
<a class='timestamp' href='#438949'><time timestamp='2015-11-20T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
And also, how should SPV wallet deal with mempool eviction.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009580' id='438950'>
<a class='timestamp' href='#438950'><time timestamp='2015-11-20T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
This is largely unrelated to the actual mempool, it has to do more with the utxo set.  Please don&#x27;t overdesign right now. A SPV wallet cannot detect a non-in-wallet conflict, but we can. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009640' id='438951'>
<a class='timestamp' href='#438951'><time timestamp='2015-11-20T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: Okay. I see the point. But sipas point would require a way to check if a tx <b>*would*</b> be accepted in the mempool IIRC?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009700' id='438952'>
<a class='timestamp' href='#438952'><time timestamp='2015-11-20T08:55:00Z'>08:55</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr : While working on this. How would RBF work in case of user interaction. Could a first feature be &quot;altertransaction&quot; where one could add inputs and or outputs while newfee &gt; oldfee?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009700' id='438953'>
<a class='timestamp' href='#438953'><time timestamp='2015-11-20T08:55:00Z'>08:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It&#x27;s more of a &#x27;would be accepted in a block&#x27;, but testing the mempool is a stronger version of that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009760' id='438954'>
<a class='timestamp' href='#438954'><time timestamp='2015-11-20T08:56:00Z'>08:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
For RBF fee revision the way that should work is to precalculate, with nlocktimes, transaction versions with higher fees. But do not broadcast them.  This avoids having to authorize signing multiple times.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009760' id='438955'>
<a class='timestamp' href='#438955'><time timestamp='2015-11-20T08:56:00Z'>08:56</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: I would prefer it behind-the-scenes/automatic, but that may be simpler.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009820' id='438956'>
<a class='timestamp' href='#438956'><time timestamp='2015-11-20T08:57:00Z'>08:57</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: huh. Sounds after a nice solution, but probably relatively complex to implement. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009820' id='438957'>
<a class='timestamp' href='#438957'><time timestamp='2015-11-20T08:57:00Z'>08:57</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
eg, sending another payment should probably by default be altering any outstanding unconfirmed one to add an output, but signing a normal one to broadcast in case the former confirms without it
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009880' id='438958'>
<a class='timestamp' href='#438958'><time timestamp='2015-11-20T08:58:00Z'>08:58</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
hah, what I just suggested probably makes gmaxwell&#x27;s look simple :D
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009880' id='438959'>
<a class='timestamp' href='#438959'><time timestamp='2015-11-20T08:58:00Z'>08:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: as far as remove, I think what would be better is &#x27;archivetransaction&#x27; which can be done to any confirm/conflicted transaction or any unconfirmed non-conflicted at least (say) 72 hours old. (so people don&#x27;t think they can cancel transactions this way)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448009880' id='438960'>
<a class='timestamp' href='#438960'><time timestamp='2015-11-20T08:58:00Z'>08:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think thats fairly simple because it needs basically no interface. it could be litterally a couple line loop to produce the transactions. Storing them is a bit more work.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010000' id='438961'>
<a class='timestamp' href='#438961'><time timestamp='2015-11-20T09:00:00Z'>09:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Did i got this right; when the mempool evicts a wtx, the inputs automatically are release and can be used in a new transaction?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010000' id='438962'>
<a class='timestamp' href='#438962'><time timestamp='2015-11-20T09:00:00Z'>09:00</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: that&#x27;s a bug because the wallet thinks it was conflicted
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010060' id='438963'>
<a class='timestamp' href='#438963'><time timestamp='2015-11-20T09:01:00Z'>09:01</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But also a feature? so &quot;archivetransaction&quot; is just a &quot;visibility&quot; thing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010060' id='438964'>
<a class='timestamp' href='#438964'><time timestamp='2015-11-20T09:01:00Z'>09:01</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
not a feature..
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010060' id='438965'>
<a class='timestamp' href='#438965'><time timestamp='2015-11-20T09:01:00Z'>09:01</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
unintended harmful behaviour &lt;.&lt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010060' id='438966'>
<a class='timestamp' href='#438966'><time timestamp='2015-11-20T09:01:00Z'>09:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It&#x27;s not a feature; it&#x27;s a recently introducted bug that is very harmful.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010060' id='438967'>
<a class='timestamp' href='#438967'><time timestamp='2015-11-20T09:01:00Z'>09:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: hell no!
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010060' id='438968'>
<a class='timestamp' href='#438968'><time timestamp='2015-11-20T09:01:00Z'>09:01</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But if your transaction got evicted (to less fees), you can automatically create a new-one?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010120' id='438969'>
<a class='timestamp' href='#438969'><time timestamp='2015-11-20T09:02:00Z'>09:02</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: you can&#x27;t deterministically respend it.. only accidentally
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010120' id='438970'>
<a class='timestamp' href='#438970'><time timestamp='2015-11-20T09:02:00Z'>09:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it could cause you to overdraft yourself and rip people off accidentally and be unable to make it right (at least not immediately) because you no longer have enough bitcoin.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010120' id='438971'>
<a class='timestamp' href='#438971'><time timestamp='2015-11-20T09:02:00Z'>09:02</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
so if you tried to RBF this way, you could quite easily end up sendign the payment twice
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010120' id='438972'>
<a class='timestamp' href='#438972'><time timestamp='2015-11-20T09:02:00Z'>09:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: when the mempool evicts, you specifically do not want to make the coins available again
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010180' id='438973'>
<a class='timestamp' href='#438973'><time timestamp='2015-11-20T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: so the only way to re-use the inputs would be with RBF?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010180' id='438974'>
<a class='timestamp' href='#438974'><time timestamp='2015-11-20T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
would be/should be
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010180' id='438975'>
<a class='timestamp' href='#438975'><time timestamp='2015-11-20T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: you only do that when the reason for not being in the mempool is conflict with the blockchain
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010180' id='438976'>
<a class='timestamp' href='#438976'><time timestamp='2015-11-20T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: no, we need to fix that conflict check to work correctly now that eviction is possible.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010180' id='438977'>
<a class='timestamp' href='#438977'><time timestamp='2015-11-20T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: read the meeting log
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010240' id='438978'>
<a class='timestamp' href='#438978'><time timestamp='2015-11-20T09:04:00Z'>09:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
They should only become available again once actually conflicted (or to a RBF respend which still pays the original destination)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010240' id='438979'>
<a class='timestamp' href='#438979'><time timestamp='2015-11-20T09:04:00Z'>09:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: RBF is a full node side thing, not a wallet thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010240' id='438980'>
<a class='timestamp' href='#438980'><time timestamp='2015-11-20T09:04:00Z'>09:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but we probably shouldn&#x27;t be implementing wallet replacement behavior yet, not until after it&#x27;s generally available in the network.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010300' id='438981'>
<a class='timestamp' href='#438981'><time timestamp='2015-11-20T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Though yes, archive would be just a visibility thing. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010300' id='438982'>
<a class='timestamp' href='#438982'><time timestamp='2015-11-20T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(and potentially memory usage and performance)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010420' id='438983'>
<a class='timestamp' href='#438983'><time timestamp='2015-11-20T09:07:00Z'>09:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
so we need something like this: if confirmations = -1, check if tx would be accepted to the mempool, if rejected due to non-existing inputs = conflicted
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010420' id='438984'>
<a class='timestamp' href='#438984'><time timestamp='2015-11-20T09:07:00Z'>09:07</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
…no
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010480' id='438985'>
<a class='timestamp' href='#438985'><time timestamp='2015-11-20T09:08:00Z'>09:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: the whole -1 comes from checking the mempool, the specific behavior of that check just needs to be changed a bit so that it&#x27;s not confused by the new behavior.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010480' id='438986'>
<a class='timestamp' href='#438986'><time timestamp='2015-11-20T09:08:00Z'>09:08</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
if the transaction isn&#x27;t conflicted, then confirmations != -1
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010540' id='438987'>
<a class='timestamp' href='#438987'><time timestamp='2015-11-20T09:09:00Z'>09:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
perhaps we should also add a field on the transaction that indicates if its in the local mempool or not. (or even what its position is, now that our mempool is usefully sorted)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010540' id='438988'>
<a class='timestamp' href='#438988'><time timestamp='2015-11-20T09:09:00Z'>09:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the easiest, but ugly way, is to check the return validation state code from accepttomemorypool
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010600' id='438989'>
<a class='timestamp' href='#438989'><time timestamp='2015-11-20T09:10:00Z'>09:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(well perhaps not, since position is uncachable.; though a mempoolposition &lt;txid&gt; wouldn&#x27;t be bad.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010720' id='438990'>
<a class='timestamp' href='#438990'><time timestamp='2015-11-20T09:12:00Z'>09:12</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
feels like something that we&#x27;d be likely to want to change after 0.12 IMO
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010780' id='438991'>
<a class='timestamp' href='#438991'><time timestamp='2015-11-20T09:13:00Z'>09:13</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
(although I wanted to give a good example reason, but I couldn&#x27;t come up with one)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010780' id='438992'>
<a class='timestamp' href='#438992'><time timestamp='2015-11-20T09:13:00Z'>09:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Luke-Jr: what would be?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010840' id='438993'>
<a class='timestamp' href='#438993'><time timestamp='2015-11-20T09:14:00Z'>09:14</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
gmaxwell: mempool position of tx stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1448010840' id='438994'>
<a class='timestamp' href='#438994'><time timestamp='2015-11-20T09:14:00Z'>09:14</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
the exposed interface seems not necessarily obvious
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011020' id='438995'>
<a class='timestamp' href='#438995'><time timestamp='2015-11-20T09:17:00Z'>09:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But while looking at <a href="https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L1521" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L1521</a>, it looks like that the wallet does not spend evicted transaction (confirmations: -1)? Will test now...
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011260' id='438996'>
<a class='timestamp' href='#438996'><time timestamp='2015-11-20T09:21:00Z'>09:21</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: that&#x27;s not the issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011260' id='438997'>
<a class='timestamp' href='#438997'><time timestamp='2015-11-20T09:21:00Z'>09:21</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
the UTXOs are confirmed, in this case
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011260' id='438998'>
<a class='timestamp' href='#438998'><time timestamp='2015-11-20T09:21:00Z'>09:21</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
but they are also spent already.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011320' id='438999'>
<a class='timestamp' href='#438999'><time timestamp='2015-11-20T09:22:00Z'>09:22</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
that nDepth is the UTXO&#x27;s transaction depth, not the spending transaction&#x27;s depth
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011380' id='439000'>
<a class='timestamp' href='#439000'><time timestamp='2015-11-20T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Argh. Right... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011440' id='439001'>
<a class='timestamp' href='#439001'><time timestamp='2015-11-20T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-10'> GitHub185</span>&gt;
[bitcoin] laanwj opened pull request #7065: http: add Boost 1.49 compatibility (master...2015_11_httpserver_boost1_49) <a href="https://github.com/bitcoin/bitcoin/pull/7065" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7065</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011500' id='439002'>
<a class='timestamp' href='#439002'><time timestamp='2015-11-20T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
<a href="https://www.reddit.com/r/Bitcoin/comments/3tigrp/comcast_data_caps_will_make_nodes_running_with/" class="link" target="_blank">https://www.reddit.com/r/Bitcoin/comments/3tigrp/comcast_data_caps_will_make_nodes_running_with/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011740' id='439003'>
<a class='timestamp' href='#439003'><time timestamp='2015-11-20T09:29:00Z'>09:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: so that a relevant part?: <a href="https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L459" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L459</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011800' id='439004'>
<a class='timestamp' href='#439004'><time timestamp='2015-11-20T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: no
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011800' id='439005'>
<a class='timestamp' href='#439005'><time timestamp='2015-11-20T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: the relevant part is the GetDepthInMainChain computation
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011800' id='439006'>
<a class='timestamp' href='#439006'><time timestamp='2015-11-20T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: the only part that needs to be touched right now, is GetDepthInMainChain
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011800' id='439007'>
<a class='timestamp' href='#439007'><time timestamp='2015-11-20T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which looks at the mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011860' id='439008'>
<a class='timestamp' href='#439008'><time timestamp='2015-11-20T09:31:00Z'>09:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if it isn&#x27;t in the mempool, it should just return 0
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011860' id='439009'>
<a class='timestamp' href='#439009'><time timestamp='2015-11-20T09:31:00Z'>09:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
upon first submit, and upon eviction, we should check the return value of accepttomemorypool
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011920' id='439010'>
<a class='timestamp' href='#439010'><time timestamp='2015-11-20T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and when that indicates it&#x27;s due to missing input, set a boolean flag remember in the wallet 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011920' id='439011'>
<a class='timestamp' href='#439011'><time timestamp='2015-11-20T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
sipa: well, it needs to return -1 when conflicted or we break other stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011920' id='439012'>
<a class='timestamp' href='#439012'><time timestamp='2015-11-20T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
or rather, &lt;0
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011920' id='439013'>
<a class='timestamp' href='#439013'><time timestamp='2015-11-20T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and when GetDepthInMemoryPool would return 0 and that flag is said, only then return -1
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011920' id='439014'>
<a class='timestamp' href='#439014'><time timestamp='2015-11-20T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
IIRC the original plan was -1 if the conflicting tx was 1 block deep; -2 and so on for more blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011980' id='439015'>
<a class='timestamp' href='#439015'><time timestamp='2015-11-20T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right, that&#x27;s an older idea that becomes viable again
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011980' id='439016'>
<a class='timestamp' href='#439016'><time timestamp='2015-11-20T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
but no need to do that now
<br>
</div>

<div class='talk op-msg' data-timestamp='1448011980' id='439017'>
<a class='timestamp' href='#439017'><time timestamp='2015-11-20T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012040' id='439018'>
<a class='timestamp' href='#439018'><time timestamp='2015-11-20T09:34:00Z'>09:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Luke-Jr: we also need to be informee on eviction, with the reason for that eviction (or alternatively, resubmit upon eviction)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012100' id='439019'>
<a class='timestamp' href='#439019'><time timestamp='2015-11-20T09:35:00Z'>09:35</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
sipa: well, if we&#x27;re just going to resubmit as-is, we might as well just set a priority on our own transactions so they never get evicted
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012100' id='439020'>
<a class='timestamp' href='#439020'><time timestamp='2015-11-20T09:35:00Z'>09:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Luke-Jr: the resubmit would fail
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012160' id='439021'>
<a class='timestamp' href='#439021'><time timestamp='2015-11-20T09:36:00Z'>09:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Luke-Jr: the reason to do is to find out why it fails
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012160' id='439022'>
<a class='timestamp' href='#439022'><time timestamp='2015-11-20T09:36:00Z'>09:36</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012700' id='439023'>
<a class='timestamp' href='#439023'><time timestamp='2015-11-20T09:45:00Z'>09:45</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: what about informing/signaling the wallet in case of mempool eviction and set the wtx flag then (=confirmation: 0 instead of -1)? Would that be wrong?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012820' id='439024'>
<a class='timestamp' href='#439024'><time timestamp='2015-11-20T09:47:00Z'>09:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: read 5 lines up
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012820' id='439025'>
<a class='timestamp' href='#439025'><time timestamp='2015-11-20T09:47:00Z'>09:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We shouldn&#x27;t depend on submission or resubmission.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012880' id='439026'>
<a class='timestamp' href='#439026'><time timestamp='2015-11-20T09:48:00Z'>09:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: hmm?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012880' id='439027'>
<a class='timestamp' href='#439027'><time timestamp='2015-11-20T09:48:00Z'>09:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
submission certainly
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012880' id='439028'>
<a class='timestamp' href='#439028'><time timestamp='2015-11-20T09:48:00Z'>09:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
For example, if walletbroadcast=0 we should still learn when it goes conflicted.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012880' id='439029'>
<a class='timestamp' href='#439029'><time timestamp='2015-11-20T09:48:00Z'>09:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Saw that. But would that still require to evaluate the pfMissingInputs on first submitting?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012880' id='439030'>
<a class='timestamp' href='#439030'><time timestamp='2015-11-20T09:48:00Z'>09:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: ugh
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012880' id='439031'>
<a class='timestamp' href='#439031'><time timestamp='2015-11-20T09:48:00Z'>09:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so we need an AcceptToMemoryPool dryrun mode?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012880' id='439032'>
<a class='timestamp' href='#439032'><time timestamp='2015-11-20T09:48:00Z'>09:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
When the transaction is added to wallet we should check if it is conflicted. Then on every block tip change we should check all unconfirmed transactions if they are conflicted.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012940' id='439033'>
<a class='timestamp' href='#439033'><time timestamp='2015-11-20T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok, i guess it&#x27;s easier then to add a main function CheckForConflicgts
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012940' id='439034'>
<a class='timestamp' href='#439034'><time timestamp='2015-11-20T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and call then if submission fails or is skipped, or we are evicted
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012940' id='439035'>
<a class='timestamp' href='#439035'><time timestamp='2015-11-20T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and cache the result
<br>
</div>

<div class='talk op-msg' data-timestamp='1448012940' id='439036'>
<a class='timestamp' href='#439036'><time timestamp='2015-11-20T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t think we need to do anything with evicted?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448013000' id='439037'>
<a class='timestamp' href='#439037'><time timestamp='2015-11-20T09:50:00Z'>09:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
eviction also happens on block confirm, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448013000' id='439038'>
<a class='timestamp' href='#439038'><time timestamp='2015-11-20T09:50:00Z'>09:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
just cache until blockchain tip changes, 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448013000' id='439039'>
<a class='timestamp' href='#439039'><time timestamp='2015-11-20T09:50:00Z'>09:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok, that seems reasonable
<br>
</div>

<div class='talk op-msg' data-timestamp='1448013060' id='439040'>
<a class='timestamp' href='#439040'><time timestamp='2015-11-20T09:51:00Z'>09:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or even cache the blockindex itself, and as long as the active one descends from it, don&#x27;t reevaluate if true
<br>
</div>

<div class='talk op-msg' data-timestamp='1448013060' id='439041'>
<a class='timestamp' href='#439041'><time timestamp='2015-11-20T09:51:00Z'>09:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
seperately it would be interesting to know if a txn was in-mempool or not, but I think thats not really cachable. :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1448013060' id='439042'>
<a class='timestamp' href='#439042'><time timestamp='2015-11-20T09:51:00Z'>09:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1448013120' id='439043'>
<a class='timestamp' href='#439043'><time timestamp='2015-11-20T09:52:00Z'>09:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: yes, right once conflicted it would be nice if it were cheap, so a bunch of these don&#x27;t become a performance sink in the wallet. Good call.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448013240' id='439044'>
<a class='timestamp' href='#439044'><time timestamp='2015-11-20T09:54:00Z'>09:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
non-cachability of the mempool check is perhaps not that bad though, since it would only run on transactions which are not confirmed nor conflicted.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448013840' id='439045'>
<a class='timestamp' href='#439045'><time timestamp='2015-11-20T10:04:00Z'>10:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: yes, because such a conflict check will pull in dependent utxos from the chainstate
<br>
</div>

<div class='talk op-msg' data-timestamp='1448013840' id='439046'>
<a class='timestamp' href='#439046'><time timestamp='2015-11-20T10:04:00Z'>10:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so icthink we want to avoid that at all costs
<br>
</div>

<div class='talk op-msg' data-timestamp='1448014080' id='439047'>
<a class='timestamp' href='#439047'><time timestamp='2015-11-20T10:08:00Z'>10:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: hm? To test if a transaction is in mempool we would just access the mempool by txid and check the transaction hash itself against it. Not try submitting it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448014800' id='439048'>
<a class='timestamp' href='#439048'><time timestamp='2015-11-20T10:20:00Z'>10:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell, sipa: mind doing a quick concept-review if I&#x27;m going into the right direction (big !WIP!, just check the concept): <a href="https://github.com/jonasschnelli/bitcoin/commit/723b7c365ceaa1567c364e1ffc5602f5dfd1b7fb" class="link" target="_blank">https://github.com/jonasschnelli/bitcoin/commit/723b7c365ceaa1567c364e1ffc5602f5dfd1b7fb</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448014860' id='439049'>
<a class='timestamp' href='#439049'><time timestamp='2015-11-20T10:21:00Z'>10:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
There is no check right now when adding a wtx to the wallet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015280' id='439050'>
<a class='timestamp' href='#439050'><time timestamp='2015-11-20T10:28:00Z'>10:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: well you need to check whether all inputs are available
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015280' id='439051'>
<a class='timestamp' href='#439051'><time timestamp='2015-11-20T10:28:00Z'>10:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: which means looking at the utxo set, not just the wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015400' id='439052'>
<a class='timestamp' href='#439052'><time timestamp='2015-11-20T10:30:00Z'>10:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: GetDepthInMainChain should return 0 if not conflicted
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015460' id='439053'>
<a class='timestamp' href='#439053'><time timestamp='2015-11-20T10:31:00Z'>10:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t think you do, you do that via the conflicted check, which is cached.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015460' id='439054'>
<a class='timestamp' href='#439054'><time timestamp='2015-11-20T10:31:00Z'>10:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i&#x27;m confused; how could you detect a conflict with mempool that limited to zero?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015460' id='439055'>
<a class='timestamp' href='#439055'><time timestamp='2015-11-20T10:31:00Z'>10:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s trivial if you see some inputs spent in the utxo set
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015460' id='439056'>
<a class='timestamp' href='#439056'><time timestamp='2015-11-20T10:31:00Z'>10:31</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: i think it should return 0 in that case (GetDepthInMainChainINTERNAL will result in 0), but will check
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015520' id='439057'>
<a class='timestamp' href='#439057'><time timestamp='2015-11-20T10:32:00Z'>10:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I am saying there should be a Conflicted check that doesn&#x27;t touch the viewcache, but checks the utxo set directly and is cached and keyed by blockindex.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015520' id='439058'>
<a class='timestamp' href='#439058'><time timestamp='2015-11-20T10:32:00Z'>10:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: ok, i agree there
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015520' id='439059'>
<a class='timestamp' href='#439059'><time timestamp='2015-11-20T10:32:00Z'>10:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If a transaction is unconfirmed and unconflicted (by the above), we could also check if the transaction is in the mempool, which is cheap.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015520' id='439060'>
<a class='timestamp' href='#439060'><time timestamp='2015-11-20T10:32:00Z'>10:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
What I suggest wouldn&#x27;t distinguish an in-mempool conflict with too-low-fee, but I think thats no big loss.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015580' id='439061'>
<a class='timestamp' href='#439061'><time timestamp='2015-11-20T10:33:00Z'>10:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: minimal viable solution firstz place
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015580' id='439062'>
<a class='timestamp' href='#439062'><time timestamp='2015-11-20T10:33:00Z'>10:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
grrr
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015580' id='439063'>
<a class='timestamp' href='#439063'><time timestamp='2015-11-20T10:33:00Z'>10:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
minimal viable solution first
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015580' id='439064'>
<a class='timestamp' href='#439064'><time timestamp='2015-11-20T10:33:00Z'>10:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
ya ya. mostly its an observation that the direct test doesn&#x27;t preclude also having a reasonable cheap mempoolness check.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015640' id='439065'>
<a class='timestamp' href='#439065'><time timestamp='2015-11-20T10:34:00Z'>10:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what difference does in-mempoolness make? how do we report the result?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015700' id='439066'>
<a class='timestamp' href='#439066'><time timestamp='2015-11-20T10:35:00Z'>10:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: listtransactions output,  tells you if your unconfirmed tx is probably screwed. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015760' id='439067'>
<a class='timestamp' href='#439067'><time timestamp='2015-11-20T10:36:00Z'>10:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: all i was saying is that jonas&#x27; conflict check shouldn&#x27;t (only) look at the mempool but at the utxo set
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015820' id='439068'>
<a class='timestamp' href='#439068'><time timestamp='2015-11-20T10:37:00Z'>10:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in fact, i don&#x27;t know if having a conflict in the mempool should matter at all for respendability... just because you accepted a different conflicting mempool tz does not mean the network will (though very likely...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015880' id='439069'>
<a class='timestamp' href='#439069'><time timestamp='2015-11-20T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, I agree, -1 should mean blockchain conflict.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015880' id='439070'>
<a class='timestamp' href='#439070'><time timestamp='2015-11-20T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
But if it does; it&#x27;s useful to know that the transaction isn&#x27;t in the mempool. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015880' id='439071'>
<a class='timestamp' href='#439071'><time timestamp='2015-11-20T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015880' id='439072'>
<a class='timestamp' href='#439072'><time timestamp='2015-11-20T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Ideally we&#x27;d give the depth of the earliest conflict, but sadly thats stupidly expensive to do. :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015940' id='439073'>
<a class='timestamp' href='#439073'><time timestamp='2015-11-20T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
at least with how things are structured now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015940' id='439074'>
<a class='timestamp' href='#439074'><time timestamp='2015-11-20T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not when there are other txouts of the txid still in the utxo set
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015940' id='439075'>
<a class='timestamp' href='#439075'><time timestamp='2015-11-20T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, sure but thats not reliable.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015940' id='439076'>
<a class='timestamp' href='#439076'><time timestamp='2015-11-20T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015940' id='439077'>
<a class='timestamp' href='#439077'><time timestamp='2015-11-20T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
txindex? :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448015940' id='439078'>
<a class='timestamp' href='#439078'><time timestamp='2015-11-20T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we could do it so long as we captured it as it flew by and recorded it in the wallet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016000' id='439079'>
<a class='timestamp' href='#439079'><time timestamp='2015-11-20T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CodeShark: die!
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016000' id='439080'>
<a class='timestamp' href='#439080'><time timestamp='2015-11-20T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016000' id='439081'>
<a class='timestamp' href='#439081'><time timestamp='2015-11-20T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CodeShark: it&#x27;s german for &quot;the&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016060' id='439082'>
<a class='timestamp' href='#439082'><time timestamp='2015-11-20T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
feminine nominative/accusative
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016060' id='439083'>
<a class='timestamp' href='#439083'><time timestamp='2015-11-20T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
correct!
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016060' id='439084'>
<a class='timestamp' href='#439084'><time timestamp='2015-11-20T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
<a href="http://flyingscotsman.tumblr.com/post/3486957620/laywer-well-what-about-that-tattoo-on-your" class="link" target="_blank">http://flyingscotsman.tumblr.com/post/3486957620/laywer-well-what-about-that-tattoo-on-your</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016060' id='439085'>
<a class='timestamp' href='#439085'><time timestamp='2015-11-20T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
Ich weiss etwas Deutch Grammatik :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016120' id='439086'>
<a class='timestamp' href='#439086'><time timestamp='2015-11-20T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
*Deutsch
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016120' id='439087'>
<a class='timestamp' href='#439087'><time timestamp='2015-11-20T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
not dutch :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016120' id='439088'>
<a class='timestamp' href='#439088'><time timestamp='2015-11-20T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
although dutch grammar is simpler
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016120' id='439089'>
<a class='timestamp' href='#439089'><time timestamp='2015-11-20T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
but offtopic
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016180' id='439090'>
<a class='timestamp' href='#439090'><time timestamp='2015-11-20T10:43:00Z'>10:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case, the conflict depth is pretty much only interesting for small values  e.g. it would be superior to not release conflicted txins for general respond until -3 (or -6) ... but no one cares about -500 vs -600
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016180' id='439091'>
<a class='timestamp' href='#439091'><time timestamp='2015-11-20T10:43:00Z'>10:43</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
Bart is a girl? :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016300' id='439092'>
<a class='timestamp' href='#439092'><time timestamp='2015-11-20T10:45:00Z'>10:45</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
gmaxwell:  you mean only flush txs from mempool once they&#x27;re sufficiently buried?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016300' id='439093'>
<a class='timestamp' href='#439093'><time timestamp='2015-11-20T10:45:00Z'>10:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CodeShark: we&#x27;re talking about the wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016360' id='439094'>
<a class='timestamp' href='#439094'><time timestamp='2015-11-20T10:46:00Z'>10:46</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
right - so the wallet needs its own mempool :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016360' id='439095'>
<a class='timestamp' href='#439095'><time timestamp='2015-11-20T10:46:00Z'>10:46</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I remember this topic a couple years ago
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016360' id='439096'>
<a class='timestamp' href='#439096'><time timestamp='2015-11-20T10:46:00Z'>10:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it&#x27;s not really a mempool thing at all.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016360' id='439097'>
<a class='timestamp' href='#439097'><time timestamp='2015-11-20T10:46:00Z'>10:46</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
well, it needs to keep track of its own transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016360' id='439098'>
<a class='timestamp' href='#439098'><time timestamp='2015-11-20T10:46:00Z'>10:46</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and dependencies
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016420' id='439099'>
<a class='timestamp' href='#439099'><time timestamp='2015-11-20T10:47:00Z'>10:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Right now the wallet will allow another transaction to reuse the non-conflicted txins from a conflicted transaction. This avoids the case when some malleated change vanishes on you, and a tx which has now been conflicted on account of it spent other coins as well, and now those coins are in limbo.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016420' id='439100'>
<a class='timestamp' href='#439100'><time timestamp='2015-11-20T10:47:00Z'>10:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: it&#x27;s really quite complicated... the question for each input is whether the corresponding is available or would become available.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016480' id='439101'>
<a class='timestamp' href='#439101'><time timestamp='2015-11-20T10:48:00Z'>10:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
. which means looking at the wallet, the mempool, and the utxo set
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016480' id='439102'>
<a class='timestamp' href='#439102'><time timestamp='2015-11-20T10:48:00Z'>10:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Thats fine and all, but -1 depth is not a guarentee that the conflict will stick, there might be a reorg that unconflicts it.. so it would probably be better to not free up the inputs quite so fast.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016540' id='439103'>
<a class='timestamp' href='#439103'><time timestamp='2015-11-20T10:49:00Z'>10:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
perhaps a cheaper approximation, is to record the height that it first hit -1 (side effect of the cache, in fact); and then make it available for respend N blocks later.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016600' id='439104'>
<a class='timestamp' href='#439104'><time timestamp='2015-11-20T10:50:00Z'>10:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how do you define &quot;hit -1&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016600' id='439105'>
<a class='timestamp' href='#439105'><time timestamp='2015-11-20T10:50:00Z'>10:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
all you can observe reliably is that there is an input missing
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016660' id='439106'>
<a class='timestamp' href='#439106'><time timestamp='2015-11-20T10:51:00Z'>10:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I know, as I said &#x27;approximation&#x27;. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016660' id='439107'>
<a class='timestamp' href='#439107'><time timestamp='2015-11-20T10:51:00Z'>10:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016660' id='439108'>
<a class='timestamp' href='#439108'><time timestamp='2015-11-20T10:51:00Z'>10:51</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
2 + 2 approximates 5 for sufficiently large values of 2
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016720' id='439109'>
<a class='timestamp' href='#439109'><time timestamp='2015-11-20T10:52:00Z'>10:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but that check does not output a height
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016720' id='439110'>
<a class='timestamp' href='#439110'><time timestamp='2015-11-20T10:52:00Z'>10:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and it depends on the mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016720' id='439111'>
<a class='timestamp' href='#439111'><time timestamp='2015-11-20T10:52:00Z'>10:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
why does it depend on the mempool? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016720' id='439112'>
<a class='timestamp' href='#439112'><time timestamp='2015-11-20T10:52:00Z'>10:52</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
dependencies
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016780' id='439113'>
<a class='timestamp' href='#439113'><time timestamp='2015-11-20T10:53:00Z'>10:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
because unconfirmed inputs won&#x27;t be in the utxo set
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016780' id='439114'>
<a class='timestamp' href='#439114'><time timestamp='2015-11-20T10:53:00Z'>10:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
They&#x27;ll be in the wallet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016780' id='439115'>
<a class='timestamp' href='#439115'><time timestamp='2015-11-20T10:53:00Z'>10:53</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
no
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016780' id='439116'>
<a class='timestamp' href='#439116'><time timestamp='2015-11-20T10:53:00Z'>10:53</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
not necessarily
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016780' id='439117'>
<a class='timestamp' href='#439117'><time timestamp='2015-11-20T10:53:00Z'>10:53</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
they don&#x27;t necessarily belong to the wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016780' id='439118'>
<a class='timestamp' href='#439118'><time timestamp='2015-11-20T10:53:00Z'>10:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not for things that pay you
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016780' id='439119'>
<a class='timestamp' href='#439119'><time timestamp='2015-11-20T10:53:00Z'>10:53</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
someone could construct a chain of unconfirmed transactions, only the last one pays you
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016840' id='439120'>
<a class='timestamp' href='#439120'><time timestamp='2015-11-20T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh right, also recieved transactions can be conflicted. It&#x27;s true.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016840' id='439121'>
<a class='timestamp' href='#439121'><time timestamp='2015-11-20T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
for intelligent conflict detection, the wallet must be alerted when any dependency is conflicted
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016840' id='439122'>
<a class='timestamp' href='#439122'><time timestamp='2015-11-20T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sorry, had slipped into thinking only in terms of sent because I was thinking about the free to reuse question.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016840' id='439123'>
<a class='timestamp' href='#439123'><time timestamp='2015-11-20T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
received transactions matter even more, because they&#x27;re the only ones that give spendable outputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016840' id='439124'>
<a class='timestamp' href='#439124'><time timestamp='2015-11-20T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: 0_o. change.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016900' id='439125'>
<a class='timestamp' href='#439125'><time timestamp='2015-11-20T10:55:00Z'>10:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, right
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016900' id='439126'>
<a class='timestamp' href='#439126'><time timestamp='2015-11-20T10:55:00Z'>10:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(googlyeyes simply because basically all conflict originated problems are related to change; since change is the only thing we&#x27;ll spend with few/no confirms!)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016900' id='439127'>
<a class='timestamp' href='#439127'><time timestamp='2015-11-20T10:55:00Z'>10:55</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
gmaxwell: just send all your change to sipa and that problem goes away
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016960' id='439128'>
<a class='timestamp' href='#439128'><time timestamp='2015-11-20T10:56:00Z'>10:56</time></a>
&lt;<span class='nick nick-4'> * sipa</span>&gt;
approves
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016960' id='439129'>
<a class='timestamp' href='#439129'><time timestamp='2015-11-20T10:56:00Z'>10:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
new wallet feature: eliminates all malleability problems by sending your coins to sipa.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448016960' id='439130'>
<a class='timestamp' href='#439130'><time timestamp='2015-11-20T10:56:00Z'>10:56</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
:D
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017020' id='439131'>
<a class='timestamp' href='#439131'><time timestamp='2015-11-20T10:57:00Z'>10:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: now.i wonder what googly eyes are...
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017020' id='439132'>
<a class='timestamp' href='#439132'><time timestamp='2015-11-20T10:57:00Z'>10:57</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
sipa: &quot;0_o&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017200' id='439133'>
<a class='timestamp' href='#439133'><time timestamp='2015-11-20T11:00:00Z'>11:00</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
basically, there currently is no safe way to spend an unconfirmed output ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017200' id='439134'>
<a class='timestamp' href='#439134'><time timestamp='2015-11-20T11:00:00Z'>11:00</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
even your own
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017260' id='439135'>
<a class='timestamp' href='#439135'><time timestamp='2015-11-20T11:01:00Z'>11:01</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
for some malleability attacks about the best you can do is sign all likely cases
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017320' id='439136'>
<a class='timestamp' href='#439136'><time timestamp='2015-11-20T11:02:00Z'>11:02</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and have the txs ready to broadcast
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017380' id='439137'>
<a class='timestamp' href='#439137'><time timestamp='2015-11-20T11:03:00Z'>11:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there&#x27;s an option in bitcoin core&#x27;s wallet to not spend any unconfirmed outputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017440' id='439138'>
<a class='timestamp' href='#439138'><time timestamp='2015-11-20T11:04:00Z'>11:04</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
but then your funds potentially get tied up for a while
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017440' id='439139'>
<a class='timestamp' href='#439139'><time timestamp='2015-11-20T11:04:00Z'>11:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it is only not the default because that was deemed too big a change from previous behavior
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017440' id='439140'>
<a class='timestamp' href='#439140'><time timestamp='2015-11-20T11:04:00Z'>11:04</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and it&#x27;s also impractical in many scenarios
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017500' id='439141'>
<a class='timestamp' href='#439141'><time timestamp='2015-11-20T11:05:00Z'>11:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
CodeShark: well it&#x27;ll be pratically pretty safe soon.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017500' id='439142'>
<a class='timestamp' href='#439142'><time timestamp='2015-11-20T11:05:00Z'>11:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: the wallet does get informed about all blockchain transactions, so i think we can just use that to detect conflicts
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017500' id='439143'>
<a class='timestamp' href='#439143'><time timestamp='2015-11-20T11:05:00Z'>11:05</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
yes, indeed - I&#x27;m very happy about that, gmaxwell 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017500' id='439144'>
<a class='timestamp' href='#439144'><time timestamp='2015-11-20T11:05:00Z'>11:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The don&#x27;t spend unconfirmed change thing is pretty obnoxious unless you understand bitcoins operation very well and intentionally create extra outputs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017500' id='439145'>
<a class='timestamp' href='#439145'><time timestamp='2015-11-20T11:05:00Z'>11:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
anything involving zero confirmation is risky
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017560' id='439146'>
<a class='timestamp' href='#439146'><time timestamp='2015-11-20T11:06:00Z'>11:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we should be creating extra outputs anyway for amount privacy
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017560' id='439147'>
<a class='timestamp' href='#439147'><time timestamp='2015-11-20T11:06:00Z'>11:06</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
about the best way to mitigate having funds tied up for a while is to create denominated outputs up front
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017560' id='439148'>
<a class='timestamp' href='#439148'><time timestamp='2015-11-20T11:06:00Z'>11:06</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
which is ugly in terms of block chain bloat
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017560' id='439149'>
<a class='timestamp' href='#439149'><time timestamp='2015-11-20T11:06:00Z'>11:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
absolutely, better output management could avoid having <b>*all*</b> your funds tied up
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017560' id='439150'>
<a class='timestamp' href='#439150'><time timestamp='2015-11-20T11:06:00Z'>11:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
e.g. by having multiple change outputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017560' id='439151'>
<a class='timestamp' href='#439151'><time timestamp='2015-11-20T11:06:00Z'>11:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
During the last malleability attacks I walked a bitcoin ATM operator through doing that. Hard part was explaining the need, once they got it the actual implementation was easy. (well also the wallet they were using to fill their ATMs ..... had no sendmany support. :( )
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017620' id='439152'>
<a class='timestamp' href='#439152'><time timestamp='2015-11-20T11:07:00Z'>11:07</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
BIP68 bip text has been updated <a href="https://github.com/bitcoin/bips/issues/245" class="link" target="_blank">https://github.com/bitcoin/bips/issues/245</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017620' id='439153'>
<a class='timestamp' href='#439153'><time timestamp='2015-11-20T11:07:00Z'>11:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: yea, did I ever tell you my thought?  if the change would be &#x27;large&#x27;  flip a coin and either split the change 50/50, or make one change equal to the payment and the other the remainder.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017680' id='439154'>
<a class='timestamp' href='#439154'><time timestamp='2015-11-20T11:08:00Z'>11:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: yup, that&#x27;d be useful
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017680' id='439155'>
<a class='timestamp' href='#439155'><time timestamp='2015-11-20T11:08:00Z'>11:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: except when the payment is a nice round number
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017680' id='439156'>
<a class='timestamp' href='#439156'><time timestamp='2015-11-20T11:08:00Z'>11:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: then you probably always want to make the change identical to it (or a round fraction/muktiple)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017740' id='439157'>
<a class='timestamp' href='#439157'><time timestamp='2015-11-20T11:09:00Z'>11:09</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
denominating outputs in powers of 2 and limiting precision can help
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017740' id='439158'>
<a class='timestamp' href='#439158'><time timestamp='2015-11-20T11:09:00Z'>11:09</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
sometimes having the extra precision means adding dust outputs :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017740' id='439159'>
<a class='timestamp' href='#439159'><time timestamp='2015-11-20T11:09:00Z'>11:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: well the decision could be biased, but the basic idea is reasonable.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448017740' id='439160'>
<a class='timestamp' href='#439160'><time timestamp='2015-11-20T11:09:00Z'>11:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1448018340' id='439161'>
<a class='timestamp' href='#439161'><time timestamp='2015-11-20T11:19:00Z'>11:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: if conflicting wallet transactions with change 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448018340' id='439162'>
<a class='timestamp' href='#439162'><time timestamp='2015-11-20T11:19:00Z'>11:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
can be accepted without conflicting
<br>
</div>

<div class='talk op-msg' data-timestamp='1448018340' id='439163'>
<a class='timestamp' href='#439163'><time timestamp='2015-11-20T11:19:00Z'>11:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
then inthink our balance calc will be off
<br>
</div>

<div class='talk op-msg' data-timestamp='1448018640' id='439164'>
<a class='timestamp' href='#439164'><time timestamp='2015-11-20T11:24:00Z'>11:24</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
a scheme that avoids the need for change outputs without bloating the blockchain would fix a bunch of problems
<br>
</div>

<div class='talk op-msg' data-timestamp='1448018640' id='439165'>
<a class='timestamp' href='#439165'><time timestamp='2015-11-20T11:24:00Z'>11:24</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I&#x27;ve also had issues with asynchronous signing
<br>
</div>

<div class='talk op-msg' data-timestamp='1448018700' id='439166'>
<a class='timestamp' href='#439166'><time timestamp='2015-11-20T11:25:00Z'>11:25</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
perhaps some transaction is rejected by the authorization layer and never gets signed...which ties up the outputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1448018760' id='439167'>
<a class='timestamp' href='#439167'><time timestamp='2015-11-20T11:26:00Z'>11:26</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
which means it ties up any attempts to sign dependencies
<br>
</div>

<div class='talk op-msg' data-timestamp='1448018760' id='439168'>
<a class='timestamp' href='#439168'><time timestamp='2015-11-20T11:26:00Z'>11:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh! we should only count unconfirmed transactions (from ourselves) if they are in the mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1448018760' id='439169'>
<a class='timestamp' href='#439169'><time timestamp='2015-11-20T11:26:00Z'>11:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sounds sensible sipa
<br>
</div>

<div class='talk op-msg' data-timestamp='1448018760' id='439170'>
<a class='timestamp' href='#439170'><time timestamp='2015-11-20T11:26:00Z'>11:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but only mark them conflicted/respendable when they have a conflict in the chain
<br>
</div>

<div class='talk op-msg' data-timestamp='1448018760' id='439171'>
<a class='timestamp' href='#439171'><time timestamp='2015-11-20T11:26:00Z'>11:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019180' id='439172'>
<a class='timestamp' href='#439172'><time timestamp='2015-11-20T11:33:00Z'>11:33</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
more sensible than what we currently do...but still has issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019180' id='439173'>
<a class='timestamp' href='#439173'><time timestamp='2015-11-20T11:33:00Z'>11:33</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I guess the UI could indicate that certain transactions have failed
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019240' id='439174'>
<a class='timestamp' href='#439174'><time timestamp='2015-11-20T11:34:00Z'>11:34</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and prompt the user to resend
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019240' id='439175'>
<a class='timestamp' href='#439175'><time timestamp='2015-11-20T11:34:00Z'>11:34</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
or automatically resign and resend if the keys are unencrypted
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019300' id='439176'>
<a class='timestamp' href='#439176'><time timestamp='2015-11-20T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
although that might open up security holes
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019360' id='439177'>
<a class='timestamp' href='#439177'><time timestamp='2015-11-20T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CodeShark: the plan was to have a function to mark a tx as failed
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019360' id='439178'>
<a class='timestamp' href='#439178'><time timestamp='2015-11-20T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
manually
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019360' id='439179'>
<a class='timestamp' href='#439179'><time timestamp='2015-11-20T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
well, other than the usability complications, it technically is consistent behavior
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019480' id='439180'>
<a class='timestamp' href='#439180'><time timestamp='2015-11-20T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and arguably less problematic than having a zero fee transaction in limbo for a long time :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019480' id='439181'>
<a class='timestamp' href='#439181'><time timestamp='2015-11-20T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
is there an opportunity in all this for a user to &quot;remove&quot; a transaction, make an alternative with different outputs, and both confirm? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019540' id='439182'>
<a class='timestamp' href='#439182'><time timestamp='2015-11-20T11:39:00Z'>11:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;m really not keen on requiring the manual intervention, I can see this resulting in lost funds.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019600' id='439183'>
<a class='timestamp' href='#439183'><time timestamp='2015-11-20T11:40:00Z'>11:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Consider an automated user, ends up with some conflicted transactions.  Further spending gets rejected with insufficient funds, they think they&#x27;re out of bitcoins and delete the wallet-- but they could have had a large amount remaining.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019660' id='439184'>
<a class='timestamp' href='#439184'><time timestamp='2015-11-20T11:41:00Z'>11:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
tulip: you mean spending different outputs (different inputs)? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019660' id='439185'>
<a class='timestamp' href='#439185'><time timestamp='2015-11-20T11:41:00Z'>11:41</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
yes. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019720' id='439186'>
<a class='timestamp' href='#439186'><time timestamp='2015-11-20T11:42:00Z'>11:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
That generally exists, even now. Though they don&#x27;t have a remove button which they might misunderstand to abort the transaction.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019780' id='439187'>
<a class='timestamp' href='#439187'><time timestamp='2015-11-20T11:43:00Z'>11:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We can harden against that in the GUI by making the wallet warn you when you paid and address you&#x27;ve paid before. (something suggested before, because it can also avoid copied-the-wrong-line and double paid problems)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019900' id='439188'>
<a class='timestamp' href='#439188'><time timestamp='2015-11-20T11:45:00Z'>11:45</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I&#x27;ve had to directly deal with this issue in production before...and had to enable deleting transactions that have already propagated...and yes, it&#x27;s a mess to keep track of stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019960' id='439189'>
<a class='timestamp' href='#439189'><time timestamp='2015-11-20T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well we have zapwallettx to knock out any conflicted/unconfirmeds from the wallet,  tech support via napalm.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019960' id='439190'>
<a class='timestamp' href='#439190'><time timestamp='2015-11-20T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1448019960' id='439191'>
<a class='timestamp' href='#439191'><time timestamp='2015-11-20T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
napalm is cool, when frozen
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020020' id='439192'>
<a class='timestamp' href='#439192'><time timestamp='2015-11-20T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
^ man, I want a bot that produces comments like that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020080' id='439193'>
<a class='timestamp' href='#439193'><time timestamp='2015-11-20T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
gmaxwell: I went ahead and added an API call to delete transactions - initially it would only allow deleting transactions that have not yet propagated (i.e. missing signatures)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020080' id='439194'>
<a class='timestamp' href='#439194'><time timestamp='2015-11-20T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in any case a dialog that says &quot;You&#x27;ve paid X before, are you sure?&quot; then shows the most recent payments to X. would likely help a lot there for gui users.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020080' id='439195'>
<a class='timestamp' href='#439195'><time timestamp='2015-11-20T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
but I had to eventually allow deleting even propagated transactions for malleability attacks and transactions that just won&#x27;t confirm (low fees)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020140' id='439196'>
<a class='timestamp' href='#439196'><time timestamp='2015-11-20T11:49:00Z'>11:49</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and for any sort of high volume operation it&#x27;s a nightmare
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020140' id='439197'>
<a class='timestamp' href='#439197'><time timestamp='2015-11-20T11:49:00Z'>11:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
CodeShark: have you yet had someone have something deleted make it through and be surprised?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020200' id='439198'>
<a class='timestamp' href='#439198'><time timestamp='2015-11-20T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
fortunately no terrible losses have occured...but it has required extra careful manual intervention
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020320' id='439199'>
<a class='timestamp' href='#439199'><time timestamp='2015-11-20T11:52:00Z'>11:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I once found a mtgox transaction that was created almost a year before but managed to never make it into the chain (maybe wasn&#x27;t relayed well), and was still valid.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020320' id='439200'>
<a class='timestamp' href='#439200'><time timestamp='2015-11-20T11:52:00Z'>11:52</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
and ultimately, being extra careful also means creating a bottleneck and greatly reducing transaction processing volume (or grinding to a halt)...which some consider bad for business
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020440' id='439201'>
<a class='timestamp' href='#439201'><time timestamp='2015-11-20T11:54:00Z'>11:54</time></a>
&lt;<span class='nick nick-3'> GitHub86</span>&gt;
[bitcoin] paveljanik opened pull request #7066: [Trivial,Doc] Add missing &quot;blocktime&quot; description to listtransactions help, fix formatting. (master...listtransactions_blocktime) <a href="https://github.com/bitcoin/bitcoin/pull/7066" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7066</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020440' id='439202'>
<a class='timestamp' href='#439202'><time timestamp='2015-11-20T11:54:00Z'>11:54</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
gmaxwell: where did you find it? :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020500' id='439203'>
<a class='timestamp' href='#439203'><time timestamp='2015-11-20T11:55:00Z'>11:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
For people I&#x27;ve helped with this, they did batch correction, where basically they shut down operations temporarily, waited for all outstanding to confirm, extracted all the transactions, checked all the conflicted outputs against the blockchain to figure out who hadn&#x27;t been paid yet. zapped the wallet. Redid the missing payments with a transaction that spend all their coins.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1448020560' id='439204'>
<a class='timestamp' href='#439204'><time timestamp='2015-11-20T11:56:00Z'>11:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(and also split up their wallet into new outputs, so they could reasonably run with spending unconfirmed change off)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021160' id='439205'>
<a class='timestamp' href='#439205'><time timestamp='2015-11-20T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
huh, what are the chances of an ancient mtgox transaction still being valid? i mean, that would require a lot of utxos..
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021220' id='439206'>
<a class='timestamp' href='#439206'><time timestamp='2015-11-20T12:07:00Z'>12:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
mtgox intentional split their wallet into tiny utxo.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021280' id='439207'>
<a class='timestamp' href='#439207'><time timestamp='2015-11-20T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
My memory is a bit fuzzy, I think what the sequence of events was is that when mtgox was imploding I was trying to determine all the addresses that were theirs. And someone had been logging their api output that listed all their transactions.. and I was going through all that to find every address they every claimed to sign for.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021340' id='439208'>
<a class='timestamp' href='#439208'><time timestamp='2015-11-20T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
And noticed that one of the old ones had an unspent input.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021340' id='439209'>
<a class='timestamp' href='#439209'><time timestamp='2015-11-20T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
smaller than dust?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021400' id='439210'>
<a class='timestamp' href='#439210'><time timestamp='2015-11-20T12:10:00Z'>12:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
no, not that small. The code that did that is public in that leaked php I think.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021400' id='439211'>
<a class='timestamp' href='#439211'><time timestamp='2015-11-20T12:10:00Z'>12:10</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
the repo with all of the logged transactions is on github, somewhere. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021460' id='439212'>
<a class='timestamp' href='#439212'><time timestamp='2015-11-20T12:11:00Z'>12:11</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
tulip: ah didn&#x27;t know, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021460' id='439213'>
<a class='timestamp' href='#439213'><time timestamp='2015-11-20T12:11:00Z'>12:11</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
v. nice to have this historical data
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021520' id='439214'>
<a class='timestamp' href='#439214'><time timestamp='2015-11-20T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think the algorithim was something like if a txout is &gt;threshold (10btc?) split, with a ration that is some exponential distribution, with 50/50 the most common, or something like that. (could be my imagination)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021580' id='439215'>
<a class='timestamp' href='#439215'><time timestamp='2015-11-20T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
s/ration/ratio/
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021580' id='439216'>
<a class='timestamp' href='#439216'><time timestamp='2015-11-20T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
<a href="https://gist.github.com/alainmeier/9319451#file-mtgox-php-L120-L151" class="link" target="_blank">https://gist.github.com/alainmeier/9319451#file-mtgox-php-L120-L151</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448021760' id='439217'>
<a class='timestamp' href='#439217'><time timestamp='2015-11-20T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
tulip: don&#x27;t suppose you&#x27;d be willing to dig that github repo up would you?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448022120' id='439218'>
<a class='timestamp' href='#439218'><time timestamp='2015-11-20T12:22:00Z'>12:22</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
gmaxwell: corruption again on the ppc system. I&#x27;m doing a reindex..
<br>
</div>

<div class='talk op-msg' data-timestamp='1448022180' id='439219'>
<a class='timestamp' href='#439219'><time timestamp='2015-11-20T12:23:00Z'>12:23</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
kanzure: midnightmagic: <a href="https://github.com/mtgoxtxfeed/json" class="link" target="_blank">https://github.com/mtgoxtxfeed/json</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448022180' id='439220'>
<a class='timestamp' href='#439220'><time timestamp='2015-11-20T12:23:00Z'>12:23</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
tulip: thank you
<br>
</div>

<div class='talk op-msg' data-timestamp='1448022420' id='439221'>
<a class='timestamp' href='#439221'><time timestamp='2015-11-20T12:27:00Z'>12:27</time></a>
&lt;<span class='nick nick-2'> GitHub15</span>&gt;
[bitcoin] jonasschnelli opened pull request #7067: [Wallet] improve detection of conflicted transactions (master...2015/11/mempool_wallet) <a href="https://github.com/bitcoin/bitcoin/pull/7067" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7067</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448022480' id='439222'>
<a class='timestamp' href='#439222'><time timestamp='2015-11-20T12:28:00Z'>12:28</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
gmaxwell: progress projects a 6-9 day reindex. do you want me to just let you know when it gets to head, or is that fact it&#x27;s churning right now good enough for you? commitid: a1bfca80521ee99d70bc19a797484275d84e136f
<br>
</div>

<div class='talk op-msg' data-timestamp='1448022660' id='439223'>
<a class='timestamp' href='#439223'><time timestamp='2015-11-20T12:31:00Z'>12:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
midnightmagic: that its churning is good information!
<br>
</div>

<div class='talk op-msg' data-timestamp='1448022720' id='439224'>
<a class='timestamp' href='#439224'><time timestamp='2015-11-20T12:32:00Z'>12:32</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
gmaxwell: okie doke.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448024700' id='439225'>
<a class='timestamp' href='#439225'><time timestamp='2015-11-20T13:05:00Z'>13:05</time></a>
&lt;<span class='nick nick-16'> GitHub146</span>&gt;
[bitcoin] jonasschnelli opened pull request #7068: [RPC-Tests] add simple way to run rpc test over QT clients (master...2015/11/rpc_tests_qt) <a href="https://github.com/bitcoin/bitcoin/pull/7068" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7068</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448024940' id='439226'>
<a class='timestamp' href='#439226'><time timestamp='2015-11-20T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
[OT] Sad news, ITU announces that they&#x27;ve decided to not stop creating leapseconds for now, and spend 8 more years researching the impact.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448026020' id='439227'>
<a class='timestamp' href='#439227'><time timestamp='2015-11-20T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-13'> GitHub117</span>&gt;
[bitcoin] MarcoFalke opened pull request #7069: [trivial] Fix -maxmempool InitError (master...MarcoFalke-2015-maxmempoolInitError) <a href="https://github.com/bitcoin/bitcoin/pull/7069" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7069</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448026440' id='439228'>
<a class='timestamp' href='#439228'><time timestamp='2015-11-20T13:34:00Z'>13:34</time></a>
&lt;<span class='nick nick-12'> GitHub192</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/07b770caf3f5...776848acefa8" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/07b770caf3f5...776848acefa8</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448026440' id='439229'>
<a class='timestamp' href='#439229'><time timestamp='2015-11-20T13:34:00Z'>13:34</time></a>
&lt;<span class='nick nick-12'> GitHub192</span>&gt;
bitcoin/master c197798 Jonas Schnelli: [Qt] simple mempool info in debug window
<br>
</div>

<div class='talk op-msg' data-timestamp='1448026440' id='439230'>
<a class='timestamp' href='#439230'><time timestamp='2015-11-20T13:34:00Z'>13:34</time></a>
&lt;<span class='nick nick-12'> GitHub192</span>&gt;
bitcoin/master 776848a Wladimir J. van der Laan: Merge pull request #6979...
<br>
</div>

<div class='talk op-msg' data-timestamp='1448026440' id='439231'>
<a class='timestamp' href='#439231'><time timestamp='2015-11-20T13:34:00Z'>13:34</time></a>
&lt;<span class='nick nick-2'> GitHub105</span>&gt;
[bitcoin] laanwj closed pull request #6979: [Qt] simple mempool info in debug window (master...2015/11/qt_mempool_easyinfo) <a href="https://github.com/bitcoin/bitcoin/pull/6979" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6979</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448030160' id='439232'>
<a class='timestamp' href='#439232'><time timestamp='2015-11-20T14:36:00Z'>14:36</time></a>
&lt;<span class='nick nick-1'> jtimon_</span>&gt;
morcos: ping <a href="https://github.com/jtimon/bitcoin/commit/6963b9ccb2c889564a2e0239aa73f03f6d406784" class="link" target="_blank">https://github.com/jtimon/bitcoin/commit/6963b9ccb2c889564a2e0239aa73f03f6d406784</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448030820' id='439233'>
<a class='timestamp' href='#439233'><time timestamp='2015-11-20T14:47:00Z'>14:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
jtimon: i saw that.  i like the idea, but not exactly that.  I think it is usefull for TrimToSize still take an argument, and TrimToSize should then set the internal attribute of the mempool letting it know what size it has been set to.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448030880' id='439234'>
<a class='timestamp' href='#439234'><time timestamp='2015-11-20T14:48:00Z'>14:48</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
That way the policy logic on what size the mempool should be trimmed to is outside the mempool.  GetMinFee could access that internal attribute in the same way you have it
<br>
</div>

<div class='talk op-msg' data-timestamp='1448030940' id='439235'>
<a class='timestamp' href='#439235'><time timestamp='2015-11-20T14:49:00Z'>14:49</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I don&#x27;t love calling that from txmempool.cpp, since I&#x27;d like that pass through function to go away, and the policy estimator to be called directly from the wallet I htink?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448030940' id='439236'>
<a class='timestamp' href='#439236'><time timestamp='2015-11-20T14:49:00Z'>14:49</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
My concern about that is someone needs to know to ask the mempool for its min fee if you want to estimate fees?  Where should that logic live.  IN my opinion not in the mempool.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1448031000' id='439237'>
<a class='timestamp' href='#439237'><time timestamp='2015-11-20T14:50:00Z'>14:50</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
So it doesn&#x27;t seem unreasonable to me that the policyestimator is going to need to ask the mempool questions.  what questions it needs to ask and what it does with them, seem logic that could live in the estimator itself.  and therefore you have to pass in a pool, but i don&#x27;t know... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448031180' id='439238'>
<a class='timestamp' href='#439238'><time timestamp='2015-11-20T14:53:00Z'>14:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
In any case, I&#x27;m out of town for the next week+ so I&#x27;m not really going to have much time to modify it myself.  However if we end up with some changes that we think are good, I&#x27;m happy for you or sdaftuar to incorporate them
<br>
</div>

<div class='talk op-msg' data-timestamp='1448035080' id='439239'>
<a class='timestamp' href='#439239'><time timestamp='2015-11-20T15:58:00Z'>15:58</time></a>
&lt;<span class='nick nick-9'> GitHub11</span>&gt;
[bitcoin] MarcoFalke opened pull request #7070: Move hardcoded maxFeeRate out of mempool (master...MarcoFalke-2015-feeRateRefactor) <a href="https://github.com/bitcoin/bitcoin/pull/7070" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7070</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448044740' id='439240'>
<a class='timestamp' href='#439240'><time timestamp='2015-11-20T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
jgarzik, in CDB::Close activeTxn is closed if it&#x27;s open, this is legacy code from satoshi, but your&#x27;e the last to have touched it
<br>
</div>

<div class='talk op-msg' data-timestamp='1448044740' id='439241'>
<a class='timestamp' href='#439241'><time timestamp='2015-11-20T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
any idea why that&#x27;s there?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448047200' id='439242'>
<a class='timestamp' href='#439242'><time timestamp='2015-11-20T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
phantomcircuit, speed IIRC.  We fiddled a lot with that during IBD tuning days.  IBD was very sensitive to when things were flushed
<br>
</div>

<div class='talk op-msg' data-timestamp='1448047200' id='439243'>
<a class='timestamp' href='#439243'><time timestamp='2015-11-20T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
phantomcircuit, without special logic at close, shutdown would pause for a long time
<br>
</div>

<div class='talk op-msg' data-timestamp='1448047380' id='439244'>
<a class='timestamp' href='#439244'><time timestamp='2015-11-20T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
jgarzik, i can see that support for nested transactions was dropped but i dont see what this has to do with flush logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1448047440' id='439245'>
<a class='timestamp' href='#439245'><time timestamp='2015-11-20T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
phantomcircuit, state mgmt -- during IBD you held the transaction open because you might get more blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1448053680' id='439246'>
<a class='timestamp' href='#439246'><time timestamp='2015-11-20T21:08:00Z'>21:08</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
jgarzik, hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1448053680' id='439247'>
<a class='timestamp' href='#439247'><time timestamp='2015-11-20T21:08:00Z'>21:08</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
phantomcircuit, since you might be in the middle of IBD during shutdown, you might have a transaction open on purpose
<br>
</div>

<div class='talk op-msg' data-timestamp='1448053740' id='439248'>
<a class='timestamp' href='#439248'><time timestamp='2015-11-20T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
phantomcircuit, keeping the transaction open is poor man&#x27;s write batching in the face of async &quot;block&quot; msgs
<br>
</div>

<div class='talk op-msg' data-timestamp='1448053740' id='439249'>
<a class='timestamp' href='#439249'><time timestamp='2015-11-20T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
jgarzik, the wallet keeps a transaction open?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448053740' id='439250'>
<a class='timestamp' href='#439250'><time timestamp='2015-11-20T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i can see leveldb doing that but why would the wallet need to do that
<br>
</div>

<div class='talk op-msg' data-timestamp='1448053740' id='439251'>
<a class='timestamp' href='#439251'><time timestamp='2015-11-20T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
phantomcircuit, BDB transaction
<br>
</div>

<div class='talk op-msg' data-timestamp='1448053740' id='439252'>
<a class='timestamp' href='#439252'><time timestamp='2015-11-20T21:09:00Z'>21:09</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
ohhh it&#x27;s from when we were using bdb for the chain state
<br>
</div>

<div class='talk op-msg' data-timestamp='1448053800' id='439253'>
<a class='timestamp' href='#439253'><time timestamp='2015-11-20T21:10:00Z'>21:10</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
phantomcircuit, nod -- I&#x27;m talking about logic put in place during the days when we stored chain state in there
<br>
</div>

<div class='talk op-msg' data-timestamp='1448053800' id='439254'>
<a class='timestamp' href='#439254'><time timestamp='2015-11-20T21:10:00Z'>21:10</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
ok so that can be safely changed to be an assert
<br>
</div>

<div class='talk op-msg' data-timestamp='1448053800' id='439255'>
<a class='timestamp' href='#439255'><time timestamp='2015-11-20T21:10:00Z'>21:10</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
phantomcircuit, wallet should never do that
<br>
</div>

<div class='talk op-msg' data-timestamp='1448053800' id='439256'>
<a class='timestamp' href='#439256'><time timestamp='2015-11-20T21:10:00Z'>21:10</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1448053860' id='439257'>
<a class='timestamp' href='#439257'><time timestamp='2015-11-20T21:11:00Z'>21:11</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
jgarzik, great that will make a bunch of stuff much easier for me
<br>
</div>

<div class='talk op-msg' data-timestamp='1448054100' id='439258'>
<a class='timestamp' href='#439258'><time timestamp='2015-11-20T21:15:00Z'>21:15</time></a>
&lt;<span class='nick nick-12'> GitHub82</span>&gt;
[bitcoin] pstratem opened pull request #7071: Wallet: Replace TxnAbort with assert. (master...2015-11-20-wallet-activetxn) <a href="https://github.com/bitcoin/bitcoin/pull/7071" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7071</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448056680' id='439259'>
<a class='timestamp' href='#439259'><time timestamp='2015-11-20T21:58:00Z'>21:58</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
<a href="http://www.darlinghq.org/" class="link" target="_blank">http://www.darlinghq.org/</a> maybe useful for running Mac test suite in Travis?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448060040' id='439260'>
<a class='timestamp' href='#439260'><time timestamp='2015-11-20T22:54:00Z'>22:54</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
WOO 4.9% PROGRESS
<br>
</div>

<div class='talk op-msg' data-timestamp='1448060040' id='439261'>
<a class='timestamp' href='#439261'><time timestamp='2015-11-20T22:54:00Z'>22:54</time></a>
&lt;<span class='nick nick-4'> * midnightmagic</span>&gt;
stabs old crappy ppc
<br>
</div>

<div class='talk op-msg' data-timestamp='1448060040' id='439262'>
<a class='timestamp' href='#439262'><time timestamp='2015-11-20T22:54:00Z'>22:54</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
I wonder if there&#x27;s some assembly we could take advantage of on ppc..
<br>
</div>

<div class='talk op-msg' data-timestamp='1448063280' id='439263'>
<a class='timestamp' href='#439263'><time timestamp='2015-11-20T23:48:00Z'>23:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
anyone else notice the 2015-11-20 23:47:23 Invalid or missing banlist.dat; recreating
<br>
</div>

<div class='talk op-msg' data-timestamp='1448063280' id='439264'>
<a class='timestamp' href='#439264'><time timestamp='2015-11-20T23:48:00Z'>23:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
at every start?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448063280' id='439265'>
<a class='timestamp' href='#439265'><time timestamp='2015-11-20T23:48:00Z'>23:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yup
<br>
</div>

<div class='talk op-msg' data-timestamp='1448063400' id='439266'>
<a class='timestamp' href='#439266'><time timestamp='2015-11-20T23:50:00Z'>23:50</time></a>
&lt;<span class='nick nick-8'> jcorgan</span>&gt;
yes
<br>
</div>

</div>
</section>

</body>
</html>
