<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2021-06-16
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2021-06-16' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:16 UTC</pre>
<pre><a href="/bitcoin-core-dev/2021-05-16">&lt;</a><span class='header'>    June 2021     </span><a href="/bitcoin-core-dev/2021-07-16">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;       <a class="" href="/bitcoin-core-dev/2021-06-01">1</a>  <a class="" href="/bitcoin-core-dev/2021-06-02">2</a>  <a class="" href="/bitcoin-core-dev/2021-06-03">3</a>  <a class="" href="/bitcoin-core-dev/2021-06-04">4</a>  <a class="" href="/bitcoin-core-dev/2021-06-05">5</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2021-06-06">6</a>  <a class="" href="/bitcoin-core-dev/2021-06-07">7</a>  <a class="" href="/bitcoin-core-dev/2021-06-08">8</a>  <a class="" href="/bitcoin-core-dev/2021-06-09">9</a> <a class="" href="/bitcoin-core-dev/2021-06-10">10</a> <a class="" href="/bitcoin-core-dev/2021-06-11">11</a> <a class="" href="/bitcoin-core-dev/2021-06-12">12</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2021-06-13">13</a> <a class="" href="/bitcoin-core-dev/2021-06-14">14</a> <a class="" href="/bitcoin-core-dev/2021-06-15">15</a> <a class="current" href="/bitcoin-core-dev/2021-06-16">16</a> <a class="" href="/bitcoin-core-dev/2021-06-17">17</a> <a class="" href="/bitcoin-core-dev/2021-06-18">18</a> <a class="" href="/bitcoin-core-dev/2021-06-19">19</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2021-06-20">20</a> <a class="" href="/bitcoin-core-dev/2021-06-21">21</a> <a class="" href="/bitcoin-core-dev/2021-06-22">22</a> <a class="" href="/bitcoin-core-dev/2021-06-23">23</a> <a class="" href="/bitcoin-core-dev/2021-06-24">24</a> <a class="" href="/bitcoin-core-dev/2021-06-25">25</a> <a class="" href="/bitcoin-core-dev/2021-06-26">26</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2021-06-27">27</a> <a class="" href="/bitcoin-core-dev/2021-06-28">28</a> <a class="" href="/bitcoin-core-dev/2021-06-29">29</a> <a class="" href="/bitcoin-core-dev/2021-06-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1623814020' id='368706'>
<a class='timestamp' href='#368706'><time timestamp='2021-06-16T03:27:00Z'>03:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/eb63b1db2c4d...6bc1eca01b2f" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/eb63b1db2c4d...6bc1eca01b2f</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1623814020' id='368707'>
<a class='timestamp' href='#368707'><time timestamp='2021-06-16T03:27:00Z'>03:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 79c02c8 Pieter Wuille: Randomize message processing peer order
<br>
</div>

<div class='talk op-msg' data-timestamp='1623814020' id='368708'>
<a class='timestamp' href='#368708'><time timestamp='2021-06-16T03:27:00Z'>03:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 6bc1eca fanquake: Merge bitcoin/bitcoin#22144: Randomize message processing peer order
<br>
</div>

<div class='talk op-msg' data-timestamp='1623814080' id='368709'>
<a class='timestamp' href='#368709'><time timestamp='2021-06-16T03:28:00Z'>03:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake merged pull request #22144: Randomize message processing peer order (master...202106_rand_peers) <a href="https://github.com/bitcoin/bitcoin/pull/22144" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22144</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1623832020' id='368710'>
<a class='timestamp' href='#368710'><time timestamp='2021-06-16T08:27:00Z'>08:27</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
Is my understanding correct that we don&#x27;t send addresses or transactions via block-only connections, but the peer on the other end of a block-only connection may still send us addresses or transactions? Is the peer even aware that it is block-only connection for us?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623836400' id='368711'>
<a class='timestamp' href='#368711'><time timestamp='2021-06-16T09:40:00Z'>09:40</time></a>
&lt;<span class='nick nick-11'> lightlike</span>&gt;
vasild: We signal in the version message whether we want txRelay. I believe if a peer still send a tx or a tx inv in violation, they will be disconnected.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623836400' id='368712'>
<a class='timestamp' href='#368712'><time timestamp='2021-06-16T09:40:00Z'>09:40</time></a>
&lt;<span class='nick nick-11'> lightlike</span>&gt;
Addrs will be ignored on block-relay-only connections but processed in -blocksonly mode (our peer cannot easily distinguish between these two), no disconnections there
<br>
</div>

<div class='talk op-msg' data-timestamp='1623836460' id='368713'>
<a class='timestamp' href='#368713'><time timestamp='2021-06-16T09:41:00Z'>09:41</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1623837840' id='368714'>
<a class='timestamp' href='#368714'><time timestamp='2021-06-16T10:04:00Z'>10:04</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
I&#x27;d like to nominate #21934 for v22 because monitoring signalling in the next few months is quite useful.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623837840' id='368715'>
<a class='timestamp' href='#368715'><time timestamp='2021-06-16T10:04:00Z'>10:04</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/21934" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/21934</a> | RPC/blockchain: getblockchaininfo: Include versionbits signalling details during LOCKED_IN by luke-jr · Pull Request #21934 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623838080' id='368716'>
<a class='timestamp' href='#368716'><time timestamp='2021-06-16T10:08:00Z'>10:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto closed pull request #22240: build: Re-enable -Wdeprecated-copy (master...210614-revert) <a href="https://github.com/bitcoin/bitcoin/pull/22240" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22240</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1623838980' id='368717'>
<a class='timestamp' href='#368717'><time timestamp='2021-06-16T10:23:00Z'>10:23</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
vasild: yes i remember during the bip155 discussion there were some ideas to also incorporate &#x27;do not send me addresses at all&#x27;, but this was not done, i had to think of this with #22245
<br>
</div>

<div class='talk op-msg' data-timestamp='1623838980' id='368718'>
<a class='timestamp' href='#368718'><time timestamp='2021-06-16T10:23:00Z'>10:23</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22245" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22245</a> | [p2p] Stop sending SENDADDRV2 message to block-relay-only peers by amitiuttarwar · Pull Request #22245 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623839040' id='368719'>
<a class='timestamp' href='#368719'><time timestamp='2021-06-16T10:24:00Z'>10:24</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
I am composing a rely to that PR with a link to that discussion...
<br>
</div>

<div class='talk op-msg' data-timestamp='1623839040' id='368720'>
<a class='timestamp' href='#368720'><time timestamp='2021-06-16T10:24:00Z'>10:24</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
i don&#x27;t think there is any way to signal to not want addresses so i&#x27;m not sure why addrv1/addrv2 matters
<br>
</div>

<div class='talk op-msg' data-timestamp='1623839040' id='368721'>
<a class='timestamp' href='#368721'><time timestamp='2021-06-16T10:24:00Z'>10:24</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
not even from a bandwidth perspective: addrv2 might be <b>*more*</b> efficient to ignore
<br>
</div>

<div class='talk op-msg' data-timestamp='1623839100' id='368722'>
<a class='timestamp' href='#368722'><time timestamp='2021-06-16T10:25:00Z'>10:25</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
e.g. ipv4 addresses (the most common) take fewer bytes
<br>
</div>

<div class='talk op-msg' data-timestamp='1623839760' id='368723'>
<a class='timestamp' href='#368723'><time timestamp='2021-06-16T10:36:00Z'>10:36</time></a>
&lt;<span class='nick nick-7'> jnewbery_</span>&gt;
laanwj: bandwidth is irrelevant. Nodes only send one addr message per 24 hours on average, and the max size is 1000 entries.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623839820' id='368724'>
<a class='timestamp' href='#368724'><time timestamp='2021-06-16T10:37:00Z'>10:37</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
right, it&#x27;s the only possible concern i could think of anyhow
<br>
</div>

<div class='talk op-msg' data-timestamp='1623841500' id='368725'>
<a class='timestamp' href='#368725'><time timestamp='2021-06-16T11:05:00Z'>11:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #22258: build: Disable deprecated-copy warning only when external warnings are enabled (master...2106-buildEnableWarnDeprecatedCopy) <a href="https://github.com/bitcoin/bitcoin/pull/22258" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22258</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1623842640' id='368726'>
<a class='timestamp' href='#368726'><time timestamp='2021-06-16T11:24:00Z'>11:24</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
the disable_tx discussions left me with the recollection that, rather than encapsulating complex state in connection types, we might be heading back to separate flags, e.g. disable tx, disable addr, etc.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623842700' id='368727'>
<a class='timestamp' href='#368727'><time timestamp='2021-06-16T11:25:00Z'>11:25</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
in the BIP155 discussions nearly a year ago, it was decided that disable addr was a separate concern from BIP155-capable, thus the current implementation
<br>
</div>

<div class='talk op-msg' data-timestamp='1623842880' id='368728'>
<a class='timestamp' href='#368728'><time timestamp='2021-06-16T11:28:00Z'>11:28</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
those do seem like separate concerns / flags / BIPs etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1623842880' id='368729'>
<a class='timestamp' href='#368729'><time timestamp='2021-06-16T11:28:00Z'>11:28</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1623843000' id='368730'>
<a class='timestamp' href='#368730'><time timestamp='2021-06-16T11:30:00Z'>11:30</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
+1
<br>
</div>

<div class='talk op-msg' data-timestamp='1623843060' id='368731'>
<a class='timestamp' href='#368731'><time timestamp='2021-06-16T11:31:00Z'>11:31</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
I opened <a href="https://github.com/bitcoin/bips/pull/1134" class="link" target="_blank">https://github.com/bitcoin/bips/pull/1134</a> to clarify BIP155
<br>
</div>

<div class='talk op-msg' data-timestamp='1623843120' id='368732'>
<a class='timestamp' href='#368732'><time timestamp='2021-06-16T11:32:00Z'>11:32</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
vasild: nice!
<br>
</div>

<div class='talk op-msg' data-timestamp='1623843240' id='368733'>
<a class='timestamp' href='#368733'><time timestamp='2021-06-16T11:34:00Z'>11:34</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
I never thought that &quot;send me addrv2 instead of addr&quot; may imply a preference to receive address messages (them being addrv2 or addr). My Enflisch is nae good.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623843300' id='368734'>
<a class='timestamp' href='#368734'><time timestamp='2021-06-16T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1623843300' id='368735'>
<a class='timestamp' href='#368735'><time timestamp='2021-06-16T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
vasild: just saw your review, agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1623843600' id='368736'>
<a class='timestamp' href='#368736'><time timestamp='2021-06-16T11:40:00Z'>11:40</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
(communication may have been a bit siloed on some topics, by habit / time zones / affinities etc)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623843600' id='368737'>
<a class='timestamp' href='#368737'><time timestamp='2021-06-16T11:40:00Z'>11:40</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
(reviewers of certain areas, and so on)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623843960' id='368738'>
<a class='timestamp' href='#368738'><time timestamp='2021-06-16T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
vasild: me neither
<br>
</div>

<div class='talk op-msg' data-timestamp='1623843960' id='368739'>
<a class='timestamp' href='#368739'><time timestamp='2021-06-16T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
it wasn&#x27;t my intent at least when writing it
<br>
</div>

<div class='talk op-msg' data-timestamp='1623844020' id='368740'>
<a class='timestamp' href='#368740'><time timestamp='2021-06-16T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
i really meant it as a specification of what is supported by the client (remember that initially i started with a protocol version number bump only, the message came later because that turned out to be the preferred signaling mechanism now)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623844020' id='368741'>
<a class='timestamp' href='#368741'><time timestamp='2021-06-16T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
then the protocol version bump was added again because other implementations
<br>
</div>

<div class='talk op-msg' data-timestamp='1623844200' id='368742'>
<a class='timestamp' href='#368742'><time timestamp='2021-06-16T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
i never once considered it a preference with regard to receiving messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845580' id='368743'>
<a class='timestamp' href='#368743'><time timestamp='2021-06-16T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: why would I say &quot;send me red apples instead of green apples&quot; when I don&#x27;t eat apples at all?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845580' id='368744'>
<a class='timestamp' href='#368744'><time timestamp='2021-06-16T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
And if you send me an apple I&#x27;m going to put it straight in the trash
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845580' id='368745'>
<a class='timestamp' href='#368745'><time timestamp='2021-06-16T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
that&#x27;s just how the BIP was intended, it could just as well have been a service flag which is always sent
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845640' id='368746'>
<a class='timestamp' href='#368746'><time timestamp='2021-06-16T12:14:00Z'>12:14</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
as I said above, the fact that it&#x27;s an extra message is an implementation detail
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845700' id='368747'>
<a class='timestamp' href='#368747'><time timestamp='2021-06-16T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I&#x27;m very confused about why it&#x27;s controversial to not send a message that has zero impact on our own processing
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845700' id='368748'>
<a class='timestamp' href='#368748'><time timestamp='2021-06-16T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
there is no message to say &quot;I don&#x27;t want to receive address messages&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845700' id='368749'>
<a class='timestamp' href='#368749'><time timestamp='2021-06-16T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: bad English, sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845700' id='368750'>
<a class='timestamp' href='#368750'><time timestamp='2021-06-16T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
Why would I send a message to say &quot;please send me addrv2 messages that I&#x27;ll throw away instead of sending addr messages that I&#x27;ll throw away&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845700' id='368751'>
<a class='timestamp' href='#368751'><time timestamp='2021-06-16T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
because you will still receive v1 messages that you&#x27;ll throw away
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845700' id='368752'>
<a class='timestamp' href='#368752'><time timestamp='2021-06-16T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
it doesn&#x27;t matter
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845700' id='368753'>
<a class='timestamp' href='#368753'><time timestamp='2021-06-16T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
so why send the message?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845700' id='368754'>
<a class='timestamp' href='#368754'><time timestamp='2021-06-16T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
but anyhow, ok, I don&#x27;t understand why this is such a topic of contention teither
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845760' id='368755'>
<a class='timestamp' href='#368755'><time timestamp='2021-06-16T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
never minds
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845820' id='368756'>
<a class='timestamp' href='#368756'><time timestamp='2021-06-16T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
natural language is vague, we should be talking with &quot;if ()&quot;, &quot;&gt;&quot; and &quot;==&quot; ;-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845820' id='368757'>
<a class='timestamp' href='#368757'><time timestamp='2021-06-16T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
I did think a signal whether a peer is interested in address messages or not is orthogonal to what messages it supports or not, there was discussion to include this in BIP155 at some point but it wasnm&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845880' id='368758'>
<a class='timestamp' href='#368758'><time timestamp='2021-06-16T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
I do think such a signal is useful fwiw
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845880' id='368759'>
<a class='timestamp' href='#368759'><time timestamp='2021-06-16T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
but I don&#x27;t see how sendaddrv2 is helpful here
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845880' id='368760'>
<a class='timestamp' href='#368760'><time timestamp='2021-06-16T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
laanwj: but that&#x27;s not what the PR does?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845880' id='368761'>
<a class='timestamp' href='#368761'><time timestamp='2021-06-16T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
it doesn&#x27;t prevent message relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845880' id='368762'>
<a class='timestamp' href='#368762'><time timestamp='2021-06-16T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
I understand that
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845880' id='368763'>
<a class='timestamp' href='#368763'><time timestamp='2021-06-16T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
there was a real discussion about it, no need to rehash a year later
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845880' id='368764'>
<a class='timestamp' href='#368764'><time timestamp='2021-06-16T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
if it prevented message relay it&#x27;d be a  much more useful change
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845940' id='368765'>
<a class='timestamp' href='#368765'><time timestamp='2021-06-16T12:19:00Z'>12:19</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
laanwj: I&#x27;m confused. I thought that&#x27;s what you&#x27;re arguing against
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845940' id='368766'>
<a class='timestamp' href='#368766'><time timestamp='2021-06-16T12:19:00Z'>12:19</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
&quot;I don&#x27;t want address messages from block-only peers&quot; fine
<br>
</div>

<div class='talk op-msg' data-timestamp='1623845940' id='368767'>
<a class='timestamp' href='#368767'><time timestamp='2021-06-16T12:19:00Z'>12:19</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
no, I&#x27;m arguing against misinterpreting BIP155
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846000' id='368768'>
<a class='timestamp' href='#368768'><time timestamp='2021-06-16T12:20:00Z'>12:20</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
<a href="https://github.com/bitcoin/bips/pull/1134" class="link" target="_blank">https://github.com/bitcoin/bips/pull/1134</a> clears it up for me
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846000' id='368769'>
<a class='timestamp' href='#368769'><time timestamp='2021-06-16T12:20:00Z'>12:20</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
but this isn&#x27;t misinterpreting BIP155. BIP155 is totally irrelevant for links that don&#x27;t support address relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846060' id='368770'>
<a class='timestamp' href='#368770'><time timestamp='2021-06-16T12:21:00Z'>12:21</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
but was you say this doesnt disable address relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846060' id='368771'>
<a class='timestamp' href='#368771'><time timestamp='2021-06-16T12:21:00Z'>12:21</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
address relay isn&#x27;t disabled for the connection
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846060' id='368772'>
<a class='timestamp' href='#368772'><time timestamp='2021-06-16T12:21:00Z'>12:21</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
laanwj: what happens when I open an outbound blocks-only connection and receive an addr message on that connection?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846120' id='368773'>
<a class='timestamp' href='#368773'><time timestamp='2021-06-16T12:22:00Z'>12:22</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: there is more to this - a peer may maintain a useful database of addresses but not participate in address relay, so he is interested in receiving address gossip but is a black hole wrt further address propagation 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846120' id='368774'>
<a class='timestamp' href='#368774'><time timestamp='2021-06-16T12:22:00Z'>12:22</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: it is ignored
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846180' id='368775'>
<a class='timestamp' href='#368775'><time timestamp='2021-06-16T12:23:00Z'>12:23</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
if it&#x27;s ignored then how can &quot;he&#x27;s interested in receiving address gossip&quot; be true?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846180' id='368776'>
<a class='timestamp' href='#368776'><time timestamp='2021-06-16T12:23:00Z'>12:23</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
the peer I mentioned is not blocks-only
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846240' id='368777'>
<a class='timestamp' href='#368777'><time timestamp='2021-06-16T12:24:00Z'>12:24</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
may be a light client
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846240' id='368778'>
<a class='timestamp' href='#368778'><time timestamp='2021-06-16T12:24:00Z'>12:24</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
so how&#x27;s that relevant to PR 22245?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846240' id='368779'>
<a class='timestamp' href='#368779'><time timestamp='2021-06-16T12:24:00Z'>12:24</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
he is interested in receiving address gossip in order to maintain his own addresses databas
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846240' id='368780'>
<a class='timestamp' href='#368780'><time timestamp='2021-06-16T12:24:00Z'>12:24</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
22245 is only for blocks-relay-only connections
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846300' id='368781'>
<a class='timestamp' href='#368781'><time timestamp='2021-06-16T12:25:00Z'>12:25</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
talking about light clients seems completely irrelevant to the PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846300' id='368782'>
<a class='timestamp' href='#368782'><time timestamp='2021-06-16T12:25:00Z'>12:25</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
22245 implies we put a new semantic to sendaddrv2: &quot;However, if we move forward with the approached proposed in that PR&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846300' id='368783'>
<a class='timestamp' href='#368783'><time timestamp='2021-06-16T12:25:00Z'>12:25</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
that PR == #21528
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846300' id='368784'>
<a class='timestamp' href='#368784'><time timestamp='2021-06-16T12:25:00Z'>12:25</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/21528" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/21528</a> | [p2p] Reduce addr blackholes by amitiuttarwar · Pull Request #21528 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846360' id='368785'>
<a class='timestamp' href='#368785'><time timestamp='2021-06-16T12:26:00Z'>12:26</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
22245 doesn&#x27;t change the semantics of sendaddrv2 at all. It simply doesn&#x27;t send the message when it&#x27;s irrelevant
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846360' id='368786'>
<a class='timestamp' href='#368786'><time timestamp='2021-06-16T12:26:00Z'>12:26</time></a>
&lt;<span class='nick nick-11'> lightlike</span>&gt;
jnewbery: i think we expect to receive addr messages on block-relay-only connections currently, because out peer doesn&#x27;t know from the version messages whether this is a block-relay-only link or a regular connection in -blocksonly mode (for which we want addrs)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846420' id='368787'>
<a class='timestamp' href='#368787'><time timestamp='2021-06-16T12:27:00Z'>12:27</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
lightlike: the peer doesn&#x27;t even know that the connection is not a full-relay-connection
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846480' id='368788'>
<a class='timestamp' href='#368788'><time timestamp='2021-06-16T12:28:00Z'>12:28</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: I don&#x27;t think your 4 state analysis in <a href="https://github.com/bitcoin/bitcoin/pull/22245#issuecomment-862279099" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22245#issuecomment-862279099</a> is quite right. When you say:
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846480' id='368789'>
<a class='timestamp' href='#368789'><time timestamp='2021-06-16T12:28:00Z'>12:28</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
&gt; !A and !B (it follows that if you send me a reply to my getaddr it should be in the old addr format because I don&#x27;t support the new addrv2)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846540' id='368790'>
<a class='timestamp' href='#368790'><time timestamp='2021-06-16T12:29:00Z'>12:29</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: #21528 changes the semantic of sendaddrv2 and #22245 only makes sense if #21528 is accepted
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846540' id='368791'>
<a class='timestamp' href='#368791'><time timestamp='2021-06-16T12:29:00Z'>12:29</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/21528" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/21528</a> | [p2p] Reduce addr blackholes by amitiuttarwar · Pull Request #21528 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846540' id='368792'>
<a class='timestamp' href='#368792'><time timestamp='2021-06-16T12:29:00Z'>12:29</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22245" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22245</a> | [p2p] Stop sending SENDADDRV2 message to block-relay-only peers by amitiuttarwar · Pull Request #22245 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846540' id='368793'>
<a class='timestamp' href='#368793'><time timestamp='2021-06-16T12:29:00Z'>12:29</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/21528" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/21528</a> | [p2p] Reduce addr blackholes by amitiuttarwar · Pull Request #21528 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846540' id='368794'>
<a class='timestamp' href='#368794'><time timestamp='2021-06-16T12:29:00Z'>12:29</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
that doesn&#x27;t make sense here. If we receive a reply to a getaddr on an outbound block-relay-only connection, then we drop it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846540' id='368795'>
<a class='timestamp' href='#368795'><time timestamp='2021-06-16T12:29:00Z'>12:29</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
22245 seems like a good change independently from 21528 to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846600' id='368796'>
<a class='timestamp' href='#368796'><time timestamp='2021-06-16T12:30:00Z'>12:30</time></a>
&lt;<span class='nick nick-11'> lightlike</span>&gt;
vasild: I don&#x27;t agree with that. 22245 should make just as much sense using just ADDR,ADDRV2 and GETADDR as signs that the node is interested in addr relay. SENDADDRV2 doesn&#x27;t seem necessary to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846600' id='368797'>
<a class='timestamp' href='#368797'><time timestamp='2021-06-16T12:30:00Z'>12:30</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
jnewbery: it indeed would widen the meaning of sendaddrv2, and irreversibly
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846660' id='368798'>
<a class='timestamp' href='#368798'><time timestamp='2021-06-16T12:31:00Z'>12:31</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
jonatack: I still don&#x27;t understand why you keep saying that
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846720' id='368799'>
<a class='timestamp' href='#368799'><time timestamp='2021-06-16T12:32:00Z'>12:32</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
if I don&#x27;t do anything with addrs received on a link, then asking my peer to send those addrs (which I&#x27;m going to ignore) in a certain format, is neither useful, nor irreversible
<br>
</div>

<div class='talk op-msg' data-timestamp='1623846780' id='368800'>
<a class='timestamp' href='#368800'><time timestamp='2021-06-16T12:33:00Z'>12:33</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
can you help me understand why you think this change is irreverible?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847140' id='368801'>
<a class='timestamp' href='#368801'><time timestamp='2021-06-16T12:39:00Z'>12:39</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
lightlike: I think you meant &quot;21528 should make just as much sense using just addr, addrv2 and getaddr&quot; (and I agree)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847380' id='368802'>
<a class='timestamp' href='#368802'><time timestamp='2021-06-16T12:43:00Z'>12:43</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
If we look at 22245 in isolation (as if 21528 does not exist) then it is pointless change. Why make it? The peer is then going to send us addr which we ignore (instead of addrv2 which we ignore). Also we would be lying that we don&#x27;t support addrv2 when we actually do. Just does not feel right.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847500' id='368803'>
<a class='timestamp' href='#368803'><time timestamp='2021-06-16T12:45:00Z'>12:45</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
But I think the bigger argument here is 22245+21528 and changing the semantic of sendaddrv2 in order to tweak address relay and attempt to fix the black holes problem. But would even that fix it? Some scenarios where it will not: <a href="https://github.com/bitcoin/bitcoin/pull/21528#issuecomment-862312851" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21528#issuecomment-862312851</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847560' id='368804'>
<a class='timestamp' href='#368804'><time timestamp='2021-06-16T12:46:00Z'>12:46</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
`sendaddrv2` only has meaning within a single connection. It means &quot;I prefer to receive addrv2 messages on this connection&quot;. It implies nothing about the implementation of the node (as it shouldn&#x27;t). Not sending a sendaddrv2 message is not &quot;lying that we don&#x27;t support addrv2&quot;, but simply not expressing a preference for a certain format *on that connection*.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847620' id='368805'>
<a class='timestamp' href='#368805'><time timestamp='2021-06-16T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
If this was a service bit, which is gossiped beyond a single connection, then I&#x27;d agree with you, but all p2p messages only have semantic meaning within the connection that they exist in
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847620' id='368806'>
<a class='timestamp' href='#368806'><time timestamp='2021-06-16T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
the point is that there is no way to &quot;not express a preference&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847620' id='368807'>
<a class='timestamp' href='#368807'><time timestamp='2021-06-16T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
either the preference is v1 (not message) or v2 (send a message)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847620' id='368808'>
<a class='timestamp' href='#368808'><time timestamp='2021-06-16T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
the way to &quot;not express a preference&quot; is to not &quot;express a preference&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847680' id='368809'>
<a class='timestamp' href='#368809'><time timestamp='2021-06-16T12:48:00Z'>12:48</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
there could have been a third option in BIP155 but there wasn&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847680' id='368810'>
<a class='timestamp' href='#368810'><time timestamp='2021-06-16T12:48:00Z'>12:48</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
It means &quot;I prefer to receive addrv2 messages on this connection&quot; -- this is your interpretation.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847680' id='368811'>
<a class='timestamp' href='#368811'><time timestamp='2021-06-16T12:48:00Z'>12:48</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
no, it&#x27;s not
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847680' id='368812'>
<a class='timestamp' href='#368812'><time timestamp='2021-06-16T12:48:00Z'>12:48</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
that would mean that a peer that doesn&#x27;t send the message doesn&#x27;t fcare what it receives
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847680' id='368813'>
<a class='timestamp' href='#368813'><time timestamp='2021-06-16T12:48:00Z'>12:48</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
whereas it means that it wants to receive v1
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847740' id='368814'>
<a class='timestamp' href='#368814'><time timestamp='2021-06-16T12:49:00Z'>12:49</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
there is no &quot;I don&#x27;t want to receive addr&quot; signal, nor is there &quot;I don&#x27;t care&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847740' id='368815'>
<a class='timestamp' href='#368815'><time timestamp='2021-06-16T12:49:00Z'>12:49</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
maybe there should be! but there isn&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847740' id='368816'>
<a class='timestamp' href='#368816'><time timestamp='2021-06-16T12:49:00Z'>12:49</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: the BIP says &quot;Sending such a message indicates that a node can understand and *prefers to receive addrv2 messages*&quot; - yes, my interpretation of this is that it prefers to receive addrv2 messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847800' id='368817'>
<a class='timestamp' href='#368817'><time timestamp='2021-06-16T12:50:00Z'>12:50</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
INSTEAD
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847800' id='368818'>
<a class='timestamp' href='#368818'><time timestamp='2021-06-16T12:50:00Z'>12:50</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
signaling the new protocol version then <b>*deciding*</b> not to send the message means your node wants to receive v1
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847800' id='368819'>
<a class='timestamp' href='#368819'><time timestamp='2021-06-16T12:50:00Z'>12:50</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
laanwj: that&#x27;s not how p2p versions work
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847800' id='368820'>
<a class='timestamp' href='#368820'><time timestamp='2021-06-16T12:50:00Z'>12:50</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
well it is how I intended BIP155, I don&#x27;t really agree with the new interpretation
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847800' id='368821'>
<a class='timestamp' href='#368821'><time timestamp='2021-06-16T12:50:00Z'>12:50</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
since they&#x27;re serial, if a later p2p version adds some other feature, it doesn&#x27;t automatically mean that anyone using that feature <b>*must*</b> implement addrv2
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847860' id='368822'>
<a class='timestamp' href='#368822'><time timestamp='2021-06-16T12:51:00Z'>12:51</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: you skipped the trailing &quot;instead...&quot; which is important.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847920' id='368823'>
<a class='timestamp' href='#368823'><time timestamp='2021-06-16T12:52:00Z'>12:52</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I didn&#x27;t think I was misrepresenting it. Here you go: &quot;Sending such a message indicates that a node can understand and prefers to receive addrv2 messages instead of addr messages. I.e. &quot;Send me addrv2&quot;.&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847920' id='368824'>
<a class='timestamp' href='#368824'><time timestamp='2021-06-16T12:52:00Z'>12:52</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
jnewbery: which is why there is the option not to send the message: it implies you want to keep reciving v1
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847920' id='368825'>
<a class='timestamp' href='#368825'><time timestamp='2021-06-16T12:52:00Z'>12:52</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
there are two states, not three or four
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847920' id='368826'>
<a class='timestamp' href='#368826'><time timestamp='2021-06-16T12:52:00Z'>12:52</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
anyway, if sendaddrv2 signalled preference to receive unrequested address messages, then bitcoin core-pre-bip155 do not want to receive unrequested address messages?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847980' id='368827'>
<a class='timestamp' href='#368827'><time timestamp='2021-06-16T12:53:00Z'>12:53</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
laanwj: A BIP cannot specify that not sending something implies some meaning. BIPs are opt-in. I can&#x27;t say in my BIP &quot;not sending this message implies thing&quot;.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847980' id='368828'>
<a class='timestamp' href='#368828'><time timestamp='2021-06-16T12:53:00Z'>12:53</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
because they do not send sendaddrv2
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847980' id='368829'>
<a class='timestamp' href='#368829'><time timestamp='2021-06-16T12:53:00Z'>12:53</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
jnewbery: in this case not sending the message is the old behavior of &#x27;send me v1&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847980' id='368830'>
<a class='timestamp' href='#368830'><time timestamp='2021-06-16T12:53:00Z'>12:53</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: huh? I think you really misunderstand 22245 and 21528.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623847980' id='368831'>
<a class='timestamp' href='#368831'><time timestamp='2021-06-16T12:53:00Z'>12:53</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
there&#x27;s the old behavior anhd the new behavior
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848040' id='368832'>
<a class='timestamp' href='#368832'><time timestamp='2021-06-16T12:54:00Z'>12:54</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
a pre-bip155 bitcoin core node will send a getaddr, which implies that it wants to receive addresses
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848040' id='368833'>
<a class='timestamp' href='#368833'><time timestamp='2021-06-16T12:54:00Z'>12:54</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
but I honestly don&#x27;t understand why this is such a hotbed issue before the v22.0 feature freeze
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848100' id='368834'>
<a class='timestamp' href='#368834'><time timestamp='2021-06-16T12:55:00Z'>12:55</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
it will also send addr messages, which implies that it&#x27;s taking part in address relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848100' id='368835'>
<a class='timestamp' href='#368835'><time timestamp='2021-06-16T12:55:00Z'>12:55</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
there would have been tons of time to discuss this with less time pressure
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848220' id='368836'>
<a class='timestamp' href='#368836'><time timestamp='2021-06-16T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: would you say that if a node sends getaddr it follows that it wants to also receive unrequested address messages, outside of the response of that getaddr? And from that would you say it follows that this node participates in address relay (gossips to other nodes)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848280' id='368837'>
<a class='timestamp' href='#368837'><time timestamp='2021-06-16T12:58:00Z'>12:58</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
I wasn&#x27;t aware either that sending &quot;getaddr&quot; changed the connection status in that regard
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848340' id='368838'>
<a class='timestamp' href='#368838'><time timestamp='2021-06-16T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
laanwj: my understanding is that 21528 intends to achieve that (sending getaddr changed the connection status...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848340' id='368839'>
<a class='timestamp' href='#368839'><time timestamp='2021-06-16T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
but if you can regard &quot;getaddr&quot; as a signaling message to receive unrequested address messages, and a peer never sending it effectively signals it doesn&#x27;t ever want to see address messages, then you&#x27;re right, there are three states
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848400' id='368840'>
<a class='timestamp' href='#368840'><time timestamp='2021-06-16T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
laanwj: that&#x27;s what #21528 is proposing. If a peer sends us `addr` OR `addrv2` OR `getaddr` OR `sendaddrv2`, then we should consider it a peer for address gossiping. I think it makes sense to review that PR.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848400' id='368841'>
<a class='timestamp' href='#368841'><time timestamp='2021-06-16T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/21528" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/21528</a> | [p2p] Reduce addr blackholes by amitiuttarwar · Pull Request #21528 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848400' id='368842'>
<a class='timestamp' href='#368842'><time timestamp='2021-06-16T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
The PR description also lists all of the places that the proposal has been discussed previously
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848400' id='368843'>
<a class='timestamp' href='#368843'><time timestamp='2021-06-16T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
jnewbery: if that is new behavior it needs a BIP as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848460' id='368844'>
<a class='timestamp' href='#368844'><time timestamp='2021-06-16T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
doesn&#x27;t seem limited to bitcoin core
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848460' id='368845'>
<a class='timestamp' href='#368845'><time timestamp='2021-06-16T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
laanwj: please read the PR before making statements like that
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848460' id='368846'>
<a class='timestamp' href='#368846'><time timestamp='2021-06-16T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
here&#x27;s the mailing list post: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-April/018784.html" class="link" target="_blank">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-April/018784.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848460' id='368847'>
<a class='timestamp' href='#368847'><time timestamp='2021-06-16T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
you&#x27;re being really agressive now
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848460' id='368848'>
<a class='timestamp' href='#368848'><time timestamp='2021-06-16T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I don&#x27;t think it&#x27;s aggressive to expect people to read PR descriptions
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848520' id='368849'>
<a class='timestamp' href='#368849'><time timestamp='2021-06-16T13:02:00Z'>13:02</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
I&#x27;m not aware of every single PR description
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848520' id='368850'>
<a class='timestamp' href='#368850'><time timestamp='2021-06-16T13:02:00Z'>13:02</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
I just cannot keep up wit hthat
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848580' id='368851'>
<a class='timestamp' href='#368851'><time timestamp='2021-06-16T13:03:00Z'>13:03</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
laanwj: this has been discussed in many venues already. It&#x27;s been raised on the mailing list, discussed in bitcoin core irc and p2p irc meetings, amiti has even done a survey of every other common node implementation to make sure it doesn&#x27;t break them: <a href="https://github.com/bitcoin/bitcoin/pull/21528#issuecomment-809906430" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/21528#issuecomment-809906430</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848580' id='368852'>
<a class='timestamp' href='#368852'><time timestamp='2021-06-16T13:03:00Z'>13:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
hmm, actually laanwj is right that 21528 is not related to just bitcoin core - it changes the semantics of getaddr, addr, addrv2 and sendaddrv2. I guess that warrants a BIP.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848640' id='368853'>
<a class='timestamp' href='#368853'><time timestamp='2021-06-16T13:04:00Z'>13:04</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
jnewbery: that&#x27;s good
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848700' id='368854'>
<a class='timestamp' href='#368854'><time timestamp='2021-06-16T13:05:00Z'>13:05</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
vasild: yes, likely instead of your proposed BIP155 change
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848760' id='368855'>
<a class='timestamp' href='#368855'><time timestamp='2021-06-16T13:06:00Z'>13:06</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
(as it goes the other way)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848760' id='368856'>
<a class='timestamp' href='#368856'><time timestamp='2021-06-16T13:06:00Z'>13:06</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
which is fine, if you&#x27;re trying to change something, just be transparent about it, a while before you were still claiming this doesn&#x27;t make any irreversible change to behavior
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848820' id='368857'>
<a class='timestamp' href='#368857'><time timestamp='2021-06-16T13:07:00Z'>13:07</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
laanwj: are you saying that I&#x27;m not being transparent?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848820' id='368858'>
<a class='timestamp' href='#368858'><time timestamp='2021-06-16T13:07:00Z'>13:07</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
22245 makes no irreversible changes to behavior
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848820' id='368859'>
<a class='timestamp' href='#368859'><time timestamp='2021-06-16T13:07:00Z'>13:07</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
it came across to me as &quot;this was always the case&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848880' id='368860'>
<a class='timestamp' href='#368860'><time timestamp='2021-06-16T13:08:00Z'>13:08</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
all of this has been discussed many times on github, irc, mailing list. How could it be more transparent?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848880' id='368861'>
<a class='timestamp' href='#368861'><time timestamp='2021-06-16T13:08:00Z'>13:08</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
maybe it&#x27;s just the nthat taking that part out of the parent PR separetely was unclear to people
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848880' id='368862'>
<a class='timestamp' href='#368862'><time timestamp='2021-06-16T13:08:00Z'>13:08</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
Today is the first time I hear about it, sorry.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848940' id='368863'>
<a class='timestamp' href='#368863'><time timestamp='2021-06-16T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1623848940' id='368864'>
<a class='timestamp' href='#368864'><time timestamp='2021-06-16T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
it == 21528+22245
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849000' id='368865'>
<a class='timestamp' href='#368865'><time timestamp='2021-06-16T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
laanwj: I suggested to amiti that 22245 be separated from 21528, so I apologize if that was confusing for people and take full responsibility
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849000' id='368866'>
<a class='timestamp' href='#368866'><time timestamp='2021-06-16T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
it seems to me like a good change independent from 21528
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849000' id='368867'>
<a class='timestamp' href='#368867'><time timestamp='2021-06-16T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
IMO 21528+22245 is a protocol change.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849000' id='368868'>
<a class='timestamp' href='#368868'><time timestamp='2021-06-16T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: it&#x27;s not a protocol change
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849060' id='368869'>
<a class='timestamp' href='#368869'><time timestamp='2021-06-16T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
the semantic of e.g. getaddr is changed (extended)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849060' id='368870'>
<a class='timestamp' href='#368870'><time timestamp='2021-06-16T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
by itself (without other context) it seemed like a misinterpretation of BIP155 as i had intended it
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849060' id='368871'>
<a class='timestamp' href='#368871'><time timestamp='2021-06-16T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
seeing it as part of a large change is completely different
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849120' id='368872'>
<a class='timestamp' href='#368872'><time timestamp='2021-06-16T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
laanwj: the first sentence in the PR description links to the 21528. I don&#x27;t understand how it&#x27;s not transparent
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849180' id='368873'>
<a class='timestamp' href='#368873'><time timestamp='2021-06-16T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
so okay, you <b>*are*</b> trying to amke a protocol change
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849180' id='368874'>
<a class='timestamp' href='#368874'><time timestamp='2021-06-16T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849180' id='368875'>
<a class='timestamp' href='#368875'><time timestamp='2021-06-16T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
can you please stop the insinuations that I&#x27;m trying to do something underhand?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849240' id='368876'>
<a class='timestamp' href='#368876'><time timestamp='2021-06-16T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
what, I dont&#x27; mean you are trying to make a sneaky protocol change
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849240' id='368877'>
<a class='timestamp' href='#368877'><time timestamp='2021-06-16T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
I haven&#x27;t said anything about being underhand
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849240' id='368878'>
<a class='timestamp' href='#368878'><time timestamp='2021-06-16T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
I just didn&#x27;t understand
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849240' id='368879'>
<a class='timestamp' href='#368879'><time timestamp='2021-06-16T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
you said that I&#x27;m not being transparent
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849420' id='368880'>
<a class='timestamp' href='#368880'><time timestamp='2021-06-16T13:17:00Z'>13:17</time></a>
&lt;<span class='nick nick-4'> jamesob</span>&gt;
seems clear that there&#x27;s enough unresolved discussion here that merging these changes in before the feature freeze isn&#x27;t the way to go. and that conversations like these would be much more amicable IRL!
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849480' id='368881'>
<a class='timestamp' href='#368881'><time timestamp='2021-06-16T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
laanwj: I&#x27;d suggest re-reading the irc meeting logs from when this was discussed, both in the main Bitcoin Core meeting, and in the p2p meeting. You commented in the first meeting in March, so you were aware that this was a proposal.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849780' id='368882'>
<a class='timestamp' href='#368882'><time timestamp='2021-06-16T13:23:00Z'>13:23</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
It&#x27;s very frustrating to see someone put in months of work on something, raise it in both irc meetings, share it on the mailing list, do a huge amount of work to verify compatibility with other nodes, and then see people show up and leave opinionated comments without reading and understanding the full context.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623849960' id='368883'>
<a class='timestamp' href='#368883'><time timestamp='2021-06-16T13:26:00Z'>13:26</time></a>
&lt;<span class='nick nick-4'> jamesob</span>&gt;
jnewbery: no doubt man, but to some extent that&#x27;s just the nature of the beast re: the project&#x27;s decentralized development process. I haven&#x27;t seen mention of an irreversible widening of the protocol&#x27;s semantics earlier than jonatack&#x27;s comment 8 hours ago, and I think once something like that is raised it deserves to be fleshed out over some time
<br>
</div>

<div class='talk op-msg' data-timestamp='1623850200' id='368884'>
<a class='timestamp' href='#368884'><time timestamp='2021-06-16T13:30:00Z'>13:30</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I&#x27;m still waiting for jonatack to explain why this is an &quot;irreversible change&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1623850260' id='368885'>
<a class='timestamp' href='#368885'><time timestamp='2021-06-16T13:31:00Z'>13:31</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
It is regrettable but if laanwj vasild jonatack are all uncomfortable with it getting in before feature freeze then we should probably move on. Lots of other things to discuss for feature freeze
<br>
</div>

<div class='talk op-msg' data-timestamp='1623850860' id='368886'>
<a class='timestamp' href='#368886'><time timestamp='2021-06-16T13:41:00Z'>13:41</time></a>
&lt;<span class='nick nick-3'> _aj_</span>&gt;
jnewbery: &lt;jnewbery&gt; you said that I&#x27;m not being transparent // -!- laanwj [~laanwj@user/laanwj] has quit
<br>
</div>

<div class='talk op-msg' data-timestamp='1623852360' id='368887'>
<a class='timestamp' href='#368887'><time timestamp='2021-06-16T14:06:00Z'>14:06</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
notwithstanding making the discussion far less heated for the sake of everyone, i agree that&#x27;s a sender-only change and i don&#x27;t see how it would restrain a future bip155 client to probe addrv2 support with its selected v22.0+ peers
<br>
</div>

<div class='talk op-msg' data-timestamp='1623852360' id='368888'>
<a class='timestamp' href='#368888'><time timestamp='2021-06-16T14:06:00Z'>14:06</time></a>
&lt;<span class='nick nick-10'> ariard</span>&gt;
that&#x27;s the bip is unclear and not interest in addr format doesn&#x27;t signal lack of interest in addr-relay sounds a different issue there, imho
<br>
</div>

<div class='talk op-msg' data-timestamp='1623856140' id='368889'>
<a class='timestamp' href='#368889'><time timestamp='2021-06-16T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] Sjors opened pull request #22260: Make bech32m the default, except where needed. Update GUI checkbox. (master...2021/06/bech32_gui) <a href="https://github.com/bitcoin/bitcoin/pull/22260" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22260</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1623859140' id='368890'>
<a class='timestamp' href='#368890'><time timestamp='2021-06-16T15:59:00Z'>15:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #22261: [p2p/mempool] Two small fixes to node broadcast logic (master...2021-06-broadcast-fixes) <a href="https://github.com/bitcoin/bitcoin/pull/22261" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22261</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1623860340' id='368891'>
<a class='timestamp' href='#368891'><time timestamp='2021-06-16T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] dongcarl closed pull request #20158: tree-wide: De-globalize ChainstateManager (master...2020-06-libbitcoinruntime) <a href="https://github.com/bitcoin/bitcoin/pull/20158" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/20158</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1623862320' id='368892'>
<a class='timestamp' href='#368892'><time timestamp='2021-06-16T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-15'> WS_black22</span>&gt;
hello folks 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623862380' id='368893'>
<a class='timestamp' href='#368893'><time timestamp='2021-06-16T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-15'> WS_black22</span>&gt;
i got my old wallet.dat i need to imported to the new bitcoin core, how can i do this? i dont see the replasment of wallet.dat, 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863340' id='368894'>
<a class='timestamp' href='#368894'><time timestamp='2021-06-16T17:09:00Z'>17:09</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
hey all, looks like I missed lots of convo about my work to mitigate-addr-blackholes. I&#x27;ve caught up on the conversation here &amp; the PRs and want to share two main thoughts: 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368895'>
<a class='timestamp' href='#368895'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
1. My biggest question is why are these approach concerns only being raised now?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368896'>
<a class='timestamp' href='#368896'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
To review the context of this work: I opened #21528 almost 3 months ago, and soon after brought it up at the weekly bitcoin-core-dev meeting to seek approach feedback. A lot of the concerns that are now being voiced (should there be a separate flag, could we do redundant relay for blackholes rather than selective, what are the implications for other clients) have already been discussed in relation to these changes. My 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368897'>
<a class='timestamp' href='#368897'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
understanding was the biggest concern was about compatibility for other clients, so I wrote to the mailing list and researched / opened issues in every other bitcoin client I could find. I’ve additionally brought up these changes at a P2P meeting in early April and then again this week. I understand that time zones are hard and that not everyone can attend the meetings, but I’d hope the logs would be read and concerns to 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368898'>
<a class='timestamp' href='#368898'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
be raised in the week that follows.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368899'>
<a class='timestamp' href='#368899'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
It’s pretty disheartening to spend a long time trying to clear the conceptual obstacles for this work, to then loop back and rehash the same conversations. So this brings me back to the question of why are these approach concerns only being raised now? I’m genuinely perplexed because between the PR, irc meetings &amp; the mailing list, I thought I was very vocal about these changes. If our only takeaway is how we avoid these 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368900'>
<a class='timestamp' href='#368900'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
sort of drawn-out circular conversations, at least this will have been a constructive experience.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368901'>
<a class='timestamp' href='#368901'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/21528" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/21528</a> | [p2p] Reduce addr blackholes by amitiuttarwar · Pull Request #21528 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368902'>
<a class='timestamp' href='#368902'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
2. In regards to the path forward for #21528 &amp; #22245, it seems like the concerns are all focusing specifically on SENDADDRV2 and the wording of that specific bip.  #21528 can proceed without using SENDADDRV2 (aka without #22245), but imo it would make more sense to treat it consistently with ADDR, GETADDR and ADDRV2 messages. While I do think the change is a standalone improvement, the end goal is to support more 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368903'>
<a class='timestamp' href='#368903'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
block-relay-only connections (and address the concerns I had about the disabletx proposal).  In the end, if the only remaining concern is really around SENDADDRV2, I will remove that piece. But I would prefer to keep it logically consistent with the rest of the proposed changes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368904'>
<a class='timestamp' href='#368904'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
Its clear that network-wide addr relay is something filled with murky assumptions, and divergent expectations, but I’m hoping to find a way forward for these goals. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368905'>
<a class='timestamp' href='#368905'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/21528" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/21528</a> | [p2p] Reduce addr blackholes by amitiuttarwar · Pull Request #21528 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368906'>
<a class='timestamp' href='#368906'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22245" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22245</a> | [p2p] Stop sending SENDADDRV2 message to block-relay-only peers by amitiuttarwar · Pull Request #22245 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368907'>
<a class='timestamp' href='#368907'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/21528" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/21528</a> | [p2p] Reduce addr blackholes by amitiuttarwar · Pull Request #21528 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368908'>
<a class='timestamp' href='#368908'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22245" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22245</a> | [p2p] Stop sending SENDADDRV2 message to block-relay-only peers by amitiuttarwar · Pull Request #22245 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368909'>
<a class='timestamp' href='#368909'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
laanwj, vasild, jonatack: I&#x27;m interested in hearing your opinions on these two points. thanks in advance!
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863400' id='368910'>
<a class='timestamp' href='#368910'><time timestamp='2021-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
also sorry for all the gribbles =P 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863940' id='368911'>
<a class='timestamp' href='#368911'><time timestamp='2021-06-16T17:19:00Z'>17:19</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
amiti: from a cursory review of all of the discussion on this topic that I could find, the issue is with the specific implementation of #22245, which, afaict, is not discussed anywhere except when that PR was opened. I get that it was broken out of #21528 but I don&#x27;t see where that specific change is discussed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623863940' id='368912'>
<a class='timestamp' href='#368912'><time timestamp='2021-06-16T17:19:00Z'>17:19</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22245" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22245</a> | [p2p] Stop sending SENDADDRV2 message to block-relay-only peers by amitiuttarwar · Pull Request #22245 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623864000' id='368913'>
<a class='timestamp' href='#368913'><time timestamp='2021-06-16T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/21528" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/21528</a> | [p2p] Reduce addr blackholes by amitiuttarwar · Pull Request #21528 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1623864000' id='368914'>
<a class='timestamp' href='#368914'><time timestamp='2021-06-16T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t think the sendaddrv2 aspect of the discussion is relevant
<br>
</div>

<div class='talk op-msg' data-timestamp='1623864060' id='368915'>
<a class='timestamp' href='#368915'><time timestamp='2021-06-16T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(only to the extent that it drew attention to the fact that 21528 is changing behavior for a number of messages including sendaddrv2)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623864060' id='368916'>
<a class='timestamp' href='#368916'><time timestamp='2021-06-16T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it seems to me that the concerns are with 22245 itself, not with the concept of avoiding addr blackholes
<br>
</div>

<div class='talk op-msg' data-timestamp='1623864060' id='368917'>
<a class='timestamp' href='#368917'><time timestamp='2021-06-16T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
22245 is utterly harmless on itself
<br>
</div>

<div class='talk op-msg' data-timestamp='1623864120' id='368918'>
<a class='timestamp' href='#368918'><time timestamp='2021-06-16T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sending sendaddrv2 or not makes no difference, as the received addr messages are just ignored
<br>
</div>

<div class='talk op-msg' data-timestamp='1623864480' id='368919'>
<a class='timestamp' href='#368919'><time timestamp='2021-06-16T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sipa: but with 21528 it gains an additional meaning?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623864540' id='368920'>
<a class='timestamp' href='#368920'><time timestamp='2021-06-16T17:29:00Z'>17:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: not in my opinion, but yes, i think that is the disagreement
<br>
</div>

<div class='talk op-msg' data-timestamp='1623864600' id='368921'>
<a class='timestamp' href='#368921'><time timestamp='2021-06-16T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
this is kinda what I&#x27;m trying to clarify- are the concerns solely about the sendaddrv2 message, or are they about the general approach
<br>
</div>

<div class='talk op-msg' data-timestamp='1623864660' id='368922'>
<a class='timestamp' href='#368922'><time timestamp='2021-06-16T17:31:00Z'>17:31</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
but yeah, I conceptually agree with what sipa just voiced  
<br>
</div>

<div class='talk op-msg' data-timestamp='1623864900' id='368923'>
<a class='timestamp' href='#368923'><time timestamp='2021-06-16T17:35:00Z'>17:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
amiti: actually, question i have: if 21528 would exclude sendaddrv2 (just not use it as a trigger when received), what would happen for relay to block only peers?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623865080' id='368924'>
<a class='timestamp' href='#368924'><time timestamp='2021-06-16T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
so, if 21528 only used ADDR, ADDRV2, GETADDR to indicate &quot;interest in addr relay&quot;, then bitcoin core nodes wouldn&#x27;t initiate any of those to outbound block-relay-only connections. but nodes who have started up in blocks-only mode would initiate a GETADDR to their outbound peers. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623865080' id='368925'>
<a class='timestamp' href='#368925'><time timestamp='2021-06-16T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
and participate in other ADDR relay 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623865320' id='368926'>
<a class='timestamp' href='#368926'><time timestamp='2021-06-16T17:42:00Z'>17:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
amiti: so what difference would that make?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623865440' id='368927'>
<a class='timestamp' href='#368927'><time timestamp='2021-06-16T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
sipa: right, so I don&#x27;t quite get why sendaddrv2 would / should be treated differently, and have a preference for logical consistency across p2p messages. BUT if the concern is <b>*exclusively*</b> about sendaddrv2 messages &amp; not matching the intent when writing the bip, I can just leave it out and continue forward. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623865500' id='368928'>
<a class='timestamp' href='#368928'><time timestamp='2021-06-16T17:45:00Z'>17:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
amiti: yeah, i&#x27;m just trying to understand the tradeoffs
<br>
</div>

<div class='talk op-msg' data-timestamp='1623865500' id='368929'>
<a class='timestamp' href='#368929'><time timestamp='2021-06-16T17:45:00Z'>17:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not suggesting anything specifically
<br>
</div>

<div class='talk op-msg' data-timestamp='1623865620' id='368930'>
<a class='timestamp' href='#368930'><time timestamp='2021-06-16T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
gotcha, imo the main tradeoff of using sendaddrv2 or not is just &quot;logical consistency&quot; of treating it the same as other address messages. no observable functional difference based on current clients  
<br>
</div>

<div class='talk op-msg' data-timestamp='1623865620' id='368931'>
<a class='timestamp' href='#368931'><time timestamp='2021-06-16T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
also in the research of other clients, I wasn&#x27;t specifically looking, but didn&#x27;t see much support for sendaddrv2, so suspect it would have minimal impact there too. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623865620' id='368932'>
<a class='timestamp' href='#368932'><time timestamp='2021-06-16T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
got it, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1623865800' id='368933'>
<a class='timestamp' href='#368933'><time timestamp='2021-06-16T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
:)
<br>
</div>

<div class='talk op-msg' data-timestamp='1623865920' id='368934'>
<a class='timestamp' href='#368934'><time timestamp='2021-06-16T17:52:00Z'>17:52</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
is 22245 required for 21528 or just &quot;makes things consistent&quot;? If the latter, I would suggest just dropping/skipping it for now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1623865920' id='368935'>
<a class='timestamp' href='#368935'><time timestamp='2021-06-16T17:52:00Z'>17:52</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it seems to me it doesn&#x27;t really get in the way
<br>
</div>

<div class='talk op-msg' data-timestamp='1623866040' id='368936'>
<a class='timestamp' href='#368936'><time timestamp='2021-06-16T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think i&#x27;m leaning in that direction too; trying to write my thoughts a bit more structured on the PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1623866760' id='368937'>
<a class='timestamp' href='#368937'><time timestamp='2021-06-16T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-8'> amiti</span>&gt;
yup, not my preference but totally viable. if we&#x27;re going that route, I&#x27;d like to better understand the reasoning around treating sendaddrv2 differently, and then can update 21528 &amp; close 22245. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623867480' id='368938'>
<a class='timestamp' href='#368938'><time timestamp='2021-06-16T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-9'> hiii</span>&gt;
Hi, is this the main bitcoin dev channel?
<br>
</div>

<div class='talk op-msg' data-timestamp='1623867540' id='368939'>
<a class='timestamp' href='#368939'><time timestamp='2021-06-16T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
hiii: &quot;Bitcoin Core development discussion and commit log&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1623867960' id='368940'>
<a class='timestamp' href='#368940'><time timestamp='2021-06-16T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-9'> hiii</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1623867960' id='368941'>
<a class='timestamp' href='#368941'><time timestamp='2021-06-16T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-9'> hiii</span>&gt;
where can I ask about summerofbitcoin? sorry if this is off topic 
<br>
</div>

<div class='talk op-msg' data-timestamp='1623868020' id='368942'>
<a class='timestamp' href='#368942'><time timestamp='2021-06-16T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
hiii: #bitcoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1623868140' id='368943'>
<a class='timestamp' href='#368943'><time timestamp='2021-06-16T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-9'> hiii</span>&gt;
michaelfolkson: thank you so much, i asked here since it was a btc core developer program, apologies
<br>
</div>

<div class='talk op-msg' data-timestamp='1623869340' id='368944'>
<a class='timestamp' href='#368944'><time timestamp='2021-06-16T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-2'> zndtoshi</span>&gt;
I posted the answers (randomized order) for the devs that were kind enough to give their feedback on the Taproot update and future expectations. Thank you! <a href="https://twitter.com/zndtoshi/status/1405235804549566464?s=20" class="link" target="_blank">https://twitter.com/zndtoshi/status/1405235804549566464?s=20</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1623870780' id='368945'>
<a class='timestamp' href='#368945'><time timestamp='2021-06-16T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto reopened pull request #19882: depends: Export variables from make to environment explicitly (master...200905-build) <a href="https://github.com/bitcoin/bitcoin/pull/19882" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19882</a>
<br>
</div>

</div>
</section>

</body>
</html>
