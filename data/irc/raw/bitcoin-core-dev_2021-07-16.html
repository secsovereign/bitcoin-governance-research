<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2021-07-16
 ‚Äî 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2021-07-16' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:16 UTC</pre>
<pre><a href="/bitcoin-core-dev/2021-06-16">&lt;</a><span class='header'>    July 2021     </span><a href="/bitcoin-core-dev/2021-08-16">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;             <a class="" href="/bitcoin-core-dev/2021-07-01">1</a>  <a class="" href="/bitcoin-core-dev/2021-07-02">2</a>  <a class="" href="/bitcoin-core-dev/2021-07-03">3</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2021-07-04">4</a>  <a class="" href="/bitcoin-core-dev/2021-07-05">5</a>  <a class="" href="/bitcoin-core-dev/2021-07-06">6</a>  <a class="" href="/bitcoin-core-dev/2021-07-07">7</a>  <a class="" href="/bitcoin-core-dev/2021-07-08">8</a>  <a class="" href="/bitcoin-core-dev/2021-07-09">9</a> <a class="" href="/bitcoin-core-dev/2021-07-10">10</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2021-07-11">11</a> <a class="" href="/bitcoin-core-dev/2021-07-12">12</a> <a class="" href="/bitcoin-core-dev/2021-07-13">13</a> <a class="" href="/bitcoin-core-dev/2021-07-14">14</a> <a class="" href="/bitcoin-core-dev/2021-07-15">15</a> <a class="current" href="/bitcoin-core-dev/2021-07-16">16</a> <a class="" href="/bitcoin-core-dev/2021-07-17">17</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2021-07-18">18</a> <a class="" href="/bitcoin-core-dev/2021-07-19">19</a> <a class="" href="/bitcoin-core-dev/2021-07-20">20</a> <a class="" href="/bitcoin-core-dev/2021-07-21">21</a> <a class="" href="/bitcoin-core-dev/2021-07-22">22</a> <a class="" href="/bitcoin-core-dev/2021-07-23">23</a> <a class="" href="/bitcoin-core-dev/2021-07-24">24</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2021-07-25">25</a> <a class="" href="/bitcoin-core-dev/2021-07-26">26</a> <a class="" href="/bitcoin-core-dev/2021-07-27">27</a> <a class="" href="/bitcoin-core-dev/2021-07-28">28</a> <a class="" href="/bitcoin-core-dev/2021-07-29">29</a> <a class="" href="/bitcoin-core-dev/2021-07-30">30</a> <a class="" href="/bitcoin-core-dev/2021-07-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1626396060' id='424476'>
<a class='timestamp' href='#424476'><time timestamp='2021-07-16T00:41:00Z'>00:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake closed pull request #22463: [TESTBED][NO-MERGE] Verbosity level 3 getblock rebase (master...verbosity-level-3-getblock-rebase) <a href="https://github.com/bitcoin/bitcoin/pull/22463" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22463</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626396120' id='424477'>
<a class='timestamp' href='#424477'><time timestamp='2021-07-16T00:42:00Z'>00:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake closed pull request #22336: [TESTBED][NO-MERGE][POC] Use std::filesystem. Remove Boost Filesystem &amp; System (master...feature/use_std_filesystem_testbed) <a href="https://github.com/bitcoin/bitcoin/pull/22336" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22336</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626400200' id='424478'>
<a class='timestamp' href='#424478'><time timestamp='2021-07-16T01:50:00Z'>01:50</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] dongcarl opened pull request #22465: guix: Pin kernel-header version, time-machine to upstream 1.3.0 commit (master...2021-07-guix-kernel-old) <a href="https://github.com/bitcoin/bitcoin/pull/22465" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22465</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404520' id='424479'>
<a class='timestamp' href='#424479'><time timestamp='2021-07-16T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
robertspigler: there are a number of benefits that come with using Guix as a release build environment (or just as a build system in general).
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404520' id='424480'>
<a class='timestamp' href='#424480'><time timestamp='2021-07-16T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Using gitian, you have to pick a Linux distro to build on. This defines your toolchains, available packages, the glibc your building against etc.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404520' id='424481'>
<a class='timestamp' href='#424481'><time timestamp='2021-07-16T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
This also means you&#x27;re subject to choices of the upstream package maintainers. They control how/when package versions are updated, what patches are applied to them, how they are compiled etc. This has downsides.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404580' id='424482'>
<a class='timestamp' href='#424482'><time timestamp='2021-07-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
As an example, our security-check tests rely on a number of -no-* options being present in mingw-w64 ld. These options were patched into the ld in the Ubuntu Bionic binutils-mingw-w64 package, however, the binutils maintainer chose to stop doing that in Ubuntu Focal, which meant our security-check tests would not have been able to run (they have since decided to re-patch them in Hirsute). See #18629 for more details.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404580' id='424483'>
<a class='timestamp' href='#424483'><time timestamp='2021-07-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18629" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18629</a> | scripts: add PE .reloc section check to security-check.py by fanquake ¬∑ Pull Request #18629 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404580' id='424484'>
<a class='timestamp' href='#424484'><time timestamp='2021-07-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
In Guix, because we&#x27;re in full control of our toolchains, we don&#x27;t have to worry about issues like this, and can just directly apply the patches we want to use, and this is exactly what we&#x27;ve done in #22381, where we started patching the -no-* linker options into our mingw-w64 toolchain. Compiler / linker options or defaults that we may rely on, can no-longer be randomly changing out from underneath us.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404580' id='424485'>
<a class='timestamp' href='#424485'><time timestamp='2021-07-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22381" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22381</a> | guix: Test security-check sanity before performing them (with macOS) by fanquake ¬∑ Pull Request #22381 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404580' id='424486'>
<a class='timestamp' href='#424486'><time timestamp='2021-07-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
To that, some might say &quot;well just don&#x27;t change the Ubuntu base image, and things won&#x27;t change&quot;. To that, I&#x27;d say, I don&#x27;t want the project to be in a position where we are &quot;stuck&quot;, and can&#x27;t update our base image to use new tools (i.e compilers), because by doing so we&#x27;ll just break something else, like our security tests. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404580' id='424487'>
<a class='timestamp' href='#424487'><time timestamp='2021-07-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
It would seem smarter to just remove the potential for those kinds of problem entirely, by constructing and using exactly the release build environment we want.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404580' id='424488'>
<a class='timestamp' href='#424488'><time timestamp='2021-07-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
&quot;Well why not just patch / change things in gitian&quot; - I wont say much on this, except for, the gitian environment is not at all setup to do the same kind of patching that we can fairly trivially achieve in Guix. Trying to patch and compile, for example, the mingw-w64 toolchain in a gitian descriptor, would also just turn into a terrible mess.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404580' id='424489'>
<a class='timestamp' href='#424489'><time timestamp='2021-07-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
The same can be said about trying to gitian build anything using a glibc different than what is already available on that version of Ubuntu.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404580' id='424490'>
<a class='timestamp' href='#424490'><time timestamp='2021-07-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
This has backward-compatibility implications, as the version of glibc you&#x27;re building against, essentially determines your runtime glibc compatiblity. However this can be extended by using the sorts of &quot;workarounds&quot; that we currently have in our glibc-back-compat code.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404580' id='424491'>
<a class='timestamp' href='#424491'><time timestamp='2021-07-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Now, similar to the situation where you might want to use a newer Ubuntu release (for any number of reasons), doing so will mean that you have to build against a newer glibc (you just get whatever version comes with that release of Ubuntu).
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404580' id='424492'>
<a class='timestamp' href='#424492'><time timestamp='2021-07-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
This means that as you use newer versions of glibc, the number of &quot;workarounds&quot; you need to maintain backwards compatibility pile up, get continually more complicated, and even start to leak out of Bitcoin Core code, and into our dependency system. See all the PRs linked in this comment: <a href="https://github.com/bitcoin/bitcoin/pull/22418#issuecomment-876379846" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22418#issuecomment-876379846</a>.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404640' id='424493'>
<a class='timestamp' href='#424493'><time timestamp='2021-07-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Changes like that leaking into depends are bad, because now normals builders, using depends, are now being subject to the side-effects of patches that are only really necessary in our release build environment. Maybe you&#x27;d argue that in that case we should only apply the depends patches when building releases, however then you&#x27;ve got a situation where release builds are even more divergent from &quot;normal&quot;/developer builds, and this means 
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404640' id='424494'>
<a class='timestamp' href='#424494'><time timestamp='2021-07-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
either maintaining an even more complex CI / testing routines, or they just end up less tested (guess which one is more likely to happen).
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404640' id='424495'>
<a class='timestamp' href='#424495'><time timestamp='2021-07-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
If that all just sounds like a complicated mess, it&#x27;s basically because it is. However the solution, using Guix, is actually pretty straight forward. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404640' id='424496'>
<a class='timestamp' href='#424496'><time timestamp='2021-07-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
When we are in complete control of our release environment, we can pick exactly the version of glibc we want to use (even at a per-HOST level), something that we definitely couldn&#x27;t achieve, in any sort of straight forward fashion, if at all, using gitian.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404640' id='424497'>
<a class='timestamp' href='#424497'><time timestamp='2021-07-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
This is something we&#x27;ve done recently, in #22365. We are now building using glibc 2.27 for the RISC-V HOST, and using glibc 2.24 for all others, while maintaining runtime compatibility with glibc 2.17. You&#x27;ll note this this is achieved without needing to use any of the work arounds from our glibc-back-compat code (#22405), or any of the other PRs / changes mentioned in the comment above.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404640' id='424498'>
<a class='timestamp' href='#424498'><time timestamp='2021-07-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22365" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22365</a> | guix: Avoid relying on newer symbols by rebasing our cross toolchains on older glibcs by dongcarl ¬∑ Pull Request #22365 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404640' id='424499'>
<a class='timestamp' href='#424499'><time timestamp='2021-07-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22405" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22405</a> | build: remove --enable-glibc-back-compat from Guix build by fanquake ¬∑ Pull Request #22405 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404640' id='424500'>
<a class='timestamp' href='#424500'><time timestamp='2021-07-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
These are just two very practical benefits that using Guix provides (there are more), which ultimately all boil down to us being in much greater control of our release build environment. Something I am very happy about, and I think makes a lot of sense for a project like Bitcoin Core.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404640' id='424501'>
<a class='timestamp' href='#424501'><time timestamp='2021-07-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
The fact that there are also many people in the Guix space actively working on bootstrapability is just another big bonus, and even if that doesn&#x27;t work exactly like some may want it too right now, it is rapidly being improved, month on month.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626404640' id='424502'>
<a class='timestamp' href='#424502'><time timestamp='2021-07-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Guix is also a much more likely pathway to fully bootstrapable Bitcoin Core builds that what gitian could ever provide.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626406140' id='424503'>
<a class='timestamp' href='#424503'><time timestamp='2021-07-16T03:29:00Z'>03:29</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
üëè
<br>
</div>

<div class='talk op-msg' data-timestamp='1626409320' id='424504'>
<a class='timestamp' href='#424504'><time timestamp='2021-07-16T04:22:00Z'>04:22</time></a>
&lt;<span class='nick nick-11'> robertspigler</span>&gt;
fanquake: That&#x27;s great, thanks for the detailed explanation! I didn&#x27;t know there were benefits beyond bootstrappability. So that makes me even more confused re: why run guix in gitian?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626412080' id='424505'>
<a class='timestamp' href='#424505'><time timestamp='2021-07-16T05:08:00Z'>05:08</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
robertspigler: I don&#x27;t think we&#x27;re going to run Guix inside Gitian for the releases, but personally I think people are free to do whatever they think make sense if they&#x27;re committed to maintaining it
<br>
</div>

<div class='talk op-msg' data-timestamp='1626412140' id='424506'>
<a class='timestamp' href='#424506'><time timestamp='2021-07-16T05:09:00Z'>05:09</time></a>
&lt;<span class='nick nick-11'> robertspigler</span>&gt;
Sure, I agree with that
<br>
</div>

<div class='talk op-msg' data-timestamp='1626412140' id='424507'>
<a class='timestamp' href='#424507'><time timestamp='2021-07-16T05:09:00Z'>05:09</time></a>
&lt;<span class='nick nick-11'> robertspigler</span>&gt;
I was wondering if I was missing something, but it doesn&#x27;t seem that I am
<br>
</div>

<div class='talk op-msg' data-timestamp='1626415560' id='424508'>
<a class='timestamp' href='#424508'><time timestamp='2021-07-16T06:06:00Z'>06:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/a88fa1a55519...f8b20fd35b0e" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/a88fa1a55519...f8b20fd35b0e</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626415560' id='424509'>
<a class='timestamp' href='#424509'><time timestamp='2021-07-16T06:06:00Z'>06:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master e49d50c Jon Atack: bench: fix 32-bit narrowing warning in bench/peer_eviction.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1626415560' id='424510'>
<a class='timestamp' href='#424510'><time timestamp='2021-07-16T06:06:00Z'>06:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master f8b20fd MarcoFalke: Merge bitcoin/bitcoin#22464: bench: fix 32-bit narrowing warning in bench/...
<br>
</div>

<div class='talk op-msg' data-timestamp='1626415620' id='424511'>
<a class='timestamp' href='#424511'><time timestamp='2021-07-16T06:07:00Z'>06:07</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #22464: bench: fix 32-bit narrowing warning in bench/peer_eviction.cpp (master...fix-32bit-narrowing-warning) <a href="https://github.com/bitcoin/bitcoin/pull/22464" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22464</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626419040' id='424512'>
<a class='timestamp' href='#424512'><time timestamp='2021-07-16T07:04:00Z'>07:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
robertspigler: you don&#x27;t lose those Guix benefits by running it inside gitian; gitian just provides the isolation needed to avoid regressing on security
<br>
</div>

<div class='talk op-msg' data-timestamp='1626421380' id='424513'>
<a class='timestamp' href='#424513'><time timestamp='2021-07-16T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
MarcoFalke: do you think that the fuzzer inputs from #22450 should be collected and added to bitcoin-core/qa-assets ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626421380' id='424514'>
<a class='timestamp' href='#424514'><time timestamp='2021-07-16T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22450" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22450</a> | addrman serialize: nNew was wrong, oh ow ¬∑ Issue #22450 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626422880' id='424515'>
<a class='timestamp' href='#424515'><time timestamp='2021-07-16T08:08:00Z'>08:08</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
as not much is left for rc1, we could branch off 22.0 so that the master branch is free for merging for 23.0
<br>
</div>

<div class='talk op-msg' data-timestamp='1626427740' id='424516'>
<a class='timestamp' href='#424516'><time timestamp='2021-07-16T09:29:00Z'>09:29</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: what do you think about just removing any non-port0 I2P addresses from addrman in RemoveInvalid()? Seems a lot safer than a bunch of new code in ResetI2PPorts()
<br>
</div>

<div class='talk op-msg' data-timestamp='1626427920' id='424517'>
<a class='timestamp' href='#424517'><time timestamp='2021-07-16T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
all of them are with port 8333, so that would be the same as just removing all I2P addresses from addrman (done just once)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626427980' id='424518'>
<a class='timestamp' href='#424518'><time timestamp='2021-07-16T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
hmm, and because some peers will keep advertising themselves with port 8333, we will keep removing them
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428040' id='424519'>
<a class='timestamp' href='#424519'><time timestamp='2021-07-16T09:34:00Z'>09:34</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: actually removing from addrman was tricky, IIRC, there is no Delete() method
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428100' id='424520'>
<a class='timestamp' href='#424520'><time timestamp='2021-07-16T09:35:00Z'>09:35</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
if we are to remove them, we may as well re-add with port 0, like you suggested
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428100' id='424521'>
<a class='timestamp' href='#424521'><time timestamp='2021-07-16T09:35:00Z'>09:35</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
doesn&#x27;t RemoveInvalid() delete entries?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428220' id='424522'>
<a class='timestamp' href='#424522'><time timestamp='2021-07-16T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
yes, and it does the same as ResetI2PPorts() - fiddle with addrman internals
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428220' id='424523'>
<a class='timestamp' href='#424523'><time timestamp='2021-07-16T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
One thought. This change was fairly well-tested over a period of time; 3 people ran it for several days each (in my case, with a number of added asserts and with -DDEBUG_ADDRMAN).  A re-do might see less testing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428280' id='424524'>
<a class='timestamp' href='#424524'><time timestamp='2021-07-16T09:38:00Z'>09:38</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
that&#x27;s true
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428280' id='424525'>
<a class='timestamp' href='#424525'><time timestamp='2021-07-16T09:38:00Z'>09:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery closed pull request #18685: consensus: Simplify ConnectTrace (master...2020-04-connecttrace-simplify) <a href="https://github.com/bitcoin/bitcoin/pull/18685" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18685</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428340' id='424526'>
<a class='timestamp' href='#424526'><time timestamp='2021-07-16T09:39:00Z'>09:39</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
(I ran it cumulatively for a couple of weeks that way.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428340' id='424527'>
<a class='timestamp' href='#424527'><time timestamp='2021-07-16T09:39:00Z'>09:39</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
With a bunch of restarts and other tests.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428400' id='424528'>
<a class='timestamp' href='#424528'><time timestamp='2021-07-16T09:40:00Z'>09:40</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
Notice that the problem reported in #22450 OP/description is not related to RemoveInvalid() or ResetI2PPorts() (IMO, jnewbery may disagree)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428400' id='424529'>
<a class='timestamp' href='#424529'><time timestamp='2021-07-16T09:40:00Z'>09:40</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22450" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22450</a> | addrman serialize: nNew was wrong, oh ow ¬∑ Issue #22450 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428400' id='424530'>
<a class='timestamp' href='#424530'><time timestamp='2021-07-16T09:40:00Z'>09:40</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
I am now looking at <a href="https://github.com/bitcoin/bitcoin/issues/22450#issuecomment-880629375" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22450#issuecomment-880629375</a> which is a different issue, not sure yet where is the problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428460' id='424531'>
<a class='timestamp' href='#424531'><time timestamp='2021-07-16T09:41:00Z'>09:41</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: do you disagree that <a href="https://github.com/bitcoin/bitcoin/issues/22450#issuecomment-880602891" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22450#issuecomment-880602891</a> can cause corruption?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626428640' id='424532'>
<a class='timestamp' href='#424532'><time timestamp='2021-07-16T09:44:00Z'>09:44</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: <a href="https://github.com/bitcoin/bitcoin/issues/22450#issuecomment-880602891" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22450#issuecomment-880602891</a> is a 3rd issue, I have not confirmed it yet, but read the comment: yes, it looks like it can cause a corruption, but again that is a 3rd distinct problem. I suspect it may be resolved by just removing &quot;addr_info.GetPort() == I2P_SAM31_PORT&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1626432000' id='424533'>
<a class='timestamp' href='#424533'><time timestamp='2021-07-16T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] vasild opened pull request #22468: addrman: don&#x27;t overwrite addr_info when resetting I2P ports (master...reset_i2p_ports_no_overwrite_pos) <a href="https://github.com/bitcoin/bitcoin/pull/22468" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22468</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626433500' id='424534'>
<a class='timestamp' href='#424534'><time timestamp='2021-07-16T11:05:00Z'>11:05</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
&gt; [09:43] &lt;vasild&gt; MarcoFalke: do you think that the fuzzer inputs from #22450 should be collected and added to bitcoin-core/qa-assets ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626433500' id='424535'>
<a class='timestamp' href='#424535'><time timestamp='2021-07-16T11:05:00Z'>11:05</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22450" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22450</a> | addrman serialize: nNew was wrong, oh ow ¬∑ Issue #22450 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626433500' id='424536'>
<a class='timestamp' href='#424536'><time timestamp='2021-07-16T11:05:00Z'>11:05</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Yes, but only after the bugfixes are in. Otherwise we have red CI
<br>
</div>

<div class='talk op-msg' data-timestamp='1626435300' id='424537'>
<a class='timestamp' href='#424537'><time timestamp='2021-07-16T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1626436680' id='424538'>
<a class='timestamp' href='#424538'><time timestamp='2021-07-16T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: I said &quot;there is no Delete() method&quot;, actually there is, but it only deletes entries from &quot;new&quot; which have 0 references.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626437280' id='424539'>
<a class='timestamp' href='#424539'><time timestamp='2021-07-16T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto opened pull request #22469: build: Add support for Android NDK r22+ (master...210716-ndk) <a href="https://github.com/bitcoin/bitcoin/pull/22469" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22469</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626438060' id='424540'>
<a class='timestamp' href='#424540'><time timestamp='2021-07-16T12:21:00Z'>12:21</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: I think the entire approach in ResetI2PPorts() is scary. Even if you fix these corruption issues, how do you know there aren&#x27;t more?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626438960' id='424541'>
<a class='timestamp' href='#424541'><time timestamp='2021-07-16T12:36:00Z'>12:36</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: I can&#x27;t be sure there aren&#x27;t more bugs. But that is also true for any software.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626439140' id='424542'>
<a class='timestamp' href='#424542'><time timestamp='2021-07-16T12:39:00Z'>12:39</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
Do you think RemoveInvalid() is ok (not scary)? It is very similar to ResetI2PPorts() in the way they iterate over the buckets and do something to relevant entries
<br>
</div>

<div class='talk op-msg' data-timestamp='1626439860' id='424543'>
<a class='timestamp' href='#424543'><time timestamp='2021-07-16T12:51:00Z'>12:51</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
RemoveInvalid() seems better to me in that it&#x27;s doing less to the internal data structures. I&#x27;d like it even more if Delete() was extended to support deleting tried entries, so there&#x27;s less code duplication. It also got more review before being merged, which gives me some more confidence.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626440160' id='424544'>
<a class='timestamp' href='#424544'><time timestamp='2021-07-16T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
&quot;I&#x27;d like it even more if Delete() was extended...&quot; me too! It need to be extended not only to delete tried entries but also new ones that have reference&gt;0
<br>
</div>

<div class='talk op-msg' data-timestamp='1626440220' id='424545'>
<a class='timestamp' href='#424545'><time timestamp='2021-07-16T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
the current one should be called something like DeleteNewWithRef0OrIWillAssert()
<br>
</div>

<div class='talk op-msg' data-timestamp='1626441180' id='424546'>
<a class='timestamp' href='#424546'><time timestamp='2021-07-16T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
yup, I called for more people to review in <a href="https://github.com/bitcoin/bitcoin/pull/22112#pullrequestreview-699042238" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22112#pullrequestreview-699042238</a>, one can&#x27;t be a review army by oneself but there are indeed few regular p2p contributors who look at work on privacy networks
<br>
</div>

<div class='talk op-msg' data-timestamp='1626441540' id='424547'>
<a class='timestamp' href='#424547'><time timestamp='2021-07-16T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
at any rate I continue to run and test the changes with Check_() e.g. DEBUG_ADDRMAN and some sanity check asserts added and will look at #22468.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626441540' id='424548'>
<a class='timestamp' href='#424548'><time timestamp='2021-07-16T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22468" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22468</a> | addrman: dont overwrite addr_info when resetting I2P ports by vasild ¬∑ Pull Request #22468 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626446700' id='424549'>
<a class='timestamp' href='#424549'><time timestamp='2021-07-16T14:45:00Z'>14:45</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jonatack: thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1626449700' id='424550'>
<a class='timestamp' href='#424550'><time timestamp='2021-07-16T15:35:00Z'>15:35</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
sipa_: <a href="https://github.com/bitcoin/bitcoin/pull/22455#issuecomment-881525272" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22455#issuecomment-881525272</a> -- that is a good question but I think you posted it in the wrong PR, that PR is not related to I2P at all. Maybe you intended to post to #22468 instead?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626449700' id='424551'>
<a class='timestamp' href='#424551'><time timestamp='2021-07-16T15:35:00Z'>15:35</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22468" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22468</a> | addrman: dont overwrite addr_info when resetting I2P ports by vasild ¬∑ Pull Request #22468 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626449880' id='424552'>
<a class='timestamp' href='#424552'><time timestamp='2021-07-16T15:38:00Z'>15:38</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
sipa_: if we revert that part (which changes ports in addrman from 8333 to 0) then we would break the existent i2p network in a subtle way: all i2p addresses in addrman are with port 8333 and we would refuse to connect to any of them. Then those peers run the new code and start advertising themselves with port=0 however when that gossip reaches a node that already has the address but with port 
<br>
</div>

<div class='talk op-msg' data-timestamp='1626449940' id='424553'>
<a class='timestamp' href='#424553'><time timestamp='2021-07-16T15:39:00Z'>15:39</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
8333, that node will ignore the incoming entry with port=0 and keep the old one with port 8333 (to which it refuses to connect)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450000' id='424554'>
<a class='timestamp' href='#424554'><time timestamp='2021-07-16T15:40:00Z'>15:40</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
the only solution (I see) would be for everybody to re-generate a new i2p address
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450180' id='424555'>
<a class='timestamp' href='#424555'><time timestamp='2021-07-16T15:43:00Z'>15:43</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
vasild: but i2p support is only on master, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450240' id='424556'>
<a class='timestamp' href='#424556'><time timestamp='2021-07-16T15:44:00Z'>15:44</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
It <u>_should_</u> be possible to properly change the ports from 8333 to 0 in addrman.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450240' id='424557'>
<a class='timestamp' href='#424557'><time timestamp='2021-07-16T15:44:00Z'>15:44</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
sipa_: yes, it is not in any previous releases, but there are already a bunch of nodes and in seeds.txt, so the i2p bitcoin network exists
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450240' id='424558'>
<a class='timestamp' href='#424558'><time timestamp='2021-07-16T15:44:00Z'>15:44</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
sure, but it&#x27;s just people running master
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450300' id='424559'>
<a class='timestamp' href='#424559'><time timestamp='2021-07-16T15:45:00Z'>15:45</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
correct
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450300' id='424560'>
<a class='timestamp' href='#424560'><time timestamp='2021-07-16T15:45:00Z'>15:45</time></a>
&lt;<span class='nick nick-1'> sipa_</span>&gt;
we can include a snippet in the release notes
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450300' id='424561'>
<a class='timestamp' href='#424561'><time timestamp='2021-07-16T15:45:00Z'>15:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i agree it ought to be possible to hotfix it directly in addrman, but i&#x27;m concerned about the fact that inconsistencies have been introduced already
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450420' id='424562'>
<a class='timestamp' href='#424562'><time timestamp='2021-07-16T15:47:00Z'>15:47</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
sipa: you mean that there are already bugs in that code or that some nodes already run with inconsistent addrmans?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450480' id='424563'>
<a class='timestamp' href='#424563'><time timestamp='2021-07-16T15:48:00Z'>15:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m wary about touching addrman more, as it has already been shown it&#x27;s easy to corrupt
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450540' id='424564'>
<a class='timestamp' href='#424564'><time timestamp='2021-07-16T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
though i&#x27;ll have a deeper look at the issue and the proposed fixes too
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450660' id='424565'>
<a class='timestamp' href='#424565'><time timestamp='2021-07-16T15:51:00Z'>15:51</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
there are 3 issues reported in #22450 (sorry, that&#x27;s messy): 1. the description/OP, fixed in #22455 (not relevant to I2P)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450660' id='424566'>
<a class='timestamp' href='#424566'><time timestamp='2021-07-16T15:51:00Z'>15:51</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22450" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22450</a> | addrman serialize: nNew was wrong, oh ow ¬∑ Issue #22450 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450660' id='424567'>
<a class='timestamp' href='#424567'><time timestamp='2021-07-16T15:51:00Z'>15:51</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22455" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22455</a> | addrman: detect on-disk corrupted nNew and nTried during unserialization by vasild ¬∑ Pull Request #22455 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450720' id='424568'>
<a class='timestamp' href='#424568'><time timestamp='2021-07-16T15:52:00Z'>15:52</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
2. <a href="https://github.com/bitcoin/bitcoin/issues/22450#issuecomment-880629375" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22450#issuecomment-880629375</a> which I also reported separately in #22467, fixed in #22468
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450720' id='424569'>
<a class='timestamp' href='#424569'><time timestamp='2021-07-16T15:52:00Z'>15:52</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22467" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22467</a> | Assertion `nRndPos1 &lt; vRandom.size() &amp;&amp; nRndPos2 &lt; vRandom.size() failed ¬∑ Issue #22467 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450720' id='424570'>
<a class='timestamp' href='#424570'><time timestamp='2021-07-16T15:52:00Z'>15:52</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22468" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22468</a> | addrman: dont overwrite addr_info when resetting I2P ports by vasild ¬∑ Pull Request #22468 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626450780' id='424571'>
<a class='timestamp' href='#424571'><time timestamp='2021-07-16T15:53:00Z'>15:53</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
3. <a href="https://github.com/bitcoin/bitcoin/issues/22450#issuecomment-880602891" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22450#issuecomment-880602891</a> - I am working on it now, will also report it separately and open PR with a fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1626451140' id='424572'>
<a class='timestamp' href='#424572'><time timestamp='2021-07-16T15:59:00Z'>15:59</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
A general note about feeding fuzzed input to addrman unserialize: it could result in some unexpected state, like negative nNew coming from disk or duplicate entries which are not allowed during normal operation. Surely it should not crash when unserialized from a random input, as a disk corruption could lead to that too.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626451260' id='424573'>
<a class='timestamp' href='#424573'><time timestamp='2021-07-16T16:01:00Z'>16:01</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
=&gt; I think there is a good chance fuzzing addrman unserialize will find more bugs
<br>
</div>

<div class='talk op-msg' data-timestamp='1626451440' id='424574'>
<a class='timestamp' href='#424574'><time timestamp='2021-07-16T16:04:00Z'>16:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
definitely
<br>
</div>

<div class='talk op-msg' data-timestamp='1626452940' id='424575'>
<a class='timestamp' href='#424575'><time timestamp='2021-07-16T16:29:00Z'>16:29</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] vasild opened pull request #22471: addrman: reset I2P ports in all &quot;new&quot; buckets (master...reset_all_new_i2p_ports) <a href="https://github.com/bitcoin/bitcoin/pull/22471" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22471</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626453000' id='424576'>
<a class='timestamp' href='#424576'><time timestamp='2021-07-16T16:30:00Z'>16:30</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] agroce opened pull request #22472: fuzz: Add environment option to keep /tmp/ clean (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/22472" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22472</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626453060' id='424577'>
<a class='timestamp' href='#424577'><time timestamp='2021-07-16T16:31:00Z'>16:31</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
Reported 3. separately as #22470 with a fix in #22471
<br>
</div>

<div class='talk op-msg' data-timestamp='1626453060' id='424578'>
<a class='timestamp' href='#424578'><time timestamp='2021-07-16T16:31:00Z'>16:31</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22470" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22470</a> | Changing I2P ports in addrman may wronly skip some entries from &quot;new&quot; buckets ¬∑ Issue #22470 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626453060' id='424579'>
<a class='timestamp' href='#424579'><time timestamp='2021-07-16T16:31:00Z'>16:31</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22471" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22471</a> | addrman: reset I2P ports in all &quot;new&quot; buckets by vasild ¬∑ Pull Request #22471 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626454080' id='424580'>
<a class='timestamp' href='#424580'><time timestamp='2021-07-16T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-7'> jnewbery_</span>&gt;
vasild: I&#x27;ll repeat that I think it&#x27;s much safer to just delete these entries on startup using the existing RemoveInvalid() code. There are at least two addrman corruption bugs introduced by the ResetI2PPorts() code in #22112. What level of confidence do you have that there aren&#x27;t more?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626454080' id='424581'>
<a class='timestamp' href='#424581'><time timestamp='2021-07-16T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22112" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22112</a> | Force port 0 in I2P by vasild ¬∑ Pull Request #22112 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626454320' id='424582'>
<a class='timestamp' href='#424582'><time timestamp='2021-07-16T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jnewbery: now that we have a fix for everything, I will also look into that suggestion as an alternative fix for #22467 and #22470. But I don&#x27;t have high hopes as I tried that and it was not simpler. So, &quot;just delete&quot; will expand to similar number of lines as now in ResetI2PPorts().
<br>
</div>

<div class='talk op-msg' data-timestamp='1626454320' id='424583'>
<a class='timestamp' href='#424583'><time timestamp='2021-07-16T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22467" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22467</a> | Assertion `nRndPos1 &lt; vRandom.size() &amp;&amp; nRndPos2 &lt; vRandom.size() failed ¬∑ Issue #22467 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626454320' id='424584'>
<a class='timestamp' href='#424584'><time timestamp='2021-07-16T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22470" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22470</a> | Changing I2P ports in addrman may wronly skip some entries from &quot;new&quot; buckets ¬∑ Issue #22470 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626454440' id='424585'>
<a class='timestamp' href='#424585'><time timestamp='2021-07-16T16:54:00Z'>16:54</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
notice also that RemoveInvalid() was also added recently, so it is not &quot;sure&quot; that it is safe either, e.g. it is not like it has been running for 5 years
<br>
</div>

<div class='talk op-msg' data-timestamp='1626454560' id='424586'>
<a class='timestamp' href='#424586'><time timestamp='2021-07-16T16:56:00Z'>16:56</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
But I will look into that anyway, it is good to compare different solutions and pick the &quot;better&quot; one
<br>
</div>

<div class='talk op-msg' data-timestamp='1626459360' id='424587'>
<a class='timestamp' href='#424587'><time timestamp='2021-07-16T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
:q
<br>
</div>

<div class='talk op-msg' data-timestamp='1626459360' id='424588'>
<a class='timestamp' href='#424588'><time timestamp='2021-07-16T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
:q!
<br>
</div>

<div class='talk op-msg' data-timestamp='1626459720' id='424589'>
<a class='timestamp' href='#424589'><time timestamp='2021-07-16T18:22:00Z'>18:22</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
To the point of Guix continually making progress on bootatrapping, live-bootstrap maintainer mentioned yesterday that: live-bootstrap can build all of the guix bootstrap binaries on i386 (including static guile) so we have an option of replacing bootstrap binaries with built in live-bootstrap.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626459780' id='424590'>
<a class='timestamp' href='#424590'><time timestamp='2021-07-16T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
Here‚Äôs live-bootstrap: <a href="https://github.com/fosslinux/live-bootstrap" class="link" target="_blank">https://github.com/fosslinux/live-bootstrap</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626459840' id='424591'>
<a class='timestamp' href='#424591'><time timestamp='2021-07-16T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
We shall see if it can link up and be used to further minimize the bootstrap chain
<br>
</div>

<div class='talk op-msg' data-timestamp='1626460740' id='424592'>
<a class='timestamp' href='#424592'><time timestamp='2021-07-16T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-7'> roconnor</span>&gt;
dongcarl: what is guix time-machine?  The man page is useless in typical GNU fashion.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626460980' id='424593'>
<a class='timestamp' href='#424593'><time timestamp='2021-07-16T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
If all (most?) nodes are already running master + #22112 (merged 3 days on on Jul 13)... that would mean I2P peers now advertise themselves with port 0 and ports have been changed in people&#x27;s addrmans. If that is the case, then ResetI2PPorts() has achieved its purpose and can be removed. &lt;-- jonatack, sipa, jnewbery, laanwj 
<br>
</div>

<div class='talk op-msg' data-timestamp='1626460980' id='424594'>
<a class='timestamp' href='#424594'><time timestamp='2021-07-16T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22112" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22112</a> | Force port 0 in I2P by vasild ¬∑ Pull Request #22112 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626461040' id='424595'>
<a class='timestamp' href='#424595'><time timestamp='2021-07-16T18:44:00Z'>18:44</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
I will add some monitoring to my node to see if I still receive gossip of i2p:8333
<br>
</div>

<div class='talk op-msg' data-timestamp='1626461040' id='424596'>
<a class='timestamp' href='#424596'><time timestamp='2021-07-16T18:44:00Z'>18:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
vasild: that would be useful to know
<br>
</div>

<div class='talk op-msg' data-timestamp='1626461160' id='424597'>
<a class='timestamp' href='#424597'><time timestamp='2021-07-16T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-10'> * vasild</span>&gt;
zZzZ...
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462000' id='424598'>
<a class='timestamp' href='#424598'><time timestamp='2021-07-16T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Anyone around for a wallet meeting?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462000' id='424599'>
<a class='timestamp' href='#424599'><time timestamp='2021-07-16T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
me
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462000' id='424600'>
<a class='timestamp' href='#424600'><time timestamp='2021-07-16T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Me too
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462000' id='424601'>
<a class='timestamp' href='#424601'><time timestamp='2021-07-16T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-7'> gene</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462000' id='424602'>
<a class='timestamp' href='#424602'><time timestamp='2021-07-16T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
#startmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462000' id='424603'>
<a class='timestamp' href='#424603'><time timestamp='2021-07-16T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
Meeting started Fri Jul 16 19:00:56 2021 UTC.  The chair is meshcollider. Information about MeetBot at <a href="https://bitcoin.jonasschnelli.ch/ircmeetings" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/ircmeetings</a>.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462000' id='424604'>
<a class='timestamp' href='#424604'><time timestamp='2021-07-16T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
Available commands: action commands idea info link nick
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462060' id='424605'>
<a class='timestamp' href='#424605'><time timestamp='2021-07-16T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
#bitcoin-core-dev Wallet Meeting: achow101 aj amiti ariard bluematt cfields Chris_Stewart_5 digi_james dongcarl elichai2 emilengler fanquake fjahr gleb glozow gmaxwell gwillen hebasto instagibbs jamesob jb55 jeremyrubin jl2012 jnewbery jonasschnelli jonatack jtimon kallewoof kanzure kvaciral lightlike luke-jr maaku marcofalke meshcollider michagogo moneyball morcos nehan NicolasDorier paveljanik petertodd phantomcircuit promag 
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462060' id='424606'>
<a class='timestamp' href='#424606'><time timestamp='2021-07-16T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
provoostenator ryanofsky sdaftuar sipa vasild wumpus
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462060' id='424607'>
<a class='timestamp' href='#424607'><time timestamp='2021-07-16T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462060' id='424608'>
<a class='timestamp' href='#424608'><time timestamp='2021-07-16T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
jnewbery: have you (a) been testing I2P on master, and (b) found cases of addrman corruption?  IIUC the ossfuzzer is naturally turning up cases we didn&#x27;t know about before. ISTM that is to be expected.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462060' id='424609'>
<a class='timestamp' href='#424609'><time timestamp='2021-07-16T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-8'> fjahr</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462060' id='424610'>
<a class='timestamp' href='#424610'><time timestamp='2021-07-16T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462060' id='424611'>
<a class='timestamp' href='#424611'><time timestamp='2021-07-16T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
hi :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462060' id='424612'>
<a class='timestamp' href='#424612'><time timestamp='2021-07-16T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462120' id='424613'>
<a class='timestamp' href='#424613'><time timestamp='2021-07-16T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
I have some general Taproot roadmap questions if there&#x27;s nothing on the agenda
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462120' id='424614'>
<a class='timestamp' href='#424614'><time timestamp='2021-07-16T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> kvaciral[m]</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462120' id='424615'>
<a class='timestamp' href='#424615'><time timestamp='2021-07-16T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
No more urgent wallet things found that need to go into 0.22 right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462120' id='424616'>
<a class='timestamp' href='#424616'><time timestamp='2021-07-16T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
22*
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462120' id='424617'>
<a class='timestamp' href='#424617'><time timestamp='2021-07-16T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462120' id='424618'>
<a class='timestamp' href='#424618'><time timestamp='2021-07-16T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
#22461 is the only wallet pr marked for 22.0
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462180' id='424619'>
<a class='timestamp' href='#424619'><time timestamp='2021-07-16T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22461" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22461</a> | wallet: Change ScriptPubKeyMan::Upgrade default to True by achow101 ¬∑ Pull Request #22461 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462180' id='424620'>
<a class='timestamp' href='#424620'><time timestamp='2021-07-16T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hi
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462240' id='424621'>
<a class='timestamp' href='#424621'><time timestamp='2021-07-16T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
#topic general taproot roadmap questions (michaelfolkson)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462240' id='424622'>
<a class='timestamp' href='#424622'><time timestamp='2021-07-16T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
topic: general taproot roadmap questions (michaelfolkson)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462300' id='424623'>
<a class='timestamp' href='#424623'><time timestamp='2021-07-16T19:05:00Z'>19:05</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
So perhaps starting with PSBT (and apologies if my understanding of PSBT has holes)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462360' id='424624'>
<a class='timestamp' href='#424624'><time timestamp='2021-07-16T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
There are proposed taproot fields for psbt PR&#x27;d to the bips repo: <a href="https://github.com/bitcoin/bips/pull/1139" class="link" target="_blank">https://github.com/bitcoin/bips/pull/1139</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462360' id='424625'>
<a class='timestamp' href='#424625'><time timestamp='2021-07-16T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
PSBT won&#x27;t be supporting with MuSig. But to support Taproot multisig (CHECKSIGADD not MuSig) does this get included in PSBT spec?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462360' id='424626'>
<a class='timestamp' href='#424626'><time timestamp='2021-07-16T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
anything script based is supported by psbt
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462420' id='424627'>
<a class='timestamp' href='#424627'><time timestamp='2021-07-16T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
PSBT doesn&#x27;t need support for individual script types; that&#x27;s up to individual singer implementations
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462420' id='424628'>
<a class='timestamp' href='#424628'><time timestamp='2021-07-16T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
taproot support in general needs extensions (already proposed), and MuSig will need its own ones
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462420' id='424629'>
<a class='timestamp' href='#424629'><time timestamp='2021-07-16T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but scripts don&#x27;t need anything
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462420' id='424630'>
<a class='timestamp' href='#424630'><time timestamp='2021-07-16T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*signer, not singer
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462480' id='424631'>
<a class='timestamp' href='#424631'><time timestamp='2021-07-16T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
I guess I&#x27;m trying to unravel what is specs and what is the Core wallet. &quot;Anything script based&quot; but the Core wallet doesn&#x27;t support Taproot scripts
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462480' id='424632'>
<a class='timestamp' href='#424632'><time timestamp='2021-07-16T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the psbt fields have fields for the leaft scripts
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462480' id='424633'>
<a class='timestamp' href='#424633'><time timestamp='2021-07-16T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as i said, that&#x27;s up to the individual signer
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462480' id='424634'>
<a class='timestamp' href='#424634'><time timestamp='2021-07-16T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
leaf scripts can be anything
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462480' id='424635'>
<a class='timestamp' href='#424635'><time timestamp='2021-07-16T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
clearly you can&#x27;t expect every signer to support every script
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462480' id='424636'>
<a class='timestamp' href='#424636'><time timestamp='2021-07-16T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it&#x27;s up to the implementations to figure out what those scripts are doing, and what to do with them
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462480' id='424637'>
<a class='timestamp' href='#424637'><time timestamp='2021-07-16T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Ok I think I understand, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462540' id='424638'>
<a class='timestamp' href='#424638'><time timestamp='2021-07-16T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
The PSBT part isn&#x27;t doing much
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462540' id='424639'>
<a class='timestamp' href='#424639'><time timestamp='2021-07-16T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s just an interchange format
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462540' id='424640'>
<a class='timestamp' href='#424640'><time timestamp='2021-07-16T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-7'> gene</span>&gt;
do PSBT implementations need to validate scripts?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462540' id='424641'>
<a class='timestamp' href='#424641'><time timestamp='2021-07-16T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and the Bitcoin Core wallet does support taproot scripts by the way, just only very limited ones (effectively just &quot;&lt;pubkey&gt; OP_CHECKSIG&quot;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462600' id='424642'>
<a class='timestamp' href='#424642'><time timestamp='2021-07-16T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gene: PSBT implementation don&#x27;t have to do anything with scripts. whether they should or should not depends on their role
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462600' id='424643'>
<a class='timestamp' href='#424643'><time timestamp='2021-07-16T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
signers may want to check any number of properties of what they&#x27;re signing before deciding that signing is right
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462600' id='424644'>
<a class='timestamp' href='#424644'><time timestamp='2021-07-16T19:10:00Z'>19:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but what that is, is up to them
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462660' id='424645'>
<a class='timestamp' href='#424645'><time timestamp='2021-07-16T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
PSBT just makes sure that data can be made available to them
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462660' id='424646'>
<a class='timestamp' href='#424646'><time timestamp='2021-07-16T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-7'> gene</span>&gt;
achow101: so the PSBT impl can just treat scripts as opaque blobs, and then what&#x27;s on the other side (e.g. a HW wallet) decides what to do with script?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462660' id='424647'>
<a class='timestamp' href='#424647'><time timestamp='2021-07-16T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
gene: yes, although both sides would be PSBT implementations, just different roles
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462720' id='424648'>
<a class='timestamp' href='#424648'><time timestamp='2021-07-16T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-7'> gene</span>&gt;
+1
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462720' id='424649'>
<a class='timestamp' href='#424649'><time timestamp='2021-07-16T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s a bit ambiguous what you call &quot;PSBT impl&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462720' id='424650'>
<a class='timestamp' href='#424650'><time timestamp='2021-07-16T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you&#x27;re just referring to the serializer/deserializer, yes, definitely
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462720' id='424651'>
<a class='timestamp' href='#424651'><time timestamp='2021-07-16T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but you probably mean &quot;any software that interacts with PSBT&quot;, and they may or may not want to implement various checks, depending on their role and what things they support
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462720' id='424652'>
<a class='timestamp' href='#424652'><time timestamp='2021-07-16T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-7'> gene</span>&gt;
yeah, the software/firmware that handles PSBT serialization
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462780' id='424653'>
<a class='timestamp' href='#424653'><time timestamp='2021-07-16T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-7'> gene</span>&gt;
ok, that makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462780' id='424654'>
<a class='timestamp' href='#424654'><time timestamp='2021-07-16T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
most hardware wallets don&#x27;t actually handle PSBT directly - they have a software driver that converts between PSBT and the HW API calls
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462780' id='424655'>
<a class='timestamp' href='#424655'><time timestamp='2021-07-16T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Ok I will reread PSBT BIP with that understanding. That helps, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462780' id='424656'>
<a class='timestamp' href='#424656'><time timestamp='2021-07-16T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
in terms of Core supporting more complicated taproot scripts, I think that will depend on miniscript (and more generally, descriptors)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462840' id='424657'>
<a class='timestamp' href='#424657'><time timestamp='2021-07-16T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Right, and I read this from sipa which was very informative too <a href="https://github.com/sipa/miniscript/issues/56#issuecomment-876603384" class="link" target="_blank">https://github.com/sipa/miniscript/issues/56#issuecomment-876603384</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462900' id='424658'>
<a class='timestamp' href='#424658'><time timestamp='2021-07-16T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
I was surprised that he thinks it is likely Miniscript gets merged into Core without supporting Taproot but I (kinda) understand the argument
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462960' id='424659'>
<a class='timestamp' href='#424659'><time timestamp='2021-07-16T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the goal is obviously to extend it at some point to support taproot
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462960' id='424660'>
<a class='timestamp' href='#424660'><time timestamp='2021-07-16T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i don&#x27;t think it&#x27;s worth doing more spec work if the implementation isn&#x27;t making progress
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462960' id='424661'>
<a class='timestamp' href='#424661'><time timestamp='2021-07-16T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
To summarize the Taproot Miniscript syntax is easy to design but this will likely be supported by rust-miniscript before the C++ implementation
<br>
</div>

<div class='talk op-msg' data-timestamp='1626462960' id='424662'>
<a class='timestamp' href='#424662'><time timestamp='2021-07-16T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it depends what people work on
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463020' id='424663'>
<a class='timestamp' href='#424663'><time timestamp='2021-07-16T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t know if anyone working on rust-miniscript is working on this either, but they may be in a better position to start doing so
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463020' id='424664'>
<a class='timestamp' href='#424664'><time timestamp='2021-07-16T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
&quot;implementation isn&#x27;t making progress&quot; &lt;- you mean the C++ implementation of Miniscript here right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463020' id='424665'>
<a class='timestamp' href='#424665'><time timestamp='2021-07-16T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463020' id='424666'>
<a class='timestamp' href='#424666'><time timestamp='2021-07-16T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
But there is this stepping stone between just supporting single key Taproot spends and Miniscript generic scripts
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463020' id='424667'>
<a class='timestamp' href='#424667'><time timestamp='2021-07-16T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
I think we should definitely prioritise it after 22 is done
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463080' id='424668'>
<a class='timestamp' href='#424668'><time timestamp='2021-07-16T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Descriptor scripts could be supported without Miniscript
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463080' id='424669'>
<a class='timestamp' href='#424669'><time timestamp='2021-07-16T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
they are
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463080' id='424670'>
<a class='timestamp' href='#424670'><time timestamp='2021-07-16T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
they&#x27;re just very minimal right now
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463080' id='424671'>
<a class='timestamp' href='#424671'><time timestamp='2021-07-16T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
 we can add support for OP_CHECKSIGADD based scripts to descriptors and signing logic for them
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463080' id='424672'>
<a class='timestamp' href='#424672'><time timestamp='2021-07-16T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Taproot descriptor scripts beyond just Taproot single pubkey spends I mean
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463080' id='424673'>
<a class='timestamp' href='#424673'><time timestamp='2021-07-16T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
outside of miniscript
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463080' id='424674'>
<a class='timestamp' href='#424674'><time timestamp='2021-07-16T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
michaelfolkson: again <b>**they are**</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463140' id='424675'>
<a class='timestamp' href='#424675'><time timestamp='2021-07-16T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
read the spec
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463140' id='424676'>
<a class='timestamp' href='#424676'><time timestamp='2021-07-16T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
I&#x27;m speaking from Core wallet perspective here
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463140' id='424677'>
<a class='timestamp' href='#424677'><time timestamp='2021-07-16T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just only &lt;pubkey&gt; OP_CHECKSIG ones
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463140' id='424678'>
<a class='timestamp' href='#424678'><time timestamp='2021-07-16T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we&#x27;re not restricted to inner key only taproot
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463140' id='424679'>
<a class='timestamp' href='#424679'><time timestamp='2021-07-16T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
So I think my statement is correct. Have to be clearer on when taking about the Core wallet and when talking about specs
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463140' id='424680'>
<a class='timestamp' href='#424680'><time timestamp='2021-07-16T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you can construct 1-of-n using what is supported today, for example
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463200' id='424681'>
<a class='timestamp' href='#424681'><time timestamp='2021-07-16T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m only talking about core as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463260' id='424682'>
<a class='timestamp' href='#424682'><time timestamp='2021-07-16T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Hmm ok, that is new information to me. I thought it was just 1-of-1 for key path and multiple script paths
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463260' id='424683'>
<a class='timestamp' href='#424683'><time timestamp='2021-07-16T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
With 1-of-1 in each leaf
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463260' id='424684'>
<a class='timestamp' href='#424684'><time timestamp='2021-07-16T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, exactly
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463260' id='424685'>
<a class='timestamp' href='#424685'><time timestamp='2021-07-16T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s 1-of-n
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463260' id='424686'>
<a class='timestamp' href='#424686'><time timestamp='2021-07-16T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
michaelfolkson: each leaf is &quot;1-of-1&quot;, but you can have as many leaves as you want
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463320' id='424687'>
<a class='timestamp' href='#424687'><time timestamp='2021-07-16T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Right, I knew that
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463380' id='424688'>
<a class='timestamp' href='#424688'><time timestamp='2021-07-16T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
But not 2-of-3 or m-of-n
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463380' id='424689'>
<a class='timestamp' href='#424689'><time timestamp='2021-07-16T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
m&gt;1
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463380' id='424690'>
<a class='timestamp' href='#424690'><time timestamp='2021-07-16T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
No, there&#x27;s no support for threshold 
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463380' id='424691'>
<a class='timestamp' href='#424691'><time timestamp='2021-07-16T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
That needs CHECKSIGADD or MuSig
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463380' id='424692'>
<a class='timestamp' href='#424692'><time timestamp='2021-07-16T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or FROST, or other native threshold scheme
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463380' id='424693'>
<a class='timestamp' href='#424693'><time timestamp='2021-07-16T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Right
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463440' id='424694'>
<a class='timestamp' href='#424694'><time timestamp='2021-07-16T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
But we can do thresholds without Miniscript
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463440' id='424695'>
<a class='timestamp' href='#424695'><time timestamp='2021-07-16T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
So that is probably next step
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463440' id='424696'>
<a class='timestamp' href='#424696'><time timestamp='2021-07-16T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
(for the wallet)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463500' id='424697'>
<a class='timestamp' href='#424697'><time timestamp='2021-07-16T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Doing as much as possible without needing generic scripts that would need Miniscript
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463500' id='424698'>
<a class='timestamp' href='#424698'><time timestamp='2021-07-16T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Why? Why not just focus on getting miniscript in and then go from there?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463560' id='424699'>
<a class='timestamp' href='#424699'><time timestamp='2021-07-16T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I would actually prefer to add miniscript so that we don&#x27;t have any incompatibilities and stop special casing things like multisig
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463560' id='424700'>
<a class='timestamp' href='#424700'><time timestamp='2021-07-16T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Exactly ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463620' id='424701'>
<a class='timestamp' href='#424701'><time timestamp='2021-07-16T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
meshcollider: I&#x27;m just trying to read into sipa comments (or at least what he was thinking on that Miniscript issue)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463620' id='424702'>
<a class='timestamp' href='#424702'><time timestamp='2021-07-16T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;d be great to just integrate miniscript
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463620' id='424703'>
<a class='timestamp' href='#424703'><time timestamp='2021-07-16T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
To add Miniscript that needs updating the C++ implementation for Taproot
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463620' id='424704'>
<a class='timestamp' href='#424704'><time timestamp='2021-07-16T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if people would want to work on that :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463680' id='424705'>
<a class='timestamp' href='#424705'><time timestamp='2021-07-16T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Are there difficulties ensuring the C++ implementation and the Rust implementation are equivalent?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463680' id='424706'>
<a class='timestamp' href='#424706'><time timestamp='2021-07-16T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
(for Miniscript)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463680' id='424707'>
<a class='timestamp' href='#424707'><time timestamp='2021-07-16T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
when we first wrote it, we did comparison testing
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463740' id='424708'>
<a class='timestamp' href='#424708'><time timestamp='2021-07-16T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if integrated into bitcoin core, it&#x27;d be also easy to e.g. produce test sets using fuzzing, which could be tested in other implementations
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463740' id='424709'>
<a class='timestamp' href='#424709'><time timestamp='2021-07-16T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or vice verse
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463740' id='424710'>
<a class='timestamp' href='#424710'><time timestamp='2021-07-16T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
&quot;I&#x27;d very much want to see it further along in integrating into Bitcoin Core&quot; &lt;- That sounded to me like you&#x27;d rather Miniscript was merged into Core before it supported Taproot
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463740' id='424711'>
<a class='timestamp' href='#424711'><time timestamp='2021-07-16T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463740' id='424712'>
<a class='timestamp' href='#424712'><time timestamp='2021-07-16T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but no reason why both can&#x27;t happen if people work on it
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463800' id='424713'>
<a class='timestamp' href='#424713'><time timestamp='2021-07-16T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Do others agree with that viewpoint e.g. achow101 meshcollider? Miniscript into Core first before it is updated to support Taproot?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463800' id='424714'>
<a class='timestamp' href='#424714'><time timestamp='2021-07-16T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
It&#x27;d probably be easier to implement taproot into the c++ implementation once it in core
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463800' id='424715'>
<a class='timestamp' href='#424715'><time timestamp='2021-07-16T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-7'> gene</span>&gt;
having a formal verification of miniscript (far future) would also allow mechanically verifying different implementations
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463800' id='424716'>
<a class='timestamp' href='#424716'><time timestamp='2021-07-16T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Like sipa said earlier, there&#x27;s no point working on taproot support for it if it isn&#x27;t going to get merged anyway, so better to focus on getting it merged first 
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463800' id='424717'>
<a class='timestamp' href='#424717'><time timestamp='2021-07-16T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Cool, makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463800' id='424718'>
<a class='timestamp' href='#424718'><time timestamp='2021-07-16T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the miniscript c++ repository is currently somewhat in limbo; it works, but it heavily depends on code copied from bitcoin core
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463860' id='424719'>
<a class='timestamp' href='#424719'><time timestamp='2021-07-16T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and testing it is effectively dependent on being able to use bitcoin core&#x27;s scripting engine
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463860' id='424720'>
<a class='timestamp' href='#424720'><time timestamp='2021-07-16T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so it&#x27;s not very appealing to see them diverge further if more feature are added to miniscript, independently of bitcoin core&#x27;s script code
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463920' id='424721'>
<a class='timestamp' href='#424721'><time timestamp='2021-07-16T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
I see
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463920' id='424722'>
<a class='timestamp' href='#424722'><time timestamp='2021-07-16T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Ok so that should be the focus (if we want the Core wallet to support generic Taproot scripts which would be cool/ideal)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463920' id='424723'>
<a class='timestamp' href='#424723'><time timestamp='2021-07-16T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
*eventually support
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463980' id='424724'>
<a class='timestamp' href='#424724'><time timestamp='2021-07-16T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
Ok that&#x27;s all my questions. Thanks all
<br>
</div>

<div class='talk op-msg' data-timestamp='1626463980' id='424725'>
<a class='timestamp' href='#424725'><time timestamp='2021-07-16T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
Sweet, any other topics?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626464040' id='424726'>
<a class='timestamp' href='#424726'><time timestamp='2021-07-16T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
#endmeeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1626464040' id='424727'>
<a class='timestamp' href='#424727'><time timestamp='2021-07-16T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
topic: Bitcoin Core development discussion and commit log | Feel free to watch, but please take commentary and usage questions to #bitcoin | Channel logs: <a href="http://www.erisian.com.au/bitcoin-core-dev/" class="link" target="_blank">http://www.erisian.com.au/bitcoin-core-dev/</a>, <a href="http://gnusha.org/bitcoin-core-dev/" class="link" target="_blank">http://gnusha.org/bitcoin-core-dev/</a> | Meeting topics <a href="http://gnusha.org/bitcoin-core-dev/proposedmeetingtopics.txt" class="link" target="_blank">http://gnusha.org/bitcoin-core-dev/proposedmeetingtopics.txt</a> / <a href="http://gnusha.org/bitcoin-core-dev/proposedwalletmeetingtopics.txt" class="link" target="_blank">http://gnusha.org/bitcoin-core-dev/proposedwalletmeetingtopics.txt</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626464040' id='424728'>
<a class='timestamp' href='#424728'><time timestamp='2021-07-16T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
Meeting ended Fri Jul 16 19:34:47 2021 UTC.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1626464040' id='424729'>
<a class='timestamp' href='#424729'><time timestamp='2021-07-16T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-2'> core-meetingbot</span>&gt;
Minutes:        <a href="https://bitcoin.jonasschnelli.ch/ircmeetings/logs/bitcoin-core-dev/2021/bitcoin-core-dev.2021-07-16-19.00.moin.txt" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/ircmeetings/logs/bitcoin-core-dev/2021/bitcoin-core-dev.2021-07-16-19.00.moin.txt</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626464220' id='424730'>
<a class='timestamp' href='#424730'><time timestamp='2021-07-16T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
sipa: where do we need to start in rebooting the miniscript work?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626464280' id='424731'>
<a class='timestamp' href='#424731'><time timestamp='2021-07-16T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
#16800
<br>
</div>

<div class='talk op-msg' data-timestamp='1626464280' id='424732'>
<a class='timestamp' href='#424732'><time timestamp='2021-07-16T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/16800" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/16800</a> | Basic Miniscript support in output descriptors by sipa ¬∑ Pull Request #16800 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626464280' id='424733'>
<a class='timestamp' href='#424733'><time timestamp='2021-07-16T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1626464820' id='424734'>
<a class='timestamp' href='#424734'><time timestamp='2021-07-16T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
2019 o-O
<br>
</div>

<div class='talk op-msg' data-timestamp='1626465180' id='424735'>
<a class='timestamp' href='#424735'><time timestamp='2021-07-16T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
And #17975 for functional test support
<br>
</div>

<div class='talk op-msg' data-timestamp='1626465180' id='424736'>
<a class='timestamp' href='#424736'><time timestamp='2021-07-16T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/17975" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/17975</a> | TestFramework: Add Python Miniscript Support by jachiang ¬∑ Pull Request #17975 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626470880' id='424737'>
<a class='timestamp' href='#424737'><time timestamp='2021-07-16T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-11'> lightlike</span>&gt;
jonatack: the problem fixed by #22471 looks to me like it could have led to a crash in normal conditions, it&#x27;s not fuzzing-related.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626470880' id='424738'>
<a class='timestamp' href='#424738'><time timestamp='2021-07-16T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22471" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22471</a> | addrman: reset I2P ports in all &quot;new&quot; buckets by vasild ¬∑ Pull Request #22471 ¬∑ bitcoin/bitcoin ¬∑ GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626476640' id='424739'>
<a class='timestamp' href='#424739'><time timestamp='2021-07-16T23:04:00Z'>23:04</time></a>
&lt;<span class='nick nick-11'> dongcarl</span>&gt;
roconnor: Oh, `guix time-machine --commit=abcdef -- build coreutils` means build guix at commit abcdef and run that older guix with the arguments [&quot;build&quot;, &quot;coreutils&quot;]
<br>
</div>

</div>
</section>

</body>
</html>
