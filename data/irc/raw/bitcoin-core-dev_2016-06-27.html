<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2016-06-27
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2016-06-27' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:26 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-05-27">&lt;</a><span class='header'>    June 2016     </span><a href="/bitcoin-core-dev/2016-07-27">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;          <a class="" href="/bitcoin-core-dev/2016-06-01">1</a>  <a class="" href="/bitcoin-core-dev/2016-06-02">2</a>  <a class="" href="/bitcoin-core-dev/2016-06-03">3</a>  <a class="" href="/bitcoin-core-dev/2016-06-04">4</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-06-05">5</a>  <a class="" href="/bitcoin-core-dev/2016-06-06">6</a>  <a class="" href="/bitcoin-core-dev/2016-06-07">7</a>  <a class="" href="/bitcoin-core-dev/2016-06-08">8</a>  <a class="" href="/bitcoin-core-dev/2016-06-09">9</a> <a class="" href="/bitcoin-core-dev/2016-06-10">10</a> <a class="" href="/bitcoin-core-dev/2016-06-11">11</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-06-12">12</a> <a class="" href="/bitcoin-core-dev/2016-06-13">13</a> <a class="" href="/bitcoin-core-dev/2016-06-14">14</a> <a class="" href="/bitcoin-core-dev/2016-06-15">15</a> <a class="" href="/bitcoin-core-dev/2016-06-16">16</a> <a class="" href="/bitcoin-core-dev/2016-06-17">17</a> <a class="" href="/bitcoin-core-dev/2016-06-18">18</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-06-19">19</a> <a class="" href="/bitcoin-core-dev/2016-06-20">20</a> <a class="" href="/bitcoin-core-dev/2016-06-21">21</a> <a class="" href="/bitcoin-core-dev/2016-06-22">22</a> <a class="" href="/bitcoin-core-dev/2016-06-23">23</a> <a class="" href="/bitcoin-core-dev/2016-06-24">24</a> <a class="" href="/bitcoin-core-dev/2016-06-25">25</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-06-26">26</a> <a class="current" href="/bitcoin-core-dev/2016-06-27">27</a> <a class="" href="/bitcoin-core-dev/2016-06-28">28</a> <a class="" href="/bitcoin-core-dev/2016-06-29">29</a> <a class="" href="/bitcoin-core-dev/2016-06-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1467020820' id='476233'>
<a class='timestamp' href='#476233'><time timestamp='2016-06-27T09:47:00Z'>09:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
compiling bitcoind with -flto -O2 -g0 results in a 1.42x smaller binary than just -O2 -g0
<br>
</div>

<div class='talk op-msg' data-timestamp='1467020820' id='476234'>
<a class='timestamp' href='#476234'><time timestamp='2016-06-27T09:47:00Z'>09:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(dynamically linked)
<br>
</div>

<div class='talk op-msg' data-timestamp='1467020820' id='476235'>
<a class='timestamp' href='#476235'><time timestamp='2016-06-27T09:47:00Z'>09:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i haven&#x27;t benchmarked to see if there is any performance difference
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021000' id='476236'>
<a class='timestamp' href='#476236'><time timestamp='2016-06-27T09:50:00Z'>09:50</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
lto also improves memory usage during compilation. But memory usage during linking was pretty bad.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021000' id='476237'>
<a class='timestamp' href='#476237'><time timestamp='2016-06-27T09:50:00Z'>09:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it is hard to compile though... it seems ./configure does not allow setting gcc-ar as ar binary
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021060' id='476238'>
<a class='timestamp' href='#476238'><time timestamp='2016-06-27T09:51:00Z'>09:51</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
we&#x27;ve been considering using it for gitian at some point, no idea why we don&#x27;t yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021120' id='476239'>
<a class='timestamp' href='#476239'><time timestamp='2016-06-27T09:52:00Z'>09:52</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
$1/configure --with-incompatible-bdb  CC=&quot;${CLANGPATH}/bin/clang &quot; CXX=&quot;${CLANGPATH}/bin/clang++&quot; \
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021120' id='476240'>
<a class='timestamp' href='#476240'><time timestamp='2016-06-27T09:52:00Z'>09:52</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
    OBJCXX=&quot;${CLANGPATH}/bin/clang++&quot; \
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021120' id='476241'>
<a class='timestamp' href='#476241'><time timestamp='2016-06-27T09:52:00Z'>09:52</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
    AR=&quot;${CLANGPATH}/bin/llvm-ar&quot; RANLIB=&quot;${CLANGPATH}/bin/llvm-ranlib&quot; \
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021120' id='476242'>
<a class='timestamp' href='#476242'><time timestamp='2016-06-27T09:52:00Z'>09:52</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
    CFLAGS=&quot;-flto -O2 -ggdb&quot; CXXFLAGS=&quot;-flto -O2 -ggdb&quot; LDFLAGS=&quot;-flto -O2 -ggdb -fuse-ld=gold&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021120' id='476243'>
<a class='timestamp' href='#476243'><time timestamp='2016-06-27T09:52:00Z'>09:52</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
that&#x27;s my configure line for clang lto
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021120' id='476244'>
<a class='timestamp' href='#476244'><time timestamp='2016-06-27T09:52:00Z'>09:52</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
gcc should be similar?
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021180' id='476245'>
<a class='timestamp' href='#476245'><time timestamp='2016-06-27T09:53:00Z'>09:53</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
the leveldb sub-build used to break overriding AR, but now that it is integrated it just works
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021180' id='476246'>
<a class='timestamp' href='#476246'><time timestamp='2016-06-27T09:53:00Z'>09:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, the env variables go after ./confiugre?
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021240' id='476247'>
<a class='timestamp' href='#476247'><time timestamp='2016-06-27T09:54:00Z'>09:54</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
the &#x27;official&#x27; convention is to put them after, yes, I don&#x27;t know if it makes a difference in practice
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021240' id='476248'>
<a class='timestamp' href='#476248'><time timestamp='2016-06-27T09:54:00Z'>09:54</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
(but it would depend on the shell then)
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021240' id='476249'>
<a class='timestamp' href='#476249'><time timestamp='2016-06-27T09:54:00Z'>09:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
/usr/bin/ranlib: leveldb_libleveldb_a-filter_block.o: plugin needed to handle lto object
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021300' id='476250'>
<a class='timestamp' href='#476250'><time timestamp='2016-06-27T09:55:00Z'>09:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah wait
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021300' id='476251'>
<a class='timestamp' href='#476251'><time timestamp='2016-06-27T09:55:00Z'>09:55</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
and you do overlload ranlib?
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021360' id='476252'>
<a class='timestamp' href='#476252'><time timestamp='2016-06-27T09:56:00Z'>09:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i set RANLIB=gcc-ranlib, not the full path
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021360' id='476253'>
<a class='timestamp' href='#476253'><time timestamp='2016-06-27T09:56:00Z'>09:56</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
well if you have only one and it is in your path, that should be ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021360' id='476254'>
<a class='timestamp' href='#476254'><time timestamp='2016-06-27T09:56:00Z'>09:56</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
I provide full paths because I have multiple toolchains installed, which aren&#x27;t in the path
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021420' id='476255'>
<a class='timestamp' href='#476255'><time timestamp='2016-06-27T09:57:00Z'>09:57</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
so if it doesn&#x27;t use your ranlib if you do RANLIB=xxx that&#x27;s a build system bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021480' id='476256'>
<a class='timestamp' href='#476256'><time timestamp='2016-06-27T09:58:00Z'>09:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
lto memory usage has been significantly improved after 4.8 though
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021540' id='476257'>
<a class='timestamp' href='#476257'><time timestamp='2016-06-27T09:59:00Z'>09:59</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
yes, for 0.14 we should upgrade the build image to ubuntu 16.04, which has gcc 5.3.x
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021600' id='476258'>
<a class='timestamp' href='#476258'><time timestamp='2016-06-27T10:00:00Z'>10:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
from gcc 4.9 release notes:
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021600' id='476259'>
<a class='timestamp' href='#476259'><time timestamp='2016-06-27T10:00:00Z'>10:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Memory usage building Firefox with debug enabled was reduced from 15GB to 3.5GB; link time from 1700 seconds to 350 seconds. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021900' id='476260'>
<a class='timestamp' href='#476260'><time timestamp='2016-06-27T10:05:00Z'>10:05</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
we need to upgrade the toolchain for windows too: <a href="https://github.com/bitcoin/bitcoin/pull/8249" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8249</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021900' id='476261'>
<a class='timestamp' href='#476261'><time timestamp='2016-06-27T10:05:00Z'>10:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
building with -O2 -g0 -flto here with make -j1 has max res memusage 850MiB here
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021900' id='476262'>
<a class='timestamp' href='#476262'><time timestamp='2016-06-27T10:05:00Z'>10:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and that&#x27;s during compiling of main.o, not linking
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021960' id='476263'>
<a class='timestamp' href='#476263'><time timestamp='2016-06-27T10:06:00Z'>10:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
linking has max 375MiB
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021960' id='476264'>
<a class='timestamp' href='#476264'><time timestamp='2016-06-27T10:06:00Z'>10:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gcc 5.3.1
<br>
</div>

<div class='talk op-msg' data-timestamp='1467021960' id='476265'>
<a class='timestamp' href='#476265'><time timestamp='2016-06-27T10:06:00Z'>10:06</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
ok, nice, so we can start recomming using lto to people that want to reduce compile memory usage and have sufficiantly new compiler
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022020' id='476266'>
<a class='timestamp' href='#476266'><time timestamp='2016-06-27T10:07:00Z'>10:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
with debug enabled it&#x27;s likely more
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022020' id='476267'>
<a class='timestamp' href='#476267'><time timestamp='2016-06-27T10:07:00Z'>10:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
though debugging lto binaries is harder in any case
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022200' id='476268'>
<a class='timestamp' href='#476268'><time timestamp='2016-06-27T10:10:00Z'>10:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
trying the same without lto
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022200' id='476269'>
<a class='timestamp' href='#476269'><time timestamp='2016-06-27T10:10:00Z'>10:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i can&#x27;t imagine it to use more memory
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022260' id='476270'>
<a class='timestamp' href='#476270'><time timestamp='2016-06-27T10:11:00Z'>10:11</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
it&#x27;s exactly what I expected, that compiling is faster and uses less memory with lto
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022440' id='476271'>
<a class='timestamp' href='#476271'><time timestamp='2016-06-27T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
lto is purely additive at the compilation stage
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022440' id='476272'>
<a class='timestamp' href='#476272'><time timestamp='2016-06-27T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it builds normal single-object-optimized assembly output, and internal representation as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022440' id='476273'>
<a class='timestamp' href='#476273'><time timestamp='2016-06-27T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
it emits intermediate code instead of processor code
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022440' id='476274'>
<a class='timestamp' href='#476274'><time timestamp='2016-06-27T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
so can skip a step
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022500' id='476275'>
<a class='timestamp' href='#476275'><time timestamp='2016-06-27T10:15:00Z'>10:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, since 4.9:
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022500' id='476276'>
<a class='timestamp' href='#476276'><time timestamp='2016-06-27T10:15:00Z'>10:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
When using a linker plugin, compiling with the -flto option now generates slim object files (.o) which only contain intermediate language representation for LTO. Use -ffat-lto-objects to create files which contain additionally the object code. To generate static libraries suitable for LTO processing, use gcc-ar and gcc-ranlib; to list symbols from a slim object file use gcc-nm. (This requires that ar, ranlib and nm have been compiled with...
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022500' id='476277'>
<a class='timestamp' href='#476277'><time timestamp='2016-06-27T10:15:00Z'>10:15</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
that&#x27;s how it is for clang at least, maybe gcc is different in that regard
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022500' id='476278'>
<a class='timestamp' href='#476278'><time timestamp='2016-06-27T10:15:00Z'>10:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
plugin support.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022500' id='476279'>
<a class='timestamp' href='#476279'><time timestamp='2016-06-27T10:15:00Z'>10:15</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
clang -flto .o files are actually llvm bitcode
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022500' id='476280'>
<a class='timestamp' href='#476280'><time timestamp='2016-06-27T10:15:00Z'>10:15</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
ok, so gcc started doing the same
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022560' id='476281'>
<a class='timestamp' href='#476281'><time timestamp='2016-06-27T10:16:00Z'>10:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
max 995 MiB res when compiling without lto
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022680' id='476282'>
<a class='timestamp' href='#476282'><time timestamp='2016-06-27T10:18:00Z'>10:18</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
which joker is signalling TESTDUMMY on testnet? &quot;errors&quot;: &quot;Warning: unknown new rules activated (versionbit 28)&quot; 
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022680' id='476283'>
<a class='timestamp' href='#476283'><time timestamp='2016-06-27T10:18:00Z'>10:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
trying with gcc 4.8 now
<br>
</div>

<div class='talk op-msg' data-timestamp='1467022680' id='476284'>
<a class='timestamp' href='#476284'><time timestamp='2016-06-27T10:18:00Z'>10:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no clue
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023220' id='476285'>
<a class='timestamp' href='#476285'><time timestamp='2016-06-27T10:27:00Z'>10:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hmm, has anyone tried using the various sanitizers that gcc now has?
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023280' id='476286'>
<a class='timestamp' href='#476286'><time timestamp='2016-06-27T10:28:00Z'>10:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
-fsanitize=address -fsanitize=thread -fsanitize=leak -fsanitize=undefined
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023280' id='476287'>
<a class='timestamp' href='#476287'><time timestamp='2016-06-27T10:28:00Z'>10:28</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
I haven&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023340' id='476288'>
<a class='timestamp' href='#476288'><time timestamp='2016-06-27T10:29:00Z'>10:29</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
would be interesting to try
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023340' id='476289'>
<a class='timestamp' href='#476289'><time timestamp='2016-06-27T10:29:00Z'>10:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
-fsanitize=address -fsanitize=thread -fsanitize=leak -fsanitize=undefini hadn&#x27;t even heard about -fanitize=undefined
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023400' id='476290'>
<a class='timestamp' href='#476290'><time timestamp='2016-06-27T10:30:00Z'>10:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i hadn&#x27;t even heard about -fsanitize=undefined
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023640' id='476291'>
<a class='timestamp' href='#476291'><time timestamp='2016-06-27T10:34:00Z'>10:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
compiling with g++-4.8 fails here:
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023640' id='476292'>
<a class='timestamp' href='#476292'><time timestamp='2016-06-27T10:34:00Z'>10:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
libbitcoin_util.a(libbitcoin_util_a-util.o): In function `boost::program_options::detail::basic_config_file_iterator&lt;char&gt;::getline(std::string&amp;)&#x27;:
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023700' id='476293'>
<a class='timestamp' href='#476293'><time timestamp='2016-06-27T10:35:00Z'>10:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
util.cpp:(.text._ZN5boost15program_options6detail26basic_config_file_iteratorIcE7getlineERSs[_ZN5boost15program_options6detail26basic_config_file_iteratorIcE7getlineERSs]+0x8e): undefined reference to `boost::program_options::to_internal(std::string const&amp;)&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023700' id='476294'>
<a class='timestamp' href='#476294'><time timestamp='2016-06-27T10:35:00Z'>10:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i guess there is something deficient about my g++-4.8 setup
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023700' id='476295'>
<a class='timestamp' href='#476295'><time timestamp='2016-06-27T10:35:00Z'>10:35</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
my guess: ABI conflict between c++ libraries compiled with 5.3 and 4.8
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023700' id='476296'>
<a class='timestamp' href='#476296'><time timestamp='2016-06-27T10:35:00Z'>10:35</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
I&#x27;m sure compiling with 4.8 works, as it compiles fine on trusty
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023760' id='476297'>
<a class='timestamp' href='#476297'><time timestamp='2016-06-27T10:36:00Z'>10:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023820' id='476298'>
<a class='timestamp' href='#476298'><time timestamp='2016-06-27T10:37:00Z'>10:37</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
a depends build with g++4.8 will probably also work on your system
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023820' id='476299'>
<a class='timestamp' href='#476299'><time timestamp='2016-06-27T10:37:00Z'>10:37</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
(as it has no external c++ dependencies)
<br>
</div>

<div class='talk op-msg' data-timestamp='1467023880' id='476300'>
<a class='timestamp' href='#476300'><time timestamp='2016-06-27T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
(and as long as you skip the GUI, building the depends is very fast)
<br>
</div>

<div class='talk op-msg' data-timestamp='1467024420' id='476301'>
<a class='timestamp' href='#476301'><time timestamp='2016-06-27T10:47:00Z'>10:47</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
doing a depends build with flto would be interesting as well, the final link could optimize use of all the dependencies too, although with qt that will probably be a memory explosion
<br>
</div>

<div class='talk op-msg' data-timestamp='1467026280' id='476302'>
<a class='timestamp' href='#476302'><time timestamp='2016-06-27T11:18:00Z'>11:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: jinx
<br>
</div>

<div class='talk op-msg' data-timestamp='1467032700' id='476303'>
<a class='timestamp' href='#476303'><time timestamp='2016-06-27T13:05:00Z'>13:05</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
wumpus: i assume the bit 28 activation on TESTNET is a bip109 thing (nothing to do with TESTDUMMY, which inadvertently reused the same bit)
<br>
</div>

<div class='talk op-msg' data-timestamp='1467032700' id='476304'>
<a class='timestamp' href='#476304'><time timestamp='2016-06-27T13:05:00Z'>13:05</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
okay
<br>
</div>

<div class='talk op-msg' data-timestamp='1467032700' id='476305'>
<a class='timestamp' href='#476305'><time timestamp='2016-06-27T13:05:00Z'>13:05</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
sdaftuar: correct.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467032880' id='476306'>
<a class='timestamp' href='#476306'><time timestamp='2016-06-27T13:08:00Z'>13:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh I thought that was TESTDUMMY. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1467032940' id='476307'>
<a class='timestamp' href='#476307'><time timestamp='2016-06-27T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
if it were 109 I would have expected it to not trigger BIP9 due to the longer activation window and higher trehshold.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467032940' id='476308'>
<a class='timestamp' href='#476308'><time timestamp='2016-06-27T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
threshold*
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033060' id='476309'>
<a class='timestamp' href='#476309'><time timestamp='2016-06-27T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
it wasn&#x27;t totally clear to me from the bip, but i assume the semantics specified there called for hte bit to continue to be set after activation:
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033060' id='476310'>
<a class='timestamp' href='#476310'><time timestamp='2016-06-27T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
Miners that support this BIP should set bit 0x10000000 in the block version until 1-Jan-2018. After that date, that bit can be safely re-used for future consensus rule upgrades.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033180' id='476311'>
<a class='timestamp' href='#476311'><time timestamp='2016-06-27T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Just so.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033540' id='476312'>
<a class='timestamp' href='#476312'><time timestamp='2016-06-27T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
we should prolly have a switch to mute warnings we specifically want to ignore
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033540' id='476313'>
<a class='timestamp' href='#476313'><time timestamp='2016-06-27T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8266" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8266</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033600' id='476314'>
<a class='timestamp' href='#476314'><time timestamp='2016-06-27T13:20:00Z'>13:20</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
oh ha! I&#x27;ve been too busy watching brexit :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033720' id='476315'>
<a class='timestamp' href='#476315'><time timestamp='2016-06-27T13:22:00Z'>13:22</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
--ignore-testdummy 
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033780' id='476316'>
<a class='timestamp' href='#476316'><time timestamp='2016-06-27T13:23:00Z'>13:23</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
no, #8266 sounds better :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033840' id='476317'>
<a class='timestamp' href='#476317'><time timestamp='2016-06-27T13:24:00Z'>13:24</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
OP_CHECKSPATULAVERIFY &lt;3
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033840' id='476318'>
<a class='timestamp' href='#476318'><time timestamp='2016-06-27T13:24:00Z'>13:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
?
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033840' id='476319'>
<a class='timestamp' href='#476319'><time timestamp='2016-06-27T13:24:00Z'>13:24</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
sipa: see the ticket
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033900' id='476320'>
<a class='timestamp' href='#476320'><time timestamp='2016-06-27T13:25:00Z'>13:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
han
<br>
</div>

<div class='talk op-msg' data-timestamp='1467033900' id='476321'>
<a class='timestamp' href='#476321'><time timestamp='2016-06-27T13:25:00Z'>13:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ha!
<br>
</div>

<div class='talk op-msg' data-timestamp='1467036000' id='476322'>
<a class='timestamp' href='#476322'><time timestamp='2016-06-27T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-13'> GitHub117</span>&gt;
[bitcoin] laanwj opened pull request #8273: Bump `-dbcache` default to 300MiB (master...2016_06_dbcache) <a href="https://github.com/bitcoin/bitcoin/pull/8273" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8273</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1467036480' id='476323'>
<a class='timestamp' href='#476323'><time timestamp='2016-06-27T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-10'> GitHub139</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/1922e5a65458...5a06ebbf2d5f" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/1922e5a65458...5a06ebbf2d5f</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1467036480' id='476324'>
<a class='timestamp' href='#476324'><time timestamp='2016-06-27T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-10'> GitHub139</span>&gt;
bitcoin/master 409f833 jl2012: RPC: Hide softfork if timeout is 0
<br>
</div>

<div class='talk op-msg' data-timestamp='1467036480' id='476325'>
<a class='timestamp' href='#476325'><time timestamp='2016-06-27T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-10'> GitHub139</span>&gt;
bitcoin/master 5a06ebb Wladimir J. van der Laan: Merge #8258: RPC: Hide softfork if timeout is 0...
<br>
</div>

<div class='talk op-msg' data-timestamp='1467036480' id='476326'>
<a class='timestamp' href='#476326'><time timestamp='2016-06-27T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-11'> GitHub19</span>&gt;
[bitcoin] laanwj closed pull request #8258: RPC: Hide softfork if timeout is 0 (master...bip9rpcdisable) <a href="https://github.com/bitcoin/bitcoin/pull/8258" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8258</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1467036960' id='476327'>
<a class='timestamp' href='#476327'><time timestamp='2016-06-27T14:16:00Z'>14:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: how hard is it to add a python dependency? (specifically: siphash)
<br>
</div>

<div class='talk op-msg' data-timestamp='1467036960' id='476328'>
<a class='timestamp' href='#476328'><time timestamp='2016-06-27T14:16:00Z'>14:16</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
you mean for testing? we&#x27;d prefer to not add one, a lot of people stumble on the zmq one
<br>
</div>

<div class='talk op-msg' data-timestamp='1467037020' id='476329'>
<a class='timestamp' href='#476329'><time timestamp='2016-06-27T14:17:00Z'>14:17</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
AFAIK siphash is a single python file, why not just import it 
<br>
</div>

<div class='talk op-msg' data-timestamp='1467037260' id='476330'>
<a class='timestamp' href='#476330'><time timestamp='2016-06-27T14:21:00Z'>14:21</time></a>
&lt;<span class='nick nick-6'> GitHub97</span>&gt;
[bitcoin] laanwj closed pull request #8232: Add IRC link to README.md (master...patch-1) <a href="https://github.com/bitcoin/bitcoin/pull/8232" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8232</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1467039780' id='476331'>
<a class='timestamp' href='#476331'><time timestamp='2016-06-27T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: ok, i&#x27;ll just copy some code in
<br>
</div>

<div class='talk op-msg' data-timestamp='1467040320' id='476332'>
<a class='timestamp' href='#476332'><time timestamp='2016-06-27T15:12:00Z'>15:12</time></a>
&lt;<span class='nick nick-3'> dgenr8</span>&gt;
would it not be a good idea to reserve bit 28 for sizeforks?
<br>
</div>

<div class='talk op-msg' data-timestamp='1467040500' id='476333'>
<a class='timestamp' href='#476333'><time timestamp='2016-06-27T15:15:00Z'>15:15</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
e.g. reserve it for the softfork to 0.5M?
<br>
</div>

<div class='talk op-msg' data-timestamp='1467040500' id='476334'>
<a class='timestamp' href='#476334'><time timestamp='2016-06-27T15:15:00Z'>15:15</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
or maybe 0.75M so we finally close these PRs to bump the default block size?
<br>
</div>

<div class='talk op-msg' data-timestamp='1467040560' id='476335'>
<a class='timestamp' href='#476335'><time timestamp='2016-06-27T15:16:00Z'>15:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
for a hardfork you don&#x27;t nedd bip9
<br>
</div>

<div class='talk op-msg' data-timestamp='1467040560' id='476336'>
<a class='timestamp' href='#476336'><time timestamp='2016-06-27T15:16:00Z'>15:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you can use bip 31 if you really want a means to indicate tgat the rules changed
<br>
</div>

<div class='talk op-msg' data-timestamp='1467040740' id='476337'>
<a class='timestamp' href='#476337'><time timestamp='2016-06-27T15:19:00Z'>15:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s also not very relevant here: currently bit 28 is unusable for anything
<br>
</div>

<div class='talk op-msg' data-timestamp='1467041160' id='476338'>
<a class='timestamp' href='#476338'><time timestamp='2016-06-27T15:26:00Z'>15:26</time></a>
&lt;<span class='nick nick-3'> dgenr8</span>&gt;
sipa: to be clear, are you saying you believe block version is unsuitable for signaling sizefork support?
<br>
</div>

<div class='talk op-msg' data-timestamp='1467041220' id='476339'>
<a class='timestamp' href='#476339'><time timestamp='2016-06-27T15:27:00Z'>15:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
dgenr8: i believe bip9 is unsuitable for hardforks
<br>
</div>

<div class='talk op-msg' data-timestamp='1467041340' id='476340'>
<a class='timestamp' href='#476340'><time timestamp='2016-06-27T15:29:00Z'>15:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
because it measures miner support, which is not relevant
<br>
</div>

<div class='talk op-msg' data-timestamp='1467041460' id='476341'>
<a class='timestamp' href='#476341'><time timestamp='2016-06-27T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
a hardfork is the ecosystem deciding to switch to new rules; if miners don&#x27;t follow, that&#x27;s their own problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1467041520' id='476342'>
<a class='timestamp' href='#476342'><time timestamp='2016-06-27T15:32:00Z'>15:32</time></a>
&lt;<span class='nick nick-3'> dgenr8</span>&gt;
so &quot;yes&quot; then? (since not only bip9 but anything in the block header is showing miner support)
<br>
</div>

<div class='talk op-msg' data-timestamp='1467041520' id='476343'>
<a class='timestamp' href='#476343'><time timestamp='2016-06-27T15:32:00Z'>15:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if for you a sizefork implies a hardfork, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1467041760' id='476344'>
<a class='timestamp' href='#476344'><time timestamp='2016-06-27T15:36:00Z'>15:36</time></a>
&lt;<span class='nick nick-3'> dgenr8</span>&gt;
I think I detect another rabbit-hole softfork on the horizon
<br>
</div>

<div class='talk op-msg' data-timestamp='1467042780' id='476345'>
<a class='timestamp' href='#476345'><time timestamp='2016-06-27T15:53:00Z'>15:53</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
dgenr8: what does that mean?
<br>
</div>

<div class='talk op-msg' data-timestamp='1467042840' id='476346'>
<a class='timestamp' href='#476346'><time timestamp='2016-06-27T15:54:00Z'>15:54</time></a>
&lt;<span class='nick nick-3'> dgenr8</span>&gt;
I would imagine something like the old adam3us expansion blocks proposal
<br>
</div>

<div class='talk op-msg' data-timestamp='1467043200' id='476347'>
<a class='timestamp' href='#476347'><time timestamp='2016-06-27T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-3'> dgenr8</span>&gt;
sipa: the ecosystem would follow miners to a larger max block size, just as they are dragged along with all the softforks
<br>
</div>

<div class='talk op-msg' data-timestamp='1467043200' id='476348'>
<a class='timestamp' href='#476348'><time timestamp='2016-06-27T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-3'> dgenr8</span>&gt;
With either a soft or hard fork, the effect of not following is the same: total inability to validate part of the block
<br>
</div>

<div class='talk op-msg' data-timestamp='1467043320' id='476349'>
<a class='timestamp' href='#476349'><time timestamp='2016-06-27T16:02:00Z'>16:02</time></a>
&lt;<span class='nick nick-3'> dgenr8</span>&gt;
the best thing for bitcoin is for you guys to adopt bip109
<br>
</div>

<div class='talk op-msg' data-timestamp='1467044040' id='476350'>
<a class='timestamp' href='#476350'><time timestamp='2016-06-27T16:14:00Z'>16:14</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
bit 28 is the tabboo bit
<br>
</div>

<div class='talk op-msg' data-timestamp='1467044040' id='476351'>
<a class='timestamp' href='#476351'><time timestamp='2016-06-27T16:14:00Z'>16:14</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
this is not the place for hard/soft fork disussion, and certainly not block size discussions
<br>
</div>

<div class='talk op-msg' data-timestamp='1467044460' id='476352'>
<a class='timestamp' href='#476352'><time timestamp='2016-06-27T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-11'>@wumpus</span>&gt;
with the current escalating reindex times, and utxo set size, there&#x27;s no manouvring room either inside or in expansion blocks to increase transaction space
<br>
</div>

<div class='talk op-msg' data-timestamp='1467044640' id='476353'>
<a class='timestamp' href='#476353'><time timestamp='2016-06-27T16:24:00Z'>16:24</time></a>
&lt;<span class='nick nick-10'> GitHub29</span>&gt;
[bitcoin] laanwj opened pull request #8274: util: Update tinyformat (master...2016_06_update_tinyformat) <a href="https://github.com/bitcoin/bitcoin/pull/8274" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8274</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1467049860' id='476354'>
<a class='timestamp' href='#476354'><time timestamp='2016-06-27T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-1'> GitHub53</span>&gt;
[bitcoin] btcdrak opened pull request #8275: Remove bad chain alert partition check (master...partitionalerts) <a href="https://github.com/bitcoin/bitcoin/pull/8275" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8275</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1467055080' id='476355'>
<a class='timestamp' href='#476355'><time timestamp='2016-06-27T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: So I made this change:
<br>
</div>

<div class='talk op-msg' data-timestamp='1467055080' id='476356'>
<a class='timestamp' href='#476356'><time timestamp='2016-06-27T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
+    nCacheSize = std::min(nCacheSize,(size_t)1024*1024);
<br>
</div>

<div class='talk op-msg' data-timestamp='1467055080' id='476357'>
<a class='timestamp' href='#476357'><time timestamp='2016-06-27T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in dbwrapper.cpp GetOptions
<br>
</div>

<div class='talk op-msg' data-timestamp='1467055140' id='476358'>
<a class='timestamp' href='#476358'><time timestamp='2016-06-27T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and a reindex with no txindex, and no signature checking went from 31021.760436 seconds before to 31360.383818000002 seconds after.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467055200' id='476359'>
<a class='timestamp' href='#476359'><time timestamp='2016-06-27T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(dbcache settings default)
<br>
</div>

<div class='talk op-msg' data-timestamp='1467055200' id='476360'>
<a class='timestamp' href='#476360'><time timestamp='2016-06-27T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so I think this suggests the leveldb cache is doing almost nothing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467055200' id='476361'>
<a class='timestamp' href='#476361'><time timestamp='2016-06-27T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it&#x27;s a 1% difference to go from the defaults to 1MB. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1467055320' id='476362'>
<a class='timestamp' href='#476362'><time timestamp='2016-06-27T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
going to try 2mb now and see if I can turn that into almost nothing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467055920' id='476363'>
<a class='timestamp' href='#476363'><time timestamp='2016-06-27T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: with what dbcache size was your benchmark?
<br>
</div>

<div class='talk op-msg' data-timestamp='1467055980' id='476364'>
<a class='timestamp' href='#476364'><time timestamp='2016-06-27T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
my guess is that the leveldb cache becomes relatively less important as the chainstate cache grows
<br>
</div>

<div class='talk op-msg' data-timestamp='1467056040' id='476365'>
<a class='timestamp' href='#476365'><time timestamp='2016-06-27T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: the default.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467056100' id='476366'>
<a class='timestamp' href='#476366'><time timestamp='2016-06-27T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
my plan was to determine if leveldb cache could be radically reduced without harming performance. Then give over all that memory to the coincache.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467058740' id='476367'>
<a class='timestamp' href='#476367'><time timestamp='2016-06-27T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
wumpus: RE: #8273: FWIW, I was the one I think who advocated for 300MB for the mempool and I now think that is more than is really necessary.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467058740' id='476368'>
<a class='timestamp' href='#476368'><time timestamp='2016-06-27T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I haven&#x27;t seen if the ratio to wire size vs memory size has changed substantially with all the recent mempool changes, but previously 300MB of mempool was roughly 100MB of wire bytes.  I think thats a larger backlog than is necessary to handle normal operation.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467058800' id='476369'>
<a class='timestamp' href='#476369'><time timestamp='2016-06-27T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Although lowering that is something that may warrant a bit of testing.  There can be these weird feedback loops with eviction and tx time outs, and I wouldn&#x27;t be sure that say 100MB mempool wouldn&#x27;t somehow lead to worse network behavior.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467058980' id='476370'>
<a class='timestamp' href='#476370'><time timestamp='2016-06-27T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: it changed substantially.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467058980' id='476371'>
<a class='timestamp' href='#476371'><time timestamp='2016-06-27T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it&#x27;s about 150mb now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467059100' id='476372'>
<a class='timestamp' href='#476372'><time timestamp='2016-06-27T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
oh, its that much more efficient?  that&#x27;s nice.  anyway, i&#x27;m just mentioning this, b/c i thought i saw discussion about potentially lowering maxmempool in conjunction with raising dbcache in order to not overly affect the total mem footprint.  i&#x27;d agree with doing that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467059100' id='476373'>
<a class='timestamp' href='#476373'><time timestamp='2016-06-27T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
  &quot;bytes&quot;: 149293989,
<br>
</div>

<div class='talk op-msg' data-timestamp='1467059100' id='476374'>
<a class='timestamp' href='#476374'><time timestamp='2016-06-27T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
  &quot;usage&quot;: 274484752,
<br>
</div>

<div class='talk op-msg' data-timestamp='1467059220' id='476375'>
<a class='timestamp' href='#476375'><time timestamp='2016-06-27T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
for CPFP to work though it does need to be a fair bit bigger than it would otherwise.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467059280' id='476376'>
<a class='timestamp' href='#476376'><time timestamp='2016-06-27T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: well i should look again, but last time i looked, i never saw it go over 100M of usage for things that weren&#x27;t spam (defined as those 14kB tx that paid 15000 satoshis in fee)
<br>
</div>

<div class='talk op-msg' data-timestamp='1467059340' id='476377'>
<a class='timestamp' href='#476377'><time timestamp='2016-06-27T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
of course there was occasionally legitmate free or min fee rate txs mixed in with the spam.  but no size mempool will be big enough to reliably include those if they aren&#x27;t paying higher price thant he spam
<br>
</div>

<div class='talk op-msg' data-timestamp='1467059340' id='476378'>
<a class='timestamp' href='#476378'><time timestamp='2016-06-27T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
A useful question is, what is the probablity that a txn confirms during a measurement window, as a function of the worst &#x27;depth&#x27; it expirenced in the mempool. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1467059460' id='476379'>
<a class='timestamp' href='#476379'><time timestamp='2016-06-27T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I guess what I&#x27;m saying put another way is that any tx paying &lt;= 1 sat per byte had an extremely variable chance of ever being confirmed at all
<br>
</div>

<div class='talk op-msg' data-timestamp='1467059520' id='476380'>
<a class='timestamp' href='#476380'><time timestamp='2016-06-27T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Tx&#x27;s paying &gt; 1 sat per byte may be interesting to study more, but they seem to have always fit in a 100MB (usage) mempool.
<br>
</div>

<div class='talk op-msg' data-timestamp='1467059520' id='476381'>
<a class='timestamp' href='#476381'><time timestamp='2016-06-27T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
At least thats my casual observation
<br>
</div>

</div>
</section>

</body>
</html>
