<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2016-04-04
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2016-04-04' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:27 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-03-04">&lt;</a><span class='header'>    April 2016    </span><a href="/bitcoin-core-dev/2016-05-04">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                <a class="" href="/bitcoin-core-dev/2016-04-01">1</a>  <a class="" href="/bitcoin-core-dev/2016-04-02">2</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-04-03">3</a>  <a class="current" href="/bitcoin-core-dev/2016-04-04">4</a>  <a class="" href="/bitcoin-core-dev/2016-04-05">5</a>  <a class="" href="/bitcoin-core-dev/2016-04-06">6</a>  <a class="" href="/bitcoin-core-dev/2016-04-07">7</a>  <a class="" href="/bitcoin-core-dev/2016-04-08">8</a>  <a class="" href="/bitcoin-core-dev/2016-04-09">9</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-04-10">10</a> <a class="" href="/bitcoin-core-dev/2016-04-11">11</a> <a class="" href="/bitcoin-core-dev/2016-04-12">12</a> <a class="" href="/bitcoin-core-dev/2016-04-13">13</a> <a class="" href="/bitcoin-core-dev/2016-04-14">14</a> <a class="" href="/bitcoin-core-dev/2016-04-15">15</a> <a class="" href="/bitcoin-core-dev/2016-04-16">16</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-04-17">17</a> <a class="" href="/bitcoin-core-dev/2016-04-18">18</a> <a class="" href="/bitcoin-core-dev/2016-04-19">19</a> <a class="" href="/bitcoin-core-dev/2016-04-20">20</a> <a class="" href="/bitcoin-core-dev/2016-04-21">21</a> <a class="" href="/bitcoin-core-dev/2016-04-22">22</a> <a class="" href="/bitcoin-core-dev/2016-04-23">23</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-04-24">24</a> <a class="" href="/bitcoin-core-dev/2016-04-25">25</a> <a class="" href="/bitcoin-core-dev/2016-04-26">26</a> <a class="" href="/bitcoin-core-dev/2016-04-27">27</a> <a class="" href="/bitcoin-core-dev/2016-04-28">28</a> <a class="" href="/bitcoin-core-dev/2016-04-29">29</a> <a class="" href="/bitcoin-core-dev/2016-04-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1459729140' id='460509'>
<a class='timestamp' href='#460509'><time timestamp='2016-04-04T00:19:00Z'>00:19</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
is someone still mirroring the PRs, etc?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459731600' id='460510'>
<a class='timestamp' href='#460510'><time timestamp='2016-04-04T01:00:00Z'>01:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I am boggle at +class CompareTxMemPoolEntryByScore
<br>
</div>

<div class='talk op-msg' data-timestamp='1459731600' id='460511'>
<a class='timestamp' href='#460511'><time timestamp='2016-04-04T01:00:00Z'>01:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh no I&#x27;m not.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459731600' id='460512'>
<a class='timestamp' href='#460512'><time timestamp='2016-04-04T01:00:00Z'>01:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
turns out that b and a look a lot like each other on the screen.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459753560' id='460513'>
<a class='timestamp' href='#460513'><time timestamp='2016-04-04T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
does anyone know of a profiling/monitoring tool that can how how much % of the time a lock is held and by what threads?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459753740' id='460514'>
<a class='timestamp' href='#460514'><time timestamp='2016-04-04T07:09:00Z'>07:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(for linux)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459753980' id='460515'>
<a class='timestamp' href='#460515'><time timestamp='2016-04-04T07:13:00Z'>07:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
thanks for all the work on the tests MarcoFalke
<br>
</div>

<div class='talk op-msg' data-timestamp='1459754460' id='460516'>
<a class='timestamp' href='#460516'><time timestamp='2016-04-04T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-16'> Lightsword</span>&gt;
wumpus, I think valgrind may have something for that
<br>
</div>

<div class='talk op-msg' data-timestamp='1459754460' id='460517'>
<a class='timestamp' href='#460517'><time timestamp='2016-04-04T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1459754520' id='460518'>
<a class='timestamp' href='#460518'><time timestamp='2016-04-04T07:22:00Z'>07:22</time></a>
&lt;<span class='nick nick-16'> Lightsword</span>&gt;
<a href="http://valgrind.org/docs/manual/drd-manual.html#drd-manual" class="link" target="_blank">http://valgrind.org/docs/manual/drd-manual.html#drd-manual</a>.lock-contention
<br>
</div>

<div class='talk op-msg' data-timestamp='1459754640' id='460519'>
<a class='timestamp' href='#460519'><time timestamp='2016-04-04T07:24:00Z'>07:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if contention is really significant i expect it to show up in profilimg
<br>
</div>

<div class='talk op-msg' data-timestamp='1459754700' id='460520'>
<a class='timestamp' href='#460520'><time timestamp='2016-04-04T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes the problem I usually have with profiling is that it gives way too much information, where I just need to know a specific thing :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459754760' id='460521'>
<a class='timestamp' href='#460521'><time timestamp='2016-04-04T07:26:00Z'>07:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
haha
<br>
</div>

<div class='talk op-msg' data-timestamp='1459754760' id='460522'>
<a class='timestamp' href='#460522'><time timestamp='2016-04-04T07:26:00Z'>07:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
linux has about a gazillion tools to monitor the system, or a process, but I can hardly ever find the one I need when I need it
<br>
</div>

<div class='talk op-msg' data-timestamp='1459754880' id='460523'>
<a class='timestamp' href='#460523'><time timestamp='2016-04-04T07:28:00Z'>07:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
something that shows a timeline *wtf is this process doing now*, per thread, in a kind of GANTT graph would be awesome, we had something like that for Sun at ASML but I have no clue whether it exists for linux
<br>
</div>

<div class='talk op-msg' data-timestamp='1459754880' id='460524'>
<a class='timestamp' href='#460524'><time timestamp='2016-04-04T07:28:00Z'>07:28</time></a>
&lt;<span class='nick nick-16'> Lightsword</span>&gt;
dtrace?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459754880' id='460525'>
<a class='timestamp' href='#460525'><time timestamp='2016-04-04T07:28:00Z'>07:28</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes it was a proprietary tool based on dtrace
<br>
</div>

<div class='talk op-msg' data-timestamp='1459754940' id='460526'>
<a class='timestamp' href='#460526'><time timestamp='2016-04-04T07:29:00Z'>07:29</time></a>
&lt;<span class='nick nick-16'> Lightsword</span>&gt;
<a href="https://github.com/dtrace4linux/linux" class="link" target="_blank">https://github.com/dtrace4linux/linux</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459754940' id='460527'>
<a class='timestamp' href='#460527'><time timestamp='2016-04-04T07:29:00Z'>07:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes saw that one, there&#x27;s also systemtap, and oprofile, which have similar aims but use slightly different mechanisms
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755000' id='460528'>
<a class='timestamp' href='#460528'><time timestamp='2016-04-04T07:30:00Z'>07:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh and sysdig!
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755000' id='460529'>
<a class='timestamp' href='#460529'><time timestamp='2016-04-04T07:30:00Z'>07:30</time></a>
&lt;<span class='nick nick-3'> * wumpus</span>&gt;
mumbles something about fragmentation
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755180' id='460530'>
<a class='timestamp' href='#460530'><time timestamp='2016-04-04T07:33:00Z'>07:33</time></a>
&lt;<span class='nick nick-16'> Lightsword</span>&gt;
because who doesn’t like to have 10 different profiling tools that work slightly differently :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755180' id='460531'>
<a class='timestamp' href='#460531'><time timestamp='2016-04-04T07:33:00Z'>07:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
:-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755240' id='460532'>
<a class='timestamp' href='#460532'><time timestamp='2016-04-04T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well I suppose people who specialize in this appreciate the flexibility, but if you just want to investigate something quickly it&#x27;s easy to get stuck in the &quot;what tool to choose... oh wtf I&#x27;ll just roll something myself&quot; stage
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755240' id='460533'>
<a class='timestamp' href='#460533'><time timestamp='2016-04-04T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-14'> * Lightsword</span>&gt;
has noticed ethereum has decided to do the same thing by apparently trying to write their clients in as many languages as possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755360' id='460534'>
<a class='timestamp' href='#460534'><time timestamp='2016-04-04T07:36:00Z'>07:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh yes don&#x27;t get me started on programming languages :) we have to rewrite every single thing and library in every programming language, sometimes it&#x27;s good but sometimes it&#x27;s also a waste, what could we accomplish if we just cooporated on a single version of <b>*thing*</b> that works awesomely
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755360' id='460535'>
<a class='timestamp' href='#460535'><time timestamp='2016-04-04T07:36:00Z'>07:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
&quot;we&quot; is general, especially the open source community
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755420' id='460536'>
<a class='timestamp' href='#460536'><time timestamp='2016-04-04T07:37:00Z'>07:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
for c++ we even want multiple version of <b>*thing*</b> based on what the favourite combination of dependencies of the day is
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755480' id='460537'>
<a class='timestamp' href='#460537'><time timestamp='2016-04-04T07:38:00Z'>07:38</time></a>
&lt;<span class='nick nick-16'> Lightsword</span>&gt;
heh, seems that’s why c is so common with linux stuff, since those libraries are pretty much compatible with any language
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755840' id='460538'>
<a class='timestamp' href='#460538'><time timestamp='2016-04-04T07:44:00Z'>07:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Any final feelings about RBF for createrawtx (<a href="https://github.com/bitcoin/bitcoin/pull/7159/files)" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7159/files)</a>?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755840' id='460539'>
<a class='timestamp' href='#460539'><time timestamp='2016-04-04T07:44:00Z'>07:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Should I remove the general opt-in boolean?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755840' id='460540'>
<a class='timestamp' href='#460540'><time timestamp='2016-04-04T07:44:00Z'>07:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
And add a seq-nr per input?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755840' id='460541'>
<a class='timestamp' href='#460541'><time timestamp='2016-04-04T07:44:00Z'>07:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I like both approaches.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755900' id='460542'>
<a class='timestamp' href='#460542'><time timestamp='2016-04-04T07:45:00Z'>07:45</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
The per-tx-global opt-in bool is a higher level function. The seq-nr per input is something we should have anyways.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459755900' id='460543'>
<a class='timestamp' href='#460543'><time timestamp='2016-04-04T07:45:00Z'>07:45</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Maybe we can have both?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756140' id='460544'>
<a class='timestamp' href='#460544'><time timestamp='2016-04-04T07:49:00Z'>07:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Wait. The sequence option was added already.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756200' id='460545'>
<a class='timestamp' href='#460545'><time timestamp='2016-04-04T07:50:00Z'>07:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
needs nlock too.. globals could be used to autopopulate sequence/nlock if not overridden.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756320' id='460546'>
<a class='timestamp' href='#460546'><time timestamp='2016-04-04T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hmm, i&#x27;m unsure
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756320' id='460547'>
<a class='timestamp' href='#460547'><time timestamp='2016-04-04T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the question is what createrawtransaction&#x27;s goal os
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756320' id='460548'>
<a class='timestamp' href='#460548'><time timestamp='2016-04-04T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just only using explicit values would be more in line with its name
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756320' id='460549'>
<a class='timestamp' href='#460549'><time timestamp='2016-04-04T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it bothers me that rawtxn are trivially distinguishable from txn created by bitcoin core itself for no good reason... and it&#x27;s weird that there is <u>_less_</u> functionality via rawtxn now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756380' id='460550'>
<a class='timestamp' href='#460550'><time timestamp='2016-04-04T07:53:00Z'>07:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but given that it can now be used in conjunction in fundrawtransaction to just choose outputs, maybe there is a need fir slightly higher level behaviour
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756380' id='460551'>
<a class='timestamp' href='#460551'><time timestamp='2016-04-04T07:53:00Z'>07:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
why make it gratitiously less useful? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756380' id='460552'>
<a class='timestamp' href='#460552'><time timestamp='2016-04-04T07:53:00Z'>07:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I&#x27;m also not sure if passing a CREATE_TX_RBF_OPT_IN - flag to FundTransaction is the way to go: <a href="https://github.com/bitcoin/bitcoin/pull/7159/files#diff-12635a58447c65585f51d32b7e04075bR747" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7159/files#diff-12635a58447c65585f51d32b7e04075bR747</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756680' id='460553'>
<a class='timestamp' href='#460553'><time timestamp='2016-04-04T07:58:00Z'>07:58</time></a>
&lt;<span class='nick nick-12'> GitHub77</span>&gt;
[bitcoin] jonasschnelli pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/e662a7628801...a9149688f87c" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/e662a7628801...a9149688f87c</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756680' id='460554'>
<a class='timestamp' href='#460554'><time timestamp='2016-04-04T07:58:00Z'>07:58</time></a>
&lt;<span class='nick nick-12'> GitHub77</span>&gt;
bitcoin/master 8efed3b Jonas Schnelli: [Qt] Support for abandoned/abandoning transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756680' id='460555'>
<a class='timestamp' href='#460555'><time timestamp='2016-04-04T07:58:00Z'>07:58</time></a>
&lt;<span class='nick nick-12'> GitHub77</span>&gt;
bitcoin/master a914968 Jonas Schnelli: Merge #7707: [RPC][QT] UI support for abandoned transactions...
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756740' id='460556'>
<a class='timestamp' href='#460556'><time timestamp='2016-04-04T07:59:00Z'>07:59</time></a>
&lt;<span class='nick nick-4'> GitHub144</span>&gt;
[bitcoin] jonasschnelli closed pull request #7707: [RPC][QT] UI support for abandoned transactions (master...2016/03/abandon_ui) <a href="https://github.com/bitcoin/bitcoin/pull/7707" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7707</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756920' id='460557'>
<a class='timestamp' href='#460557'><time timestamp='2016-04-04T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i dislike feature creep
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756980' id='460558'>
<a class='timestamp' href='#460558'><time timestamp='2016-04-04T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
making createrawtransaction do things automagically may be confusing &quot;i was making a raw transaction... why did it put things in the transaction i didn&#x27;t tell it to?&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1459756980' id='460559'>
<a class='timestamp' href='#460559'><time timestamp='2016-04-04T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I dislike having functionality which doesn&#x27;t get used but for small shortcoming that take away its utility.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757100' id='460560'>
<a class='timestamp' href='#460560'><time timestamp='2016-04-04T08:05:00Z'>08:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i just don&#x27;t know how to reconcile it being &quot;raw&quot; with the suggested functionality
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757100' id='460561'>
<a class='timestamp' href='#460561'><time timestamp='2016-04-04T08:05:00Z'>08:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
raw is the fact that it returns a rawtransaction to you.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757160' id='460562'>
<a class='timestamp' href='#460562'><time timestamp='2016-04-04T08:06:00Z'>08:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
my preference would be just allowing setting nlocktime and nsequence
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757160' id='460563'>
<a class='timestamp' href='#460563'><time timestamp='2016-04-04T08:06:00Z'>08:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it also doesn&#x27;t create change outputs automatocally
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757160' id='460564'>
<a class='timestamp' href='#460564'><time timestamp='2016-04-04T08:06:00Z'>08:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Createrawtransaction is the only way to do manual coin selection from the command-line, it works great for that, and I use it that way several times per week.  It has a nice workflow that allows offline signing and allows review of the completed transaction before signing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757220' id='460565'>
<a class='timestamp' href='#460565'><time timestamp='2016-04-04T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but have another RPC for higher level operations like this
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757220' id='460566'>
<a class='timestamp' href='#460566'><time timestamp='2016-04-04T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it would just be an exact copy of createrawtransaction, with extra flags and or slightly different defaults.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757400' id='460567'>
<a class='timestamp' href='#460567'><time timestamp='2016-04-04T08:10:00Z'>08:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so you would suggest having the ability to set nlocktime and nsequence specifically, and also have options to change defaults based on rbf, transaction sniping, relative locktime, ...?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757460' id='460568'>
<a class='timestamp' href='#460568'><time timestamp='2016-04-04T08:11:00Z'>08:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I wouldn&#x27;t object to just having another RPC like that... but it seems a waste.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757460' id='460569'>
<a class='timestamp' href='#460569'><time timestamp='2016-04-04T08:11:00Z'>08:11</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: yes. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757520' id='460570'>
<a class='timestamp' href='#460570'><time timestamp='2016-04-04T08:12:00Z'>08:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the problem with &#x27;global defaults&#x27; however, is that I don&#x27;t see a clean way to make it work with fundrawtransaction unless side information is added to the raw transaction.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757520' id='460571'>
<a class='timestamp' href='#460571'><time timestamp='2016-04-04T08:12:00Z'>08:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so what if you want the rbf/sniping/rellocktime/... logic, but not createrawtransaction?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757520' id='460572'>
<a class='timestamp' href='#460572'><time timestamp='2016-04-04T08:12:00Z'>08:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sounds like arguments for sendmany.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757580' id='460573'>
<a class='timestamp' href='#460573'><time timestamp='2016-04-04T08:13:00Z'>08:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so we&#x27;d add those to both sendmany and createrawtransaction?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757640' id='460574'>
<a class='timestamp' href='#460574'><time timestamp='2016-04-04T08:14:00Z'>08:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just trying to think this through
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757640' id='460575'>
<a class='timestamp' href='#460575'><time timestamp='2016-04-04T08:14:00Z'>08:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
See any reason why we wouldn&#x27;t? sendmany&#x27;s workflow requires that the transaction it creates be valid now, that isn&#x27;t so for the raw workflow.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757700' id='460576'>
<a class='timestamp' href='#460576'><time timestamp='2016-04-04T08:15:00Z'>08:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
e.g. totally reasonable to use the rawworkflow to make a nlocked transaction for the future.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757760' id='460577'>
<a class='timestamp' href='#460577'><time timestamp='2016-04-04T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s just so ugly to have both high level logic and the ability to override
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757760' id='460578'>
<a class='timestamp' href='#460578'><time timestamp='2016-04-04T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
say we didn&#x27;t add csv support now, just optinrbf or not
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757760' id='460579'>
<a class='timestamp' href='#460579'><time timestamp='2016-04-04T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
someone starts using csv by setting the sequence number explicitly, but also passes optinrbf=no
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757820' id='460580'>
<a class='timestamp' href='#460580'><time timestamp='2016-04-04T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and expects a transaction that is not replacable
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757880' id='460581'>
<a class='timestamp' href='#460581'><time timestamp='2016-04-04T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I get what you&#x27;re saying, but a sequenced transaction implies at least sequence succession relplacability. But yes, ... that would not by far be the biggest footguns around that interface.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459757940' id='460582'>
<a class='timestamp' href='#460582'><time timestamp='2016-04-04T08:19:00Z'>08:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if createrawtransaction was instead just something that took an existing raw tx (empty be default?) and allowed adding inputs and outputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1459758780' id='460583'>
<a class='timestamp' href='#460583'><time timestamp='2016-04-04T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: the question is, do we think that rawtx users need to know the MAXINT-2 RBF opt-in seqnr? I think we should abstract these magic numbers from the rpc-users.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459758840' id='460584'>
<a class='timestamp' href='#460584'><time timestamp='2016-04-04T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
IMO it&#x27;s on a different level then the rawtx abstraction
<br>
</div>

<div class='talk op-msg' data-timestamp='1459758900' id='460585'>
<a class='timestamp' href='#460585'><time timestamp='2016-04-04T08:35:00Z'>08:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: createrawtransaction users also need to know that creating less outouts than inputs will send their life savings to miners
<br>
</div>

<div class='talk op-msg' data-timestamp='1459758900' id='460586'>
<a class='timestamp' href='#460586'><time timestamp='2016-04-04T08:35:00Z'>08:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: not if they use fundraw. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459758900' id='460587'>
<a class='timestamp' href='#460587'><time timestamp='2016-04-04T08:35:00Z'>08:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i totally agree that there should be a way for users to need to learn all the ugly details ofnthe semantics of all fields
<br>
</div>

<div class='talk op-msg' data-timestamp='1459758960' id='460588'>
<a class='timestamp' href='#460588'><time timestamp='2016-04-04T08:36:00Z'>08:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but so far, createrawtransaction has been the way to actually do control the exact values, and not the high level behaviour
<br>
</div>

<div class='talk op-msg' data-timestamp='1459758960' id='460589'>
<a class='timestamp' href='#460589'><time timestamp='2016-04-04T08:36:00Z'>08:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and mixing them may be seen as a recommendation for people to use createrawtransaction when it actually cannot guarantee safety without learning the details
<br>
</div>

<div class='talk op-msg' data-timestamp='1459758960' id='460590'>
<a class='timestamp' href='#460590'><time timestamp='2016-04-04T08:36:00Z'>08:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: I agree. But knowing also the magic numbers we use for nSequence is another &quot;level&quot;:
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759020' id='460591'>
<a class='timestamp' href='#460591'><time timestamp='2016-04-04T08:37:00Z'>08:37</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
At least we should offer some nSequence=BIP125 abstraction.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759020' id='460592'>
<a class='timestamp' href='#460592'><time timestamp='2016-04-04T08:37:00Z'>08:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759020' id='460593'>
<a class='timestamp' href='#460593'><time timestamp='2016-04-04T08:37:00Z'>08:37</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
The per-tx-general opt-in-to-Bip125 is probably to high. I agree.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759020' id='460594'>
<a class='timestamp' href='#460594'><time timestamp='2016-04-04T08:37:00Z'>08:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the magic nsquence is really MAX-1 which is not replacable when it logically should be (after all, the transaction is locktimed and non-final)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759080' id='460595'>
<a class='timestamp' href='#460595'><time timestamp='2016-04-04T08:38:00Z'>08:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but you should not be using createrawtransaction if you don&#x27;t know what the semantics of the raw transaction fields are, or you&#x27;ll shoot yourself in the foot
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759080' id='460596'>
<a class='timestamp' href='#460596'><time timestamp='2016-04-04T08:38:00Z'>08:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. Agree.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759080' id='460597'>
<a class='timestamp' href='#460597'><time timestamp='2016-04-04T08:38:00Z'>08:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But the BIP125 MAXINT-2 is a policy we should offer directly.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759140' id='460598'>
<a class='timestamp' href='#460598'><time timestamp='2016-04-04T08:39:00Z'>08:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
{&quot;txid&quot;: &lt;txid&gt;, &quot;vout&quot; : 0, &quot;sequence&quot;: &quot;BIP12&quot;} &lt;--- feels ugly
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759140' id='460599'>
<a class='timestamp' href='#460599'><time timestamp='2016-04-04T08:39:00Z'>08:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what will you do to add csv supoort to createrawtransaction?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759140' id='460600'>
<a class='timestamp' href='#460600'><time timestamp='2016-04-04T08:39:00Z'>08:39</time></a>
&lt;<span class='nick nick-12'> * jonasschnelli</span>&gt;
is thinking...
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759200' id='460601'>
<a class='timestamp' href='#460601'><time timestamp='2016-04-04T08:40:00Z'>08:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i really dislike mixing magic smart behaviour with raw overriding
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759200' id='460602'>
<a class='timestamp' href='#460602'><time timestamp='2016-04-04T08:40:00Z'>08:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t really like mixing types in a single argument name.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759200' id='460603'>
<a class='timestamp' href='#460603'><time timestamp='2016-04-04T08:40:00Z'>08:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that feels like the rpc is trying to solve things at different levels
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759260' id='460604'>
<a class='timestamp' href='#460604'><time timestamp='2016-04-04T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
flags per input? FLAG_BIP125_RBF, SEQUENCE_LOCKTIME_TYPE_FLAG?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759260' id='460605'>
<a class='timestamp' href='#460605'><time timestamp='2016-04-04T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
e.g. sequence: 12345  / and seqtype: &quot;BIP12&quot; and have their use be mutually exclusive would seem preferable to me.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759260' id='460606'>
<a class='timestamp' href='#460606'><time timestamp='2016-04-04T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
no. flags per input is bad.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759260' id='460607'>
<a class='timestamp' href='#460607'><time timestamp='2016-04-04T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;d almost argue for a computensequencevalue RPC
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759260' id='460608'>
<a class='timestamp' href='#460608'><time timestamp='2016-04-04T08:41:00Z'>08:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which just gives you the number to use, which you can put in crt
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759320' id='460609'>
<a class='timestamp' href='#460609'><time timestamp='2016-04-04T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but that&#x27;s cumbersome for human users...
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759320' id='460610'>
<a class='timestamp' href='#460610'><time timestamp='2016-04-04T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
RPC is not made for &quot;human&quot; users.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759320' id='460611'>
<a class='timestamp' href='#460611'><time timestamp='2016-04-04T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think its fine... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759320' id='460612'>
<a class='timestamp' href='#460612'><time timestamp='2016-04-04T08:42:00Z'>08:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Chains of commands is something that increase the modularity 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759380' id='460613'>
<a class='timestamp' href='#460613'><time timestamp='2016-04-04T08:43:00Z'>08:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the RPC is our commandline interface as well, and its usefulness aids in discoverability which makes it much easier to use as an RPC too.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759380' id='460614'>
<a class='timestamp' href='#460614'><time timestamp='2016-04-04T08:43:00Z'>08:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
like having an REPL makes python accessible to people.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759380' id='460615'>
<a class='timestamp' href='#460615'><time timestamp='2016-04-04T08:43:00Z'>08:43</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
A &quot;setoptinrbf &lt;rawtx&gt;&quot; is probably a bad design and leads to overriding ther nsequence magics
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759440' id='460616'>
<a class='timestamp' href='#460616'><time timestamp='2016-04-04T08:44:00Z'>08:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759440' id='460617'>
<a class='timestamp' href='#460617'><time timestamp='2016-04-04T08:44:00Z'>08:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
optinrbf should be something you choose per tx
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759440' id='460618'>
<a class='timestamp' href='#460618'><time timestamp='2016-04-04T08:44:00Z'>08:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: imo RPC != commandline, .. bitcoin-cli == commandline
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759440' id='460619'>
<a class='timestamp' href='#460619'><time timestamp='2016-04-04T08:44:00Z'>08:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
some receivers may not want such transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759440' id='460620'>
<a class='timestamp' href='#460620'><time timestamp='2016-04-04T08:44:00Z'>08:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
bitcoin-cli could combine stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759500' id='460621'>
<a class='timestamp' href='#460621'><time timestamp='2016-04-04T08:45:00Z'>08:45</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: &quot;setoptinrbf&quot; would be per rawtx.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759500' id='460622'>
<a class='timestamp' href='#460622'><time timestamp='2016-04-04T08:45:00Z'>08:45</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
It would just set the nSequence number of all inputs to MAXINT-2
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759500' id='460623'>
<a class='timestamp' href='#460623'><time timestamp='2016-04-04T08:45:00Z'>08:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: that would harm discoverability, I think it is unfortunate to create wildly different interfaces.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759500' id='460624'>
<a class='timestamp' href='#460624'><time timestamp='2016-04-04T08:45:00Z'>08:45</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But I don&#x27;t like the override character. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759500' id='460625'>
<a class='timestamp' href='#460625'><time timestamp='2016-04-04T08:45:00Z'>08:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: I hope it wouldn&#x27;t do that, I hope it would move anything from MAXINT/-1 to -2 and leave the rest alone.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759500' id='460626'>
<a class='timestamp' href='#460626'><time timestamp='2016-04-04T08:45:00Z'>08:45</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: Yes. It would add another level.. which I agree its bad.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759560' id='460627'>
<a class='timestamp' href='#460627'><time timestamp='2016-04-04T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: Yes. That could be nice (move MAXINT/-1 to -2)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759560' id='460628'>
<a class='timestamp' href='#460628'><time timestamp='2016-04-04T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
but would &quot;optinrbf &lt;rawtx&gt;&quot; not be to prominent for a policy flag?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759560' id='460629'>
<a class='timestamp' href='#460629'><time timestamp='2016-04-04T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(and unix has worked for decades where the programmatic interface to unix commands is the same as the human one)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759620' id='460630'>
<a class='timestamp' href='#460630'><time timestamp='2016-04-04T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
our &#x27;default&#x27; of using positional arguments does not help
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759620' id='460631'>
<a class='timestamp' href='#460631'><time timestamp='2016-04-04T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: I don&#x27;t think that it&#x27;s &quot;policy&quot; makes it any less useful to set it. From a api fanout perspective it might be better to have a tweakrawtxn that is multimodal.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759680' id='460632'>
<a class='timestamp' href='#460632'><time timestamp='2016-04-04T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
multimodal?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759680' id='460633'>
<a class='timestamp' href='#460633'><time timestamp='2016-04-04T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
<a href="https://bitcoincore.org/en/2016/04/04/announcing_sponsorship_programme/" class="link" target="_blank">https://bitcoincore.org/en/2016/04/04/announcing_sponsorship_programme/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759680' id='460634'>
<a class='timestamp' href='#460634'><time timestamp='2016-04-04T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
positional arguments are sadness. but the json style of arguments is sadness squared. Thats a place where I think bitcoin-cli translating unix style arguments to json might be OK, as long as it was done consistently so someone could just learn the cli to rpc mapping.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759740' id='460635'>
<a class='timestamp' href='#460635'><time timestamp='2016-04-04T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: as it tweakrawtxn &quot;hex&quot; optinrbf 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759740' id='460636'>
<a class='timestamp' href='#460636'><time timestamp='2016-04-04T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: ah, reimplementing bitcoin-tx as an rpc? ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759740' id='460637'>
<a class='timestamp' href='#460637'><time timestamp='2016-04-04T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Ha. Indeed. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759740' id='460638'>
<a class='timestamp' href='#460638'><time timestamp='2016-04-04T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
hehe..
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759800' id='460639'>
<a class='timestamp' href='#460639'><time timestamp='2016-04-04T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
what speaks against having these tweak-flags in crt?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759800' id='460640'>
<a class='timestamp' href='#460640'><time timestamp='2016-04-04T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
right now the api has excessive fanout. seperate top level functions for varioations on the same thing, side effect of positional arguments and legacy.  It means when looking up a command you have to go through long lists.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759860' id='460641'>
<a class='timestamp' href='#460641'><time timestamp='2016-04-04T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
crt?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759860' id='460642'>
<a class='timestamp' href='#460642'><time timestamp='2016-04-04T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
createrawtransaction
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759860' id='460643'>
<a class='timestamp' href='#460643'><time timestamp='2016-04-04T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
createrawtransaction &lt;inputs&gt; &lt;outputs&gt; &lt;flag|flag&gt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759860' id='460644'>
<a class='timestamp' href='#460644'><time timestamp='2016-04-04T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the existance of fundraw for one.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759860' id='460645'>
<a class='timestamp' href='#460645'><time timestamp='2016-04-04T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
fundrawtx interacts with the wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759920' id='460646'>
<a class='timestamp' href='#460646'><time timestamp='2016-04-04T08:52:00Z'>08:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the point is that if you set flags in createraw, they won&#x27;t be visible in fundraw and it might violate them.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759920' id='460647'>
<a class='timestamp' href='#460647'><time timestamp='2016-04-04T08:52:00Z'>08:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
&lt;flag|flag&gt; could be {&quot;bip125rbf&quot;:true, etc.}
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759920' id='460648'>
<a class='timestamp' href='#460648'><time timestamp='2016-04-04T08:52:00Z'>08:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: good point.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759920' id='460649'>
<a class='timestamp' href='#460649'><time timestamp='2016-04-04T08:52:00Z'>08:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
where as createraw | fundraw | tweak | signraw | sendraw is a fine pipeline.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759920' id='460650'>
<a class='timestamp' href='#460650'><time timestamp='2016-04-04T08:52:00Z'>08:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
hmm.. not bad. Fundraw could then remove the opt-in-rbf flag (because it can add inputs).
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759980' id='460651'>
<a class='timestamp' href='#460651'><time timestamp='2016-04-04T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
alternative names for &quot;tweak&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759980' id='460652'>
<a class='timestamp' href='#460652'><time timestamp='2016-04-04T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
mutate
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759980' id='460653'>
<a class='timestamp' href='#460653'><time timestamp='2016-04-04T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
alter?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759980' id='460654'>
<a class='timestamp' href='#460654'><time timestamp='2016-04-04T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
alter
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759980' id='460655'>
<a class='timestamp' href='#460655'><time timestamp='2016-04-04T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
modify
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759980' id='460656'>
<a class='timestamp' href='#460656'><time timestamp='2016-04-04T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
modify is probably most understandable... but that blitcoin-cli in RPC!
<br>
</div>

<div class='talk op-msg' data-timestamp='1459759980' id='460657'>
<a class='timestamp' href='#460657'><time timestamp='2016-04-04T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in the bitcoin-tx source code they are called mutate
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760040' id='460658'>
<a class='timestamp' href='#460658'><time timestamp='2016-04-04T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
spindletx
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760040' id='460659'>
<a class='timestamp' href='#460659'><time timestamp='2016-04-04T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
transmogrifyrawtx
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760040' id='460660'>
<a class='timestamp' href='#460660'><time timestamp='2016-04-04T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Presotchangotx
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760040' id='460661'>
<a class='timestamp' href='#460661'><time timestamp='2016-04-04T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-12'> * jonasschnelli</span>&gt;
lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760040' id='460662'>
<a class='timestamp' href='#460662'><time timestamp='2016-04-04T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
alterrawtx is probably fine.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760040' id='460663'>
<a class='timestamp' href='#460663'><time timestamp='2016-04-04T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
+1 for alterrawttransaction
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760100' id='460664'>
<a class='timestamp' href='#460664'><time timestamp='2016-04-04T08:55:00Z'>08:55</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
We could start with RBF...
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760100' id='460665'>
<a class='timestamp' href='#460665'><time timestamp='2016-04-04T08:55:00Z'>08:55</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
add CSV..
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760100' id='460666'>
<a class='timestamp' href='#460666'><time timestamp='2016-04-04T08:55:00Z'>08:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I guess thats more consistent. (the fact that transaction is spelled out is one of the sadder parts of the interface)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760100' id='460667'>
<a class='timestamp' href='#460667'><time timestamp='2016-04-04T08:55:00Z'>08:55</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
and someone could also implement adding ins and outs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760100' id='460668'>
<a class='timestamp' href='#460668'><time timestamp='2016-04-04T08:55:00Z'>08:55</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But once we said keep the utilities outside of the RPC level
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760100' id='460669'>
<a class='timestamp' href='#460669'><time timestamp='2016-04-04T08:55:00Z'>08:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We sometimes made made choices.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760160' id='460670'>
<a class='timestamp' href='#460670'><time timestamp='2016-04-04T08:56:00Z'>08:56</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I agree. RPC is very handy for utitilites... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459760760' id='460671'>
<a class='timestamp' href='#460671'><time timestamp='2016-04-04T09:06:00Z'>09:06</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell, sipa: If you interested to review the enc/auth BIP again, a new version is here <a href="https://github.com/bitcoin/bips/pull/362/files" class="link" target="_blank">https://github.com/bitcoin/bips/pull/362/files</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761000' id='460672'>
<a class='timestamp' href='#460672'><time timestamp='2016-04-04T09:10:00Z'>09:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
64-bit MAC, really?  This leaks message lengths. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761120' id='460673'>
<a class='timestamp' href='#460673'><time timestamp='2016-04-04T09:12:00Z'>09:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
probably should remove the performance claims from the document? they&#x27;ll just invite debate over the document text. AES-128-GCM is quite a bit faster than chacha when AES-NI is used. (I&#x27;m not arguing it here, just pointing out the argument)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761180' id='460674'>
<a class='timestamp' href='#460674'><time timestamp='2016-04-04T09:13:00Z'>09:13</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Is there any need to limit the rekeying that strictly? if it&#x27;s just a hash operation, someone can just send us transactions to make us hash over and over again.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761180' id='460675'>
<a class='timestamp' href='#460675'><time timestamp='2016-04-04T09:13:00Z'>09:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
when AES-NI is used &lt;- but our odroid C2 doesn&#x27;t have AES-NI :o
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761240' id='460676'>
<a class='timestamp' href='#460676'><time timestamp='2016-04-04T09:14:00Z'>09:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: why 64bit mac? Because of the SHA512?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761240' id='460677'>
<a class='timestamp' href='#460677'><time timestamp='2016-04-04T09:14:00Z'>09:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
hah I know, I was advocating before that we only use chacha here... (the alternative is to support both and negoiate when both ends have aes-ni).
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761300' id='460678'>
<a class='timestamp' href='#460678'><time timestamp='2016-04-04T09:15:00Z'>09:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
agree, let&#x27;s just settle on that. I don&#x27;t think the performance considerations in the cipher are the problem here so I also agree with not making it primary in the document
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761300' id='460679'>
<a class='timestamp' href='#460679'><time timestamp='2016-04-04T09:15:00Z'>09:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: the rekeying is local policy, but should not be under 600 seconds to avoid dos (<a href="https://github.com/bitcoin/bips/pull/362/files#diff-0bd7a3b80179294f4bcb38cae13c8534R142" class="link" target="_blank">https://github.com/bitcoin/bips/pull/362/files#diff-0bd7a3b80179294f4bcb38cae13c8534R142</a>)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761300' id='460680'>
<a class='timestamp' href='#460680'><time timestamp='2016-04-04T09:15:00Z'>09:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: it&#x27;s using a 4byte length, which is very wasteful. (on average 2.5 bytes will be wasted) but then only an 8 byte mac which is quite weak. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761300' id='460681'>
<a class='timestamp' href='#460681'><time timestamp='2016-04-04T09:15:00Z'>09:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: poly1305 does not have 256-bit security, and certainly not when you truncate the tag to 64 bits!
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761360' id='460682'>
<a class='timestamp' href='#460682'><time timestamp='2016-04-04T09:16:00Z'>09:16</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: if the timeout is 600 seconds, then a sender cannot rekey for some multiple of that for fear that the far end has a different idea of the arrival time. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761360' id='460683'>
<a class='timestamp' href='#460683'><time timestamp='2016-04-04T09:16:00Z'>09:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: Chacha20 offers 256bit security. I though the poly MAC does not affect the security itself,... only the authentication? Not?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761420' id='460684'>
<a class='timestamp' href='#460684'><time timestamp='2016-04-04T09:17:00Z'>09:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: authentication is part of the security
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761420' id='460685'>
<a class='timestamp' href='#460685'><time timestamp='2016-04-04T09:17:00Z'>09:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it protects against different types of tlattacks
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761420' id='460686'>
<a class='timestamp' href='#460686'><time timestamp='2016-04-04T09:17:00Z'>09:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*attacks
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761420' id='460687'>
<a class='timestamp' href='#460687'><time timestamp='2016-04-04T09:17:00Z'>09:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Okay... I see.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761420' id='460688'>
<a class='timestamp' href='#460688'><time timestamp='2016-04-04T09:17:00Z'>09:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: the cipher and authentication security go hand in hand, if you can compromise the authentication you can usually make the endpoints leak information about the content.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761480' id='460689'>
<a class='timestamp' href='#460689'><time timestamp='2016-04-04T09:18:00Z'>09:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But 256bit security does not reflect the overall robustness....
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761480' id='460690'>
<a class='timestamp' href='#460690'><time timestamp='2016-04-04T09:18:00Z'>09:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But right. Let me better remove this line.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761480' id='460691'>
<a class='timestamp' href='#460691'><time timestamp='2016-04-04T09:18:00Z'>09:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: So you think truncate the TAG to 8 byte is still to long?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761480' id='460692'>
<a class='timestamp' href='#460692'><time timestamp='2016-04-04T09:18:00Z'>09:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
no it&#x27;s too short.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761540' id='460693'>
<a class='timestamp' href='#460693'><time timestamp='2016-04-04T09:19:00Z'>09:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I would suggest the length be made variable length, self-delimiting, encrypted like in the ssh spec... and that tag length be increased. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761600' id='460694'>
<a class='timestamp' href='#460694'><time timestamp='2016-04-04T09:20:00Z'>09:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Okay. So using the non-truncated full 128bit poly1305 tag?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761600' id='460695'>
<a class='timestamp' href='#460695'><time timestamp='2016-04-04T09:20:00Z'>09:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
much of the cost of a longer tag could be paid by making the length shorter.  There are some things using 12 byte tags, but I&#x27;m not sure what I think about that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761600' id='460696'>
<a class='timestamp' href='#460696'><time timestamp='2016-04-04T09:20:00Z'>09:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: length variable length -&gt; do you mean varint serialization?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761660' id='460697'>
<a class='timestamp' href='#460697'><time timestamp='2016-04-04T09:21:00Z'>09:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i think varint serialization is overkill 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761660' id='460698'>
<a class='timestamp' href='#460698'><time timestamp='2016-04-04T09:21:00Z'>09:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
The current message structure also has a int32 for the length. Maybe we keep the varint outside of the message header.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761720' id='460699'>
<a class='timestamp' href='#460699'><time timestamp='2016-04-04T09:22:00Z'>09:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: better than truncating the MAC to 8 bytes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761720' id='460700'>
<a class='timestamp' href='#460700'><time timestamp='2016-04-04T09:22:00Z'>09:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
varint is slightly inconvenient, it&#x27;s nice to be able to read network headers at once
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761780' id='460701'>
<a class='timestamp' href='#460701'><time timestamp='2016-04-04T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
how does ssh handle this?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761780' id='460702'>
<a class='timestamp' href='#460702'><time timestamp='2016-04-04T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
uses a fixed width interger, it&#x27;s encrypted however.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761780' id='460703'>
<a class='timestamp' href='#460703'><time timestamp='2016-04-04T09:23:00Z'>09:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The varint suggestion was trying to recover the overhead from the longer mac tag, I&#x27;m not wed to the idea.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761840' id='460704'>
<a class='timestamp' href='#460704'><time timestamp='2016-04-04T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I don&#x27;t think we should couple the MAC size discussion to the packet length field discussion in any case, at most you&#x27;d save ~2 bytes for the typical packet
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761840' id='460705'>
<a class='timestamp' href='#460705'><time timestamp='2016-04-04T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Many of the messages in bitcoin are quite small, so the extra lengths do make a meaningful impact.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761840' id='460706'>
<a class='timestamp' href='#460706'><time timestamp='2016-04-04T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, but reading one byte of a time from a TCP stream :-(
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761840' id='460707'>
<a class='timestamp' href='#460707'><time timestamp='2016-04-04T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
average message size in bitcoin p2p is someting like 100 bytes right now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761840' id='460708'>
<a class='timestamp' href='#460708'><time timestamp='2016-04-04T09:24:00Z'>09:24</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
let&#x27;s increase the MAC size and leave the length at four bytes for now
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761900' id='460709'>
<a class='timestamp' href='#460709'><time timestamp='2016-04-04T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yup
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761900' id='460710'>
<a class='timestamp' href='#460710'><time timestamp='2016-04-04T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Okay. Will do.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761900' id='460711'>
<a class='timestamp' href='#460711'><time timestamp='2016-04-04T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: well you had the idea to collate P2P packets into encryption packets ...
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761900' id='460712'>
<a class='timestamp' href='#460712'><time timestamp='2016-04-04T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(I know, futur work.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761900' id='460713'>
<a class='timestamp' href='#460713'><time timestamp='2016-04-04T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: which is also in the bip, btw
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761900' id='460714'>
<a class='timestamp' href='#460714'><time timestamp='2016-04-04T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: re-keying minimum of 600 seconds is to large?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761900' id='460715'>
<a class='timestamp' href='#460715'><time timestamp='2016-04-04T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh!
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761900' id='460716'>
<a class='timestamp' href='#460716'><time timestamp='2016-04-04T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, though there is 4 byte lengths at each level. At least that helps with mac overhead.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761960' id='460717'>
<a class='timestamp' href='#460717'><time timestamp='2016-04-04T09:26:00Z'>09:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well in the inner packet I&#x27;m not opposed to varints
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761960' id='460718'>
<a class='timestamp' href='#460718'><time timestamp='2016-04-04T09:26:00Z'>09:26</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
those packets are in memory already
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761960' id='460719'>
<a class='timestamp' href='#460719'><time timestamp='2016-04-04T09:26:00Z'>09:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: I&#x27;d make it 10 seconds or something very small. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761960' id='460720'>
<a class='timestamp' href='#460720'><time timestamp='2016-04-04T09:26:00Z'>09:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rekey every 10 seconds?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761960' id='460721'>
<a class='timestamp' href='#460721'><time timestamp='2016-04-04T09:26:00Z'>09:26</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: min. 10 sec
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761960' id='460722'>
<a class='timestamp' href='#460722'><time timestamp='2016-04-04T09:26:00Z'>09:26</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
flexible local policy.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459761960' id='460723'>
<a class='timestamp' href='#460723'><time timestamp='2016-04-04T09:26:00Z'>09:26</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
A node could detect repeating re-keys and ban
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762020' id='460724'>
<a class='timestamp' href='#460724'><time timestamp='2016-04-04T09:27:00Z'>09:27</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I just want a minimum timespan between re-key in the BIP.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762020' id='460725'>
<a class='timestamp' href='#460725'><time timestamp='2016-04-04T09:27:00Z'>09:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t think a minimum timespan is needed, but if one is there it shouldn&#x27;t be 600 seconds. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762080' id='460726'>
<a class='timestamp' href='#460726'><time timestamp='2016-04-04T09:28:00Z'>09:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: Yes. We could also leave that open to the implementation. But the most obvious attack vectors maybe should be covered by the BIP?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762080' id='460727'>
<a class='timestamp' href='#460727'><time timestamp='2016-04-04T09:28:00Z'>09:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if we care about overhead, the first thing to consider would be making those 12-byte message names varlen :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762140' id='460728'>
<a class='timestamp' href='#460728'><time timestamp='2016-04-04T09:29:00Z'>09:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Indeed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762140' id='460729'>
<a class='timestamp' href='#460729'><time timestamp='2016-04-04T09:29:00Z'>09:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762140' id='460730'>
<a class='timestamp' href='#460730'><time timestamp='2016-04-04T09:29:00Z'>09:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
We could do this for the encrypted message stucture.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762140' id='460731'>
<a class='timestamp' href='#460731'><time timestamp='2016-04-04T09:29:00Z'>09:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: rekeying every second will still be much lower overhead than normal transaction relay...
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762140' id='460732'>
<a class='timestamp' href='#460732'><time timestamp='2016-04-04T09:29:00Z'>09:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
+1 for making those varlen, that padding is ugly and people have accidentally leaked memory contents into them in the past :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762200' id='460733'>
<a class='timestamp' href='#460733'><time timestamp='2016-04-04T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: Hmm... right. Its just a 2xSHA256. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762200' id='460734'>
<a class='timestamp' href='#460734'><time timestamp='2016-04-04T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: no, it&#x27;s an ecdh
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762200' id='460735'>
<a class='timestamp' href='#460735'><time timestamp='2016-04-04T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which is similar to a signature validation in time
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762200' id='460736'>
<a class='timestamp' href='#460736'><time timestamp='2016-04-04T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: No. The ECDH is done already,... its only hash(old_key)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762200' id='460737'>
<a class='timestamp' href='#460737'><time timestamp='2016-04-04T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: rekey means doing ecdh again
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762200' id='460738'>
<a class='timestamp' href='#460738'><time timestamp='2016-04-04T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it shouldn&#x27;t.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762200' id='460739'>
<a class='timestamp' href='#460739'><time timestamp='2016-04-04T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it doesn&#x27;t in the spec.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762260' id='460740'>
<a class='timestamp' href='#460740'><time timestamp='2016-04-04T09:31:00Z'>09:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762260' id='460741'>
<a class='timestamp' href='#460741'><time timestamp='2016-04-04T09:31:00Z'>09:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: it&#x27;s logically just cranking the initial KDF csprng to the next state.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762380' id='460742'>
<a class='timestamp' href='#460742'><time timestamp='2016-04-04T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
 okay. 1.) command varlen 2.) AEAD-tag 128bits, 3.) remove 256bit security mentioning.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762380' id='460743'>
<a class='timestamp' href='#460743'><time timestamp='2016-04-04T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
on auth, this protocol looks like it would result in a bitcoin daemon announcing a persistant identity to everyone that connects to it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762440' id='460744'>
<a class='timestamp' href='#460744'><time timestamp='2016-04-04T09:34:00Z'>09:34</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
According to <a href="https://www.ietf.org/proceedings/88/slides/slides-88-tls-1.pdf" class="link" target="_blank">https://www.ietf.org/proceedings/88/slides/slides-88-tls-1.pdf</a> AES-128-GCM is slower then ChaCha20+Poly1305
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762440' id='460745'>
<a class='timestamp' href='#460745'><time timestamp='2016-04-04T09:34:00Z'>09:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Is there a reason not to use the scheme I suggested where the client sends an auth challenge which is H(session-id||server-pubkey)  and if the server reconizes one of his keys, he responds with a signature?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762440' id='460746'>
<a class='timestamp' href='#460746'><time timestamp='2016-04-04T09:34:00Z'>09:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: aes-gcm is slowish without hardware support, very fast with
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762500' id='460747'>
<a class='timestamp' href='#460747'><time timestamp='2016-04-04T09:35:00Z'>09:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: only if you don not have AES-NI. If you do AES-128-GCM is maybe 7 times faster.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762500' id='460748'>
<a class='timestamp' href='#460748'><time timestamp='2016-04-04T09:35:00Z'>09:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: aes-gcm can get to 1 cycle/byte on modern hardware with asm code
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762500' id='460749'>
<a class='timestamp' href='#460749'><time timestamp='2016-04-04T09:35:00Z'>09:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: chacha20-poly1305 is hard to get under 4ish, i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762500' id='460750'>
<a class='timestamp' href='#460750'><time timestamp='2016-04-04T09:35:00Z'>09:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
a... i see. AES-NI: 892 MB/s, ChaCha20+Poly1305, -march=native = 560 MB/s
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762560' id='460751'>
<a class='timestamp' href='#460751'><time timestamp='2016-04-04T09:36:00Z'>09:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: the identity would only be revealed by the requesting peer.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762560' id='460752'>
<a class='timestamp' href='#460752'><time timestamp='2016-04-04T09:36:00Z'>09:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
So the requesting peer would know who he wants to give its identity price.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762620' id='460753'>
<a class='timestamp' href='#460753'><time timestamp='2016-04-04T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
The responding peers only reveals its identity if the requesting peers identity &quot;was accepted&quot;.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762620' id='460754'>
<a class='timestamp' href='#460754'><time timestamp='2016-04-04T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: gmaxwell&#x27;s protocol never reveals identity, and only works if both sides know the pubkey beforehand
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762680' id='460755'>
<a class='timestamp' href='#460755'><time timestamp='2016-04-04T09:38:00Z'>09:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Hmm... yes: H(session-id||server-pubkey)  makes sense.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762680' id='460756'>
<a class='timestamp' href='#460756'><time timestamp='2016-04-04T09:38:00Z'>09:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: those numbers are certainly not the best possible ones
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762680' id='460757'>
<a class='timestamp' href='#460757'><time timestamp='2016-04-04T09:38:00Z'>09:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
okay.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762740' id='460758'>
<a class='timestamp' href='#460758'><time timestamp='2016-04-04T09:39:00Z'>09:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
then it hast to be mutual, but what if you just have a trusted node and many things that connect to it. You don&#x27;t want to do per-peer setup on each side (if you do-- you could setup symmetric keys).  The downside of my protocol is that if you have many different identities you&#x27;d have to try all of them, but hashing is cheap, and I don&#x27;t see a reason to have a huge number of alternative identitie
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762740' id='460759'>
<a class='timestamp' href='#460759'><time timestamp='2016-04-04T09:39:00Z'>09:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
s.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762800' id='460760'>
<a class='timestamp' href='#460760'><time timestamp='2016-04-04T09:40:00Z'>09:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
hmm.. so we assume the requesting peer can link a IP to a pubkey
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762800' id='460761'>
<a class='timestamp' href='#460761'><time timestamp='2016-04-04T09:40:00Z'>09:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;d prefer focussing on encryption first :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762800' id='460762'>
<a class='timestamp' href='#460762'><time timestamp='2016-04-04T09:40:00Z'>09:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;d also made a suggestion that auth trigger a rekeying. with the pubkey in the rekeying. Because this has a cute property of being forever forward secure even if ecc is broken, if the public keys are kept private. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762860' id='460763'>
<a class='timestamp' href='#460763'><time timestamp='2016-04-04T09:41:00Z'>09:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: well he hopefully knows who he thinks he&#x27;s connecting to-- more like the other way around, he has something he wants to connect to (pubkey), and has an IP he thinks belongs to it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762860' id='460764'>
<a class='timestamp' href='#460764'><time timestamp='2016-04-04T09:41:00Z'>09:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but yea, maybe hammer out encryption first.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762860' id='460765'>
<a class='timestamp' href='#460765'><time timestamp='2016-04-04T09:41:00Z'>09:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Could the responding peer answer with a signature of the received hash(received-hash || session-id||server-pubkey)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762860' id='460766'>
<a class='timestamp' href='#460766'><time timestamp='2016-04-04T09:41:00Z'>09:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think auth and enc has some overlaps.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762920' id='460767'>
<a class='timestamp' href='#460767'><time timestamp='2016-04-04T09:42:00Z'>09:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(at least in thinking about a solution)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762980' id='460768'>
<a class='timestamp' href='#460768'><time timestamp='2016-04-04T09:43:00Z'>09:43</time></a>
&lt;<span class='nick nick-12'> * jonasschnelli</span>&gt;
needs to go afk for 1h
<br>
</div>

<div class='talk op-msg' data-timestamp='1459762980' id='460769'>
<a class='timestamp' href='#460769'><time timestamp='2016-04-04T09:43:00Z'>09:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
All he should need to do is sign the session-id. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459763340' id='460770'>
<a class='timestamp' href='#460770'><time timestamp='2016-04-04T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-13'> Anduck</span>&gt;
who answers from contact@bitcoincore.org?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459763340' id='460771'>
<a class='timestamp' href='#460771'><time timestamp='2016-04-04T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-13'> Anduck</span>&gt;
i see lots of &quot;contact us&quot; etc. but no names
<br>
</div>

<div class='talk op-msg' data-timestamp='1459763340' id='460772'>
<a class='timestamp' href='#460772'><time timestamp='2016-04-04T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-13'> Anduck</span>&gt;
like who actually run it
<br>
</div>

<div class='talk op-msg' data-timestamp='1459764060' id='460773'>
<a class='timestamp' href='#460773'><time timestamp='2016-04-04T10:01:00Z'>10:01</time></a>
&lt;<span class='nick nick-9'> GitHub148</span>&gt;
[bitcoin] gmaxwell opened pull request #7805: Eliminate TX trickle bypass, sort TX invs for privacy and priority. (master...sorted_invs) <a href="https://github.com/bitcoin/bitcoin/pull/7805" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7805</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459767900' id='460774'>
<a class='timestamp' href='#460774'><time timestamp='2016-04-04T11:05:00Z'>11:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: I agree that encryption should be made first. But I just want to avoid that people start using it, and think: &quot;okay, now everything is encrypted, let me use minimum BF FPR&quot;, but MITM is still trivial. Auth would allow to reduce the MITM scenario.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768140' id='460775'>
<a class='timestamp' href='#460775'><time timestamp='2016-04-04T11:09:00Z'>11:09</time></a>
&lt;<span class='nick nick-4'> GitHub1</span>&gt;
[bitcoin] laanwj closed pull request #7543: [0.12] Backport BIP9, BIP68 and BIP112 with softfork (0.12...dot12_backport_bip68) <a href="https://github.com/bitcoin/bitcoin/pull/7543" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7543</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768140' id='460776'>
<a class='timestamp' href='#460776'><time timestamp='2016-04-04T11:09:00Z'>11:09</time></a>
&lt;<span class='nick nick-4'> GitHub144</span>&gt;
[bitcoin] laanwj pushed 24 new commits to 0.12: <a href="https://github.com/bitcoin/bitcoin/compare/c5f94f6584cb...834aaef7bd37" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/c5f94f6584cb...834aaef7bd37</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768140' id='460777'>
<a class='timestamp' href='#460777'><time timestamp='2016-04-04T11:09:00Z'>11:09</time></a>
&lt;<span class='nick nick-4'> GitHub144</span>&gt;
bitcoin/0.12 15ba08c Alex Morcos: Implement SequenceLocks functions...
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768140' id='460778'>
<a class='timestamp' href='#460778'><time timestamp='2016-04-04T11:09:00Z'>11:09</time></a>
&lt;<span class='nick nick-4'> GitHub144</span>&gt;
bitcoin/0.12 0d09af7 Suhas Daftuar: Add RPC test exercising BIP68 (mempool only)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768140' id='460779'>
<a class='timestamp' href='#460779'><time timestamp='2016-04-04T11:09:00Z'>11:09</time></a>
&lt;<span class='nick nick-4'> GitHub144</span>&gt;
bitcoin/0.12 0a79c04 Alex Morcos: Bug fix to RPC test
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768200' id='460780'>
<a class='timestamp' href='#460780'><time timestamp='2016-04-04T11:10:00Z'>11:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: bf for?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768200' id='460781'>
<a class='timestamp' href='#460781'><time timestamp='2016-04-04T11:10:00Z'>11:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
bf fpr?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768200' id='460782'>
<a class='timestamp' href='#460782'><time timestamp='2016-04-04T11:10:00Z'>11:10</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
bloomfilter false positive rate
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768200' id='460783'>
<a class='timestamp' href='#460783'><time timestamp='2016-04-04T11:10:00Z'>11:10</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(in case you want to connect a SPV wallet to a node over enc. channels)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768260' id='460784'>
<a class='timestamp' href='#460784'><time timestamp='2016-04-04T11:11:00Z'>11:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: i don&#x27;t mean that we should encryption running first in production
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768260' id='460785'>
<a class='timestamp' href='#460785'><time timestamp='2016-04-04T11:11:00Z'>11:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but just have it designed and perhaps implemented first
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768260' id='460786'>
<a class='timestamp' href='#460786'><time timestamp='2016-04-04T11:11:00Z'>11:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as it interacts heavily with network code
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768260' id='460787'>
<a class='timestamp' href='#460787'><time timestamp='2016-04-04T11:11:00Z'>11:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
gmaxwell: H(session-id||server-pubkey) would have once downside: extending to an concept where you can connect to a peer where you don&#x27;t have pre-shared identity-keys
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768320' id='460788'>
<a class='timestamp' href='#460788'><time timestamp='2016-04-04T11:12:00Z'>11:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: okay. Yes. That make sense.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768320' id='460789'>
<a class='timestamp' href='#460789'><time timestamp='2016-04-04T11:12:00Z'>11:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: if you don&#x27;t have pre-shared keys, what are you trying to accomplish?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768320' id='460790'>
<a class='timestamp' href='#460790'><time timestamp='2016-04-04T11:12:00Z'>11:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: I agree. It&#x27;s a different security level. But it would allow to make sure that further connections are going to the same node.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768380' id='460791'>
<a class='timestamp' href='#460791'><time timestamp='2016-04-04T11:13:00Z'>11:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: that&#x27;s by definition fingerprinting the node
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768380' id='460792'>
<a class='timestamp' href='#460792'><time timestamp='2016-04-04T11:13:00Z'>11:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m unconvinced that&#x27;s something we should aim for
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768440' id='460793'>
<a class='timestamp' href='#460793'><time timestamp='2016-04-04T11:14:00Z'>11:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
at least, it&#x27;s a very different thing from what we&#x27;ve been doing recently, namely trying to avoid fingerprinting
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768440' id='460794'>
<a class='timestamp' href='#460794'><time timestamp='2016-04-04T11:14:00Z'>11:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe there is some mechanism possible where the key is based on the ip, and you never leak identity information for other incoming network addresses
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768500' id='460795'>
<a class='timestamp' href='#460795'><time timestamp='2016-04-04T11:15:00Z'>11:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: Yes. Probably. Well, .. i though you could connect to a node, reveal you identity, get the pubkey if the remote node wants to show its identity, .. further MITM would be detectable. But agree. If MITM would be there in first place you have lost anyways.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768500' id='460796'>
<a class='timestamp' href='#460796'><time timestamp='2016-04-04T11:15:00Z'>11:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: yes, that&#x27;s called tofu (trust on first use)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768560' id='460797'>
<a class='timestamp' href='#460797'><time timestamp='2016-04-04T11:16:00Z'>11:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Ah.. that&#x27;s the tofu. Thanks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768560' id='460798'>
<a class='timestamp' href='#460798'><time timestamp='2016-04-04T11:16:00Z'>11:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but that may not something you want in general... for example if a node is available over tor and over a normal iov4, you don&#x27;t want it to have the same identity on both
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768680' id='460799'>
<a class='timestamp' href='#460799'><time timestamp='2016-04-04T11:18:00Z'>11:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: hmm.. this would mean one identity per net-type?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768680' id='460800'>
<a class='timestamp' href='#460800'><time timestamp='2016-04-04T11:18:00Z'>11:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe something you only want for servers on static ips, and only on the listening side
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768740' id='460801'>
<a class='timestamp' href='#460801'><time timestamp='2016-04-04T11:19:00Z'>11:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so i think it&#x27;s an orthogonal use case
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768800' id='460802'>
<a class='timestamp' href='#460802'><time timestamp='2016-04-04T11:20:00Z'>11:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not just per net type
<br>
</div>

<div class='talk op-msg' data-timestamp='1459768860' id='460803'>
<a class='timestamp' href='#460803'><time timestamp='2016-04-04T11:21:00Z'>11:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you receive a connection on localhost, what key do you use? that may depend on whether it&#x27;s a trusted local connection, or it&#x27;s coming via a proxied tor
<br>
</div>

<div class='talk op-msg' data-timestamp='1459769700' id='460804'>
<a class='timestamp' href='#460804'><time timestamp='2016-04-04T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
If the authack signature would also contain the encryption-session-id (for the opposite com. direction) and the identity-pubkey from the responding peer, that would probably avoid an auth/authack initiated from the responding peer.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459769700' id='460805'>
<a class='timestamp' href='#460805'><time timestamp='2016-04-04T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
auth: H(enc-session-id-A || indenity-pubkey)-A
<br>
</div>

<div class='talk op-msg' data-timestamp='1459769760' id='460806'>
<a class='timestamp' href='#460806'><time timestamp='2016-04-04T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
auth: H(enc-session-id-A || indenity-pubkey-A), authack: sig(H(enc-session-id-B || indenity-pubkey-B))
<br>
</div>

<div class='talk op-msg' data-timestamp='1459769760' id='460807'>
<a class='timestamp' href='#460807'><time timestamp='2016-04-04T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
no wait...
<br>
</div>

<div class='talk op-msg' data-timestamp='1459769760' id='460808'>
<a class='timestamp' href='#460808'><time timestamp='2016-04-04T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
auth: H(enc-session-id-A || indenity-pubkey-A), authack: sig(H(auth-request-hash || enc-session-id-B || indenity-pubkey-B))
<br>
</div>

<div class='talk op-msg' data-timestamp='1459769820' id='460809'>
<a class='timestamp' href='#460809'><time timestamp='2016-04-04T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
where does the pubkey of the other side come from?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459769820' id='460810'>
<a class='timestamp' href='#460810'><time timestamp='2016-04-04T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: the identity pubkey from the other side.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459769880' id='460811'>
<a class='timestamp' href='#460811'><time timestamp='2016-04-04T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(should be node by the requesting peer because we assume pre-shared keys)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459769880' id='460812'>
<a class='timestamp' href='#460812'><time timestamp='2016-04-04T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
<b>*pre-shared pubkey*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770000' id='460813'>
<a class='timestamp' href='#460813'><time timestamp='2016-04-04T11:40:00Z'>11:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
let&#x27;s go over the use cases one by one
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770000' id='460814'>
<a class='timestamp' href='#460814'><time timestamp='2016-04-04T11:40:00Z'>11:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i know 3
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770060' id='460815'>
<a class='timestamp' href='#460815'><time timestamp='2016-04-04T11:41:00Z'>11:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
1) light client connecting to a trusted full node; in this case the light client needs to have the pubkey of the trusted node
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770120' id='460816'>
<a class='timestamp' href='#460816'><time timestamp='2016-04-04T11:42:00Z'>11:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
2) full node only provides (part of) its services to known peers, for example bloom filtering, or block download, or whitelisting, ...; in this case the full node needs to have the pubkey of the client
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770120' id='460817'>
<a class='timestamp' href='#460817'><time timestamp='2016-04-04T11:42:00Z'>11:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
3) tofu security between any nodes on the network
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770120' id='460818'>
<a class='timestamp' href='#460818'><time timestamp='2016-04-04T11:42:00Z'>11:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think 1 and 2 are fundamentally different from 3
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770120' id='460819'>
<a class='timestamp' href='#460819'><time timestamp='2016-04-04T11:42:00Z'>11:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think we should focus for 1/2.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770180' id='460820'>
<a class='timestamp' href='#460820'><time timestamp='2016-04-04T11:43:00Z'>11:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
because 1 and 2 never need to reveal identities, only provide proof when requested
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770180' id='460821'>
<a class='timestamp' href='#460821'><time timestamp='2016-04-04T11:43:00Z'>11:43</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Do you think 1 without 2 is something we should aim for?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770180' id='460822'>
<a class='timestamp' href='#460822'><time timestamp='2016-04-04T11:43:00Z'>11:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think 1 and 2 are orthogonal
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770180' id='460823'>
<a class='timestamp' href='#460823'><time timestamp='2016-04-04T11:43:00Z'>11:43</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. I agree.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770180' id='460824'>
<a class='timestamp' href='#460824'><time timestamp='2016-04-04T11:43:00Z'>11:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and they can use the exact same code, just in the other direction
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770240' id='460825'>
<a class='timestamp' href='#460825'><time timestamp='2016-04-04T11:44:00Z'>11:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Then we probably need: auth: H(enc-session-id-A || indenity-pubkey-A), authack: sig(requesting-hash)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770240' id='460826'>
<a class='timestamp' href='#460826'><time timestamp='2016-04-04T11:44:00Z'>11:44</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
For both sides.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770300' id='460827'>
<a class='timestamp' href='#460827'><time timestamp='2016-04-04T11:45:00Z'>11:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t think that adds anything over signing just the session id
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770300' id='460828'>
<a class='timestamp' href='#460828'><time timestamp='2016-04-04T11:45:00Z'>11:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Schnorr signatures internally compute a message hash, which is based on the message and the signing pubkey
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770300' id='460829'>
<a class='timestamp' href='#460829'><time timestamp='2016-04-04T11:45:00Z'>11:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so they already do that internally
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770360' id='460830'>
<a class='timestamp' href='#460830'><time timestamp='2016-04-04T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
if we assume ECDSA, would you then recover the pubkey from the sig to lookup the identity?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770420' id='460831'>
<a class='timestamp' href='#460831'><time timestamp='2016-04-04T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
? you asked for it, you know it already
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770420' id='460832'>
<a class='timestamp' href='#460832'><time timestamp='2016-04-04T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
&quot;hey, are you X?&quot; - &quot;yes, here is proof&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770480' id='460833'>
<a class='timestamp' href='#460833'><time timestamp='2016-04-04T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we could use bitcoin script for the signatures, so you can do multisig auth :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770480' id='460834'>
<a class='timestamp' href='#460834'><time timestamp='2016-04-04T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
heh.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770480' id='460835'>
<a class='timestamp' href='#460835'><time timestamp='2016-04-04T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
&quot;hey, are you X, Y, or Z?&quot; - &quot;yes, here is a scriptSig&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770540' id='460836'>
<a class='timestamp' href='#460836'><time timestamp='2016-04-04T11:49:00Z'>11:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no good use case for that though, so let&#x27;s not exaggerate
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770540' id='460837'>
<a class='timestamp' href='#460837'><time timestamp='2016-04-04T11:49:00Z'>11:49</time></a>
&lt;<span class='nick nick-12'> * jonasschnelli</span>&gt;
thinking...
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770600' id='460838'>
<a class='timestamp' href='#460838'><time timestamp='2016-04-04T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
For your usecase 2) when or how would the responding peer ask for &quot;hey, are you X?&quot; - &quot;yes, here is proof&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770600' id='460839'>
<a class='timestamp' href='#460839'><time timestamp='2016-04-04T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
A new message-type from the requesting peer?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459770600' id='460840'>
<a class='timestamp' href='#460840'><time timestamp='2016-04-04T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Or as soon as the requesting peer accesses a restrictied service?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771020' id='460841'>
<a class='timestamp' href='#460841'><time timestamp='2016-04-04T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
let&#x27;s say there are two new messages &quot;areyou&quot;(H(peer-pubkey || receive-session-id)) and &quot;yesiam&quot;(H(my-pubkey || send-session-id), sig(key=my-privkey, msg=send-session-id))
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771080' id='460842'>
<a class='timestamp' href='#460842'><time timestamp='2016-04-04T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you&#x27;re making/accepting a connection to/from someone and want them to authenticate, you send the areyou as first message inside the encrypted channel, before version
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771140' id='460843'>
<a class='timestamp' href='#460843'><time timestamp='2016-04-04T11:59:00Z'>11:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there should probably be an explicit &quot;i don&#x27;t need you to authenticate&quot; ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771200' id='460844'>
<a class='timestamp' href='#460844'><time timestamp='2016-04-04T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
actually, no
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771200' id='460845'>
<a class='timestamp' href='#460845'><time timestamp='2016-04-04T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you either send an &#x27;areyou&#x27; (in which case you wait for a yesiam first), or you send a version yourself
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771500' id='460846'>
<a class='timestamp' href='#460846'><time timestamp='2016-04-04T12:05:00Z'>12:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: Hmm.. a requesting peer that seeks access to &quot;filtering&quot; would first send a &quot;areyou&quot;-message to hope the responding peer will also request auth over a &quot;areyou&quot; message?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771560' id='460847'>
<a class='timestamp' href='#460847'><time timestamp='2016-04-04T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Or could the requesting peer not just send a &quot;yesiam&quot;(H(my-pubkey || send-session-id)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771560' id='460848'>
<a class='timestamp' href='#460848'><time timestamp='2016-04-04T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the protocol doesn&#x27;t continue if they don&#x27;t respond
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771680' id='460849'>
<a class='timestamp' href='#460849'><time timestamp='2016-04-04T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: for your usecase 2) the requesting peer first needs to authenticate the responding peer... i think thats fine.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771740' id='460850'>
<a class='timestamp' href='#460850'><time timestamp='2016-04-04T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But I don&#x27;t see a way to do 2) without 1)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771860' id='460851'>
<a class='timestamp' href='#460851'><time timestamp='2016-04-04T12:11:00Z'>12:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
but however, let me think a bit about it. My brain usually needs some minutes for processing the input. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771920' id='460852'>
<a class='timestamp' href='#460852'><time timestamp='2016-04-04T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: 1 and 2 are exactly the same!
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771920' id='460853'>
<a class='timestamp' href='#460853'><time timestamp='2016-04-04T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
except initiated by the one listening instead of the one connecting
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771980' id='460854'>
<a class='timestamp' href='#460854'><time timestamp='2016-04-04T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
1 is &quot;are you the server I know? if not, i won&#x27;t tell you anything about myself!&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771980' id='460855'>
<a class='timestamp' href='#460855'><time timestamp='2016-04-04T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
2 is &quot;are you the client I know? if not, i won&#x27;t tell you anything about myself!&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771980' id='460856'>
<a class='timestamp' href='#460856'><time timestamp='2016-04-04T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but the p2p protocol has no distinction between the one connecting and the one listening
<br>
</div>

<div class='talk op-msg' data-timestamp='1459771980' id='460857'>
<a class='timestamp' href='#460857'><time timestamp='2016-04-04T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: yes. But for 2) you might not want to ask every peer for authentication.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459772040' id='460858'>
<a class='timestamp' href='#460858'><time timestamp='2016-04-04T12:14:00Z'>12:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, i see
<br>
</div>

<div class='talk op-msg' data-timestamp='1459772040' id='460859'>
<a class='timestamp' href='#460859'><time timestamp='2016-04-04T12:14:00Z'>12:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think in practice, 2 makes only sense with 1
<br>
</div>

<div class='talk op-msg' data-timestamp='1459772100' id='460860'>
<a class='timestamp' href='#460860'><time timestamp='2016-04-04T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Though, it could be policy (ask every peer, ask only peer where you have authacked).
<br>
</div>

<div class='talk op-msg' data-timestamp='1459772160' id='460861'>
<a class='timestamp' href='#460861'><time timestamp='2016-04-04T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
let&#x27;s get encryption flushed out first :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1459772160' id='460862'>
<a class='timestamp' href='#460862'><time timestamp='2016-04-04T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s a part that can be shared across all use cases
<br>
</div>

<div class='talk op-msg' data-timestamp='1459772220' id='460863'>
<a class='timestamp' href='#460863'><time timestamp='2016-04-04T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
okay... lets do that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459772220' id='460864'>
<a class='timestamp' href='#460864'><time timestamp='2016-04-04T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I&#x27;ll update the auth bip with all the stuff we have disusses but focus on the enc BIP
<br>
</div>

<div class='talk op-msg' data-timestamp='1459773660' id='460865'>
<a class='timestamp' href='#460865'><time timestamp='2016-04-04T12:41:00Z'>12:41</time></a>
&lt;<span class='nick nick-16'> GitHub28</span>&gt;
[bitcoin] laanwj pushed 2 new commits to 0.12: <a href="https://github.com/bitcoin/bitcoin/compare/834aaef7bd37...e3341aa94e1f" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/834aaef7bd37...e3341aa94e1f</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459773660' id='460866'>
<a class='timestamp' href='#460866'><time timestamp='2016-04-04T12:41:00Z'>12:41</time></a>
&lt;<span class='nick nick-16'> GitHub28</span>&gt;
bitcoin/0.12 e10c044 BtcDrak: [0.12] Update release notes
<br>
</div>

<div class='talk op-msg' data-timestamp='1459773660' id='460867'>
<a class='timestamp' href='#460867'><time timestamp='2016-04-04T12:41:00Z'>12:41</time></a>
&lt;<span class='nick nick-10'> GitHub158</span>&gt;
[bitcoin] laanwj closed pull request #7800: [0.12] Update release notes (0.12...docs) <a href="https://github.com/bitcoin/bitcoin/pull/7800" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7800</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459773660' id='460868'>
<a class='timestamp' href='#460868'><time timestamp='2016-04-04T12:41:00Z'>12:41</time></a>
&lt;<span class='nick nick-16'> GitHub28</span>&gt;
bitcoin/0.12 e3341aa Wladimir J. van der Laan: Merge #7800: [0.12] Update release notes...
<br>
</div>

<div class='talk op-msg' data-timestamp='1459776180' id='460869'>
<a class='timestamp' href='#460869'><time timestamp='2016-04-04T13:23:00Z'>13:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh wow re: tracing and profiling <a href="https://github.com/brendangregg/FlameGraph" class="link" target="_blank">https://github.com/brendangregg/FlameGraph</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459783200' id='460870'>
<a class='timestamp' href='#460870'><time timestamp='2016-04-04T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-3'> GitHub163</span>&gt;
[bitcoin] instagibbs closed pull request #7784: miner_tests number clarification (master...patch-4) <a href="https://github.com/bitcoin/bitcoin/pull/7784" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7784</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459783200' id='460871'>
<a class='timestamp' href='#460871'><time timestamp='2016-04-04T15:20:00Z'>15:20</time></a>
&lt;<span class='nick nick-1'> GitHub6</span>&gt;
[bitcoin] instagibbs opened pull request #7807: Fixed miner test values, gave constants for less error-prone values. (master...mintest) <a href="https://github.com/bitcoin/bitcoin/pull/7807" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7807</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1459792560' id='460872'>
<a class='timestamp' href='#460872'><time timestamp='2016-04-04T17:56:00Z'>17:56</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
FWIW, it sounds like bc.i is making bogus problems for 0.12 txns
<br>
</div>

<div class='talk op-msg' data-timestamp='1459792560' id='460873'>
<a class='timestamp' href='#460873'><time timestamp='2016-04-04T17:56:00Z'>17:56</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
the fee sniping chang
<br>
</div>

<div class='talk op-msg' data-timestamp='1459792560' id='460874'>
<a class='timestamp' href='#460874'><time timestamp='2016-04-04T17:56:00Z'>17:56</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
change*
<br>
</div>

<div class='talk op-msg' data-timestamp='1459792560' id='460875'>
<a class='timestamp' href='#460875'><time timestamp='2016-04-04T17:56:00Z'>17:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
making bogus problems?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459792680' id='460876'>
<a class='timestamp' href='#460876'><time timestamp='2016-04-04T17:58:00Z'>17:58</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
?
<br>
</div>

<div class='talk op-msg' data-timestamp='1459792680' id='460877'>
<a class='timestamp' href='#460877'><time timestamp='2016-04-04T17:58:00Z'>17:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa:  the client could send [h(session_id||serverkey), h(session_id||clientkey)]  and the server could respond with a signature, and then &quot;ah, you claim to be h(sessionid||clientkey||2), prove it with a signature.&quot; 
<br>
</div>

<div class='talk op-msg' data-timestamp='1459792740' id='460878'>
<a class='timestamp' href='#460878'><time timestamp='2016-04-04T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: and if the client doesn&#x27;t wish to identify itself/not configured for mutual auth it just sends a random number in the clientkey field. Server can&#x27;t meet that challenge, so server doesn&#x27;t learn anything about client identity.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459792740' id='460879'>
<a class='timestamp' href='#460879'><time timestamp='2016-04-04T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: so this lets you do mutual auth without leaking client identities to people who don&#x27;t already know them.
<br>
</div>

<div class='talk op-msg' data-timestamp='1459813680' id='460880'>
<a class='timestamp' href='#460880'><time timestamp='2016-04-04T23:48:00Z'>23:48</time></a>
&lt;<span class='nick nick-6'> GitHub124</span>&gt;
[bitcoin] theuni opened pull request #7809: depends: some base fixes/changes (master...depends-updates) <a href="https://github.com/bitcoin/bitcoin/pull/7809" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7809</a>
<br>
</div>

</div>
</section>

</body>
</html>
