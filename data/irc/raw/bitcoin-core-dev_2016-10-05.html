<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2016-10-05
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2016-10-05' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:25 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-09-05">&lt;</a><span class='header'>   October 2016   </span><a href="/bitcoin-core-dev/2016-11-05">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                   <a class="" href="/bitcoin-core-dev/2016-10-01">1</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-10-02">2</a>  <a class="" href="/bitcoin-core-dev/2016-10-03">3</a>  <a class="" href="/bitcoin-core-dev/2016-10-04">4</a>  <a class="current" href="/bitcoin-core-dev/2016-10-05">5</a>  <a class="" href="/bitcoin-core-dev/2016-10-06">6</a>  <a class="" href="/bitcoin-core-dev/2016-10-07">7</a>  <a class="" href="/bitcoin-core-dev/2016-10-08">8</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-10-09">9</a> <a class="" href="/bitcoin-core-dev/2016-10-10">10</a> <a class="" href="/bitcoin-core-dev/2016-10-11">11</a> <a class="" href="/bitcoin-core-dev/2016-10-12">12</a> <a class="" href="/bitcoin-core-dev/2016-10-13">13</a> <a class="" href="/bitcoin-core-dev/2016-10-14">14</a> <a class="" href="/bitcoin-core-dev/2016-10-15">15</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-10-16">16</a> <a class="" href="/bitcoin-core-dev/2016-10-17">17</a> <a class="" href="/bitcoin-core-dev/2016-10-18">18</a> <a class="" href="/bitcoin-core-dev/2016-10-19">19</a> <a class="" href="/bitcoin-core-dev/2016-10-20">20</a> <a class="" href="/bitcoin-core-dev/2016-10-21">21</a> <a class="" href="/bitcoin-core-dev/2016-10-22">22</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-10-23">23</a> <a class="" href="/bitcoin-core-dev/2016-10-24">24</a> <a class="" href="/bitcoin-core-dev/2016-10-25">25</a> <a class="" href="/bitcoin-core-dev/2016-10-26">26</a> <a class="" href="/bitcoin-core-dev/2016-10-27">27</a> <a class="" href="/bitcoin-core-dev/2016-10-28">28</a> <a class="" href="/bitcoin-core-dev/2016-10-29">29</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-10-30">30</a> <a class="" href="/bitcoin-core-dev/2016-10-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1475632980' id='499201'>
<a class='timestamp' href='#499201'><time timestamp='2016-10-05T02:03:00Z'>02:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
MSG_FILTERED_WITNESS_BLOCK defined in protocol.h is neither used in our source code nor defined in any BIP, should be in BIP144 I guess?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475633880' id='499202'>
<a class='timestamp' href='#499202'><time timestamp='2016-10-05T02:18:00Z'>02:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(looking up these numbers for documentation in protocol.h for #8880)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475633940' id='499203'>
<a class='timestamp' href='#499203'><time timestamp='2016-10-05T02:19:00Z'>02:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
if it&#x27;s not used in code, why define it at all?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475634000' id='499204'>
<a class='timestamp' href='#499204'><time timestamp='2016-10-05T02:20:00Z'>02:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;d say to reserve the bit pattern, though this should happen in the BIP too
<br>
</div>

<div class='talk op-msg' data-timestamp='1475634060' id='499205'>
<a class='timestamp' href='#499205'><time timestamp='2016-10-05T02:21:00Z'>02:21</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ah, so we use the value, just via setting a bit instead of the enum key
<br>
</div>

<div class='talk op-msg' data-timestamp='1475634060' id='499206'>
<a class='timestamp' href='#499206'><time timestamp='2016-10-05T02:21:00Z'>02:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s my assumption. I haven&#x27;t checked
<br>
</div>

<div class='talk op-msg' data-timestamp='1475634960' id='499207'>
<a class='timestamp' href='#499207'><time timestamp='2016-10-05T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-10'> GitHub60</span>&gt;
[bitcoin] EvertonMelo opened pull request #8886: Update build-unix.md (master...patch-1) <a href="https://github.com/bitcoin/bitcoin/pull/8886" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8886</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475635740' id='499208'>
<a class='timestamp' href='#499208'><time timestamp='2016-10-05T02:49:00Z'>02:49</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
sipa: are you there?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475635800' id='499209'>
<a class='timestamp' href='#499209'><time timestamp='2016-10-05T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
I am wondering why Bitcoin Core does not store the blockchain in a distributed way to save space? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475635920' id='499210'>
<a class='timestamp' href='#499210'><time timestamp='2016-10-05T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there are some ideas for adding range negotiation to the protocol, so that nodes can store different ranges of blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1475635920' id='499211'>
<a class='timestamp' href='#499211'><time timestamp='2016-10-05T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
see e.g. last meeting notes
<br>
</div>

<div class='talk op-msg' data-timestamp='1475635920' id='499212'>
<a class='timestamp' href='#499212'><time timestamp='2016-10-05T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the answer to &#x27;why&#x27; is always: because no one has designed/implemented this yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1475635980' id='499213'>
<a class='timestamp' href='#499213'><time timestamp='2016-10-05T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
So theoretically, it is possible. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475635980' id='499214'>
<a class='timestamp' href='#499214'><time timestamp='2016-10-05T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
in any case if you are short in space you can use pruning
<br>
</div>

<div class='talk op-msg' data-timestamp='1475635980' id='499215'>
<a class='timestamp' href='#499215'><time timestamp='2016-10-05T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
And blocksize won&#x27;t be a problem seriously.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475635980' id='499216'>
<a class='timestamp' href='#499216'><time timestamp='2016-10-05T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
you&#x27;re confounding issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636040' id='499217'>
<a class='timestamp' href='#499217'><time timestamp='2016-10-05T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
Sure blocksize increase will cause other issues like network latency.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636040' id='499218'>
<a class='timestamp' href='#499218'><time timestamp='2016-10-05T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
increasing block size is a problem for utxo set growth, for the time it takes to initially sync, for bandwidth requirements of nodes and miners, for CPU validation overhead. Storing the block chain is the least of worries really
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636100' id='499219'>
<a class='timestamp' href='#499219'><time timestamp='2016-10-05T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
anyhow move this to #bitcoin, this is off topic here
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636100' id='499220'>
<a class='timestamp' href='#499220'><time timestamp='2016-10-05T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
OK     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636160' id='499221'>
<a class='timestamp' href='#499221'><time timestamp='2016-10-05T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
Thank you.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636340' id='499222'>
<a class='timestamp' href='#499222'><time timestamp='2016-10-05T02:59:00Z'>02:59</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
Another question directly about Bitcoin&#x27;s current protocol.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636400' id='499223'>
<a class='timestamp' href='#499223'><time timestamp='2016-10-05T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-11'> xinxi</span>&gt;
Is it possible to increase OP_RETURN&#x27;s data size with a softfork?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636400' id='499224'>
<a class='timestamp' href='#499224'><time timestamp='2016-10-05T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
this topic is about development, discussion about changing the source code, use #bitcoin for general questions
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636400' id='499225'>
<a class='timestamp' href='#499225'><time timestamp='2016-10-05T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
see topic ^^
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636820' id='499226'>
<a class='timestamp' href='#499226'><time timestamp='2016-10-05T03:07:00Z'>03:07</time></a>
&lt;<span class='nick nick-11'> GitHub168</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/d7615af34e8e...f92805025d5b" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/d7615af34e8e...f92805025d5b</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636820' id='499227'>
<a class='timestamp' href='#499227'><time timestamp='2016-10-05T03:07:00Z'>03:07</time></a>
&lt;<span class='nick nick-11'> GitHub168</span>&gt;
bitcoin/master eeeebdd MarcoFalke: [doc] Rework docs...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636820' id='499228'>
<a class='timestamp' href='#499228'><time timestamp='2016-10-05T03:07:00Z'>03:07</time></a>
&lt;<span class='nick nick-11'> GitHub168</span>&gt;
bitcoin/master f928050 Wladimir J. van der Laan: Merge #8879: [doc] Rework docs...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475636880' id='499229'>
<a class='timestamp' href='#499229'><time timestamp='2016-10-05T03:08:00Z'>03:08</time></a>
&lt;<span class='nick nick-1'> GitHub181</span>&gt;
[bitcoin] laanwj closed pull request #8879: [doc] Rework docs (master...Mf1610-docCleanup) <a href="https://github.com/bitcoin/bitcoin/pull/8879" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8879</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475637120' id='499230'>
<a class='timestamp' href='#499230'><time timestamp='2016-10-05T03:12:00Z'>03:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sigh... <a href="https://github.com/bitcoin/bitcoin/pull/8886#discussion_r81892323" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8886#discussion_r81892323</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475637300' id='499231'>
<a class='timestamp' href='#499231'><time timestamp='2016-10-05T03:15:00Z'>03:15</time></a>
&lt;<span class='nick nick-4'> GitHub173</span>&gt;
[bitcoin] fanquake opened pull request #8887: [Doc] Improve GitHub issue template (master...link-stackexchange) <a href="https://github.com/bitcoin/bitcoin/pull/8887" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8887</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475637960' id='499232'>
<a class='timestamp' href='#499232'><time timestamp='2016-10-05T03:26:00Z'>03:26</time></a>
&lt;<span class='nick nick-1'> GitHub91</span>&gt;
[bitcoin] theuni opened pull request #8888: CConnman: Remove global usage in wallet and some gui (master...no-global-connman) <a href="https://github.com/bitcoin/bitcoin/pull/8888" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8888</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475638380' id='499233'>
<a class='timestamp' href='#499233'><time timestamp='2016-10-05T03:33:00Z'>03:33</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the values for MSG_WITNESS_BLOCK and MSG_WITNESS_TX should probably be defined in BIP144...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475638440' id='499234'>
<a class='timestamp' href='#499234'><time timestamp='2016-10-05T03:34:00Z'>03:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
good point achow101 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475640000' id='499235'>
<a class='timestamp' href='#499235'><time timestamp='2016-10-05T04:00:00Z'>04:00</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
wumpus: wtf @ 8886
<br>
</div>

<div class='talk op-msg' data-timestamp='1475642820' id='499236'>
<a class='timestamp' href='#499236'><time timestamp='2016-10-05T04:47:00Z'>04:47</time></a>
&lt;<span class='nick nick-2'> GitHub22</span>&gt;
[bitcoin] luke-jr opened pull request #8889: Qt/ModalOverlay: Use theme tooltip colours (master...overlay_theme) <a href="https://github.com/bitcoin/bitcoin/pull/8889" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8889</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475643300' id='499237'>
<a class='timestamp' href='#499237'><time timestamp='2016-10-05T04:55:00Z'>04:55</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
sipa: about PrecomputedTransactionData, I noticed you calculate it even if the Transaction has no witness <a href="https://github.com/bitcoin/bitcoin/blob/d93f0c61843f9da2a662f54ea1794ae0d263b196/src/main.cpp#L2458" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/d93f0c61843f9da2a662f54ea1794ae0d263b196/src/main.cpp#L2458</a> I don&#x27;t know if it has big impact on performance during IBT. Just dropping it here in case you overlooked it
<br>
</div>

<div class='talk op-msg' data-timestamp='1475643300' id='499238'>
<a class='timestamp' href='#499238'><time timestamp='2016-10-05T04:55:00Z'>04:55</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
IBD     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475644020' id='499239'>
<a class='timestamp' href='#499239'><time timestamp='2016-10-05T05:07:00Z'>05:07</time></a>
&lt;<span class='nick nick-13'> GitHub117</span>&gt;
[bitcoin] fanquake opened pull request #8890: [Doc] Update Doxygen configuration file (master...update-doxyfile-1-8-12) <a href="https://github.com/bitcoin/bitcoin/pull/8890" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8890</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475644620' id='499240'>
<a class='timestamp' href='#499240'><time timestamp='2016-10-05T05:17:00Z'>05:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: i guess MSG_FILTERED_WITNESS_BLOCK is what we&#x27;d need for a bip37 extension with segwit data
<br>
</div>

<div class='talk op-msg' data-timestamp='1475644680' id='499241'>
<a class='timestamp' href='#499241'><time timestamp='2016-10-05T05:18:00Z'>05:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
NicolasDorier: yes, i&#x27;m aware
<br>
</div>

<div class='talk op-msg' data-timestamp='1475650680' id='499242'>
<a class='timestamp' href='#499242'><time timestamp='2016-10-05T06:58:00Z'>06:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1475650860' id='499243'>
<a class='timestamp' href='#499243'><time timestamp='2016-10-05T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
luke-jr: I suspect it&#x27;s a very young person and someone that doesn&#x27;t know English very well, and he&#x27;s just trying to be helpful. But indeed, wtf
<br>
</div>

<div class='talk op-msg' data-timestamp='1475651460' id='499244'>
<a class='timestamp' href='#499244'><time timestamp='2016-10-05T07:11:00Z'>07:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and indeed, in fact most of build-unix.md is about linux distros, and the only UNIX that gets mentioned separately has its own document (openbsd), but no, adding kernel versions will not clarify that in any way :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475651580' id='499245'>
<a class='timestamp' href='#499245'><time timestamp='2016-10-05T07:13:00Z'>07:13</time></a>
&lt;<span class='nick nick-3'> * wumpus</span>&gt;
goes to add a section about FreeBSD to balance it out
<br>
</div>

<div class='talk op-msg' data-timestamp='1475655240' id='499246'>
<a class='timestamp' href='#499246'><time timestamp='2016-10-05T08:14:00Z'>08:14</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
btcdrak: &quot;uncompressed keys which are disallowed under segwit.&quot;, interesting,  no issue but can&#x27;t find that in the BIP?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475655360' id='499247'>
<a class='timestamp' href='#499247'><time timestamp='2016-10-05T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
dcousens: because it is too late to change the consensus layer without causing delays, so it is implemented as policy for now and consider for future sf.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475655360' id='499248'>
<a class='timestamp' href='#499248'><time timestamp='2016-10-05T08:16:00Z'>08:16</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
see last meetung notes
<br>
</div>

<div class='talk op-msg' data-timestamp='1475655420' id='499249'>
<a class='timestamp' href='#499249'><time timestamp='2016-10-05T08:17:00Z'>08:17</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
btcdrak: ok, sweet, will do
<br>
</div>

<div class='talk op-msg' data-timestamp='1475655480' id='499250'>
<a class='timestamp' href='#499250'><time timestamp='2016-10-05T08:18:00Z'>08:18</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
btcdrak: seen in notes, cheers ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475655720' id='499251'>
<a class='timestamp' href='#499251'><time timestamp='2016-10-05T08:22:00Z'>08:22</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
I think we will make a note in the BIP bow, thanks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475655780' id='499252'>
<a class='timestamp' href='#499252'><time timestamp='2016-10-05T08:23:00Z'>08:23</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
maybe, though it should be very clear that it is policy and not consensus then
<br>
</div>

<div class='talk op-msg' data-timestamp='1475655840' id='499253'>
<a class='timestamp' href='#499253'><time timestamp='2016-10-05T08:24:00Z'>08:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
My suggestion is that it should state that it&#x27;s policy created with the intent of making it consensus in a future softfork.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656200' id='499254'>
<a class='timestamp' href='#499254'><time timestamp='2016-10-05T08:30:00Z'>08:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
or already create a BIP for such a future softfork, although that may be premature if it&#x27;s to be combined with other things that may still come to light using this in the wild
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656260' id='499255'>
<a class='timestamp' href='#499255'><time timestamp='2016-10-05T08:31:00Z'>08:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Well we can do like we did with CSV, we had three BIPs triggered on one bit.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656260' id='499256'>
<a class='timestamp' href='#499256'><time timestamp='2016-10-05T08:31:00Z'>08:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
indeed. true.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656260' id='499257'>
<a class='timestamp' href='#499257'><time timestamp='2016-10-05T08:31:00Z'>08:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The thing I&#x27;d combine it with would be low-S enforcement.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656320' id='499258'>
<a class='timestamp' href='#499258'><time timestamp='2016-10-05T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: agreed
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656320' id='499259'>
<a class='timestamp' href='#499259'><time timestamp='2016-10-05T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes that would make sense, it&#x27;s a comparable thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656380' id='499260'>
<a class='timestamp' href='#499260'><time timestamp='2016-10-05T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(low-S doesn&#x27;t have the blowing up anyone&#x27;s pubkey risk, though, and already IsStandard for non-segwit, so no need to warn about it.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656440' id='499261'>
<a class='timestamp' href='#499261'><time timestamp='2016-10-05T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
btcdrak: that was uncompressed rejection only in witnesses,  or even in regular scriptSigs?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656500' id='499262'>
<a class='timestamp' href='#499262'><time timestamp='2016-10-05T08:35:00Z'>08:35</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
indeed, node policy isn&#x27;t something BIPs should cover, except in the case of it being preparation for a softfork
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656560' id='499263'>
<a class='timestamp' href='#499263'><time timestamp='2016-10-05T08:36:00Z'>08:36</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
dcousens: only for segwit
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656560' id='499264'>
<a class='timestamp' href='#499264'><time timestamp='2016-10-05T08:36:00Z'>08:36</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
or I suppose the question is targeted at the idea in general,  would it be a soft-fork to reject all uncompressed keys? Or only uncompressed keys in witness scripts
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656560' id='499265'>
<a class='timestamp' href='#499265'><time timestamp='2016-10-05T08:36:00Z'>08:36</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
dcousens: only in witnesses; it&#x27;d break compatibility otherwise
<br>
</div>

<div class='talk op-msg' data-timestamp='1475656620' id='499266'>
<a class='timestamp' href='#499266'><time timestamp='2016-10-05T08:37:00Z'>08:37</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
ok     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475657520' id='499267'>
<a class='timestamp' href='#499267'><time timestamp='2016-10-05T08:52:00Z'>08:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
dcousens: I would be reasonable for a library to strongly discourage uncompressed keys in whatever ways it can do so without breaking things.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475657580' id='499268'>
<a class='timestamp' href='#499268'><time timestamp='2016-10-05T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: indeed,  defaults are almost all against it now anyway... but I think by the time that soft-fork came around, it&#x27;d be something I&#x27;d probably move into the &quot;hard enough to do you have to do it manually&quot; camp
<br>
</div>

<div class='talk op-msg' data-timestamp='1475657580' id='499269'>
<a class='timestamp' href='#499269'><time timestamp='2016-10-05T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
rather than just flick a switch
<br>
</div>

<div class='talk op-msg' data-timestamp='1475657700' id='499270'>
<a class='timestamp' href='#499270'><time timestamp='2016-10-05T08:55:00Z'>08:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
we can&#x27;t,  unfortunately, get rid of uncompressed keys for non-segwit, as that would confiscate coins. But for segwit we can so long as it&#x27;s clearly non-kosher from the start.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475657760' id='499271'>
<a class='timestamp' href='#499271'><time timestamp='2016-10-05T08:56:00Z'>08:56</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: hmmm, I suppose that is risky,  but I can see some actors aggrevating the issue for agendas
<br>
</div>

<div class='talk op-msg' data-timestamp='1475657880' id='499272'>
<a class='timestamp' href='#499272'><time timestamp='2016-10-05T08:58:00Z'>08:58</time></a>
&lt;<span class='nick nick-11'> GitHub50</span>&gt;
[bitcoin] fanquake opened pull request #8891: [Doc] Update bips.md for Segregated Witness (master...segwit-bips-md) <a href="https://github.com/bitcoin/bitcoin/pull/8891" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8891</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475657880' id='499273'>
<a class='timestamp' href='#499273'><time timestamp='2016-10-05T08:58:00Z'>08:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
dcousens: changing things for existing keys is just completely impratical ... people with random uncompressed keys printed out... coins paid to them.. no idea that the keys are uncompressed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475657940' id='499274'>
<a class='timestamp' href='#499274'><time timestamp='2016-10-05T08:59:00Z'>08:59</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: I 100% agree its a good move,  I just wonder if its worth delaying instead of policy for a short time... probably already discussed in the meeting,  I&#x27;ll look up the logs more in depth
<br>
</div>

<div class='talk op-msg' data-timestamp='1475658000' id='499275'>
<a class='timestamp' href='#499275'><time timestamp='2016-10-05T09:00:00Z'>09:00</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
delaying segwit* (and then putting it in that SF)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475658000' id='499276'>
<a class='timestamp' href='#499276'><time timestamp='2016-10-05T09:00:00Z'>09:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
policy makes it safer.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475658000' id='499277'>
<a class='timestamp' href='#499277'><time timestamp='2016-10-05T09:00:00Z'>09:00</time></a>
&lt;<span class='nick nick-3'> GitHub135</span>&gt;
[bitcoin] laanwj opened pull request #8892: doc: Add build instructions for FreeBSD (master...2016_10_freebsd_build) <a href="https://github.com/bitcoin/bitcoin/pull/8892" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8892</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475658000' id='499278'>
<a class='timestamp' href='#499278'><time timestamp='2016-10-05T09:00:00Z'>09:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
even if its outright bard in SW some genius might still manage to send infinity coins to an invalid script
<br>
</div>

<div class='talk op-msg' data-timestamp='1475658060' id='499279'>
<a class='timestamp' href='#499279'><time timestamp='2016-10-05T09:01:00Z'>09:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
with it non-standard, they could coordinate with miners to rescue them.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475658120' id='499280'>
<a class='timestamp' href='#499280'><time timestamp='2016-10-05T09:02:00Z'>09:02</time></a>
&lt;<span class='nick nick-3'> dcousens</span>&gt;
gmaxwell: true, problematic from the start.  I suppose it&#x27;s just one of things that might need some big bold writing and dates
<br>
</div>

<div class='talk op-msg' data-timestamp='1475659080' id='499281'>
<a class='timestamp' href='#499281'><time timestamp='2016-10-05T09:18:00Z'>09:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no, it&#x27;s not worth delaying segwit
<br>
</div>

<div class='talk op-msg' data-timestamp='1475659140' id='499282'>
<a class='timestamp' href='#499282'><time timestamp='2016-10-05T09:19:00Z'>09:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there will always be some last-minutes things that could have been slightly better, don&#x27;t let them delay what is a great improvement
<br>
</div>

<div class='talk op-msg' data-timestamp='1475663760' id='499283'>
<a class='timestamp' href='#499283'><time timestamp='2016-10-05T10:36:00Z'>10:36</time></a>
&lt;<span class='nick nick-5'> GitHub188</span>&gt;
[bitcoin] laanwj closed pull request #8886: Add Arch Linux instructions to build-unix.md (master...patch-1) <a href="https://github.com/bitcoin/bitcoin/pull/8886" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8886</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475667960' id='499284'>
<a class='timestamp' href='#499284'><time timestamp='2016-10-05T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
achow101: <a href="https://github.com/bitcoin/bips/pull/457" class="link" target="_blank">https://github.com/bitcoin/bips/pull/457</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475671440' id='499285'>
<a class='timestamp' href='#499285'><time timestamp='2016-10-05T12:44:00Z'>12:44</time></a>
&lt;<span class='nick nick-13'> GitHub79</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/f92805025d5b...223f4c2dd5fa" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/f92805025d5b...223f4c2dd5fa</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475671440' id='499286'>
<a class='timestamp' href='#499286'><time timestamp='2016-10-05T12:44:00Z'>12:44</time></a>
&lt;<span class='nick nick-13'> GitHub79</span>&gt;
bitcoin/master a78e542 Luke Dashjr: Bugfix: Trivial: RPC: getblockchaininfo help: pruneheight is the lowest, not highest, block
<br>
</div>

<div class='talk op-msg' data-timestamp='1475671440' id='499287'>
<a class='timestamp' href='#499287'><time timestamp='2016-10-05T12:44:00Z'>12:44</time></a>
&lt;<span class='nick nick-13'> GitHub79</span>&gt;
bitcoin/master 223f4c2 Wladimir J. van der Laan: Merge #8884: Bugfix: Trivial: RPC: getblockchaininfo help: pruneheight is the lowest, not highest, block...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475671440' id='499288'>
<a class='timestamp' href='#499288'><time timestamp='2016-10-05T12:44:00Z'>12:44</time></a>
&lt;<span class='nick nick-11'> GitHub78</span>&gt;
[bitcoin] laanwj closed pull request #8884: Bugfix: Trivial: RPC: getblockchaininfo help: pruneheight is the lowest, not highest, block (master...trivial_pruneheight_help) <a href="https://github.com/bitcoin/bitcoin/pull/8884" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8884</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475682840' id='499289'>
<a class='timestamp' href='#499289'><time timestamp='2016-10-05T15:54:00Z'>15:54</time></a>
&lt;<span class='nick nick-14'> Lauda</span>&gt;
Any estimate for 0.13.1 yet?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475682960' id='499290'>
<a class='timestamp' href='#499290'><time timestamp='2016-10-05T15:56:00Z'>15:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
soon.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475682960' id='499291'>
<a class='timestamp' href='#499291'><time timestamp='2016-10-05T15:56:00Z'>15:56</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Two Weeks(TM)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475683020' id='499292'>
<a class='timestamp' href='#499292'><time timestamp='2016-10-05T15:57:00Z'>15:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
TW     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475683020' id='499293'>
<a class='timestamp' href='#499293'><time timestamp='2016-10-05T15:57:00Z'>15:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not TM, i hope
<br>
</div>

<div class='talk op-msg' data-timestamp='1475683020' id='499294'>
<a class='timestamp' href='#499294'><time timestamp='2016-10-05T15:57:00Z'>15:57</time></a>
&lt;<span class='nick nick-14'> Lauda</span>&gt;
I dislike the word soon as it can mean anywhere between now and sometime in the distant future. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1475683020' id='499295'>
<a class='timestamp' href='#499295'><time timestamp='2016-10-05T15:57:00Z'>15:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Lauda: that is exactly what it meams
<br>
</div>

<div class='talk op-msg' data-timestamp='1475683020' id='499296'>
<a class='timestamp' href='#499296'><time timestamp='2016-10-05T15:57:00Z'>15:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there are very few remaining issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1475683080' id='499297'>
<a class='timestamp' href='#499297'><time timestamp='2016-10-05T15:58:00Z'>15:58</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
Lauda: as soon as everything in the milestone is taken care of
<br>
</div>

<div class='talk op-msg' data-timestamp='1475683080' id='499298'>
<a class='timestamp' href='#499298'><time timestamp='2016-10-05T15:58:00Z'>15:58</time></a>
&lt;<span class='nick nick-14'> Lauda</span>&gt;
tl;dr: Soon. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475683140' id='499299'>
<a class='timestamp' href='#499299'><time timestamp='2016-10-05T15:59:00Z'>15:59</time></a>
&lt;<span class='nick nick-14'> Lauda</span>&gt;
I&#x27;ve checked the milestone not long ago.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475683140' id='499300'>
<a class='timestamp' href='#499300'><time timestamp='2016-10-05T15:59:00Z'>15:59</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
they keep adding new stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1475684160' id='499301'>
<a class='timestamp' href='#499301'><time timestamp='2016-10-05T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-9'> cdecker</span>&gt;
Soon is still better than &#x27;eventually&#x27; :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475685240' id='499302'>
<a class='timestamp' href='#499302'><time timestamp='2016-10-05T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
achow101, people can ask for milestone tags, may not happen tho
<br>
</div>

<div class='talk op-msg' data-timestamp='1475685240' id='499303'>
<a class='timestamp' href='#499303'><time timestamp='2016-10-05T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
a number have been pruned off already
<br>
</div>

<div class='talk op-msg' data-timestamp='1475690460' id='499304'>
<a class='timestamp' href='#499304'><time timestamp='2016-10-05T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
jonasschnelli: ping
<br>
</div>

<div class='talk op-msg' data-timestamp='1475692260' id='499305'>
<a class='timestamp' href='#499305'><time timestamp='2016-10-05T18:31:00Z'>18:31</time></a>
&lt;<span class='nick nick-12'> GitHub16</span>&gt;
[bitcoin] jnewbery opened pull request #8894: [Testing] Include fRelay in mininode version messages (master...mininode-relay-field) <a href="https://github.com/bitcoin/bitcoin/pull/8894" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8894</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704260' id='499306'>
<a class='timestamp' href='#499306'><time timestamp='2016-10-05T21:51:00Z'>21:51</time></a>
&lt;<span class='nick nick-5'> GitHub134</span>&gt;
[bitcoin] JeremyRubin opened pull request #8895: Better SigCache Implementation (master...cuckoocache-pull-request) <a href="https://github.com/bitcoin/bitcoin/pull/8895" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8895</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704320' id='499307'>
<a class='timestamp' href='#499307'><time timestamp='2016-10-05T21:52:00Z'>21:52</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
\me \o/
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704320' id='499308'>
<a class='timestamp' href='#499308'><time timestamp='2016-10-05T21:52:00Z'>21:52</time></a>
&lt;<span class='nick nick-3'> * jeremyrubin</span>&gt;
\o/
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704380' id='499309'>
<a class='timestamp' href='#499309'><time timestamp='2016-10-05T21:53:00Z'>21:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
this is not \LaTeX
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704440' id='499310'>
<a class='timestamp' href='#499310'><time timestamp='2016-10-05T21:54:00Z'>21:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh good. someone implement a Cuckoo Hash Table... now we need a lossy version and can get rid of those cahe destroying huge bloom filters we&#x27;re using all over the place.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704500' id='499311'>
<a class='timestamp' href='#499311'><time timestamp='2016-10-05T21:55:00Z'>21:55</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sipa: latex irc plugin would be dope
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704560' id='499312'>
<a class='timestamp' href='#499312'><time timestamp='2016-10-05T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jeremyrubin: 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704560' id='499313'>
<a class='timestamp' href='#499313'><time timestamp='2016-10-05T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
$\mu$&#x27;s eveywhere
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704560' id='499314'>
<a class='timestamp' href='#499314'><time timestamp='2016-10-05T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ỉţ ẅờữľđ çëřŧẩîńļŷ șïḿpľìƒỹ ẁřîŧīňğ ťẽxŧ ŵíţĥ ĺốţš ôƒ ďīäćŗìťĩčș
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704560' id='499315'>
<a class='timestamp' href='#499315'><time timestamp='2016-10-05T21:56:00Z'>21:56</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: this is a lossy version
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704680' id='499316'>
<a class='timestamp' href='#499316'><time timestamp='2016-10-05T21:58:00Z'>21:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
whats lossy about it? looks like if there is a collision you ripple, like an ordinary cuckoo hash. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704680' id='499317'>
<a class='timestamp' href='#499317'><time timestamp='2016-10-05T21:58:00Z'>21:58</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: once depth is reached, last thing touched goes bye-bye
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704680' id='499318'>
<a class='timestamp' href='#499318'><time timestamp='2016-10-05T21:58:00Z'>21:58</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: no rehashing
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704740' id='499319'>
<a class='timestamp' href='#499319'><time timestamp='2016-10-05T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Did you test if that optimization mattered? I think if makes a difference at all, your table is over populated and the performance will be poor.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704740' id='499320'>
<a class='timestamp' href='#499320'><time timestamp='2016-10-05T21:59:00Z'>21:59</time></a>
&lt;<span class='nick nick-16'> bsm117532</span>&gt;
<a href="https://sourceforge.net/projects/pidgin-latex/" class="link" target="_blank">https://sourceforge.net/projects/pidgin-latex/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704800' id='499321'>
<a class='timestamp' href='#499321'><time timestamp='2016-10-05T22:00:00Z'>22:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(because if it makes a difference it means you are hitting the limit often, and if you&#x27;re doing that you&#x27;re probably doing it for almost every insert.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704860' id='499322'>
<a class='timestamp' href='#499322'><time timestamp='2016-10-05T22:01:00Z'>22:01</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell_: I tested many many optimizations... not that one because I have a fixed size table so rehashing can&#x27;t help
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704920' id='499323'>
<a class='timestamp' href='#499323'><time timestamp='2016-10-05T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: ^^^
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704920' id='499324'>
<a class='timestamp' href='#499324'><time timestamp='2016-10-05T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jeremyrubin: what you need to do if you hit the maximum then is go delete entries at random.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704920' id='499325'>
<a class='timestamp' href='#499325'><time timestamp='2016-10-05T22:02:00Z'>22:02</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: I did however test with more hashes per entry (10) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704980' id='499326'>
<a class='timestamp' href='#499326'><time timestamp='2016-10-05T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
is it correct that 8393 should be marked &quot;needs backport&quot; ? <a href="https://github.com/bitcoin/bitcoin/pull/8393#issuecomment-238783829" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8393#issuecomment-238783829</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704980' id='499327'>
<a class='timestamp' href='#499327'><time timestamp='2016-10-05T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If you look at a cuckoo hash number of expected accesses as a function of table fullness, you get this behavior where it&#x27;s basically 2 until the table is half full and then it shoots up like a rocket.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704980' id='499328'>
<a class='timestamp' href='#499328'><time timestamp='2016-10-05T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704980' id='499329'>
<a class='timestamp' href='#499329'><time timestamp='2016-10-05T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
so fortunately insert performance isn&#x27;t a large priority
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704980' id='499330'>
<a class='timestamp' href='#499330'><time timestamp='2016-10-05T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
with 3 hashes you can get to 90% full :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475704980' id='499331'>
<a class='timestamp' href='#499331'><time timestamp='2016-10-05T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
So your depth limit means that you&#x27;ll never hit it until you&#x27;re too full, then you&#x27;ll often hit it. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705040' id='499332'>
<a class='timestamp' href='#499332'><time timestamp='2016-10-05T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
and we&#x27;d rather spend the compute poking around the table looking for things that have been deleted than clear something that hasn&#x27;t been deleted
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705040' id='499333'>
<a class='timestamp' href='#499333'><time timestamp='2016-10-05T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
So the &quot;eager-delete&quot; strategy is a loser
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705040' id='499334'>
<a class='timestamp' href='#499334'><time timestamp='2016-10-05T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sipa: yes, but on a non-fixed memory system
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705040' id='499335'>
<a class='timestamp' href='#499335'><time timestamp='2016-10-05T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
?     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705100' id='499336'>
<a class='timestamp' href='#499336'><time timestamp='2016-10-05T22:05:00Z'>22:05</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
*non-fixed
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705100' id='499337'>
<a class='timestamp' href='#499337'><time timestamp='2016-10-05T22:05:00Z'>22:05</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
eg, you can get to 90% before needing a re-hash
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705100' id='499338'>
<a class='timestamp' href='#499338'><time timestamp='2016-10-05T22:05:00Z'>22:05</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
but we never increase memory size
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705100' id='499339'>
<a class='timestamp' href='#499339'><time timestamp='2016-10-05T22:05:00Z'>22:05</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
so we always get to 100% full
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705100' id='499340'>
<a class='timestamp' href='#499340'><time timestamp='2016-10-05T22:05:00Z'>22:05</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
it&#x27;s just a matter of how fast
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705160' id='499341'>
<a class='timestamp' href='#499341'><time timestamp='2016-10-05T22:06:00Z'>22:06</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
There are gains to be made with more hashes/other things I agree. I&#x27;m pretty excited about some of them, but this is minimal &amp; those all add some uneeded complexity 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705160' id='499342'>
<a class='timestamp' href='#499342'><time timestamp='2016-10-05T22:06:00Z'>22:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jeremyrubin: what is the depth limit you&#x27;re using?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705160' id='499343'>
<a class='timestamp' href='#499343'><time timestamp='2016-10-05T22:06:00Z'>22:06</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
log(size)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705220' id='499344'>
<a class='timestamp' href='#499344'><time timestamp='2016-10-05T22:07:00Z'>22:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea, so you&#x27;re going to end up doing log() accesses on insert basically every time once its run long enough.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705220' id='499345'>
<a class='timestamp' href='#499345'><time timestamp='2016-10-05T22:07:00Z'>22:07</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Yeah that&#x27;s fine
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705280' id='499346'>
<a class='timestamp' href='#499346'><time timestamp='2016-10-05T22:08:00Z'>22:08</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
We don&#x27;t really care about insert performance (non-hot path)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705280' id='499347'>
<a class='timestamp' href='#499347'><time timestamp='2016-10-05T22:08:00Z'>22:08</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
And we also do care about deleting things that have been erased preferentially (rather than randomly)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705280' id='499348'>
<a class='timestamp' href='#499348'><time timestamp='2016-10-05T22:08:00Z'>22:08</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
so it&#x27;s worth it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705400' id='499349'>
<a class='timestamp' href='#499349'><time timestamp='2016-10-05T22:10:00Z'>22:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jeremyrubin: i see
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705640' id='499350'>
<a class='timestamp' href='#499350'><time timestamp='2016-10-05T22:14:00Z'>22:14</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
besides, log2(40mb/32bytes per entry) ~~ 21 which is not trivial, but not huge by any means
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705700' id='499351'>
<a class='timestamp' href='#499351'><time timestamp='2016-10-05T22:15:00Z'>22:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it&#x27;s a lot of random memory accesses.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705760' id='499352'>
<a class='timestamp' href='#499352'><time timestamp='2016-10-05T22:16:00Z'>22:16</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: I tested designs that did less random mem accesses and it wasn&#x27;t terribly better for much added complexity
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705760' id='499353'>
<a class='timestamp' href='#499353'><time timestamp='2016-10-05T22:16:00Z'>22:16</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: I&#x27;ll float those later if this gets through review
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705820' id='499354'>
<a class='timestamp' href='#499354'><time timestamp='2016-10-05T22:17:00Z'>22:17</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: for instance, one can split keys to an 8-bit tag and 258-bit main value, and do initial lookups on the tags.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705880' id='499355'>
<a class='timestamp' href='#499355'><time timestamp='2016-10-05T22:18:00Z'>22:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
what matters is the access, 1-64 bytes (and likely 1-128 bytes) will all end up being basically the same speed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705880' id='499356'>
<a class='timestamp' href='#499356'><time timestamp='2016-10-05T22:18:00Z'>22:18</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: you can also do buckets of two hashes so that k can be stored at h0(k) &amp; ~1 and h0(k) | 1.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705880' id='499357'>
<a class='timestamp' href='#499357'><time timestamp='2016-10-05T22:18:00Z'>22:18</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: wrong. l1/l2 matters at that size
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705940' id='499358'>
<a class='timestamp' href='#499358'><time timestamp='2016-10-05T22:19:00Z'>22:19</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: you can also do linear probing style stuff with 64 entries per bucket (and say, 2 buckets per entry allowed) and 1 byte tags
<br>
</div>

<div class='talk op-msg' data-timestamp='1475705940' id='499359'>
<a class='timestamp' href='#499359'><time timestamp='2016-10-05T22:19:00Z'>22:19</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
(I implemented and tested all of the above, none are a clear winner over the K.I.S.S. solution PR&#x27;d)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706060' id='499360'>
<a class='timestamp' href='#499360'><time timestamp='2016-10-05T22:21:00Z'>22:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(h0(k) &amp; 1, h0(k) | 1) won&#x27;t result in a cuckoo style behaviour, i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706120' id='499361'>
<a class='timestamp' href='#499361'><time timestamp='2016-10-05T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as the collisions are perfectly correlated
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706120' id='499362'>
<a class='timestamp' href='#499362'><time timestamp='2016-10-05T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
no, it won&#x27;t.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706120' id='499363'>
<a class='timestamp' href='#499363'><time timestamp='2016-10-05T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sipa: that&#x27;s why you have two hashes still 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706120' id='499364'>
<a class='timestamp' href='#499364'><time timestamp='2016-10-05T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sorry if that was unclear
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706120' id='499365'>
<a class='timestamp' href='#499365'><time timestamp='2016-10-05T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, you mean in addition
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706120' id='499366'>
<a class='timestamp' href='#499366'><time timestamp='2016-10-05T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706120' id='499367'>
<a class='timestamp' href='#499367'><time timestamp='2016-10-05T22:22:00Z'>22:22</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706180' id='499368'>
<a class='timestamp' href='#499368'><time timestamp='2016-10-05T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but this table doesn&#x27;t really make use of cuckoo style behavior once it fills. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706180' id='499369'>
<a class='timestamp' href='#499369'><time timestamp='2016-10-05T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you&#x27;re turning each entry into a 2-way associativr cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706180' id='499370'>
<a class='timestamp' href='#499370'><time timestamp='2016-10-05T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it just becomes a 2-way set assc cache.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706180' id='499371'>
<a class='timestamp' href='#499371'><time timestamp='2016-10-05T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706240' id='499372'>
<a class='timestamp' href='#499372'><time timestamp='2016-10-05T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: more or less the same thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706240' id='499373'>
<a class='timestamp' href='#499373'><time timestamp='2016-10-05T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what would be the effect if you greatly reduced the max iterations?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706240' id='499374'>
<a class='timestamp' href='#499374'><time timestamp='2016-10-05T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
less likely to find garbage on insert
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706240' id='499375'>
<a class='timestamp' href='#499375'><time timestamp='2016-10-05T22:24:00Z'>22:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(in the otherwise kiss design)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706300' id='499376'>
<a class='timestamp' href='#499376'><time timestamp='2016-10-05T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so why bother doing 21 iterations?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706300' id='499377'>
<a class='timestamp' href='#499377'><time timestamp='2016-10-05T22:25:00Z'>22:25</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Well I&#x27;m saying this cuckoo table is a not one, at least once filled it&#x27;s a two way set assc cache.  I think you can probably make your insert behavior stop at the first collision once you&#x27;re over some fullness threshold (like 90%) and you&#x27;ll see performance improve.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706360' id='499378'>
<a class='timestamp' href='#499378'><time timestamp='2016-10-05T22:26:00Z'>22:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
remember: we really give 0 shits about insert performance....ATMP isnt our hot-path, and it just did sigchecks, so a bunch of lookups (even hitting memory) isnt all that bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706360' id='499379'>
<a class='timestamp' href='#499379'><time timestamp='2016-10-05T22:26:00Z'>22:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sorry if I didn&#x27;t state it clearly above: this data structure is a cucokoo hash table that turns into a 2way set assc cache once it becomes overfull
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706360' id='499380'>
<a class='timestamp' href='#499380'><time timestamp='2016-10-05T22:26:00Z'>22:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: I&#x27;m also thinking about other places where we should use this.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706360' id='499381'>
<a class='timestamp' href='#499381'><time timestamp='2016-10-05T22:26:00Z'>22:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ahh, ok, fair enough
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706360' id='499382'>
<a class='timestamp' href='#499382'><time timestamp='2016-10-05T22:26:00Z'>22:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
And I care about the overall cpu usage of bitcoin, not just the block race. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706420' id='499383'>
<a class='timestamp' href='#499383'><time timestamp='2016-10-05T22:27:00Z'>22:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it looks like great work too, I&#x27;m not being negative, just thinking it through.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706420' id='499384'>
<a class='timestamp' href='#499384'><time timestamp='2016-10-05T22:27:00Z'>22:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ehh, doing a few more memory hits after doing ATMP checksigs isnt all that much too notice :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706420' id='499385'>
<a class='timestamp' href='#499385'><time timestamp='2016-10-05T22:27:00Z'>22:27</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sipa: Finding garbage means finding a signature you don&#x27;t need again (unless reorg)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706420' id='499386'>
<a class='timestamp' href='#499386'><time timestamp='2016-10-05T22:27:00Z'>22:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, in case it isn&#x27;t clear, i&#x27;m just playing devil&#x27;s advocate to understand
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706480' id='499387'>
<a class='timestamp' href='#499387'><time timestamp='2016-10-05T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sipa: finding !garbage means you delete something maybe valuable
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706480' id='499388'>
<a class='timestamp' href='#499388'><time timestamp='2016-10-05T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sipa: (yes :) )
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706480' id='499389'>
<a class='timestamp' href='#499389'><time timestamp='2016-10-05T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
If i math&#x27;d right: (1-((5000/((float(40&lt;&lt;20)/(32.0+1.0/8))))))**21
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706480' id='499390'>
<a class='timestamp' href='#499390'><time timestamp='2016-10-05T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
though I wonder if its code complexity wouldn&#x27;t be reduced by dropping the cuckoo behavior entirely... thats a question that depends on how full the cache is typically. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706480' id='499391'>
<a class='timestamp' href='#499391'><time timestamp='2016-10-05T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
== ~92%
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706480' id='499392'>
<a class='timestamp' href='#499392'><time timestamp='2016-10-05T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
should be chance of deleting with this design
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706540' id='499393'>
<a class='timestamp' href='#499393'><time timestamp='2016-10-05T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: what is the cuckoo behavior? Eg, one hash location?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706540' id='499394'>
<a class='timestamp' href='#499394'><time timestamp='2016-10-05T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jeremyrubin: no, cuckoo behavior is the rippling insertion.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706540' id='499395'>
<a class='timestamp' href='#499395'><time timestamp='2016-10-05T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: so not iterating at all?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706540' id='499396'>
<a class='timestamp' href='#499396'><time timestamp='2016-10-05T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
In a plain 2way set assc cache, you&#x27;ll probe both locations on insert and if both are full you&#x27;ll evict one (at random or whatever).
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706540' id='499397'>
<a class='timestamp' href='#499397'><time timestamp='2016-10-05T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: i think, here, thats motly there so that you can find entries marked deleted while rippling
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706600' id='499398'>
<a class='timestamp' href='#499398'><time timestamp='2016-10-05T22:30:00Z'>22:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
if you didnt have the delete flags, probably
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706600' id='499399'>
<a class='timestamp' href='#499399'><time timestamp='2016-10-05T22:30:00Z'>22:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
okay, I wasn&#x27;t thinking about the delete flags, hows that work? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706600' id='499400'>
<a class='timestamp' href='#499400'><time timestamp='2016-10-05T22:30:00Z'>22:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
its the sigcache - we used to delete things while checking sigs in blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706600' id='499401'>
<a class='timestamp' href='#499401'><time timestamp='2016-10-05T22:30:00Z'>22:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
now they&#x27;re marked for deletion in an atomic
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706600' id='499402'>
<a class='timestamp' href='#499402'><time timestamp='2016-10-05T22:30:00Z'>22:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
so jeremyrubin&#x27;s thing goes through and treats slots as empty if they have a delete flag on insert
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706600' id='499403'>
<a class='timestamp' href='#499403'><time timestamp='2016-10-05T22:30:00Z'>22:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t think that matters actually.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706660' id='499404'>
<a class='timestamp' href='#499404'><time timestamp='2016-10-05T22:31:00Z'>22:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
this has an interesting benifit of making it so that reorgs at the tip might use sigcache
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706660' id='499405'>
<a class='timestamp' href='#499405'><time timestamp='2016-10-05T22:31:00Z'>22:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
When you go to insert, if either are free or marked delete, overwrite.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706660' id='499406'>
<a class='timestamp' href='#499406'><time timestamp='2016-10-05T22:31:00Z'>22:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
otherwise pick one and overwrite.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706660' id='499407'>
<a class='timestamp' href='#499407'><time timestamp='2016-10-05T22:31:00Z'>22:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rippling at that point doesn&#x27;t do you any good.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706660' id='499408'>
<a class='timestamp' href='#499408'><time timestamp='2016-10-05T22:31:00Z'>22:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the other entries you would delete will get deleted when something tries to insert in them.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706660' id='499409'>
<a class='timestamp' href='#499409'><time timestamp='2016-10-05T22:31:00Z'>22:31</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
yes it does? the next one might find a trash
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706720' id='499410'>
<a class='timestamp' href='#499410'><time timestamp='2016-10-05T22:32:00Z'>22:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jeremyrubin: i see!
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706720' id='499411'>
<a class='timestamp' href='#499411'><time timestamp='2016-10-05T22:32:00Z'>22:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706720' id='499412'>
<a class='timestamp' href='#499412'><time timestamp='2016-10-05T22:32:00Z'>22:32</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
k1 and k2 sharing location X are highly unlikely to have another in common
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706720' id='499413'>
<a class='timestamp' href='#499413'><time timestamp='2016-10-05T22:32:00Z'>22:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If I insert k1  and one of its locations contains trash, I&#x27;ll use that location.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706780' id='499414'>
<a class='timestamp' href='#499414'><time timestamp='2016-10-05T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: if you iterate 21 times, you&#x27;ve had 21 independent chances of finding an empty/deleted position, so you don&#x27;t need to evict anything potentially valua le
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706780' id='499415'>
<a class='timestamp' href='#499415'><time timestamp='2016-10-05T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t need someone to have come in front of me and taken out the trash for me, I can do it then.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706780' id='499416'>
<a class='timestamp' href='#499416'><time timestamp='2016-10-05T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
eg, h1(k1) == h1(k2), unlikely h2(k1) != h2(k2)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706780' id='499417'>
<a class='timestamp' href='#499417'><time timestamp='2016-10-05T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: yes; thats equal to saying that cuckoo is helpful if the table is not overfull.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706840' id='499418'>
<a class='timestamp' href='#499418'><time timestamp='2016-10-05T22:34:00Z'>22:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, yes, but it won&#x27;t be if many entries are marked deleted
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706840' id='499419'>
<a class='timestamp' href='#499419'><time timestamp='2016-10-05T22:34:00Z'>22:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
which it is, but if the table is normally more than 50% full, it doesn&#x27;t help.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706840' id='499420'>
<a class='timestamp' href='#499420'><time timestamp='2016-10-05T22:34:00Z'>22:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think it can be way more than 50% full
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706840' id='499421'>
<a class='timestamp' href='#499421'><time timestamp='2016-10-05T22:34:00Z'>22:34</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
will always go to 100% full
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706900' id='499422'>
<a class='timestamp' href='#499422'><time timestamp='2016-10-05T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
except after a block
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706900' id='499423'>
<a class='timestamp' href='#499423'><time timestamp='2016-10-05T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
which is what I said above... depending on how full the table is (and by full I am counting trash as deleted), this could just be a set assc cache with no loss in performance.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706900' id='499424'>
<a class='timestamp' href='#499424'><time timestamp='2016-10-05T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if there are no deleted positions (or very few), agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706900' id='499425'>
<a class='timestamp' href='#499425'><time timestamp='2016-10-05T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
there are n_sigops(last_block) empty slots
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706900' id='499426'>
<a class='timestamp' href='#499426'><time timestamp='2016-10-05T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: by recursing you&#x27;re less likely to throw out non-trash if there are delete positions available, this is esp true if you eg have blocks come in quickly in succession
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706900' id='499427'>
<a class='timestamp' href='#499427'><time timestamp='2016-10-05T22:35:00Z'>22:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: not just &#x27;very few&#x27;. The benefit of cuckoo drops of exponentially after 50%.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706960' id='499428'>
<a class='timestamp' href='#499428'><time timestamp='2016-10-05T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: not if the table is well over 50% full (deleted entries are not full in this measure).
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706960' id='499429'>
<a class='timestamp' href='#499429'><time timestamp='2016-10-05T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i believe that if you&#x27;re 90% full, you have a very high chance that a new insert will end up with you consuming an empty position
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706960' id='499430'>
<a class='timestamp' href='#499430'><time timestamp='2016-10-05T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
This can be addressed by increasing hashes to 3 or 4 (or 10!)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475706960' id='499431'>
<a class='timestamp' href='#499431'><time timestamp='2016-10-05T22:36:00Z'>22:36</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
not fact 10 just 10 excitement 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707020' id='499432'>
<a class='timestamp' href='#499432'><time timestamp='2016-10-05T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: indeed, though if you have quick blocks it means you&#x27;re less full...
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707020' id='499433'>
<a class='timestamp' href='#499433'><time timestamp='2016-10-05T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, the table can run fuller if there are more probes, but with a linear slowdown for your lookup.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707020' id='499434'>
<a class='timestamp' href='#499434'><time timestamp='2016-10-05T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
as an aside: we could also add a few bits to indicate feerate for each entry, which would make the probing actually really matter
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707020' id='499435'>
<a class='timestamp' href='#499435'><time timestamp='2016-10-05T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: or age
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707020' id='499436'>
<a class='timestamp' href='#499436'><time timestamp='2016-10-05T22:37:00Z'>22:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
or age
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707080' id='499437'>
<a class='timestamp' href='#499437'><time timestamp='2016-10-05T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Yep     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707080' id='499438'>
<a class='timestamp' href='#499438'><time timestamp='2016-10-05T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
add generation numbers like the bloom filter cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707080' id='499439'>
<a class='timestamp' href='#499439'><time timestamp='2016-10-05T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Yep     
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707080' id='499440'>
<a class='timestamp' href='#499440'><time timestamp='2016-10-05T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: I think you&#x27;re overestimating it, when you&#x27;re 90% full most entries end up in the posistion they&#x27;re in because their sibling was alreaady full.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707080' id='499441'>
<a class='timestamp' href='#499441'><time timestamp='2016-10-05T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Or like.. clear them on eviction 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707080' id='499442'>
<a class='timestamp' href='#499442'><time timestamp='2016-10-05T22:38:00Z'>22:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: 0.9^21, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707140' id='499443'>
<a class='timestamp' href='#499443'><time timestamp='2016-10-05T22:39:00Z'>22:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: no, because the when you consider entry X the current member is more likely to be in X because its alternate Y is full.  The sequence of tests are no longer independant. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707140' id='499444'>
<a class='timestamp' href='#499444'><time timestamp='2016-10-05T22:39:00Z'>22:39</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Wait what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707200' id='499445'>
<a class='timestamp' href='#499445'><time timestamp='2016-10-05T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
this is why the performance falls off so dramatically at over 50% full.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707200' id='499446'>
<a class='timestamp' href='#499446'><time timestamp='2016-10-05T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
That&#x27;s only true if we prefer h0 over h1?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707200' id='499447'>
<a class='timestamp' href='#499447'><time timestamp='2016-10-05T22:40:00Z'>22:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
this is only true if your table is small compared to your iteration count?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707260' id='499448'>
<a class='timestamp' href='#499448'><time timestamp='2016-10-05T22:41:00Z'>22:41</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Also... so what! If it&#x27;s really such a big deal we can just clear 50% of things out from this one
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707260' id='499449'>
<a class='timestamp' href='#499449'><time timestamp='2016-10-05T22:41:00Z'>22:41</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
and still be on par with existing :P 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707260' id='499450'>
<a class='timestamp' href='#499450'><time timestamp='2016-10-05T22:41:00Z'>22:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: I&#x27;m responding to sipa saying that the odds you fail to find a free entry in 21 hops is 0.9^21
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707260' id='499451'>
<a class='timestamp' href='#499451'><time timestamp='2016-10-05T22:41:00Z'>22:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: i mean it should be close
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707260' id='499452'>
<a class='timestamp' href='#499452'><time timestamp='2016-10-05T22:41:00Z'>22:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i don&#x27;t understand
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707260' id='499453'>
<a class='timestamp' href='#499453'><time timestamp='2016-10-05T22:41:00Z'>22:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: maybe we have different assumptions
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707320' id='499454'>
<a class='timestamp' href='#499454'><time timestamp='2016-10-05T22:42:00Z'>22:42</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I agree with sipa
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707320' id='499455'>
<a class='timestamp' href='#499455'><time timestamp='2016-10-05T22:42:00Z'>22:42</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
my math was: ((1-((5000/((float(40&lt;&lt;20)/(32.0+1.0/8))))))**1)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707320' id='499456'>
<a class='timestamp' href='#499456'><time timestamp='2016-10-05T22:42:00Z'>22:42</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
oops last one should be a 21
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707320' id='499457'>
<a class='timestamp' href='#499457'><time timestamp='2016-10-05T22:42:00Z'>22:42</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
anyway, headed out, y&#x27;all figure it out and report back :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707320' id='499458'>
<a class='timestamp' href='#499458'><time timestamp='2016-10-05T22:42:00Z'>22:42</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
for a block clearing 5k things
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707380' id='499459'>
<a class='timestamp' href='#499459'><time timestamp='2016-10-05T22:43:00Z'>22:43</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Gonna head out for some dinner; looking forward to hearing more of your thoughts.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707500' id='499460'>
<a class='timestamp' href='#499460'><time timestamp='2016-10-05T22:45:00Z'>22:45</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: if you want I have a super templated version where you can enable/disable a ton of things... but it&#x27;s quite unsightly and needs some bugfixes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707500' id='499461'>
<a class='timestamp' href='#499461'><time timestamp='2016-10-05T22:45:00Z'>22:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: as a cuckoo hashtable fills, everythign initially starts out in it&#x27;s h0 position. then you start getting collisions, when the table is way overfull, and you hit a collision (p=.9) then you look at that entry and go to put it in its alternate... but the reason it was in the entry you looked at was often because the alternate was already full. So the comparison you now make on the alternate 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707500' id='499462'>
<a class='timestamp' href='#499462'><time timestamp='2016-10-05T22:45:00Z'>22:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
if &gt;p=.9 even though the table is only 90% full overall.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707680' id='499463'>
<a class='timestamp' href='#499463'><time timestamp='2016-10-05T22:48:00Z'>22:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if evictions are independent from insertions (and evictions are responsible for all of the 10% empties), then i think any chain of entries up to 21 deep will have 0.9^21 chance to not have any evicted entries
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707680' id='499464'>
<a class='timestamp' href='#499464'><time timestamp='2016-10-05T22:48:00Z'>22:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you&#x27;re talking about a model where there are only insertions
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707740' id='499465'>
<a class='timestamp' href='#499465'><time timestamp='2016-10-05T22:49:00Z'>22:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
okay, if we assume that the table is completely full, then evictions happen, then on your next insert I agree with you.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707800' id='499466'>
<a class='timestamp' href='#499466'><time timestamp='2016-10-05T22:50:00Z'>22:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but on the insert after that the performance will be worse than 0.899^21
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707800' id='499467'>
<a class='timestamp' href='#499467'><time timestamp='2016-10-05T22:50:00Z'>22:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707860' id='499468'>
<a class='timestamp' href='#499468'><time timestamp='2016-10-05T22:51:00Z'>22:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the iterations are at fullness just a search for entries that were deleted after the chain being traversed was created
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707860' id='499469'>
<a class='timestamp' href='#499469'><time timestamp='2016-10-05T22:51:00Z'>22:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and increasing the iteration count means you&#x27;re willing to spend more time looking for those
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707920' id='499470'>
<a class='timestamp' href='#499470'><time timestamp='2016-10-05T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m not convinced that making this choice depend on the table size is the best choice
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707920' id='499471'>
<a class='timestamp' href='#499471'><time timestamp='2016-10-05T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but it looks simple and it works better than what we have
<br>
</div>

<div class='talk op-msg' data-timestamp='1475707980' id='499472'>
<a class='timestamp' href='#499472'><time timestamp='2016-10-05T22:53:00Z'>22:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
But a 2-way set assc cache would be even simpler.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708040' id='499473'>
<a class='timestamp' href='#499473'><time timestamp='2016-10-05T22:54:00Z'>22:54</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sipa: you could make the choice based on the number of sigops in the last block
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708040' id='499474'>
<a class='timestamp' href='#499474'><time timestamp='2016-10-05T22:54:00Z'>22:54</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
eg, st (1-empty%)^iter &gt; .50
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708040' id='499475'>
<a class='timestamp' href='#499475'><time timestamp='2016-10-05T22:54:00Z'>22:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and at very full levels it will perform no worse, you give an argument which I can can buy that the complexity does improve performance, e.g. at the 90% full level. I dunno what level of fullness would be typical.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708160' id='499476'>
<a class='timestamp' href='#499476'><time timestamp='2016-10-05T22:56:00Z'>22:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
if the cache has 40MB of 32 byte entries. and a single block empties 4000 and before a new block arrives 4000 are added, then the low watermark would be 99.6%
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708160' id='499477'>
<a class='timestamp' href='#499477'><time timestamp='2016-10-05T22:56:00Z'>22:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah, i think in optimal cases you want to artificially keep the fullness low
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708160' id='499478'>
<a class='timestamp' href='#499478'><time timestamp='2016-10-05T22:56:00Z'>22:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and 21 probes would be pretty unlikely to find a deleted entry.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708220' id='499479'>
<a class='timestamp' href='#499479'><time timestamp='2016-10-05T22:57:00Z'>22:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
meaning a plain 2way set assc would have performed just as well but with simpler code and 40x faster insertion. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708220' id='499480'>
<a class='timestamp' href='#499480'><time timestamp='2016-10-05T22:57:00Z'>22:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
find some function of the fullness for the maximum number of iterations
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708220' id='499481'>
<a class='timestamp' href='#499481'><time timestamp='2016-10-05T22:57:00Z'>22:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which is 1 when completely 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708220' id='499482'>
<a class='timestamp' href='#499482'><time timestamp='2016-10-05T22:57:00Z'>22:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
full
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708280' id='499483'>
<a class='timestamp' href='#499483'><time timestamp='2016-10-05T22:58:00Z'>22:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jeremyrubin: can you efficiently keep track of fullness?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708280' id='499484'>
<a class='timestamp' href='#499484'><time timestamp='2016-10-05T22:58:00Z'>22:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well what you want is something that is an insertion time tolerance, and when that tolerance would not be likely to yield an improvement, you just go 1 deep.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708340' id='499485'>
<a class='timestamp' href='#499485'><time timestamp='2016-10-05T22:59:00Z'>22:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s a balance between chance of evicting a live entry and increasing fullness
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708340' id='499486'>
<a class='timestamp' href='#499486'><time timestamp='2016-10-05T22:59:00Z'>22:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
perhaps the max iterations should be 1 already at 90%
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708400' id='499487'>
<a class='timestamp' href='#499487'><time timestamp='2016-10-05T23:00:00Z'>23:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and $TOLERANCE at 0%
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708400' id='499488'>
<a class='timestamp' href='#499488'><time timestamp='2016-10-05T23:00:00Z'>23:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and some nifty fitted function in between
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708400' id='499489'>
<a class='timestamp' href='#499489'><time timestamp='2016-10-05T23:00:00Z'>23:00</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well the question you have is the marginal rate of return for each probe.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708460' id='499490'>
<a class='timestamp' href='#499490'><time timestamp='2016-10-05T23:01:00Z'>23:01</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
for low full levels the tolerance exists to prevent cycles.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708520' id='499491'>
<a class='timestamp' href='#499491'><time timestamp='2016-10-05T23:02:00Z'>23:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the probably of going more than N times when you are M full, is negligible unless there is a cycle.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708520' id='499492'>
<a class='timestamp' href='#499492'><time timestamp='2016-10-05T23:02:00Z'>23:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so thats normally where the max probe count (which then triggers a resize and/or rehashing of the whole time) in an ordinary cuckoo hash.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708580' id='499493'>
<a class='timestamp' href='#499493'><time timestamp='2016-10-05T23:03:00Z'>23:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;m sure tromp could tell us all about those probablities. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708700' id='499494'>
<a class='timestamp' href='#499494'><time timestamp='2016-10-05T23:05:00Z'>23:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there is an annoyong collision in my brain&#x27;s cuckoo table between john trump and donald tromp.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708760' id='499495'>
<a class='timestamp' href='#499495'><time timestamp='2016-10-05T23:06:00Z'>23:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
... just move one to its alternative location?
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708820' id='499496'>
<a class='timestamp' href='#499496'><time timestamp='2016-10-05T23:07:00Z'>23:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
s/whole time/whole table/
<br>
</div>

<div class='talk op-msg' data-timestamp='1475708880' id='499497'>
<a class='timestamp' href='#499497'><time timestamp='2016-10-05T23:08:00Z'>23:08</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
In any case, unless there is something surprising about fullness going on, with our current tables, I believe that setting the max depth to 1 (turning this into a 2way set assc cache) would not hurt block validation performance.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709240' id='499498'>
<a class='timestamp' href='#499498'><time timestamp='2016-10-05T23:14:00Z'>23:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but a generation count could make it be effectively 50% free at all time, and then that argument goes out the window. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709300' id='499499'>
<a class='timestamp' href='#499499'><time timestamp='2016-10-05T23:15:00Z'>23:15</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
you can cheaply do generations for cost of one bit
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709360' id='499500'>
<a class='timestamp' href='#499500'><time timestamp='2016-10-05T23:16:00Z'>23:16</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it would be fine to reduce the key size by a couple bits.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709360' id='499501'>
<a class='timestamp' href='#499501'><time timestamp='2016-10-05T23:16:00Z'>23:16</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
hell, you can even replace marking garbage at all and just do generations
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709360' id='499502'>
<a class='timestamp' href='#499502'><time timestamp='2016-10-05T23:16:00Z'>23:16</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: yeah I built a version like that
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709360' id='499503'>
<a class='timestamp' href='#499503'><time timestamp='2016-10-05T23:16:00Z'>23:16</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
you use the last bit/byte for flags
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709420' id='499504'>
<a class='timestamp' href='#499504'><time timestamp='2016-10-05T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
to be honest the keys could be 16 bytes, since the hash is privately salted... but at least with the old datastructure there wouldn&#x27;t have been a huge performance improvement from that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709420' id='499505'>
<a class='timestamp' href='#499505'><time timestamp='2016-10-05T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
If memory overhead is really a must
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709420' id='499506'>
<a class='timestamp' href='#499506'><time timestamp='2016-10-05T23:17:00Z'>23:17</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
gmaxwell: agree 100%, but I thought that wasn&#x27;t reviewable
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709480' id='499507'>
<a class='timestamp' href='#499507'><time timestamp='2016-10-05T23:18:00Z'>23:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If we wanted the same code to work as a replacement for the bloom filter elsewhere we&#x27;d want to use the location xor trick, where other_index =  this_index^H(key)   ... this lets you use very small keys.. the original insert tries to go into index = H(bigger_key).  
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709480' id='499508'>
<a class='timestamp' href='#499508'><time timestamp='2016-10-05T23:18:00Z'>23:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jeremyrubin: yea, I wouldn&#x27;t bother but it would be good to know what performance we were leaving on the floor, if any. If it&#x27;s a lot it would be worth considering.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709600' id='499509'>
<a class='timestamp' href='#499509'><time timestamp='2016-10-05T23:20:00Z'>23:20</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
yeah; the nice thing is I think this patch is a nesc first step to trying out those designs; so my feeling is we should try to review this then such improvements can be measured
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709780' id='499510'>
<a class='timestamp' href='#499510'><time timestamp='2016-10-05T23:23:00Z'>23:23</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I didn&#x27;t try a version with half sized keys FYI.. figured proposing that would be DOA
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709780' id='499511'>
<a class='timestamp' href='#499511'><time timestamp='2016-10-05T23:23:00Z'>23:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it would only be an interesting proposal if it showed a big speedup, otherwise it&#x27;s not worth trying to reason about the security.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709840' id='499512'>
<a class='timestamp' href='#499512'><time timestamp='2016-10-05T23:24:00Z'>23:24</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Also if we&#x27;re going to 128 bit may as well do md5 or something if you really want things to go faster
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709840' id='499513'>
<a class='timestamp' href='#499513'><time timestamp='2016-10-05T23:24:00Z'>23:24</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
md5+salt should be just as secure
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709840' id='499514'>
<a class='timestamp' href='#499514'><time timestamp='2016-10-05T23:24:00Z'>23:24</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
(iirc)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709900' id='499515'>
<a class='timestamp' href='#499515'><time timestamp='2016-10-05T23:25:00Z'>23:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
SipHash128.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709900' id='499516'>
<a class='timestamp' href='#499516'><time timestamp='2016-10-05T23:25:00Z'>23:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
me ducks
<br>
</div>

<div class='talk op-msg' data-timestamp='1475709960' id='499517'>
<a class='timestamp' href='#499517'><time timestamp='2016-10-05T23:26:00Z'>23:26</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
haha isn&#x27;t that experimental tho
<br>
</div>

<div class='talk op-msg' data-timestamp='1475710020' id='499518'>
<a class='timestamp' href='#499518'><time timestamp='2016-10-05T23:27:00Z'>23:27</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
but yeah computing the hashes is a hot path thing, so if one really wants to rice this sucker would make things faster 
<br>
</div>

<div class='talk op-msg' data-timestamp='1475710020' id='499519'>
<a class='timestamp' href='#499519'><time timestamp='2016-10-05T23:27:00Z'>23:27</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
(ComputeEntry called once per lookup)
<br>
</div>

<div class='talk op-msg' data-timestamp='1475710260' id='499520'>
<a class='timestamp' href='#499520'><time timestamp='2016-10-05T23:31:00Z'>23:31</time></a>
&lt;<span class='nick nick-16'> GitHub138</span>&gt;
[bitcoin] randy-waterhouse opened pull request #8896: Update INSTALL landing redirection notice for build instructions. (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/8896" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8896</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475710260' id='499521'>
<a class='timestamp' href='#499521'><time timestamp='2016-10-05T23:31:00Z'>23:31</time></a>
&lt;<span class='nick nick-3'> tunafizz</span>&gt;
needs moar power al <b>*grunt*grunt*grunt*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475710260' id='499522'>
<a class='timestamp' href='#499522'><time timestamp='2016-10-05T23:31:00Z'>23:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well if you want faster, using blake2b would be the same speed as md5, and keeping the ~32 byte output I wouldn&#x27;t really have much to fuss about the security.
<br>
</div>

<div class='talk op-msg' data-timestamp='1475710500' id='499523'>
<a class='timestamp' href='#499523'><time timestamp='2016-10-05T23:35:00Z'>23:35</time></a>
&lt;<span class='nick nick-3'> tunafizz</span>&gt;
needs the binford2000 hash al <b>*grunt*grunt*grunt*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1475710680' id='499524'>
<a class='timestamp' href='#499524'><time timestamp='2016-10-05T23:38:00Z'>23:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: 3 cycles per byte, damn...
<br>
</div>

</div>
</section>

</body>
</html>
