<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2020-02-11
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2020-02-11' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:18 UTC</pre>
<pre><a href="/bitcoin-core-dev/2020-01-11">&lt;</a><span class='header'>  February 2020   </span><a href="/bitcoin-core-dev/2020-03-11">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                   <a class="" href="/bitcoin-core-dev/2020-02-01">1</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2020-02-02">2</a>  <a class="" href="/bitcoin-core-dev/2020-02-03">3</a>  <a class="" href="/bitcoin-core-dev/2020-02-04">4</a>  <a class="" href="/bitcoin-core-dev/2020-02-05">5</a>  <a class="" href="/bitcoin-core-dev/2020-02-06">6</a>  <a class="" href="/bitcoin-core-dev/2020-02-07">7</a>  <a class="" href="/bitcoin-core-dev/2020-02-08">8</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2020-02-09">9</a> <a class="" href="/bitcoin-core-dev/2020-02-10">10</a> <a class="current" href="/bitcoin-core-dev/2020-02-11">11</a> <a class="" href="/bitcoin-core-dev/2020-02-12">12</a> <a class="" href="/bitcoin-core-dev/2020-02-13">13</a> <a class="" href="/bitcoin-core-dev/2020-02-14">14</a> <a class="" href="/bitcoin-core-dev/2020-02-15">15</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-02-16">16</a> <a class="" href="/bitcoin-core-dev/2020-02-17">17</a> <a class="" href="/bitcoin-core-dev/2020-02-18">18</a> <a class="" href="/bitcoin-core-dev/2020-02-19">19</a> <a class="" href="/bitcoin-core-dev/2020-02-20">20</a> <a class="" href="/bitcoin-core-dev/2020-02-21">21</a> <a class="" href="/bitcoin-core-dev/2020-02-22">22</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-02-23">23</a> <a class="" href="/bitcoin-core-dev/2020-02-24">24</a> <a class="" href="/bitcoin-core-dev/2020-02-25">25</a> <a class="" href="/bitcoin-core-dev/2020-02-26">26</a> <a class="" href="/bitcoin-core-dev/2020-02-27">27</a> <a class="" href="/bitcoin-core-dev/2020-02-28">28</a> <a class="" href="/bitcoin-core-dev/2020-02-29">29</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1581379560' id='374795'>
<a class='timestamp' href='#374795'><time timestamp='2020-02-11T00:06:00Z'>00:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] za-kk reopened pull request #17355: gui: grey out used address in address book (master...oct-19-17174) <a href="https://github.com/bitcoin/bitcoin/pull/17355" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/17355</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581380700' id='374796'>
<a class='timestamp' href='#374796'><time timestamp='2020-02-11T00:25:00Z'>00:25</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #18113: [coins] Don&#x27;t allow a coin to spent and FRESH. Improve commenting. (master...2020-01-prune-pruned) <a href="https://github.com/bitcoin/bitcoin/pull/18113" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18113</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581383520' id='374797'>
<a class='timestamp' href='#374797'><time timestamp='2020-02-11T01:12:00Z'>01:12</time></a>
&lt;<span class='nick nick-3'> cfields_</span>&gt;
gitian builders: detached sigs for v0.19.1rc2 are up.
<br>
</div>

<div class='talk op-msg' data-timestamp='1581383520' id='374798'>
<a class='timestamp' href='#374798'><time timestamp='2020-02-11T01:12:00Z'>01:12</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581398580' id='374799'>
<a class='timestamp' href='#374799'><time timestamp='2020-02-11T05:23:00Z'>05:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] achow101 opened pull request #18115: [wallet] Pass in transactions and messages for signing instead of exporting the private keys (master...sign-in-spkman) <a href="https://github.com/bitcoin/bitcoin/pull/18115" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18115</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581405600' id='374800'>
<a class='timestamp' href='#374800'><time timestamp='2020-02-11T07:20:00Z'>07:20</time></a>
&lt;<span class='nick nick-9'> jaheller</span>&gt;
Hi, some multisig &quot;gurus&quot; here? Got a question regarding multisig, seems like there was a change in how multisig transactions are being created. Running a node using bitcoind v0.16.3 and another one using latest bitcoind (v.0.19.0.1). The multisig transaction created on the old node can be decoded by <a href="https://coinb.in" class="link" target="_blank">https://coinb.in</a> correctly (it&#x27;s displayed as a
<br>
</div>

<div class='talk op-msg' data-timestamp='1581405600' id='374801'>
<a class='timestamp' href='#374801'><time timestamp='2020-02-11T07:20:00Z'>07:20</time></a>
&lt;<span class='nick nick-9'> jaheller</span>&gt;
multisig 2:3 transaction). Using the newest bitcoind to create transaction coinb.in isn&#x27;t able to display it correctly. Someone involved into this?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581405960' id='374802'>
<a class='timestamp' href='#374802'><time timestamp='2020-02-11T07:26:00Z'>07:26</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/646f0ada0205...35b7a8e539fa" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/646f0ada0205...35b7a8e539fa</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581405960' id='374803'>
<a class='timestamp' href='#374803'><time timestamp='2020-02-11T07:26:00Z'>07:26</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 0e0fa27 Pieter Wuille: Get rid of VARINT default argument
<br>
</div>

<div class='talk op-msg' data-timestamp='1581406020' id='374804'>
<a class='timestamp' href='#374804'><time timestamp='2020-02-11T07:27:00Z'>07:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 35b7a8e fanquake: Merge #18087: Get rid of VARINT default argument
<br>
</div>

<div class='talk op-msg' data-timestamp='1581406020' id='374805'>
<a class='timestamp' href='#374805'><time timestamp='2020-02-11T07:27:00Z'>07:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake merged pull request #18087: Get rid of VARINT default argument (master...202002_novarintvarmacro) <a href="https://github.com/bitcoin/bitcoin/pull/18087" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18087</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581408420' id='374806'>
<a class='timestamp' href='#374806'><time timestamp='2020-02-11T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jaheller: ask on bitcoin.stackexchange.com
<br>
</div>

<div class='talk op-msg' data-timestamp='1581409260' id='374807'>
<a class='timestamp' href='#374807'><time timestamp='2020-02-11T08:21:00Z'>08:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto opened pull request #18116: depends: Use clang for Ubuntu 16.04 (master...20200211-clang-ubuntu) <a href="https://github.com/bitcoin/bitcoin/pull/18116" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18116</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581409440' id='374808'>
<a class='timestamp' href='#374808'><time timestamp='2020-02-11T08:24:00Z'>08:24</time></a>
&lt;<span class='nick nick-9'> jaheller</span>&gt;
sipa Done, thanks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1581409920' id='374809'>
<a class='timestamp' href='#374809'><time timestamp='2020-02-11T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake pushed 3 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/35b7a8e539fa...98264e2ccb17" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/35b7a8e539fa...98264e2ccb17</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581409920' id='374810'>
<a class='timestamp' href='#374810'><time timestamp='2020-02-11T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fa55a25 MarcoFalke: depends: Remove reference to win32
<br>
</div>

<div class='talk op-msg' data-timestamp='1581409920' id='374811'>
<a class='timestamp' href='#374811'><time timestamp='2020-02-11T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fae9084 MarcoFalke: build: Skip i686 build by default in guix and gitian
<br>
</div>

<div class='talk op-msg' data-timestamp='1581409920' id='374812'>
<a class='timestamp' href='#374812'><time timestamp='2020-02-11T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 98264e2 fanquake: Merge #18104: build: Skip i686 build by default in guix and gitian
<br>
</div>

<div class='talk op-msg' data-timestamp='1581409980' id='374813'>
<a class='timestamp' href='#374813'><time timestamp='2020-02-11T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake merged pull request #18104: build: Skip i686 build by default in guix and gitian (master...2002-i686NoBuildByDefault) <a href="https://github.com/bitcoin/bitcoin/pull/18104" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18104</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581415560' id='374814'>
<a class='timestamp' href='#374814'><time timestamp='2020-02-11T10:06:00Z'>10:06</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
j #regex
<br>
</div>

<div class='talk op-msg' data-timestamp='1581415560' id='374815'>
<a class='timestamp' href='#374815'><time timestamp='2020-02-11T10:06:00Z'>10:06</time></a>
&lt;<span class='nick nick-10'> elichai2</span>&gt;
ops
<br>
</div>

<div class='talk op-msg' data-timestamp='1581416520' id='374816'>
<a class='timestamp' href='#374816'><time timestamp='2020-02-11T10:22:00Z'>10:22</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto opened pull request #18117: build: Fix Qt link issue for macOS target with DEBUG=1 (master...20200211-macos-debug) <a href="https://github.com/bitcoin/bitcoin/pull/18117" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18117</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581427740' id='374817'>
<a class='timestamp' href='#374817'><time timestamp='2020-02-11T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
newer boost::test output is nicely colorful
<br>
</div>

<div class='talk op-msg' data-timestamp='1581439380' id='374818'>
<a class='timestamp' href='#374818'><time timestamp='2020-02-11T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-6'> jb55</span>&gt;
sipa: do we know how slow passing around vector of vectors is in script eval? its the one thing I noticed when writing my own script interpreter, that can&#x27;t be good for overall perf? or does it not matter much.
<br>
</div>

<div class='talk op-msg' data-timestamp='1581439560' id='374819'>
<a class='timestamp' href='#374819'><time timestamp='2020-02-11T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jb55: where specifically?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581439560' id='374820'>
<a class='timestamp' href='#374820'><time timestamp='2020-02-11T16:46:00Z'>16:46</time></a>
&lt;<span class='nick nick-6'> jb55</span>&gt;
sipa: I&#x27;m working from memory, sec I&#x27;ll look
<br>
</div>

<div class='talk op-msg' data-timestamp='1581439680' id='374821'>
<a class='timestamp' href='#374821'><time timestamp='2020-02-11T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-6'> jb55</span>&gt;
sipa: the stack, first argument to EvalScript
<br>
</div>

<div class='talk op-msg' data-timestamp='1581439860' id='374822'>
<a class='timestamp' href='#374822'><time timestamp='2020-02-11T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that one is passed bt reference
<br>
</div>

<div class='talk op-msg' data-timestamp='1581439860' id='374823'>
<a class='timestamp' href='#374823'><time timestamp='2020-02-11T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*by
<br>
</div>

<div class='talk op-msg' data-timestamp='1581439920' id='374824'>
<a class='timestamp' href='#374824'><time timestamp='2020-02-11T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-6'> jb55</span>&gt;
sipa: like, is vector moving contiguous chunks of memory on each operations, or just pointers to chunks?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581439920' id='374825'>
<a class='timestamp' href='#374825'><time timestamp='2020-02-11T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-6'> jb55</span>&gt;
talking about the inner vector in stack
<br>
</div>

<div class='talk op-msg' data-timestamp='1581439980' id='374826'>
<a class='timestamp' href='#374826'><time timestamp='2020-02-11T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that depends on the operation
<br>
</div>

<div class='talk op-msg' data-timestamp='1581439980' id='374827'>
<a class='timestamp' href='#374827'><time timestamp='2020-02-11T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hard to say without a specific case to talk about
<br>
</div>

<div class='talk op-msg' data-timestamp='1581440400' id='374828'>
<a class='timestamp' href='#374828'><time timestamp='2020-02-11T17:00:00Z'>17:00</time></a>
&lt;<span class='nick nick-6'> jb55</span>&gt;
I think I just misunderstood the memory layout... looks like its all points to dynamically allocated memory, so my concern wasn&#x27;t really valid, modulo you could probably come up with something more cache friendly.
<br>
</div>

<div class='talk op-msg' data-timestamp='1581440520' id='374829'>
<a class='timestamp' href='#374829'><time timestamp='2020-02-11T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, you definitely can
<br>
</div>

<div class='talk op-msg' data-timestamp='1581440520' id='374830'>
<a class='timestamp' href='#374830'><time timestamp='2020-02-11T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but most stack affecting operations only happen once during script execution
<br>
</div>

<div class='talk op-msg' data-timestamp='1581440580' id='374831'>
<a class='timestamp' href='#374831'><time timestamp='2020-02-11T17:03:00Z'>17:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
one crazy one is OP_ROLL that can cause a huge amount of memory operations
<br>
</div>

<div class='talk op-msg' data-timestamp='1581440700' id='374832'>
<a class='timestamp' href='#374832'><time timestamp='2020-02-11T17:05:00Z'>17:05</time></a>
&lt;<span class='nick nick-6'> jb55</span>&gt;
but alas, consensus code. probably won&#x27;t be able to make drastic changes to that just for a slight perf increase
<br>
</div>

<div class='talk op-msg' data-timestamp='1581441240' id='374833'>
<a class='timestamp' href='#374833'><time timestamp='2020-02-11T17:14:00Z'>17:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, if it doesn&#x27;t hurt it&#x27;s also not worth optimizing :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581445440' id='374834'>
<a class='timestamp' href='#374834'><time timestamp='2020-02-11T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
you could imagine making everything COW non atomic shared pointers
<br>
</div>

<div class='talk op-msg' data-timestamp='1581445500' id='374835'>
<a class='timestamp' href='#374835'><time timestamp='2020-02-11T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that wouldn&#x27;t help with OP_ROLL actually
<br>
</div>

<div class='talk op-msg' data-timestamp='1581445500' id='374836'>
<a class='timestamp' href='#374836'><time timestamp='2020-02-11T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
hang on
<br>
</div>

<div class='talk op-msg' data-timestamp='1581445740' id='374837'>
<a class='timestamp' href='#374837'><time timestamp='2020-02-11T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
had a phone call come up was going to suggest not doing this
<br>
</div>

<div class='talk op-msg' data-timestamp='1581446940' id='374838'>
<a class='timestamp' href='#374838'><time timestamp='2020-02-11T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
anyways my point was going to be that it would help with things like OP_PICK but not OP_ROLL because any time you&#x27;re moving something it has to move a lot of pointers on the stack.
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447060' id='374839'>
<a class='timestamp' href='#374839'><time timestamp='2020-02-11T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
doing this plus a double linked list would be the space/time tradeoff you&#x27;d want to make
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447060' id='374840'>
<a class='timestamp' href='#374840'><time timestamp='2020-02-11T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
(maybe single works too...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447120' id='374841'>
<a class='timestamp' href='#374841'><time timestamp='2020-02-11T18:52:00Z'>18:52</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Then you could detach a node and rotate it without having to do O(n) moves
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447180' id='374842'>
<a class='timestamp' href='#374842'><time timestamp='2020-02-11T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
But, then you would have to walk the entire list for a lot of operations which could be just as bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447180' id='374843'>
<a class='timestamp' href='#374843'><time timestamp='2020-02-11T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
i think a deque instead of a vector would fix ROLL for very large stacks on some implementations
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447180' id='374844'>
<a class='timestamp' href='#374844'><time timestamp='2020-02-11T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
not quite
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447180' id='374845'>
<a class='timestamp' href='#374845'><time timestamp='2020-02-11T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
deque remove is O(N)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447240' id='374846'>
<a class='timestamp' href='#374846'><time timestamp='2020-02-11T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
<a href="http://www.cplusplus.com/reference/deque/deque/erase/" class="link" target="_blank">http://www.cplusplus.com/reference/deque/deque/erase/</a> -- only linear in remaining elements on some implementations
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447300' id='374847'>
<a class='timestamp' href='#374847'><time timestamp='2020-02-11T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
which is the same as std::vector no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447300' id='374848'>
<a class='timestamp' href='#374848'><time timestamp='2020-02-11T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
it&#x27;s a vector of vectors instead sometimes apparently
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447360' id='374849'>
<a class='timestamp' href='#374849'><time timestamp='2020-02-11T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
OP_DEPTH OP_ROLL gets you the last thing on the stack (or OP_DEPTH OP_1 OP_ROLL...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447360' id='374850'>
<a class='timestamp' href='#374850'><time timestamp='2020-02-11T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
aj: I mean that remove from vector is also linear in remaining elements
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447360' id='374851'>
<a class='timestamp' href='#374851'><time timestamp='2020-02-11T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
but you can use some efficient backshifting thing IIRC
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447420' id='374852'>
<a class='timestamp' href='#374852'><time timestamp='2020-02-11T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
The benefit of the deque is just at best a 1/2 improvement 
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447480' id='374853'>
<a class='timestamp' href='#374853'><time timestamp='2020-02-11T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
<a href="http://www.cplusplus.com/reference/vector/vector/erase/" class="link" target="_blank">http://www.cplusplus.com/reference/vector/vector/erase/</a> -- vector is always linear in subsequent elements, deque can be more efficient
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447480' id='374854'>
<a class='timestamp' href='#374854'><time timestamp='2020-02-11T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
It&#x27;s at most 1/2
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447480' id='374855'>
<a class='timestamp' href='#374855'><time timestamp='2020-02-11T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
err I guess you&#x27;re saying if it is a vector&lt;vector&lt;T&gt;&gt; then you can be better...
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447480' id='374856'>
<a class='timestamp' href='#374856'><time timestamp='2020-02-11T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I see
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447540' id='374857'>
<a class='timestamp' href='#374857'><time timestamp='2020-02-11T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
depending on the bucket size
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447540' id='374858'>
<a class='timestamp' href='#374858'><time timestamp='2020-02-11T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
bucket size is a constant factor, so you ignore that with O notation
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447540' id='374859'>
<a class='timestamp' href='#374859'><time timestamp='2020-02-11T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
but probably means it&#x27;s worse for every real script
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447540' id='374860'>
<a class='timestamp' href='#374860'><time timestamp='2020-02-11T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
well ~kinda. If the bucket size is &gt; max stack...
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447600' id='374861'>
<a class='timestamp' href='#374861'><time timestamp='2020-02-11T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Then for big O we can ignore, but for our intepreter we&#x27;re already at the maximally bad thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447600' id='374862'>
<a class='timestamp' href='#374862'><time timestamp='2020-02-11T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Buckets are what? 128?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447600' id='374863'>
<a class='timestamp' href='#374863'><time timestamp='2020-02-11T19:00:00Z'>19:00</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
(in normal implementations)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447660' id='374864'>
<a class='timestamp' href='#374864'><time timestamp='2020-02-11T19:01:00Z'>19:01</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
it seems implementations vary widely
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447720' id='374865'>
<a class='timestamp' href='#374865'><time timestamp='2020-02-11T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
something like 200 stack elements
<br>
</div>

<div class='talk op-msg' data-timestamp='1581447720' id='374866'>
<a class='timestamp' href='#374866'><time timestamp='2020-02-11T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
MAX_STACK_SIZE = 1000
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448080' id='374867'>
<a class='timestamp' href='#374867'><time timestamp='2020-02-11T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
(I think it&#x27;d be better to stick with something that has more regular implementations so that there isn&#x27;t divergent performance characteristics)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448260' id='374868'>
<a class='timestamp' href='#374868'><time timestamp='2020-02-11T19:11:00Z'>19:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as long as the max stack size isn&#x27;t increased there is no reason to worry about any of this
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448680' id='374869'>
<a class='timestamp' href='#374869'><time timestamp='2020-02-11T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
jeremyrubin: around?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448680' id='374870'>
<a class='timestamp' href='#374870'><time timestamp='2020-02-11T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
ya
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448740' id='374871'>
<a class='timestamp' href='#374871'><time timestamp='2020-02-11T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
So I thought of a hybrid approach you might like
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448740' id='374872'>
<a class='timestamp' href='#374872'><time timestamp='2020-02-11T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i thought it might be easier to talk about your very detailed comment here rather than go back and forth on your PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448740' id='374873'>
<a class='timestamp' href='#374873'><time timestamp='2020-02-11T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
first observation: you make a good point about memory blowup
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448740' id='374874'>
<a class='timestamp' href='#374874'><time timestamp='2020-02-11T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Keep the cache, but only store it if it is larger than 32 elements or something
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448800' id='374875'>
<a class='timestamp' href='#374875'><time timestamp='2020-02-11T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-3'> * jeremyrubin</span>&gt;
listening mode
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448800' id='374876'>
<a class='timestamp' href='#374876'><time timestamp='2020-02-11T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i have not quite worked through your picture examples involving N/2 parents and N/2 children yet, but i had a question for you about your linear example-
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448860' id='374877'>
<a class='timestamp' href='#374877'><time timestamp='2020-02-11T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
ask away!
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448860' id='374878'>
<a class='timestamp' href='#374878'><time timestamp='2020-02-11T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
in the linear case, aren&#x27;t we doing N^2 lookups into GetMempoolChildren, versus something much smaller if we use a cache?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448860' id='374879'>
<a class='timestamp' href='#374879'><time timestamp='2020-02-11T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
I think N 
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448860' id='374880'>
<a class='timestamp' href='#374880'><time timestamp='2020-02-11T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Good question.
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448920' id='374881'>
<a class='timestamp' href='#374881'><time timestamp='2020-02-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
At node M (M &lt; N), we look at the cache below us and do (N-M) lookups
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448920' id='374882'>
<a class='timestamp' href='#374882'><time timestamp='2020-02-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
it&#x27;s just one lookup?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448920' id='374883'>
<a class='timestamp' href='#374883'><time timestamp='2020-02-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
the cache is built from bottom to top
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448920' id='374884'>
<a class='timestamp' href='#374884'><time timestamp='2020-02-11T19:22:00Z'>19:22</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
but what&#x27;s the length of the cache!
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448980' id='374885'>
<a class='timestamp' href='#374885'><time timestamp='2020-02-11T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
We need to iterate over that cache to &quot;read it&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448980' id='374886'>
<a class='timestamp' href='#374886'><time timestamp='2020-02-11T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
So maybe I&#x27;m confusing you when I say lookup
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448980' id='374887'>
<a class='timestamp' href='#374887'><time timestamp='2020-02-11T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
well, it&#x27;s one map lookup, and then we read N-M elements i guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448980' id='374888'>
<a class='timestamp' href='#374888'><time timestamp='2020-02-11T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1581448980' id='374889'>
<a class='timestamp' href='#374889'><time timestamp='2020-02-11T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
That&#x27;s the point I&#x27;m making
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449040' id='374890'>
<a class='timestamp' href='#374890'><time timestamp='2020-02-11T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Reading those N - M elements also requires visiting them for de-duplication
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449040' id='374891'>
<a class='timestamp' href='#374891'><time timestamp='2020-02-11T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Pre epochs, this was... really bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449040' id='374892'>
<a class='timestamp' href='#374892'><time timestamp='2020-02-11T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
(well in the linear case not so bad, but in general n log n to merge into our set)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449040' id='374893'>
<a class='timestamp' href='#374893'><time timestamp='2020-02-11T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
oh right
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449040' id='374894'>
<a class='timestamp' href='#374894'><time timestamp='2020-02-11T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Post epochs, you just iterate and visit
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449100' id='374895'>
<a class='timestamp' href='#374895'><time timestamp='2020-02-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yeah so if your point is we&#x27;re already doing N^2 work in this pathological case, that doing a little more N^2 work isn&#x27;t asymptotically worse
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449100' id='374896'>
<a class='timestamp' href='#374896'><time timestamp='2020-02-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
then maybe that&#x27;s a good point
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449100' id='374897'>
<a class='timestamp' href='#374897'><time timestamp='2020-02-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
We could maybe make an optimization where if you only have one child we do something smart
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449100' id='374898'>
<a class='timestamp' href='#374898'><time timestamp='2020-02-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sdaftuar: yeah that&#x27;s my point
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449100' id='374899'>
<a class='timestamp' href='#374899'><time timestamp='2020-02-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i wonder if we should be doing something else altogether in these pathological cases
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449100' id='374900'>
<a class='timestamp' href='#374900'><time timestamp='2020-02-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
evict everything and reinsert isn&#x27;t too bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449100' id='374901'>
<a class='timestamp' href='#374901'><time timestamp='2020-02-11T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
hmm, ok i will give this more thought, thanks for the clarification
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449160' id='374902'>
<a class='timestamp' href='#374902'><time timestamp='2020-02-11T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I think the case I&#x27;m concerned about most is a -&gt; b -&gt; c....-&gt; {big tree of things}
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449220' id='374903'>
<a class='timestamp' href='#374903'><time timestamp='2020-02-11T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
because if the first part is N/2 and the big tree of things is (N/2)^2, it can get kind of annoying
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449220' id='374904'>
<a class='timestamp' href='#374904'><time timestamp='2020-02-11T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
and then you really do want a cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449220' id='374905'>
<a class='timestamp' href='#374905'><time timestamp='2020-02-11T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
you&#x27;re saying there&#x27;s a sweet spot where the memory tradeoff is worth the cpu benefit?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449220' id='374906'>
<a class='timestamp' href='#374906'><time timestamp='2020-02-11T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
which might be why only caching when you have more than X things not in the cache could be nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449280' id='374907'>
<a class='timestamp' href='#374907'><time timestamp='2020-02-11T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Yeah. essentially any time you are running and you trigger some traversal limit excluding things in the cache, you make a new cache entry
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449280' id='374908'>
<a class='timestamp' href='#374908'><time timestamp='2020-02-11T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
right now we work this way, but the limit is 1
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449340' id='374909'>
<a class='timestamp' href='#374909'><time timestamp='2020-02-11T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
you could imagine preferring to traverse until our traversal is having a poor hit rate and is big. E.g., we traversed 10000 things, but we only saw 100 things uniquely, so we should create a cache line for this sub-unit
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449400' id='374910'>
<a class='timestamp' href='#374910'><time timestamp='2020-02-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if i understand you correctly -- something like this is just a constant factor benefit at best, fundamentally we&#x27;re pretty screwed by pathological chains in reorged blocks, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449400' id='374911'>
<a class='timestamp' href='#374911'><time timestamp='2020-02-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Yeah
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449400' id='374912'>
<a class='timestamp' href='#374912'><time timestamp='2020-02-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
But we can maybe make the constants large enough so that the pathological case is bounded
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449400' id='374913'>
<a class='timestamp' href='#374913'><time timestamp='2020-02-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so that is disappointing :)  i mean, i feel like we need to do something just much smarter
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449400' id='374914'>
<a class='timestamp' href='#374914'><time timestamp='2020-02-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
maybe goes from N^3 to N^2
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449400' id='374915'>
<a class='timestamp' href='#374915'><time timestamp='2020-02-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
N here is the number of transactions in a block though
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449400' id='374916'>
<a class='timestamp' href='#374916'><time timestamp='2020-02-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
But overall my opinion is I expect the map lookups and insertions (using ordered or not) to dominate just not using a map
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449400' id='374917'>
<a class='timestamp' href='#374917'><time timestamp='2020-02-11T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
which is way too big for even N^2 i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449460' id='374918'>
<a class='timestamp' href='#374918'><time timestamp='2020-02-11T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Well so that&#x27;s what I did the math on, or tried to
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449460' id='374919'>
<a class='timestamp' href='#374919'><time timestamp='2020-02-11T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
smallest txn is 61 bytes
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449520' id='374920'>
<a class='timestamp' href='#374920'><time timestamp='2020-02-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yeah well the memory blowup there is certainly bad, but the cpu blowup is something that is more fundamentally broken i think?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449520' id='374921'>
<a class='timestamp' href='#374921'><time timestamp='2020-02-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i mean, we can take your advice and get rid of the cache to avoid OOM
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449520' id='374922'>
<a class='timestamp' href='#374922'><time timestamp='2020-02-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
also fundamentally a memory blowup implies a CPU blowup
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449520' id='374923'>
<a class='timestamp' href='#374923'><time timestamp='2020-02-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but we need to rearchitect what happens on a reorg to get rid of the CPU DoS
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449520' id='374924'>
<a class='timestamp' href='#374924'><time timestamp='2020-02-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
because you need to touch the memory anywasy
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449520' id='374925'>
<a class='timestamp' href='#374925'><time timestamp='2020-02-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449520' id='374926'>
<a class='timestamp' href='#374926'><time timestamp='2020-02-11T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
it only matters if the memory blowup is less than the CPU blowup
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449580' id='374927'>
<a class='timestamp' href='#374927'><time timestamp='2020-02-11T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
But I agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449580' id='374928'>
<a class='timestamp' href='#374928'><time timestamp='2020-02-11T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
We&#x27;re talking about something very slow to deal with
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449700' id='374929'>
<a class='timestamp' href='#374929'><time timestamp='2020-02-11T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
how long do we think traversal takes?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449700' id='374930'>
<a class='timestamp' href='#374930'><time timestamp='2020-02-11T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Because another option is to parallelize it
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449760' id='374931'>
<a class='timestamp' href='#374931'><time timestamp='2020-02-11T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think maybe the best option is to evict things that have too many descendants? or come up with some lazily updating data structures
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449820' id='374932'>
<a class='timestamp' href='#374932'><time timestamp='2020-02-11T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
not sure exactly how to do either of those ideas
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449820' id='374933'>
<a class='timestamp' href='#374933'><time timestamp='2020-02-11T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Or maybe we run a thread which times out the reorg
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449820' id='374934'>
<a class='timestamp' href='#374934'><time timestamp='2020-02-11T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
and evicts everything if it took too long to update
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449820' id='374935'>
<a class='timestamp' href='#374935'><time timestamp='2020-02-11T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
E.g., optimistically this should be simple. But if it takes too long, do the dumb thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449880' id='374936'>
<a class='timestamp' href='#374936'><time timestamp='2020-02-11T19:38:00Z'>19:38</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
the fundamental problem is that we need to get the mempool back in a consistent state, ideally with some useful fee-paying transactions, so that we can produce a new block template as quickly as possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449940' id='374937'>
<a class='timestamp' href='#374937'><time timestamp='2020-02-11T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Maybe we should spend the effort to time some &quot;worst case&quot; blocks?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449940' id='374938'>
<a class='timestamp' href='#374938'><time timestamp='2020-02-11T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so evicting everything is nice for consistency, but not really the right thing in the long run
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449940' id='374939'>
<a class='timestamp' href='#374939'><time timestamp='2020-02-11T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yeah i will try to do that.  after giving this more thought and reading your writeup, i&#x27;m not optimistic about the results
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449940' id='374940'>
<a class='timestamp' href='#374940'><time timestamp='2020-02-11T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sdaftuar: hence do the right thing optimistically (e.g., 10 seconds? 100 seconds?) and otherwise evict 50% and repeat?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581449940' id='374941'>
<a class='timestamp' href='#374941'><time timestamp='2020-02-11T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but maybe you&#x27;re right that we&#x27;re within a constant factor of workable 
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450000' id='374942'>
<a class='timestamp' href='#374942'><time timestamp='2020-02-11T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
small constant factor*
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450000' id='374943'>
<a class='timestamp' href='#374943'><time timestamp='2020-02-11T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
(100 seconds/((1e6/61)**2)) == 370 ns
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450060' id='374944'>
<a class='timestamp' href='#374944'><time timestamp='2020-02-11T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
but it&#x27;s actual n-1*n/2 so 
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450060' id='374945'>
<a class='timestamp' href='#374945'><time timestamp='2020-02-11T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
750 ns
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450120' id='374946'>
<a class='timestamp' href='#374946'><time timestamp='2020-02-11T19:42:00Z'>19:42</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
We can parallelize traversals (let&#x27;s assume this helps us by at most a factor of 2 because of concurrency overhead)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450180' id='374947'>
<a class='timestamp' href='#374947'><time timestamp='2020-02-11T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if you want to be a bit more depressed, we&#x27;re not bounded by the size of a block here
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450180' id='374948'>
<a class='timestamp' href='#374948'><time timestamp='2020-02-11T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Ah is it mempool bounded?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450180' id='374949'>
<a class='timestamp' href='#374949'><time timestamp='2020-02-11T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I thought we were block bounded
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450180' id='374950'>
<a class='timestamp' href='#374950'><time timestamp='2020-02-11T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I guess we&#x27;re updating descendents in mempool?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450180' id='374951'>
<a class='timestamp' href='#374951'><time timestamp='2020-02-11T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
in a multi-block reorg, i think we will process a big batch of transactions in this way
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450180' id='374952'>
<a class='timestamp' href='#374952'><time timestamp='2020-02-11T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
and yes we can have an unbounded number of descendants in mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450240' id='374953'>
<a class='timestamp' href='#374953'><time timestamp='2020-02-11T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Well in multi-block reorg we should definitely go block by block not all at once
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450240' id='374954'>
<a class='timestamp' href='#374954'><time timestamp='2020-02-11T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
But in multi-block I guess we can then get unbounded?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450240' id='374955'>
<a class='timestamp' href='#374955'><time timestamp='2020-02-11T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I thought we have a 25 limit presently?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450240' id='374956'>
<a class='timestamp' href='#374956'><time timestamp='2020-02-11T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
the 25 limit does not apply in the case of a reorg
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450240' id='374957'>
<a class='timestamp' href='#374957'><time timestamp='2020-02-11T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450240' id='374958'>
<a class='timestamp' href='#374958'><time timestamp='2020-02-11T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
So in multi block it might not be that bad to at a certain point evict everything and resubmit to mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450240' id='374959'>
<a class='timestamp' href='#374959'><time timestamp='2020-02-11T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
the issue is that our main code path for accepting a new transaction to the mempool implicitly assumes no in-mempool descendants
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450300' id='374960'>
<a class='timestamp' href='#374960'><time timestamp='2020-02-11T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
jeremyrubin: i think conceptually that is corret
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450300' id='374961'>
<a class='timestamp' href='#374961'><time timestamp='2020-02-11T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
because then we&#x27;re at least guaranteed to not have too much N^2 stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450300' id='374962'>
<a class='timestamp' href='#374962'><time timestamp='2020-02-11T19:45:00Z'>19:45</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
But it still is sucky
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450360' id='374963'>
<a class='timestamp' href='#374963'><time timestamp='2020-02-11T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
architecting it might be a bit messy, but maybe the right intuition is to build the mempool from scratch by reinserting things from disconnected blocks in-order for just as long as you need to produce a reasonable new fee-paying block
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450360' id='374964'>
<a class='timestamp' href='#374964'><time timestamp='2020-02-11T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
and then let the mining code run, and go back to inserting more stuff, etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450420' id='374965'>
<a class='timestamp' href='#374965'><time timestamp='2020-02-11T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think we should have some alternative to the whole thing hanging if we get some messy blocks reorged out, anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450480' id='374966'>
<a class='timestamp' href='#374966'><time timestamp='2020-02-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I guess as a sidebar, if we know that reorging is already <b>*yikes*</b> I see a few paths forward for this PR: 1) drop entirely because review not worth if we&#x27;re going to need to re-do it all 2) Accept, if we can show that it&#x27;s better/not worse 3) Accept half and keep cache so we at least preserve the same failure modes 4) Accept both, knowing we have new/different failure modes 5) time out after 100 seconds, switch algorithms, try 
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450480' id='374967'>
<a class='timestamp' href='#374967'><time timestamp='2020-02-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
again for unbounded with caching?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450480' id='374968'>
<a class='timestamp' href='#374968'><time timestamp='2020-02-11T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
the switching between algorithms with some exponential backing on time isn&#x27;t actually that dumb.
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450540' id='374969'>
<a class='timestamp' href='#374969'><time timestamp='2020-02-11T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i think either 2/4 or 3 are the most likely outcomes IMO? but i want to do some more benchmarking to get a sense of how bad things acn be
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450540' id='374970'>
<a class='timestamp' href='#374970'><time timestamp='2020-02-11T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
a 100 second &quot;stall&quot; sounds horrible?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450540' id='374971'>
<a class='timestamp' href='#374971'><time timestamp='2020-02-11T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Because you would need to have an attack against both the memory version and the time version which maybe we can prove is impossible
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450540' id='374972'>
<a class='timestamp' href='#374972'><time timestamp='2020-02-11T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
aj: scylla charbidis
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450600' id='374973'>
<a class='timestamp' href='#374973'><time timestamp='2020-02-11T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
This isn&#x27;t a problem that we&#x27;re introducing, the existing algorithms can already be wicked slow
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450600' id='374974'>
<a class='timestamp' href='#374974'><time timestamp='2020-02-11T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
the 100 second switch is <b>*in the hopes*</b> that a different algorithm could be faster for this reorg
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450600' id='374975'>
<a class='timestamp' href='#374975'><time timestamp='2020-02-11T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
We could measure historical reorg times (e.g., if it&#x27;s 10s per block, do 20, and then switch back and forth doubling)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450660' id='374976'>
<a class='timestamp' href='#374976'><time timestamp='2020-02-11T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
The idea is just to time a give up point and switch to a different algorithm (for the rest of the block that is, we&#x27;re still making monotonic progress)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450780' id='374977'>
<a class='timestamp' href='#374977'><time timestamp='2020-02-11T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
if we&#x27;ve got a different algorithm that goes faster, seems better to do that from the start i guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450780' id='374978'>
<a class='timestamp' href='#374978'><time timestamp='2020-02-11T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
aj we don&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450780' id='374979'>
<a class='timestamp' href='#374979'><time timestamp='2020-02-11T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
you can review the problem here
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450780' id='374980'>
<a class='timestamp' href='#374980'><time timestamp='2020-02-11T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
#18063
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450780' id='374981'>
<a class='timestamp' href='#374981'><time timestamp='2020-02-11T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18063" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18063</a> | Improve UpdateForDescendants by using Epochs and Removing CacheMap by JeremyRubin . Pull Request #18063 . bitcoin/bitcoin . GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450840' id='374982'>
<a class='timestamp' href='#374982'><time timestamp='2020-02-11T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
The algorithms we have with or without caching have different worst cases 
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450840' id='374983'>
<a class='timestamp' href='#374983'><time timestamp='2020-02-11T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
And caching opens up to memory based attackers
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450840' id='374984'>
<a class='timestamp' href='#374984'><time timestamp='2020-02-11T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
so short of no new magic bullet, getting rid of caching reduces attack surface to just time based DoS
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450840' id='374985'>
<a class='timestamp' href='#374985'><time timestamp='2020-02-11T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
all we really need is to from {reorged blocks} + {old mempool} to 4 to 8 megaweight of highish-value txs in a new mempool as quickly as possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450840' id='374986'>
<a class='timestamp' href='#374986'><time timestamp='2020-02-11T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
aj: agreed
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450900' id='374987'>
<a class='timestamp' href='#374987'><time timestamp='2020-02-11T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
we could filter the to_reorg set by feerate
<br>
</div>

<div class='talk op-msg' data-timestamp='1581450960' id='374988'>
<a class='timestamp' href='#374988'><time timestamp='2020-02-11T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
with a max 8 megaweight ordered map, dropping anything else
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451020' id='374989'>
<a class='timestamp' href='#374989'><time timestamp='2020-02-11T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Then, we could process the updates for just that max feerate list
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451080' id='374990'>
<a class='timestamp' href='#374990'><time timestamp='2020-02-11T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
But then the descendants could still be unbounded.
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451200' id='374991'>
<a class='timestamp' href='#374991'><time timestamp='2020-02-11T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
didn&#x27;t even say bye :&#x27;(
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451200' id='374992'>
<a class='timestamp' href='#374992'><time timestamp='2020-02-11T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
ragequit
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451200' id='374993'>
<a class='timestamp' href='#374993'><time timestamp='2020-02-11T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
ragerejoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451200' id='374994'>
<a class='timestamp' href='#374994'><time timestamp='2020-02-11T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
maybe i quit in disgust at this problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451260' id='374995'>
<a class='timestamp' href='#374995'><time timestamp='2020-02-11T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
(or maybe my internet is flaky)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451260' id='374996'>
<a class='timestamp' href='#374996'><time timestamp='2020-02-11T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
hah
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451320' id='374997'>
<a class='timestamp' href='#374997'><time timestamp='2020-02-11T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Anyways... maybe I should abandon #18603 for the &quot;fast track&quot; and open up some more obvious mempool wins (like eliminating mapLinks)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451320' id='374998'>
<a class='timestamp' href='#374998'><time timestamp='2020-02-11T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18603" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18603</a> | HTTP Error 404: Not Found
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451320' id='374999'>
<a class='timestamp' href='#374999'><time timestamp='2020-02-11T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
#18063
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451320' id='375000'>
<a class='timestamp' href='#375000'><time timestamp='2020-02-11T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18063" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18063</a> | Improve UpdateForDescendants by using Epochs and Removing CacheMap by JeremyRubin . Pull Request #18063 . bitcoin/bitcoin . GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451320' id='375001'>
<a class='timestamp' href='#375001'><time timestamp='2020-02-11T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
It seems like it&#x27;s going to take some time to ensure we&#x27;re doing the right thing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451380' id='375002'>
<a class='timestamp' href='#375002'><time timestamp='2020-02-11T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
yay for easy wins?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451380' id='375003'>
<a class='timestamp' href='#375003'><time timestamp='2020-02-11T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
hmm, i think if we&#x27;re not getting rid of cachemap, it should be the case that your patch is strictly better.  i think i need to do a little more work to determine whether removing the cache is strictly better, probably better overall but maybe not strictly better, or somehow worse
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451380' id='375004'>
<a class='timestamp' href='#375004'><time timestamp='2020-02-11T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
but eg the first commit seems like a no-brainer?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451440' id='375005'>
<a class='timestamp' href='#375005'><time timestamp='2020-02-11T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
ok why don&#x27;t I open up a new PR with just the no-brainer one?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451440' id='375006'>
<a class='timestamp' href='#375006'><time timestamp='2020-02-11T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
We can keep the broader discussion going on 18063
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451440' id='375007'>
<a class='timestamp' href='#375007'><time timestamp='2020-02-11T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sure, that&#x27;s fine with me
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451440' id='375008'>
<a class='timestamp' href='#375008'><time timestamp='2020-02-11T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
And then we can keep progress up on fixing all the other hot mess in the mempool ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451500' id='375009'>
<a class='timestamp' href='#375009'><time timestamp='2020-02-11T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
sdaftuar: did you get a chance to look at <a href="https://github.com/ajtowns/bitcoin/commit/43528b17e88ec5b8378c923106053561c909a7e5" class="link" target="_blank">https://github.com/ajtowns/bitcoin/commit/43528b17e88ec5b8378c923106053561c909a7e5</a> ? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451500' id='375010'>
<a class='timestamp' href='#375010'><time timestamp='2020-02-11T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
sdaftuar: does an O( peers * log(txs_announced) ) lookup to retry NOTFOUNDs
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451500' id='375011'>
<a class='timestamp' href='#375011'><time timestamp='2020-02-11T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
oh, i did look at it briefly -- my immediate reaction was a small amount of concern at iterating over all peers whenever there&#x27;s a NOTFOUND
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451620' id='375012'>
<a class='timestamp' href='#375012'><time timestamp='2020-02-11T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
because we coudl get up to 100 at once, i think, in one message -- so that&#x27;s like 10k map lookups?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451620' id='375013'>
<a class='timestamp' href='#375013'><time timestamp='2020-02-11T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
if we spaced out processing though then i think that would be fine, or maybe it&#x27;s fast enough as-is and i just need to benchmark it to convince myself
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451740' id='375014'>
<a class='timestamp' href='#375014'><time timestamp='2020-02-11T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
hmm, 100 is also the max in flight from a peer
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451740' id='375015'>
<a class='timestamp' href='#375015'><time timestamp='2020-02-11T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
right, that&#x27;s why i figure we could get 100 at once 
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451800' id='375016'>
<a class='timestamp' href='#375016'><time timestamp='2020-02-11T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
(we coudl get more from a malicious peer, but we filter out things that weren&#x27;t in-flight, so 100 should be the right max)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451800' id='375017'>
<a class='timestamp' href='#375017'><time timestamp='2020-02-11T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
txs_announced maxes out at 100k
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451800' id='375018'>
<a class='timestamp' href='#375018'><time timestamp='2020-02-11T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
oh, right
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451800' id='375019'>
<a class='timestamp' href='#375019'><time timestamp='2020-02-11T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] JeremyRubin opened pull request #18120: Change UpdateForDescendants to use Epochs (master...epoch-mempool-clean-split-updatefordescendants-pt1) <a href="https://github.com/bitcoin/bitcoin/pull/18120" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18120</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451860' id='375020'>
<a class='timestamp' href='#375020'><time timestamp='2020-02-11T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
ok feel free to review just that chunk (same as the commit from the other branch)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451860' id='375021'>
<a class='timestamp' href='#375021'><time timestamp='2020-02-11T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
jeremyrubin: will do
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451860' id='375022'>
<a class='timestamp' href='#375022'><time timestamp='2020-02-11T20:11:00Z'>20:11</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
jeremyrubin: ack
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451920' id='375023'>
<a class='timestamp' href='#375023'><time timestamp='2020-02-11T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
hmm, maybe that&#x27;s ambiguous :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451920' id='375024'>
<a class='timestamp' href='#375024'><time timestamp='2020-02-11T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
ready for merge!
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451920' id='375025'>
<a class='timestamp' href='#375025'><time timestamp='2020-02-11T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
lgtm
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451920' id='375026'>
<a class='timestamp' href='#375026'><time timestamp='2020-02-11T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
sdaftuar: good catch with the grandchild it thing btw earlier
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451920' id='375027'>
<a class='timestamp' href='#375027'><time timestamp='2020-02-11T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
We should probably have a test for that...
<br>
</div>

<div class='talk op-msg' data-timestamp='1581451980' id='375028'>
<a class='timestamp' href='#375028'><time timestamp='2020-02-11T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
agreed, that code is definitely undertested
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452040' id='375029'>
<a class='timestamp' href='#375029'><time timestamp='2020-02-11T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
oh! i misremembered how chain limits get applied in the case of a reorg
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452100' id='375030'>
<a class='timestamp' href='#375030'><time timestamp='2020-02-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so there are an unbounded number of in-mempool descendants, but there is a bound on chain limits with respect to what is in the block(s)
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452100' id='375031'>
<a class='timestamp' href='#375031'><time timestamp='2020-02-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I was just thinking more about that
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452100' id='375032'>
<a class='timestamp' href='#375032'><time timestamp='2020-02-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so the worst-case scenarios we were talking about are not quite right
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452100' id='375033'>
<a class='timestamp' href='#375033'><time timestamp='2020-02-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
The issue with the unbounded in-mempool descendants is also that the cache entries can get HUGE
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452100' id='375034'>
<a class='timestamp' href='#375034'><time timestamp='2020-02-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
e.g., the entire mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452100' id='375035'>
<a class='timestamp' href='#375035'><time timestamp='2020-02-11T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452160' id='375036'>
<a class='timestamp' href='#375036'><time timestamp='2020-02-11T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
so we should definitely get rid of the cache IMO, even if our runtime goes up
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452160' id='375037'>
<a class='timestamp' href='#375037'><time timestamp='2020-02-11T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
because the entire mempool * N is bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452220' id='375038'>
<a class='timestamp' href='#375038'><time timestamp='2020-02-11T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
like maybe even brick the network today with a few blocks bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452220' id='375039'>
<a class='timestamp' href='#375039'><time timestamp='2020-02-11T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
well, one alternative is to memory cap it instead?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452220' id='375040'>
<a class='timestamp' href='#375040'><time timestamp='2020-02-11T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Or LRU cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452220' id='375041'>
<a class='timestamp' href='#375041'><time timestamp='2020-02-11T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452280' id='375042'>
<a class='timestamp' href='#375042'><time timestamp='2020-02-11T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
IIRC the philosophy that BCash deals with this is not... awful?
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452280' id='375043'>
<a class='timestamp' href='#375043'><time timestamp='2020-02-11T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
step 1: clone the mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452280' id='375044'>
<a class='timestamp' href='#375044'><time timestamp='2020-02-11T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
step 2: fork the reorging
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452280' id='375045'>
<a class='timestamp' href='#375045'><time timestamp='2020-02-11T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
it&#x27;s starting to make more sense to me though that if what is in the mempool is bounded in some reasonable-ish way, and what gets added back from blocks is bounded in some way, that we could get comfortable with some kind of CPU bound on the combination and be comfortable dropping the cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452340' id='375046'>
<a class='timestamp' href='#375046'><time timestamp='2020-02-11T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
step3: continue mining on the non-reorg chain
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452340' id='375047'>
<a class='timestamp' href='#375047'><time timestamp='2020-02-11T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
step4; if reorg finishes, switch
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452400' id='375048'>
<a class='timestamp' href='#375048'><time timestamp='2020-02-11T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
if the reorg never finishes then it was done by a malicious miner, so it&#x27;s not economically good anyways maybe
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452400' id='375049'>
<a class='timestamp' href='#375049'><time timestamp='2020-02-11T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
not sure that really makes sense, as until we return a new block template, mining on the old chain is almost certainly what the default behavior of miners would be regardless
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452400' id='375050'>
<a class='timestamp' href='#375050'><time timestamp='2020-02-11T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
so i think our job is to make it so that we can produce a valid new block on the new chain as fast as possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452400' id='375051'>
<a class='timestamp' href='#375051'><time timestamp='2020-02-11T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
Fair point
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452460' id='375052'>
<a class='timestamp' href='#375052'><time timestamp='2020-02-11T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I wonder if a randomized algorithm can also help here
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452520' id='375053'>
<a class='timestamp' href='#375053'><time timestamp='2020-02-11T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
The attacker is exploiting some specific structures
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452520' id='375054'>
<a class='timestamp' href='#375054'><time timestamp='2020-02-11T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
I wonder if there&#x27;s an algorithm with a random order that can prevent them from exposing some of the worst case stuff
<br>
</div>

<div class='talk op-msg' data-timestamp='1581452520' id='375055'>
<a class='timestamp' href='#375055'><time timestamp='2020-02-11T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-2'> jeremyrubin</span>&gt;
but being on average much slower maybe
<br>
</div>

<div class='talk op-msg' data-timestamp='1581453840' id='375056'>
<a class='timestamp' href='#375056'><time timestamp='2020-02-11T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto opened pull request #18121: gui: Throttle GUI update pace when -reindex (master...20200211-reindex-gui) <a href="https://github.com/bitcoin/bitcoin/pull/18121" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18121</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581459600' id='375057'>
<a class='timestamp' href='#375057'><time timestamp='2020-02-11T22:20:00Z'>22:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theStack opened pull request #18122: rpc: update validateaddress RPCExamples to bech32 (master...20200211-rpc-update-validateaddress-rpcexamples-to-bech32) <a href="https://github.com/bitcoin/bitcoin/pull/18122" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18122</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581460080' id='375058'>
<a class='timestamp' href='#375058'><time timestamp='2020-02-11T22:28:00Z'>22:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ryanofsky opened pull request #18123: gui: Fix race in WalletModel::pollBalanceChanged (master...pr/pollbug) <a href="https://github.com/bitcoin/bitcoin/pull/18123" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18123</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1581460380' id='375059'>
<a class='timestamp' href='#375059'><time timestamp='2020-02-11T22:33:00Z'>22:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #18124: init: Clarify C and C++ locale assumptions. Add locale sanity check to verify assumptions at run-time. (master...LocaleSanityCheck) <a href="https://github.com/bitcoin/bitcoin/pull/18124" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18124</a>
<br>
</div>

</div>
</section>

</body>
</html>
