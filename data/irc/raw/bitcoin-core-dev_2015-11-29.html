<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2015-11-29
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2015-11-29' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:27 UTC</pre>
<pre><a href="/bitcoin-core-dev/2015-10-29">&lt;</a><span class='header'>  November 2015   </span><a href="/bitcoin-core-dev/2015-12-29">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2015-11-01">1</a>  <a class="" href="/bitcoin-core-dev/2015-11-02">2</a>  <a class="" href="/bitcoin-core-dev/2015-11-03">3</a>  <a class="" href="/bitcoin-core-dev/2015-11-04">4</a>  <a class="" href="/bitcoin-core-dev/2015-11-05">5</a>  <a class="" href="/bitcoin-core-dev/2015-11-06">6</a>  <a class="" href="/bitcoin-core-dev/2015-11-07">7</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2015-11-08">8</a>  <a class="" href="/bitcoin-core-dev/2015-11-09">9</a> <a class="" href="/bitcoin-core-dev/2015-11-10">10</a> <a class="" href="/bitcoin-core-dev/2015-11-11">11</a> <a class="" href="/bitcoin-core-dev/2015-11-12">12</a> <a class="" href="/bitcoin-core-dev/2015-11-13">13</a> <a class="" href="/bitcoin-core-dev/2015-11-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-11-15">15</a> <a class="" href="/bitcoin-core-dev/2015-11-16">16</a> <a class="" href="/bitcoin-core-dev/2015-11-17">17</a> <a class="" href="/bitcoin-core-dev/2015-11-18">18</a> <a class="" href="/bitcoin-core-dev/2015-11-19">19</a> <a class="" href="/bitcoin-core-dev/2015-11-20">20</a> <a class="" href="/bitcoin-core-dev/2015-11-21">21</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-11-22">22</a> <a class="" href="/bitcoin-core-dev/2015-11-23">23</a> <a class="" href="/bitcoin-core-dev/2015-11-24">24</a> <a class="" href="/bitcoin-core-dev/2015-11-25">25</a> <a class="" href="/bitcoin-core-dev/2015-11-26">26</a> <a class="" href="/bitcoin-core-dev/2015-11-27">27</a> <a class="" href="/bitcoin-core-dev/2015-11-28">28</a>  &#x000A;<a class="current" href="/bitcoin-core-dev/2015-11-29">29</a> <a class="" href="/bitcoin-core-dev/2015-11-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1448755560' id='441104'>
<a class='timestamp' href='#441104'><time timestamp='2015-11-29T00:06:00Z'>00:06</time></a>
&lt;<span class='nick nick-14'> GitHub107</span>&gt;
[bitcoin] gmaxwell closed pull request #7123: [WIP] Make trickle logic useful again, delay trickle when past upload limit. (master...actually_trickle) <a href="https://github.com/bitcoin/bitcoin/pull/7123" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7123</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448755800' id='441105'>
<a class='timestamp' href='#441105'><time timestamp='2015-11-29T00:10:00Z'>00:10</time></a>
&lt;<span class='nick nick-15'> GitHub27</span>&gt;
[bitcoin] gmaxwell pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/61457c29d735...c894fbbb1dc0" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/61457c29d735...c894fbbb1dc0</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448755800' id='441106'>
<a class='timestamp' href='#441106'><time timestamp='2015-11-29T00:10:00Z'>00:10</time></a>
&lt;<span class='nick nick-15'> GitHub27</span>&gt;
bitcoin/master a9f3d3d Pieter Wuille: Fix and improve relay from whitelisted peers...
<br>
</div>

<div class='talk op-msg' data-timestamp='1448755800' id='441107'>
<a class='timestamp' href='#441107'><time timestamp='2015-11-29T00:10:00Z'>00:10</time></a>
&lt;<span class='nick nick-15'> GitHub27</span>&gt;
bitcoin/master c894fbb Gregory Maxwell: Merge pull request #7106...
<br>
</div>

<div class='talk op-msg' data-timestamp='1448755800' id='441108'>
<a class='timestamp' href='#441108'><time timestamp='2015-11-29T00:10:00Z'>00:10</time></a>
&lt;<span class='nick nick-4'> GitHub63</span>&gt;
[bitcoin] gmaxwell closed pull request #7106: Fix and improve relay from whitelisted peers (master...realwhiterelay) <a href="https://github.com/bitcoin/bitcoin/pull/7106" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7106</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448762340' id='441109'>
<a class='timestamp' href='#441109'><time timestamp='2015-11-29T01:59:00Z'>01:59</time></a>
&lt;<span class='nick nick-3'> GitHub12</span>&gt;
[bitcoin] gmaxwell closed pull request #7119: Add option to opt into full-RBF when sending funds (master...2015-11-opt-into-full-rbf-option) <a href="https://github.com/bitcoin/bitcoin/pull/7119" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7119</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448787420' id='441110'>
<a class='timestamp' href='#441110'><time timestamp='2015-11-29T08:57:00Z'>08:57</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, what do you think about removing RelayTransaction entirely and simply sending the top n MB of the mempool every m seconds?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448787480' id='441111'>
<a class='timestamp' href='#441111'><time timestamp='2015-11-29T08:58:00Z'>08:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: I want to try a protocol which does an efficient set reconcillation of the top N mb of mempool. Which is like the pro version of what you&#x27;re thinking.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448787480' id='441112'>
<a class='timestamp' href='#441112'><time timestamp='2015-11-29T08:58:00Z'>08:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Not the actual data, but set reconcile the TXids and then getdata the bodies you need.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448787540' id='441113'>
<a class='timestamp' href='#441113'><time timestamp='2015-11-29T08:59:00Z'>08:59</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, yes long term goal for sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1448787540' id='441114'>
<a class='timestamp' href='#441114'><time timestamp='2015-11-29T08:59:00Z'>08:59</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
but i can do this version like
<br>
</div>

<div class='talk op-msg' data-timestamp='1448787540' id='441115'>
<a class='timestamp' href='#441115'><time timestamp='2015-11-29T08:59:00Z'>08:59</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
today
<br>
</div>

<div class='talk op-msg' data-timestamp='1448787720' id='441116'>
<a class='timestamp' href='#441116'><time timestamp='2015-11-29T09:02:00Z'>09:02</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, can you rename setInventoryKnown to filterInventoryKnown
<br>
</div>

<div class='talk op-msg' data-timestamp='1448787720' id='441117'>
<a class='timestamp' href='#441117'><time timestamp='2015-11-29T09:02:00Z'>09:02</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
there&#x27;s a bunch of those now that are a bit confusing because of not changing the name
<br>
</div>

<div class='talk op-msg' data-timestamp='1448789340' id='441118'>
<a class='timestamp' href='#441118'><time timestamp='2015-11-29T09:29:00Z'>09:29</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, im pretty sure there&#x27;s a bug in 7100
<br>
</div>

<div class='talk op-msg' data-timestamp='1448789340' id='441119'>
<a class='timestamp' href='#441119'><time timestamp='2015-11-29T09:29:00Z'>09:29</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
it looks like you can get a false positive inv for blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1448789460' id='441120'>
<a class='timestamp' href='#441120'><time timestamp='2015-11-29T09:31:00Z'>09:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: where?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448789580' id='441121'>
<a class='timestamp' href='#441121'><time timestamp='2015-11-29T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, &quot;getblocks&quot; calls pfrom-&gt;PushInventory which uses setInventoryKnown to decide whether to actually do that
<br>
</div>

<div class='talk op-msg' data-timestamp='1448789580' id='441122'>
<a class='timestamp' href='#441122'><time timestamp='2015-11-29T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
so a false positive could prevent a block inv as well as tx inv
<br>
</div>

<div class='talk op-msg' data-timestamp='1448789580' id='441123'>
<a class='timestamp' href='#441123'><time timestamp='2015-11-29T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i dont much care about tx inv&#x27;s getting droped but it would be bad for block inv&#x27;s to be also
<br>
</div>

<div class='talk op-msg' data-timestamp='1448789580' id='441124'>
<a class='timestamp' href='#441124'><time timestamp='2015-11-29T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
agreed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448789640' id='441125'>
<a class='timestamp' href='#441125'><time timestamp='2015-11-29T09:34:00Z'>09:34</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
so im thinking there needs to be a setInventoryKnownBlocks and filterInventoryKnownTransactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1448789940' id='441126'>
<a class='timestamp' href='#441126'><time timestamp='2015-11-29T09:39:00Z'>09:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
with 6494 we can just drop the known blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1448789940' id='441127'>
<a class='timestamp' href='#441127'><time timestamp='2015-11-29T09:39:00Z'>09:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as we keep track much more efficiently what peers know
<br>
</div>

<div class='talk op-msg' data-timestamp='1448790240' id='441128'>
<a class='timestamp' href='#441128'><time timestamp='2015-11-29T09:44:00Z'>09:44</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, yes i agree that&#x27;s a better solution
<br>
</div>

<div class='talk op-msg' data-timestamp='1448790240' id='441129'>
<a class='timestamp' href='#441129'><time timestamp='2015-11-29T09:44:00Z'>09:44</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
except it&#x27;s optional so we would still need the setInventoryKnownBlocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1448790240' id='441130'>
<a class='timestamp' href='#441130'><time timestamp='2015-11-29T09:44:00Z'>09:44</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
(or maybe we simply always send block invs ?)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448790300' id='441131'>
<a class='timestamp' href='#441131'><time timestamp='2015-11-29T09:45:00Z'>09:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, we should always send them
<br>
</div>

<div class='talk op-msg' data-timestamp='1448790420' id='441132'>
<a class='timestamp' href='#441132'><time timestamp='2015-11-29T09:47:00Z'>09:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;ll rebase #6494; it&#x27;s overdue for merging
<br>
</div>

<div class='talk op-msg' data-timestamp='1448791020' id='441133'>
<a class='timestamp' href='#441133'><time timestamp='2015-11-29T09:57:00Z'>09:57</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, <a href="https://github.com/gmaxwell/bitcoin/pull/2" class="link" target="_blank">https://github.com/gmaxwell/bitcoin/pull/2</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448791380' id='441134'>
<a class='timestamp' href='#441134'><time timestamp='2015-11-29T10:03:00Z'>10:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
woot, managed to apply that without loading the webpage.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448791500' id='441135'>
<a class='timestamp' href='#441135'><time timestamp='2015-11-29T10:05:00Z'>10:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you have now passed the entry exam for the school for git wizardry and magic
<br>
</div>

<div class='talk op-msg' data-timestamp='1448791560' id='441136'>
<a class='timestamp' href='#441136'><time timestamp='2015-11-29T10:06:00Z'>10:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well the git part was never a problem, just the github part. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1448791620' id='441137'>
<a class='timestamp' href='#441137'><time timestamp='2015-11-29T10:07:00Z'>10:07</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
just gotta know the special pulls refspec
<br>
</div>

<div class='talk op-msg' data-timestamp='1448791860' id='441138'>
<a class='timestamp' href='#441138'><time timestamp='2015-11-29T10:11:00Z'>10:11</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, in 7113 you calculate the optimal number of hash functions and then restrict it to 1-50
<br>
</div>

<div class='talk op-msg' data-timestamp='1448791860' id='441139'>
<a class='timestamp' href='#441139'><time timestamp='2015-11-29T10:11:00Z'>10:11</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448792040' id='441140'>
<a class='timestamp' href='#441140'><time timestamp='2015-11-29T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
an fp rate of 1/10^15 would get you nHashFuncs ~= 50
<br>
</div>

<div class='talk op-msg' data-timestamp='1448792040' id='441141'>
<a class='timestamp' href='#441141'><time timestamp='2015-11-29T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i dont see this being an issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1448792280' id='441142'>
<a class='timestamp' href='#441142'><time timestamp='2015-11-29T10:18:00Z'>10:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
eh, i guess i wrote that part before realizing that the number of hash finctions only dependee on the fprate :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448792280' id='441143'>
<a class='timestamp' href='#441143'><time timestamp='2015-11-29T10:18:00Z'>10:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
functions, depended
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793060' id='441144'>
<a class='timestamp' href='#441144'><time timestamp='2015-11-29T10:31:00Z'>10:31</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
anybody have an opinion of changing gbt to default not mine a transaction until it&#x27;s been in the mempool for more than a few seconds
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793060' id='441145'>
<a class='timestamp' href='#441145'><time timestamp='2015-11-29T10:31:00Z'>10:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: do that on top of morcos&#x27; rewrite then :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793120' id='441146'>
<a class='timestamp' href='#441146'><time timestamp='2015-11-29T10:32:00Z'>10:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, it&#x27;s a trivial 1 line change so i was mostly just wondering about the concept
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793120' id='441147'>
<a class='timestamp' href='#441147'><time timestamp='2015-11-29T10:32:00Z'>10:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793120' id='441148'>
<a class='timestamp' href='#441148'><time timestamp='2015-11-29T10:32:00Z'>10:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
it seems like a good idea to me but i just thought of it soo
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793180' id='441149'>
<a class='timestamp' href='#441149'><time timestamp='2015-11-29T10:33:00Z'>10:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
among miners who are not in a position to exploit high hashrate or fast relay to a majority, that should improve their relay
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793300' id='441150'>
<a class='timestamp' href='#441150'><time timestamp='2015-11-29T10:35:00Z'>10:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: I think it&#x27;s a good idea. I thought of it before but figured it would screw up the recent improvements. :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793300' id='441151'>
<a class='timestamp' href='#441151'><time timestamp='2015-11-29T10:35:00Z'>10:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
should be trivial now that we remember time-in-mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793360' id='441152'>
<a class='timestamp' href='#441152'><time timestamp='2015-11-29T10:36:00Z'>10:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
hm. actually yea, you&#x27;d just skip them, so it doesn&#x27;t change the sort.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793360' id='441153'>
<a class='timestamp' href='#441153'><time timestamp='2015-11-29T10:36:00Z'>10:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793360' id='441154'>
<a class='timestamp' href='#441154'><time timestamp='2015-11-29T10:36:00Z'>10:36</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, it&#x27;s been a trivial 1 loc patch for about a year now
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793360' id='441155'>
<a class='timestamp' href='#441155'><time timestamp='2015-11-29T10:36:00Z'>10:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
orly?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793420' id='441156'>
<a class='timestamp' href='#441156'><time timestamp='2015-11-29T10:37:00Z'>10:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
actually more than that
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793420' id='441157'>
<a class='timestamp' href='#441157'><time timestamp='2015-11-29T10:37:00Z'>10:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
Date:   Mon Nov 11 17:35:14 2013 +1000
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793420' id='441158'>
<a class='timestamp' href='#441158'><time timestamp='2015-11-29T10:37:00Z'>10:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ha, wow
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793420' id='441159'>
<a class='timestamp' href='#441159'><time timestamp='2015-11-29T10:37:00Z'>10:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
on a related note
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793420' id='441160'>
<a class='timestamp' href='#441160'><time timestamp='2015-11-29T10:37:00Z'>10:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
we want to maximally prime the sigcache for receiving a block
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793480' id='441161'>
<a class='timestamp' href='#441161'><time timestamp='2015-11-29T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
while also limiting the mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793480' id='441162'>
<a class='timestamp' href='#441162'><time timestamp='2015-11-29T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
these are kind of at odds at the moment
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793480' id='441163'>
<a class='timestamp' href='#441163'><time timestamp='2015-11-29T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I tried to have sipa verify rejects and it polluted the crap out of his cache.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793480' id='441164'>
<a class='timestamp' href='#441164'><time timestamp='2015-11-29T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i&#x27;ve got a few ideas of how to deal with this but they are admittedly mostly insane
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793480' id='441165'>
<a class='timestamp' href='#441165'><time timestamp='2015-11-29T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it actually makes sense to verify rejects for several reasons.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793480' id='441166'>
<a class='timestamp' href='#441166'><time timestamp='2015-11-29T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but I think we have to improve cache management first.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793480' id='441167'>
<a class='timestamp' href='#441167'><time timestamp='2015-11-29T10:38:00Z'>10:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, well for a miner you can just run with a huge sigcache
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793540' id='441168'>
<a class='timestamp' href='#441168'><time timestamp='2015-11-29T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i&#x27;ve got mine set to 4GB...
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793540' id='441169'>
<a class='timestamp' href='#441169'><time timestamp='2015-11-29T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Sipa found it was polluting it even with a stupidly big one. (but not that stupidly big)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793540' id='441170'>
<a class='timestamp' href='#441170'><time timestamp='2015-11-29T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
yeah the definition of stupidly big varies here :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793540' id='441171'>
<a class='timestamp' href='#441171'><time timestamp='2015-11-29T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: we&#x27;d like to uh.. not centeralize mining &quot;you can mine but if you want a low orphan rate you&#x27;ll have to dedicate 16GB ram to it.. not great. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793600' id='441172'>
<a class='timestamp' href='#441172'><time timestamp='2015-11-29T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hey let&#x27;s use a rolling bloom filter for tue sigcache!!!
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793600' id='441173'>
<a class='timestamp' href='#441173'><time timestamp='2015-11-29T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<b>*ducks*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793600' id='441174'>
<a class='timestamp' href='#441174'><time timestamp='2015-11-29T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but I think ultimately thats the best thing to do, we could try to estimate &quot;reject but still likely to get mined soon based on recent history&quot; but I&#x27;d rather spend the complexity on making the cache smarter.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793660' id='441175'>
<a class='timestamp' href='#441175'><time timestamp='2015-11-29T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
the cache doesn&#x27;t evict when a block is found does it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793660' id='441176'>
<a class='timestamp' href='#441176'><time timestamp='2015-11-29T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
that would be an easy win
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793660' id='441177'>
<a class='timestamp' href='#441177'><time timestamp='2015-11-29T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it does
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793660' id='441178'>
<a class='timestamp' href='#441178'><time timestamp='2015-11-29T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
e.g. attach feerate and &quot;tip change counter&quot; to entries in the cache, and evict using them.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793660' id='441179'>
<a class='timestamp' href='#441179'><time timestamp='2015-11-29T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
oh
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793660' id='441180'>
<a class='timestamp' href='#441180'><time timestamp='2015-11-29T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
nvm
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793660' id='441181'>
<a class='timestamp' href='#441181'><time timestamp='2015-11-29T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
:|
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793660' id='441182'>
<a class='timestamp' href='#441182'><time timestamp='2015-11-29T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: well, it evicts after use in a block
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793660' id='441183'>
<a class='timestamp' href='#441183'><time timestamp='2015-11-29T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
e.g. so on full it evits the lowest feerate that went into the cache the most blocks ago.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793660' id='441184'>
<a class='timestamp' href='#441184'><time timestamp='2015-11-29T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but not after use in mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793720' id='441185'>
<a class='timestamp' href='#441185'><time timestamp='2015-11-29T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
so there is also the issue that processing transactions into the mempool acquires cs_main
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793720' id='441186'>
<a class='timestamp' href='#441186'><time timestamp='2015-11-29T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
which is bad for latency of gbt calls
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793720' id='441187'>
<a class='timestamp' href='#441187'><time timestamp='2015-11-29T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(by lowest I don&#x27;t mean a sort, I mean a N random draw...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793720' id='441188'>
<a class='timestamp' href='#441188'><time timestamp='2015-11-29T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
soooo rpc &quot;addsigcachentries&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793720' id='441189'>
<a class='timestamp' href='#441189'><time timestamp='2015-11-29T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-3'> * phantomcircuit</span>&gt;
runs away
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793840' id='441190'>
<a class='timestamp' href='#441190'><time timestamp='2015-11-29T10:44:00Z'>10:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
die
<br>
</div>

<div class='talk op-msg' data-timestamp='1448793900' id='441191'>
<a class='timestamp' href='#441191'><time timestamp='2015-11-29T10:45:00Z'>10:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rpc &quot;pollutecache&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794020' id='441192'>
<a class='timestamp' href='#441192'><time timestamp='2015-11-29T10:47:00Z'>10:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
should just hash random items in memory and add them, some might be signatures.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794020' id='441193'>
<a class='timestamp' href='#441193'><time timestamp='2015-11-29T10:47:00Z'>10:47</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
:)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794020' id='441194'>
<a class='timestamp' href='#441194'><time timestamp='2015-11-29T10:47:00Z'>10:47</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
&lt;phantomcircuit&gt; i&#x27;ve got a few ideas of how to deal with this but they are admittedly mostly insane
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794020' id='441195'>
<a class='timestamp' href='#441195'><time timestamp='2015-11-29T10:47:00Z'>10:47</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i wasn&#x27;t lying
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794080' id='441196'>
<a class='timestamp' href='#441196'><time timestamp='2015-11-29T10:48:00Z'>10:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: the obvious thing to do is to just have a EWMA minimum feerate for blocks, and any transaction over that, you verify even if its rejected.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794080' id='441199'>
<a class='timestamp' href='#441199'><time timestamp='2015-11-29T10:48:00Z'>10:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: when you say insane, i should probably start worrying
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794140' id='441200'>
<a class='timestamp' href='#441200'><time timestamp='2015-11-29T10:49:00Z'>10:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(or over 0.95 * that)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794140' id='441201'>
<a class='timestamp' href='#441201'><time timestamp='2015-11-29T10:49:00Z'>10:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: dude, not like he&#x27;s suggesting turning the G/2 nonce into a cryptosystem.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794140' id='441202'>
<a class='timestamp' href='#441202'><time timestamp='2015-11-29T10:49:00Z'>10:49</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
would having two isolated sigcache (rejects, accepts) do roughly the same job? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794200' id='441203'>
<a class='timestamp' href='#441203'><time timestamp='2015-11-29T10:50:00Z'>10:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
tulip: probably no, because the rejects would get polluted and then not be useful (why have it)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794200' id='441204'>
<a class='timestamp' href='#441204'><time timestamp='2015-11-29T10:50:00Z'>10:50</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
people can perform an eviction attack against the rejects cache of course, but that doesn&#x27;t completely destroy your validation time. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794200' id='441205'>
<a class='timestamp' href='#441205'><time timestamp='2015-11-29T10:50:00Z'>10:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we don&#x27;t have a negative cache now
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794260' id='441206'>
<a class='timestamp' href='#441206'><time timestamp='2015-11-29T10:51:00Z'>10:51</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
gmaxwell: suppose.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794380' id='441207'>
<a class='timestamp' href='#441207'><time timestamp='2015-11-29T10:53:00Z'>10:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: European Momputer Manufacturers Organization minimum feerate (sorry, google was slow in telling me what ECMA stood for)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794440' id='441208'>
<a class='timestamp' href='#441208'><time timestamp='2015-11-29T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Womputer, of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794440' id='441209'>
<a class='timestamp' href='#441209'><time timestamp='2015-11-29T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
exponentially weighed moving average.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794740' id='441210'>
<a class='timestamp' href='#441210'><time timestamp='2015-11-29T10:59:00Z'>10:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794800' id='441211'>
<a class='timestamp' href='#441211'><time timestamp='2015-11-29T11:00:00Z'>11:00</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, EWMA ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794860' id='441212'>
<a class='timestamp' href='#441212'><time timestamp='2015-11-29T11:01:00Z'>11:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: European Momputer Manufacturers Organization.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794980' id='441213'>
<a class='timestamp' href='#441213'><time timestamp='2015-11-29T11:03:00Z'>11:03</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
oh
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794980' id='441214'>
<a class='timestamp' href='#441214'><time timestamp='2015-11-29T11:03:00Z'>11:03</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
lol derp
<br>
</div>

<div class='talk op-msg' data-timestamp='1448794980' id='441215'>
<a class='timestamp' href='#441215'><time timestamp='2015-11-29T11:03:00Z'>11:03</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i should have continued reading before asking :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448795400' id='441216'>
<a class='timestamp' href='#441216'><time timestamp='2015-11-29T11:10:00Z'>11:10</time></a>
&lt;<span class='nick nick-9'> GitHub47</span>&gt;
[bitcoin] sipa opened pull request #7129: Direct headers announcement (rebase of #6494) (master...direct-headers-announcement) <a href="https://github.com/bitcoin/bitcoin/pull/7129" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7129</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448795640' id='441217'>
<a class='timestamp' href='#441217'><time timestamp='2015-11-29T11:14:00Z'>11:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
&quot;that isn&#x27;t merged yet&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1448795700' id='441218'>
<a class='timestamp' href='#441218'><time timestamp='2015-11-29T11:15:00Z'>11:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
&quot;?&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1448795760' id='441219'>
<a class='timestamp' href='#441219'><time timestamp='2015-11-29T11:16:00Z'>11:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i&#x27;ll merge upon happy travis (though maybe someone should proofread my docs)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448795880' id='441220'>
<a class='timestamp' href='#441220'><time timestamp='2015-11-29T11:18:00Z'>11:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
hm. so I wonder if the sigcache rejects stuff will have less pollution problems once limited mempool is more common?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448795940' id='441221'>
<a class='timestamp' href='#441221'><time timestamp='2015-11-29T11:19:00Z'>11:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
perhaps yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1448795940' id='441222'>
<a class='timestamp' href='#441222'><time timestamp='2015-11-29T11:19:00Z'>11:19</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
sipa: the docs read fine. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796060' id='441223'>
<a class='timestamp' href='#441223'><time timestamp='2015-11-29T11:21:00Z'>11:21</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, probably
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796060' id='441225'>
<a class='timestamp' href='#441225'><time timestamp='2015-11-29T11:21:00Z'>11:21</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i actually like tulip&#x27;s suggestion of having two sigcaches
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796060' id='441226'>
<a class='timestamp' href='#441226'><time timestamp='2015-11-29T11:21:00Z'>11:21</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
it handles the &quot;i have lots of memory and dont care&quot; case pretty well
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796420' id='441227'>
<a class='timestamp' href='#441227'><time timestamp='2015-11-29T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
why not have a seperate sigcache for each band of feerate? :P and if the highest feerate cache is full it evits to a lower feerate cache.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796480' id='441228'>
<a class='timestamp' href='#441228'><time timestamp='2015-11-29T11:28:00Z'>11:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh you could also put a neural network in it, and it could do unsupervised classification to decide which transactions will get confirmed... and ... :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796540' id='441229'>
<a class='timestamp' href='#441229'><time timestamp='2015-11-29T11:29:00Z'>11:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and then skynet
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796540' id='441230'>
<a class='timestamp' href='#441230'><time timestamp='2015-11-29T11:29:00Z'>11:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and a genisys block
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796660' id='441231'>
<a class='timestamp' href='#441231'><time timestamp='2015-11-29T11:31:00Z'>11:31</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, hr
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796660' id='441232'>
<a class='timestamp' href='#441232'><time timestamp='2015-11-29T11:31:00Z'>11:31</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
har har
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796720' id='441233'>
<a class='timestamp' href='#441233'><time timestamp='2015-11-29T11:32:00Z'>11:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
but in all seriousness it&#x27;s potentially a large win for miners and just annoying for everybody else
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796720' id='441234'>
<a class='timestamp' href='#441234'><time timestamp='2015-11-29T11:32:00Z'>11:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh, and if your cache gets too big you can sign chunks of it and ship it off to peers, and they can send it back if you need it later...
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796720' id='441235'>
<a class='timestamp' href='#441235'><time timestamp='2015-11-29T11:32:00Z'>11:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: not the kind of wins we should be hunting, because it presumes a more centeralized world of mining where running a mining node takes a lot of resources.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796780' id='441236'>
<a class='timestamp' href='#441236'><time timestamp='2015-11-29T11:33:00Z'>11:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Better to spend effort on optimizations that don&#x27;t need that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796900' id='441237'>
<a class='timestamp' href='#441237'><time timestamp='2015-11-29T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, which reminds me, what kind of work would you want to see before revising the advise on mining with a pruned node?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796900' id='441238'>
<a class='timestamp' href='#441238'><time timestamp='2015-11-29T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think it&#x27;s fine already.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448796900' id='441239'>
<a class='timestamp' href='#441239'><time timestamp='2015-11-29T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
&quot;You mean you don&#x27;t mine exclusively on pruned nodes?&quot;  ... really the worse problem is that you&#x27;re hosed in index corruption... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797020' id='441240'>
<a class='timestamp' href='#441240'><time timestamp='2015-11-29T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, miners are hosed if their index is corrupt even without pruning
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797020' id='441241'>
<a class='timestamp' href='#441241'><time timestamp='2015-11-29T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
hmm i seem to remember asking someone and getting a &quot;wat dont do dat&quot; response recently
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797020' id='441242'>
<a class='timestamp' href='#441242'><time timestamp='2015-11-29T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it just means a three hour outage vs ... more.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797020' id='441243'>
<a class='timestamp' href='#441243'><time timestamp='2015-11-29T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t think you got that from me.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797080' id='441244'>
<a class='timestamp' href='#441244'><time timestamp='2015-11-29T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you can always make a backup of the block chain data
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797080' id='441245'>
<a class='timestamp' href='#441245'><time timestamp='2015-11-29T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
like... half the reason I care about pruning is to try to rescue p2pool.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797080' id='441246'>
<a class='timestamp' href='#441246'><time timestamp='2015-11-29T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, yes but it might mean running 5 nodes instead of 1
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797080' id='441247'>
<a class='timestamp' href='#441247'><time timestamp='2015-11-29T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and use that to recover a mining node
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797140' id='441248'>
<a class='timestamp' href='#441248'><time timestamp='2015-11-29T11:39:00Z'>11:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the main risk from pruning + mining is that you can&#x27;t reorg past some depth, which means consensus fault; but we won&#x27;t let you prune shallower than 288 blocks back to make that not much of a pratical concern.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797140' id='441249'>
<a class='timestamp' href='#441249'><time timestamp='2015-11-29T11:39:00Z'>11:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(or at least if there is a 288 block reorg, manual intervention is.. least of the worries)
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797200' id='441250'>
<a class='timestamp' href='#441250'><time timestamp='2015-11-29T11:40:00Z'>11:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
though we should make sure that that it cleanly fails (And importantly stops mining) if it tries a reorg beyond pruning.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797320' id='441251'>
<a class='timestamp' href='#441251'><time timestamp='2015-11-29T11:42:00Z'>11:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: if you&#x27;re looking for mining related improvments; bringing back the old lukejr patch to forward unverified blocks would be an obvious candidate.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797440' id='441252'>
<a class='timestamp' href='#441252'><time timestamp='2015-11-29T11:44:00Z'>11:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
E.g. a new proto messages activated like sendheaders where you can say &quot;here is a block, I haven&#x27;t verified it&quot;; you&#x27;re allowed to relay it to others (as non-validated block) without validatiting long as the hash and headers checkout, and so long as it extends the current tip.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797440' id='441253'>
<a class='timestamp' href='#441253'><time timestamp='2015-11-29T11:44:00Z'>11:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
when luke did it before, it didn&#x27;t speed anything up, but that was presumably because of all the dumb sleeps in networking.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797500' id='441254'>
<a class='timestamp' href='#441254'><time timestamp='2015-11-29T11:45:00Z'>11:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think this would reduce your mining complex by one node, since those relays wouldn&#x27;t need to lock the chainstate, and so they wouldn&#x27;t compete with create new block.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797560' id='441255'>
<a class='timestamp' href='#441255'><time timestamp='2015-11-29T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
checking whether it extends the current tip would need a lock
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797560' id='441256'>
<a class='timestamp' href='#441256'><time timestamp='2015-11-29T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, what happens generally if you try a reorg past the pruning depth?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797560' id='441257'>
<a class='timestamp' href='#441257'><time timestamp='2015-11-29T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
it should probably pull those blocks from peers
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797560' id='441258'>
<a class='timestamp' href='#441258'><time timestamp='2015-11-29T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: it can&#x27;t. :( :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797560' id='441259'>
<a class='timestamp' href='#441259'><time timestamp='2015-11-29T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
undo data is gone too.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797560' id='441260'>
<a class='timestamp' href='#441260'><time timestamp='2015-11-29T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
though i guess you could have a pindexTipCopy which has an R/W lock, and is updated by the normal sync, but can be read (and used for verification) by other things
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797560' id='441261'>
<a class='timestamp' href='#441261'><time timestamp='2015-11-29T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
someday we could make undo data normative and commit to it, perhaps and then you could pull it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797620' id='441262'>
<a class='timestamp' href='#441262'><time timestamp='2015-11-29T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i think the biggest bottleneck is the fact that message processing is single threaded
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797620' id='441263'>
<a class='timestamp' href='#441263'><time timestamp='2015-11-29T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
phantomcircuit: 288 blocks is the minimum, if you reorg that far all of your peers have pinged out as well, it gets super messy and everything is likely on fire anyway. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797620' id='441264'>
<a class='timestamp' href='#441264'><time timestamp='2015-11-29T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: doesn&#x27;t happen that all our messaging hashes the data...
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797620' id='441265'>
<a class='timestamp' href='#441265'><time timestamp='2015-11-29T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: parse error
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797680' id='441266'>
<a class='timestamp' href='#441266'><time timestamp='2015-11-29T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;m just saying that message handling is computationally expensive.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797680' id='441267'>
<a class='timestamp' href='#441267'><time timestamp='2015-11-29T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: so?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797680' id='441268'>
<a class='timestamp' href='#441268'><time timestamp='2015-11-29T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, iirc the undo data is much smaller than the blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797680' id='441269'>
<a class='timestamp' href='#441269'><time timestamp='2015-11-29T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: a factor of 9
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797680' id='441270'>
<a class='timestamp' href='#441270'><time timestamp='2015-11-29T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
ok so probably we should keep it going back 9x deeper than we do blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797680' id='441271'>
<a class='timestamp' href='#441271'><time timestamp='2015-11-29T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: yes, and we could prune it to different depths, but keeping it all removes a lot of the pruning gains.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797740' id='441272'>
<a class='timestamp' href='#441272'><time timestamp='2015-11-29T11:49:00Z'>11:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: the fact that we&#x27;re processing a new incoming block for half a second is no reason why we couldn&#x27;t respond to a ping from another peer
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797800' id='441273'>
<a class='timestamp' href='#441273'><time timestamp='2015-11-29T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
On earlier; though I guess if we introduced a new p2p message for block relay, it should do RNC like compression.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797800' id='441274'>
<a class='timestamp' href='#441274'><time timestamp='2015-11-29T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, for the average pool i suspect relaying before validating anything but the header would be a win even without the new p2p message to prevent getting banned
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797800' id='441275'>
<a class='timestamp' href='#441275'><time timestamp='2015-11-29T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
... and bring MRU sets back to track what transactions we&#x27;ve sent a peer? :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797860' id='441276'>
<a class='timestamp' href='#441276'><time timestamp='2015-11-29T11:51:00Z'>11:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: it&#x27;s really important to not hand unvalidated blocks to spv clients.
<br>
</div>

<div class='talk op-msg' data-timestamp='1448797980' id='441277'>
<a class='timestamp' href='#441277'><time timestamp='2015-11-29T11:53:00Z'>11:53</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
how do you prevent unvalidated blocks from becoming a DoS vector? 25BTC is expensive, but if I can make a block which takes you 2 minutes to validate it when you see it that could be a problem. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798040' id='441278'>
<a class='timestamp' href='#441278'><time timestamp='2015-11-29T11:54:00Z'>11:54</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
(two minutes of grinding SHA256, then you find you have to reject it) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798040' id='441279'>
<a class='timestamp' href='#441279'><time timestamp='2015-11-29T11:54:00Z'>11:54</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, iirc the message hashing is done in the networking thread so it&#x27;s at least partially threaded
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798100' id='441280'>
<a class='timestamp' href='#441280'><time timestamp='2015-11-29T11:55:00Z'>11:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: no
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798100' id='441281'>
<a class='timestamp' href='#441281'><time timestamp='2015-11-29T11:55:00Z'>11:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
only the checksum
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798100' id='441282'>
<a class='timestamp' href='#441282'><time timestamp='2015-11-29T11:55:00Z'>11:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798100' id='441283'>
<a class='timestamp' href='#441283'><time timestamp='2015-11-29T11:55:00Z'>11:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798100' id='441284'>
<a class='timestamp' href='#441284'><time timestamp='2015-11-29T11:55:00Z'>11:55</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i thought that&#x27;s what he was talking about
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798160' id='441285'>
<a class='timestamp' href='#441285'><time timestamp='2015-11-29T11:56:00Z'>11:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not the txid&#x27;s, for example
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798160' id='441286'>
<a class='timestamp' href='#441286'><time timestamp='2015-11-29T11:56:00Z'>11:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or sighashes which are even more work
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798160' id='441287'>
<a class='timestamp' href='#441287'><time timestamp='2015-11-29T11:56:00Z'>11:56</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
me? I was talking about sighash hashing. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798220' id='441288'>
<a class='timestamp' href='#441288'><time timestamp='2015-11-29T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
tulip, no i was talking about what gmaxwell said
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798220' id='441289'>
<a class='timestamp' href='#441289'><time timestamp='2015-11-29T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-3'> tulip</span>&gt;
right. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798280' id='441290'>
<a class='timestamp' href='#441290'><time timestamp='2015-11-29T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
message handling is of course expensive; it&#x27;s where block validation (and a part of signature validation even) happens
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798280' id='441291'>
<a class='timestamp' href='#441291'><time timestamp='2015-11-29T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
doesn&#x27;t mean it needs to be done single threadedly
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798760' id='441292'>
<a class='timestamp' href='#441292'><time timestamp='2015-11-29T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-11'> GitHub182</span>&gt;
[bitcoin] sipa pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/c894fbbb1dc0...5d5ef3a4cf8e" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/c894fbbb1dc0...5d5ef3a4cf8e</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798760' id='441293'>
<a class='timestamp' href='#441293'><time timestamp='2015-11-29T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-11'> GitHub182</span>&gt;
bitcoin/master 50262d8 Suhas Daftuar: Allow block announcements with headers...
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798760' id='441294'>
<a class='timestamp' href='#441294'><time timestamp='2015-11-29T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-11'> GitHub182</span>&gt;
bitcoin/master 49fb8e8 Pieter Wuille: Documentation updates for BIP 130
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798760' id='441295'>
<a class='timestamp' href='#441295'><time timestamp='2015-11-29T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-11'> GitHub182</span>&gt;
bitcoin/master 5d5ef3a Pieter Wuille: Merge pull request #7129...
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798760' id='441296'>
<a class='timestamp' href='#441296'><time timestamp='2015-11-29T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-15'> GitHub38</span>&gt;
[bitcoin] sipa closed pull request #7129: Direct headers announcement (rebase of #6494) (master...direct-headers-announcement) <a href="https://github.com/bitcoin/bitcoin/pull/7129" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7129</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448798820' id='441297'>
<a class='timestamp' href='#441297'><time timestamp='2015-11-29T12:07:00Z'>12:07</time></a>
&lt;<span class='nick nick-2'> GitHub105</span>&gt;
[bitcoin] sipa closed pull request #6494: Allow block announcements with headers (master...direct-headers-announcement) <a href="https://github.com/bitcoin/bitcoin/pull/6494" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6494</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1448818800' id='441298'>
<a class='timestamp' href='#441298'><time timestamp='2015-11-29T17:40:00Z'>17:40</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
morcos, when a block is invalidated are we updating CTxMempoolEntry::hadNoDependencies properly?
<br>
</div>

<div class='talk op-msg' data-timestamp='1448837160' id='441299'>
<a class='timestamp' href='#441299'><time timestamp='2015-11-29T22:46:00Z'>22:46</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
morcos, optimal is probably very hard
<br>
</div>

<div class='talk op-msg' data-timestamp='1448837220' id='441300'>
<a class='timestamp' href='#441300'><time timestamp='2015-11-29T22:47:00Z'>22:47</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
morcos, knapsack problem with at least two optimization variables :|
<br>
</div>

<div class='talk op-msg' data-timestamp='1448837220' id='441301'>
<a class='timestamp' href='#441301'><time timestamp='2015-11-29T22:47:00Z'>22:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
s/optimal/an approximation of optimal with reasonable conputational limits/
<br>
</div>

</div>
</section>

</body>
</html>
