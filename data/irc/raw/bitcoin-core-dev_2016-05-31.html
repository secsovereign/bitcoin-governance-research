<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2016-05-31
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2016-05-31' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:26 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-04-30">&lt;</a><span class='header'>     May 2016     </span><a href="/bitcoin-core-dev/2016-06-30">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2016-05-01">1</a>  <a class="" href="/bitcoin-core-dev/2016-05-02">2</a>  <a class="" href="/bitcoin-core-dev/2016-05-03">3</a>  <a class="" href="/bitcoin-core-dev/2016-05-04">4</a>  <a class="" href="/bitcoin-core-dev/2016-05-05">5</a>  <a class="" href="/bitcoin-core-dev/2016-05-06">6</a>  <a class="" href="/bitcoin-core-dev/2016-05-07">7</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-05-08">8</a>  <a class="" href="/bitcoin-core-dev/2016-05-09">9</a> <a class="" href="/bitcoin-core-dev/2016-05-10">10</a> <a class="" href="/bitcoin-core-dev/2016-05-11">11</a> <a class="" href="/bitcoin-core-dev/2016-05-12">12</a> <a class="" href="/bitcoin-core-dev/2016-05-13">13</a> <a class="" href="/bitcoin-core-dev/2016-05-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-05-15">15</a> <a class="" href="/bitcoin-core-dev/2016-05-16">16</a> <a class="" href="/bitcoin-core-dev/2016-05-17">17</a> <a class="" href="/bitcoin-core-dev/2016-05-18">18</a> <a class="" href="/bitcoin-core-dev/2016-05-19">19</a> <a class="" href="/bitcoin-core-dev/2016-05-20">20</a> <a class="" href="/bitcoin-core-dev/2016-05-21">21</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-05-22">22</a> <a class="" href="/bitcoin-core-dev/2016-05-23">23</a> <a class="" href="/bitcoin-core-dev/2016-05-24">24</a> <a class="" href="/bitcoin-core-dev/2016-05-25">25</a> <a class="" href="/bitcoin-core-dev/2016-05-26">26</a> <a class="" href="/bitcoin-core-dev/2016-05-27">27</a> <a class="" href="/bitcoin-core-dev/2016-05-28">28</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-05-29">29</a> <a class="" href="/bitcoin-core-dev/2016-05-30">30</a> <a class="current" href="/bitcoin-core-dev/2016-05-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1464661140' id='470624'>
<a class='timestamp' href='#470624'><time timestamp='2016-05-31T02:19:00Z'>02:19</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
i do not feel entirely comfortable with his &quot;throw tests away&quot; comment
<br>
</div>

<div class='talk op-msg' data-timestamp='1464666960' id='470625'>
<a class='timestamp' href='#470625'><time timestamp='2016-05-31T03:56:00Z'>03:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
kanzure: I thought the same, but on reflection, I dunno, any generic advice is ... generic.  I&#x27;ve certantly seen tests that should be thrown away. Ones that basically could never catch an error but still manage to produce false positives. Those should probably be thrown away. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1464677820' id='470626'>
<a class='timestamp' href='#470626'><time timestamp='2016-05-31T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
cfields_, wumpus: re: <a href="https://github.com/bitcoin/bitcoin/issues/8120" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8120</a>, &quot;make deploy&quot; is unused during gitian? right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464683220' id='470627'>
<a class='timestamp' href='#470627'><time timestamp='2016-05-31T08:27:00Z'>08:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i think the advice to remove never-failing tests specifically is not wanted for consensus logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1464683280' id='470628'>
<a class='timestamp' href='#470628'><time timestamp='2016-05-31T08:28:00Z'>08:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: though i guess that&#x27;s a case of code whose behaviour is &quot;fully specified&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1464690180' id='470629'>
<a class='timestamp' href='#470629'><time timestamp='2016-05-31T10:23:00Z'>10:23</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
&quot;delete tests&quot; is advice that probably works on teams where people are encouraged to write lots of useless tests. i could imagine the weeds growing pretty fast :).
<br>
</div>

<div class='talk op-msg' data-timestamp='1464691140' id='470630'>
<a class='timestamp' href='#470630'><time timestamp='2016-05-31T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well we do suffer from tests that just test exact implementation equivalence rather than correctness
<br>
</div>

<div class='talk op-msg' data-timestamp='1464691140' id='470631'>
<a class='timestamp' href='#470631'><time timestamp='2016-05-31T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
like any change to the coin selection code will likely break the uniy tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1464691140' id='470632'>
<a class='timestamp' href='#470632'><time timestamp='2016-05-31T10:39:00Z'>10:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which discourages improving them
<br>
</div>

<div class='talk op-msg' data-timestamp='1464691200' id='470633'>
<a class='timestamp' href='#470633'><time timestamp='2016-05-31T10:40:00Z'>10:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rather than helping making sure that changes don&#x27;t break them
<br>
</div>

<div class='talk op-msg' data-timestamp='1464691680' id='470634'>
<a class='timestamp' href='#470634'><time timestamp='2016-05-31T10:48:00Z'>10:48</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
yes i am not sure how to correctly &quot;test&quot; stochastic approximation. &quot;is it really approximating?&quot; &quot;is it really stochastic?&quot; hehe
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698220' id='470635'>
<a class='timestamp' href='#470635'><time timestamp='2016-05-31T12:37:00Z'>12:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I wouldn&#x27;t agree with deleting tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698280' id='470636'>
<a class='timestamp' href='#470636'><time timestamp='2016-05-31T12:38:00Z'>12:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;d still like to add more unit tests and more coverage instead of going on some wacky tangent
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698460' id='470637'>
<a class='timestamp' href='#470637'><time timestamp='2016-05-31T12:41:00Z'>12:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I don&#x27;t think we have the mentioned problem at all, that we&#x27;re trusting unit tests too much
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698460' id='470638'>
<a class='timestamp' href='#470638'><time timestamp='2016-05-31T12:41:00Z'>12:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
code review is most important
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698580' id='470639'>
<a class='timestamp' href='#470639'><time timestamp='2016-05-31T12:43:00Z'>12:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but removing tests sound like removing safety features from a car because it makes people more careful, yea, nice in theory, in practice it is harmful to have more crippled people even if they &#x27;learned a lesson&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698640' id='470640'>
<a class='timestamp' href='#470640'><time timestamp='2016-05-31T12:44:00Z'>12:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i agree, but that post does contain some interesting view point
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698640' id='470641'>
<a class='timestamp' href='#470641'><time timestamp='2016-05-31T12:44:00Z'>12:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
similarly, having trivial things fail more often in production is not even if it makes developers (who?) learn a lesson
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698640' id='470642'>
<a class='timestamp' href='#470642'><time timestamp='2016-05-31T12:44:00Z'>12:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I really don&#x27;t like it
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698640' id='470643'>
<a class='timestamp' href='#470643'><time timestamp='2016-05-31T12:44:00Z'>12:44</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
I think it&#x27;s ridiculous. Unit tests are invaluable, they catch regressions, make refactoring easier to do etc.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698640' id='470644'>
<a class='timestamp' href='#470644'><time timestamp='2016-05-31T12:44:00Z'>12:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes it&#x27;s pretty ridiculous imo
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698700' id='470645'>
<a class='timestamp' href='#470645'><time timestamp='2016-05-31T12:45:00Z'>12:45</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
if this is where &quot;professional&quot; software development is going, god save us.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698760' id='470646'>
<a class='timestamp' href='#470646'><time timestamp='2016-05-31T12:46:00Z'>12:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well if people are refactoring their software so that higher line coverage is obtained, with tests that will never fail... there is a problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698760' id='470647'>
<a class='timestamp' href='#470647'><time timestamp='2016-05-31T12:46:00Z'>12:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I doubt it is. And yes some companies overdo testing, having test suites that run for 20 hours every time a change is made. For those I guess it makes sense to be more selective.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698760' id='470648'>
<a class='timestamp' href='#470648'><time timestamp='2016-05-31T12:46:00Z'>12:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t think we have that problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698760' id='470649'>
<a class='timestamp' href='#470649'><time timestamp='2016-05-31T12:46:00Z'>12:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rather the opposite
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698820' id='470650'>
<a class='timestamp' href='#470650'><time timestamp='2016-05-31T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
however, i do think we have a number of tests that are focussed on testing exact behaviour, of which nobody still knows why that test was added
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698820' id='470651'>
<a class='timestamp' href='#470651'><time timestamp='2016-05-31T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, there are plenty of specific tests that could be improved
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698820' id='470652'>
<a class='timestamp' href='#470652'><time timestamp='2016-05-31T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no argument there
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698820' id='470653'>
<a class='timestamp' href='#470653'><time timestamp='2016-05-31T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
and properly commented.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698820' id='470654'>
<a class='timestamp' href='#470654'><time timestamp='2016-05-31T12:47:00Z'>12:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so they break when code is changed, with nobody knowing whether the broken test was testing some required property of the system, or just testing the exact behaviour the old code had
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698880' id='470655'>
<a class='timestamp' href='#470655'><time timestamp='2016-05-31T12:48:00Z'>12:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
testing is absolutely a skill in itself and it doesn&#x27;t overlap 100% with developing, but saying things like &#x27;business people should make tests not developers&#x27;... yeah right
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698880' id='470656'>
<a class='timestamp' href='#470656'><time timestamp='2016-05-31T12:48:00Z'>12:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well i guess we&#x27;re kinda doing that for wallet rpc tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698940' id='470657'>
<a class='timestamp' href='#470657'><time timestamp='2016-05-31T12:49:00Z'>12:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not that they&#x27;re written by business people, but they do test application behaviour, not individual functioms
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698940' id='470658'>
<a class='timestamp' href='#470658'><time timestamp='2016-05-31T12:49:00Z'>12:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
both levels make sense to test
<br>
</div>

<div class='talk op-msg' data-timestamp='1464698940' id='470659'>
<a class='timestamp' href='#470659'><time timestamp='2016-05-31T12:49:00Z'>12:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699000' id='470660'>
<a class='timestamp' href='#470660'><time timestamp='2016-05-31T12:50:00Z'>12:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but yes for the wallet we primarily test application-level behavior also because most functions aren&#x27;t really testable units
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699000' id='470661'>
<a class='timestamp' href='#470661'><time timestamp='2016-05-31T12:50:00Z'>12:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t think anyone is actually suggesting removing tests (?), but i think a mindset of testing for correctness rather than exact replication makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699000' id='470662'>
<a class='timestamp' href='#470662'><time timestamp='2016-05-31T12:50:00Z'>12:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
lots of behavior that depends on the state of the wallet, which depends on an entire history of actions, there&#x27;s not really much unit testing that can be done in that case
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699000' id='470663'>
<a class='timestamp' href='#470663'><time timestamp='2016-05-31T12:50:00Z'>12:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or at least separating the two
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699240' id='470664'>
<a class='timestamp' href='#470664'><time timestamp='2016-05-31T12:54:00Z'>12:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699480' id='470665'>
<a class='timestamp' href='#470665'><time timestamp='2016-05-31T12:58:00Z'>12:58</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
wumpus, the question is ultimately &quot;what is a unit?&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699480' id='470666'>
<a class='timestamp' href='#470666'><time timestamp='2016-05-31T12:58:00Z'>12:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
phantomcircuit: it is, tho let&#x27;s not get philosophical :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699540' id='470667'>
<a class='timestamp' href='#470667'><time timestamp='2016-05-31T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
phantomcircuit: i think we should use Planck units
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699600' id='470668'>
<a class='timestamp' href='#470668'><time timestamp='2016-05-31T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
+1
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699600' id='470669'>
<a class='timestamp' href='#470669'><time timestamp='2016-05-31T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
sipa, :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699600' id='470670'>
<a class='timestamp' href='#470670'><time timestamp='2016-05-31T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
it&#x27;s in the name
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699600' id='470671'>
<a class='timestamp' href='#470671'><time timestamp='2016-05-31T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
unit tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699660' id='470672'>
<a class='timestamp' href='#470672'><time timestamp='2016-05-31T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
though not all Planck units describe the minimum physical quantities, e.g. plack mass is pretty large (in the micrograms)
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699720' id='470673'>
<a class='timestamp' href='#470673'><time timestamp='2016-05-31T13:02:00Z'>13:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I guess that describes some of our unit tests that are actually RPC tests in disguise...
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699780' id='470674'>
<a class='timestamp' href='#470674'><time timestamp='2016-05-31T13:03:00Z'>13:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hah
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699900' id='470675'>
<a class='timestamp' href='#470675'><time timestamp='2016-05-31T13:05:00Z'>13:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
planck pressure: 4.63 * 10^113 Pa
<br>
</div>

<div class='talk op-msg' data-timestamp='1464699960' id='470676'>
<a class='timestamp' href='#470676'><time timestamp='2016-05-31T13:06:00Z'>13:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
wow
<br>
</div>

<div class='talk op-msg' data-timestamp='1464700200' id='470677'>
<a class='timestamp' href='#470677'><time timestamp='2016-05-31T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-8'> GitHub165</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/950be19727a5...0026e0ef3472" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/950be19727a5...0026e0ef3472</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464700200' id='470678'>
<a class='timestamp' href='#470678'><time timestamp='2016-05-31T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-8'> GitHub165</span>&gt;
bitcoin/master 63ff57d Gregory Maxwell: Avoid integer division in the benchmark inner-most loop....
<br>
</div>

<div class='talk op-msg' data-timestamp='1464700200' id='470679'>
<a class='timestamp' href='#470679'><time timestamp='2016-05-31T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-8'> GitHub165</span>&gt;
bitcoin/master 0026e0e Wladimir J. van der Laan: Merge #8115: Avoid integer division in the benchmark inner-most loop....
<br>
</div>

<div class='talk op-msg' data-timestamp='1464700200' id='470680'>
<a class='timestamp' href='#470680'><time timestamp='2016-05-31T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-9'> GitHub39</span>&gt;
[bitcoin] laanwj closed pull request #8115: Avoid integer division in the benchmark inner-most loop. (master...better_bench) <a href="https://github.com/bitcoin/bitcoin/pull/8115" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8115</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464700620' id='470681'>
<a class='timestamp' href='#470681'><time timestamp='2016-05-31T13:17:00Z'>13:17</time></a>
&lt;<span class='nick nick-5'> GitHub24</span>&gt;
[bitcoin] laanwj closed pull request #8097: RFC: rpc: Remove dns argument for getaddednodeinfo (master...remove-getaddednodeinfo-dns) <a href="https://github.com/bitcoin/bitcoin/pull/8097" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8097</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464700740' id='470682'>
<a class='timestamp' href='#470682'><time timestamp='2016-05-31T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-13'> GitHub183</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/0026e0ef3472...e7e25ea5128b" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/0026e0ef3472...e7e25ea5128b</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464700740' id='470683'>
<a class='timestamp' href='#470683'><time timestamp='2016-05-31T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-13'> GitHub183</span>&gt;
bitcoin/master 1a8c4d5 fanquake: [Doc] Add benchmarking notes
<br>
</div>

<div class='talk op-msg' data-timestamp='1464700740' id='470684'>
<a class='timestamp' href='#470684'><time timestamp='2016-05-31T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-13'> GitHub183</span>&gt;
bitcoin/master e7e25ea Wladimir J. van der Laan: Merge #8110: [Doc] Add benchmarking notes...
<br>
</div>

<div class='talk op-msg' data-timestamp='1464700740' id='470685'>
<a class='timestamp' href='#470685'><time timestamp='2016-05-31T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-4'> GitHub35</span>&gt;
[bitcoin] laanwj closed pull request #8112: Include signal.h for sig_atomic_t in WIN32 (master...winsigatomic) <a href="https://github.com/bitcoin/bitcoin/pull/8112" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8112</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464700740' id='470686'>
<a class='timestamp' href='#470686'><time timestamp='2016-05-31T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-6'> GitHub145</span>&gt;
[bitcoin] laanwj closed pull request #8110: [Doc] Add benchmarking notes (master...mention_bench) <a href="https://github.com/bitcoin/bitcoin/pull/8110" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8110</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701220' id='470687'>
<a class='timestamp' href='#470687'><time timestamp='2016-05-31T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-6'> GitHub198</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/e7e25ea5128b...a2df11524938" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/e7e25ea5128b...a2df11524938</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701220' id='470688'>
<a class='timestamp' href='#470688'><time timestamp='2016-05-31T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-6'> GitHub198</span>&gt;
bitcoin/master b682960 Chris Stewart: Adding P2SH(p2pkh) script test case...
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701220' id='470689'>
<a class='timestamp' href='#470689'><time timestamp='2016-05-31T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-6'> GitHub198</span>&gt;
bitcoin/master a2df115 Wladimir J. van der Laan: Merge #8090: Adding P2SH(p2pkh) script test case...
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701220' id='470690'>
<a class='timestamp' href='#470690'><time timestamp='2016-05-31T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-15'> GitHub128</span>&gt;
[bitcoin] laanwj closed pull request #8090: Adding P2SH(p2pkh) script test case (master...add_p2sh_p2pkh_script_test) <a href="https://github.com/bitcoin/bitcoin/pull/8090" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8090</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701340' id='470691'>
<a class='timestamp' href='#470691'><time timestamp='2016-05-31T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: I do think we use &#x27;make deploy&#x27; in gitian builds for MacOSX
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701340' id='470692'>
<a class='timestamp' href='#470692'><time timestamp='2016-05-31T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I know this because I broke it at some point and gitian broke too :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701340' id='470693'>
<a class='timestamp' href='#470693'><time timestamp='2016-05-31T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: hmm.. okay. Maybe it uses a different script when crosscompiling over linux.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701400' id='470694'>
<a class='timestamp' href='#470694'><time timestamp='2016-05-31T13:30:00Z'>13:30</time></a>
&lt;<span class='nick nick-12'> * jonasschnelli</span>&gt;
needs to look closer at this issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701460' id='470695'>
<a class='timestamp' href='#470695'><time timestamp='2016-05-31T13:31:00Z'>13:31</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so, as gitian OSX is not broken (AFAIK) it&#x27;s possibly something with fanquake&#x27;s local setup
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701520' id='470696'>
<a class='timestamp' href='#470696'><time timestamp='2016-05-31T13:32:00Z'>13:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
not sure where background.tiff is supposed to be though
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701520' id='470697'>
<a class='timestamp' href='#470697'><time timestamp='2016-05-31T13:32:00Z'>13:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
could this be an out-of-tree build issue?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701940' id='470698'>
<a class='timestamp' href='#470698'><time timestamp='2016-05-31T13:39:00Z'>13:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: Some weeks ago I have also encountered that a local &quot;make deploy&quot; on MAC does no longer work.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464701940' id='470699'>
<a class='timestamp' href='#470699'><time timestamp='2016-05-31T13:39:00Z'>13:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
IMO its because the make deploy calls the macdeployplus script locally (on Mac only).
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702000' id='470700'>
<a class='timestamp' href='#470700'><time timestamp='2016-05-31T13:40:00Z'>13:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
And I guess when you are cross compiling on a linux host, it does something different
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702000' id='470701'>
<a class='timestamp' href='#470701'><time timestamp='2016-05-31T13:40:00Z'>13:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
the background.tiff is a relict. It should have be gone after lukejs auto-renaming PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702060' id='470702'>
<a class='timestamp' href='#470702'><time timestamp='2016-05-31T13:41:00Z'>13:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe he needs a git clean?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702180' id='470703'>
<a class='timestamp' href='#470703'><time timestamp='2016-05-31T13:43:00Z'>13:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
trying that would make sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702300' id='470704'>
<a class='timestamp' href='#470704'><time timestamp='2016-05-31T13:45:00Z'>13:45</time></a>
&lt;<span class='nick nick-5'> GitHub98</span>&gt;
[bitcoin] laanwj closed pull request #7867: deleted restored sampler Configure.ac restored bits to all networks =(%master%masterCode[{rLi}]) (master...patch-1) <a href="https://github.com/bitcoin/bitcoin/pull/7867" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7867</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702420' id='470705'>
<a class='timestamp' href='#470705'><time timestamp='2016-05-31T13:47:00Z'>13:47</time></a>
&lt;<span class='nick nick-6'> GitHub172</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/a2df11524938...862fd24b40b4" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/a2df11524938...862fd24b40b4</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702420' id='470706'>
<a class='timestamp' href='#470706'><time timestamp='2016-05-31T13:47:00Z'>13:47</time></a>
&lt;<span class='nick nick-6'> GitHub172</span>&gt;
bitcoin/master 7e908c7 Gregory Maxwell: Do not use mempool for GETDATA for tx accepted after the last mempool req....
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702420' id='470707'>
<a class='timestamp' href='#470707'><time timestamp='2016-05-31T13:47:00Z'>13:47</time></a>
&lt;<span class='nick nick-6'> GitHub172</span>&gt;
bitcoin/master 862fd24 Wladimir J. van der Laan: Merge #8080: Do not use mempool for GETDATA for tx accepted after the last mempool req....
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702480' id='470708'>
<a class='timestamp' href='#470708'><time timestamp='2016-05-31T13:48:00Z'>13:48</time></a>
&lt;<span class='nick nick-9'> GitHub70</span>&gt;
[bitcoin] laanwj closed pull request #8080: Do not use mempool for GETDATA for tx accepted after the last mempool req. (master...nonmempool_getdata) <a href="https://github.com/bitcoin/bitcoin/pull/8080" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8080</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702660' id='470709'>
<a class='timestamp' href='#470709'><time timestamp='2016-05-31T13:51:00Z'>13:51</time></a>
&lt;<span class='nick nick-10'> GitHub158</span>&gt;
[bitcoin] laanwj closed pull request #8025: Increase DEFAULT_KEYPOOL_SIZE to 10000. (master...2016-05-08-wallet-defaults) <a href="https://github.com/bitcoin/bitcoin/pull/8025" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8025</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702780' id='470710'>
<a class='timestamp' href='#470710'><time timestamp='2016-05-31T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-9'> GitHub85</span>&gt;
[bitcoin] laanwj pushed 3 new commits to 0.12: <a href="https://github.com/bitcoin/bitcoin/compare/c3aedca2df89...e7ec24e336dc" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/c3aedca2df89...e7ec24e336dc</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702780' id='470711'>
<a class='timestamp' href='#470711'><time timestamp='2016-05-31T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-9'> GitHub85</span>&gt;
bitcoin/0.12 87129b2 Wladimir J. van der Laan: test: script_error checking in script_invalid tests...
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702780' id='470712'>
<a class='timestamp' href='#470712'><time timestamp='2016-05-31T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-9'> GitHub85</span>&gt;
bitcoin/0.12 e3a9ce9 Pieter Wuille: Refactor script tests...
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702780' id='470713'>
<a class='timestamp' href='#470713'><time timestamp='2016-05-31T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-9'> GitHub85</span>&gt;
bitcoin/0.12 e7ec24e Wladimir J. van der Laan: Merge #8001: [0.12.2] backport script_tests improvements...
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702780' id='470714'>
<a class='timestamp' href='#470714'><time timestamp='2016-05-31T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-6'> GitHub172</span>&gt;
[bitcoin] laanwj closed pull request #8001: [0.12.2] backport script_tests improvements (0.12...Mf1605-012testbp) <a href="https://github.com/bitcoin/bitcoin/pull/8001" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8001</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464702780' id='470715'>
<a class='timestamp' href='#470715'><time timestamp='2016-05-31T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-9'> GitHub160</span>&gt;
[bitcoin] laanwj closed pull request #7854: [0.12 backport] script_tests improvements from master and #7818 (0.12...refactorscriptests_12) <a href="https://github.com/bitcoin/bitcoin/pull/7854" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7854</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464706740' id='470716'>
<a class='timestamp' href='#470716'><time timestamp='2016-05-31T14:59:00Z'>14:59</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: what are we doing on <a href="https://github.com/bitcoin/bips/pull/365/files#diff-c0db26883ccab057aaa394db5e50e4b1R123" class="link" target="_blank">https://github.com/bitcoin/bips/pull/365/files#diff-c0db26883ccab057aaa394db5e50e4b1R123</a> ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464716820' id='470717'>
<a class='timestamp' href='#470717'><time timestamp='2016-05-31T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-6'> iniana</span>&gt;
Is there something I can do, configuration-wise, to speed up initial synchronization? Right now it is painfully slow, and I cannot find the reason why. Around 1 or 2 blocks per second is processed and download peaks are at 15KB/s
<br>
</div>

<div class='talk op-msg' data-timestamp='1464716940' id='470718'>
<a class='timestamp' href='#470718'><time timestamp='2016-05-31T17:49:00Z'>17:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
iniana: depends on what is bottlenecking you.  If disk IO is, then increasing dbcache will help a lot.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717000' id='470719'>
<a class='timestamp' href='#470719'><time timestamp='2016-05-31T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-6'> iniana</span>&gt;
gmaxwell: Will try that. Thanks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717000' id='470720'>
<a class='timestamp' href='#470720'><time timestamp='2016-05-31T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
to do that set -dbcache=&lt;megabytes&gt;  don&#x27;t set it more than the amount of free ram you have, minus about 600mb or so.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717000' id='470721'>
<a class='timestamp' href='#470721'><time timestamp='2016-05-31T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
iniana: What sort of hardware are you on?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717240' id='470722'>
<a class='timestamp' href='#470722'><time timestamp='2016-05-31T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-6'> iniana</span>&gt;
gmaxwell: Pretty standard hardware. Core i7 (2yo), 16GB RAM. Blockchain stored on a slow HDD though, so I hope the dbcache will work
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717300' id='470723'>
<a class='timestamp' href='#470723'><time timestamp='2016-05-31T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in that case, dbcache will help a lot
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717300' id='470724'>
<a class='timestamp' href='#470724'><time timestamp='2016-05-31T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
set it to 3000 or more
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717300' id='470725'>
<a class='timestamp' href='#470725'><time timestamp='2016-05-31T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yes, that will make it much faster. with 16GB ram you should be able to set it to 6000 or so and then the whole sync will basically happen in-memory, with just saving out chain to disk.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717420' id='470726'>
<a class='timestamp' href='#470726'><time timestamp='2016-05-31T17:57:00Z'>17:57</time></a>
&lt;<span class='nick nick-4'> * sipa</span>&gt;
belies this C++ type could use some typedefs:
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717420' id='470727'>
<a class='timestamp' href='#470727'><time timestamp='2016-05-31T17:57:00Z'>17:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
std::deque&lt;std::pair&lt;int64_t, std::map&lt;uint256, std::shared_ptr&lt;const CTransaction&gt;&gt;::iterator&gt;&gt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717600' id='470728'>
<a class='timestamp' href='#470728'><time timestamp='2016-05-31T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-6'> iniana</span>&gt;
started up again, trying with dbcache=4000, but synching stalls. log mentions reindexing every single block file. Is that necessary? Is there some way to turn it off?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717600' id='470729'>
<a class='timestamp' href='#470729'><time timestamp='2016-05-31T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
did you start with -reindex?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717600' id='470730'>
<a class='timestamp' href='#470730'><time timestamp='2016-05-31T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
sipa, it looks like Perl 8)
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717660' id='470731'>
<a class='timestamp' href='#470731'><time timestamp='2016-05-31T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-6'> iniana</span>&gt;
sipa: no
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717660' id='470732'>
<a class='timestamp' href='#470732'><time timestamp='2016-05-31T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
iniana: can you c/p some typical 3 line snippet from debug.log?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717660' id='470733'>
<a class='timestamp' href='#470733'><time timestamp='2016-05-31T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-6'> iniana</span>&gt;
sipa: I copied the entire .bitcoin from another node I had though, if that matters.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717720' id='470734'>
<a class='timestamp' href='#470734'><time timestamp='2016-05-31T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
a running one?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717720' id='470735'>
<a class='timestamp' href='#470735'><time timestamp='2016-05-31T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-6'> iniana</span>&gt;
sipa: no, although maybe it didn&#x27;t have a normal termination?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717720' id='470736'>
<a class='timestamp' href='#470736'><time timestamp='2016-05-31T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-6'> iniana</span>&gt;
2016-05-31 17:57:18 Reindexing block file blk00070.dat... 2016-05-31 17:57:21 Block Import: already had block 000000000000003d64d714747fbfb615e056f533386d162f0bf5e049a9b6e0b2 at height 247000 2016-05-31 17:57:22 Reindexing block file blk00071.dat... 2016-05-31 17:57:23 Block Import: already had block 000000000000004d945017c14b75a3a58a2aa6772cacbfcaf907b3bee6d7f344 at height 248000
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717720' id='470737'>
<a class='timestamp' href='#470737'><time timestamp='2016-05-31T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: Why does dequeue gain the ctransaction shared_ptr iterator?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717780' id='470738'>
<a class='timestamp' href='#470738'><time timestamp='2016-05-31T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: because that&#x27;s smaller and faster than the hash
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717780' id='470739'>
<a class='timestamp' href='#470739'><time timestamp='2016-05-31T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the old code was stupid
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717840' id='470740'>
<a class='timestamp' href='#470740'><time timestamp='2016-05-31T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s not a shared_ptr iterator btw, but a mapRelay iterator
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717840' id='470741'>
<a class='timestamp' href='#470741'><time timestamp='2016-05-31T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: isn&#x27;t the iterator invalidated any time the map is updated?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717840' id='470742'>
<a class='timestamp' href='#470742'><time timestamp='2016-05-31T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: nope!
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717840' id='470743'>
<a class='timestamp' href='#470743'><time timestamp='2016-05-31T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
only when that specific item is deleted
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717900' id='470744'>
<a class='timestamp' href='#470744'><time timestamp='2016-05-31T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
okay, I understand why then. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717960' id='470745'>
<a class='timestamp' href='#470745'><time timestamp='2016-05-31T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<a href="http://en.cppreference.com/w/cpp/container/map/insert" class="link" target="_blank">http://en.cppreference.com/w/cpp/container/map/insert</a> &lt;- &quot;No iterators or references are invalidated. &quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1464717960' id='470746'>
<a class='timestamp' href='#470746'><time timestamp='2016-05-31T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;ll document that change in the commit message
<br>
</div>

<div class='talk op-msg' data-timestamp='1464718140' id='470747'>
<a class='timestamp' href='#470747'><time timestamp='2016-05-31T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: oops, no, can&#x27;t do!
<br>
</div>

<div class='talk op-msg' data-timestamp='1464718140' id='470748'>
<a class='timestamp' href='#470748'><time timestamp='2016-05-31T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it can cause double deletions, as the expiration entries are not unique
<br>
</div>

<div class='talk op-msg' data-timestamp='1464718200' id='470749'>
<a class='timestamp' href='#470749'><time timestamp='2016-05-31T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I guess it cares about mutations too?  I was thinking about adding a nodeid set to maprelay later to only answer queries for peers we actually inved to.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464718260' id='470750'>
<a class='timestamp' href='#470750'><time timestamp='2016-05-31T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the value of map entries can be changed, no problems (without iterator invalidation)
<br>
</div>

<div class='talk op-msg' data-timestamp='1464718260' id='470751'>
<a class='timestamp' href='#470751'><time timestamp='2016-05-31T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
keys can&#x27;t ever change
<br>
</div>

<div class='talk op-msg' data-timestamp='1464718260' id='470752'>
<a class='timestamp' href='#470752'><time timestamp='2016-05-31T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;ll leave it be
<br>
</div>

<div class='talk op-msg' data-timestamp='1464718380' id='470753'>
<a class='timestamp' href='#470753'><time timestamp='2016-05-31T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, no, it is unique
<br>
</div>

<div class='talk op-msg' data-timestamp='1464718440' id='470754'>
<a class='timestamp' href='#470754'><time timestamp='2016-05-31T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I was digging through trying to figure out how it wasn&#x27;t unique...
<br>
</div>

<div class='talk op-msg' data-timestamp='1464718440' id='470755'>
<a class='timestamp' href='#470755'><time timestamp='2016-05-31T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m confusing with askfor
<br>
</div>

<div class='talk op-msg' data-timestamp='1464718500' id='470756'>
<a class='timestamp' href='#470756'><time timestamp='2016-05-31T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I would like to remove the expiration entry and reinsert it if the old expiration was &#x27;too soon&#x27;... but that doesn&#x27;t change the situation for the map with the shared pointers.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464719580' id='470757'>
<a class='timestamp' href='#470757'><time timestamp='2016-05-31T18:33:00Z'>18:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: since #8080, if pto-&gt;timeLastMempoolReq == 0, we don&#x27;t need to check the mempool at all, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464719640' id='470758'>
<a class='timestamp' href='#470758'><time timestamp='2016-05-31T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Right.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464723180' id='470759'>
<a class='timestamp' href='#470759'><time timestamp='2016-05-31T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
iniana, it&#x27;s probably a good idea to reindex if you copied ... but it shouldn&#x27;t need to do so
<br>
</div>

<div class='talk op-msg' data-timestamp='1464723180' id='470760'>
<a class='timestamp' href='#470760'><time timestamp='2016-05-31T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
are you sure you exited cleanly on the other node?
<br>
</div>

<div class='talk op-msg' data-timestamp='1464723960' id='470761'>
<a class='timestamp' href='#470761'><time timestamp='2016-05-31T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: I would make a bet they copied the blocks directory without the chainstate.
<br>
</div>

<div class='talk op-msg' data-timestamp='1464724200' id='470762'>
<a class='timestamp' href='#470762'><time timestamp='2016-05-31T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that would not result in a &#x27;reindexing&#x27; message
<br>
</div>

<div class='talk op-msg' data-timestamp='1464724260' id='470763'>
<a class='timestamp' href='#470763'><time timestamp='2016-05-31T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-2'> * gmaxwell</span>&gt;
withdraws bet
<br>
</div>

<div class='talk op-msg' data-timestamp='1464735060' id='470764'>
<a class='timestamp' href='#470764'><time timestamp='2016-05-31T22:51:00Z'>22:51</time></a>
&lt;<span class='nick nick-8'> GitHub133</span>&gt;
[bitcoin] theuni opened pull request #8128: Net: Turn net structures into dumb storage classes (master...split-resolve) <a href="https://github.com/bitcoin/bitcoin/pull/8128" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8128</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1464735420' id='470765'>
<a class='timestamp' href='#470765'><time timestamp='2016-05-31T22:57:00Z'>22:57</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, i assume they had a node which they manually reindexed with a higher dbcache setting which wasn&#x27;t cleanly shutdown
<br>
</div>

<div class='talk op-msg' data-timestamp='1464736440' id='470766'>
<a class='timestamp' href='#470766'><time timestamp='2016-05-31T23:14:00Z'>23:14</time></a>
&lt;<span class='nick nick-16'> GitHub56</span>&gt;
[bitcoin] UdjinM6 opened pull request #8129: Fix RPC console auto completer (master...fixRPCAutoCompleter_bitcoin) <a href="https://github.com/bitcoin/bitcoin/pull/8129" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8129</a>
<br>
</div>

</div>
</section>

</body>
</html>
