<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2016-12-14
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2016-12-14' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:25 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-11-14">&lt;</a><span class='header'>  December 2016   </span><a href="/bitcoin-core-dev/2017-01-14">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;             <a class="" href="/bitcoin-core-dev/2016-12-01">1</a>  <a class="" href="/bitcoin-core-dev/2016-12-02">2</a>  <a class="" href="/bitcoin-core-dev/2016-12-03">3</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-12-04">4</a>  <a class="" href="/bitcoin-core-dev/2016-12-05">5</a>  <a class="" href="/bitcoin-core-dev/2016-12-06">6</a>  <a class="" href="/bitcoin-core-dev/2016-12-07">7</a>  <a class="" href="/bitcoin-core-dev/2016-12-08">8</a>  <a class="" href="/bitcoin-core-dev/2016-12-09">9</a> <a class="" href="/bitcoin-core-dev/2016-12-10">10</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-12-11">11</a> <a class="" href="/bitcoin-core-dev/2016-12-12">12</a> <a class="" href="/bitcoin-core-dev/2016-12-13">13</a> <a class="current" href="/bitcoin-core-dev/2016-12-14">14</a> <a class="" href="/bitcoin-core-dev/2016-12-15">15</a> <a class="" href="/bitcoin-core-dev/2016-12-16">16</a> <a class="" href="/bitcoin-core-dev/2016-12-17">17</a>  &#x000A;18 <a class="" href="/bitcoin-core-dev/2016-12-19">19</a> <a class="" href="/bitcoin-core-dev/2016-12-20">20</a> <a class="" href="/bitcoin-core-dev/2016-12-21">21</a> <a class="" href="/bitcoin-core-dev/2016-12-22">22</a> <a class="" href="/bitcoin-core-dev/2016-12-23">23</a> <a class="" href="/bitcoin-core-dev/2016-12-24">24</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-12-25">25</a> <a class="" href="/bitcoin-core-dev/2016-12-26">26</a> <a class="" href="/bitcoin-core-dev/2016-12-27">27</a> <a class="" href="/bitcoin-core-dev/2016-12-28">28</a> <a class="" href="/bitcoin-core-dev/2016-12-29">29</a> <a class="" href="/bitcoin-core-dev/2016-12-30">30</a> <a class="" href="/bitcoin-core-dev/2016-12-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1481679240' id='517678'>
<a class='timestamp' href='#517678'><time timestamp='2016-12-14T01:34:00Z'>01:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
jonasschnelli: want to go comment on <a href="http://bitcoin.stackexchange.com/questions/50125/failing-to-build-bitcoin-core-v0-13-1-on-debian-stretch" class="link" target="_blank">http://bitcoin.stackexchange.com/questions/50125/failing-to-build-bitcoin-core-v0-13-1-on-debian-stretch</a> and point out its fixed in master?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481680260' id='517679'>
<a class='timestamp' href='#517679'><time timestamp='2016-12-14T01:51:00Z'>01:51</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] gmaxwell opened pull request #9344: Do not run functions with necessary side-effects in assert() (master...assert_no_sideeffects) <a href="https://github.com/bitcoin/bitcoin/pull/9344" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9344</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481680380' id='517680'>
<a class='timestamp' href='#517680'><time timestamp='2016-12-14T01:53:00Z'>01:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
again? :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1481680380' id='517681'>
<a class='timestamp' href='#517681'><time timestamp='2016-12-14T01:53:00Z'>01:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
looks like we missed some.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481680440' id='517682'>
<a class='timestamp' href='#517682'><time timestamp='2016-12-14T01:54:00Z'>01:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or 2.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481680440' id='517683'>
<a class='timestamp' href='#517683'><time timestamp='2016-12-14T01:54:00Z'>01:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
or 4.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481680440' id='517684'>
<a class='timestamp' href='#517684'><time timestamp='2016-12-14T01:54:00Z'>01:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
missed, or re-added?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481680440' id='517685'>
<a class='timestamp' href='#517685'><time timestamp='2016-12-14T01:54:00Z'>01:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the flush ones are from 2013, didn&#x27;t check the others.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481680440' id='517686'>
<a class='timestamp' href='#517686'><time timestamp='2016-12-14T01:54:00Z'>01:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
looking
<br>
</div>

<div class='talk op-msg' data-timestamp='1481680560' id='517687'>
<a class='timestamp' href='#517687'><time timestamp='2016-12-14T01:56:00Z'>01:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: the other two you introduced in 9c837d54.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481680620' id='517688'>
<a class='timestamp' href='#517688'><time timestamp='2016-12-14T01:57:00Z'>01:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
You have have the brownpaper bag when 2013-sipa is done with it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481680620' id='517689'>
<a class='timestamp' href='#517689'><time timestamp='2016-12-14T01:57:00Z'>01:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lol, oops
<br>
</div>

<div class='talk op-msg' data-timestamp='1481688480' id='517690'>
<a class='timestamp' href='#517690'><time timestamp='2016-12-14T04:08:00Z'>04:08</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
wonders if it would be useful to have a prune-to-slow-storage mode.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481688900' id='517691'>
<a class='timestamp' href='#517691'><time timestamp='2016-12-14T04:15:00Z'>04:15</time></a>
&lt;<span class='nick nick-14'> adam3us</span>&gt;
djb has a database called cdb (used in djbdns) that guarantees key-&gt;value lookup in 2 disk hits.  cost is it is slow to update (batch job)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481688900' id='517692'>
<a class='timestamp' href='#517692'><time timestamp='2016-12-14T04:15:00Z'>04:15</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I just mean for block data. Instead of deleting, move it to a USB drive or smth
<br>
</div>

<div class='talk op-msg' data-timestamp='1481688900' id='517693'>
<a class='timestamp' href='#517693'><time timestamp='2016-12-14T04:15:00Z'>04:15</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
maybe even a location that can be offline when you don&#x27;t need it
<br>
</div>

<div class='talk op-msg' data-timestamp='1481688960' id='517694'>
<a class='timestamp' href='#517694'><time timestamp='2016-12-14T04:16:00Z'>04:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
so when you want to restore an old backup or whatever, you just plug it in
<br>
</div>

<div class='talk op-msg' data-timestamp='1481689020' id='517695'>
<a class='timestamp' href='#517695'><time timestamp='2016-12-14T04:17:00Z'>04:17</time></a>
&lt;<span class='nick nick-14'> adam3us</span>&gt;
yes. i am talking about something only semi-related. that utxo access latency (with sig checking disabled) is increasing due to less spam creating lower cache hit rates, and larger utxo hitting disk more.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481689080' id='517696'>
<a class='timestamp' href='#517696'><time timestamp='2016-12-14T04:18:00Z'>04:18</time></a>
&lt;<span class='nick nick-14'> adam3us</span>&gt;
so then maybe a three tier strategy could be old stuff in cdb, more recent (eg last 2months?) in current disk layout, plus memory cache. once per month do the batch to move another 1month chunk to the cdb compact/efficient lookup format.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481689080' id='517697'>
<a class='timestamp' href='#517697'><time timestamp='2016-12-14T04:18:00Z'>04:18</time></a>
&lt;<span class='nick nick-14'> adam3us</span>&gt;
cdb has constant time lookup, where general lookup is log n.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481690160' id='517698'>
<a class='timestamp' href='#517698'><time timestamp='2016-12-14T04:36:00Z'>04:36</time></a>
&lt;<span class='nick nick-16'> Lightsword</span>&gt;
are there any known issues getting master to compile on the latest osx?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481691300' id='517699'>
<a class='timestamp' href='#517699'><time timestamp='2016-12-14T04:55:00Z'>04:55</time></a>
&lt;<span class='nick nick-16'> Lightsword</span>&gt;
nvm was protobuf version issue
<br>
</div>

<div class='talk op-msg' data-timestamp='1481692080' id='517700'>
<a class='timestamp' href='#517700'><time timestamp='2016-12-14T05:08:00Z'>05:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
why is secp256k1.c +x now?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481692080' id='517701'>
<a class='timestamp' href='#517701'><time timestamp='2016-12-14T05:08:00Z'>05:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
main_impl.h also
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697480' id='517702'>
<a class='timestamp' href='#517702'><time timestamp='2016-12-14T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
instagibbs, are wallet transactions loaded into the mempool on restart?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697480' id='517703'>
<a class='timestamp' href='#517703'><time timestamp='2016-12-14T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
i didn&#x27;t think they were
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697480' id='517704'>
<a class='timestamp' href='#517704'><time timestamp='2016-12-14T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
wouldn&#x27;t that break #9262
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697480' id='517705'>
<a class='timestamp' href='#517705'><time timestamp='2016-12-14T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9262" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9262</a> | Prefer coins that have fewer ancestors, sanity check txn before ATMP by instagibbs · Pull Request #9262 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697480' id='517706'>
<a class='timestamp' href='#517706'><time timestamp='2016-12-14T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: yes, they are. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697480' id='517707'>
<a class='timestamp' href='#517707'><time timestamp='2016-12-14T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697540' id='517708'>
<a class='timestamp' href='#517708'><time timestamp='2016-12-14T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(assuming the mempool would take them).
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697540' id='517709'>
<a class='timestamp' href='#517709'><time timestamp='2016-12-14T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
they do you say it would break 9262?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697540' id='517710'>
<a class='timestamp' href='#517710'><time timestamp='2016-12-14T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
they&#x27;re not rebroadcast though right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697540' id='517711'>
<a class='timestamp' href='#517711'><time timestamp='2016-12-14T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
they&#x27;re rebroadcast if they get into the mempool.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697540' id='517712'>
<a class='timestamp' href='#517712'><time timestamp='2016-12-14T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
if they&#x27;re not in the mempool then checking their ancestor depth will always fail of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697600' id='517713'>
<a class='timestamp' href='#517713'><time timestamp='2016-12-14T06:40:00Z'>06:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Yea, I see what you&#x27;re saying-- they&#x27;re put into the mempool. (and IIRC the wallet will not try to spend them if they&#x27;re unconfirmed and not in the mempool)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697600' id='517714'>
<a class='timestamp' href='#517714'><time timestamp='2016-12-14T06:40:00Z'>06:40</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
hmm     
<br>
</div>

<div class='talk op-msg' data-timestamp='1481697600' id='517715'>
<a class='timestamp' href='#517715'><time timestamp='2016-12-14T06:40:00Z'>06:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(but I could be wrong there and instead remembering the behavior it should have instead of does have... :) )
<br>
</div>

<div class='talk op-msg' data-timestamp='1481704380' id='517716'>
<a class='timestamp' href='#517716'><time timestamp='2016-12-14T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9264: 0.13.2 backports (0.13...2016_12_backports_0_13) <a href="https://github.com/bitcoin/bitcoin/pull/9264" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9264</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481704380' id='517717'>
<a class='timestamp' href='#517717'><time timestamp='2016-12-14T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/26fe5c98ab6a...82ccac739e2a" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/26fe5c98ab6a...82ccac739e2a</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481704380' id='517718'>
<a class='timestamp' href='#517718'><time timestamp='2016-12-14T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master da9cdd2 Gregory Maxwell: Do not run functions with necessary side-effects in assert()
<br>
</div>

<div class='talk op-msg' data-timestamp='1481704380' id='517719'>
<a class='timestamp' href='#517719'><time timestamp='2016-12-14T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 82ccac7 Wladimir J. van der Laan: Merge #9344: Do not run functions with necessary side-effects in assert()...
<br>
</div>

<div class='talk op-msg' data-timestamp='1481704440' id='517720'>
<a class='timestamp' href='#517720'><time timestamp='2016-12-14T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa opened pull request #9346: Batch construct batches (master...reusebatch) <a href="https://github.com/bitcoin/bitcoin/pull/9346" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9346</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481704440' id='517721'>
<a class='timestamp' href='#517721'><time timestamp='2016-12-14T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/82ccac739e2a...47e6a19e6b57" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/82ccac739e2a...47e6a19e6b57</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481704440' id='517722'>
<a class='timestamp' href='#517722'><time timestamp='2016-12-14T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ed6b377 Jonas Schnelli: [Qt] Console: add security warning
<br>
</div>

<div class='talk op-msg' data-timestamp='1481704440' id='517723'>
<a class='timestamp' href='#517723'><time timestamp='2016-12-14T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 47e6a19 Wladimir J. van der Laan: Merge #9330: [Qt] Console: add security warning...
<br>
</div>

<div class='talk op-msg' data-timestamp='1481704500' id='517724'>
<a class='timestamp' href='#517724'><time timestamp='2016-12-14T08:35:00Z'>08:35</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9330: [Qt] Console: add security warning (master...2016/12/qt_add_sec) <a href="https://github.com/bitcoin/bitcoin/pull/9330" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9330</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481704500' id='517725'>
<a class='timestamp' href='#517725'><time timestamp='2016-12-14T08:35:00Z'>08:35</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9323: [0.13] Add release notes for wallet/mempool rejections. (PR #9302 and #9290) (0.13...mempool_relnote) <a href="https://github.com/bitcoin/bitcoin/pull/9323" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9323</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481706000' id='517726'>
<a class='timestamp' href='#517726'><time timestamp='2016-12-14T09:00:00Z'>09:00</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, that is indeed the behaviour it has
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707080' id='517727'>
<a class='timestamp' href='#517727'><time timestamp='2016-12-14T09:18:00Z'>09:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9211: [0.12 branch] Backports (0.12...Mf1611-back12) <a href="https://github.com/bitcoin/bitcoin/pull/9211" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9211</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707500' id='517728'>
<a class='timestamp' href='#517728'><time timestamp='2016-12-14T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
what&#x27;s the status on #9037? &quot;Add test-before-evict discipline to addrman&quot; looks like it&#x27;s finished for a while but hasn&#x27;t got any review yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707500' id='517729'>
<a class='timestamp' href='#517729'><time timestamp='2016-12-14T09:25:00Z'>09:25</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9037" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9037</a> | net: Add test-before-evict discipline to addrman by EthanHeilman · Pull Request #9037 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707680' id='517730'>
<a class='timestamp' href='#517730'><time timestamp='2016-12-14T09:28:00Z'>09:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/47e6a19e6b57...57e337d40e94" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/47e6a19e6b57...57e337d40e94</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707680' id='517731'>
<a class='timestamp' href='#517731'><time timestamp='2016-12-14T09:28:00Z'>09:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master f692fce Gregory Maxwell: Make RelayWalletTransaction attempt to AcceptToMemoryPool....
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707680' id='517732'>
<a class='timestamp' href='#517732'><time timestamp='2016-12-14T09:28:00Z'>09:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 57e337d Pieter Wuille: Merge #9290: Make RelayWalletTransaction attempt to AcceptToMemoryPool....
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707680' id='517733'>
<a class='timestamp' href='#517733'><time timestamp='2016-12-14T09:28:00Z'>09:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #9290: Make RelayWalletTransaction attempt to AcceptToMemoryPool. (master...resend_retries_mempool) <a href="https://github.com/bitcoin/bitcoin/pull/9290" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9290</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707800' id='517734'>
<a class='timestamp' href='#517734'><time timestamp='2016-12-14T09:30:00Z'>09:30</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
gmaxwell, iirc SelectMinCoins can be supppper expensive
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707860' id='517735'>
<a class='timestamp' href='#517735'><time timestamp='2016-12-14T09:31:00Z'>09:31</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
er SelectCoinsMinConf
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707860' id='517736'>
<a class='timestamp' href='#517736'><time timestamp='2016-12-14T09:31:00Z'>09:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: it has linear cost in the number of spendable coins below the amount you&#x27;re sending.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707920' id='517737'>
<a class='timestamp' href='#517737'><time timestamp='2016-12-14T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
ok     
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707920' id='517738'>
<a class='timestamp' href='#517738'><time timestamp='2016-12-14T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
was that fixed from something much worse in the past?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707920' id='517739'>
<a class='timestamp' href='#517739'><time timestamp='2016-12-14T09:32:00Z'>09:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: fell off my radar before I finished review; I will review later today (your time).
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707980' id='517740'>
<a class='timestamp' href='#517740'><time timestamp='2016-12-14T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
phantomcircuit: it used to call the IsFromMe stuff that could be O(terrible).
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707980' id='517741'>
<a class='timestamp' href='#517741'><time timestamp='2016-12-14T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: so, initial report (see <a href="https://github.com/sipa/bitcoin/commits/pertxoutcache).." class="link" target="_blank">https://github.com/sipa/bitcoin/commits/pertxoutcache)..</a>. gmaxwell benchmarked it, and it seems to make normal operation somewhat faster, but the cache memory usage larger resulting in more frequent flushes, and the flushes themselves are maybe 3x slower
<br>
</div>

<div class='talk op-msg' data-timestamp='1481707980' id='517742'>
<a class='timestamp' href='#517742'><time timestamp='2016-12-14T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so for large dbcache it seems to be a win, while for low dbcache sizes it clearly is not
<br>
</div>

<div class='talk op-msg' data-timestamp='1481708280' id='517743'>
<a class='timestamp' href='#517743'><time timestamp='2016-12-14T09:38:00Z'>09:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
basically for largeish dbcache it looked ~15% faster than master until the moment where it flushed, then it took 2.5x longer... the cache also used about 20% more memory, so 20% less cache in a given size... so flushing more often and the further it went the performance change tended to a large slowdown. :(   The cache using more memory is perhaps something of an illusion of an effect, since a m
<br>
</div>

<div class='talk op-msg' data-timestamp='1481708280' id='517744'>
<a class='timestamp' href='#517744'><time timestamp='2016-12-14T09:38:00Z'>09:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
ajor motivator of the change was to eliminate the existance of modified entries in the cache, which would make a good replacement policy possible instead of dumbly dumping the whole thing.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481708340' id='517745'>
<a class='timestamp' href='#517745'><time timestamp='2016-12-14T09:39:00Z'>09:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so if the issue were only the 20% reduction in cache size, that much could easily be recovered by smarter cache handling that it makes possible.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481708340' id='517746'>
<a class='timestamp' href='#517746'><time timestamp='2016-12-14T09:39:00Z'>09:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
The flushing slowdown though... :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1481709000' id='517747'>
<a class='timestamp' href='#517747'><time timestamp='2016-12-14T09:50:00Z'>09:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
bah :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1481709420' id='517748'>
<a class='timestamp' href='#517748'><time timestamp='2016-12-14T09:57:00Z'>09:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/57e337d40e94...b68685a16a81" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/57e337d40e94...b68685a16a81</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481709420' id='517749'>
<a class='timestamp' href='#517749'><time timestamp='2016-12-14T09:57:00Z'>09:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master a13fa4c Matt Corallo: Remove unused CDiskBlockPos* argument from ProcessNewBlock
<br>
</div>

<div class='talk op-msg' data-timestamp='1481709420' id='517750'>
<a class='timestamp' href='#517750'><time timestamp='2016-12-14T09:57:00Z'>09:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master b68685a Wladimir J. van der Laan: Merge #9273: Remove unused CDiskBlockPos* argument from ProcessNewBlock...
<br>
</div>

<div class='talk op-msg' data-timestamp='1481709420' id='517751'>
<a class='timestamp' href='#517751'><time timestamp='2016-12-14T09:57:00Z'>09:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9273: Remove unused CDiskBlockPos* argument from ProcessNewBlock (master...2016-12-remove-unused-pnb-param) <a href="https://github.com/bitcoin/bitcoin/pull/9273" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9273</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481717040' id='517752'>
<a class='timestamp' href='#517752'><time timestamp='2016-12-14T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #9347: [0.13.2] wallet backports (0.13...Mf1612-013back) <a href="https://github.com/bitcoin/bitcoin/pull/9347" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9347</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481717520' id='517753'>
<a class='timestamp' href='#517753'><time timestamp='2016-12-14T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I assume #9262 is no longer for backport?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481717520' id='517754'>
<a class='timestamp' href='#517754'><time timestamp='2016-12-14T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9262" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9262</a> | Prefer coins that have fewer ancestors, sanity check txn before ATMP by instagibbs · Pull Request #9262 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1481717520' id='517755'>
<a class='timestamp' href='#517755'><time timestamp='2016-12-14T12:12:00Z'>12:12</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
We already return the txid and try to reaccept to the mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1481717580' id='517756'>
<a class='timestamp' href='#517756'><time timestamp='2016-12-14T12:13:00Z'>12:13</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Also, the default of 9262 is off, and who changes defaults anyway?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481721480' id='517757'>
<a class='timestamp' href='#517757'><time timestamp='2016-12-14T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
MarcoFalke: only the rejecting of transactions us off by default
<br>
</div>

<div class='talk op-msg' data-timestamp='1481721480' id='517758'>
<a class='timestamp' href='#517758'><time timestamp='2016-12-14T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
That said I don&#x27;t think it&#x27;s necessary for backport
<br>
</div>

<div class='talk op-msg' data-timestamp='1481726700' id='517759'>
<a class='timestamp' href='#517759'><time timestamp='2016-12-14T14:45:00Z'>14:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I don&#x27;t think we should discuss 9262 for backport until after its merged...  if it&#x27;s too late then, it&#x27;s too late.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481726760' id='517760'>
<a class='timestamp' href='#517760'><time timestamp='2016-12-14T14:46:00Z'>14:46</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if it works right, its a less disruptive change for backport...  but, we don&#x27;t want to take chances on the &quot;if&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733240' id='517761'>
<a class='timestamp' href='#517761'><time timestamp='2016-12-14T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sigh... wumpus: i think i messed up with #9240 we might want to revert it
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733240' id='517762'>
<a class='timestamp' href='#517762'><time timestamp='2016-12-14T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9240" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9240</a> | Remove txConflicted by morcos · Pull Request #9240 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733240' id='517763'>
<a class='timestamp' href='#517763'><time timestamp='2016-12-14T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I didn&#x27;t properly think through notifications that would no longer happen because SyncTransaction was no longer being called
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733300' id='517764'>
<a class='timestamp' href='#517764'><time timestamp='2016-12-14T16:35:00Z'>16:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
where else do we need notifications for conflicts?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733360' id='517765'>
<a class='timestamp' href='#517765'><time timestamp='2016-12-14T16:36:00Z'>16:36</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I think there are 3 things that won&#x27;t happen  1)zmqnotifications (but we dont&#x27; do those for other things that leave the mempool, so maybe doesn&#x27;t matter)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733360' id='517766'>
<a class='timestamp' href='#517766'><time timestamp='2016-12-14T16:36:00Z'>16:36</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
2) UI notifications or whatever NotifyTransactionChanged does  (haven&#x27;t dived into this yet, but I also think this doesn&#x27;t matter)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733360' id='517767'>
<a class='timestamp' href='#517767'><time timestamp='2016-12-14T16:36:00Z'>16:36</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
3) -walletnotify notifications
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733420' id='517768'>
<a class='timestamp' href='#517768'><time timestamp='2016-12-14T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
3) is tricky, b/c it might make more sense to call those from MarkConflicted in the wallet except for the case of someone paying you
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733420' id='517769'>
<a class='timestamp' href='#517769'><time timestamp='2016-12-14T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but what we need for all of those is not conflicts
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733420' id='517770'>
<a class='timestamp' href='#517770'><time timestamp='2016-12-14T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe we need a class of &quot;reorged&quot; transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733420' id='517771'>
<a class='timestamp' href='#517771'><time timestamp='2016-12-14T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
someone paying you is not something you would identify in wallet conflict code as now being conflicted, but something you might want to know about in walletnotify
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733420' id='517772'>
<a class='timestamp' href='#517772'><time timestamp='2016-12-14T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
whats the definition of that if not conflict
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733480' id='517773'>
<a class='timestamp' href='#517773'><time timestamp='2016-12-14T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
morcos: well that can happen, at least it&#x27;s not one of the backported ones :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733480' id='517774'>
<a class='timestamp' href='#517774'><time timestamp='2016-12-14T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
reorged is previously confirmed transactions that are now no longer confirmed
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733480' id='517775'>
<a class='timestamp' href='#517775'><time timestamp='2016-12-14T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: you still are notified on those
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733480' id='517776'>
<a class='timestamp' href='#517776'><time timestamp='2016-12-14T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
conflicted is previously unconfirmed transactions that are now inconsistent with the tip
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733540' id='517777'>
<a class='timestamp' href='#517777'><time timestamp='2016-12-14T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
this is just mempool transactions that are now conflicted  (actually nothing to do with a reorg, just a new block that conflicts with it)
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733540' id='517778'>
<a class='timestamp' href='#517778'><time timestamp='2016-12-14T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah sorry
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733540' id='517779'>
<a class='timestamp' href='#517779'><time timestamp='2016-12-14T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, i&#x27;m questioning whether we need that
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733540' id='517780'>
<a class='timestamp' href='#517780'><time timestamp='2016-12-14T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
their confirmation count is not changing
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733600' id='517781'>
<a class='timestamp' href='#517781'><time timestamp='2016-12-14T16:40:00Z'>16:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, maybe we need it for wiping a cached balance?
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733660' id='517782'>
<a class='timestamp' href='#517782'><time timestamp='2016-12-14T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think it might be nicer to just have -walletnotify for any wallet transactions that left the mempool...  then it might not be necessary to distinguish if you can mark it conflicted or not
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733660' id='517783'>
<a class='timestamp' href='#517783'><time timestamp='2016-12-14T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but thats difficult
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733720' id='517784'>
<a class='timestamp' href='#517784'><time timestamp='2016-12-14T16:42:00Z'>16:42</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: i don&#x27;t think so...   it doesn&#x27;t add to your credit if its not from you, and if it spends your money, then well...  i suppose it could be a mixed debit tx that you don&#x27;t identify...  but imo thats in the class of things we could never fully get anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733720' id='517785'>
<a class='timestamp' href='#517785'><time timestamp='2016-12-14T16:42:00Z'>16:42</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think my thinking was just about our own wallet code, which i think is still ok...  its the external notifications i hadn&#x27;t considered
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733780' id='517786'>
<a class='timestamp' href='#517786'><time timestamp='2016-12-14T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i didn&#x27;t even know we sent notifications for left-mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733780' id='517787'>
<a class='timestamp' href='#517787'><time timestamp='2016-12-14T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
we don&#x27;t we send them for SyncTransaction
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733780' id='517788'>
<a class='timestamp' href='#517788'><time timestamp='2016-12-14T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
?     
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733780' id='517789'>
<a class='timestamp' href='#517789'><time timestamp='2016-12-14T16:43:00Z'>16:43</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
which we were calling for things that left the mempool via conflict
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733840' id='517790'>
<a class='timestamp' href='#517790'><time timestamp='2016-12-14T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
we send them from SyncTransaction for anything that is InvolvingMe
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733840' id='517791'>
<a class='timestamp' href='#517791'><time timestamp='2016-12-14T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
SyncTransaction -&gt; AddToWalletIfInvolvingMe -&gt; AddToWallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1481733840' id='517792'>
<a class='timestamp' href='#517792'><time timestamp='2016-12-14T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
AddToWallet calls -walletnotify
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734020' id='517793'>
<a class='timestamp' href='#517793'><time timestamp='2016-12-14T16:47:00Z'>16:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I was saying if you had a generic way of calling SyncTransaction for everything that left the mempool (for reasons other than being included in a block which is already covered) then that might be the most logical thing...
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734020' id='517794'>
<a class='timestamp' href='#517794'><time timestamp='2016-12-14T16:47:00Z'>16:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
And I don&#x27;t think it would be all that important to distinguish the reason it left, at least our own wallet isn&#x27;t smart about that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734080' id='517795'>
<a class='timestamp' href='#517795'><time timestamp='2016-12-14T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
But that is not easy to do I don&#x27;t think.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734080' id='517796'>
<a class='timestamp' href='#517796'><time timestamp='2016-12-14T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hmm, we could have a callback installed in the mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734140' id='517797'>
<a class='timestamp' href='#517797'><time timestamp='2016-12-14T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
So maybe its important to still call SyncTransaction for txConflicted (the mempool conflict detection i removed) just so we get the -walletnotify for payments to us that have now been double spent / replaced / conflicted, what have you
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734200' id='517798'>
<a class='timestamp' href='#517798'><time timestamp='2016-12-14T16:50:00Z'>16:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok     
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734260' id='517799'>
<a class='timestamp' href='#517799'><time timestamp='2016-12-14T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
believe me i don&#x27;t like txConflicted..  but i&#x27;m worried about accidentally making a change that somebody might be relying on for zero-conf doublespend detection
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734320' id='517800'>
<a class='timestamp' href='#517800'><time timestamp='2016-12-14T16:52:00Z'>16:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so you&#x27;ll revert 9240 entirely, or keep txConflicts but remove its use in wallet conflicts checking
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734380' id='517801'>
<a class='timestamp' href='#517801'><time timestamp='2016-12-14T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: i think thats the same thing.  it wasn&#x27;t doing anything in wallet conflicts checking.  so reverting 9240 entirely will not affect our wallet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734440' id='517802'>
<a class='timestamp' href='#517802'><time timestamp='2016-12-14T16:54:00Z'>16:54</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think we should either revert it, or decide that there is a not that complicated better solution.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734500' id='517803'>
<a class='timestamp' href='#517803'><time timestamp='2016-12-14T16:55:00Z'>16:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i see
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734560' id='517804'>
<a class='timestamp' href='#517804'><time timestamp='2016-12-14T16:56:00Z'>16:56</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
perhaps its worth spending an hour thinking about whether SyncTransaction called from mempool.remove is the right thing to do regardless.. if not.. then revert 9240, if so, then do that before 0.14.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481734560' id='517805'>
<a class='timestamp' href='#517805'><time timestamp='2016-12-14T16:56:00Z'>16:56</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
i&#x27;d be hesitant to make changes without thinking through a clear API for how all these callbacks ought to work, and documenting that
<br>
</div>

<div class='talk op-msg' data-timestamp='1481739360' id='517806'>
<a class='timestamp' href='#517806'><time timestamp='2016-12-14T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa opened pull request #9349: Make CScript (and prevector) c++11 movable. (master...movescript) <a href="https://github.com/bitcoin/bitcoin/pull/9349" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9349</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481740560' id='517807'>
<a class='timestamp' href='#517807'><time timestamp='2016-12-14T18:36:00Z'>18:36</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] Christewart opened pull request #9350: Adding label for amount inside of tx_valid/tx_invalid.json (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/9350" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9350</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481741760' id='517808'>
<a class='timestamp' href='#517808'><time timestamp='2016-12-14T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: wumpus: It turned out to be quite easy to track all mempool removals and call SyncTransaction on them.  However there are some tricky issues around edge cases involving reorgs where you might call the Sync for its removal after the Sync for it entering a block.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481741820' id='517809'>
<a class='timestamp' href='#517809'><time timestamp='2016-12-14T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I don&#x27;t believe this actually causes any issues..  but it&#x27;ll take some time to think through it carefully
<br>
</div>

<div class='talk op-msg' data-timestamp='1481741820' id='517810'>
<a class='timestamp' href='#517810'><time timestamp='2016-12-14T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
It would be my preference to do that, and try to document this code better..  As I think calling SyncTransaction (and thus walletnotify) on things that leave the mempool makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1481741880' id='517811'>
<a class='timestamp' href='#517811'><time timestamp='2016-12-14T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
And I think reverting 9240 is a step backwards towards cleaning this stuff up
<br>
</div>

<div class='talk op-msg' data-timestamp='1481741880' id='517812'>
<a class='timestamp' href='#517812'><time timestamp='2016-12-14T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
But it depends on how risk averse you are for leaving it in its current state for a little while.
<br>
</div>

<div class='talk op-msg' data-timestamp='1481741940' id='517813'>
<a class='timestamp' href='#517813'><time timestamp='2016-12-14T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
To summarize, I think the only regression is that -walletnotify isn&#x27;t fired on transactions that were in the mempool and then evicted due to a tx in a new block conflicting them
<br>
</div>

<div class='talk op-msg' data-timestamp='1481741940' id='517814'>
<a class='timestamp' href='#517814'><time timestamp='2016-12-14T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i&#x27;ve got to run for the day shortly..
<br>
</div>

<div class='talk op-msg' data-timestamp='1481751180' id='517815'>
<a class='timestamp' href='#517815'><time timestamp='2016-12-14T21:33:00Z'>21:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ryanofsky opened pull request #9351: Remove CWalletTx::fFromMe member. (master...pr/atw-fromme) <a href="https://github.com/bitcoin/bitcoin/pull/9351" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9351</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1481753520' id='517816'>
<a class='timestamp' href='#517816'><time timestamp='2016-12-14T22:12:00Z'>22:12</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sdaftuar opened pull request #9352: Attempt reconstruction from all compact block announcements (master...optimistic-cb-2) <a href="https://github.com/bitcoin/bitcoin/pull/9352" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9352</a>
<br>
</div>

</div>
</section>

</body>
</html>
