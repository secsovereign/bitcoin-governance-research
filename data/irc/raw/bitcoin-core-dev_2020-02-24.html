<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2020-02-24
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2020-02-24' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:18 UTC</pre>
<pre><a href="/bitcoin-core-dev/2020-01-24">&lt;</a><span class='header'>  February 2020   </span><a href="/bitcoin-core-dev/2020-03-24">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                   <a class="" href="/bitcoin-core-dev/2020-02-01">1</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2020-02-02">2</a>  <a class="" href="/bitcoin-core-dev/2020-02-03">3</a>  <a class="" href="/bitcoin-core-dev/2020-02-04">4</a>  <a class="" href="/bitcoin-core-dev/2020-02-05">5</a>  <a class="" href="/bitcoin-core-dev/2020-02-06">6</a>  <a class="" href="/bitcoin-core-dev/2020-02-07">7</a>  <a class="" href="/bitcoin-core-dev/2020-02-08">8</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2020-02-09">9</a> <a class="" href="/bitcoin-core-dev/2020-02-10">10</a> <a class="" href="/bitcoin-core-dev/2020-02-11">11</a> <a class="" href="/bitcoin-core-dev/2020-02-12">12</a> <a class="" href="/bitcoin-core-dev/2020-02-13">13</a> <a class="" href="/bitcoin-core-dev/2020-02-14">14</a> <a class="" href="/bitcoin-core-dev/2020-02-15">15</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-02-16">16</a> <a class="" href="/bitcoin-core-dev/2020-02-17">17</a> <a class="" href="/bitcoin-core-dev/2020-02-18">18</a> <a class="" href="/bitcoin-core-dev/2020-02-19">19</a> <a class="" href="/bitcoin-core-dev/2020-02-20">20</a> <a class="" href="/bitcoin-core-dev/2020-02-21">21</a> <a class="" href="/bitcoin-core-dev/2020-02-22">22</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-02-23">23</a> <a class="current" href="/bitcoin-core-dev/2020-02-24">24</a> <a class="" href="/bitcoin-core-dev/2020-02-25">25</a> <a class="" href="/bitcoin-core-dev/2020-02-26">26</a> <a class="" href="/bitcoin-core-dev/2020-02-27">27</a> <a class="" href="/bitcoin-core-dev/2020-02-28">28</a> <a class="" href="/bitcoin-core-dev/2020-02-29">29</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1582537320' id='376034'>
<a class='timestamp' href='#376034'><time timestamp='2020-02-24T09:42:00Z'>09:42</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
wumpus: ping re #18064
<br>
</div>

<div class='talk op-msg' data-timestamp='1582537320' id='376035'>
<a class='timestamp' href='#376035'><time timestamp='2020-02-24T09:42:00Z'>09:42</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18064" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18064</a> | gui: Drop WalletModel dependency to RecentRequestsTableModel by promag · Pull Request #18064 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1582541160' id='376036'>
<a class='timestamp' href='#376036'><time timestamp='2020-02-24T10:46:00Z'>10:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
promag: will take a look thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1582544400' id='376037'>
<a class='timestamp' href='#376037'><time timestamp='2020-02-24T11:40:00Z'>11:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift closed pull request #18199: build: Enable AddressSanitizer as part of --enable-debug (master...enable-debug-asan) <a href="https://github.com/bitcoin/bitcoin/pull/18199" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18199</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1582550820' id='376038'>
<a class='timestamp' href='#376038'><time timestamp='2020-02-24T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] zengyiheng opened pull request #18200: Sebible v0.18.1 prow (master...sebible-v0.18.1-prow) <a href="https://github.com/bitcoin/bitcoin/pull/18200" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18200</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1582551000' id='376039'>
<a class='timestamp' href='#376039'><time timestamp='2020-02-24T13:30:00Z'>13:30</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake closed pull request #18200: Sebible v0.18.1 prow (master...sebible-v0.18.1-prow) <a href="https://github.com/bitcoin/bitcoin/pull/18200" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18200</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1582554300' id='376040'>
<a class='timestamp' href='#376040'><time timestamp='2020-02-24T14:25:00Z'>14:25</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
#proposedmeetingtopic more topic collection for upcoming physical meeting
<br>
</div>

<div class='talk op-msg' data-timestamp='1582555200' id='376041'>
<a class='timestamp' href='#376041'><time timestamp='2020-02-24T14:40:00Z'>14:40</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
achow101, descriptor wallet PR is a <b>*great*</b> place to redefine &quot;IsChange&quot; to be something much more meaningful than &quot;address isn&#x27;t in address book&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1582555260' id='376042'>
<a class='timestamp' href='#376042'><time timestamp='2020-02-24T14:41:00Z'>14:41</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
since we&#x27;re adhering to BIP44/49/84(throwing this out there in case someone thinks this is a bad idea)
<br>
</div>

<div class='talk op-msg' data-timestamp='1582560120' id='376043'>
<a class='timestamp' href='#376043'><time timestamp='2020-02-24T16:02:00Z'>16:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/ab9de435880c...225aa5d6d519" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/ab9de435880c...225aa5d6d519</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1582560120' id='376044'>
<a class='timestamp' href='#376044'><time timestamp='2020-02-24T16:02:00Z'>16:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master bca8665 Luke Dashjr: scripted-diff: Wallet: Rename incorrectly named *UsedDestination
<br>
</div>

<div class='talk op-msg' data-timestamp='1582560120' id='376045'>
<a class='timestamp' href='#376045'><time timestamp='2020-02-24T16:02:00Z'>16:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 225aa5d MarcoFalke: Merge #18193: scripted-diff: Wallet: Rename incorrectly named *UsedDestina...
<br>
</div>

<div class='talk op-msg' data-timestamp='1582560120' id='376046'>
<a class='timestamp' href='#376046'><time timestamp='2020-02-24T16:02:00Z'>16:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #18193: scripted-diff: Wallet: Rename incorrectly named *UsedDestination (master...rename_useddest) <a href="https://github.com/bitcoin/bitcoin/pull/18193" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18193</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1582562040' id='376047'>
<a class='timestamp' href='#376047'><time timestamp='2020-02-24T16:34:00Z'>16:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] Sjors opened pull request #18201: rpc: sendmany and sendtoaddress return PSBT for wallets without private keys (master...2020/02/sendmany_sendtoaddress) <a href="https://github.com/bitcoin/bitcoin/pull/18201" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18201</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1582562220' id='376048'>
<a class='timestamp' href='#376048'><time timestamp='2020-02-24T16:37:00Z'>16:37</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
instagibbs: I&#x27;m not sure how that would fit in with LegacyScriptPubKeyMan though
<br>
</div>

<div class='talk op-msg' data-timestamp='1582562280' id='376049'>
<a class='timestamp' href='#376049'><time timestamp='2020-02-24T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
we could have the check be whether a destination belongs to a spkman in m_internal_spk_managers, but for legacy, that doesn&#x27;t work
<br>
</div>

<div class='talk op-msg' data-timestamp='1582562880' id='376050'>
<a class='timestamp' href='#376050'><time timestamp='2020-02-24T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: have a IsChange(destination, label) function in spkmanagers, which is implemented in legacy as checking if label is empty, and has sane logic in descriptor spkmans?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582562940' id='376051'>
<a class='timestamp' href='#376051'><time timestamp='2020-02-24T16:49:00Z'>16:49</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
spkmans internally don&#x27;t really have a concept of being change/not-change
<br>
</div>

<div class='talk op-msg' data-timestamp='1582563000' id='376052'>
<a class='timestamp' href='#376052'><time timestamp='2020-02-24T16:50:00Z'>16:50</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
but I guess we can just have IsChange have more conditionals based on spkman type as we already do in a few places
<br>
</div>

<div class='talk op-msg' data-timestamp='1582563060' id='376053'>
<a class='timestamp' href='#376053'><time timestamp='2020-02-24T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in an envisioned native descriptor wallet, you&#x27;d have separate spkmans for change and non-change, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582563060' id='376054'>
<a class='timestamp' href='#376054'><time timestamp='2020-02-24T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1582563180' id='376055'>
<a class='timestamp' href='#376055'><time timestamp='2020-02-24T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but it&#x27;s not the spkman itself that knows it is for change or not?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582563180' id='376056'>
<a class='timestamp' href='#376056'><time timestamp='2020-02-24T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1582563180' id='376057'>
<a class='timestamp' href='#376057'><time timestamp='2020-02-24T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
we would have to check whether a scriptPubKey belongs to a spkman in m_internal_spk_mans
<br>
</div>

<div class='talk op-msg' data-timestamp='1582563180' id='376058'>
<a class='timestamp' href='#376058'><time timestamp='2020-02-24T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1582563180' id='376059'>
<a class='timestamp' href='#376059'><time timestamp='2020-02-24T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but it also.sounds like there shoukd be an easy solution
<br>
</div>

<div class='talk op-msg' data-timestamp='1582563420' id='376060'>
<a class='timestamp' href='#376060'><time timestamp='2020-02-24T16:57:00Z'>16:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right, so the knowledge is in the wallet, not the spkmans
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565220' id='376061'>
<a class='timestamp' href='#376061'><time timestamp='2020-02-24T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
either way my point is that we should change it <b>*now*</b> before we&#x27;re stuck with behavior again
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565280' id='376062'>
<a class='timestamp' href='#376062'><time timestamp='2020-02-24T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
legacy spkm has to keep old behavior
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565280' id='376063'>
<a class='timestamp' href='#376063'><time timestamp='2020-02-24T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
anything newer should do something better imo
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565280' id='376064'>
<a class='timestamp' href='#376064'><time timestamp='2020-02-24T17:28:00Z'>17:28</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
well, any wallet that employs a non-legacy spkm*
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565340' id='376065'>
<a class='timestamp' href='#376065'><time timestamp='2020-02-24T17:29:00Z'>17:29</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
[14:40:54] &lt;instagibbs&gt; achow101, descriptor wallet PR is a <b>*great*</b> place to redefine &quot;IsChange&quot; to be something much more meaningful than &quot;address isn&#x27;t in address book&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565340' id='376066'>
<a class='timestamp' href='#376066'><time timestamp='2020-02-24T17:29:00Z'>17:29</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
we&#x27;ver already violated this
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565400' id='376067'>
<a class='timestamp' href='#376067'><time timestamp='2020-02-24T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
see #18192
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565400' id='376068'>
<a class='timestamp' href='#376068'><time timestamp='2020-02-24T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18192" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18192</a> | Bugfix: Wallet: Safely deal with change in the address book by luke-jr · Pull Request #18192 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565400' id='376069'>
<a class='timestamp' href='#376069'><time timestamp='2020-02-24T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
Ok, doesn&#x27;t change my point :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565400' id='376070'>
<a class='timestamp' href='#376070'><time timestamp='2020-02-24T17:30:00Z'>17:30</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
instagibbs: we can and should fix it for existing wallets ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565460' id='376071'>
<a class='timestamp' href='#376071'><time timestamp='2020-02-24T17:31:00Z'>17:31</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
opt-in damage :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565460' id='376072'>
<a class='timestamp' href='#376072'><time timestamp='2020-02-24T17:31:00Z'>17:31</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
according to your PR at least
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565520' id='376073'>
<a class='timestamp' href='#376073'><time timestamp='2020-02-24T17:32:00Z'>17:32</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
instagibbs: that&#x27;s why I rename anything that could be misused
<br>
</div>

<div class='talk op-msg' data-timestamp='1582565520' id='376074'>
<a class='timestamp' href='#376074'><time timestamp='2020-02-24T17:32:00Z'>17:32</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
any IsChange is inherently opt-in
<br>
</div>

<div class='talk op-msg' data-timestamp='1582566120' id='376075'>
<a class='timestamp' href='#376075'><time timestamp='2020-02-24T17:42:00Z'>17:42</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
achow101, only edge cases i can think of is if a particular script is for some reason in both an internal and external spkm in the same wallet(though that&#x27;s pretty dumb to do)
<br>
</div>

<div class='talk op-msg' data-timestamp='1582566300' id='376076'>
<a class='timestamp' href='#376076'><time timestamp='2020-02-24T17:45:00Z'>17:45</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
otherwise yeah, just add a conditional. I wanted to do that previously but hadn&#x27;t the opportunity 
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567140' id='376077'>
<a class='timestamp' href='#376077'><time timestamp='2020-02-24T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
luke-jr: &quot;don&#x27;t we want such cases to call an external signer and behave as normally?&quot; - not sure what you mean there? (#18201)
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567140' id='376078'>
<a class='timestamp' href='#376078'><time timestamp='2020-02-24T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18201" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18201</a> | rpc: sendmany and sendtoaddress return PSBT for wallets without private keys by Sjors · Pull Request #18201 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567260' id='376079'>
<a class='timestamp' href='#376079'><time timestamp='2020-02-24T18:01:00Z'>18:01</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
I have a ExternalSignerScriptPubKeyManager subclass of (DescriptorScriptPubManager) which overrides FillPSBT to call an external signer.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567320' id='376080'>
<a class='timestamp' href='#376080'><time timestamp='2020-02-24T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Which means that CWallet&#x27;s FillBSBT will return a complete PSBT in that case.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567320' id='376081'>
<a class='timestamp' href='#376081'><time timestamp='2020-02-24T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Whereas with a legacy watch-only wallet it always returns an incomplete one.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567440' id='376082'>
<a class='timestamp' href='#376082'><time timestamp='2020-02-24T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
provoostenator: I see. Then the problem is that the return signature changes based on the wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567440' id='376083'>
<a class='timestamp' href='#376083'><time timestamp='2020-02-24T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
and potentially based on whether someone forgot to pass -signer or whatever we end up with
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567440' id='376084'>
<a class='timestamp' href='#376084'><time timestamp='2020-02-24T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
That&#x27;s the same pattern we have with bumpfee
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567440' id='376085'>
<a class='timestamp' href='#376085'><time timestamp='2020-02-24T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
No, ExternalSigner wallets have a flag
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567440' id='376086'>
<a class='timestamp' href='#376086'><time timestamp='2020-02-24T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
bumpfee returns an Object IIRC?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567500' id='376087'>
<a class='timestamp' href='#376087'><time timestamp='2020-02-24T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
with different keys in this case
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567500' id='376088'>
<a class='timestamp' href='#376088'><time timestamp='2020-02-24T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Which causes a throw / exception when -signer isn&#x27;t set
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567500' id='376089'>
<a class='timestamp' href='#376089'><time timestamp='2020-02-24T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sendmany on the other hand returns a string txid, which callers may very well ignore (while checking the return status)
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567560' id='376090'>
<a class='timestamp' href='#376090'><time timestamp='2020-02-24T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Ah yes, bumpfee always returns an object, but I think I&#x27;ve this pattern in other places.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567740' id='376091'>
<a class='timestamp' href='#376091'><time timestamp='2020-02-24T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
sendmany currently just fails if you use it on a watch-only wallet, which all ExternalDescriptor wallets are
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567740' id='376092'>
<a class='timestamp' href='#376092'><time timestamp='2020-02-24T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Perhaps it makes more sense to always return an object for watch-only wallets?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567740' id='376093'>
<a class='timestamp' href='#376093'><time timestamp='2020-02-24T18:09:00Z'>18:09</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I&#x27;m thinking more like having an input flag passed for the PSBT mode
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567860' id='376094'>
<a class='timestamp' href='#376094'><time timestamp='2020-02-24T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
I hate extra params though.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567860' id='376095'>
<a class='timestamp' href='#376095'><time timestamp='2020-02-24T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
provoostenator: but what if you want to use it with a normal wallet? ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567860' id='376096'>
<a class='timestamp' href='#376096'><time timestamp='2020-02-24T18:11:00Z'>18:11</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
eg, prepare a PSBT, manipulate it, resign it, then send it
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567920' id='376097'>
<a class='timestamp' href='#376097'><time timestamp='2020-02-24T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
You mean a legacy wallet with imported public keys?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567920' id='376098'>
<a class='timestamp' href='#376098'><time timestamp='2020-02-24T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
But not watch-only?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567920' id='376099'>
<a class='timestamp' href='#376099'><time timestamp='2020-02-24T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567920' id='376100'>
<a class='timestamp' href='#376100'><time timestamp='2020-02-24T18:12:00Z'>18:12</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Because there&#x27;s no point in producing a PSBT if you have all the keys
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567980' id='376101'>
<a class='timestamp' href='#376101'><time timestamp='2020-02-24T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I just gave an example
<br>
</div>

<div class='talk op-msg' data-timestamp='1582567980' id='376102'>
<a class='timestamp' href='#376102'><time timestamp='2020-02-24T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
I think the general idea is to encourage users to not mix private key and watch-only wallets.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568040' id='376103'>
<a class='timestamp' href='#376103'><time timestamp='2020-02-24T18:14:00Z'>18:14</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
So in that case either a wallet is watch-only, and returns an object, or it&#x27;s not, and returns a string.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568100' id='376104'>
<a class='timestamp' href='#376104'><time timestamp='2020-02-24T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Alternatively, maybe easier, we always return an object for non-legacy, and for watch-only legacy.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568100' id='376105'>
<a class='timestamp' href='#376105'><time timestamp='2020-02-24T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
having two behaviours like that, is going to confuse callers
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568160' id='376106'>
<a class='timestamp' href='#376106'><time timestamp='2020-02-24T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
and my example is where you would want a PSBT for a non-watch-only wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568160' id='376107'>
<a class='timestamp' href='#376107'><time timestamp='2020-02-24T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
to modify it before sending
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568280' id='376108'>
<a class='timestamp' href='#376108'><time timestamp='2020-02-24T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
remember RPC isn&#x27;t for bitcoin-cli users; it&#x27;s for scripts, apps, and such
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568280' id='376109'>
<a class='timestamp' href='#376109'><time timestamp='2020-02-24T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
It&#x27;s <u>_also_</u> for bitcoin-cli users
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568280' id='376110'>
<a class='timestamp' href='#376110'><time timestamp='2020-02-24T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
in this context, it doesn&#x27;t matter
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568280' id='376111'>
<a class='timestamp' href='#376111'><time timestamp='2020-02-24T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
point is, have a call signature that changes based on wallet is going to screw up programs
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568340' id='376112'>
<a class='timestamp' href='#376112'><time timestamp='2020-02-24T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
also, I don&#x27;t mean throwign it on params - I mean include it in options :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568340' id='376113'>
<a class='timestamp' href='#376113'><time timestamp='2020-02-24T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
&quot;options&quot;:{&quot;psbt&quot;: true}
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568400' id='376114'>
<a class='timestamp' href='#376114'><time timestamp='2020-02-24T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
probably not, as the failures would occur in situations where the call would fail anyway
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568400' id='376115'>
<a class='timestamp' href='#376115'><time timestamp='2020-02-24T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Neither sendmany nor sendtoaddress has an options dictionary
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568400' id='376116'>
<a class='timestamp' href='#376116'><time timestamp='2020-02-24T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i do the risk for confusion
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568400' id='376117'>
<a class='timestamp' href='#376117'><time timestamp='2020-02-24T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
*see
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568400' id='376118'>
<a class='timestamp' href='#376118'><time timestamp='2020-02-24T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-14'> Randolf</span>&gt;
Breaking backward compatibility in an API is a very bad idea.  Better not to change the call signature.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568400' id='376119'>
<a class='timestamp' href='#376119'><time timestamp='2020-02-24T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s not breaking compatibility
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568400' id='376120'>
<a class='timestamp' href='#376120'><time timestamp='2020-02-24T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568460' id='376121'>
<a class='timestamp' href='#376121'><time timestamp='2020-02-24T18:21:00Z'>18:21</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
My thinking was to deprecate the non-object response, but without breaking existing automation, which currently only works with private key wallets
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568460' id='376122'>
<a class='timestamp' href='#376122'><time timestamp='2020-02-24T18:21:00Z'>18:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s extending those RPCs to situations where they couldn&#x27;t be used before
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568460' id='376123'>
<a class='timestamp' href='#376123'><time timestamp='2020-02-24T18:21:00Z'>18:21</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Exactly
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568520' id='376124'>
<a class='timestamp' href='#376124'><time timestamp='2020-02-24T18:22:00Z'>18:22</time></a>
&lt;<span class='nick nick-14'> Randolf</span>&gt;
Adding options is fine as long as those options aren&#x27;t made mandatory.  Otherwise I would expect it to &quot;screw up programs&quot; as luke-jr pointed out.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568580' id='376125'>
<a class='timestamp' href='#376125'><time timestamp='2020-02-24T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
provoostenator: add one
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568580' id='376126'>
<a class='timestamp' href='#376126'><time timestamp='2020-02-24T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: if you call sendtoaddress(…) right now and it doesn&#x27;t throw an error, you assume it worked
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568580' id='376127'>
<a class='timestamp' href='#376127'><time timestamp='2020-02-24T18:23:00Z'>18:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: if it&#x27;s returning a PSBT, then it didn&#x27;t do the job usually expected
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568640' id='376128'>
<a class='timestamp' href='#376128'><time timestamp='2020-02-24T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ie, it didn&#x27;t broadcast
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568640' id='376129'>
<a class='timestamp' href='#376129'><time timestamp='2020-02-24T18:24:00Z'>18:24</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
luke-jr: that would be a bug, it should neverreturn a PSBT for legacy wallets with private keys enabled.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568700' id='376130'>
<a class='timestamp' href='#376130'><time timestamp='2020-02-24T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
provoostenator: the caller does not know the type of wallet loaded
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568760' id='376131'>
<a class='timestamp' href='#376131'><time timestamp='2020-02-24T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
if I write a program expecting a watch-only wallet, it shouldn&#x27;t break if I run it with a normal wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568760' id='376132'>
<a class='timestamp' href='#376132'><time timestamp='2020-02-24T18:26:00Z'>18:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
(nor require extra handling to detect the different situation)
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568820' id='376133'>
<a class='timestamp' href='#376133'><time timestamp='2020-02-24T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Why not? Having private keys in a wallet is very different from not having them.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568820' id='376134'>
<a class='timestamp' href='#376134'><time timestamp='2020-02-24T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
having keys is a strict superset of not having them
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568880' id='376135'>
<a class='timestamp' href='#376135'><time timestamp='2020-02-24T18:28:00Z'>18:28</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
also, in this case, you would broadcast a transaction intended to just be a PSBT template made!
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568940' id='376136'>
<a class='timestamp' href='#376136'><time timestamp='2020-02-24T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i have a weak preference for doing this in a separate RPC too
<br>
</div>

<div class='talk op-msg' data-timestamp='1582568940' id='376137'>
<a class='timestamp' href='#376137'><time timestamp='2020-02-24T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the places you&#x27;d use this seem to be distinct from the sending RPCs
<br>
</div>

<div class='talk op-msg' data-timestamp='1582569000' id='376138'>
<a class='timestamp' href='#376138'><time timestamp='2020-02-24T18:30:00Z'>18:30</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
actually, doesn&#x27;t fundrawtransaction kind of already do it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582569000' id='376139'>
<a class='timestamp' href='#376139'><time timestamp='2020-02-24T18:30:00Z'>18:30</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
I could revive #16378
<br>
</div>

<div class='talk op-msg' data-timestamp='1582569000' id='376140'>
<a class='timestamp' href='#376140'><time timestamp='2020-02-24T18:30:00Z'>18:30</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/16378" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/16378</a> | [WIP] The ultimate send RPC by Sjors · Pull Request #16378 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1582569060' id='376141'>
<a class='timestamp' href='#376141'><time timestamp='2020-02-24T18:31:00Z'>18:31</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
provoostenator: I&#x27;d prefer that (if there are actual new use cases)
<br>
</div>

<div class='talk op-msg' data-timestamp='1582569060' id='376142'>
<a class='timestamp' href='#376142'><time timestamp='2020-02-24T18:31:00Z'>18:31</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
(which I closed in favor of this approach  :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1582569120' id='376143'>
<a class='timestamp' href='#376143'><time timestamp='2020-02-24T18:32:00Z'>18:32</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Should I still make a PR for the first commit that refactors sendmany &amp; sendtoaddress?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582569120' id='376144'>
<a class='timestamp' href='#376144'><time timestamp='2020-02-24T18:32:00Z'>18:32</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
Not useful on its own though.
<br>
</div>

<div class='talk op-msg' data-timestamp='1582569240' id='376145'>
<a class='timestamp' href='#376145'><time timestamp='2020-02-24T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] Sjors closed pull request #18201: rpc: sendmany and sendtoaddress return PSBT for wallets without private keys (master...2020/02/sendmany_sendtoaddress) <a href="https://github.com/bitcoin/bitcoin/pull/18201" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18201</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1582571040' id='376146'>
<a class='timestamp' href='#376146'><time timestamp='2020-02-24T19:04:00Z'>19:04</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
provoostenator, yes please at least for separate consideration
<br>
</div>

<div class='talk op-msg' data-timestamp='1582571580' id='376147'>
<a class='timestamp' href='#376147'><time timestamp='2020-02-24T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] Sjors opened pull request #18202: refactor: consolidate sendmany and sendtoaddress code  (master...2020/02/refactor_sendmany_sendtoaddress) <a href="https://github.com/bitcoin/bitcoin/pull/18202" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18202</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1582571580' id='376148'>
<a class='timestamp' href='#376148'><time timestamp='2020-02-24T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-15'> provoostenator</span>&gt;
instagibbs: done
<br>
</div>

<div class='talk op-msg' data-timestamp='1582573680' id='376149'>
<a class='timestamp' href='#376149'><time timestamp='2020-02-24T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
instagibbs: I prefer luke-jr&#x27;s IsChange fix rather than figuring out change based on scriptPubKeyMan
<br>
</div>

<div class='talk op-msg' data-timestamp='1582573680' id='376150'>
<a class='timestamp' href='#376150'><time timestamp='2020-02-24T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
if solely based on the spkman, we would lose changeness when an internal spkman is changed
<br>
</div>

<div class='talk op-msg' data-timestamp='1582577760' id='376151'>
<a class='timestamp' href='#376151'><time timestamp='2020-02-24T20:56:00Z'>20:56</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
:/ 
<br>
</div>

<div class='talk op-msg' data-timestamp='1582579380' id='376152'>
<a class='timestamp' href='#376152'><time timestamp='2020-02-24T21:23:00Z'>21:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] Sjors reopened pull request #16378: [WIP] The ultimate send RPC (master...2019/07/send) <a href="https://github.com/bitcoin/bitcoin/pull/16378" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16378</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1582579860' id='376153'>
<a class='timestamp' href='#376153'><time timestamp='2020-02-24T21:31:00Z'>21:31</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
achow101, one large annoyance on today&#x27;s wallet code is that recovering a wallet will mark every address you didn&#x27;t &quot;getnewaddress&quot; as change, at least until you &quot;getnewaddress&quot; until you hit that particular address
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580040' id='376154'>
<a class='timestamp' href='#376154'><time timestamp='2020-02-24T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
if you don&#x27;t want to get confused about changeness, then don&#x27;t blow away spkms I guess?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580040' id='376155'>
<a class='timestamp' href='#376155'><time timestamp='2020-02-24T21:34:00Z'>21:34</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
you lose the changeness because they get removed from m_internal_spk_managers
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580100' id='376156'>
<a class='timestamp' href='#376156'><time timestamp='2020-02-24T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
because they&#x27;re no longer active
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580100' id='376157'>
<a class='timestamp' href='#376157'><time timestamp='2020-02-24T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: hmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580100' id='376158'>
<a class='timestamp' href='#376158'><time timestamp='2020-02-24T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
hmm let&#x27;s take this offline
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580100' id='376159'>
<a class='timestamp' href='#376159'><time timestamp='2020-02-24T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
or not, if sipa is reading
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580100' id='376160'>
<a class='timestamp' href='#376160'><time timestamp='2020-02-24T21:35:00Z'>21:35</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
when do they become inactive?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580160' id='376161'>
<a class='timestamp' href='#376161'><time timestamp='2020-02-24T21:36:00Z'>21:36</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
if you were to import a new descriptor for change
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580160' id='376162'>
<a class='timestamp' href='#376162'><time timestamp='2020-02-24T21:36:00Z'>21:36</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
whatever was there originally gets inactivatated
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580160' id='376163'>
<a class='timestamp' href='#376163'><time timestamp='2020-02-24T21:36:00Z'>21:36</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
oh
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580220' id='376164'>
<a class='timestamp' href='#376164'><time timestamp='2020-02-24T21:37:00Z'>21:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it shouldn&#x27;t lose change-info when you import a new active one?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580220' id='376165'>
<a class='timestamp' href='#376165'><time timestamp='2020-02-24T21:37:00Z'>21:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(would be the ideal behavior, i mean)
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580280' id='376166'>
<a class='timestamp' href='#376166'><time timestamp='2020-02-24T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
So you have 6 spkm, how does it decide which of the 3 changey ones to deactivate?
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580280' id='376167'>
<a class='timestamp' href='#376167'><time timestamp='2020-02-24T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the one that&#x27;s occupying that address type spot
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580280' id='376168'>
<a class='timestamp' href='#376168'><time timestamp='2020-02-24T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
if you imported a new change p2sh-segwit descriptor, the existing change p2sh-segwit descriptor becomes inactive
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580280' id='376169'>
<a class='timestamp' href='#376169'><time timestamp='2020-02-24T21:38:00Z'>21:38</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
maybe IsChange should pay attention to the derivation of HD keys
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580340' id='376170'>
<a class='timestamp' href='#376170'><time timestamp='2020-02-24T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
luke-jr: I&#x27;d rather not
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580340' id='376171'>
<a class='timestamp' href='#376171'><time timestamp='2020-02-24T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
luke-jr, that was my original attempt years ago, with current API you can have whatever derivation be change when imported at least
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580340' id='376172'>
<a class='timestamp' href='#376172'><time timestamp='2020-02-24T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: i feel that the changeness in a descriptor world should be metadata associated with the spkman
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580340' id='376173'>
<a class='timestamp' href='#376173'><time timestamp='2020-02-24T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
independent of what it&#x27;s active for
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580340' id='376174'>
<a class='timestamp' href='#376174'><time timestamp='2020-02-24T21:39:00Z'>21:39</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
sipa, mhmm
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580400' id='376175'>
<a class='timestamp' href='#376175'><time timestamp='2020-02-24T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I guess another m_internal_change_spkmans set could be added where you put all the inactive change spkmans
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580400' id='376176'>
<a class='timestamp' href='#376176'><time timestamp='2020-02-24T21:40:00Z'>21:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there may be other metadata too at some point (say: which hw device to use for signing)
<br>
</div>

<div class='talk op-msg' data-timestamp='1582580940' id='376177'>
<a class='timestamp' href='#376177'><time timestamp='2020-02-24T21:49:00Z'>21:49</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ACK
<br>
</div>

<div class='talk op-msg' data-timestamp='1582587300' id='376178'>
<a class='timestamp' href='#376178'><time timestamp='2020-02-24T23:35:00Z'>23:35</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
why doesn&#x27;t C++ have a QFlags equivalent yet? -.-
<br>
</div>

<div class='talk op-msg' data-timestamp='1582588080' id='376179'>
<a class='timestamp' href='#376179'><time timestamp='2020-02-24T23:48:00Z'>23:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
std::bitset comes close
<br>
</div>

<div class='talk op-msg' data-timestamp='1582588080' id='376180'>
<a class='timestamp' href='#376180'><time timestamp='2020-02-24T23:48:00Z'>23:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
combined with an enum for naming the bits
<br>
</div>

<div class='talk op-msg' data-timestamp='1582588320' id='376181'>
<a class='timestamp' href='#376181'><time timestamp='2020-02-24T23:52:00Z'>23:52</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I mean something compatible with class enums and including proper type checking
<br>
</div>

</div>
</section>

</body>
</html>
