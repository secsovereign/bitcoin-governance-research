<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-10-30
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-10-30' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:23 UTC</pre>
<pre><a href="/bitcoin-core-dev/2017-09-30">&lt;</a><span class='header'>   October 2017   </span><a href="/bitcoin-core-dev/2017-11-30">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2017-10-01">1</a>  <a class="" href="/bitcoin-core-dev/2017-10-02">2</a>  <a class="" href="/bitcoin-core-dev/2017-10-03">3</a>  <a class="" href="/bitcoin-core-dev/2017-10-04">4</a>  <a class="" href="/bitcoin-core-dev/2017-10-05">5</a>  <a class="" href="/bitcoin-core-dev/2017-10-06">6</a>  <a class="" href="/bitcoin-core-dev/2017-10-07">7</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-10-08">8</a>  <a class="" href="/bitcoin-core-dev/2017-10-09">9</a> <a class="" href="/bitcoin-core-dev/2017-10-10">10</a> <a class="" href="/bitcoin-core-dev/2017-10-11">11</a> <a class="" href="/bitcoin-core-dev/2017-10-12">12</a> <a class="" href="/bitcoin-core-dev/2017-10-13">13</a> <a class="" href="/bitcoin-core-dev/2017-10-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-10-15">15</a> <a class="" href="/bitcoin-core-dev/2017-10-16">16</a> <a class="" href="/bitcoin-core-dev/2017-10-17">17</a> <a class="" href="/bitcoin-core-dev/2017-10-18">18</a> <a class="" href="/bitcoin-core-dev/2017-10-19">19</a> <a class="" href="/bitcoin-core-dev/2017-10-20">20</a> <a class="" href="/bitcoin-core-dev/2017-10-21">21</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-10-22">22</a> <a class="" href="/bitcoin-core-dev/2017-10-23">23</a> <a class="" href="/bitcoin-core-dev/2017-10-24">24</a> <a class="" href="/bitcoin-core-dev/2017-10-25">25</a> <a class="" href="/bitcoin-core-dev/2017-10-26">26</a> <a class="" href="/bitcoin-core-dev/2017-10-27">27</a> <a class="" href="/bitcoin-core-dev/2017-10-28">28</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-10-29">29</a> <a class="current" href="/bitcoin-core-dev/2017-10-30">30</a> <a class="" href="/bitcoin-core-dev/2017-10-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1509325020' id='576950'>
<a class='timestamp' href='#576950'><time timestamp='2017-10-30T00:57:00Z'>00:57</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
cfields Could the fact that our GCC func attribute macro is missing the check for fallthrough be contributing to any issues?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333000' id='576951'>
<a class='timestamp' href='#576951'><time timestamp='2017-10-30T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
;;blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333000' id='576952'>
<a class='timestamp' href='#576952'><time timestamp='2017-10-30T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
492291
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333000' id='576953'>
<a class='timestamp' href='#576953'><time timestamp='2017-10-30T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
WOOT
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333000' id='576954'>
<a class='timestamp' href='#576954'><time timestamp='2017-10-30T03:10:00Z'>03:10</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
first pruned up up
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333120' id='576955'>
<a class='timestamp' href='#576955'><time timestamp='2017-10-30T03:12:00Z'>03:12</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
looks like a pruned node of 550 MB took me from 2017-10-29 21:37:55 to 2017-10-30 03:10:21 to sync.
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333240' id='576956'>
<a class='timestamp' href='#576956'><time timestamp='2017-10-30T03:14:00Z'>03:14</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
\o/     
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333240' id='576957'>
<a class='timestamp' href='#576957'><time timestamp='2017-10-30T03:14:00Z'>03:14</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
End pruned size, 3.6 GB
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333300' id='576958'>
<a class='timestamp' href='#576958'><time timestamp='2017-10-30T03:15:00Z'>03:15</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
508Mblocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333300' id='576959'>
<a class='timestamp' href='#576959'><time timestamp='2017-10-30T03:15:00Z'>03:15</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
3.0Gchainstate
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333300' id='576960'>
<a class='timestamp' href='#576960'><time timestamp='2017-10-30T03:15:00Z'>03:15</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
115Mdebug.log
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333360' id='576961'>
<a class='timestamp' href='#576961'><time timestamp='2017-10-30T03:16:00Z'>03:16</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
cluelessperson: if the log is not sensitive it might be useful for <a href="https://github.com/bitcoin/bitcoin/pull/11359" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11359</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333360' id='576962'>
<a class='timestamp' href='#576962'><time timestamp='2017-10-30T03:16:00Z'>03:16</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
this PR does not seem popular (sdaftuar&#x27;s comments on flushes will likely lead to a better solution)
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333420' id='576963'>
<a class='timestamp' href='#576963'><time timestamp='2017-10-30T03:17:00Z'>03:17</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
but from the log file it should be possible to guess at time wasted :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333660' id='576964'>
<a class='timestamp' href='#576964'><time timestamp='2017-10-30T03:21:00Z'>03:21</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
esotericnonsense: These are just tests pointed at the localhost node, on a PCISSD, so yeah, I can share
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333660' id='576965'>
<a class='timestamp' href='#576965'><time timestamp='2017-10-30T03:21:00Z'>03:21</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
esotericnonsense: you want me to just attach the log file to that link?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333720' id='576966'>
<a class='timestamp' href='#576966'><time timestamp='2017-10-30T03:22:00Z'>03:22</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
cluelessperson: re your chat in #bitcoin if you actually want to and have time it would be nice to see a benchmark of non-pruning sync time against the same target (e.g. without network node variance)
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333720' id='576967'>
<a class='timestamp' href='#576967'><time timestamp='2017-10-30T03:22:00Z'>03:22</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
sure maybe gzip it or something though :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333780' id='576968'>
<a class='timestamp' href='#576968'><time timestamp='2017-10-30T03:23:00Z'>03:23</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
esotericnonsense: to summarize agreed point, you&#x27;d like me to resync under the same conditions, without pruning?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333780' id='576969'>
<a class='timestamp' href='#576969'><time timestamp='2017-10-30T03:23:00Z'>03:23</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
esotericnonsense: allowing you to view pruned and non-pruned results?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333780' id='576970'>
<a class='timestamp' href='#576970'><time timestamp='2017-10-30T03:23:00Z'>03:23</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
yeah. it&#x27;s not that important, I already know the results, i&#x27;m just interested in precisely how much fastr it ends up being
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333780' id='576971'>
<a class='timestamp' href='#576971'><time timestamp='2017-10-30T03:23:00Z'>03:23</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
faster*
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333840' id='576972'>
<a class='timestamp' href='#576972'><time timestamp='2017-10-30T03:24:00Z'>03:24</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
esotericnonsense: how much faster pruning ends up being? or not pruning ends up being than pruned?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333900' id='576973'>
<a class='timestamp' href='#576973'><time timestamp='2017-10-30T03:25:00Z'>03:25</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
and GO!
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333900' id='576974'>
<a class='timestamp' href='#576974'><time timestamp='2017-10-30T03:25:00Z'>03:25</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
it&#x27;s running
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333900' id='576975'>
<a class='timestamp' href='#576975'><time timestamp='2017-10-30T03:25:00Z'>03:25</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
cluelessperson: not pruning should be faster because the utxo cache gets flushed completely on every prune event
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333900' id='576976'>
<a class='timestamp' href='#576976'><time timestamp='2017-10-30T03:25:00Z'>03:25</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
which is every ~128mb
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333900' id='576977'>
<a class='timestamp' href='#576977'><time timestamp='2017-10-30T03:25:00Z'>03:25</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
ah     
<br>
</div>

<div class='talk op-msg' data-timestamp='1509333960' id='576978'>
<a class='timestamp' href='#576978'><time timestamp='2017-10-30T03:26:00Z'>03:26</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
esotericnonsense: for the record, these are my settings <a href="https://hastebin.com/raw/povagogajo" class="link" target="_blank">https://hastebin.com/raw/povagogajo</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1509334020' id='576979'>
<a class='timestamp' href='#576979'><time timestamp='2017-10-30T03:27:00Z'>03:27</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
esotericnonsense: I have the dbcache set to 10000
<br>
</div>

<div class='talk op-msg' data-timestamp='1509334200' id='576980'>
<a class='timestamp' href='#576980'><time timestamp='2017-10-30T03:30:00Z'>03:30</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
esotericnonsense: it looks faster
<br>
</div>

<div class='talk op-msg' data-timestamp='1509334260' id='576981'>
<a class='timestamp' href='#576981'><time timestamp='2017-10-30T03:31:00Z'>03:31</time></a>
&lt;<span class='nick nick-7'> esotericnonsense</span>&gt;
it won&#x27;t make much difference until you get a sizeable dbcache but yeah it is faster. just wondering whether it&#x27;s actually say half the time. i killed it at block 200K because I only have one ssd and need the space :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1509334320' id='576982'>
<a class='timestamp' href='#576982'><time timestamp='2017-10-30T03:32:00Z'>03:32</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
esotericnonsense: it&#x27;s already at 10%
<br>
</div>

<div class='talk op-msg' data-timestamp='1509338100' id='576983'>
<a class='timestamp' href='#576983'><time timestamp='2017-10-30T04:35:00Z'>04:35</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
esotericnonsense: well, unfortunately, I ran out of space
<br>
</div>

<div class='talk op-msg' data-timestamp='1509338100' id='576984'>
<a class='timestamp' href='#576984'><time timestamp='2017-10-30T04:35:00Z'>04:35</time></a>
&lt;<span class='nick nick-6'> cluelessperson</span>&gt;
esotericnonsense: but it seems WAY faster
<br>
</div>

<div class='talk op-msg' data-timestamp='1509355980' id='576985'>
<a class='timestamp' href='#576985'><time timestamp='2017-10-30T09:33:00Z'>09:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #11577: Fix warnings (-Wsign-compare) when building with DEBUG_ADDRMAN (master...DEBUG_ADDRMAN-warnings) <a href="https://github.com/bitcoin/bitcoin/pull/11577" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11577</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1509370560' id='576986'>
<a class='timestamp' href='#576986'><time timestamp='2017-10-30T13:36:00Z'>13:36</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #11578: net: Add missing lock in ProcessHeadersMessage(...) (master...ProcessHeadersMessage) <a href="https://github.com/bitcoin/bitcoin/pull/11578" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11578</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1509371880' id='576987'>
<a class='timestamp' href='#576987'><time timestamp='2017-10-30T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] gladosconn opened pull request #11579: Fix int uint64_t comparison warning. (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/11579" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11579</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1509373860' id='576988'>
<a class='timestamp' href='#576988'><time timestamp='2017-10-30T14:31:00Z'>14:31</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] gladosconn closed pull request #11579: Fix int uint64_t comparison warning. (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/11579" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11579</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1509374700' id='576989'>
<a class='timestamp' href='#576989'><time timestamp='2017-10-30T14:45:00Z'>14:45</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] TheBlueMatt opened pull request #11580: Do not send (potentially) invalid headers in response to getheaders (master...2017-10-getheaders-valid-only) <a href="https://github.com/bitcoin/bitcoin/pull/11580" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11580</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375360' id='576990'>
<a class='timestamp' href='#576990'><time timestamp='2017-10-30T14:56:00Z'>14:56</time></a>
&lt;<span class='nick nick-8'> wxss</span>&gt;
sipa mentioned undocumented -stopatheight here yesterday. Is the opposite possible, to restart downloading at/from a specified block height?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375420' id='576991'>
<a class='timestamp' href='#576991'><time timestamp='2017-10-30T14:57:00Z'>14:57</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
BlueMatt: mapBlockIndex can contain &quot;invalid&quot; blocks (where IsValid(BLOCK_VALID_SCRIPTS) is false)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375660' id='576992'>
<a class='timestamp' href='#576992'><time timestamp='2017-10-30T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
promag: yes, absolutely
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375660' id='576993'>
<a class='timestamp' href='#576993'><time timestamp='2017-10-30T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as blocks are only validated after storing them
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375660' id='576994'>
<a class='timestamp' href='#576994'><time timestamp='2017-10-30T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-13'> jimpo</span>&gt;
promag: They wouldn&#x27;t necessarily be &quot;invalid&quot;, just not known to be valid.
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375720' id='576995'>
<a class='timestamp' href='#576995'><time timestamp='2017-10-30T15:02:00Z'>15:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
mapBlockIndex only guarantees that the <b>*headers*</b> are valid
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375720' id='576996'>
<a class='timestamp' href='#576996'><time timestamp='2017-10-30T15:02:00Z'>15:02</time></a>
&lt;<span class='nick nick-13'> jimpo</span>&gt;
Though I think the index includes invalid blocks as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375720' id='576997'>
<a class='timestamp' href='#576997'><time timestamp='2017-10-30T15:02:00Z'>15:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the blocks themselves are downloaded afterwards, and may turn out to be invalid
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375720' id='576998'>
<a class='timestamp' href='#576998'><time timestamp='2017-10-30T15:02:00Z'>15:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jimpo: yes, we store invalid blocks in the index
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375780' id='576999'>
<a class='timestamp' href='#576999'><time timestamp='2017-10-30T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
and once invalid it is kept in the index?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375780' id='577000'>
<a class='timestamp' href='#577000'><time timestamp='2017-10-30T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375780' id='577001'>
<a class='timestamp' href='#577001'><time timestamp='2017-10-30T15:03:00Z'>15:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the header will be marked as invalid even
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375840' id='577002'>
<a class='timestamp' href='#577002'><time timestamp='2017-10-30T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
so the following can be simplified:
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375840' id='577003'>
<a class='timestamp' href='#577003'><time timestamp='2017-10-30T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
if (punish_duplicate_invalid &amp;&amp; mapBlockIndex.find(first_invalid_header.GetHash()) != mapBlockIndex.end())
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375840' id='577004'>
<a class='timestamp' href='#577004'><time timestamp='2017-10-30T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
because if the header is invalid then it is not in the block index right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509375960' id='577005'>
<a class='timestamp' href='#577005'><time timestamp='2017-10-30T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
since above you said &quot;mapBlockIndex only guarantees that the <b>*headers*</b> are valid&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1509376020' id='577006'>
<a class='timestamp' href='#577006'><time timestamp='2017-10-30T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hmm, is there a good overview of what is needed to add -usehd=0 back in?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509376080' id='577007'>
<a class='timestamp' href='#577007'><time timestamp='2017-10-30T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
promag: you mean in sdaftuar&#x27;s pr?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509376080' id='577008'>
<a class='timestamp' href='#577008'><time timestamp='2017-10-30T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
basically just make sure it works without a default key, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509376080' id='577009'>
<a class='timestamp' href='#577009'><time timestamp='2017-10-30T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
promag: no, the point of that check is to see if the header was accepted (ie if it is known to be a valid header)
<br>
</div>

<div class='talk op-msg' data-timestamp='1509376500' id='577010'>
<a class='timestamp' href='#577010'><time timestamp='2017-10-30T15:15:00Z'>15:15</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
@BlueMatt please correct me if this isn&#x27;t the same: if (punish_duplicate_invalid &amp;&amp; !first_invalid_header.IsNull())
<br>
</div>

<div class='talk op-msg' data-timestamp='1509382560' id='577011'>
<a class='timestamp' href='#577011'><time timestamp='2017-10-30T16:56:00Z'>16:56</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
can someone tag #11578 for backport to 0.15.0.2?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509382560' id='577012'>
<a class='timestamp' href='#577012'><time timestamp='2017-10-30T16:56:00Z'>16:56</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/11578" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/11578</a> | net: Add missing lock in ProcessHeadersMessage(...) by practicalswift · Pull Request #11578 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1509383040' id='577013'>
<a class='timestamp' href='#577013'><time timestamp='2017-10-30T17:04:00Z'>17:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sdaftuar: done
<br>
</div>

<div class='talk op-msg' data-timestamp='1509383040' id='577014'>
<a class='timestamp' href='#577014'><time timestamp='2017-10-30T17:04:00Z'>17:04</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1509383820' id='577015'>
<a class='timestamp' href='#577015'><time timestamp='2017-10-30T17:17:00Z'>17:17</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
luke-jr: it has to work without a default key and cannot be downgraded
<br>
</div>

<div class='talk op-msg' data-timestamp='1509383880' id='577016'>
<a class='timestamp' href='#577016'><time timestamp='2017-10-30T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
promag: the first_invalid_header could be in mapBlockIndex
<br>
</div>

<div class='talk op-msg' data-timestamp='1509384060' id='577017'>
<a class='timestamp' href='#577017'><time timestamp='2017-10-30T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
promag: specifically if a block was invalid but the header was valid, the header would be in mapBlockIndex. if another peer sent us the exact same header, it would still be in mapBlockIndex and that is what that if statement is checking for
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388020' id='577018'>
<a class='timestamp' href='#577018'><time timestamp='2017-10-30T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
has travis been flaky lately?  i&#x27;m seeing a wallet.py error in one of the functional tests runs for #11560
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388020' id='577019'>
<a class='timestamp' href='#577019'><time timestamp='2017-10-30T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/11560" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/11560</a> | Connect to a new outbound peer if our tip is stale by sdaftuar · Pull Request #11560 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388140' id='577020'>
<a class='timestamp' href='#577020'><time timestamp='2017-10-30T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
badstatusline
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388140' id='577021'>
<a class='timestamp' href='#577021'><time timestamp='2017-10-30T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(line 2818)
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388140' id='577022'>
<a class='timestamp' href='#577022'><time timestamp='2017-10-30T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
yeah i don&#x27;t know what would cause that
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388200' id='577023'>
<a class='timestamp' href='#577023'><time timestamp='2017-10-30T18:30:00Z'>18:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
let&#x27;s try restarting
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388320' id='577024'>
<a class='timestamp' href='#577024'><time timestamp='2017-10-30T18:32:00Z'>18:32</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
restarted
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388440' id='577025'>
<a class='timestamp' href='#577025'><time timestamp='2017-10-30T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ryanofsky: did you actually see the test in #11531 hang?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388440' id='577026'>
<a class='timestamp' href='#577026'><time timestamp='2017-10-30T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/11531" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/11531</a> | Check that new headers are not a descendant of an invalid block (more effeciently) by TheBlueMatt · Pull Request #11531 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388440' id='577027'>
<a class='timestamp' href='#577027'><time timestamp='2017-10-30T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I can bump the timeout there
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388440' id='577028'>
<a class='timestamp' href='#577028'><time timestamp='2017-10-30T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
no     
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388500' id='577029'>
<a class='timestamp' href='#577029'><time timestamp='2017-10-30T18:35:00Z'>18:35</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
the code just seems unnecessarily complicated and probably flaky
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388560' id='577030'>
<a class='timestamp' href='#577030'><time timestamp='2017-10-30T18:36:00Z'>18:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I mean all I can do is bump the timeout there, really
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388560' id='577031'>
<a class='timestamp' href='#577031'><time timestamp='2017-10-30T18:36:00Z'>18:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I think when i go to rewrite the dos logic stuff soon it will change behavior
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388560' id='577032'>
<a class='timestamp' href='#577032'><time timestamp='2017-10-30T18:36:00Z'>18:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and no need for the test to test for it
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388740' id='577033'>
<a class='timestamp' href='#577033'><time timestamp='2017-10-30T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
can you simplify the test by skipping the ping and just waiting for the disconnect?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388800' id='577034'>
<a class='timestamp' href='#577034'><time timestamp='2017-10-30T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
no, because I believe it currently does not disconnect
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388800' id='577035'>
<a class='timestamp' href='#577035'><time timestamp='2017-10-30T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
right now it uses the ping path
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388800' id='577036'>
<a class='timestamp' href='#577036'><time timestamp='2017-10-30T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but really it should be disconnecting
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388860' id='577037'>
<a class='timestamp' href='#577037'><time timestamp='2017-10-30T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
then i don&#x27;t see what you lose by dropping the exception handler completely and updating the test when you do add a disconnect
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388860' id='577038'>
<a class='timestamp' href='#577038'><time timestamp='2017-10-30T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
because I&#x27;m probably gonna need the exception handler in like a month
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388860' id='577039'>
<a class='timestamp' href='#577039'><time timestamp='2017-10-30T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
and testing for something that bitcoind really shouldnt be doing anyway is kinda nonsense
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388920' id='577040'>
<a class='timestamp' href='#577040'><time timestamp='2017-10-30T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
how do you even know the exception handler works?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509388980' id='577041'>
<a class='timestamp' href='#577041'><time timestamp='2017-10-30T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i tested it :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1509389040' id='577042'>
<a class='timestamp' href='#577042'><time timestamp='2017-10-30T18:44:00Z'>18:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
iirc you can just change the dos points for whatever case its using to make the block invalid trivially and it&#x27;ll keep chugging along
<br>
</div>

<div class='talk op-msg' data-timestamp='1509389280' id='577043'>
<a class='timestamp' href='#577043'><time timestamp='2017-10-30T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
ok well do what you want, but if were me i would opt for not adding a potentially flaky 1-sec timeout and confusing code that doesn&#x27;t get executed
<br>
</div>

<div class='talk op-msg' data-timestamp='1509389400' id='577044'>
<a class='timestamp' href='#577044'><time timestamp='2017-10-30T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] luke-jr opened pull request #11582: wallet: Restore -usehd=0 option (master...usehd) <a href="https://github.com/bitcoin/bitcoin/pull/11582" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11582</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1509389520' id='577045'>
<a class='timestamp' href='#577045'><time timestamp='2017-10-30T18:52:00Z'>18:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i mean its not like we dont have other timeouts in the tests, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509389520' id='577046'>
<a class='timestamp' href='#577046'><time timestamp='2017-10-30T18:52:00Z'>18:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I can set it higher if that makes it much less flaky
<br>
</div>

<div class='talk op-msg' data-timestamp='1509394620' id='577047'>
<a class='timestamp' href='#577047'><time timestamp='2017-10-30T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-8'> maaku</span>&gt;
does anyone have a list of version bits currently being used, including unofficially?
<br>
</div>

<div class='talk op-msg' data-timestamp='1509394740' id='577048'>
<a class='timestamp' href='#577048'><time timestamp='2017-10-30T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
I wonder what the 0.15.x based btc1 code did to break networking during initial block download (it runs for a while, then all the peers timeout, then I get nothing but version handshake timeouts and it makes minimal further progress with 0 or 1 peers)
<br>
</div>

<div class='talk op-msg' data-timestamp='1509395820' id='577049'>
<a class='timestamp' href='#577049'><time timestamp='2017-10-30T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
ossifrage: sounds like you&#x27;re confirming something like wxss&#x27;s result-- but sadly, this is offtopic for here, as we don&#x27;t debug adversarial fork&#x27;s problems here. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1509395880' id='577050'>
<a class='timestamp' href='#577050'><time timestamp='2017-10-30T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
gmaxwell, I agree, I was just curious how it could break in such a odd way.
<br>
</div>

<div class='talk op-msg' data-timestamp='1509396900' id='577051'>
<a class='timestamp' href='#577051'><time timestamp='2017-10-30T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-8'> wxss</span>&gt;
gmaxwell, absolutely agree. My issue was different, but this is not the place for analyzing it further
<br>
</div>

<div class='talk op-msg' data-timestamp='1509404460' id='577052'>
<a class='timestamp' href='#577052'><time timestamp='2017-10-30T23:01:00Z'>23:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] TheBlueMatt opened pull request #11583: Do not make it trivial for inbound peers to generate log entries (master...2017-10-no-net-log) <a href="https://github.com/bitcoin/bitcoin/pull/11583" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/11583</a>
<br>
</div>

</div>
</section>

</body>
</html>
