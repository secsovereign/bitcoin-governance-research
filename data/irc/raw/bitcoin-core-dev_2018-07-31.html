<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2018-07-31
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2018-07-31' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:21 UTC</pre>
<pre><a href="/bitcoin-core-dev/2018-06-30">&lt;</a><span class='header'>    July 2018     </span><a href="/bitcoin-core-dev/2018-08-31">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2018-07-01">1</a>  <a class="" href="/bitcoin-core-dev/2018-07-02">2</a>  <a class="" href="/bitcoin-core-dev/2018-07-03">3</a>  <a class="" href="/bitcoin-core-dev/2018-07-04">4</a>  <a class="" href="/bitcoin-core-dev/2018-07-05">5</a>  <a class="" href="/bitcoin-core-dev/2018-07-06">6</a>  <a class="" href="/bitcoin-core-dev/2018-07-07">7</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2018-07-08">8</a>  <a class="" href="/bitcoin-core-dev/2018-07-09">9</a> <a class="" href="/bitcoin-core-dev/2018-07-10">10</a> <a class="" href="/bitcoin-core-dev/2018-07-11">11</a> <a class="" href="/bitcoin-core-dev/2018-07-12">12</a> <a class="" href="/bitcoin-core-dev/2018-07-13">13</a> <a class="" href="/bitcoin-core-dev/2018-07-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-07-15">15</a> 16 <a class="" href="/bitcoin-core-dev/2018-07-17">17</a> <a class="" href="/bitcoin-core-dev/2018-07-18">18</a> <a class="" href="/bitcoin-core-dev/2018-07-19">19</a> <a class="" href="/bitcoin-core-dev/2018-07-20">20</a> <a class="" href="/bitcoin-core-dev/2018-07-21">21</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-07-22">22</a> <a class="" href="/bitcoin-core-dev/2018-07-23">23</a> <a class="" href="/bitcoin-core-dev/2018-07-24">24</a> <a class="" href="/bitcoin-core-dev/2018-07-25">25</a> <a class="" href="/bitcoin-core-dev/2018-07-26">26</a> <a class="" href="/bitcoin-core-dev/2018-07-27">27</a> <a class="" href="/bitcoin-core-dev/2018-07-28">28</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-07-29">29</a> <a class="" href="/bitcoin-core-dev/2018-07-30">30</a> <a class="current" href="/bitcoin-core-dev/2018-07-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1533016200' id='622873'>
<a class='timestamp' href='#622873'><time timestamp='2018-07-31T05:50:00Z'>05:50</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] practicalswift opened pull request #13815: build: Add linter to make sure the return value of Parse[...](...) is checked (master...check-return-values-from-parse) <a href="https://github.com/bitcoin/bitcoin/pull/13815" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13815</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533017580' id='622874'>
<a class='timestamp' href='#622874'><time timestamp='2018-07-31T06:13:00Z'>06:13</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
So confused. Why would the `allowhighfees` argument refuse to become an integer despite client.cpp listing it as &#x27;to be converted&#x27;? self.nodes[2].sendrawtransaction(hexstring=rawTxSigned[&#x27;hex&#x27;], allowhighfees=Decimal(&quot;0.00007000&quot;))
<br>
</div>

<div class='talk op-msg' data-timestamp='1533017640' id='622875'>
<a class='timestamp' href='#622875'><time timestamp='2018-07-31T06:14:00Z'>06:14</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Actually, wrong line, it was this one: assert_raises_rpc_error(-26, &quot;absurdly-high-fee&quot;, self.nodes[2].sendrawtransaction, rawTxSigned[&#x27;hex&#x27;], Decimal(&quot;0.00001000&quot;))
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018360' id='622876'>
<a class='timestamp' href='#622876'><time timestamp='2018-07-31T06:26:00Z'>06:26</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
kallewoof: client.cpp is entirely irrelevant for this
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018360' id='622877'>
<a class='timestamp' href='#622877'><time timestamp='2018-07-31T06:26:00Z'>06:26</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
luke-jr: It determines if argument should be converted or kept as a string, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018420' id='622878'>
<a class='timestamp' href='#622878'><time timestamp='2018-07-31T06:27:00Z'>06:27</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
kallewoof: for bitcoin-cli, which isn&#x27;t tested by assert_raises_rpc_error
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018420' id='622879'>
<a class='timestamp' href='#622879'><time timestamp='2018-07-31T06:27:00Z'>06:27</time></a>
&lt;<span class='nick nick-9'> * kallewoof</span>&gt;
blinks
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018480' id='622880'>
<a class='timestamp' href='#622880'><time timestamp='2018-07-31T06:28:00Z'>06:28</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
So how does it know whether to format arguments or  keep as strings?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018540' id='622881'>
<a class='timestamp' href='#622881'><time timestamp='2018-07-31T06:29:00Z'>06:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
kallewoof: it doesn&#x27;t
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018540' id='622882'>
<a class='timestamp' href='#622882'><time timestamp='2018-07-31T06:29:00Z'>06:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
JSON-RPC on the wire is JSON
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018540' id='622883'>
<a class='timestamp' href='#622883'><time timestamp='2018-07-31T06:29:00Z'>06:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not strings
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018540' id='622884'>
<a class='timestamp' href='#622884'><time timestamp='2018-07-31T06:29:00Z'>06:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you use Decinal in python, it is sent as a JSON number
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018600' id='622885'>
<a class='timestamp' href='#622885'><time timestamp='2018-07-31T06:30:00Z'>06:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
bitcoin-cli needs to know what arguments to treat as string literals and which ones not
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018600' id='622886'>
<a class='timestamp' href='#622886'><time timestamp='2018-07-31T06:30:00Z'>06:30</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
I&#x27;m confused. THis works: self.nodes[2].sendrawtransaction(hexstring=rawTxSigned[&#x27;hex&#x27;], allowhighfees=0.00007000)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018600' id='622887'>
<a class='timestamp' href='#622887'><time timestamp='2018-07-31T06:30:00Z'>06:30</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
And this doesn&#x27;t: self.nodes[2].sendrawtransaction(hexstring=rawTxSigned[&#x27;hex&#x27;], allowhighfees=Decimal(&quot;0.00007000&quot;))
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018660' id='622888'>
<a class='timestamp' href='#622888'><time timestamp='2018-07-31T06:31:00Z'>06:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, i must be wrong then
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018720' id='622889'>
<a class='timestamp' href='#622889'><time timestamp='2018-07-31T06:32:00Z'>06:32</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Unless Decimal() gives something that univalue does not consider to be isNum().. but if I write() it, it gives me [ &quot;0.00007000&quot; ] (with quotes)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018720' id='622890'>
<a class='timestamp' href='#622890'><time timestamp='2018-07-31T06:32:00Z'>06:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
this has nothing to do with univalue
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018720' id='622891'>
<a class='timestamp' href='#622891'><time timestamp='2018-07-31T06:32:00Z'>06:32</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Wait, it does, because the error is when ! isBool() and ! isNum()
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018720' id='622892'>
<a class='timestamp' href='#622892'><time timestamp='2018-07-31T06:32:00Z'>06:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
JSON has 4 data types; numbers, strings, arrays, objects
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018780' id='622893'>
<a class='timestamp' href='#622893'><time timestamp='2018-07-31T06:33:00Z'>06:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the <b>*python*</b> code is converting what you pass to the sendrawtransaction function into those 4 types
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018780' id='622894'>
<a class='timestamp' href='#622894'><time timestamp='2018-07-31T06:33:00Z'>06:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
isNum failing on the bitcoind side just means you&#x27;re not sending a JSON number
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018780' id='622895'>
<a class='timestamp' href='#622895'><time timestamp='2018-07-31T06:33:00Z'>06:33</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
My code goes if isBool() {..} else if isNum() {..} else throw jsonrpcerror...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018780' id='622896'>
<a class='timestamp' href='#622896'><time timestamp='2018-07-31T06:33:00Z'>06:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so it&#x27;s presumably sending a JSON string
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018780' id='622897'>
<a class='timestamp' href='#622897'><time timestamp='2018-07-31T06:33:00Z'>06:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, bools too; sorry, 5
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018840' id='622898'>
<a class='timestamp' href='#622898'><time timestamp='2018-07-31T06:34:00Z'>06:34</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
Right -- I thought Decimal() gave a JSON number. Guess not.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533018840' id='622899'>
<a class='timestamp' href='#622899'><time timestamp='2018-07-31T06:34:00Z'>06:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i guess not :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533019080' id='622900'>
<a class='timestamp' href='#622900'><time timestamp='2018-07-31T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
probably should be made to
<br>
</div>

<div class='talk op-msg' data-timestamp='1533019560' id='622901'>
<a class='timestamp' href='#622901'><time timestamp='2018-07-31T06:46:00Z'>06:46</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
I&#x27;m honestly pretty sure it is, and I&#x27;m screwing something up, but rounding errors are no biggie in this case so I&#x27;m going with the native variant.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533030360' id='622902'>
<a class='timestamp' href='#622902'><time timestamp='2018-07-31T09:46:00Z'>09:46</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus: heh, I saw that &quot;loss&quot; as well. Got emailed twice for some reason
<br>
</div>

<div class='talk op-msg' data-timestamp='1533030480' id='622903'>
<a class='timestamp' href='#622903'><time timestamp='2018-07-31T09:48:00Z'>09:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: well I didn&#x27;t see my comment so I posted another one, then suddenly they both appeared
<br>
</div>

<div class='talk op-msg' data-timestamp='1533030540' id='622904'>
<a class='timestamp' href='#622904'><time timestamp='2018-07-31T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus GH playing tricks on you
<br>
</div>

<div class='talk op-msg' data-timestamp='1533030660' id='622905'>
<a class='timestamp' href='#622905'><time timestamp='2018-07-31T09:51:00Z'>09:51</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Also please don&#x27;t merge 13809 yet, few things to be fixed up first, to avoid lots of followups
<br>
</div>

<div class='talk op-msg' data-timestamp='1533031320' id='622906'>
<a class='timestamp' href='#622906'><time timestamp='2018-07-31T10:02:00Z'>10:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
OK, please comment that there so anyone else won&#x27;t merge it either
<br>
</div>

<div class='talk op-msg' data-timestamp='1533034440' id='622907'>
<a class='timestamp' href='#622907'><time timestamp='2018-07-31T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-3'> mryandao</span>&gt;
typically most linux distribution follow XDG specification for looking up config files, would this be preferable in Core? I know there was a previous closed issue which mentioned this, but we could keep the datadir cache separate in ~/.bitcoin as is
<br>
</div>

<div class='talk op-msg' data-timestamp='1533034500' id='622908'>
<a class='timestamp' href='#622908'><time timestamp='2018-07-31T10:55:00Z'>10:55</time></a>
&lt;<span class='nick nick-3'> mryandao</span>&gt;
the upside of this is that daemon configuration can be easier to backup for users who just scoop the entire XDG_BASE_DIR
<br>
</div>

<div class='talk op-msg' data-timestamp='1533035280' id='622909'>
<a class='timestamp' href='#622909'><time timestamp='2018-07-31T11:08:00Z'>11:08</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
mryandao: do you think there&#x27;s lots of people who backup just .config/ and not their whole home directories?  The stuff in my .config represents perhaps a few hours of tweaking over years, but the stuff in the rest of my home directory represents many hours of work each day over the same number of years.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533035280' id='622910'>
<a class='timestamp' href='#622910'><time timestamp='2018-07-31T11:08:00Z'>11:08</time></a>
&lt;<span class='nick nick-3'> mryandao</span>&gt;
harding: personally, i only backup my .config directory since my homedir would have accumulated a bunch of unwanted stuff in new installations.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533035400' id='622911'>
<a class='timestamp' href='#622911'><time timestamp='2018-07-31T11:10:00Z'>11:10</time></a>
&lt;<span class='nick nick-3'> mryandao</span>&gt;
especially when it comes to hidden directories in home :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1533035700' id='622912'>
<a class='timestamp' href='#622912'><time timestamp='2018-07-31T11:15:00Z'>11:15</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
mryandao: ok.  I guess I have a different backup philosophy than you do.  I use cheap external HDs, and so I just grab everything indiscriminately.  I think there probably is an advantage to fully separating stuff we really want users to backup (e..g bitcoin.conf and wallets) from stuff that&#x27;s just nice to backup (e.g. old blocks), but I personally don&#x27;t think that&#x27;s enough of an advantage to make them have to go looking around 
<br>
</div>

<div class='talk op-msg' data-timestamp='1533035700' id='622913'>
<a class='timestamp' href='#622913'><time timestamp='2018-07-31T11:15:00Z'>11:15</time></a>
&lt;<span class='nick nick-5'> harding</span>&gt;
various places in their home directory for different Bitcoin-related resources.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533036660' id='622914'>
<a class='timestamp' href='#622914'><time timestamp='2018-07-31T11:31:00Z'>11:31</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus I was looking at the wrong things before. Feel free to ignore my nit on 13809 and merge it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533042840' id='622915'>
<a class='timestamp' href='#622915'><time timestamp='2018-07-31T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] scravy opened pull request #13816: travis: build and run tests on os: osx (master...run-functional-tests-on-macos) <a href="https://github.com/bitcoin/bitcoin/pull/13816" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13816</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533046980' id='622916'>
<a class='timestamp' href='#622916'><time timestamp='2018-07-31T14:23:00Z'>14:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] Sjors opened pull request #13818: More intuitive GUI settings behavior when -proxy is set (master...2018/07/gui-proxy) <a href="https://github.com/bitcoin/bitcoin/pull/13818" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13818</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533049500' id='622917'>
<a class='timestamp' href='#622917'><time timestamp='2018-07-31T15:05:00Z'>15:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] chipstar opened pull request #13820: Replace Bitcoin to XPChain (master...replace-botcoin-to-xpchain) <a href="https://github.com/bitcoin/bitcoin/pull/13820" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13820</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533049560' id='622918'>
<a class='timestamp' href='#622918'><time timestamp='2018-07-31T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: ^ plz close
<br>
</div>

<div class='talk op-msg' data-timestamp='1533049620' id='622919'>
<a class='timestamp' href='#622919'><time timestamp='2018-07-31T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
actually, he PRed from his master, so you could also helpfully remove his repository too... :-/
<br>
</div>

<div class='talk op-msg' data-timestamp='1533049680' id='622920'>
<a class='timestamp' href='#622920'><time timestamp='2018-07-31T15:08:00Z'>15:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] chipstar closed pull request #13820: Replace Bitcoin to XPChain (master...replace-botcoin-to-xpchain) <a href="https://github.com/bitcoin/bitcoin/pull/13820" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13820</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533052620' id='622921'>
<a class='timestamp' href='#622921'><time timestamp='2018-07-31T15:57:00Z'>15:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/8ce55df70d31...77168f766f15" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/8ce55df70d31...77168f766f15</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533052620' id='622922'>
<a class='timestamp' href='#622922'><time timestamp='2018-07-31T15:57:00Z'>15:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fa0e1e2 MarcoFalke: contrib: Remove debian and rpm subfolders
<br>
</div>

<div class='talk op-msg' data-timestamp='1533052620' id='622923'>
<a class='timestamp' href='#622923'><time timestamp='2018-07-31T15:57:00Z'>15:57</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 77168f7 MarcoFalke: Merge #13809: contrib: Remove debian and rpm subfolder...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533052740' id='622924'>
<a class='timestamp' href='#622924'><time timestamp='2018-07-31T15:59:00Z'>15:59</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #13809: contrib: Remove debian and rpm subfolder (master...Mf1808-debianContrib) <a href="https://github.com/bitcoin/bitcoin/pull/13809" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13809</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533053940' id='622925'>
<a class='timestamp' href='#622925'><time timestamp='2018-07-31T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/77168f766f15...230652cafc51" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/77168f766f15...230652cafc51</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533053940' id='622926'>
<a class='timestamp' href='#622926'><time timestamp='2018-07-31T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 04ce0d8 Pieter Wuille: Report when unknown config file options are ignored
<br>
</div>

<div class='talk op-msg' data-timestamp='1533053940' id='622927'>
<a class='timestamp' href='#622927'><time timestamp='2018-07-31T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 247d574 Pieter Wuille: Ignore unknown config file options for now
<br>
</div>

<div class='talk op-msg' data-timestamp='1533053940' id='622928'>
<a class='timestamp' href='#622928'><time timestamp='2018-07-31T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 230652c MarcoFalke: Merge #13799: Ignore unknown config file options; warn instead of error...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533054000' id='622929'>
<a class='timestamp' href='#622929'><time timestamp='2018-07-31T16:20:00Z'>16:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #13799: Ignore unknown config file options; warn instead of error (master...201807_warnunknown) <a href="https://github.com/bitcoin/bitcoin/pull/13799" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13799</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533055860' id='622930'>
<a class='timestamp' href='#622930'><time timestamp='2018-07-31T16:51:00Z'>16:51</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #13821: qa: Re-enable test for unknown arg in conf file (master...Mf1808-qaConfWarn) <a href="https://github.com/bitcoin/bitcoin/pull/13821" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13821</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533057060' id='622931'>
<a class='timestamp' href='#622931'><time timestamp='2018-07-31T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #13821: qa: Re-enable test for unknown arg in conf file (master...Mf1808-qaConfWarn) <a href="https://github.com/bitcoin/bitcoin/pull/13821" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13821</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533061920' id='622932'>
<a class='timestamp' href='#622932'><time timestamp='2018-07-31T18:32:00Z'>18:32</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] achow101 opened pull request #13822: bench: Make CoinSelection output groups pass eligibility filter (master...fix-out-groups-bench) <a href="https://github.com/bitcoin/bitcoin/pull/13822" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13822</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533062880' id='622933'>
<a class='timestamp' href='#622933'><time timestamp='2018-07-31T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/230652cafc51...7d3623794a10" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/230652cafc51...7d3623794a10</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533062880' id='622934'>
<a class='timestamp' href='#622934'><time timestamp='2018-07-31T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 2fb0066 practicalswift: net: Add missing verification of IPv6 address in CNetAddr::GetIn6Addr(...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533062880' id='622935'>
<a class='timestamp' href='#622935'><time timestamp='2018-07-31T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 7d36237 Wladimir J. van der Laan: Merge #13776: net: Add missing verification of IPv6 address in CNetAddr::GetIn6Addr(...)...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533062940' id='622936'>
<a class='timestamp' href='#622936'><time timestamp='2018-07-31T18:49:00Z'>18:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #13776: net: Add missing verification of IPv6 address in CNetAddr::GetIn6Addr(...) (master...call-IsIPv6-in-GetIn6Addr) <a href="https://github.com/bitcoin/bitcoin/pull/13776" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13776</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533064740' id='622937'>
<a class='timestamp' href='#622937'><time timestamp='2018-07-31T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
This is a curious error: &quot; dropped: non-selectable socket&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1533064800' id='622938'>
<a class='timestamp' href='#622938'><time timestamp='2018-07-31T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
They seem to happen in runs over several minutes
<br>
</div>

<div class='talk op-msg' data-timestamp='1533064980' id='622939'>
<a class='timestamp' href='#622939'><time timestamp='2018-07-31T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #13823: qa: quote path in authproxy for external multiwallets (master...Mf1808-qaAuthProxyQuotePath) <a href="https://github.com/bitcoin/bitcoin/pull/13823" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13823</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533065220' id='622940'>
<a class='timestamp' href='#622940'><time timestamp='2018-07-31T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/7d3623794a10...0fb9c87815d1" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/7d3623794a10...0fb9c87815d1</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533065220' id='622941'>
<a class='timestamp' href='#622941'><time timestamp='2018-07-31T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 494634a Andrew Chow: bench: Make CoinSelection output groups pass eligibility filter...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533065220' id='622942'>
<a class='timestamp' href='#622942'><time timestamp='2018-07-31T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 0fb9c87 MarcoFalke: Merge #13822: bench: Make CoinSelection output groups pass eligibility filter...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533065220' id='622943'>
<a class='timestamp' href='#622943'><time timestamp='2018-07-31T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
I didn&#x27;t think bitcoin would be using select(), I thought it would be using epoll() and friends?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533065280' id='622944'>
<a class='timestamp' href='#622944'><time timestamp='2018-07-31T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #13822: bench: Make CoinSelection output groups pass eligibility filter (master...fix-out-groups-bench) <a href="https://github.com/bitcoin/bitcoin/pull/13822" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13822</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533066060' id='622945'>
<a class='timestamp' href='#622945'><time timestamp='2018-07-31T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
it looks like bitcoin-qt is using up 800 FDs for open files (chainstate, txindex, etc...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533066180' id='622946'>
<a class='timestamp' href='#622946'><time timestamp='2018-07-31T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
509 for txindex and 288 for chainstate
<br>
</div>

<div class='talk op-msg' data-timestamp='1533066180' id='622947'>
<a class='timestamp' href='#622947'><time timestamp='2018-07-31T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ossifrage: longer term we&#x27;ll probably switch to libevent
<br>
</div>

<div class='talk op-msg' data-timestamp='1533066240' id='622948'>
<a class='timestamp' href='#622948'><time timestamp='2018-07-31T19:44:00Z'>19:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which uses the most efficient polling mechanism on every platfor.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533066360' id='622949'>
<a class='timestamp' href='#622949'><time timestamp='2018-07-31T19:46:00Z'>19:46</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
sipa, any suggestions on reducing the number of FDs used by txindex?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533066540' id='622950'>
<a class='timestamp' href='#622950'><time timestamp='2018-07-31T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ossifrage: don&#x27;t use txindex
<br>
</div>

<div class='talk op-msg' data-timestamp='1533066540' id='622951'>
<a class='timestamp' href='#622951'><time timestamp='2018-07-31T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
:)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533066600' id='622952'>
<a class='timestamp' href='#622952'><time timestamp='2018-07-31T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
I wonder how painful of a project it would be to make the move to libevent?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533066660' id='622953'>
<a class='timestamp' href='#622953'><time timestamp='2018-07-31T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-7'> Dizzle</span>&gt;
We&#x27;re already using it for RPC and some other networking, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533066840' id='622954'>
<a class='timestamp' href='#622954'><time timestamp='2018-07-31T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
Hmm, I wonder what bounds the number of FDs used by the txindex ldb files
<br>
</div>

<div class='talk op-msg' data-timestamp='1533067020' id='622955'>
<a class='timestamp' href='#622955'><time timestamp='2018-07-31T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
leveldb has a max open fileslimit
<br>
</div>

<div class='talk op-msg' data-timestamp='1533067080' id='622956'>
<a class='timestamp' href='#622956'><time timestamp='2018-07-31T19:58:00Z'>19:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how many connwctions do you have?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533067260' id='622957'>
<a class='timestamp' href='#622957'><time timestamp='2018-07-31T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
sipa, 160
<br>
</div>

<div class='talk op-msg' data-timestamp='1533067260' id='622958'>
<a class='timestamp' href='#622958'><time timestamp='2018-07-31T20:01:00Z'>20:01</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
(right now, but it looks like has been having troubles with new connections for a while due to the number of ldb files open)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533067320' id='622959'>
<a class='timestamp' href='#622959'><time timestamp='2018-07-31T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
bitcoind tries to raise its max fd limit at startup
<br>
</div>

<div class='talk op-msg' data-timestamp='1533067380' id='622960'>
<a class='timestamp' href='#622960'><time timestamp='2018-07-31T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
sipa, the problem is with the FD_SET size which is 1024 :-(
<br>
</div>

<div class='talk op-msg' data-timestamp='1533067380' id='622961'>
<a class='timestamp' href='#622961'><time timestamp='2018-07-31T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1533067440' id='622962'>
<a class='timestamp' href='#622962'><time timestamp='2018-07-31T20:04:00Z'>20:04</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
it looks like ldb is using 1000 fds (as per comment)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533067560' id='622963'>
<a class='timestamp' href='#622963'><time timestamp='2018-07-31T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
I think I&#x27;ll try rebuilding with the default set to 500 or so (I wonder if that is global or per database)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533067560' id='622964'>
<a class='timestamp' href='#622964'><time timestamp='2018-07-31T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-15'> ossifrage</span>&gt;
However, I suspect it will take another month of runtime to accumulate that many open ldb files to test...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533067620' id='622965'>
<a class='timestamp' href='#622965'><time timestamp='2018-07-31T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ossifrage: no, it&#x27;s a runtime testing
<br>
</div>

<div class='talk op-msg' data-timestamp='1533068700' id='622966'>
<a class='timestamp' href='#622966'><time timestamp='2018-07-31T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-13'> jimpo</span>&gt;
Is there an option for shared (read/write) locks w/o C++ 14?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533068760' id='622967'>
<a class='timestamp' href='#622967'><time timestamp='2018-07-31T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-13'> jimpo</span>&gt;
looks like sigcache uses boost::shared_lock. is that acceptable or discouraged?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533068820' id='622968'>
<a class='timestamp' href='#622968'><time timestamp='2018-07-31T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think as long as we don&#x27;t have c++14, boost::shared_lock looks like a good solution
<br>
</div>

<div class='talk op-msg' data-timestamp='1533068880' id='622969'>
<a class='timestamp' href='#622969'><time timestamp='2018-07-31T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Is there really no read/write lock before C++14?!  Posix has had them for like 20 years!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533068940' id='622970'>
<a class='timestamp' href='#622970'><time timestamp='2018-07-31T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: See above FD_SET stuff. Is there any way I could bribe you to PR the patch that changes the net to use poll on Linux?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533068940' id='622971'>
<a class='timestamp' href='#622971'><time timestamp='2018-07-31T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
We have 1001 windows specific things in the codebase,  having a linux+bsd specific thing wouldn&#x27;t be the end of the world.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069000' id='622972'>
<a class='timestamp' href='#622972'><time timestamp='2018-07-31T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
And we&#x27;ve delayed doing the simple thing for eons, in favor of a grand change that has been slow in coming.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069000' id='622973'>
<a class='timestamp' href='#622973'><time timestamp='2018-07-31T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
IIRC the patchs that you and patrick had done were like a dozen lines of code, and except for the fact that they added platform IFdefs, were totally clean.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069000' id='622974'>
<a class='timestamp' href='#622974'><time timestamp='2018-07-31T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: before c++11, c++ didn&#x27;t have any form of threading or synchronization primitives at all :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069060' id='622975'>
<a class='timestamp' href='#622975'><time timestamp='2018-07-31T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: I know but why the heck didn&#x27;t C++11 catch up with basic features from decades ago? :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069060' id='622976'>
<a class='timestamp' href='#622976'><time timestamp='2018-07-31T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: my guess is that c++11 was already an enormous change
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069120' id='622977'>
<a class='timestamp' href='#622977'><time timestamp='2018-07-31T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
aside, &lt;3 RW locks
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069120' id='622978'>
<a class='timestamp' href='#622978'><time timestamp='2018-07-31T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069360' id='622979'>
<a class='timestamp' href='#622979'><time timestamp='2018-07-31T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the c++14 shared mutex doesn&#x27;t support upgradable locking
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069420' id='622980'>
<a class='timestamp' href='#622980'><time timestamp='2018-07-31T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I can see why upgradability would be useful for us, but I don&#x27;t recall ever using it in my own code.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069420' id='622981'>
<a class='timestamp' href='#622981'><time timestamp='2018-07-31T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(maybe posix rw locks aren&#x27;t even upgradable?)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069420' id='622982'>
<a class='timestamp' href='#622982'><time timestamp='2018-07-31T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah!
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069420' id='622983'>
<a class='timestamp' href='#622983'><time timestamp='2018-07-31T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<a href="https://stackoverflow.com/questions/34993983/upgrading-read-lock-to-write-lock-without-releasing-the-first-in-c11" class="link" target="_blank">https://stackoverflow.com/questions/34993983/upgrading-read-lock-to-write-lock-without-releasing-the-first-in-c11</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069480' id='622984'>
<a class='timestamp' href='#622984'><time timestamp='2018-07-31T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you can implement upgradable locks on top of shared and exclusive locks
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069480' id='622985'>
<a class='timestamp' href='#622985'><time timestamp='2018-07-31T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
for us I think the big win for rw locks is that we can make all the things that just need readonly access to the blockchain not block each other...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069480' id='622986'>
<a class='timestamp' href='#622986'><time timestamp='2018-07-31T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
info-rpcs, wallet, P2P get* messages...
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069540' id='622987'>
<a class='timestamp' href='#622987'><time timestamp='2018-07-31T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and that doesn&#x27;t need an upgradable lock.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069540' id='622988'>
<a class='timestamp' href='#622988'><time timestamp='2018-07-31T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
upgradable locks would be nice in that they let us lock/unlock exclusive access during block validation
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069540' id='622989'>
<a class='timestamp' href='#622989'><time timestamp='2018-07-31T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
block processing could in theory use one, e.g. take a read lock to decide if the incoming block is already known to us, then promote to write if it isn&#x27;t... but thats rare, might as well take the write lock.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069600' id='622990'>
<a class='timestamp' href='#622990'><time timestamp='2018-07-31T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
at times when the chainstate is consistent but not done
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069600' id='622991'>
<a class='timestamp' href='#622991'><time timestamp='2018-07-31T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
okay thats a point.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069600' id='622992'>
<a class='timestamp' href='#622992'><time timestamp='2018-07-31T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
basically you just need to upgrade when flushing the per-block utxo cache to the chainstate cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069660' id='622993'>
<a class='timestamp' href='#622993'><time timestamp='2018-07-31T20:41:00Z'>20:41</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I&#x27;m always a little warry about peppering the code with a lot of fine locking, since they&#x27;re slow (potentially very slow if contended)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069720' id='622994'>
<a class='timestamp' href='#622994'><time timestamp='2018-07-31T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(and it&#x27;s hard to tell that it&#x27;s slow)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069780' id='622995'>
<a class='timestamp' href='#622995'><time timestamp='2018-07-31T20:43:00Z'>20:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
uncontended locks are really fast (at least on linux)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069840' id='622996'>
<a class='timestamp' href='#622996'><time timestamp='2018-07-31T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It&#x27;s all relative. I think they&#x27;re always as slow as a cache line bounce, so equal to probably thousands of multiplies.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069840' id='622997'>
<a class='timestamp' href='#622997'><time timestamp='2018-07-31T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the number i had in my mind was 100 cpu cycles for an uncontended loc
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069840' id='622998'>
<a class='timestamp' href='#622998'><time timestamp='2018-07-31T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i can&#x27;t remember actually ever validating that number
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069900' id='622999'>
<a class='timestamp' href='#622999'><time timestamp='2018-07-31T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
hm. okay so an order of magnitude between our beliefs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069900' id='623000'>
<a class='timestamp' href='#623000'><time timestamp='2018-07-31T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I don&#x27;t see how 100 is physically possible though.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069900' id='623001'>
<a class='timestamp' href='#623001'><time timestamp='2018-07-31T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
not without doing some kind of transactional crazyness that can rollback the cpu on conflicts.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533069960' id='623002'>
<a class='timestamp' href='#623002'><time timestamp='2018-07-31T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<a href="http://ithare.com/infographics-operation-costs-in-cpu-clock-cycles/" class="link" target="_blank">http://ithare.com/infographics-operation-costs-in-cpu-clock-cycles/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070020' id='623003'>
<a class='timestamp' href='#623003'><time timestamp='2018-07-31T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think an uncontended lock is a few compare-and-swaps
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070080' id='623004'>
<a class='timestamp' href='#623004'><time timestamp='2018-07-31T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so per that a few hundred cycles, seems fast to me, though thinking more about it, I guess it no longer strikes me as physically impossible to take a lock in 100 cycles IF you are the same core that last had the lock.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070260' id='623005'>
<a class='timestamp' href='#623005'><time timestamp='2018-07-31T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If you aren&#x27;t then I don&#x27;t think it&#x27;s physically possible, another core could take the lock at the same time, and at 100 cycles, it&#x27;s potentially outside of your lightcone. (13 cm)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070380' id='623006'>
<a class='timestamp' href='#623006'><time timestamp='2018-07-31T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just wrote a small c++11 benchmark that creates a single thread which grabs a mutex, and increments a variable, and releases again
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070380' id='623007'>
<a class='timestamp' href='#623007'><time timestamp='2018-07-31T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
14 ns per iteration
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070380' id='623008'>
<a class='timestamp' href='#623008'><time timestamp='2018-07-31T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
agreed, &quot;always on the same thread&quot; is a stronger condition than just &quot;uncontended&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070500' id='623009'>
<a class='timestamp' href='#623009'><time timestamp='2018-07-31T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
makes sense. yea, 14ns is just not physically possible if it has to consult with a far away core. but I guess it doesn&#x27;t in common cases.
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070620' id='623010'>
<a class='timestamp' href='#623010'><time timestamp='2018-07-31T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
now trying the same with 2 simultaneous threads
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070680' id='623011'>
<a class='timestamp' href='#623011'><time timestamp='2018-07-31T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just 100 ns per iteration?
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070680' id='623012'>
<a class='timestamp' href='#623012'><time timestamp='2018-07-31T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wtf
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070680' id='623013'>
<a class='timestamp' href='#623013'><time timestamp='2018-07-31T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i was expected several orders of magnitudes more
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070680' id='623014'>
<a class='timestamp' href='#623014'><time timestamp='2018-07-31T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
well, hyperthreading? :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1533070740' id='623015'>
<a class='timestamp' href='#623015'><time timestamp='2018-07-31T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
use taskset to force it into different sockets. :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1533071100' id='623016'>
<a class='timestamp' href='#623016'><time timestamp='2018-07-31T21:05:00Z'>21:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #13824: doc: Remove outdated net comment (master...Mf1808-docNetCritSec) <a href="https://github.com/bitcoin/bitcoin/pull/13824" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13824</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1533074040' id='623017'>
<a class='timestamp' href='#623017'><time timestamp='2018-07-31T21:54:00Z'>21:54</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #13825: [wallet] [Do not merge until v0.18] Kill accounts (master...kill_accounts) <a href="https://github.com/bitcoin/bitcoin/pull/13825" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13825</a>
<br>
</div>

</div>
</section>

</body>
</html>
