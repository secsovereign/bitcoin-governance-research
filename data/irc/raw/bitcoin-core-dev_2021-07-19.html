<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2021-07-19
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2021-07-19' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:16 UTC</pre>
<pre><a href="/bitcoin-core-dev/2021-06-19">&lt;</a><span class='header'>    July 2021     </span><a href="/bitcoin-core-dev/2021-08-19">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;             <a class="" href="/bitcoin-core-dev/2021-07-01">1</a>  <a class="" href="/bitcoin-core-dev/2021-07-02">2</a>  <a class="" href="/bitcoin-core-dev/2021-07-03">3</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2021-07-04">4</a>  <a class="" href="/bitcoin-core-dev/2021-07-05">5</a>  <a class="" href="/bitcoin-core-dev/2021-07-06">6</a>  <a class="" href="/bitcoin-core-dev/2021-07-07">7</a>  <a class="" href="/bitcoin-core-dev/2021-07-08">8</a>  <a class="" href="/bitcoin-core-dev/2021-07-09">9</a> <a class="" href="/bitcoin-core-dev/2021-07-10">10</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2021-07-11">11</a> <a class="" href="/bitcoin-core-dev/2021-07-12">12</a> <a class="" href="/bitcoin-core-dev/2021-07-13">13</a> <a class="" href="/bitcoin-core-dev/2021-07-14">14</a> <a class="" href="/bitcoin-core-dev/2021-07-15">15</a> <a class="" href="/bitcoin-core-dev/2021-07-16">16</a> <a class="" href="/bitcoin-core-dev/2021-07-17">17</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2021-07-18">18</a> <a class="current" href="/bitcoin-core-dev/2021-07-19">19</a> <a class="" href="/bitcoin-core-dev/2021-07-20">20</a> <a class="" href="/bitcoin-core-dev/2021-07-21">21</a> <a class="" href="/bitcoin-core-dev/2021-07-22">22</a> <a class="" href="/bitcoin-core-dev/2021-07-23">23</a> <a class="" href="/bitcoin-core-dev/2021-07-24">24</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2021-07-25">25</a> <a class="" href="/bitcoin-core-dev/2021-07-26">26</a> <a class="" href="/bitcoin-core-dev/2021-07-27">27</a> <a class="" href="/bitcoin-core-dev/2021-07-28">28</a> <a class="" href="/bitcoin-core-dev/2021-07-29">29</a> <a class="" href="/bitcoin-core-dev/2021-07-30">30</a> <a class="" href="/bitcoin-core-dev/2021-07-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1626661380' id='424810'>
<a class='timestamp' href='#424810'><time timestamp='2021-07-19T02:23:00Z'>02:23</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
can someone familiar with DEBUG_LOCKORDER help me out with #22489?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661380' id='424811'>
<a class='timestamp' href='#424811'><time timestamp='2021-07-19T02:23:00Z'>02:23</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22489" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22489</a> | The dumpwallet RPC command stops/kills bitcoind · Issue #22489 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661440' id='424812'>
<a class='timestamp' href='#424812'><time timestamp='2021-07-19T02:24:00Z'>02:24</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
istm there shouldn&#x27;t be a lock order issue detected because the function should have exited and the locks released by the time that the different lock order is being used
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661500' id='424813'>
<a class='timestamp' href='#424813'><time timestamp='2021-07-19T02:25:00Z'>02:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s not what lock order detection does :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661500' id='424814'>
<a class='timestamp' href='#424814'><time timestamp='2021-07-19T02:25:00Z'>02:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it verifies that the same locks are always taken in the same order
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661500' id='424815'>
<a class='timestamp' href='#424815'><time timestamp='2021-07-19T02:25:00Z'>02:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if they are <u>_ever_</u> held simultaneously
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661500' id='424816'>
<a class='timestamp' href='#424816'><time timestamp='2021-07-19T02:25:00Z'>02:25</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661560' id='424817'>
<a class='timestamp' href='#424817'><time timestamp='2021-07-19T02:26:00Z'>02:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s perfectly possible that it detects inconsistencies that cannot ever result in actual deadlocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661620' id='424818'>
<a class='timestamp' href='#424818'><time timestamp='2021-07-19T02:27:00Z'>02:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(but that generally does mean the code is fragile, as calling things a bit differently can cause a deadlock)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661680' id='424819'>
<a class='timestamp' href='#424819'><time timestamp='2021-07-19T02:28:00Z'>02:28</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661740' id='424820'>
<a class='timestamp' href='#424820'><time timestamp='2021-07-19T02:29:00Z'>02:29</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
does it only detect locks held simultaneously or does it also detect the order of locks taken after one is released?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661920' id='424821'>
<a class='timestamp' href='#424821'><time timestamp='2021-07-19T02:32:00Z'>02:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if locks A and B are ever held simultaneously, it will remember their relative order
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661920' id='424822'>
<a class='timestamp' href='#424822'><time timestamp='2021-07-19T02:32:00Z'>02:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if two conflicting relative orders are observed, it will abort
<br>
</div>

<div class='talk op-msg' data-timestamp='1626661920' id='424823'>
<a class='timestamp' href='#424823'><time timestamp='2021-07-19T02:32:00Z'>02:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
&quot;order&quot; here means &quot;A is locked while B was held&quot; -&gt; &quot;A &gt; B&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1626662040' id='424824'>
<a class='timestamp' href='#424824'><time timestamp='2021-07-19T02:34:00Z'>02:34</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1626662160' id='424825'>
<a class='timestamp' href='#424825'><time timestamp='2021-07-19T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so you can&#x27;t have code that in some place locks A while B is held
<br>
</div>

<div class='talk op-msg' data-timestamp='1626662220' id='424826'>
<a class='timestamp' href='#424826'><time timestamp='2021-07-19T02:37:00Z'>02:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and elsewhere locks B whila A is held
<br>
</div>

<div class='talk op-msg' data-timestamp='1626662220' id='424827'>
<a class='timestamp' href='#424827'><time timestamp='2021-07-19T02:37:00Z'>02:37</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
and yet we do
<br>
</div>

<div class='talk op-msg' data-timestamp='1626662280' id='424828'>
<a class='timestamp' href='#424828'><time timestamp='2021-07-19T02:38:00Z'>02:38</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
but only if you try to do dumpwallet and have loaded the wallet when there is an unconfirmed transaction belonging to it in the mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1626664380' id='424829'>
<a class='timestamp' href='#424829'><time timestamp='2021-07-19T03:13:00Z'>03:13</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] achow101 opened pull request #22492: wallet: Reorder locks in dumpwallet to avoid lock order assertion (master...dumpwallet-lock-order) <a href="https://github.com/bitcoin/bitcoin/pull/22492" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22492</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626669960' id='424830'>
<a class='timestamp' href='#424830'><time timestamp='2021-07-19T04:46:00Z'>04:46</time></a>
&lt;<span class='nick nick-11'> robertspigler</span>&gt;
luke-jr: makes sense, thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1626678060' id='424831'>
<a class='timestamp' href='#424831'><time timestamp='2021-07-19T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
achow101: sipa: but does our lock order detect potential issues like: lock A, lock B, unlock B, unlock A; at this time the lock stack for the thread would be empty, then at a later time: lock B, lock A.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626678120' id='424832'>
<a class='timestamp' href='#424832'><time timestamp='2021-07-19T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
looking at src/sync.cpp I think it will not detect ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1626680760' id='424833'>
<a class='timestamp' href='#424833'><time timestamp='2021-07-19T07:46:00Z'>07:46</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
no, it doesn&#x27;t detect that, i guess it would require quite a lot of extra record-keeping
<br>
</div>

<div class='talk op-msg' data-timestamp='1626680820' id='424834'>
<a class='timestamp' href='#424834'><time timestamp='2021-07-19T07:47:00Z'>07:47</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
keeping track of current locking state versus historical locking state
<br>
</div>

<div class='talk op-msg' data-timestamp='1626681120' id='424835'>
<a class='timestamp' href='#424835'><time timestamp='2021-07-19T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
right, that would be significant runtime performance overhead
<br>
</div>

<div class='talk op-msg' data-timestamp='1626681120' id='424836'>
<a class='timestamp' href='#424836'><time timestamp='2021-07-19T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-3'> S3RK</span>&gt;
now I&#x27;m confused. What&#x27;s the difference between &quot;conflicting relative orders are observed&quot; and &quot;locking state versus hisotrical locking state&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626681180' id='424837'>
<a class='timestamp' href='#424837'><time timestamp='2021-07-19T07:53:00Z'>07:53</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
hmm, actually not, the &quot;lock orders&quot; database can be global, need not be per-thread, so at least the size/memory overhead would not be too much
<br>
</div>

<div class='talk op-msg' data-timestamp='1626681300' id='424838'>
<a class='timestamp' href='#424838'><time timestamp='2021-07-19T07:55:00Z'>07:55</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
S3RK: &quot;conflicting relative orders are observed&quot; probably means that some thread locked A, B (in that order) and another thread locked B and tries to lock A, <u>_while_</u> the first thread still holds both mutexes
<br>
</div>

<div class='talk op-msg' data-timestamp='1626681420' id='424839'>
<a class='timestamp' href='#424839'><time timestamp='2021-07-19T07:57:00Z'>07:57</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
while &quot;locking state versus hisotrical locking state&quot; imples that we remember that the first thread has locked A,B even after it releases those mutexes, so if we do that it is possible to detect if another thread locks B,A even after the first thread has released all mutexes
<br>
</div>

<div class='talk op-msg' data-timestamp='1626681420' id='424840'>
<a class='timestamp' href='#424840'><time timestamp='2021-07-19T07:57:00Z'>07:57</time></a>
&lt;<span class='nick nick-3'> S3RK</span>&gt;
how is it possible that the second thred locked B while the first thread still holds both?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626681540' id='424841'>
<a class='timestamp' href='#424841'><time timestamp='2021-07-19T07:59:00Z'>07:59</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
it is not possible, of course, I am talking nonsense. The scenario is: thread1: lock A, thread2: lock B, thread1: try to lock B, thread2: try to lock A
<br>
</div>

<div class='talk op-msg' data-timestamp='1626681600' id='424842'>
<a class='timestamp' href='#424842'><time timestamp='2021-07-19T08:00:00Z'>08:00</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
The thing is that after a thread releases a lock we delete it from its lock-stack == we forget that it ever locked it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626681600' id='424843'>
<a class='timestamp' href='#424843'><time timestamp='2021-07-19T08:00:00Z'>08:00</time></a>
&lt;<span class='nick nick-3'> S3RK</span>&gt;
hm... this sounds like deadlock detection. I thought debug_lockorder is something more
<br>
</div>

<div class='talk op-msg' data-timestamp='1626681720' id='424844'>
<a class='timestamp' href='#424844'><time timestamp='2021-07-19T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
see push_lock() and pop_lock() in src/sync.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1626681720' id='424845'>
<a class='timestamp' href='#424845'><time timestamp='2021-07-19T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-3'> S3RK</span>&gt;
will do, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1626682920' id='424846'>
<a class='timestamp' href='#424846'><time timestamp='2021-07-19T08:22:00Z'>08:22</time></a>
&lt;<span class='nick nick-3'> S3RK</span>&gt;
lockorder is actually removed in DeleteLock() but I&#x27;m not familiar with the code at all to understnd fully how it works
<br>
</div>

<div class='talk op-msg' data-timestamp='1626683580' id='424847'>
<a class='timestamp' href='#424847'><time timestamp='2021-07-19T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: with DEBUG_LOCKORDER, we keep a global object to track all the previous lock stacks, to detect any potential lock inversions: <a href="https://github.com/bitcoin/bitcoin/blob/e8f85e0e86e92e583b8984455b7bf9d0a777578a/src/sync.cpp#L90-L104" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/e8f85e0e86e92e583b8984455b7bf9d0a777578a/src/sync.cpp#L90-L104</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626683640' id='424848'>
<a class='timestamp' href='#424848'><time timestamp='2021-07-19T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
aha, so we already do!
<br>
</div>

<div class='talk op-msg' data-timestamp='1626683760' id='424849'>
<a class='timestamp' href='#424849'><time timestamp='2021-07-19T08:36:00Z'>08:36</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
but wait, we do erase() from DeleteLock()
<br>
</div>

<div class='talk op-msg' data-timestamp='1626685380' id='424850'>
<a class='timestamp' href='#424850'><time timestamp='2021-07-19T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
huh, I thought the idea behind using thread-local storage in DEBUG_LOCKORDER was to avoid the overhead of having any global synchronized objects in the lock tracking
<br>
</div>

<div class='talk op-msg' data-timestamp='1626685380' id='424851'>
<a class='timestamp' href='#424851'><time timestamp='2021-07-19T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
but yeah that can&#x27;t be the case, it has to cross-check
<br>
</div>

<div class='talk op-msg' data-timestamp='1626685440' id='424852'>
<a class='timestamp' href='#424852'><time timestamp='2021-07-19T09:04:00Z'>09:04</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
it was never intended to be really efficient or low-overhead, that&#x27;s why it&#x27;s only enabled with debug builds
<br>
</div>

<div class='talk op-msg' data-timestamp='1626685620' id='424853'>
<a class='timestamp' href='#424853'><time timestamp='2021-07-19T09:07:00Z'>09:07</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
I think DeleteLock() is called when the mutex is destroyed, not when the lock is released
<br>
</div>

<div class='talk op-msg' data-timestamp='1626685680' id='424854'>
<a class='timestamp' href='#424854'><time timestamp='2021-07-19T09:08:00Z'>09:08</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
LeaveCritical() is the function called when the lock is released
<br>
</div>

<div class='talk op-msg' data-timestamp='1626685920' id='424855'>
<a class='timestamp' href='#424855'><time timestamp='2021-07-19T09:12:00Z'>09:12</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
that seems to be the case, it is called from the destructor of AnnotatedMixin, which is used to define RecursiveMutex etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1626687360' id='424856'>
<a class='timestamp' href='#424856'><time timestamp='2021-07-19T09:36:00Z'>09:36</time></a>
&lt;<span class='nick nick-3'> _aj_</span>&gt;
laanwj: it&#x27;s not really thread local storage, it&#x27;s a global map (GetLockData()) indexed by thread id? it used to be thread local prior to #18881 by the looks
<br>
</div>

<div class='talk op-msg' data-timestamp='1626687360' id='424857'>
<a class='timestamp' href='#424857'><time timestamp='2021-07-19T09:36:00Z'>09:36</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18881" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18881</a> | Prevent UB in DeleteLock() function by hebasto · Pull Request #18881 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626687420' id='424858'>
<a class='timestamp' href='#424858'><time timestamp='2021-07-19T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
_aj_: correct, the TLS is only used for the thread names
<br>
</div>

<div class='talk op-msg' data-timestamp='1626687420' id='424859'>
<a class='timestamp' href='#424859'><time timestamp='2021-07-19T09:37:00Z'>09:37</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
I must have mixed a few things up
<br>
</div>

<div class='talk op-msg' data-timestamp='1626687480' id='424860'>
<a class='timestamp' href='#424860'><time timestamp='2021-07-19T09:38:00Z'>09:38</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
I remember it differently than that it is
<br>
</div>

<div class='talk op-msg' data-timestamp='1626687780' id='424861'>
<a class='timestamp' href='#424861'><time timestamp='2021-07-19T09:43:00Z'>09:43</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
it did use thread_local before last year (26c093a9957756f3743c2347fe0abd90f81159c4, #18881)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626687780' id='424862'>
<a class='timestamp' href='#424862'><time timestamp='2021-07-19T09:43:00Z'>09:43</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18881" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18881</a> | Prevent UB in DeleteLock() function by hebasto · Pull Request #18881 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626687840' id='424863'>
<a class='timestamp' href='#424863'><time timestamp='2021-07-19T09:44:00Z'>09:44</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
A simple confirmation that lock order is being remembered: <a href="https://bpa.st/2CBQ" class="link" target="_blank">https://bpa.st/2CBQ</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626689940' id='424864'>
<a class='timestamp' href='#424864'><time timestamp='2021-07-19T10:19:00Z'>10:19</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
It seems some i2p nodes run #22112 while others don&#x27;t (yet): <a href="https://bpa.st/LUGQ" class="link" target="_blank">https://bpa.st/LUGQ</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626689940' id='424865'>
<a class='timestamp' href='#424865'><time timestamp='2021-07-19T10:19:00Z'>10:19</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22112" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22112</a> | Force port 0 in I2P by vasild · Pull Request #22112 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626690180' id='424866'>
<a class='timestamp' href='#424866'><time timestamp='2021-07-19T10:23:00Z'>10:23</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
This is the list of i2p nodes I am aware of: <a href="https://bpa.st/UOXQ" class="link" target="_blank">https://bpa.st/UOXQ</a>, I (tried to) connect to each one and observed whether they advertise themselves with port 0 or 8333.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626690300' id='424867'>
<a class='timestamp' href='#424867'><time timestamp='2021-07-19T10:25:00Z'>10:25</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jonatack: do you have more i2p addresses than listed in <a href="https://bpa.st/UOXQ" class="link" target="_blank">https://bpa.st/UOXQ</a> ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626690360' id='424868'>
<a class='timestamp' href='#424868'><time timestamp='2021-07-19T10:26:00Z'>10:26</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
yes, 3 other i2p ones, otherwise i have the same list
<br>
</div>

<div class='talk op-msg' data-timestamp='1626690540' id='424869'>
<a class='timestamp' href='#424869'><time timestamp='2021-07-19T10:29:00Z'>10:29</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
4, sent them to you
<br>
</div>

<div class='talk op-msg' data-timestamp='1626691320' id='424870'>
<a class='timestamp' href='#424870'><time timestamp='2021-07-19T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 6 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/e8f85e0e86e9...d3474b8df2f9" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/e8f85e0e86e9...d3474b8df2f9</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626691320' id='424871'>
<a class='timestamp' href='#424871'><time timestamp='2021-07-19T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 0d64b8f Pieter Wuille: Rate limit the processing of incoming addr messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1626691320' id='424872'>
<a class='timestamp' href='#424872'><time timestamp='2021-07-19T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 5648138 Pieter Wuille: Randomize the order of addr processing
<br>
</div>

<div class='talk op-msg' data-timestamp='1626691320' id='424873'>
<a class='timestamp' href='#424873'><time timestamp='2021-07-19T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master b4ece8a Pieter Wuille: Functional tests for addr rate limiting
<br>
</div>

<div class='talk op-msg' data-timestamp='1626691380' id='424874'>
<a class='timestamp' href='#424874'><time timestamp='2021-07-19T10:43:00Z'>10:43</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj merged pull request #22387: Rate limit the processing of rumoured addresses (master...202106_rate_limit_addr) <a href="https://github.com/bitcoin/bitcoin/pull/22387" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22387</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626691500' id='424875'>
<a class='timestamp' href='#424875'><time timestamp='2021-07-19T10:45:00Z'>10:45</time></a>
&lt;<span class='nick nick-16'> emzy</span>&gt;
vasild: I will update my i2p node to master later today.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626692460' id='424876'>
<a class='timestamp' href='#424876'><time timestamp='2021-07-19T11:01:00Z'>11:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #22493: fuzz: Extend addrman fuzz test with deserialize (master...2107-fuzzAddrDeser) <a href="https://github.com/bitcoin/bitcoin/pull/22493" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22493</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626692520' id='424877'>
<a class='timestamp' href='#424877'><time timestamp='2021-07-19T11:02:00Z'>11:02</time></a>
&lt;<span class='nick nick-16'> jnewbery</span>&gt;
vasild: in 22112, is there anything stopping peers from gossipping non-port 0 I2P addresses to us? Will those addresses be entered into our addrman?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626693180' id='424878'>
<a class='timestamp' href='#424878'><time timestamp='2021-07-19T11:13:00Z'>11:13</time></a>
&lt;<span class='nick nick-10'> michaelfolkson</span>&gt;
fanquake robertspigler: Added a StackExchange post for the discussion of Guix within Gitian. Happy to edit/take it down if you don&#x27;t want it up <a href="https://bitcoin.stackexchange.com/questions/107638/whats-the-purpose-of-using-guix-within-gitian-doesnt-that-reintroduce-depende/" class="link" target="_blank">https://bitcoin.stackexchange.com/questions/107638/whats-the-purpose-of-using-guix-within-gitian-doesnt-that-reintroduce-depende/</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626693420' id='424879'>
<a class='timestamp' href='#424879'><time timestamp='2021-07-19T11:17:00Z'>11:17</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
IIRC nothing is stopping peers from gossiping non-port 0 I2P addresses, they will get stored (but not connected to, until our I2P SAM support supports non-zero ports, or other software that does). After next start (when CAddrMan::ResetI2PPorts is invoked) the ports will be changed to 0. That&#x27;s meant to be a temporary measure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626693540' id='424880'>
<a class='timestamp' href='#424880'><time timestamp='2021-07-19T11:19:00Z'>11:19</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
I sometimes wonder if ResetI2PPorts is needed at all--I mean, the amount of I2P peers that has already been gossipped is bound to be very low, peers will broadcast the new port after upgrading, the old ones will drop from the database at some point
<br>
</div>

<div class='talk op-msg' data-timestamp='1626693600' id='424881'>
<a class='timestamp' href='#424881'><time timestamp='2021-07-19T11:20:00Z'>11:20</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
the old behavior has never been in a release
<br>
</div>

<div class='talk op-msg' data-timestamp='1626693840' id='424882'>
<a class='timestamp' href='#424882'><time timestamp='2021-07-19T11:24:00Z'>11:24</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
It was needed to continue making outbound connections to existing I2P peers with port 8333 in the addrman, which otherwise can no longer be connected to nor (afaik) manually removed from the addrman.  The alternative would be for the existing 20-30 peers that have run an I2P service to delete their peers.dat
<br>
</div>

<div class='talk op-msg' data-timestamp='1626693900' id='424883'>
<a class='timestamp' href='#424883'><time timestamp='2021-07-19T11:25:00Z'>11:25</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
emzy: great! you may also want to pick up <a href="https://github.com/bitcoin/bitcoin/pull/22471" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22471</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626693900' id='424884'>
<a class='timestamp' href='#424884'><time timestamp='2021-07-19T11:25:00Z'>11:25</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
or to have all upgraded to current master and restarted, so that ResetI2PPorts() can then be removed before 22.0 instead of at some point afterward
<br>
</div>

<div class='talk op-msg' data-timestamp='1626693900' id='424885'>
<a class='timestamp' href='#424885'><time timestamp='2021-07-19T11:25:00Z'>11:25</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
as it was planned to be a transitory measure
<br>
</div>

<div class='talk op-msg' data-timestamp='1626693900' id='424886'>
<a class='timestamp' href='#424886'><time timestamp='2021-07-19T11:25:00Z'>11:25</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1626693960' id='424887'>
<a class='timestamp' href='#424887'><time timestamp='2021-07-19T11:26:00Z'>11:26</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
(I considered adding a hidden RPC to manually remove addresses from addrman, but that seems like an unneeded attack vector)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694020' id='424888'>
<a class='timestamp' href='#424888'><time timestamp='2021-07-19T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
yeah, I don&#x27;t have a strong opinion but removing ResetI2PPorts() from final 22.0 looks plausible
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694020' id='424889'>
<a class='timestamp' href='#424889'><time timestamp='2021-07-19T11:27:00Z'>11:27</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
if it&#x27;s a one-time upgrade, some versioning mechanism that runs it only once (instead of every node start) would make sense, that said, not having it end up in a release at all would maybe be best
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694080' id='424890'>
<a class='timestamp' href='#424890'><time timestamp='2021-07-19T11:28:00Z'>11:28</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
seems most prudent
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694080' id='424891'>
<a class='timestamp' href='#424891'><time timestamp='2021-07-19T11:28:00Z'>11:28</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
I&#x27;m not yet caught up on the all new addrman brokenness, but surely we shouldn&#x27;t be writing code to compensate for code that was already broken when added to master.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694080' id='424892'>
<a class='timestamp' href='#424892'><time timestamp='2021-07-19T11:28:00Z'>11:28</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
All the bugs should be fixed, and anyone running master just needs to update, delete their peers.dat / whatever. It&#x27;s not like there is  any significant amount of people actually using i2p yet.
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694080' id='424893'>
<a class='timestamp' href='#424893'><time timestamp='2021-07-19T11:28:00Z'>11:28</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
fanquake: right
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694080' id='424894'>
<a class='timestamp' href='#424894'><time timestamp='2021-07-19T11:28:00Z'>11:28</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Working around broken code in master so as not to inconvinience a minority that are running pre-production software seems backwards .
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694140' id='424895'>
<a class='timestamp' href='#424895'><time timestamp='2021-07-19T11:29:00Z'>11:29</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
istm they need to all delete peers.dat (or upgrade to current master first) though
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694140' id='424896'>
<a class='timestamp' href='#424896'><time timestamp='2021-07-19T11:29:00Z'>11:29</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
could even add a release note, though there may be better ways of reaching the few people who test I2P with bitcoin core master
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694200' id='424897'>
<a class='timestamp' href='#424897'><time timestamp='2021-07-19T11:30:00Z'>11:30</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
yes, i know who all of them are except the bitcorn one
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694200' id='424898'>
<a class='timestamp' href='#424898'><time timestamp='2021-07-19T11:30:00Z'>11:30</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
in any case it&#x27;s complciated a bit by having ResetI2PPorts in master as well... like, eveyrone who ran master <b>*in between*</b> that function being added and re moved will not need to remove peers.dat :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694260' id='424899'>
<a class='timestamp' href='#424899'><time timestamp='2021-07-19T11:31:00Z'>11:31</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
right :) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694440' id='424900'>
<a class='timestamp' href='#424900'><time timestamp='2021-07-19T11:34:00Z'>11:34</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
I like solving problems by deleting code :) especially if the code looks risky/hackish and especially if I wrote it ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694500' id='424901'>
<a class='timestamp' href='#424901'><time timestamp='2021-07-19T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
vasild: agree, glad you&#x27;re ok with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694500' id='424902'>
<a class='timestamp' href='#424902'><time timestamp='2021-07-19T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
ok, should we leave master for some more time with ResetI2PPorts() or remove it immediately?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694560' id='424903'>
<a class='timestamp' href='#424903'><time timestamp='2021-07-19T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
we could have a PR and merge it as last thing before the branch-off
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694620' id='424904'>
<a class='timestamp' href='#424904'><time timestamp='2021-07-19T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
but I imagine that&#x27;s going to be soon
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694620' id='424905'>
<a class='timestamp' href='#424905'><time timestamp='2021-07-19T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
with #22387 merged and the I2P addrman issues solved I don&#x27;t think there&#x27;s any blockers left?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694620' id='424906'>
<a class='timestamp' href='#424906'><time timestamp='2021-07-19T11:37:00Z'>11:37</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22387" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22387</a> | Rate limit the processing of rumoured addresses by sipa · Pull Request #22387 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694680' id='424907'>
<a class='timestamp' href='#424907'><time timestamp='2021-07-19T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
this would replace both #22471 and #22468
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694680' id='424908'>
<a class='timestamp' href='#424908'><time timestamp='2021-07-19T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22471" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22471</a> | addrman: reset I2P ports in all &quot;new&quot; buckets by vasild · Pull Request #22471 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694680' id='424909'>
<a class='timestamp' href='#424909'><time timestamp='2021-07-19T11:38:00Z'>11:38</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22468" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22468</a> | addrman: dont overwrite addr_info when resetting I2P ports by vasild · Pull Request #22468 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694740' id='424910'>
<a class='timestamp' href='#424910'><time timestamp='2021-07-19T11:39:00Z'>11:39</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
but not  #22455
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694740' id='424911'>
<a class='timestamp' href='#424911'><time timestamp='2021-07-19T11:39:00Z'>11:39</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22455" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22455</a> | addrman: detect on-disk corrupted nNew and nTried during unserialization by vasild · Pull Request #22455 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694800' id='424912'>
<a class='timestamp' href='#424912'><time timestamp='2021-07-19T11:40:00Z'>11:40</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694860' id='424913'>
<a class='timestamp' href='#424913'><time timestamp='2021-07-19T11:41:00Z'>11:41</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Wouldn&#x27;t #22465 need to go in before rc1?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694860' id='424914'>
<a class='timestamp' href='#424914'><time timestamp='2021-07-19T11:41:00Z'>11:41</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22465" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22465</a> | guix: Pin kernel-header version, time-machine to upstream 1.3.0 commit by dongcarl · Pull Request #22465 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694920' id='424915'>
<a class='timestamp' href='#424915'><time timestamp='2021-07-19T11:42:00Z'>11:42</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
MarcoFalke: yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1626694980' id='424916'>
<a class='timestamp' href='#424916'><time timestamp='2021-07-19T11:43:00Z'>11:43</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
though I am honestly not sure how much of a difference it makes in practice; kernel version dependency is generally an issue for static linking of libc
<br>
</div>

<div class='talk op-msg' data-timestamp='1626695040' id='424917'>
<a class='timestamp' href='#424917'><time timestamp='2021-07-19T11:44:00Z'>11:44</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
libc is supposed to abstract the kernel details from the application; but this might be leaky in some cases
<br>
</div>

<div class='talk op-msg' data-timestamp='1626695220' id='424918'>
<a class='timestamp' href='#424918'><time timestamp='2021-07-19T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
(for example when the application, or one of the statically linked libraries, manually invokes syscalls without handling the non-present case)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626695220' id='424919'>
<a class='timestamp' href='#424919'><time timestamp='2021-07-19T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
can open the pull
<br>
</div>

<div class='talk op-msg' data-timestamp='1626695220' id='424920'>
<a class='timestamp' href='#424920'><time timestamp='2021-07-19T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
i don&#x27;t think this is the case for us but...
<br>
</div>

<div class='talk op-msg' data-timestamp='1626695280' id='424921'>
<a class='timestamp' href='#424921'><time timestamp='2021-07-19T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
(vasild: can open the pull)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626695340' id='424922'>
<a class='timestamp' href='#424922'><time timestamp='2021-07-19T11:49:00Z'>11:49</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
yes, I will shortly
<br>
</div>

<div class='talk op-msg' data-timestamp='1626696840' id='424923'>
<a class='timestamp' href='#424923'><time timestamp='2021-07-19T12:14:00Z'>12:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theStack opened pull request #22495: p2p: refactor: tidy up `PeerManagerImpl::Misbehaving(...)` (master...202107-net-tidy_up_misbehaving) <a href="https://github.com/bitcoin/bitcoin/pull/22495" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22495</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626697260' id='424924'>
<a class='timestamp' href='#424924'><time timestamp='2021-07-19T12:21:00Z'>12:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #22496: [addrman] Remove RemoveInvalid() and ResetI2PPorts() (master...2021-07-remove-addrman-hotfix) <a href="https://github.com/bitcoin/bitcoin/pull/22496" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22496</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626697560' id='424925'>
<a class='timestamp' href='#424925'><time timestamp='2021-07-19T12:26:00Z'>12:26</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] vasild opened pull request #22497: scripted-diff: remove ResetI2PPorts() (revert e0a2b390c14) (master...remove_ResetI2PPorts) <a href="https://github.com/bitcoin/bitcoin/pull/22497" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22497</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626697620' id='424926'>
<a class='timestamp' href='#424926'><time timestamp='2021-07-19T12:27:00Z'>12:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/d3474b8df2f9...54e31742d208" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/d3474b8df2f9...54e31742d208</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626697620' id='424927'>
<a class='timestamp' href='#424927'><time timestamp='2021-07-19T12:27:00Z'>12:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 816f29e Vasil Dimov: addrman: detect on-disk corrupted nNew and nTried during unserialization
<br>
</div>

<div class='talk op-msg' data-timestamp='1626697620' id='424928'>
<a class='timestamp' href='#424928'><time timestamp='2021-07-19T12:27:00Z'>12:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 54e3174 MarcoFalke: Merge bitcoin/bitcoin#22455: addrman: detect on-disk corrupted nNew and nT...
<br>
</div>

<div class='talk op-msg' data-timestamp='1626697680' id='424929'>
<a class='timestamp' href='#424929'><time timestamp='2021-07-19T12:28:00Z'>12:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #22455: addrman: detect on-disk corrupted nNew and nTried during unserialization (master...addrman_detect_negative) <a href="https://github.com/bitcoin/bitcoin/pull/22455" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22455</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626702240' id='424930'>
<a class='timestamp' href='#424930'><time timestamp='2021-07-19T13:44:00Z'>13:44</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #22498: Check that CAddrMan::m_key is not null after deserialize (master...2107-addrmanKeyZero) <a href="https://github.com/bitcoin/bitcoin/pull/22498" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22498</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626702360' id='424931'>
<a class='timestamp' href='#424931'><time timestamp='2021-07-19T13:46:00Z'>13:46</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Should addrman related pull requests be tagged with &quot;p2p&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626703800' id='424932'>
<a class='timestamp' href='#424932'><time timestamp='2021-07-19T14:10:00Z'>14:10</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
I think so, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1626703800' id='424933'>
<a class='timestamp' href='#424933'><time timestamp='2021-07-19T14:10:00Z'>14:10</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
ok, adjusting DrahtBot to do so
<br>
</div>

<div class='talk op-msg' data-timestamp='1626704160' id='424934'>
<a class='timestamp' href='#424934'><time timestamp='2021-07-19T14:16:00Z'>14:16</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Done: <a href="https://github.com/bitcoin/bitcoin/pull/22498#event-5038754615" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22498#event-5038754615</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626704160' id='424935'>
<a class='timestamp' href='#424935'><time timestamp='2021-07-19T14:16:00Z'>14:16</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1626704220' id='424936'>
<a class='timestamp' href='#424936'><time timestamp='2021-07-19T14:17:00Z'>14:17</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sriramdvt opened pull request #22499: Update assumed chain params (master...update_chainparams) <a href="https://github.com/bitcoin/bitcoin/pull/22499" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22499</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626706260' id='424937'>
<a class='timestamp' href='#424937'><time timestamp='2021-07-19T14:51:00Z'>14:51</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #22500: Assert in CAddrMan::Check() (master...2107-addrmanCheckAssert) <a href="https://github.com/bitcoin/bitcoin/pull/22500" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22500</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626706860' id='424938'>
<a class='timestamp' href='#424938'><time timestamp='2021-07-19T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonatack opened pull request #22501: cli: add new address statistics to -netinfo (master...netinfo-addr-statistics) <a href="https://github.com/bitcoin/bitcoin/pull/22501" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22501</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626708720' id='424939'>
<a class='timestamp' href='#424939'><time timestamp='2021-07-19T15:32:00Z'>15:32</time></a>
&lt;<span class='nick nick-6'> josibake</span>&gt;
for anyone who&#x27;s interested, #22235 (automatic generation of example bitcoin.conf) is ready for review
<br>
</div>

<div class='talk op-msg' data-timestamp='1626708720' id='424940'>
<a class='timestamp' href='#424940'><time timestamp='2021-07-19T15:32:00Z'>15:32</time></a>
&lt;<span class='nick nick-4'>@gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/22235" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/22235</a> | script: add script to generate example bitcoin.conf by josibake · Pull Request #22235 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1626709320' id='424941'>
<a class='timestamp' href='#424941'><time timestamp='2021-07-19T15:42:00Z'>15:42</time></a>
&lt;<span class='nick nick-15'> dergoegge</span>&gt;
is anyone aware of `sendrawtransaction` being used in the way that gleb mentioned here: <a href="https://github.com/bitcoin/bitcoin/pull/22340#issuecomment-875542706" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22340#issuecomment-875542706</a> ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626711480' id='424942'>
<a class='timestamp' href='#424942'><time timestamp='2021-07-19T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-6'> jarolrod</span>&gt;
MarcoFalke: circling back on drahtbot and updating it to label addrman changed `P2P`. Maybe it also should remove the `Needs Guix Build` label when it posts its guix build. We still want people to run a guix build and compare hashes right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626711540' id='424943'>
<a class='timestamp' href='#424943'><time timestamp='2021-07-19T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-6'> jarolrod</span>&gt;
^ should not remove
<br>
</div>

<div class='talk op-msg' data-timestamp='1626711540' id='424944'>
<a class='timestamp' href='#424944'><time timestamp='2021-07-19T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Anyone is free to run as many guix builds as they wish
<br>
</div>

<div class='talk op-msg' data-timestamp='1626711600' id='424945'>
<a class='timestamp' href='#424945'><time timestamp='2021-07-19T16:20:00Z'>16:20</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Not sure if we should use the label to indicate <b>*someone*</b> (other than DrahtBot) should run the build
<br>
</div>

<div class='talk op-msg' data-timestamp='1626711600' id='424946'>
<a class='timestamp' href='#424946'><time timestamp='2021-07-19T16:20:00Z'>16:20</time></a>
&lt;<span class='nick nick-14'> hebasto</span>&gt;
^ yeah :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626711600' id='424947'>
<a class='timestamp' href='#424947'><time timestamp='2021-07-19T16:20:00Z'>16:20</time></a>
&lt;<span class='nick nick-6'> jarolrod</span>&gt;
oh ok i see, it&#x27;s for drahtbot
<br>
</div>

<div class='talk op-msg' data-timestamp='1626711660' id='424948'>
<a class='timestamp' href='#424948'><time timestamp='2021-07-19T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
I guess DrahtBot could use &quot;Build&quot; as label to create a guix build 
<br>
</div>

<div class='talk op-msg' data-timestamp='1626711660' id='424949'>
<a class='timestamp' href='#424949'><time timestamp='2021-07-19T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Not sure if it will be fast enough to keep up, though
<br>
</div>

<div class='talk op-msg' data-timestamp='1626711660' id='424950'>
<a class='timestamp' href='#424950'><time timestamp='2021-07-19T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
It is running on half a core (one thread)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626711660' id='424951'>
<a class='timestamp' href='#424951'><time timestamp='2021-07-19T16:21:00Z'>16:21</time></a>
&lt;<span class='nick nick-6'> jarolrod</span>&gt;
that&#x27;s ok, no need for change then
<br>
</div>

<div class='talk op-msg' data-timestamp='1626714840' id='424952'>
<a class='timestamp' href='#424952'><time timestamp='2021-07-19T17:14:00Z'>17:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #22502: scripted-diff: Revert &quot;fuzz: Add Temporary debug assert for oss-fuzz issue&quot; (master...2107-fuzzTempRevert) <a href="https://github.com/bitcoin/bitcoin/pull/22502" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/22502</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1626718560' id='424953'>
<a class='timestamp' href='#424953'><time timestamp='2021-07-19T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-2'> Guest85</span>&gt;
Hey guys! I&#x27;m new here, just a quick question?
<br>
</div>

<div class='talk op-msg' data-timestamp='1626719100' id='424954'>
<a class='timestamp' href='#424954'><time timestamp='2021-07-19T18:25:00Z'>18:25</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
i guess we could rename the label to something like Drahtbot: GUIX build, if that&#x27;s more clear
<br>
</div>

<div class='talk op-msg' data-timestamp='1626719280' id='424955'>
<a class='timestamp' href='#424955'><time timestamp='2021-07-19T18:28:00Z'>18:28</time></a>
&lt;<span class='nick nick-6'> laanwj</span>&gt;
i understand the confusion because the other &#x27;needs...&#x27; labels imply a contributor has to do something
<br>
</div>

<div class='talk op-msg' data-timestamp='1626719340' id='424956'>
<a class='timestamp' href='#424956'><time timestamp='2021-07-19T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
drahtbuild-requested
<br>
</div>

<div class='talk op-msg' data-timestamp='1626719340' id='424957'>
<a class='timestamp' href='#424957'><time timestamp='2021-07-19T18:29:00Z'>18:29</time></a>
&lt;<span class='nick nick-6'> jarolrod</span>&gt;
^^ I had been using that label to find pr&#x27;s that need a guix build done :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626721320' id='424958'>
<a class='timestamp' href='#424958'><time timestamp='2021-07-19T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Sure, will rename
<br>
</div>

<div class='talk op-msg' data-timestamp='1626726180' id='424959'>
<a class='timestamp' href='#424959'><time timestamp='2021-07-19T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
fwiw seeing 4 new I2P addresses since a few hours ago and 5 inbound I2Ps advertising port 8333 (running with marco&#x27;s ADDRMAN_DEBUG assert branch)
<br>
</div>

<div class='talk op-msg' data-timestamp='1626726240' id='424960'>
<a class='timestamp' href='#424960'><time timestamp='2021-07-19T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
s/running/i am running/
<br>
</div>

<div class='talk op-msg' data-timestamp='1626732600' id='424961'>
<a class='timestamp' href='#424961'><time timestamp='2021-07-19T22:10:00Z'>22:10</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
never mind about the port 8333 part; i had not noticed that the ADDRMAN_DEBUG assert branch was before the I2P Port 0 merge...rebased, rebuilt, restarted, no inbound I2Ps with port 8333 -&gt; to bed
<br>
</div>

<div class='talk op-msg' data-timestamp='1626733560' id='424962'>
<a class='timestamp' href='#424962'><time timestamp='2021-07-19T22:26:00Z'>22:26</time></a>
&lt;<span class='nick nick-1'> dhruv</span>&gt;
btc-irc
<br>
</div>

<div class='talk op-msg' data-timestamp='1626733620' id='424963'>
<a class='timestamp' href='#424963'><time timestamp='2021-07-19T22:27:00Z'>22:27</time></a>
&lt;<span class='nick nick-1'> dhruv</span>&gt;
whoops, gotta be careful. sorry.
<br>
</div>

</div>
</section>

</body>
</html>
