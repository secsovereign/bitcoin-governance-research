<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2018-06-06
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2018-06-06' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:22 UTC</pre>
<pre><a href="/bitcoin-core-dev/2018-05-06">&lt;</a><span class='header'>    June 2018     </span><a href="/bitcoin-core-dev/2018-07-06">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                <a class="" href="/bitcoin-core-dev/2018-06-01">1</a>  <a class="" href="/bitcoin-core-dev/2018-06-02">2</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2018-06-03">3</a>  <a class="" href="/bitcoin-core-dev/2018-06-04">4</a>  <a class="" href="/bitcoin-core-dev/2018-06-05">5</a>  <a class="current" href="/bitcoin-core-dev/2018-06-06">6</a>  <a class="" href="/bitcoin-core-dev/2018-06-07">7</a>  <a class="" href="/bitcoin-core-dev/2018-06-08">8</a>  <a class="" href="/bitcoin-core-dev/2018-06-09">9</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-06-10">10</a> <a class="" href="/bitcoin-core-dev/2018-06-11">11</a> <a class="" href="/bitcoin-core-dev/2018-06-12">12</a> <a class="" href="/bitcoin-core-dev/2018-06-13">13</a> <a class="" href="/bitcoin-core-dev/2018-06-14">14</a> <a class="" href="/bitcoin-core-dev/2018-06-15">15</a> <a class="" href="/bitcoin-core-dev/2018-06-16">16</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-06-17">17</a> <a class="" href="/bitcoin-core-dev/2018-06-18">18</a> <a class="" href="/bitcoin-core-dev/2018-06-19">19</a> <a class="" href="/bitcoin-core-dev/2018-06-20">20</a> <a class="" href="/bitcoin-core-dev/2018-06-21">21</a> <a class="" href="/bitcoin-core-dev/2018-06-22">22</a> <a class="" href="/bitcoin-core-dev/2018-06-23">23</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2018-06-24">24</a> <a class="" href="/bitcoin-core-dev/2018-06-25">25</a> <a class="" href="/bitcoin-core-dev/2018-06-26">26</a> <a class="" href="/bitcoin-core-dev/2018-06-27">27</a> <a class="" href="/bitcoin-core-dev/2018-06-28">28</a> <a class="" href="/bitcoin-core-dev/2018-06-29">29</a> <a class="" href="/bitcoin-core-dev/2018-06-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1528253400' id='616527'>
<a class='timestamp' href='#616527'><time timestamp='2018-06-06T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
FYI, I have assigned all non-mergeable open pulls to a new label &quot;Needs rebase&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1528253400' id='616528'>
<a class='timestamp' href='#616528'><time timestamp='2018-06-06T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Makes it easier to sort 
<br>
</div>

<div class='talk op-msg' data-timestamp='1528253400' id='616529'>
<a class='timestamp' href='#616529'><time timestamp='2018-06-06T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
e.g. <a href="https://github.com/bitcoin/bitcoin/pulls?q=is%3Apr+is%3Aopen+label%3A%22Needs+rebase%22" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pulls?q=is%3Apr+is%3Aopen+label%3A%22Needs+rebase%22</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1528263420' id='616530'>
<a class='timestamp' href='#616530'><time timestamp='2018-06-06T05:37:00Z'>05:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] lucash-dev opened pull request #13404: [tests] speed up of tx_validationcache_tests by reusing of CTransaction. (master...speedup-tx_validationcache_tests) <a href="https://github.com/bitcoin/bitcoin/pull/13404" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13404</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1528273980' id='616531'>
<a class='timestamp' href='#616531'><time timestamp='2018-06-06T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
MarcoFalke: I hope that happens automatically? otherwise, it sounds like a nightmare to keep it up to date
<br>
</div>

<div class='talk op-msg' data-timestamp='1528273980' id='616532'>
<a class='timestamp' href='#616532'><time timestamp='2018-06-06T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
MarcoFalke: also, it&#x27;s already possible to use bitcoinacks.com to keep track of that
<br>
</div>

<div class='talk op-msg' data-timestamp='1528284840' id='616533'>
<a class='timestamp' href='#616533'><time timestamp='2018-06-06T11:34:00Z'>11:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
how are things with 0.16.0rc1? do we have anything that needs to be backported for rc2? I haven&#x27;t heard any reports of bugs at least.
<br>
</div>

<div class='talk op-msg' data-timestamp='1528284900' id='616534'>
<a class='timestamp' href='#616534'><time timestamp='2018-06-06T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if not, we should do a very fast rc2 for the translations issue and then tag final
<br>
</div>

<div class='talk op-msg' data-timestamp='1528284900' id='616535'>
<a class='timestamp' href='#616535'><time timestamp='2018-06-06T11:35:00Z'>11:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
eh, 0.16.1 obvs
<br>
</div>

<div class='talk op-msg' data-timestamp='1528286400' id='616536'>
<a class='timestamp' href='#616536'><time timestamp='2018-06-06T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ken2812221 opened pull request #13406: travis: Add make step so that travis can build all executables for Mac. (master...travis_make_mac) <a href="https://github.com/bitcoin/bitcoin/pull/13406" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13406</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1528291080' id='616537'>
<a class='timestamp' href='#616537'><time timestamp='2018-06-06T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/a589f536b5e1...e4082d59f53d" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/a589f536b5e1...e4082d59f53d</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1528291080' id='616538'>
<a class='timestamp' href='#616538'><time timestamp='2018-06-06T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 9d6c9db Ben Woosley: lint: Add linter to error on #include &lt;*.cpp&gt;...
<br>
</div>

<div class='talk op-msg' data-timestamp='1528291080' id='616539'>
<a class='timestamp' href='#616539'><time timestamp='2018-06-06T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master e4082d5 MarcoFalke: Merge #13301: lint: Add linter to error on #include &lt;*.cpp&gt;...
<br>
</div>

<div class='talk op-msg' data-timestamp='1528291140' id='616540'>
<a class='timestamp' href='#616540'><time timestamp='2018-06-06T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #13301: lint: Add linter to error on #include &lt;*.cpp&gt; (master...lint-include-cpp) <a href="https://github.com/bitcoin/bitcoin/pull/13301" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13301</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1528294500' id='616541'>
<a class='timestamp' href='#616541'><time timestamp='2018-06-06T14:15:00Z'>14:15</time></a>
&lt;<span class='nick nick-10'> jamesob_</span>&gt;
anyone willing to trade reviews for #13168?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528294500' id='616542'>
<a class='timestamp' href='#616542'><time timestamp='2018-06-06T14:15:00Z'>14:15</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13168" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13168</a> | Thread names in logs and deadlock debug tools (take 2) by jamesob · Pull Request #13168 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1528295160' id='616543'>
<a class='timestamp' href='#616543'><time timestamp='2018-06-06T14:26:00Z'>14:26</time></a>
&lt;<span class='nick nick-5'> ryanzim</span>&gt;
<a href="https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki#p2wpkh" class="link" target="_blank">https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki#p2wpkh</a> says:
<br>
</div>

<div class='talk op-msg' data-timestamp='1528295160' id='616544'>
<a class='timestamp' href='#616544'><time timestamp='2018-06-06T14:26:00Z'>14:26</time></a>
&lt;<span class='nick nick-5'> ryanzim</span>&gt;
&gt; The HASH160 of the pubkey in witness must match the witness program. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1528295220' id='616545'>
<a class='timestamp' href='#616545'><time timestamp='2018-06-06T14:27:00Z'>14:27</time></a>
&lt;<span class='nick nick-5'> ryanzim</span>&gt;
This seems to imply that the witness program is HASH160(pubkey), when it&#x27;s actually HASH160(SHA256(pubkey))
<br>
</div>

<div class='talk op-msg' data-timestamp='1528295220' id='616546'>
<a class='timestamp' href='#616546'><time timestamp='2018-06-06T14:27:00Z'>14:27</time></a>
&lt;<span class='nick nick-5'> ryanzim</span>&gt;
Shouldn&#x27;t this be clarified?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528295460' id='616547'>
<a class='timestamp' href='#616547'><time timestamp='2018-06-06T14:31:00Z'>14:31</time></a>
&lt;<span class='nick nick-5'> ryanzim</span>&gt;
Ah, sorry; doing a little more research; seems I was confusing HASH160 and ripemd160; nvm
<br>
</div>

<div class='talk op-msg' data-timestamp='1528300140' id='616548'>
<a class='timestamp' href='#616548'><time timestamp='2018-06-06T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
Currently there is a DbEnv can reference multiple Db instances right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528300140' id='616549'>
<a class='timestamp' href='#616549'><time timestamp='2018-06-06T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
s/there is//
<br>
</div>

<div class='talk op-msg' data-timestamp='1528300320' id='616550'>
<a class='timestamp' href='#616550'><time timestamp='2018-06-06T15:52:00Z'>15:52</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
Also, BerkeleyDatabase::Flush calls BerkeleyEnvironment::Flush, is there a reason to keep it like that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528300680' id='616551'>
<a class='timestamp' href='#616551'><time timestamp='2018-06-06T15:58:00Z'>15:58</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
so that when unloading a wallet all wallets wouldn&#x27;t have to be flushed 
<br>
</div>

<div class='talk op-msg' data-timestamp='1528300860' id='616552'>
<a class='timestamp' href='#616552'><time timestamp='2018-06-06T16:01:00Z'>16:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] eudisd closed pull request #13373: Qt: Update Wallet Encryption Titles To Better Describe Process (master...feature/bitcoin-#13245) <a href="https://github.com/bitcoin/bitcoin/pull/13373" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13373</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1528301220' id='616553'>
<a class='timestamp' href='#616553'><time timestamp='2018-06-06T16:07:00Z'>16:07</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
jnewbery: yes there is a couple of things to fix
<br>
</div>

<div class='talk op-msg' data-timestamp='1528301220' id='616554'>
<a class='timestamp' href='#616554'><time timestamp='2018-06-06T16:07:00Z'>16:07</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
jnewbery: one is as follow
<br>
</div>

<div class='talk op-msg' data-timestamp='1528301220' id='616555'>
<a class='timestamp' href='#616555'><time timestamp='2018-06-06T16:07:00Z'>16:07</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
bitcoind -regtest -debug -wallet=w1 -wallet=w2
<br>
</div>

<div class='talk op-msg' data-timestamp='1528301220' id='616556'>
<a class='timestamp' href='#616556'><time timestamp='2018-06-06T16:07:00Z'>16:07</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
bitcoin-cli -regtest unloadwallet w1
<br>
</div>

<div class='talk op-msg' data-timestamp='1528301280' id='616557'>
<a class='timestamp' href='#616557'><time timestamp='2018-06-06T16:08:00Z'>16:08</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
bitcoin-cli -regtest -rpcwallet=w2 getwalletinfo
<br>
</div>

<div class='talk op-msg' data-timestamp='1528301280' id='616558'>
<a class='timestamp' href='#616558'><time timestamp='2018-06-06T16:08:00Z'>16:08</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
see above questions
<br>
</div>

<div class='talk op-msg' data-timestamp='1528304100' id='616559'>
<a class='timestamp' href='#616559'><time timestamp='2018-06-06T16:55:00Z'>16:55</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
wumpus: I know it is on bitcoinacks.com, but I don&#x27;t like the idea to switch back and forth between websites when you could have it all in one place
<br>
</div>

<div class='talk op-msg' data-timestamp='1528304100' id='616560'>
<a class='timestamp' href='#616560'><time timestamp='2018-06-06T16:55:00Z'>16:55</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
And yes, will be automated in the future
<br>
</div>

<div class='talk op-msg' data-timestamp='1528304160' id='616561'>
<a class='timestamp' href='#616561'><time timestamp='2018-06-06T16:56:00Z'>16:56</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
ACK on the quick rc2
<br>
</div>

<div class='talk op-msg' data-timestamp='1528305780' id='616562'>
<a class='timestamp' href='#616562'><time timestamp='2018-06-06T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] skeees opened pull request #13407: [refactor, move-only-ish] Refactor mempool accept/reject logic (master...atmp-p2p-refactor) <a href="https://github.com/bitcoin/bitcoin/pull/13407" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13407</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1528306260' id='616563'>
<a class='timestamp' href='#616563'><time timestamp='2018-06-06T17:31:00Z'>17:31</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: did you happen to bench sha2 with sse41 + avx?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528306620' id='616564'>
<a class='timestamp' href='#616564'><time timestamp='2018-06-06T17:37:00Z'>17:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: ah, forgot about that, good idea
<br>
</div>

<div class='talk op-msg' data-timestamp='1528306680' id='616565'>
<a class='timestamp' href='#616565'><time timestamp='2018-06-06T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: feel like fixing the proliferation of various crypto libs in the makefile?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528306680' id='616566'>
<a class='timestamp' href='#616566'><time timestamp='2018-06-06T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: sure thing, will PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307280' id='616567'>
<a class='timestamp' href='#616567'><time timestamp='2018-06-06T17:48:00Z'>17:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: sse41 2.9ms, sse41 (compiled with -mavx) 2.0ms, avx2 1.1ms
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307340' id='616568'>
<a class='timestamp' href='#616568'><time timestamp='2018-06-06T17:49:00Z'>17:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s a very significant improvement...
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307340' id='616569'>
<a class='timestamp' href='#616569'><time timestamp='2018-06-06T17:49:00Z'>17:49</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: yep, same result on the aws instance I just fired up
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307460' id='616570'>
<a class='timestamp' href='#616570'><time timestamp='2018-06-06T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: the current avx2 path falls back to sse41 for single transforms, right? So presumably that benefits as well?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307460' id='616571'>
<a class='timestamp' href='#616571'><time timestamp='2018-06-06T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yup     
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307520' id='616572'>
<a class='timestamp' href='#616572'><time timestamp='2018-06-06T17:52:00Z'>17:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: ah, no
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307520' id='616573'>
<a class='timestamp' href='#616573'><time timestamp='2018-06-06T17:52:00Z'>17:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it falls back to sse41 for 4 elements
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307520' id='616574'>
<a class='timestamp' href='#616574'><time timestamp='2018-06-06T17:52:00Z'>17:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there is also an asm sse4 single implementation... but that&#x27;s not using intrinsics, so won&#x27;t benefit from -mavx
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307580' id='616575'>
<a class='timestamp' href='#616575'><time timestamp='2018-06-06T17:53:00Z'>17:53</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ah yes, ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307640' id='616576'>
<a class='timestamp' href='#616576'><time timestamp='2018-06-06T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we should try to convert that sse4 asm code to intrinsics, though
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307700' id='616577'>
<a class='timestamp' href='#616577'><time timestamp='2018-06-06T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
so, how do you want to move forward? Seems to me it makes sense to compile different bundles, where all contents are built with the flags
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307760' id='616578'>
<a class='timestamp' href='#616578'><time timestamp='2018-06-06T17:56:00Z'>17:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i guess we can compile the same source file twice, with a different -D specific to that build, which changes the namespace name?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307820' id='616579'>
<a class='timestamp' href='#616579'><time timestamp='2018-06-06T17:57:00Z'>17:57</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
so for ex, libbitcoin_crypto-avx.a is sha256.cpp, sha256_sse41.cpp, etc. Just built with the avx flags...
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307820' id='616580'>
<a class='timestamp' href='#616580'><time timestamp='2018-06-06T17:57:00Z'>17:57</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307940' id='616581'>
<a class='timestamp' href='#616581'><time timestamp='2018-06-06T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ok. how about: I&#x27;ll do the simple build changes, we can get shani and power8 in, then we can redo the structure
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307940' id='616582'>
<a class='timestamp' href='#616582'><time timestamp='2018-06-06T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sounds good
<br>
</div>

<div class='talk op-msg' data-timestamp='1528307940' id='616583'>
<a class='timestamp' href='#616583'><time timestamp='2018-06-06T17:59:00Z'>17:59</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ok, thanks for testing
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308120' id='616584'>
<a class='timestamp' href='#616584'><time timestamp='2018-06-06T18:02:00Z'>18:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: these numbers are on an 7th gen i7 CPU
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308180' id='616585'>
<a class='timestamp' href='#616585'><time timestamp='2018-06-06T18:03:00Z'>18:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;ll also try on ryzen
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308240' id='616586'>
<a class='timestamp' href='#616586'><time timestamp='2018-06-06T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ok. based on the other tests, I&#x27;d be perfectly happy with no-change there :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308360' id='616587'>
<a class='timestamp' href='#616587'><time timestamp='2018-06-06T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
should figure out what AVX instruction&#x27;s its substituting in...
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308480' id='616588'>
<a class='timestamp' href='#616588'><time timestamp='2018-06-06T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: my assumption is that it&#x27;s just using the higher 128 bits of the 256 registers as extra register space
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308480' id='616589'>
<a class='timestamp' href='#616589'><time timestamp='2018-06-06T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: I did asm dumps of Round() split out, but don&#x27;t speak enough asm to know what I&#x27;m looking at
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308480' id='616590'>
<a class='timestamp' href='#616590'><time timestamp='2018-06-06T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
I can paste those if you&#x27;d like
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308600' id='616591'>
<a class='timestamp' href='#616591'><time timestamp='2018-06-06T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
anything less focused than Round got too messy
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308780' id='616592'>
<a class='timestamp' href='#616592'><time timestamp='2018-06-06T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: on Ryzen: sse41 2.8ms, sse41 w/ -mavx 2.2ms, avx2 2.1ms
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308780' id='616593'>
<a class='timestamp' href='#616593'><time timestamp='2018-06-06T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
woohoo!
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308780' id='616594'>
<a class='timestamp' href='#616594'><time timestamp='2018-06-06T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(Ryzen actually only has 4-way parallel arithmetic, so avx2 doesn&#x27;t have that much of a gain)
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308780' id='616595'>
<a class='timestamp' href='#616595'><time timestamp='2018-06-06T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
interesting that it&#x27;s almost the same as avx2
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308780' id='616596'>
<a class='timestamp' href='#616596'><time timestamp='2018-06-06T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ah     
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308900' id='616597'>
<a class='timestamp' href='#616597'><time timestamp='2018-06-06T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-5'> jarthur</span>&gt;
Yep, it&#x27;s practically just &quot;API compatible&quot; with AVX2.
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308900' id='616598'>
<a class='timestamp' href='#616598'><time timestamp='2018-06-06T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well it also gives you 256-bit registers
<br>
</div>

<div class='talk op-msg' data-timestamp='1528308900' id='616599'>
<a class='timestamp' href='#616599'><time timestamp='2018-06-06T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i guess those exist at AVX already
<br>
</div>

<div class='talk op-msg' data-timestamp='1528309020' id='616600'>
<a class='timestamp' href='#616600'><time timestamp='2018-06-06T18:17:00Z'>18:17</time></a>
&lt;<span class='nick nick-5'> jarthur</span>&gt;
sipa: gmaxwell mentioned that zen might be able to do parallel sha-ni runs if each step is loaded up side by side. Do you know if anyone has played with that yet? I volunteered at some point but didn&#x27;t get around to it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1528309080' id='616601'>
<a class='timestamp' href='#616601'><time timestamp='2018-06-06T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jarthur: yup, 2-way SHA-NI is faster than 1-way on my system
<br>
</div>

<div class='talk op-msg' data-timestamp='1528309080' id='616602'>
<a class='timestamp' href='#616602'><time timestamp='2018-06-06T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-5'> jarthur</span>&gt;
nice! Is that code in your branch atm?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528309080' id='616603'>
<a class='timestamp' href='#616603'><time timestamp='2018-06-06T18:18:00Z'>18:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yup     
<br>
</div>

<div class='talk op-msg' data-timestamp='1528309140' id='616604'>
<a class='timestamp' href='#616604'><time timestamp='2018-06-06T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-5'> jarthur</span>&gt;
rockin
<br>
</div>

<div class='talk op-msg' data-timestamp='1528309140' id='616605'>
<a class='timestamp' href='#616605'><time timestamp='2018-06-06T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(not quite 2x - the implementation needs 10 registers-ish, so 2-way needs 20, while there are only 16 addressable ones, resulting in spills)
<br>
</div>

<div class='talk op-msg' data-timestamp='1528309140' id='616606'>
<a class='timestamp' href='#616606'><time timestamp='2018-06-06T18:19:00Z'>18:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
IIRC it took a benchmark from 0.83ms to 0.61ms by doing the 2-way
<br>
</div>

<div class='talk op-msg' data-timestamp='1528309200' id='616607'>
<a class='timestamp' href='#616607'><time timestamp='2018-06-06T18:20:00Z'>18:20</time></a>
&lt;<span class='nick nick-5'> jarthur</span>&gt;
that&#x27;s significant in bitcoin land
<br>
</div>

<div class='talk op-msg' data-timestamp='1528309260' id='616608'>
<a class='timestamp' href='#616608'><time timestamp='2018-06-06T18:21:00Z'>18:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jarthur: <a href="https://github.com/sipa/bitcoin/blob/bb80ab25963f56cad9bb560e59c77d40f351901b/src/crypto/sha256_shani.cpp#L151" class="link" target="_blank">https://github.com/sipa/bitcoin/blob/bb80ab25963f56cad9bb560e59c77d40f351901b/src/crypto/sha256_shani.cpp#L151</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1528309260' id='616609'>
<a class='timestamp' href='#616609'><time timestamp='2018-06-06T18:21:00Z'>18:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it just calls every round function twice in a row
<br>
</div>

<div class='talk op-msg' data-timestamp='1528309320' id='616610'>
<a class='timestamp' href='#616610'><time timestamp='2018-06-06T18:22:00Z'>18:22</time></a>
&lt;<span class='nick nick-5'> jarthur</span>&gt;
Thanks. Looks nice and clean with those inlines.
<br>
</div>

<div class='talk op-msg' data-timestamp='1528311240' id='616611'>
<a class='timestamp' href='#616611'><time timestamp='2018-06-06T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
who is DrahtBot?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528312020' id='616612'>
<a class='timestamp' href='#616612'><time timestamp='2018-06-06T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sipa: MarcoFalke&#x27;s bot
<br>
</div>

<div class='talk op-msg' data-timestamp='1528312020' id='616613'>
<a class='timestamp' href='#616613'><time timestamp='2018-06-06T19:07:00Z'>19:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, nice
<br>
</div>

<div class='talk op-msg' data-timestamp='1528312080' id='616614'>
<a class='timestamp' href='#616614'><time timestamp='2018-06-06T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
[ ] I&#x27;m not a robot
<br>
</div>

<div class='talk op-msg' data-timestamp='1528312080' id='616615'>
<a class='timestamp' href='#616615'><time timestamp='2018-06-06T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, i meant &quot;who is running Drahtbot&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1528312080' id='616616'>
<a class='timestamp' href='#616616'><time timestamp='2018-06-06T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i did realize it was a bot :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1528312080' id='616617'>
<a class='timestamp' href='#616617'><time timestamp='2018-06-06T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how does it figure out conflicts?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528312140' id='616618'>
<a class='timestamp' href='#616618'><time timestamp='2018-06-06T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
does it try every combination of 2 PRs?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528312620' id='616619'>
<a class='timestamp' href='#616619'><time timestamp='2018-06-06T19:17:00Z'>19:17</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
sipa: Yes, rn. I might implement a smart solution when I have time. Though, the compute overhead is trivial compared to the latency by the github api for now...
<br>
</div>

<div class='talk op-msg' data-timestamp='1528313160' id='616620'>
<a class='timestamp' href='#616620'><time timestamp='2018-06-06T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
&gt; i did realize it was a bot :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1528313160' id='616621'>
<a class='timestamp' href='#616621'><time timestamp='2018-06-06T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Thanks for the compliment :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1528313280' id='616622'>
<a class='timestamp' href='#616622'><time timestamp='2018-06-06T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theuni opened pull request #13408: crypto: cleanup sha256 build (master...sha2-cleanup) <a href="https://github.com/bitcoin/bitcoin/pull/13408" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/13408</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1528313280' id='616623'>
<a class='timestamp' href='#616623'><time timestamp='2018-06-06T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: ^^
<br>
</div>

<div class='talk op-msg' data-timestamp='1528313580' id='616624'>
<a class='timestamp' href='#616624'><time timestamp='2018-06-06T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: i&#x27;d rather keep the explicit -D... in the makefile for the arch specific crypto libs
<br>
</div>

<div class='talk op-msg' data-timestamp='1528313580' id='616625'>
<a class='timestamp' href='#616625'><time timestamp='2018-06-06T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rather than rely on config.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1528313640' id='616626'>
<a class='timestamp' href='#616626'><time timestamp='2018-06-06T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: for what reason? We&#x27;re already relying on config.h for endian/swap
<br>
</div>

<div class='talk op-msg' data-timestamp='1528313640' id='616627'>
<a class='timestamp' href='#616627'><time timestamp='2018-06-06T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: because different libs may be compiled with different flags
<br>
</div>

<div class='talk op-msg' data-timestamp='1528313700' id='616628'>
<a class='timestamp' href='#616628'><time timestamp='2018-06-06T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(expecting the avx/sse4 split)
<br>
</div>

<div class='talk op-msg' data-timestamp='1528313820' id='616629'>
<a class='timestamp' href='#616629'><time timestamp='2018-06-06T19:37:00Z'>19:37</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: hmm, I had a different approach in mind. But sure, I&#x27;ll revert that and we can sha256 it out when we get there.
<br>
</div>

<div class='talk op-msg' data-timestamp='1528313940' id='616630'>
<a class='timestamp' href='#616630'><time timestamp='2018-06-06T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-4'> jamesob</span>&gt;
wumpus: how much more review does a bench-only change like #13219 need?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528313940' id='616631'>
<a class='timestamp' href='#616631'><time timestamp='2018-06-06T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/13219" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/13219</a> | bench: Add block assemble benchmark by MarcoFalke · Pull Request #13219 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1528314000' id='616632'>
<a class='timestamp' href='#616632'><time timestamp='2018-06-06T19:40:00Z'>19:40</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
jamesob: I guess it is fine, but just covered/hidden by a ton of other open pull requests.
<br>
</div>

<div class='talk op-msg' data-timestamp='1528314720' id='616633'>
<a class='timestamp' href='#616633'><time timestamp='2018-06-06T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: if you have a different idea, sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1528320420' id='616634'>
<a class='timestamp' href='#616634'><time timestamp='2018-06-06T21:27:00Z'>21:27</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: <a href="https://github.com/theuni/bitcoin/commits/sha2-libs" class="link" target="_blank">https://github.com/theuni/bitcoin/commits/sha2-libs</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1528320420' id='616635'>
<a class='timestamp' href='#616635'><time timestamp='2018-06-06T21:27:00Z'>21:27</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
that has the libs split out, rebuilt for each isn set, and adds avx
<br>
</div>

<div class='talk op-msg' data-timestamp='1528320480' id='616636'>
<a class='timestamp' href='#616636'><time timestamp='2018-06-06T21:28:00Z'>21:28</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
and yea, i see your point now, we need to pass in a flag for the namespace
<br>
</div>

<div class='talk op-msg' data-timestamp='1528321560' id='616637'>
<a class='timestamp' href='#616637'><time timestamp='2018-06-06T21:46:00Z'>21:46</time></a>
&lt;<span class='nick nick-5'> jarthur</span>&gt;
sipa cfields, are we going down the direction that optimal instruction set would be picked at runtime, and default b86_64 build would have the lot of them compiled?
<br>
</div>

<div class='talk op-msg' data-timestamp='1528321560' id='616638'>
<a class='timestamp' href='#616638'><time timestamp='2018-06-06T21:46:00Z'>21:46</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jarthur: yes. that&#x27;s already the case, we&#x27;re just diving deeper.
<br>
</div>

<div class='talk op-msg' data-timestamp='1528321800' id='616639'>
<a class='timestamp' href='#616639'><time timestamp='2018-06-06T21:50:00Z'>21:50</time></a>
&lt;<span class='nick nick-5'> jarthur</span>&gt;
thanks
<br>
</div>

</div>
</section>

</body>
</html>
