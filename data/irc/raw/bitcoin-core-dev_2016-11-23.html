<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2016-11-23
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2016-11-23' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:25 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-10-23">&lt;</a><span class='header'>  November 2016   </span><a href="/bitcoin-core-dev/2016-12-23">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;       <a class="" href="/bitcoin-core-dev/2016-11-01">1</a>  <a class="" href="/bitcoin-core-dev/2016-11-02">2</a>  <a class="" href="/bitcoin-core-dev/2016-11-03">3</a>  <a class="" href="/bitcoin-core-dev/2016-11-04">4</a>  <a class="" href="/bitcoin-core-dev/2016-11-05">5</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2016-11-06">6</a>  <a class="" href="/bitcoin-core-dev/2016-11-07">7</a>  <a class="" href="/bitcoin-core-dev/2016-11-08">8</a>  <a class="" href="/bitcoin-core-dev/2016-11-09">9</a> <a class="" href="/bitcoin-core-dev/2016-11-10">10</a> <a class="" href="/bitcoin-core-dev/2016-11-11">11</a> <a class="" href="/bitcoin-core-dev/2016-11-12">12</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-11-13">13</a> <a class="" href="/bitcoin-core-dev/2016-11-14">14</a> <a class="" href="/bitcoin-core-dev/2016-11-15">15</a> <a class="" href="/bitcoin-core-dev/2016-11-16">16</a> <a class="" href="/bitcoin-core-dev/2016-11-17">17</a> <a class="" href="/bitcoin-core-dev/2016-11-18">18</a> <a class="" href="/bitcoin-core-dev/2016-11-19">19</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-11-20">20</a> <a class="" href="/bitcoin-core-dev/2016-11-21">21</a> <a class="" href="/bitcoin-core-dev/2016-11-22">22</a> <a class="current" href="/bitcoin-core-dev/2016-11-23">23</a> <a class="" href="/bitcoin-core-dev/2016-11-24">24</a> <a class="" href="/bitcoin-core-dev/2016-11-25">25</a> <a class="" href="/bitcoin-core-dev/2016-11-26">26</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2016-11-27">27</a> <a class="" href="/bitcoin-core-dev/2016-11-28">28</a> <a class="" href="/bitcoin-core-dev/2016-11-29">29</a> <a class="" href="/bitcoin-core-dev/2016-11-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1479879660' id='512730'>
<a class='timestamp' href='#512730'><time timestamp='2016-11-23T05:41:00Z'>05:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
instagibbs: yes there are testcases for zmq and rest
<br>
</div>

<div class='talk op-msg' data-timestamp='1479881640' id='512731'>
<a class='timestamp' href='#512731'><time timestamp='2016-11-23T06:14:00Z'>06:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/ac489b24453c...4d8558a2871e" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/ac489b24453c...4d8558a2871e</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479881640' id='512732'>
<a class='timestamp' href='#512732'><time timestamp='2016-11-23T06:14:00Z'>06:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ce2bb23 jnewbery: getrawtransaction should take a bool for verbose
<br>
</div>

<div class='talk op-msg' data-timestamp='1479881640' id='512733'>
<a class='timestamp' href='#512733'><time timestamp='2016-11-23T06:14:00Z'>06:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 240189b John Newbery: add testcases for getrawtransaction
<br>
</div>

<div class='talk op-msg' data-timestamp='1479881640' id='512734'>
<a class='timestamp' href='#512734'><time timestamp='2016-11-23T06:14:00Z'>06:14</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 4d8558a Wladimir J. van der Laan: Merge #9025: getrawtransaction should take a bool for verbose...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479881880' id='512735'>
<a class='timestamp' href='#512735'><time timestamp='2016-11-23T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/4d8558a2871e...40022fe5f2b5" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/4d8558a2871e...40022fe5f2b5</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479881880' id='512736'>
<a class='timestamp' href='#512736'><time timestamp='2016-11-23T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 2e44893 Jonas Schnelli: Move -salvagewallet, -zap(wtx) to where they belong
<br>
</div>

<div class='talk op-msg' data-timestamp='1479881880' id='512737'>
<a class='timestamp' href='#512737'><time timestamp='2016-11-23T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 40022fe Wladimir J. van der Laan: Merge #9142: Move -salvagewallet, -zap(wtx) to where they belong...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479881880' id='512738'>
<a class='timestamp' href='#512738'><time timestamp='2016-11-23T06:18:00Z'>06:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9142: Move -salvagewallet, -zap(wtx) to where they belong (master...2016/11/wallet_init) <a href="https://github.com/bitcoin/bitcoin/pull/9142" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9142</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479881940' id='512739'>
<a class='timestamp' href='#512739'><time timestamp='2016-11-23T06:19:00Z'>06:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
can people please notify me if there is a pull which is clearly ready for merging? (e.g. 9142 had three utacks and was ready for merge for ~7 days already)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479881940' id='512740'>
<a class='timestamp' href='#512740'><time timestamp='2016-11-23T06:19:00Z'>06:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there are too many open for me to keep track of so I really need help in that
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882300' id='512741'>
<a class='timestamp' href='#512741'><time timestamp='2016-11-23T06:25:00Z'>06:25</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/40022fe5f2b5...5ea5e0401cb3" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/40022fe5f2b5...5ea5e0401cb3</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882300' id='512742'>
<a class='timestamp' href='#512742'><time timestamp='2016-11-23T06:25:00Z'>06:25</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 4512550 Jonas Schnelli: Remove unnecessary calls to CheckFinalTx
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882300' id='512743'>
<a class='timestamp' href='#512743'><time timestamp='2016-11-23T06:25:00Z'>06:25</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 5ea5e04 Wladimir J. van der Laan: Merge #9141: Remove unnecessary calls to CheckFinalTx...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882300' id='512744'>
<a class='timestamp' href='#512744'><time timestamp='2016-11-23T06:25:00Z'>06:25</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9141: Remove unnecessary calls to CheckFinalTx (master...2016/11/istrusted) <a href="https://github.com/bitcoin/bitcoin/pull/9141" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9141</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882540' id='512745'>
<a class='timestamp' href='#512745'><time timestamp='2016-11-23T06:29:00Z'>06:29</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882600' id='512746'>
<a class='timestamp' href='#512746'><time timestamp='2016-11-23T06:30:00Z'>06:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882600' id='512747'>
<a class='timestamp' href='#512747'><time timestamp='2016-11-23T06:30:00Z'>06:30</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: would a &quot;looks ready&quot; label help?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882600' id='512748'>
<a class='timestamp' href='#512748'><time timestamp='2016-11-23T06:30:00Z'>06:30</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
not sure if that would just be noisy
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882720' id='512749'>
<a class='timestamp' href='#512749'><time timestamp='2016-11-23T06:32:00Z'>06:32</time></a>
&lt;<span class='nick nick-6'> shangzhou</span>&gt;
wumpus: #9037 per author&#x27;s last comment
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882720' id='512750'>
<a class='timestamp' href='#512750'><time timestamp='2016-11-23T06:32:00Z'>06:32</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9037" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9037</a> | net: Add test-before-evict discipline to addrman by EthanHeilman · Pull Request #9037 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882780' id='512751'>
<a class='timestamp' href='#512751'><time timestamp='2016-11-23T06:33:00Z'>06:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well, setting a label or even a github notification is easy to miss too :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882780' id='512752'>
<a class='timestamp' href='#512752'><time timestamp='2016-11-23T06:33:00Z'>06:33</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sure, i just figured it&#x27;d be an easy filter
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882840' id='512753'>
<a class='timestamp' href='#512753'><time timestamp='2016-11-23T06:34:00Z'>06:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
shangzhou: will take a look
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882840' id='512754'>
<a class='timestamp' href='#512754'><time timestamp='2016-11-23T06:34:00Z'>06:34</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
shangzhou: it has no (ut)ACKs at all,certainly still needs review
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882900' id='512755'>
<a class='timestamp' href='#512755'><time timestamp='2016-11-23T06:35:00Z'>06:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: btw good call in #9128 on not cleansing memory after every message anymore, it&#x27;s always been kind of silly
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882900' id='512756'>
<a class='timestamp' href='#512756'><time timestamp='2016-11-23T06:35:00Z'>06:35</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9128" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9128</a> | net: Decouple CConnman and message serialization by theuni · Pull Request #9128 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1479882960' id='512757'>
<a class='timestamp' href='#512757'><time timestamp='2016-11-23T06:36:00Z'>06:36</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: yea, i suspect that&#x27;s actually a major part of the sending overhead
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883020' id='512758'>
<a class='timestamp' href='#512758'><time timestamp='2016-11-23T06:37:00Z'>06:37</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
it showed to be a majority when profiling, though i built at -O0 or -O1 for that, so it probably wasn&#x27;t realistic
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883020' id='512759'>
<a class='timestamp' href='#512759'><time timestamp='2016-11-23T06:37:00Z'>06:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well overwriting memory with zeros shouldn&#x27;t be too bad, though apparently it gets the openssl lock which is bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883020' id='512760'>
<a class='timestamp' href='#512760'><time timestamp='2016-11-23T06:37:00Z'>06:37</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
It&#x27;d be handy if you could change the default PR ordering to something like that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883020' id='512761'>
<a class='timestamp' href='#512761'><time timestamp='2016-11-23T06:37:00Z'>06:37</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: see the suggestion in <a href="https://github.com/bitcoin/bitcoin/issues/9198" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9198</a> as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883080' id='512762'>
<a class='timestamp' href='#512762'><time timestamp='2016-11-23T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
or maybe that&#x27;s what reminded you :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883080' id='512763'>
<a class='timestamp' href='#512763'><time timestamp='2016-11-23T06:38:00Z'>06:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: yes that&#x27;s what reminded me
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883140' id='512764'>
<a class='timestamp' href='#512764'><time timestamp='2016-11-23T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I had seen it before and wondered wtf, but seemed too invasive to change at the time
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883140' id='512765'>
<a class='timestamp' href='#512765'><time timestamp='2016-11-23T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: well the zero-write goes out of its way to be a pain-in-the-ass, and therefor slower than it should be. Otherwise it&#x27;d just be optimized out
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883140' id='512766'>
<a class='timestamp' href='#512766'><time timestamp='2016-11-23T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
now that things have beeen disentangled a bit it is easier
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883140' id='512767'>
<a class='timestamp' href='#512767'><time timestamp='2016-11-23T06:39:00Z'>06:39</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
so i think much of the hit just comes from having any non-trivial dtor, regardless of what it is
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883200' id='512768'>
<a class='timestamp' href='#512768'><time timestamp='2016-11-23T06:40:00Z'>06:40</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
but again, that&#x27;s coming from profiling data in the non-optimized case. Much of that probably goes away at -O2 or -O3
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883200' id='512769'>
<a class='timestamp' href='#512769'><time timestamp='2016-11-23T06:40:00Z'>06:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes could be
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883200' id='512770'>
<a class='timestamp' href='#512770'><time timestamp='2016-11-23T06:40:00Z'>06:40</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
so yea, the locks probably account for most of it at that point
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883200' id='512771'>
<a class='timestamp' href='#512771'><time timestamp='2016-11-23T06:40:00Z'>06:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right, profiling results at O0 are useless :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883320' id='512772'>
<a class='timestamp' href='#512772'><time timestamp='2016-11-23T06:42:00Z'>06:42</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: i can&#x27;t think of where cleansing is really necessary other than private keys and passphrases?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883380' id='512773'>
<a class='timestamp' href='#512773'><time timestamp='2016-11-23T06:43:00Z'>06:43</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
though i&#x27;d like to be sufficiently paranoid if i&#x27;m going to be the one PRing the removals :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883440' id='512774'>
<a class='timestamp' href='#512774'><time timestamp='2016-11-23T06:44:00Z'>06:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I think so, I&#x27;m not entirely sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883500' id='512775'>
<a class='timestamp' href='#512775'><time timestamp='2016-11-23T06:45:00Z'>06:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if that is the case we wouldn&#x27;t even need the zero_after_free allocator, just the lockedpool one used for key data
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883560' id='512776'>
<a class='timestamp' href='#512776'><time timestamp='2016-11-23T06:46:00Z'>06:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but in any case yes such a PR would have to evalutate all uses of zero after free individually
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883620' id='512777'>
<a class='timestamp' href='#512777'><time timestamp='2016-11-23T06:47:00Z'>06:47</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
that makes sense. Hard to make the case for something sensitive enough to zero but not memlock
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883620' id='512778'>
<a class='timestamp' href='#512778'><time timestamp='2016-11-23T06:47:00Z'>06:47</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Does anyone have some inputs to share for testing #9172
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883620' id='512779'>
<a class='timestamp' href='#512779'><time timestamp='2016-11-23T06:47:00Z'>06:47</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9172" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9172</a> | An error has occurred and has been logged. Please contact this bot&#x27;s administrator for more information.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883680' id='512780'>
<a class='timestamp' href='#512780'><time timestamp='2016-11-23T06:48:00Z'>06:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: yes I do now, let me upload
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883680' id='512781'>
<a class='timestamp' href='#512781'><time timestamp='2016-11-23T06:48:00Z'>06:48</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ah damn, that one slipped away from me again
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883740' id='512782'>
<a class='timestamp' href='#512782'><time timestamp='2016-11-23T06:49:00Z'>06:49</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
will review in the morning. The build-side looked fine, I just wanted to find something to plug in to test
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883800' id='512783'>
<a class='timestamp' href='#512783'><time timestamp='2016-11-23T06:50:00Z'>06:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: <a href="https://download.visucore.com/bitcoin/bitcoin_fuzzy_in.tar.xz" class="link" target="_blank">https://download.visucore.com/bitcoin/bitcoin_fuzzy_in.tar.xz</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883800' id='512784'>
<a class='timestamp' href='#512784'><time timestamp='2016-11-23T06:50:00Z'>06:50</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
cfields talking about 9172? Did you install afl via brew or download and install?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883800' id='512785'>
<a class='timestamp' href='#512785'><time timestamp='2016-11-23T06:50:00Z'>06:50</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883860' id='512786'>
<a class='timestamp' href='#512786'><time timestamp='2016-11-23T06:51:00Z'>06:51</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
fanquake: not tested yet, just a quick review of the build changes
<br>
</div>

<div class='talk op-msg' data-timestamp='1479883920' id='512787'>
<a class='timestamp' href='#512787'><time timestamp='2016-11-23T06:52:00Z'>06:52</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
Ok. I&#x27;ll try using brew&#x27;d afl, seems to be up to date (2.35b)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479884220' id='512788'>
<a class='timestamp' href='#512788'><time timestamp='2016-11-23T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: &quot;Note that each message should be padded in the front by at least CSerializedNetMsg::header_pad_size bytes. This allows for a header to be inserted without requring a copy.&quot; awesome, we&#x27;re getting our own skb&#x27;s :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479884220' id='512789'>
<a class='timestamp' href='#512789'><time timestamp='2016-11-23T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(reminds me of <a href="http://vger.kernel.org/~davem/skb_data.html)" class="link" target="_blank">http://vger.kernel.org/~davem/skb_data.html)</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479884460' id='512790'>
<a class='timestamp' href='#512790'><time timestamp='2016-11-23T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: hah! that&#x27;s exactly what it&#x27;s like. Wish I would&#x27;ve known to google &quot;skb&quot; earlier, would&#x27;ve saved me some head-scratching. Good to know it&#x27;s a reasonable approach, though :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479884760' id='512791'>
<a class='timestamp' href='#512791'><time timestamp='2016-11-23T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
instagibbs: eh in #9073 you changed the bitcoin-cli message but it&#x27;s confusing now: error: couldn&#x27;t connect to server (make sure server is running and you are connecting to the correct RPC port: -1 unknown)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479884760' id='512792'>
<a class='timestamp' href='#512792'><time timestamp='2016-11-23T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9073" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9073</a> | Trivial: Add common failure cases for rpc server connection failure by instagibbs · Pull Request #9073 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1479884760' id='512793'>
<a class='timestamp' href='#512793'><time timestamp='2016-11-23T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
instagibbs: that&#x27;s as if the <b>*port*</b> is unknown. The error code and message should be on the first line, not the second :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479884760' id='512794'>
<a class='timestamp' href='#512794'><time timestamp='2016-11-23T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: yes it&#x27;s a great way of handling packet processing
<br>
</div>

<div class='talk op-msg' data-timestamp='1479884940' id='512795'>
<a class='timestamp' href='#512795'><time timestamp='2016-11-23T07:09:00Z'>07:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
btw RPC named arguments is feature-complete now (support in bitcoin-cli landed) and ready for testing <a href="https://github.com/bitcoin/bitcoin/pull/8811" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8811</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479885300' id='512796'>
<a class='timestamp' href='#512796'><time timestamp='2016-11-23T07:15:00Z'>07:15</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
wumpus: thanks. I&#x27;d really like to see that. Pushing on my review stack as well.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479885480' id='512797'>
<a class='timestamp' href='#512797'><time timestamp='2016-11-23T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus did you need to set a higher (&gt;50mb) memory limit when running the fuzzer?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479885480' id='512798'>
<a class='timestamp' href='#512798'><time timestamp='2016-11-23T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
fanquake: no,I did not change any afl settings
<br>
</div>

<div class='talk op-msg' data-timestamp='1479885540' id='512799'>
<a class='timestamp' href='#512799'><time timestamp='2016-11-23T07:19:00Z'>07:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
may make sense though
<br>
</div>

<div class='talk op-msg' data-timestamp='1479885540' id='512800'>
<a class='timestamp' href='#512800'><time timestamp='2016-11-23T07:19:00Z'>07:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1479885600' id='512801'>
<a class='timestamp' href='#512801'><time timestamp='2016-11-23T07:20:00Z'>07:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/5ea5e0401cb3...791b58d148ab" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/5ea5e0401cb3...791b58d148ab</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479885600' id='512802'>
<a class='timestamp' href='#512802'><time timestamp='2016-11-23T07:20:00Z'>07:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master a33b169 Pieter Wuille: Do not fully sort all nodes for addr relay...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479885600' id='512803'>
<a class='timestamp' href='#512803'><time timestamp='2016-11-23T07:20:00Z'>07:20</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 791b58d Wladimir J. van der Laan: Merge #8690: Do not fully sort all nodes for addr relay...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479885720' id='512804'>
<a class='timestamp' href='#512804'><time timestamp='2016-11-23T07:22:00Z'>07:22</time></a>
&lt;<span class='nick nick-8'> fanquake</span>&gt;
wumpus: Ok, I must have a different issue, as I&#x27;ve upped the memory limit to 12GB and it&#x27;s still warning that may be to restrictive.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479885900' id='512805'>
<a class='timestamp' href='#512805'><time timestamp='2016-11-23T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
heh     
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886080' id='512806'>
<a class='timestamp' href='#512806'><time timestamp='2016-11-23T07:28:00Z'>07:28</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think this is ready: <a href="https://github.com/bitcoin/bitcoin/pull/9196" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9196</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886740' id='512807'>
<a class='timestamp' href='#512807'><time timestamp='2016-11-23T07:39:00Z'>07:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: looking
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886800' id='512808'>
<a class='timestamp' href='#512808'><time timestamp='2016-11-23T07:40:00Z'>07:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/791b58d148ab...7e2bfd62419f" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/791b58d148ab...7e2bfd62419f</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886800' id='512809'>
<a class='timestamp' href='#512809'><time timestamp='2016-11-23T07:40:00Z'>07:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 67c6326 Russell Yanofsky: Send tip change notification from invalidateblock...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886800' id='512810'>
<a class='timestamp' href='#512810'><time timestamp='2016-11-23T07:40:00Z'>07:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 7e2bfd6 Wladimir J. van der Laan: Merge #9196: Send tip change notification from invalidateblock...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886800' id='512811'>
<a class='timestamp' href='#512811'><time timestamp='2016-11-23T07:40:00Z'>07:40</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9196: Send tip change notification from invalidateblock (master...pr/notify-tip) <a href="https://github.com/bitcoin/bitcoin/pull/9196" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9196</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886860' id='512812'>
<a class='timestamp' href='#512812'><time timestamp='2016-11-23T07:41:00Z'>07:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/7e2bfd62419f...5e8631b6cb5b" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/7e2bfd62419f...5e8631b6cb5b</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886860' id='512813'>
<a class='timestamp' href='#512813'><time timestamp='2016-11-23T07:41:00Z'>07:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master f004e67 Greg Walker: Minor change to comment above new NODE_WITNESS service flag to keep it consitent with existing comment structure. Helps with readability.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886860' id='512814'>
<a class='timestamp' href='#512814'><time timestamp='2016-11-23T07:41:00Z'>07:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 5e8631b Wladimir J. van der Laan: Merge #9205: Minor change to comment for consistency....
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886860' id='512815'>
<a class='timestamp' href='#512815'><time timestamp='2016-11-23T07:41:00Z'>07:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9205: Minor change to comment for consistency. (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/9205" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9205</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886920' id='512816'>
<a class='timestamp' href='#512816'><time timestamp='2016-11-23T07:42:00Z'>07:42</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
[07:28:49] &lt;jonasschnelli&gt; I think this is ready: <a href="https://github.com/bitcoin/bitcoin/pull/9196" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9196</a> &lt;-- am I missing something? what if the new best isn&#x27;t pprev?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886920' id='512817'>
<a class='timestamp' href='#512817'><time timestamp='2016-11-23T07:42:00Z'>07:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/5e8631b6cb5b...74ced54b7e7b" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/5e8631b6cb5b...74ced54b7e7b</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886920' id='512818'>
<a class='timestamp' href='#512818'><time timestamp='2016-11-23T07:42:00Z'>07:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 918b126 instagibbs: fix CreateTransaction error messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886920' id='512819'>
<a class='timestamp' href='#512819'><time timestamp='2016-11-23T07:42:00Z'>07:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 74ced54 Wladimir J. van der Laan: Merge #9204: Clarify CreateTransaction error messages...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886920' id='512820'>
<a class='timestamp' href='#512820'><time timestamp='2016-11-23T07:42:00Z'>07:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9204: Clarify CreateTransaction error messages (master...nonneg) <a href="https://github.com/bitcoin/bitcoin/pull/9204" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9204</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886920' id='512821'>
<a class='timestamp' href='#512821'><time timestamp='2016-11-23T07:42:00Z'>07:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: how could that be the case in InvalidateBlock()?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886980' id='512822'>
<a class='timestamp' href='#512822'><time timestamp='2016-11-23T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: a-&gt;b-&gt;c-&gt;d-&gt;e vs a-&gt;b-&gt;c-&gt;x; invalidate d
<br>
</div>

<div class='talk op-msg' data-timestamp='1479886980' id='512823'>
<a class='timestamp' href='#512823'><time timestamp='2016-11-23T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-12'> * jonasschnelli</span>&gt;
verifying 
<br>
</div>

<div class='talk op-msg' data-timestamp='1479887160' id='512824'>
<a class='timestamp' href='#512824'><time timestamp='2016-11-23T07:46:00Z'>07:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: You mean what happens if you invalidate block x) in a-&gt;b-&gt;c-&gt;d-&gt;e? (block thats not part of the main-chain)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479887220' id='512825'>
<a class='timestamp' href='#512825'><time timestamp='2016-11-23T07:47:00Z'>07:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: no, I mean invalidate block D
<br>
</div>

<div class='talk op-msg' data-timestamp='1479887220' id='512826'>
<a class='timestamp' href='#512826'><time timestamp='2016-11-23T07:47:00Z'>07:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
if you invalidate d) in a-&gt;b-&gt;c-&gt;d-&gt;e, pindex==d and pprev should match
<br>
</div>

<div class='talk op-msg' data-timestamp='1479887220' id='512827'>
<a class='timestamp' href='#512827'><time timestamp='2016-11-23T07:47:00Z'>07:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
it should end up on block X
<br>
</div>

<div class='talk op-msg' data-timestamp='1479887220' id='512828'>
<a class='timestamp' href='#512828'><time timestamp='2016-11-23T07:47:00Z'>07:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
X &gt; C
<br>
</div>

<div class='talk op-msg' data-timestamp='1479887280' id='512829'>
<a class='timestamp' href='#512829'><time timestamp='2016-11-23T07:48:00Z'>07:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Hmm... let me test this though...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479887580' id='512830'>
<a class='timestamp' href='#512830'><time timestamp='2016-11-23T07:53:00Z'>07:53</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] AmirAbrams opened pull request #9207: [Doc] Add missing bash # comment characters (master...patch-2) <a href="https://github.com/bitcoin/bitcoin/pull/9207" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9207</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479889260' id='512831'>
<a class='timestamp' href='#512831'><time timestamp='2016-11-23T08:21:00Z'>08:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: If I call invalidateblock(d) on a-b-c-d-e, the tip will chain will result in a-b-c
<br>
</div>

<div class='talk op-msg' data-timestamp='1479889260' id='512832'>
<a class='timestamp' href='#512832'><time timestamp='2016-11-23T08:21:00Z'>08:21</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: it shouldn&#x27;t be, if there is an alternate chain a-b-c-x
<br>
</div>

<div class='talk op-msg' data-timestamp='1479889380' id='512833'>
<a class='timestamp' href='#512833'><time timestamp='2016-11-23T08:23:00Z'>08:23</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
to test, send a-b-c-x then reorg to -d-e then invalidate d
<br>
</div>

<div class='talk op-msg' data-timestamp='1479889740' id='512834'>
<a class='timestamp' href='#512834'><time timestamp='2016-11-23T08:29:00Z'>08:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: might want to cancel meeting on thursday in light of american thanksgiving
<br>
</div>

<div class='talk op-msg' data-timestamp='1479889800' id='512835'>
<a class='timestamp' href='#512835'><time timestamp='2016-11-23T08:30:00Z'>08:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: good point
<br>
</div>

<div class='talk op-msg' data-timestamp='1479889800' id='512836'>
<a class='timestamp' href='#512836'><time timestamp='2016-11-23T08:30:00Z'>08:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: also, before you get too excited about #9128, I think sipa, cfields and I need to get togehter (or at a meeting) and figure out what we want to do about where-messages-get-hashed
<br>
</div>

<div class='talk op-msg' data-timestamp='1479889800' id='512837'>
<a class='timestamp' href='#512837'><time timestamp='2016-11-23T08:30:00Z'>08:30</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9128" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9128</a> | net: Decouple CConnman and message serialization by theuni · Pull Request #9128 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1479889920' id='512838'>
<a class='timestamp' href='#512838'><time timestamp='2016-11-23T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
BlueMatt: cfields could we possibly factor out the controversial part into a seperate pull?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479889920' id='512839'>
<a class='timestamp' href='#512839'><time timestamp='2016-11-23T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: I think we just need to find a few minutes to discuss when we&#x27;re all here...it should be easy to come to agreement (hence why i came to the conclusion that this week&#x27;s meeting wont work :( )
<br>
</div>

<div class='talk op-msg' data-timestamp='1479889920' id='512840'>
<a class='timestamp' href='#512840'><time timestamp='2016-11-23T08:32:00Z'>08:32</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
most of the changes are no-brainers w/ regard to desirability
<br>
</div>

<div class='talk op-msg' data-timestamp='1479889980' id='512841'>
<a class='timestamp' href='#512841'><time timestamp='2016-11-23T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea     
<br>
</div>

<div class='talk op-msg' data-timestamp='1479889980' id='512842'>
<a class='timestamp' href='#512842'><time timestamp='2016-11-23T08:33:00Z'>08:33</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but sure we can hold off on that one until you discussed
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890040' id='512843'>
<a class='timestamp' href='#512843'><time timestamp='2016-11-23T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
wumpus: I keep remembering after cfields goes to sleep :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890040' id='512844'>
<a class='timestamp' href='#512844'><time timestamp='2016-11-23T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
wumpus: ACK re-pings. I have seen some sit ready for a while and didn&#x27;t want to nag.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890040' id='512845'>
<a class='timestamp' href='#512845'><time timestamp='2016-11-23T08:34:00Z'>08:34</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: I think that would be a general improvement in InvalidateBlock ... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890280' id='512846'>
<a class='timestamp' href='#512846'><time timestamp='2016-11-23T08:38:00Z'>08:38</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: heh, InvalidateBlock(getbestblockhash()) on a fresh regtest setup (no block mined) results in a funny state
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890280' id='512847'>
<a class='timestamp' href='#512847'><time timestamp='2016-11-23T08:38:00Z'>08:38</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
does it really not work? :O
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890340' id='512848'>
<a class='timestamp' href='#512848'><time timestamp='2016-11-23T08:39:00Z'>08:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
It disconnects the genesis block but missed the undo-data
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890340' id='512849'>
<a class='timestamp' href='#512849'><time timestamp='2016-11-23T08:39:00Z'>08:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
generate 1 will fail afterwards
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890340' id='512850'>
<a class='timestamp' href='#512850'><time timestamp='2016-11-23T08:39:00Z'>08:39</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
no, I mean a-b-c-x
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890340' id='512851'>
<a class='timestamp' href='#512851'><time timestamp='2016-11-23T08:39:00Z'>08:39</time></a>
&lt;<span class='nick nick-12'> * jonasschnelli</span>&gt;
testing
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890400' id='512852'>
<a class='timestamp' href='#512852'><time timestamp='2016-11-23T08:40:00Z'>08:40</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I mean, it&#x27;s rare you&#x27;d want to invalidate the tip without a competing chain to reorg to
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890400' id='512853'>
<a class='timestamp' href='#512853'><time timestamp='2016-11-23T08:40:00Z'>08:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think InvalidateBlock is only used during RegTests/RPC tests... are there real world mainnet usecases?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890400' id='512854'>
<a class='timestamp' href='#512854'><time timestamp='2016-11-23T08:40:00Z'>08:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
so I could PR relay-compact-block-before-full-validation (<a href="https://github.com/TheBlueMatt/bitcoin/commits/2016-11-compact-fast-relay)" class="link" target="_blank">https://github.com/TheBlueMatt/bitcoin/commits/2016-11-compact-fast-relay)</a> but now I&#x27;m kinda thinking I dont want to do that prior to there being multithreaded ProcessMessages with some smarts to respond to getblocktxn without a lock for the latest block...thoughts?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890400' id='512855'>
<a class='timestamp' href='#512855'><time timestamp='2016-11-23T08:40:00Z'>08:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(maybe gmaxwell)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890400' id='512856'>
<a class='timestamp' href='#512856'><time timestamp='2016-11-23T08:40:00Z'>08:40</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
it was added so a fiasco like 0.8.0 could be manually dealt with
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890760' id='512857'>
<a class='timestamp' href='#512857'><time timestamp='2016-11-23T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: generating a-b-c-d-e, invalidating e, mining -d-x-y, reconsidering e, invalidate x results in a-b-c-d
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890760' id='512858'>
<a class='timestamp' href='#512858'><time timestamp='2016-11-23T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
So reorg with InvalidateBlock seems to work
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890760' id='512859'>
<a class='timestamp' href='#512859'><time timestamp='2016-11-23T08:46:00Z'>08:46</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Maybe the pprev call is not ideal
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890820' id='512860'>
<a class='timestamp' href='#512860'><time timestamp='2016-11-23T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
that sequence doesn&#x27;t make sense. you mined d twice?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890820' id='512861'>
<a class='timestamp' href='#512861'><time timestamp='2016-11-23T08:47:00Z'>08:47</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
if a-b-c-d-e is valid, tip should never be D
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890880' id='512862'>
<a class='timestamp' href='#512862'><time timestamp='2016-11-23T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I invalidated e
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890880' id='512863'>
<a class='timestamp' href='#512863'><time timestamp='2016-11-23T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
but then reconsidered it
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890880' id='512864'>
<a class='timestamp' href='#512864'><time timestamp='2016-11-23T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
which should make it valid
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890880' id='512865'>
<a class='timestamp' href='#512865'><time timestamp='2016-11-23T08:48:00Z'>08:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wait... let me write it again
<br>
</div>

<div class='talk op-msg' data-timestamp='1479890940' id='512866'>
<a class='timestamp' href='#512866'><time timestamp='2016-11-23T08:49:00Z'>08:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
generating a-b-c-d-e, invalidating e, mining (-d)-x-y, reconsidering e, invalidate x results in a-b-c-d-e
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891000' id='512867'>
<a class='timestamp' href='#512867'><time timestamp='2016-11-23T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ok, good; but does this call NotifyTip with D or E?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891000' id='512868'>
<a class='timestamp' href='#512868'><time timestamp='2016-11-23T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I&#x27;m checking now the signal... maybe its wrong.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891000' id='512869'>
<a class='timestamp' href='#512869'><time timestamp='2016-11-23T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
it should only call NotifyTip with E I think, but certainly both and E last
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891000' id='512870'>
<a class='timestamp' href='#512870'><time timestamp='2016-11-23T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
err, certainly E last*
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891000' id='512871'>
<a class='timestamp' href='#512871'><time timestamp='2016-11-23T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
(whether it calls it with D before E is a debatable question)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891180' id='512872'>
<a class='timestamp' href='#512872'><time timestamp='2016-11-23T08:53:00Z'>08:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: I think it&#x27;s fine to send it first without fancy getblocktxn handling. Most blocks relay without a getblocktxn.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891240' id='512873'>
<a class='timestamp' href='#512873'><time timestamp='2016-11-23T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: on the balance for both bandwidth usage and latency handling using the orphan pool and having an eviction pool be more important that faster getblocktxn handling.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891360' id='512874'>
<a class='timestamp' href='#512874'><time timestamp='2016-11-23T08:56:00Z'>08:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: I think sipa and I convinced cfields that what you were doing was reasonable.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891540' id='512875'>
<a class='timestamp' href='#512875'><time timestamp='2016-11-23T08:59:00Z'>08:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
luke-jr: jonasschnelli: I&#x27;d be really surprised if notify behavior was sensible around invalidate block, it&#x27;s a hidden and undocumented command intenteded for development and for fringe emergencies. (Though I&#x27;d certantly support making it more sensible-- AFAIK it really hasn&#x27;t been tested to the level that I&#x27;d expect for a first tier user feature).
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891540' id='512876'>
<a class='timestamp' href='#512876'><time timestamp='2016-11-23T08:59:00Z'>08:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
It also is massively slow at undoing blocks, enough to degrade its utility.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891540' id='512877'>
<a class='timestamp' href='#512877'><time timestamp='2016-11-23T08:59:00Z'>08:59</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: jonasschnelli just &quot;fixed&quot; it, but I think the fix is wrong
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891600' id='512878'>
<a class='timestamp' href='#512878'><time timestamp='2016-11-23T09:00:00Z'>09:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: I don&#x27;t fixed it,... I merged a fix. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891600' id='512879'>
<a class='timestamp' href='#512879'><time timestamp='2016-11-23T09:00:00Z'>09:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But I guess luke-jr is right... it could be wrong.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891660' id='512880'>
<a class='timestamp' href='#512880'><time timestamp='2016-11-23T09:01:00Z'>09:01</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But my test just showed me, the signal gets called with the reconnected blocks.. so the UI state is correct... but looking deeper into it now
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891720' id='512881'>
<a class='timestamp' href='#512881'><time timestamp='2016-11-23T09:02:00Z'>09:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
One challenge is that invalidateblock can cause a best block tip with lower work than the best signaled previously. There is no other way for that to happen in the codebase, so in that sense it breaks an interface invarient.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891780' id='512882'>
<a class='timestamp' href='#512882'><time timestamp='2016-11-23T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
well, at least that case is GIGO
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891780' id='512883'>
<a class='timestamp' href='#512883'><time timestamp='2016-11-23T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: I think the change is correct
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891780' id='512884'>
<a class='timestamp' href='#512884'><time timestamp='2016-11-23T09:03:00Z'>09:03</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
true. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891840' id='512885'>
<a class='timestamp' href='#512885'><time timestamp='2016-11-23T09:04:00Z'>09:04</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
pprev = chainActive.Tip()
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891840' id='512886'>
<a class='timestamp' href='#512886'><time timestamp='2016-11-23T09:04:00Z'>09:04</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
And in the RPC call InvalidateBlock, we have a call ActivateBestChain(state, Params(), NULL);
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891900' id='512887'>
<a class='timestamp' href='#512887'><time timestamp='2016-11-23T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Which calls the signal again with the new tip
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891900' id='512888'>
<a class='timestamp' href='#512888'><time timestamp='2016-11-23T09:05:00Z'>09:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
so.. all good IMO
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891960' id='512889'>
<a class='timestamp' href='#512889'><time timestamp='2016-11-23T09:06:00Z'>09:06</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
ah, so the internal InvalidateBlock doesn&#x27;t complete the reorg(s), and the RPC does that in a subsequent step?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891960' id='512890'>
<a class='timestamp' href='#512890'><time timestamp='2016-11-23T09:06:00Z'>09:06</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1479891960' id='512891'>
<a class='timestamp' href='#512891'><time timestamp='2016-11-23T09:06:00Z'>09:06</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I guess that makes sense. Maybe better to change it, but outside the scope of this.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479895860' id='512892'>
<a class='timestamp' href='#512892'><time timestamp='2016-11-23T10:11:00Z'>10:11</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/74ced54b7e7b...fa1f944107f9" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/74ced54b7e7b...fa1f944107f9</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479895860' id='512893'>
<a class='timestamp' href='#512893'><time timestamp='2016-11-23T10:11:00Z'>10:11</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 69bc8e7 Amir Abrams: [Doc] Move comments above bash command
<br>
</div>

<div class='talk op-msg' data-timestamp='1479895860' id='512894'>
<a class='timestamp' href='#512894'><time timestamp='2016-11-23T10:11:00Z'>10:11</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fa1f944 Wladimir J. van der Laan: Merge #9207: [Doc] Move comments above bash command in build-unix...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479895860' id='512895'>
<a class='timestamp' href='#512895'><time timestamp='2016-11-23T10:11:00Z'>10:11</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj closed pull request #9207: [Doc] Move comments above bash command in build-unix (master...patch-2) <a href="https://github.com/bitcoin/bitcoin/pull/9207" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9207</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479897660' id='512896'>
<a class='timestamp' href='#512896'><time timestamp='2016-11-23T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/fa1f944107f9...e662d281b837" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/fa1f944107f9...e662d281b837</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479897660' id='512897'>
<a class='timestamp' href='#512897'><time timestamp='2016-11-23T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 09dc406 BtcDrak: Make test constant consistent with consensus.h
<br>
</div>

<div class='talk op-msg' data-timestamp='1479897660' id='512898'>
<a class='timestamp' href='#512898'><time timestamp='2016-11-23T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master e662d28 MarcoFalke: Merge #9206: Make test constant consistent with consensus.h...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479897660' id='512899'>
<a class='timestamp' href='#512899'><time timestamp='2016-11-23T10:41:00Z'>10:41</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #9206: Make test constant consistent with consensus.h (master...consistency) <a href="https://github.com/bitcoin/bitcoin/pull/9206" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9206</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479897720' id='512900'>
<a class='timestamp' href='#512900'><time timestamp='2016-11-23T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sdaftuar opened pull request #9208: [WIP] Improve DisconnectTip performance (master...faster-disconnect-rebased) <a href="https://github.com/bitcoin/bitcoin/pull/9208" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9208</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479897720' id='512901'>
<a class='timestamp' href='#512901'><time timestamp='2016-11-23T10:42:00Z'>10:42</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
gmaxwell: ^ This should fix the invalidateblock performance issues
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902280' id='512902'>
<a class='timestamp' href='#512902'><time timestamp='2016-11-23T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-7'> brhood9</span>&gt;
is anyone there? I need help please and I&#x27;m willing to pay.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902460' id='512903'>
<a class='timestamp' href='#512903'><time timestamp='2016-11-23T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
brhood9: what with?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902460' id='512904'>
<a class='timestamp' href='#512904'><time timestamp='2016-11-23T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #9139: Change sync_blocks to pick smarter maxheight (on top of #9196) (master...sync-height) <a href="https://github.com/bitcoin/bitcoin/pull/9139" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9139</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902520' id='512905'>
<a class='timestamp' href='#512905'><time timestamp='2016-11-23T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/e662d281b837...0de7fd36de57" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/e662d281b837...0de7fd36de57</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902520' id='512906'>
<a class='timestamp' href='#512906'><time timestamp='2016-11-23T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 1126c85 Russell Yanofsky: [qa] Change sync_blocks to pick smarter maxheight...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902520' id='512907'>
<a class='timestamp' href='#512907'><time timestamp='2016-11-23T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 0de7fd3 MarcoFalke: Merge #9139: Change sync_blocks to pick smarter maxheight (on top of #9196)...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902520' id='512908'>
<a class='timestamp' href='#512908'><time timestamp='2016-11-23T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke closed pull request #9139: Change sync_blocks to pick smarter maxheight (on top of #9196) (master...sync-height) <a href="https://github.com/bitcoin/bitcoin/pull/9139" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9139</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902640' id='512909'>
<a class='timestamp' href='#512909'><time timestamp='2016-11-23T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-5'> brhood9_</span>&gt;
This is about unconfirmed transactions that need to be fixed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902640' id='512910'>
<a class='timestamp' href='#512910'><time timestamp='2016-11-23T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-5'> brhood9_</span>&gt;
Is there any way that you all could help me figure out what is going on with my bitcoin transaction? I have asked and looked and read everywhere. The transaction that you need to look at is this one. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902700' id='512911'>
<a class='timestamp' href='#512911'><time timestamp='2016-11-23T12:05:00Z'>12:05</time></a>
&lt;<span class='nick nick-5'> brhood9_</span>&gt;
<a href="https://blockchain.info/tx/6bef9829ddfba24ec2e613fa1a8239f09acfc36ab057e890f192863298b648b8?show_adv=true" class="link" target="_blank">https://blockchain.info/tx/6bef9829ddfba24ec2e613fa1a8239f09acfc36ab057e890f192863298b648b8?show_adv=true</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902700' id='512912'>
<a class='timestamp' href='#512912'><time timestamp='2016-11-23T12:05:00Z'>12:05</time></a>
&lt;<span class='nick nick-5'> brhood9_</span>&gt;
is anyone there?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902760' id='512913'>
<a class='timestamp' href='#512913'><time timestamp='2016-11-23T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
brhood9_: yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902760' id='512914'>
<a class='timestamp' href='#512914'><time timestamp='2016-11-23T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
i&#x27;m looking at it
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902760' id='512915'>
<a class='timestamp' href='#512915'><time timestamp='2016-11-23T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
also this is off-topic here
<br>
</div>

<div class='talk op-msg' data-timestamp='1479902760' id='512916'>
<a class='timestamp' href='#512916'><time timestamp='2016-11-23T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
please move to #bitcoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1479904020' id='512917'>
<a class='timestamp' href='#512917'><time timestamp='2016-11-23T12:27:00Z'>12:27</time></a>
&lt;<span class='nick nick-9'> takashi</span>&gt;
Why &quot;maker&quot; was added to transaction instead of increment &quot;version&quot; for segwit? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1479904080' id='512918'>
<a class='timestamp' href='#512918'><time timestamp='2016-11-23T12:28:00Z'>12:28</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #9211: [0.12.2] Backports (0.12...Mf1611-back12) <a href="https://github.com/bitcoin/bitcoin/pull/9211" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9211</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907200' id='512919'>
<a class='timestamp' href='#512919'><time timestamp='2016-11-23T13:20:00Z'>13:20</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
is there a flag I have to set to compile zmq/rest
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907260' id='512920'>
<a class='timestamp' href='#512920'><time timestamp='2016-11-23T13:21:00Z'>13:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
instagibbs: rest should compile with RPC (so not optional)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907260' id='512921'>
<a class='timestamp' href='#512921'><time timestamp='2016-11-23T13:21:00Z'>13:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ZMQ will compile if libzmq is present
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907260' id='512922'>
<a class='timestamp' href='#512922'><time timestamp='2016-11-23T13:21:00Z'>13:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Rest needs to be enabled during startup
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907260' id='512923'>
<a class='timestamp' href='#512923'><time timestamp='2016-11-23T13:21:00Z'>13:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
-rest=1
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907260' id='512924'>
<a class='timestamp' href='#512924'><time timestamp='2016-11-23T13:21:00Z'>13:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
or just -rest
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907260' id='512925'>
<a class='timestamp' href='#512925'><time timestamp='2016-11-23T13:21:00Z'>13:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
also check the docs/REST.md
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907260' id='512926'>
<a class='timestamp' href='#512926'><time timestamp='2016-11-23T13:21:00Z'>13:21</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
ok thanks. I had zmq code fail to compile in Travis :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907320' id='512927'>
<a class='timestamp' href='#512927'><time timestamp='2016-11-23T13:22:00Z'>13:22</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
wanted to avoid this
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907320' id='512928'>
<a class='timestamp' href='#512928'><time timestamp='2016-11-23T13:22:00Z'>13:22</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think one of the ZMQ instance compiles zmq? Not?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907320' id='512929'>
<a class='timestamp' href='#512929'><time timestamp='2016-11-23T13:22:00Z'>13:22</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(or even all of them?)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907320' id='512930'>
<a class='timestamp' href='#512930'><time timestamp='2016-11-23T13:22:00Z'>13:22</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
code I changed*
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907320' id='512931'>
<a class='timestamp' href='#512931'><time timestamp='2016-11-23T13:22:00Z'>13:22</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
In the REST.md, theres also a curl command that works &quot;out-of-the-box&quot;. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907620' id='512932'>
<a class='timestamp' href='#512932'><time timestamp='2016-11-23T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
I don&#x27;t see a REST.md?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907620' id='512933'>
<a class='timestamp' href='#512933'><time timestamp='2016-11-23T13:27:00Z'>13:27</time></a>
&lt;<span class='nick nick-11'> instagibbs</span>&gt;
perhaps search fail on my part....
<br>
</div>

<div class='talk op-msg' data-timestamp='1479907980' id='512934'>
<a class='timestamp' href='#512934'><time timestamp='2016-11-23T13:33:00Z'>13:33</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
while testing on testnet, I have just received: Assertion failed: (nSendVersion != 0), function GetSendVersion, file ./net.h, line 775.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479908040' id='512935'>
<a class='timestamp' href='#512935'><time timestamp='2016-11-23T13:34:00Z'>13:34</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
on current master
<br>
</div>

<div class='talk op-msg' data-timestamp='1479908400' id='512936'>
<a class='timestamp' href='#512936'><time timestamp='2016-11-23T13:40:00Z'>13:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
instagibbs: REST-interface.md
<br>
</div>

<div class='talk op-msg' data-timestamp='1479908400' id='512937'>
<a class='timestamp' href='#512937'><time timestamp='2016-11-23T13:40:00Z'>13:40</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Sry: <a href="https://github.com/bitcoin/bitcoin/blob/master/doc/REST-interface.md" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/doc/REST-interface.md</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479923100' id='512938'>
<a class='timestamp' href='#512938'><time timestamp='2016-11-23T17:45:00Z'>17:45</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sdaftuar: interesting
<br>
</div>

<div class='talk op-msg' data-timestamp='1479923100' id='512939'>
<a class='timestamp' href='#512939'><time timestamp='2016-11-23T17:45:00Z'>17:45</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(the staller logic log)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479926340' id='512940'>
<a class='timestamp' href='#512940'><time timestamp='2016-11-23T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
There isn&#x27;t an easy way to replace a tx in the mempool if the user had all sequence numbers set to max, correct? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1479926400' id='512941'>
<a class='timestamp' href='#512941'><time timestamp='2016-11-23T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
and the parent isn&#x27;t RBF either
<br>
</div>

<div class='talk op-msg' data-timestamp='1479926520' id='512942'>
<a class='timestamp' href='#512942'><time timestamp='2016-11-23T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
in practice you just create a replacement and keep broadcasting it. miners get restarted enough that it&#x27;s pretty likely to get replaced eventually.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479926580' id='512943'>
<a class='timestamp' href='#512943'><time timestamp='2016-11-23T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(assuming the prior was low fee)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479926700' id='512944'>
<a class='timestamp' href='#512944'><time timestamp='2016-11-23T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Yes, it happened before this latest &#x27;influx&#x27; or txs. Does Core&#x27;s algorithm rejects txs from the mempool if it already has a tx that spends that particular output? I&#x27;m guessing it doesn&#x27;t match on txids since those will be unique assuming
<br>
</div>

<div class='talk op-msg' data-timestamp='1479926700' id='512945'>
<a class='timestamp' href='#512945'><time timestamp='2016-11-23T18:45:00Z'>18:45</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
some sort of malleability or reordering of inputs
<br>
</div>

<div class='talk op-msg' data-timestamp='1479927180' id='512946'>
<a class='timestamp' href='#512946'><time timestamp='2016-11-23T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
jonasschnelli: if you&#x27;re gonna ack #9183, please also ack its dependencies, #8930
<br>
</div>

<div class='talk op-msg' data-timestamp='1479927180' id='512947'>
<a class='timestamp' href='#512947'><time timestamp='2016-11-23T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9183" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9183</a> | Final Preparation for main.cpp Split by TheBlueMatt · Pull Request #9183 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1479927180' id='512948'>
<a class='timestamp' href='#512948'><time timestamp='2016-11-23T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8930" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8930</a> | Move orphan processing to ActivateBestChain by TheBlueMatt · Pull Request #8930 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1479928440' id='512949'>
<a class='timestamp' href='#512949'><time timestamp='2016-11-23T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Is there a command line flag to enable RBF by default when creating a tx with core&#x27;s wallet?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479928440' id='512950'>
<a class='timestamp' href='#512950'><time timestamp='2016-11-23T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
Chris_Stewart_5: AFAIK there are nodes miners who will RBF without any flag
<br>
</div>

<div class='talk op-msg' data-timestamp='1479928440' id='512951'>
<a class='timestamp' href='#512951'><time timestamp='2016-11-23T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
Chris_Stewart_5: -walletrbf but I don&#x27;t know what Core version it&#x27;s in
<br>
</div>

<div class='talk op-msg' data-timestamp='1479929340' id='512952'>
<a class='timestamp' href='#512952'><time timestamp='2016-11-23T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-15'> Chris_Stewart_5</span>&gt;
Thanks luke-jr 
<br>
</div>

<div class='talk op-msg' data-timestamp='1479929640' id='512953'>
<a class='timestamp' href='#512953'><time timestamp='2016-11-23T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
luke-jr: did you check with the pillow why my ASIC didn&#x27;t work with bfgminer or still no idea?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479931920' id='512954'>
<a class='timestamp' href='#512954'><time timestamp='2016-11-23T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: want to argue about #9128 for a little bit?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479931920' id='512955'>
<a class='timestamp' href='#512955'><time timestamp='2016-11-23T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9128" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9128</a> | net: Decouple CConnman and message serialization by theuni · Pull Request #9128 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1479931920' id='512956'>
<a class='timestamp' href='#512956'><time timestamp='2016-11-23T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932040' id='512957'>
<a class='timestamp' href='#512957'><time timestamp='2016-11-23T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: see <a href="https://github.com/TheBlueMatt/bitcoin/commit/7a42a0c95d04add8cff0cf7cf95df273169f8fa3" class="link" target="_blank">https://github.com/TheBlueMatt/bitcoin/commit/7a42a0c95d04add8cff0cf7cf95df273169f8fa3</a> ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932040' id='512958'>
<a class='timestamp' href='#512958'><time timestamp='2016-11-23T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: so, before we end up in tangential discussions, i think the key thing to decide on is where encryption state should be held
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932040' id='512959'>
<a class='timestamp' href='#512959'><time timestamp='2016-11-23T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: fix the TODO :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932040' id='512960'>
<a class='timestamp' href='#512960'><time timestamp='2016-11-23T20:14:00Z'>20:14</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
especially, send the message without hashing the message repeatedly
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932100' id='512961'>
<a class='timestamp' href='#512961'><time timestamp='2016-11-23T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: and if some nodes are using encryption?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932100' id='512962'>
<a class='timestamp' href='#512962'><time timestamp='2016-11-23T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
BlueMatt: you&#x27;re not thinking you can reuse the authentication value across multiple peers when encryption is in use, are you?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932160' id='512963'>
<a class='timestamp' href='#512963'><time timestamp='2016-11-23T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: no, but for current-style peers you can :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932160' id='512964'>
<a class='timestamp' href='#512964'><time timestamp='2016-11-23T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well i think cfields&#x27;s design was based on the goal of being able to construct a message once, and then send it to multiple peers
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932160' id='512965'>
<a class='timestamp' href='#512965'><time timestamp='2016-11-23T20:16:00Z'>20:16</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: fwiw, i had a discussion with sipa/gmaxwell about my grand plans for dedup, which, they made me realize doesn&#x27;t make much sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932220' id='512966'>
<a class='timestamp' href='#512966'><time timestamp='2016-11-23T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: in any case, it seems massively layer-violating to have any knowledge of the structure of bytes-on-the-wire in CConnman
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932220' id='512967'>
<a class='timestamp' href='#512967'><time timestamp='2016-11-23T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: i don&#x27;t see that
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932220' id='512968'>
<a class='timestamp' href='#512968'><time timestamp='2016-11-23T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: my impression is that the goal of CConnman is to be a network management library
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932220' id='512969'>
<a class='timestamp' href='#512969'><time timestamp='2016-11-23T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CConnman shouldn&#x27;t know about how a block or inv message is structured
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932220' id='512970'>
<a class='timestamp' href='#512970'><time timestamp='2016-11-23T20:17:00Z'>20:17</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
not a bitcoin-p2p-management library
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932280' id='512971'>
<a class='timestamp' href='#512971'><time timestamp='2016-11-23T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but it certainly should be able to construct and dissect network messages?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932280' id='512972'>
<a class='timestamp' href='#512972'><time timestamp='2016-11-23T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932280' id='512973'>
<a class='timestamp' href='#512973'><time timestamp='2016-11-23T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
where else does that logic belong?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932280' id='512974'>
<a class='timestamp' href='#512974'><time timestamp='2016-11-23T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
what if we want to change the header for encryption
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932280' id='512975'>
<a class='timestamp' href='#512975'><time timestamp='2016-11-23T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: at minimum, it has to have knowledge of when a message is complete
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932280' id='512976'>
<a class='timestamp' href='#512976'><time timestamp='2016-11-23T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
well it doesn&#x27;t have to, but for efficiency, it should
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932280' id='512977'>
<a class='timestamp' href='#512977'><time timestamp='2016-11-23T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
the logic belongs int he message-serialization/-deserialization logic
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932280' id='512978'>
<a class='timestamp' href='#512978'><time timestamp='2016-11-23T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I really don&#x27;t think it&#x27;s worth the savings to conserve message hashing for the non-encrypted case, lets get everyone to encryption. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932280' id='512979'>
<a class='timestamp' href='#512979'><time timestamp='2016-11-23T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: yes, the MessageDeserializer class thinggy we have now works great :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932340' id='512980'>
<a class='timestamp' href='#512980'><time timestamp='2016-11-23T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: which?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932340' id='512981'>
<a class='timestamp' href='#512981'><time timestamp='2016-11-23T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Serialize once is fine... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932340' id='512982'>
<a class='timestamp' href='#512982'><time timestamp='2016-11-23T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: wait... let&#x27;s stop there. I was trying to avoid getting this far without answering the first question...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932340' id='512983'>
<a class='timestamp' href='#512983'><time timestamp='2016-11-23T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: CNetMessage
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932400' id='512984'>
<a class='timestamp' href='#512984'><time timestamp='2016-11-23T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
&lt;cfields&gt; BlueMatt: so, before we end up in tangential discussions, i think the key thing to decide on is where encryption state should be held
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932400' id='512985'>
<a class='timestamp' href='#512985'><time timestamp='2016-11-23T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: right beside current protocol versioning info in CNode?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932400' id='512986'>
<a class='timestamp' href='#512986'><time timestamp='2016-11-23T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think we conceptually have 3 layers 1) network bytes 2) p2p messages 3) contents of p2p messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932400' id='512987'>
<a class='timestamp' href='#512987'><time timestamp='2016-11-23T20:20:00Z'>20:20</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: that stuff is now ready to be extracted, just waiting on CNodeState lock cleanups
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932460' id='512988'>
<a class='timestamp' href='#512988'><time timestamp='2016-11-23T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: CNetMessage is an object which is going to have to be peer-specific
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932460' id='512989'>
<a class='timestamp' href='#512989'><time timestamp='2016-11-23T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think BlueMatt is trying to separate 1 and 2
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932460' id='512990'>
<a class='timestamp' href='#512990'><time timestamp='2016-11-23T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields is separating 2 and 3
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932460' id='512991'>
<a class='timestamp' href='#512991'><time timestamp='2016-11-23T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932460' id='512992'>
<a class='timestamp' href='#512992'><time timestamp='2016-11-23T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m of the opinion that separating 2 and 3 is the more interesting problem now
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932460' id='512993'>
<a class='timestamp' href='#512993'><time timestamp='2016-11-23T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: yes, I dont think it should be in CNode, if you want CNode to be a &quot;dumb thing that CConnman handles&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932460' id='512994'>
<a class='timestamp' href='#512994'><time timestamp='2016-11-23T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but it should be in the same place
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932520' id='512995'>
<a class='timestamp' href='#512995'><time timestamp='2016-11-23T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: p2p messages and contents of p2p message/processing thereof seem already relatively separated, no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932520' id='512996'>
<a class='timestamp' href='#512996'><time timestamp='2016-11-23T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: imo, CNode should be just the stuff related to connection state. And current iv&#x27;s fall into that category.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932520' id='512997'>
<a class='timestamp' href='#512997'><time timestamp='2016-11-23T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: a corollary to your question is how does CNetMessage become peer-specific?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932520' id='512998'>
<a class='timestamp' href='#512998'><time timestamp='2016-11-23T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so the question is whether CConnman should do the serialization of the contents of messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932580' id='512999'>
<a class='timestamp' href='#512999'><time timestamp='2016-11-23T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: &quot;ivs&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932580' id='513000'>
<a class='timestamp' href='#513000'><time timestamp='2016-11-23T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if CNetMessage is peer-specific, it perhaps should be just hidden behind CConnman?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932580' id='513001'>
<a class='timestamp' href='#513001'><time timestamp='2016-11-23T20:23:00Z'>20:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
like it currently is
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932640' id='513002'>
<a class='timestamp' href='#513002'><time timestamp='2016-11-23T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that makes reuse of messages across peers impossible, but maybe we&#x27;re not interested if it can&#x27;t be done at the same time as hashing/encrypting
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932640' id='513003'>
<a class='timestamp' href='#513003'><time timestamp='2016-11-23T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
for example, some peers might use compacted transactions some might not. But is that the correct layer for it?  I don&#x27;t think we&#x27;d propose implementing BIP152 block compaction inside CConnman.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932640' id='513004'>
<a class='timestamp' href='#513004'><time timestamp='2016-11-23T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: to be specific, message reuse is possible, it&#x27;s only the header attachment that can&#x27;t be shared
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932700' id='513005'>
<a class='timestamp' href='#513005'><time timestamp='2016-11-23T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: the way i see it: processing of messages and the peer handling is already well-separated, or at least somewhat separated...we currently have bitcoin-specific and general-networking code intermixed in a bunch of places, and that also needs to be separated
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932700' id='513006'>
<a class='timestamp' href='#513006'><time timestamp='2016-11-23T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: i mean, the whole point of 9128 is the introduction of a serializer abstraction... that seems unnecessary if we don&#x27;t plan on ever reusing network messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932760' id='513007'>
<a class='timestamp' href='#513007'><time timestamp='2016-11-23T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: while if it remains inside CConnman, it could do hashing/encryption on the fly during serialization
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932760' id='513008'>
<a class='timestamp' href='#513008'><time timestamp='2016-11-23T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: it&#x27;s necessary as a layer abstraction... it&#x27;s only a shortcut for callers
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932760' id='513009'>
<a class='timestamp' href='#513009'><time timestamp='2016-11-23T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: the serializer-abstraction in 9128 is definitely useable even if we encrypt network messages, etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932760' id='513010'>
<a class='timestamp' href='#513010'><time timestamp='2016-11-23T20:26:00Z'>20:26</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: see my branch for early-sending-compact-blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932820' id='513011'>
<a class='timestamp' href='#513011'><time timestamp='2016-11-23T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: i guess i don&#x27;t see why
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932820' id='513012'>
<a class='timestamp' href='#513012'><time timestamp='2016-11-23T20:27:00Z'>20:27</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: fwiw, my first version used a shared_ptr for dedup, and cached the hash, so that the same message could be pushed to a bunch of peers without re-serializing or re-hashing. If you think that&#x27;s worth putting back, i can.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932880' id='513013'>
<a class='timestamp' href='#513013'><time timestamp='2016-11-23T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
heh, i&#x27;m not sure which conversation to be having here :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932880' id='513014'>
<a class='timestamp' href='#513014'><time timestamp='2016-11-23T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: why shared_ptrs? that seems strange to me, but, then, I havent seen that version
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932880' id='513015'>
<a class='timestamp' href='#513015'><time timestamp='2016-11-23T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: heh, we have fractured....
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932880' id='513016'>
<a class='timestamp' href='#513016'><time timestamp='2016-11-23T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: oops, i forgot the distinction between CSerializedNetMsg and CNetMsgMaker, ignore me
<br>
</div>

<div class='talk op-msg' data-timestamp='1479932940' id='513017'>
<a class='timestamp' href='#513017'><time timestamp='2016-11-23T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: right. CSerializedNetMsg is intended to be a dumb payload. CConnman wraps it as necessary, then sends it with no knowledge of the contents. That&#x27;s the layer separation change.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933000' id='513018'>
<a class='timestamp' href='#513018'><time timestamp='2016-11-23T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i don&#x27;t think we answered the question whether CNetMsgMaker should be node-specific or not
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933000' id='513019'>
<a class='timestamp' href='#513019'><time timestamp='2016-11-23T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if we want it to do encryption on the fly, it should be
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933000' id='513020'>
<a class='timestamp' href='#513020'><time timestamp='2016-11-23T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but that reintroduces the dependency on cconnman
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933060' id='513021'>
<a class='timestamp' href='#513021'><time timestamp='2016-11-23T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: it&#x27;s only send-version specific, since that&#x27;s all the serializers care about
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933060' id='513022'>
<a class='timestamp' href='#513022'><time timestamp='2016-11-23T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: i mean thats the whole point of the discussion - is the thing we pass into CConnman a blind bytes array to send on the wire, or a serialized message, which needs its header attached, etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933060' id='513023'>
<a class='timestamp' href='#513023'><time timestamp='2016-11-23T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: note that the way it currently is it mixes things...CNetMsgMaker adds most of the header, CConnman adds the hash
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933060' id='513024'>
<a class='timestamp' href='#513024'><time timestamp='2016-11-23T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
my impression is that 9128 intends CSerializedNetMsg to be the unencrypted thing, which is reusable across connections
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933120' id='513025'>
<a class='timestamp' href='#513025'><time timestamp='2016-11-23T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which seems like a layer-split
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933120' id='513026'>
<a class='timestamp' href='#513026'><time timestamp='2016-11-23T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
so we&#x27;re back to the original question again of who holds the current encryption state :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933120' id='513027'>
<a class='timestamp' href='#513027'><time timestamp='2016-11-23T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: first question - where are we putting current protocol version?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933120' id='513028'>
<a class='timestamp' href='#513028'><time timestamp='2016-11-23T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933120' id='513029'>
<a class='timestamp' href='#513029'><time timestamp='2016-11-23T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: it was my impression you were planning on pulling that out of CNode and putting it in the State() stuff?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933120' id='513030'>
<a class='timestamp' href='#513030'><time timestamp='2016-11-23T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: but it somehow still has an optimization of having padding space preallocated
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933180' id='513031'>
<a class='timestamp' href='#513031'><time timestamp='2016-11-23T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: which does not technically belong in that layer
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933180' id='513032'>
<a class='timestamp' href='#513032'><time timestamp='2016-11-23T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933180' id='513033'>
<a class='timestamp' href='#513033'><time timestamp='2016-11-23T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: hmm, but the State should be processing-module specific
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933180' id='513034'>
<a class='timestamp' href='#513034'><time timestamp='2016-11-23T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: I believe encyption state should go right there...encryption state is something negotiated on connect, just like nVersion, and should be in the same layer
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933180' id='513035'>
<a class='timestamp' href='#513035'><time timestamp='2016-11-23T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: it is
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933180' id='513036'>
<a class='timestamp' href='#513036'><time timestamp='2016-11-23T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: disagree there - i don&#x27;t think every network message handler should reimplement encryption
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933240' id='513037'>
<a class='timestamp' href='#513037'><time timestamp='2016-11-23T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: agreed. That&#x27;s intended to be a &quot;max padding necessary&quot;. I added it to make BlueMatt happy with zero-copy, at the cost of having to stick it at the wrong layer
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933240' id='513038'>
<a class='timestamp' href='#513038'><time timestamp='2016-11-23T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s a meta layer
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933240' id='513039'>
<a class='timestamp' href='#513039'><time timestamp='2016-11-23T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there can be one module that deals with encryption, and once it&#x27;s done negotiating, tells connman that from that point on encrypt all messages, including those from other modules
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933240' id='513040'>
<a class='timestamp' href='#513040'><time timestamp='2016-11-23T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: &quot; every network message handler should reimplement encryption&quot; huh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933240' id='513041'>
<a class='timestamp' href='#513041'><time timestamp='2016-11-23T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: my view is that there will be separate message handling modules, each with their own lock and their own state
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933300' id='513042'>
<a class='timestamp' href='#513042'><time timestamp='2016-11-23T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: one from ping/pong, one for block processing, one for tx relay, ...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933300' id='513043'>
<a class='timestamp' href='#513043'><time timestamp='2016-11-23T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: i have a proposal for bip151 that would make it so that encryption isn&#x27;t reliant on the messaging processing layer, but i haven&#x27;t written it up yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933300' id='513044'>
<a class='timestamp' href='#513044'><time timestamp='2016-11-23T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: and they install handlers for specific messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933300' id='513045'>
<a class='timestamp' href='#513045'><time timestamp='2016-11-23T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: ok, and the place they hook in the handlers does the encryption, but certainly not CConnman
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933300' id='513046'>
<a class='timestamp' href='#513046'><time timestamp='2016-11-23T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: but all of their sent messages should get encrypted, not only those from the encryption module
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933360' id='513047'>
<a class='timestamp' href='#513047'><time timestamp='2016-11-23T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: i think you&#x27;re envisioning a global processing layer in between the specific message processing and CConnman?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933360' id='513048'>
<a class='timestamp' href='#513048'><time timestamp='2016-11-23T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: what if we want to use CConnman for some other protocol - does it now have to have the same encryption protocol?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933360' id='513049'>
<a class='timestamp' href='#513049'><time timestamp='2016-11-23T20:36:00Z'>20:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: CConnman should be a networking library, not a bitcoin networking library
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933420' id='513050'>
<a class='timestamp' href='#513050'><time timestamp='2016-11-23T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: heh, i thought that the networkling library would be libevent or some lower level wrapper
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933420' id='513051'>
<a class='timestamp' href='#513051'><time timestamp='2016-11-23T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: I mean right now its that way - the net message maker thing is a library that the processing modules all use
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933420' id='513052'>
<a class='timestamp' href='#513052'><time timestamp='2016-11-23T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
CConnman is exactly the bitcoin specific thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933420' id='513053'>
<a class='timestamp' href='#513053'><time timestamp='2016-11-23T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: opinion?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933420' id='513054'>
<a class='timestamp' href='#513054'><time timestamp='2016-11-23T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: that was my original intent. But it became clear as the months went on that tighter integration is needed...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933420' id='513055'>
<a class='timestamp' href='#513055'><time timestamp='2016-11-23T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: if we could get this stuff merged, we could move on to ripping out the lower-level stuff :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933480' id='513056'>
<a class='timestamp' href='#513056'><time timestamp='2016-11-23T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
after this comes the libevent+async changes, which is maybe closer to what you want to see changed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933480' id='513057'>
<a class='timestamp' href='#513057'><time timestamp='2016-11-23T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: i would think that the separation you&#x27;re talking about is maybe a later step... if we first want a net protocol, it just gets integrated into CConnman
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933480' id='513058'>
<a class='timestamp' href='#513058'><time timestamp='2016-11-23T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: well I dont think you mean that tighter-integration is needed between bitcoin logic and libevent/async
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933480' id='513059'>
<a class='timestamp' href='#513059'><time timestamp='2016-11-23T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but clearly there is some integration needed where the net_processing stuff is aware of how to serialize a message
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933480' id='513060'>
<a class='timestamp' href='#513060'><time timestamp='2016-11-23T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
or at least has an api like CNetMessageMaker
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933540' id='513061'>
<a class='timestamp' href='#513061'><time timestamp='2016-11-23T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: yes, that&#x27;s another possibility. One that sipa suggested a while back, i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933540' id='513062'>
<a class='timestamp' href='#513062'><time timestamp='2016-11-23T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: what is?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933540' id='513063'>
<a class='timestamp' href='#513063'><time timestamp='2016-11-23T20:39:00Z'>20:39</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
callers could pass in abstract classes to handle the message wrapping (header)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933600' id='513064'>
<a class='timestamp' href='#513064'><time timestamp='2016-11-23T20:40:00Z'>20:40</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: ultimately I think there /are/ clearly three layers here, as sipa said, just a quesition of how we split them up....I think for now its much easier to dump things in net_processing and make CConnman just a &quot;dumb pipe&quot; or at least &quot;semi-dumb-pipe&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933660' id='513065'>
<a class='timestamp' href='#513065'><time timestamp='2016-11-23T20:41:00Z'>20:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
because there are lots of changes that need to happen in just the network-library layer
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933660' id='513066'>
<a class='timestamp' href='#513066'><time timestamp='2016-11-23T20:41:00Z'>20:41</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: for context, I first wrote a completely low-level, no-bitcoin network layer. Plugging that into bitcoin proved to require a bunch of bitcoin-specific hacks. In the end, I didn&#x27;t think it was an improvement over what we had.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933720' id='513067'>
<a class='timestamp' href='#513067'><time timestamp='2016-11-23T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: bitcoin-specific hacks like what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933720' id='513068'>
<a class='timestamp' href='#513068'><time timestamp='2016-11-23T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: in your hypothetical new network protocol, are there still network messages of the form (12-byte-command, data) that are dealt with in the same way in main etc?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933720' id='513069'>
<a class='timestamp' href='#513069'><time timestamp='2016-11-23T20:42:00Z'>20:42</time></a>
&lt;<span class='nick nick-4'> kanzure</span>&gt;
was the networking library you were working on thrown out, cfields?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933780' id='513070'>
<a class='timestamp' href='#513070'><time timestamp='2016-11-23T20:43:00Z'>20:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: hmm? I dunno, do we need to stick to the same header format in 151?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933780' id='513071'>
<a class='timestamp' href='#513071'><time timestamp='2016-11-23T20:43:00Z'>20:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: I dont think we should be restricted to that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933780' id='513072'>
<a class='timestamp' href='#513072'><time timestamp='2016-11-23T20:43:00Z'>20:43</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
kanzure: not thrown out, but i kinda decided to converge with our current stuff instead
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933840' id='513073'>
<a class='timestamp' href='#513073'><time timestamp='2016-11-23T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(plus I strongly thing having additional networking libraries would be welcome)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933840' id='513074'>
<a class='timestamp' href='#513074'><time timestamp='2016-11-23T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i see bip151 simply as a change to the pipe, not to the messages in it
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933840' id='513075'>
<a class='timestamp' href='#513075'><time timestamp='2016-11-23T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: there&#x27;s a strong reason to keep the header size, imo
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933840' id='513076'>
<a class='timestamp' href='#513076'><time timestamp='2016-11-23T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and i think CConnman is what is common between all network protocols that are just pipes for delivering messages of that form
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933840' id='513077'>
<a class='timestamp' href='#513077'><time timestamp='2016-11-23T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: indeed, but are message headers a part of the pipe, or the messages?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933840' id='513078'>
<a class='timestamp' href='#513078'><time timestamp='2016-11-23T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
though i&#x27;m aware there are plenty of drawbacks, and i wouldn&#x27;t be heartbroken if it were abandoned
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933840' id='513079'>
<a class='timestamp' href='#513079'><time timestamp='2016-11-23T20:44:00Z'>20:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933900' id='513080'>
<a class='timestamp' href='#513080'><time timestamp='2016-11-23T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: well putting them in CConnman is pipe....
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933900' id='513081'>
<a class='timestamp' href='#513081'><time timestamp='2016-11-23T20:45:00Z'>20:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: or you&#x27;d need to change every message handler too when the pipe changes
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933960' id='513082'>
<a class='timestamp' href='#513082'><time timestamp='2016-11-23T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(note that clearly the headers wont all be the same - bip 151 will at least change the definition of the hash field)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933960' id='513083'>
<a class='timestamp' href='#513083'><time timestamp='2016-11-23T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: i suppose we&#x27;re looking at this from different sides. I originally rewrote the net layer and tried to plug it into bitcoin. I didn&#x27;t like the result. I started instead trying to rip bitcoin out of our net layer, and that&#x27;s where we are now. The next step would be to split the resulting CConnman into high and low levels. That&#x27;s next.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479933960' id='513084'>
<a class='timestamp' href='#513084'><time timestamp='2016-11-23T20:46:00Z'>20:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: i see messages as (12-byte-command, payload) things... that excludes the checksum
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934020' id='513085'>
<a class='timestamp' href='#513085'><time timestamp='2016-11-23T20:47:00Z'>20:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
bip151 changes the pipe, but the things being sent over it are still the same messages
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934080' id='513086'>
<a class='timestamp' href='#513086'><time timestamp='2016-11-23T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: note that if it remains with start bytes (different ones) up front, and padded somehow to 24 bytes, the net layer can handle decryption without having to count on the messaging layer for initialization
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934080' id='513087'>
<a class='timestamp' href='#513087'><time timestamp='2016-11-23T20:48:00Z'>20:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: ok, well if CConnman is gonna split, and the hashing/encryption/etc go in the high level, thats ok, but then CNetMsgMaker has to turn into what sipa said and have no knowledge of message-header
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934140' id='513088'>
<a class='timestamp' href='#513088'><time timestamp='2016-11-23T20:49:00Z'>20:49</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(which I think is an easy change from 9128 as it stands now?)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934200' id='513089'>
<a class='timestamp' href='#513089'><time timestamp='2016-11-23T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: no knowledge as-in it&#x27;s done in CConnman?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934200' id='513090'>
<a class='timestamp' href='#513090'><time timestamp='2016-11-23T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: its done in CConnman-high
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934200' id='513091'>
<a class='timestamp' href='#513091'><time timestamp='2016-11-23T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
:p     
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934200' id='513092'>
<a class='timestamp' href='#513092'><time timestamp='2016-11-23T20:50:00Z'>20:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think it&#x27;s fine for CSerializedMessage to have some padding space before/after for undefined purposes, which CConnman(-high) just happens to conveniently use
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934260' id='513093'>
<a class='timestamp' href='#513093'><time timestamp='2016-11-23T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: I see no advantage to doing so?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934260' id='513094'>
<a class='timestamp' href='#513094'><time timestamp='2016-11-23T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
right, that was only added for the zero-copy case
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934260' id='513095'>
<a class='timestamp' href='#513095'><time timestamp='2016-11-23T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
BlueMatt: not needing to copy it into a single buffer afterwards
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934260' id='513096'>
<a class='timestamp' href='#513096'><time timestamp='2016-11-23T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: I dont think you need that? CConnman-low takes a list of vectors...just give it two instead of one
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934260' id='513097'>
<a class='timestamp' href='#513097'><time timestamp='2016-11-23T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
its still zero-copy
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934260' id='513098'>
<a class='timestamp' href='#513098'><time timestamp='2016-11-23T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hmm     
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934260' id='513099'>
<a class='timestamp' href='#513099'><time timestamp='2016-11-23T20:51:00Z'>20:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934320' id='513100'>
<a class='timestamp' href='#513100'><time timestamp='2016-11-23T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
alternatively we could just send twice, that was an original TODO to investigate
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934320' id='513101'>
<a class='timestamp' href='#513101'><time timestamp='2016-11-23T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: is that what you&#x27;re suggesting?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934320' id='513102'>
<a class='timestamp' href='#513102'><time timestamp='2016-11-23T20:52:00Z'>20:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: &quot;send twice&quot;?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934380' id='513103'>
<a class='timestamp' href='#513103'><time timestamp='2016-11-23T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
2 send() calls. or a sendmsg.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934380' id='513104'>
<a class='timestamp' href='#513104'><time timestamp='2016-11-23T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934380' id='513105'>
<a class='timestamp' href='#513105'><time timestamp='2016-11-23T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
thats ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934380' id='513106'>
<a class='timestamp' href='#513106'><time timestamp='2016-11-23T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(and not performance-busting)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934380' id='513107'>
<a class='timestamp' href='#513107'><time timestamp='2016-11-23T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(i&#x27;m pretty sure libevent uses scatter/gather anyway, so that should be freeish)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934380' id='513108'>
<a class='timestamp' href='#513108'><time timestamp='2016-11-23T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
even two syscalls wont be performance-bustingn
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934380' id='513109'>
<a class='timestamp' href='#513109'><time timestamp='2016-11-23T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ng     
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934380' id='513110'>
<a class='timestamp' href='#513110'><time timestamp='2016-11-23T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
well, do we still disable nagle?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934440' id='513111'>
<a class='timestamp' href='#513111'><time timestamp='2016-11-23T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
will have to look into that
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934440' id='513112'>
<a class='timestamp' href='#513112'><time timestamp='2016-11-23T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934440' id='513113'>
<a class='timestamp' href='#513113'><time timestamp='2016-11-23T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
have to use the MSG_MORE thing for the header, then
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934440' id='513114'>
<a class='timestamp' href='#513114'><time timestamp='2016-11-23T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
use writev(2) :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934440' id='513115'>
<a class='timestamp' href='#513115'><time timestamp='2016-11-23T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: i was more concerned about possible awkwardness if you managed to push out exactly only the header
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934440' id='513116'>
<a class='timestamp' href='#513116'><time timestamp='2016-11-23T20:54:00Z'>20:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
before what? the connection dies? so what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934500' id='513117'>
<a class='timestamp' href='#513117'><time timestamp='2016-11-23T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i do like this idea... just remove the message padding optimization out of CSerializedMessage, and use separate writes for header/...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934500' id='513118'>
<a class='timestamp' href='#513118'><time timestamp='2016-11-23T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ok, i figured someone would complain about that :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934500' id='513119'>
<a class='timestamp' href='#513119'><time timestamp='2016-11-23T20:55:00Z'>20:55</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
easy, then
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934560' id='513120'>
<a class='timestamp' href='#513120'><time timestamp='2016-11-23T20:56:00Z'>20:56</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
i&#x27;m not going to bother with writev/sendmsg though, since libevent will handle that internally
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934560' id='513121'>
<a class='timestamp' href='#513121'><time timestamp='2016-11-23T20:56:00Z'>20:56</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
thats fine
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934560' id='513122'>
<a class='timestamp' href='#513122'><time timestamp='2016-11-23T20:56:00Z'>20:56</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
if you switch to libevent and I run an strace and you&#x27;re wrong, I&#x27;ll be upset, though :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934620' id='513123'>
<a class='timestamp' href='#513123'><time timestamp='2016-11-23T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
heh     
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934620' id='513124'>
<a class='timestamp' href='#513124'><time timestamp='2016-11-23T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: so to be clear, the next steps are to begin making things async-friendly. I have a branch which adds OnConnect(), OnDisconnect(), etc
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934620' id='513125'>
<a class='timestamp' href='#513125'><time timestamp='2016-11-23T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: cool, sounds good :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934620' id='513126'>
<a class='timestamp' href='#513126'><time timestamp='2016-11-23T20:57:00Z'>20:57</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
once we&#x27;re there, we can begin the separation, and have a virtual class (high level) that responds to those things
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934680' id='513127'>
<a class='timestamp' href='#513127'><time timestamp='2016-11-23T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sounds good
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934680' id='513128'>
<a class='timestamp' href='#513128'><time timestamp='2016-11-23T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: yay
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934680' id='513129'>
<a class='timestamp' href='#513129'><time timestamp='2016-11-23T20:58:00Z'>20:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
concept ack
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934740' id='513130'>
<a class='timestamp' href='#513130'><time timestamp='2016-11-23T20:59:00Z'>20:59</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
in the end, i think it will end up looking much like my original lib. We&#x27;ll just have gone from core-&gt;lib rather than the other way around.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934800' id='513131'>
<a class='timestamp' href='#513131'><time timestamp='2016-11-23T21:00:00Z'>21:00</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
anyway, after this PR, I think we can segregate the files, and no one will have to concern themselves with the churn in the net code anymore :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934860' id='513132'>
<a class='timestamp' href='#513132'><time timestamp='2016-11-23T21:01:00Z'>21:01</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: yay, then I can split main :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934860' id='513133'>
<a class='timestamp' href='#513133'><time timestamp='2016-11-23T21:01:00Z'>21:01</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: heh, if we&#x27;ve done this right, we can do them in parallel without stomping on eachother :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934920' id='513134'>
<a class='timestamp' href='#513134'><time timestamp='2016-11-23T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: nailed the timing too...you&#x27;ll get your last change into main a week before it splits :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934920' id='513135'>
<a class='timestamp' href='#513135'><time timestamp='2016-11-23T21:02:00Z'>21:02</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
hehe
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934980' id='513136'>
<a class='timestamp' href='#513136'><time timestamp='2016-11-23T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: so to clarify, drop the pad hack, send() twice, and you&#x27;re happy with the rest?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479934980' id='513137'>
<a class='timestamp' href='#513137'><time timestamp='2016-11-23T21:03:00Z'>21:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: yea, I&#x27;m ok with it as a next-step :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479935040' id='513138'>
<a class='timestamp' href='#513138'><time timestamp='2016-11-23T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: ok, thanks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479935040' id='513139'>
<a class='timestamp' href='#513139'><time timestamp='2016-11-23T21:04:00Z'>21:04</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
and thanks sipa as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1479935400' id='513140'>
<a class='timestamp' href='#513140'><time timestamp='2016-11-23T21:10:00Z'>21:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
great
<br>
</div>

<div class='talk op-msg' data-timestamp='1479937680' id='513141'>
<a class='timestamp' href='#513141'><time timestamp='2016-11-23T21:48:00Z'>21:48</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: i&#x27;m not familiar enough, so maybe you would know... any risk of the SyncTransaction having an effect on the downstream listeners? zmq, in particular
<br>
</div>

<div class='talk op-msg' data-timestamp='1479937680' id='513142'>
<a class='timestamp' href='#513142'><time timestamp='2016-11-23T21:48:00Z'>21:48</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
*SyncTransaction change
<br>
</div>

<div class='talk op-msg' data-timestamp='1479937800' id='513143'>
<a class='timestamp' href='#513143'><time timestamp='2016-11-23T21:50:00Z'>21:50</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
oh nevermind, i guess they don&#x27;t actually see any difference
<br>
</div>

<div class='talk op-msg' data-timestamp='1479940140' id='513144'>
<a class='timestamp' href='#513144'><time timestamp='2016-11-23T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: yea, point is now the orphan map is limited to p2p logic now :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479941520' id='513145'>
<a class='timestamp' href='#513145'><time timestamp='2016-11-23T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
BlueMatt: ready for the big move after #8930? Or am I missing one?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479941520' id='513146'>
<a class='timestamp' href='#513146'><time timestamp='2016-11-23T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/8930" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/8930</a> | Move orphan processing to ActivateBestChain by TheBlueMatt · Pull Request #8930 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1479941520' id='513147'>
<a class='timestamp' href='#513147'><time timestamp='2016-11-23T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ah nm, #9183
<br>
</div>

<div class='talk op-msg' data-timestamp='1479941520' id='513148'>
<a class='timestamp' href='#513148'><time timestamp='2016-11-23T22:52:00Z'>22:52</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9183" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9183</a> | Final Preparation for main.cpp Split by TheBlueMatt · Pull Request #9183 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1479942360' id='513149'>
<a class='timestamp' href='#513149'><time timestamp='2016-11-23T23:06:00Z'>23:06</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
cfields: yea, ready after 9183
<br>
</div>

<div class='talk op-msg' data-timestamp='1479942900' id='513150'>
<a class='timestamp' href='#513150'><time timestamp='2016-11-23T23:15:00Z'>23:15</time></a>
&lt;<span class='nick nick-4'> dhill</span>&gt;
addrmap.cpp, in CAddrInfo::GetChance(), nSinceLastSeen is unused...
<br>
</div>

<div class='talk op-msg' data-timestamp='1479943620' id='513151'>
<a class='timestamp' href='#513151'><time timestamp='2016-11-23T23:27:00Z'>23:27</time></a>
&lt;<span class='nick nick-12'> fubu</span>&gt;
ssij
<br>
</div>

<div class='talk op-msg' data-timestamp='1479944160' id='513152'>
<a class='timestamp' href='#513152'><time timestamp='2016-11-23T23:36:00Z'>23:36</time></a>
&lt;<span class='nick nick-12'> fubu</span>&gt;
xD     
<br>
</div>

<div class='talk op-msg' data-timestamp='1479944580' id='513153'>
<a class='timestamp' href='#513153'><time timestamp='2016-11-23T23:43:00Z'>23:43</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
Anyone thought about removing the dust limit?  In a feemarket world, it seems a little useless, and for things like lightning it complicates things (we have to always keep everything above the dust limit otherwise risk holding a non-standard tx).
<br>
</div>

<div class='talk op-msg' data-timestamp='1479944640' id='513154'>
<a class='timestamp' href='#513154'><time timestamp='2016-11-23T23:44:00Z'>23:44</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
If we consistently were operating in a functioning market I&#x27;d agree strongly. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1479944700' id='513155'>
<a class='timestamp' href='#513155'><time timestamp='2016-11-23T23:45:00Z'>23:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Unfortunately there are many blocks that aren&#x27;t and so they&#x27;d mine huge wads of dust advertisment payments sitting around.  I dunno if segwit will make this better or worse. (increases utxo costs, but also increases capacity.)
<br>
</div>

<div class='talk op-msg' data-timestamp='1479944700' id='513156'>
<a class='timestamp' href='#513156'><time timestamp='2016-11-23T23:45:00Z'>23:45</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rusty: so &quot;someday hopefully soon&quot;? 
<br>
</div>

<div class='talk op-msg' data-timestamp='1479944760' id='513157'>
<a class='timestamp' href='#513157'><time timestamp='2016-11-23T23:46:00Z'>23:46</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
already one large miner bypasses it, so perhaps we should give up.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479944820' id='513158'>
<a class='timestamp' href='#513158'><time timestamp='2016-11-23T23:47:00Z'>23:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
here is a week of &quot;mempool fees available&quot; immediately before and immediately after a block, two-ish weeks ago: <a href="https://people.xiph.org/~greg/temp/fee_avail.png" class="link" target="_blank">https://people.xiph.org/~greg/temp/fee_avail.png</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479944820' id='513159'>
<a class='timestamp' href='#513159'><time timestamp='2016-11-23T23:47:00Z'>23:47</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
you can see there are many periods of effectively no backpressure.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479944880' id='513160'>
<a class='timestamp' href='#513160'><time timestamp='2016-11-23T23:48:00Z'>23:48</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
gmaxwell: makes sense.  In practice, lightning has a &quot;don&#x27;t bother making any outputs below this&quot; for economic reasons, but version 0 might have skipped that if not for the standardness issue.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479944880' id='513161'>
<a class='timestamp' href='#513161'><time timestamp='2016-11-23T23:48:00Z'>23:48</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
gmaxwell: nice graph!
<br>
</div>

<div class='talk op-msg' data-timestamp='1479944940' id='513162'>
<a class='timestamp' href='#513162'><time timestamp='2016-11-23T23:49:00Z'>23:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
here is a few days before that graph, where there was some nicer behavior: <a href="https://people.xiph.org/~greg/temp/fee_avail2.png" class="link" target="_blank">https://people.xiph.org/~greg/temp/fee_avail2.png</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1479945000' id='513163'>
<a class='timestamp' href='#513163'><time timestamp='2016-11-23T23:50:00Z'>23:50</time></a>
&lt;<span class='nick nick-8'> rusty</span>&gt;
gmaxwell: it would be nice to have these nicely generated and running constantly somewhere, BTW.  Did you have to hack bitcoind to get the data?
<br>
</div>

<div class='talk op-msg' data-timestamp='1479945000' id='513164'>
<a class='timestamp' href='#513164'><time timestamp='2016-11-23T23:50:00Z'>23:50</time></a>
&lt;<span class='nick nick-12'> fubu</span>&gt;
u     
<br>
</div>

<div class='talk op-msg' data-timestamp='1479945000' id='513165'>
<a class='timestamp' href='#513165'><time timestamp='2016-11-23T23:50:00Z'>23:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
rusty: no, set the target blocksize to 1mb... run 
<br>
</div>

<div class='talk op-msg' data-timestamp='1479945000' id='513166'>
<a class='timestamp' href='#513166'><time timestamp='2016-11-23T23:50:00Z'>23:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
$ cat fun.sh
<br>
</div>

<div class='talk op-msg' data-timestamp='1479945000' id='513167'>
<a class='timestamp' href='#513167'><time timestamp='2016-11-23T23:50:00Z'>23:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
echo `date -u +%s` `./bitcoin-cli getblockcount`  `./bitcoin-cli getblocktemplate | grep \&quot;fee\&quot; | awk &#x27;{aa+=$2} END {print aa}&#x27;`
<br>
</div>

<div class='talk op-msg' data-timestamp='1479945000' id='513168'>
<a class='timestamp' href='#513168'><time timestamp='2016-11-23T23:50:00Z'>23:50</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
every couple seconds.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479945060' id='513169'>
<a class='timestamp' href='#513169'><time timestamp='2016-11-23T23:51:00Z'>23:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I have it running on my desktop but I keep disrupting it to tinker with things.. though the disruptions are less disruptive now that we have mempool saving in master.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479945060' id='513170'>
<a class='timestamp' href='#513170'><time timestamp='2016-11-23T23:51:00Z'>23:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
the graph is just a little bit of postprocessing that data to get the before/after numbers for every block change.
<br>
</div>

<div class='talk op-msg' data-timestamp='1479945120' id='513171'>
<a class='timestamp' href='#513171'><time timestamp='2016-11-23T23:52:00Z'>23:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa was working on some patches that would give a &quot;CDF&quot; like report for the mempool. (size vs fees) multiple blocks out. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1479945180' id='513172'>
<a class='timestamp' href='#513172'><time timestamp='2016-11-23T23:53:00Z'>23:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
one nice thing about this data is you can see all the miners that aren&#x27;t doing CPFP mining yet... when they produce blocks that pay a lot less fee than my node would produce.
<br>
</div>

</div>
</section>

</body>
</html>
