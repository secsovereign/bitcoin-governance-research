<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2019-04-05
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2019-04-05' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:20 UTC</pre>
<pre><a href="/bitcoin-core-dev/2019-03-05">&lt;</a><span class='header'>    April 2019    </span><a href="/bitcoin-core-dev/2019-05-05">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;    <a class="" href="/bitcoin-core-dev/2019-04-01">1</a>  <a class="" href="/bitcoin-core-dev/2019-04-02">2</a>  <a class="" href="/bitcoin-core-dev/2019-04-03">3</a>  <a class="" href="/bitcoin-core-dev/2019-04-04">4</a>  <a class="current" href="/bitcoin-core-dev/2019-04-05">5</a>  <a class="" href="/bitcoin-core-dev/2019-04-06">6</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2019-04-07">7</a>  <a class="" href="/bitcoin-core-dev/2019-04-08">8</a>  <a class="" href="/bitcoin-core-dev/2019-04-09">9</a> <a class="" href="/bitcoin-core-dev/2019-04-10">10</a> <a class="" href="/bitcoin-core-dev/2019-04-11">11</a> <a class="" href="/bitcoin-core-dev/2019-04-12">12</a> <a class="" href="/bitcoin-core-dev/2019-04-13">13</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-04-14">14</a> <a class="" href="/bitcoin-core-dev/2019-04-15">15</a> <a class="" href="/bitcoin-core-dev/2019-04-16">16</a> <a class="" href="/bitcoin-core-dev/2019-04-17">17</a> <a class="" href="/bitcoin-core-dev/2019-04-18">18</a> <a class="" href="/bitcoin-core-dev/2019-04-19">19</a> <a class="" href="/bitcoin-core-dev/2019-04-20">20</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-04-21">21</a> <a class="" href="/bitcoin-core-dev/2019-04-22">22</a> <a class="" href="/bitcoin-core-dev/2019-04-23">23</a> <a class="" href="/bitcoin-core-dev/2019-04-24">24</a> <a class="" href="/bitcoin-core-dev/2019-04-25">25</a> <a class="" href="/bitcoin-core-dev/2019-04-26">26</a> <a class="" href="/bitcoin-core-dev/2019-04-27">27</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2019-04-28">28</a> <a class="" href="/bitcoin-core-dev/2019-04-29">29</a> <a class="" href="/bitcoin-core-dev/2019-04-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1554436500' id='662053'>
<a class='timestamp' href='#662053'><time timestamp='2019-04-05T03:55:00Z'>03:55</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] kallewoof opened pull request #15753: RPC/testing: logprint RPC command (master...rpc-logprint) <a href="https://github.com/bitcoin/bitcoin/pull/15753" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15753</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1554443520' id='662054'>
<a class='timestamp' href='#662054'><time timestamp='2019-04-05T05:52:00Z'>05:52</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] benthecarman opened pull request #15754: rpc: getrpcinfo docs (master...rpc_get_info_doc) <a href="https://github.com/bitcoin/bitcoin/pull/15754" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15754</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1554453000' id='662055'>
<a class='timestamp' href='#662055'><time timestamp='2019-04-05T08:30:00Z'>08:30</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] Bushstar opened pull request #15755: qt: remove unused var (master...remove-unused-var) <a href="https://github.com/bitcoin/bitcoin/pull/15755" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15755</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1554470280' id='662056'>
<a class='timestamp' href='#662056'><time timestamp='2019-04-05T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/c83442e17412...35991b162fd1" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/c83442e17412...35991b162fd1</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1554470280' id='662057'>
<a class='timestamp' href='#662057'><time timestamp='2019-04-05T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 4831aec Peter Bushnell: Remove unused var
<br>
</div>

<div class='talk op-msg' data-timestamp='1554470280' id='662058'>
<a class='timestamp' href='#662058'><time timestamp='2019-04-05T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 35991b1 MarcoFalke: Merge #15755: rpc: remove unused var in rawtransaction.cpp
<br>
</div>

<div class='talk op-msg' data-timestamp='1554470340' id='662059'>
<a class='timestamp' href='#662059'><time timestamp='2019-04-05T13:19:00Z'>13:19</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #15755: rpc: remove unused var in rawtransaction.cpp (master...remove-unused-var) <a href="https://github.com/bitcoin/bitcoin/pull/15755" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15755</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1554477780' id='662060'>
<a class='timestamp' href='#662060'><time timestamp='2019-04-05T15:23:00Z'>15:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] promag opened pull request #15756: gui: Add shortcuts for tab tools (master...2019-04-tools-shortcuts) <a href="https://github.com/bitcoin/bitcoin/pull/15756" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15756</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1554479520' id='662061'>
<a class='timestamp' href='#662061'><time timestamp='2019-04-05T15:52:00Z'>15:52</time></a>
&lt;<span class='nick nick-13'> sdaftuar</span>&gt;
sipa: fyi i added a few sentences to the release notes wiki page mentioning the getdata randomization change in 0.18, but feel free to change it if you had something else in mind
<br>
</div>

<div class='talk op-msg' data-timestamp='1554481080' id='662062'>
<a class='timestamp' href='#662062'><time timestamp='2019-04-05T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa opened pull request #15757: List new RPCs in psbt.md and descriptors.md (master...201904_docupdate) <a href="https://github.com/bitcoin/bitcoin/pull/15757" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15757</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1554491160' id='662063'>
<a class='timestamp' href='#662063'><time timestamp='2019-04-05T19:06:00Z'>19:06</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #15758: qa: Add further tests to wallet_balance (master...1904-qaWalletBal) <a href="https://github.com/bitcoin/bitcoin/pull/15758" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15758</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1554492540' id='662064'>
<a class='timestamp' href='#662064'><time timestamp='2019-04-05T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sdaftuar opened pull request #15759: [p2p] Add 2 outbound blocks-only connections (master...2019-03-blocksonly-edges) <a href="https://github.com/bitcoin/bitcoin/pull/15759" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/15759</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1554506700' id='662065'>
<a class='timestamp' href='#662065'><time timestamp='2019-04-05T23:25:00Z'>23:25</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
IBD goes very fast until it <b>*seems like*</b> the DB cache &quot;fills up&quot;, then it basically stops until I restart the node. It seems to process about 50 - 70 GB worth of transactions before the 4 GB cache becomes full. Is this expected behavior?
<br>
</div>

<div class='talk op-msg' data-timestamp='1554506940' id='662066'>
<a class='timestamp' href='#662066'><time timestamp='2019-04-05T23:29:00Z'>23:29</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
CubicEarth: one confounding factor is that IBD slows down a lot over time as blocks get more full
<br>
</div>

<div class='talk op-msg' data-timestamp='1554506940' id='662067'>
<a class='timestamp' href='#662067'><time timestamp='2019-04-05T23:29:00Z'>23:29</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
(by &#x27;over time&#x27; I mean &#x27;as it proceeds through history&#x27;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1554506940' id='662068'>
<a class='timestamp' href='#662068'><time timestamp='2019-04-05T23:29:00Z'>23:29</time></a>
&lt;<span class='nick nick-4'> gwillen</span>&gt;
I haven&#x27;t observed the behavior you describe and I&#x27;m pretty sure it&#x27;s not expected, as it would be kind of dumb 
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507120' id='662069'>
<a class='timestamp' href='#662069'><time timestamp='2019-04-05T23:32:00Z'>23:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
CubicEarth: I think you&#x27;re just seeing chain growth, you&#x27;re also probably mistaken about it stopping.
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507120' id='662070'>
<a class='timestamp' href='#662070'><time timestamp='2019-04-05T23:32:00Z'>23:32</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
 I&#x27;m aware of the slowing-down phenomenon, and this certainly isn&#x27;t that. This machine - 2012-ea 2.4 Ghz i5, spinning disk, 8GB ram - can easily do two - 2018-type blocks per second
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507180' id='662071'>
<a class='timestamp' href='#662071'><time timestamp='2019-04-05T23:33:00Z'>23:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
CubicEarth: what you&#x27;re thinking is &quot;stopping&quot; is that its can&#x27;t connect more blocks until a particular peer replies with a requested block (or gets timed out)
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507180' id='662072'>
<a class='timestamp' href='#662072'><time timestamp='2019-04-05T23:33:00Z'>23:33</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
gmaxwell: In this case, I only have one peer, and that is another full node on my LAN
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507180' id='662073'>
<a class='timestamp' href='#662073'><time timestamp='2019-04-05T23:33:00Z'>23:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
during that time it doesn&#x27;t log updatetips (but its still downloading in the background, at least until there are 1000 out of order blocks waiting)
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507240' id='662074'>
<a class='timestamp' href='#662074'><time timestamp='2019-04-05T23:34:00Z'>23:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Or you&#x27;re just seeing the dbcache flush, and if you&#x27;ve cranked that to 4gb then on a slow drive the flush can take two minutes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507240' id='662075'>
<a class='timestamp' href='#662075'><time timestamp='2019-04-05T23:34:00Z'>23:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
but as soon as its done flushing it&#x27;ll continue like before.
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507300' id='662076'>
<a class='timestamp' href='#662076'><time timestamp='2019-04-05T23:35:00Z'>23:35</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
I think it has something to do with the flush, because when I go to close it down, then it does take 2 (or more!) minutes. I was wondering if for some reason it wasn&#x27;t initiating the flush on its own
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507360' id='662077'>
<a class='timestamp' href='#662077'><time timestamp='2019-04-05T23:36:00Z'>23:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it flushes when the dbcache fills or when you shut down (or after 24 hours, in normal operation)
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507540' id='662078'>
<a class='timestamp' href='#662078'><time timestamp='2019-04-05T23:39:00Z'>23:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Someday it will flush incrementally in the background. Historically the requirement for consistency made that impossible but last year we did some redesign that eliminated that issue.  But doing the rest of the work to track and flush incrementally, without hurting performance, isn&#x27;t trivial and no one is working on that right now AFAIK.
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507540' id='662079'>
<a class='timestamp' href='#662079'><time timestamp='2019-04-05T23:39:00Z'>23:39</time></a>
&lt;<span class='nick nick-15'> echeveria</span>&gt;
I haven&#x27;t seen very many blocks recently that miss compactblocks, even when they do its using the extra pool. that&#x27;s just delicious. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507540' id='662080'>
<a class='timestamp' href='#662080'><time timestamp='2019-04-05T23:39:00Z'>23:39</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
Well, once this I&#x27;m done with this sync, I&#x27;ll get another laptop going, and take more careful notes about what I see. I&#x27;m suspecting that something is preventing it from flushing the DB when it gets full
<br>
</div>

<div class='talk op-msg' data-timestamp='1554507780' id='662081'>
<a class='timestamp' href='#662081'><time timestamp='2019-04-05T23:43:00Z'>23:43</time></a>
&lt;<span class='nick nick-16'> CubicEarth</span>&gt;
gmaxwell: good to know about the incremental flush concept
<br>
</div>

<div class='talk op-msg' data-timestamp='1554508140' id='662082'>
<a class='timestamp' href='#662082'><time timestamp='2019-04-05T23:49:00Z'>23:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
CubicEarth: I don&#x27;t think thats really possible, in any case, turn up debug logging (debug=1) and you should see it log every 16mb flushed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1554508380' id='662083'>
<a class='timestamp' href='#662083'><time timestamp='2019-04-05T23:53:00Z'>23:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
echeveria: $ grep &#x27;Successfully reconstructed&#x27; ~/.bitcoin/debug.log | tail -n 1008 | awk &#x27;{misses += $22&gt;0} END {print misses/NR}&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1554508380' id='662084'>
<a class='timestamp' href='#662084'><time timestamp='2019-04-05T23:53:00Z'>23:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
0.0803571
<br>
</div>

<div class='talk op-msg' data-timestamp='1554508380' id='662085'>
<a class='timestamp' href='#662085'><time timestamp='2019-04-05T23:53:00Z'>23:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
thats a lot higher than typical over the last 6 months or so.
<br>
</div>

<div class='talk op-msg' data-timestamp='1554508560' id='662086'>
<a class='timestamp' href='#662086'><time timestamp='2019-04-05T23:56:00Z'>23:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
overall miss rate of 0.000235103*txn. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1554508680' id='662087'>
<a class='timestamp' href='#662087'><time timestamp='2019-04-05T23:58:00Z'>23:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
e.g. in a log ending 2018/03/18
<br>
</div>

<div class='talk op-msg' data-timestamp='1554508680' id='662088'>
<a class='timestamp' href='#662088'><time timestamp='2019-04-05T23:58:00Z'>23:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
$ grep &#x27;Successfully reconstructed&#x27; ~/.bitcoin/debug.log.old | tail -n 144 | awk &#x27;{misses += $22&gt;0} END {print misses/NR}&#x27;
<br>
</div>

<div class='talk op-msg' data-timestamp='1554508680' id='662089'>
<a class='timestamp' href='#662089'><time timestamp='2019-04-05T23:58:00Z'>23:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
0.0138889
<br>
</div>

<div class='talk op-msg' data-timestamp='1554508680' id='662090'>
<a class='timestamp' href='#662090'><time timestamp='2019-04-05T23:58:00Z'>23:58</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and a per tx miss rate of 1.83067e-05.
<br>
</div>

<div class='talk op-msg' data-timestamp='1554508740' id='662091'>
<a class='timestamp' href='#662091'><time timestamp='2019-04-05T23:59:00Z'>23:59</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
might be interesting to go look at blocks with misses to see if someone has done some stupid thing that is making them miss.
<br>
</div>

</div>
</section>

</body>
</html>
