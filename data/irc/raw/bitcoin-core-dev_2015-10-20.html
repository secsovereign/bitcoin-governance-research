<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2015-10-20
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2015-10-20' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:28 UTC</pre>
<pre><a href="/bitcoin-core-dev/2015-09-20">&lt;</a><span class='header'>   October 2015   </span><a href="/bitcoin-core-dev/2015-11-20">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;             <a class="" href="/bitcoin-core-dev/2015-10-01">1</a>  <a class="" href="/bitcoin-core-dev/2015-10-02">2</a>  <a class="" href="/bitcoin-core-dev/2015-10-03">3</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2015-10-04">4</a>  <a class="" href="/bitcoin-core-dev/2015-10-05">5</a>  <a class="" href="/bitcoin-core-dev/2015-10-06">6</a>  <a class="" href="/bitcoin-core-dev/2015-10-07">7</a>  <a class="" href="/bitcoin-core-dev/2015-10-08">8</a>  <a class="" href="/bitcoin-core-dev/2015-10-09">9</a> <a class="" href="/bitcoin-core-dev/2015-10-10">10</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-10-11">11</a> <a class="" href="/bitcoin-core-dev/2015-10-12">12</a> <a class="" href="/bitcoin-core-dev/2015-10-13">13</a> <a class="" href="/bitcoin-core-dev/2015-10-14">14</a> <a class="" href="/bitcoin-core-dev/2015-10-15">15</a> <a class="" href="/bitcoin-core-dev/2015-10-16">16</a> <a class="" href="/bitcoin-core-dev/2015-10-17">17</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-10-18">18</a> <a class="" href="/bitcoin-core-dev/2015-10-19">19</a> <a class="current" href="/bitcoin-core-dev/2015-10-20">20</a> <a class="" href="/bitcoin-core-dev/2015-10-21">21</a> <a class="" href="/bitcoin-core-dev/2015-10-22">22</a> <a class="" href="/bitcoin-core-dev/2015-10-23">23</a> <a class="" href="/bitcoin-core-dev/2015-10-24">24</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-10-25">25</a> <a class="" href="/bitcoin-core-dev/2015-10-26">26</a> <a class="" href="/bitcoin-core-dev/2015-10-27">27</a> <a class="" href="/bitcoin-core-dev/2015-10-28">28</a> <a class="" href="/bitcoin-core-dev/2015-10-29">29</a> <a class="" href="/bitcoin-core-dev/2015-10-30">30</a> <a class="" href="/bitcoin-core-dev/2015-10-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1445300880' id='430118'>
<a class='timestamp' href='#430118'><time timestamp='2015-10-20T00:28:00Z'>00:28</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
How important is memory comparison for #6851 ? I get a std::bad_alloc with my test wallet, so I&#x27;ll need to find something less spammy and start over :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1445301240' id='430119'>
<a class='timestamp' href='#430119'><time timestamp='2015-10-20T00:34:00Z'>00:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Luke-Jr: how much memory does the host you&#x27;re testing on have?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445301300' id='430120'>
<a class='timestamp' href='#430120'><time timestamp='2015-10-20T00:35:00Z'>00:35</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
gmaxwell: 16 GB, but 32-bit can only alloc &lt;4 GB
<br>
</div>

<div class='talk op-msg' data-timestamp='1445301360' id='430121'>
<a class='timestamp' href='#430121'><time timestamp='2015-10-20T00:36:00Z'>00:36</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
I&#x27;m not surprised that a wallet with dice addresses overflows it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445301420' id='430122'>
<a class='timestamp' href='#430122'><time timestamp='2015-10-20T00:37:00Z'>00:37</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Luke-Jr: did you try turning down caching? ... we&#x27;re already pretty close to the wire address space wise on 4gb to begin with.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445301480' id='430123'>
<a class='timestamp' href='#430123'><time timestamp='2015-10-20T00:38:00Z'>00:38</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
I didn&#x27;t. But IIRC dice uses &gt;4 GB of transactions in the blockchain, so really I don&#x27;t expect anything to help except remaking the wallet with a lower volume address
<br>
</div>

<div class='talk op-msg' data-timestamp='1445316960' id='430124'>
<a class='timestamp' href='#430124'><time timestamp='2015-10-20T04:56:00Z'>04:56</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
ok, so I did the memory comparison on Eligius&#x27;s mining key
<br>
</div>

<div class='talk op-msg' data-timestamp='1445316960' id='430125'>
<a class='timestamp' href='#430125'><time timestamp='2015-10-20T04:56:00Z'>04:56</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
= 10184 wtxns
<br>
</div>

<div class='talk op-msg' data-timestamp='1445317020' id='430126'>
<a class='timestamp' href='#430126'><time timestamp='2015-10-20T04:57:00Z'>04:57</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
ps showed lower memory usage (in all three of SIZE, VSZ, and SZ) for the optimised/cached bitcoind. Obviously it couldn&#x27;t have been actually reduced, so I conclude it&#x27;s unmeasurably small.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445317800' id='430127'>
<a class='timestamp' href='#430127'><time timestamp='2015-10-20T05:10:00Z'>05:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
10000 isn&#x27;t that many. :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1445317920' id='430128'>
<a class='timestamp' href='#430128'><time timestamp='2015-10-20T05:12:00Z'>05:12</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
gmaxwell: not enough to at least show a measurable difference if it were a problematic increase?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445317920' id='430129'>
<a class='timestamp' href='#430129'><time timestamp='2015-10-20T05:12:00Z'>05:12</time></a>
&lt;<span class='nick nick-4'> * Luke-Jr</span>&gt;
ponders how he has no block sources with 10 connections :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1445318040' id='430130'>
<a class='timestamp' href='#430130'><time timestamp='2015-10-20T05:14:00Z'>05:14</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
cute, my next block is inflight from an XT node which is apparently not sending it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445322420' id='430131'>
<a class='timestamp' href='#430131'><time timestamp='2015-10-20T06:27:00Z'>06:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
curious
<br>
</div>

<div class='talk op-msg' data-timestamp='1445323680' id='430132'>
<a class='timestamp' href='#430132'><time timestamp='2015-10-20T06:48:00Z'>06:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
how openbsd, even with the recent release, still manages to package a BDB that is <b>*older*</b> than the 4.8 required to build bitcoin core
<br>
</div>

<div class='talk op-msg' data-timestamp='1445324100' id='430133'>
<a class='timestamp' href='#430133'><time timestamp='2015-10-20T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
lol
<br>
</div>

<div class='talk op-msg' data-timestamp='1445324160' id='430134'>
<a class='timestamp' href='#430134'><time timestamp='2015-10-20T06:56:00Z'>06:56</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
netcraft confirms it..?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445324340' id='430135'>
<a class='timestamp' href='#430135'><time timestamp='2015-10-20T06:59:00Z'>06:59</time></a>
&lt;<span class='nick nick-4'> * Luke-Jr</span>&gt;
ponders if it would be difficult to gitian-build bitcoind for Android &lt;.&lt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1445324520' id='430136'>
<a class='timestamp' href='#430136'><time timestamp='2015-10-20T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
not difficult, probably, a matter of pointing the depends at the NDK toolchain, then the type of slog work that cross-building usually is
<br>
</div>

<div class='talk op-msg' data-timestamp='1445324520' id='430137'>
<a class='timestamp' href='#430137'><time timestamp='2015-10-20T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I vaguely remember cfields_ has done it at some point
<br>
</div>

<div class='talk op-msg' data-timestamp='1445324580' id='430138'>
<a class='timestamp' href='#430138'><time timestamp='2015-10-20T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
midnightmagic: netcraft?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445324760' id='430139'>
<a class='timestamp' href='#430139'><time timestamp='2015-10-20T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
wumpus: Ancient meme. BSD is dying, netcraft confirms it. Used to be the repeated mantra on Slashdot, turn of the century.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445324820' id='430140'>
<a class='timestamp' href='#430140'><time timestamp='2015-10-20T07:07:00Z'>07:07</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
<a href="http://bsd.slashdot.org/comments.pl?sid=228247&amp;cid=18495137" class="link" target="_blank">http://bsd.slashdot.org/comments.pl?sid=228247&amp;cid=18495137</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445324940' id='430141'>
<a class='timestamp' href='#430141'><time timestamp='2015-10-20T07:09:00Z'>07:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
midnightmagic: oh, okay :-) BSD&#x27;s &#x27;linux desktop&#x27; meme
<br>
</div>

<div class='talk op-msg' data-timestamp='1445325060' id='430142'>
<a class='timestamp' href='#430142'><time timestamp='2015-10-20T07:11:00Z'>07:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but it&#x27;s refreshing for a change compared to the people that complain that 4.8 is too old
<br>
</div>

<div class='talk op-msg' data-timestamp='1445326380' id='430143'>
<a class='timestamp' href='#430143'><time timestamp='2015-10-20T07:33:00Z'>07:33</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
good god, I&#x27;m so old, smart people don&#x27;t know what I&#x27;m muttering anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1445326500' id='430144'>
<a class='timestamp' href='#430144'><time timestamp='2015-10-20T07:35:00Z'>07:35</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
heh I know the feeling
<br>
</div>

<div class='talk op-msg' data-timestamp='1445331600' id='430145'>
<a class='timestamp' href='#430145'><time timestamp='2015-10-20T09:00:00Z'>09:00</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
Mempool PR <a href="https://github.com/bitcoin/bitcoin/pull/6722" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6722</a> is looking good. lots of ACKs now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445334540' id='430146'>
<a class='timestamp' href='#430146'><time timestamp='2015-10-20T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-1'> GitHub6</span>&gt;
[bitcoin] laanwj opened pull request #6859: http: Restrict maximum size of http + headers (master...2015_10_max_http_headers) <a href="https://github.com/bitcoin/bitcoin/pull/6859" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6859</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445335620' id='430147'>
<a class='timestamp' href='#430147'><time timestamp='2015-10-20T10:07:00Z'>10:07</time></a>
&lt;<span class='nick nick-11'> GitHub168</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/da7d57fb9501...488f8517a154" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/da7d57fb9501...488f8517a154</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445335620' id='430148'>
<a class='timestamp' href='#430148'><time timestamp='2015-10-20T10:07:00Z'>10:07</time></a>
&lt;<span class='nick nick-11'> GitHub168</span>&gt;
bitcoin/master 53b86d0 Daniel Kraft: doc: add comment explaining initial header request...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445335620' id='430149'>
<a class='timestamp' href='#430149'><time timestamp='2015-10-20T10:07:00Z'>10:07</time></a>
&lt;<span class='nick nick-11'> GitHub168</span>&gt;
bitcoin/master 488f851 Wladimir J. van der Laan: Merge pull request #6829...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445335620' id='430150'>
<a class='timestamp' href='#430150'><time timestamp='2015-10-20T10:07:00Z'>10:07</time></a>
&lt;<span class='nick nick-15'> GitHub46</span>&gt;
[bitcoin] laanwj closed pull request #6829: doc: add comment explaining initial header request (master...doc-getheaders) <a href="https://github.com/bitcoin/bitcoin/pull/6829" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6829</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445335680' id='430151'>
<a class='timestamp' href='#430151'><time timestamp='2015-10-20T10:08:00Z'>10:08</time></a>
&lt;<span class='nick nick-6'> GitHub62</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/488f8517a154...c834f568693b" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/488f8517a154...c834f568693b</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445335680' id='430152'>
<a class='timestamp' href='#430152'><time timestamp='2015-10-20T10:08:00Z'>10:08</time></a>
&lt;<span class='nick nick-6'> GitHub62</span>&gt;
bitcoin/master 7801f43 Eric Lombrozo: Added fPowNoRetargeting field to Consensus::Params that disables nBits recalculation.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445335680' id='430153'>
<a class='timestamp' href='#430153'><time timestamp='2015-10-20T10:08:00Z'>10:08</time></a>
&lt;<span class='nick nick-6'> GitHub62</span>&gt;
bitcoin/master c834f56 Wladimir J. van der Laan: Merge pull request #6853...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445335680' id='430154'>
<a class='timestamp' href='#430154'><time timestamp='2015-10-20T10:08:00Z'>10:08</time></a>
&lt;<span class='nick nick-8'> GitHub42</span>&gt;
[bitcoin] laanwj closed pull request #6853: Added fPowNoRetargeting field to Consensus::Params (master...fNoRetargeting) <a href="https://github.com/bitcoin/bitcoin/pull/6853" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6853</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445336460' id='430155'>
<a class='timestamp' href='#430155'><time timestamp='2015-10-20T10:21:00Z'>10:21</time></a>
&lt;<span class='nick nick-6'> GitHub88</span>&gt;
[bitcoin] laanwj pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/c834f568693b...87e5539e9c50" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/c834f568693b...87e5539e9c50</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445336460' id='430156'>
<a class='timestamp' href='#430156'><time timestamp='2015-10-20T10:21:00Z'>10:21</time></a>
&lt;<span class='nick nick-6'> GitHub88</span>&gt;
bitcoin/master 0d8b175 MarcoFalke: [rpc-tests] fundrawtransaction: Update fee after minRelayTxFee increase
<br>
</div>

<div class='talk op-msg' data-timestamp='1445336460' id='430157'>
<a class='timestamp' href='#430157'><time timestamp='2015-10-20T10:21:00Z'>10:21</time></a>
&lt;<span class='nick nick-6'> GitHub88</span>&gt;
bitcoin/master bd4c22e MarcoFalke: [rpc-tests] Check return code
<br>
</div>

<div class='talk op-msg' data-timestamp='1445336460' id='430158'>
<a class='timestamp' href='#430158'><time timestamp='2015-10-20T10:21:00Z'>10:21</time></a>
&lt;<span class='nick nick-6'> GitHub88</span>&gt;
bitcoin/master 87e5539 Wladimir J. van der Laan: Merge pull request #6827...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445336520' id='430159'>
<a class='timestamp' href='#430159'><time timestamp='2015-10-20T10:22:00Z'>10:22</time></a>
&lt;<span class='nick nick-2'> GitHub132</span>&gt;
[bitcoin] laanwj closed pull request #6828: [rpc-tests] fundrawtransaction: Update fee after minRelayTxFee increase (master...MarcoFalke-2015-fundrawtransactionTestFix) <a href="https://github.com/bitcoin/bitcoin/pull/6828" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6828</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445336520' id='430160'>
<a class='timestamp' href='#430160'><time timestamp='2015-10-20T10:22:00Z'>10:22</time></a>
&lt;<span class='nick nick-13'> GitHub93</span>&gt;
[bitcoin] laanwj closed pull request #6827: [rpc-tests] Check return code (master...MarcoFalke-2015-rpcTestsReturnCode) <a href="https://github.com/bitcoin/bitcoin/pull/6827" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6827</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445337360' id='430161'>
<a class='timestamp' href='#430161'><time timestamp='2015-10-20T10:36:00Z'>10:36</time></a>
&lt;<span class='nick nick-8'> GitHub8</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/87e5539e9c50...ae69a75c554f" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/87e5539e9c50...ae69a75c554f</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445337360' id='430162'>
<a class='timestamp' href='#430162'><time timestamp='2015-10-20T10:36:00Z'>10:36</time></a>
&lt;<span class='nick nick-8'> GitHub8</span>&gt;
bitcoin/master e76d9e4 fanquake: [depends] Latest config.guess and config.sub
<br>
</div>

<div class='talk op-msg' data-timestamp='1445337360' id='430163'>
<a class='timestamp' href='#430163'><time timestamp='2015-10-20T10:36:00Z'>10:36</time></a>
&lt;<span class='nick nick-8'> GitHub8</span>&gt;
bitcoin/master ae69a75 Wladimir J. van der Laan: Merge pull request #6801...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445337360' id='430164'>
<a class='timestamp' href='#430164'><time timestamp='2015-10-20T10:36:00Z'>10:36</time></a>
&lt;<span class='nick nick-1'> GitHub91</span>&gt;
[bitcoin] laanwj closed pull request #6801: [depends] Latest config.guess and config.sub (master...update-config-guess-sub) <a href="https://github.com/bitcoin/bitcoin/pull/6801" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6801</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445338440' id='430165'>
<a class='timestamp' href='#430165'><time timestamp='2015-10-20T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-15'> GitHub27</span>&gt;
[bitcoin] laanwj pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/ae69a75c554f...020c4073a03a" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/ae69a75c554f...020c4073a03a</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445338440' id='430166'>
<a class='timestamp' href='#430166'><time timestamp='2015-10-20T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-15'> GitHub27</span>&gt;
bitcoin/master b6d5e32 Alex Morcos: Make fee aware of min relay in pruning.py RPC test
<br>
</div>

<div class='talk op-msg' data-timestamp='1445338440' id='430167'>
<a class='timestamp' href='#430167'><time timestamp='2015-10-20T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-15'> GitHub27</span>&gt;
bitcoin/master 020c407 Wladimir J. van der Laan: Merge pull request #6841...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445338440' id='430168'>
<a class='timestamp' href='#430168'><time timestamp='2015-10-20T10:54:00Z'>10:54</time></a>
&lt;<span class='nick nick-14'> GitHub193</span>&gt;
[bitcoin] laanwj closed pull request #6841: Increase fee in pruning.py RPC test (master...fixPruningRPC) <a href="https://github.com/bitcoin/bitcoin/pull/6841" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6841</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445340960' id='430169'>
<a class='timestamp' href='#430169'><time timestamp='2015-10-20T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-2'> GitHub43</span>&gt;
[bitcoin] laanwj pushed 1 new commit to 0.11: <a href="https://github.com/bitcoin/bitcoin/commit/072032448be5263f58cbd6b47f61edc7bb8210e1" class="link" target="_blank">https://github.com/bitcoin/bitcoin/commit/072032448be5263f58cbd6b47f61edc7bb8210e1</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445340960' id='430170'>
<a class='timestamp' href='#430170'><time timestamp='2015-10-20T11:36:00Z'>11:36</time></a>
&lt;<span class='nick nick-2'> GitHub43</span>&gt;
bitcoin/0.11 0720324 Alex Morcos: Make fee aware of min relay in pruning.py RPC test...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445341800' id='430171'>
<a class='timestamp' href='#430171'><time timestamp='2015-10-20T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-7'> GitHub65</span>&gt;
[bitcoin] MarcoFalke opened pull request #6860: Drop minRelayTxFee to 1000 (master...MarcoFalke-2015-minRelayTxFeeDrop) <a href="https://github.com/bitcoin/bitcoin/pull/6860" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6860</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445343900' id='430172'>
<a class='timestamp' href='#430172'><time timestamp='2015-10-20T12:25:00Z'>12:25</time></a>
&lt;<span class='nick nick-8'> GitHub23</span>&gt;
[bitcoin] laanwj closed pull request #6860: Drop minRelayTxFee to 1000 (master...MarcoFalke-2015-minRelayTxFeeDrop) <a href="https://github.com/bitcoin/bitcoin/pull/6860" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6860</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445345880' id='430173'>
<a class='timestamp' href='#430173'><time timestamp='2015-10-20T12:58:00Z'>12:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jgarzik: you can&#x27;t be SERIOUS that truncating a 64 bit number to a 32 bit number was a good idea!??!  <a href="https://github.com/bitcoin/bitcoin/issues/6765#event-440267158" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/6765#event-440267158</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445345940' id='430174'>
<a class='timestamp' href='#430174'><time timestamp='2015-10-20T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
wumpus, You are confusing an issue with a PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1445345940' id='430175'>
<a class='timestamp' href='#430175'><time timestamp='2015-10-20T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
this is completely crazy
<br>
</div>

<div class='talk op-msg' data-timestamp='1445345940' id='430176'>
<a class='timestamp' href='#430176'><time timestamp='2015-10-20T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
wumpus, calm down please.  The issue is univalve conversion cause unintended behavior changes that are as yet not documented or audited
<br>
</div>

<div class='talk op-msg' data-timestamp='1445345940' id='430177'>
<a class='timestamp' href='#430177'><time timestamp='2015-10-20T12:59:00Z'>12:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it is simply not a bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346000' id='430178'>
<a class='timestamp' href='#430178'><time timestamp='2015-10-20T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
wumpus, objecting to a solution that was not proposed as a PR is fine
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346000' id='430179'>
<a class='timestamp' href='#430179'><time timestamp='2015-10-20T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
EWONTFIX
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346000' id='430180'>
<a class='timestamp' href='#430180'><time timestamp='2015-10-20T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
wumpus, it is a user noticeable behavior change that potentially breaks people in the field
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346000' id='430181'>
<a class='timestamp' href='#430181'><time timestamp='2015-10-20T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
wumpus, who knows what else breakage was caused, until analysis is complete
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346000' id='430182'>
<a class='timestamp' href='#430182'><time timestamp='2015-10-20T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if you want to change documentation, be my guest, I don&#x27;t think there is any documentation that says yo ucan provide numbers there that exceed 32 bit numeric range
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346000' id='430183'>
<a class='timestamp' href='#430183'><time timestamp='2015-10-20T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well at most you&#x27;ll get an error now
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346000' id='430184'>
<a class='timestamp' href='#430184'><time timestamp='2015-10-20T13:00:00Z'>13:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
instead of dumbly ANDing off the upper bits
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346060' id='430185'>
<a class='timestamp' href='#430185'><time timestamp='2015-10-20T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
which can cause much worse problems, ask the openssl devs
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346060' id='430186'>
<a class='timestamp' href='#430186'><time timestamp='2015-10-20T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
wumpus, not disagreeing, please read what I wrote
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346060' id='430187'>
<a class='timestamp' href='#430187'><time timestamp='2015-10-20T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
wumpus, user breakage - breakage was noticed - let&#x27;s be methodical
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346060' id='430188'>
<a class='timestamp' href='#430188'><time timestamp='2015-10-20T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well, do you intend on doing analysys thee?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346060' id='430189'>
<a class='timestamp' href='#430189'><time timestamp='2015-10-20T13:01:00Z'>13:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if not, I want to close the issue and move on
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346120' id='430190'>
<a class='timestamp' href='#430190'><time timestamp='2015-10-20T13:02:00Z'>13:02</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
wumpus, yes the issue should stay open until this is analyzed
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346120' id='430191'>
<a class='timestamp' href='#430191'><time timestamp='2015-10-20T13:02:00Z'>13:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I disagree that it is so important
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346120' id='430192'>
<a class='timestamp' href='#430192'><time timestamp='2015-10-20T13:02:00Z'>13:02</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
wumpus, without analysis it is provably impossible to say what is the impact
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346120' id='430193'>
<a class='timestamp' href='#430193'><time timestamp='2015-10-20T13:02:00Z'>13:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but anyhow, if you look into this this week, I&#x27;m fine with keeping it open
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346240' id='430194'>
<a class='timestamp' href='#430194'><time timestamp='2015-10-20T13:04:00Z'>13:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I don&#x27;t think you&#x27;ll find anyone that thinks the new behavior doesn&#x27;t make sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346300' id='430195'>
<a class='timestamp' href='#430195'><time timestamp='2015-10-20T13:05:00Z'>13:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I can ask a few people if you think jonasschnelli, dcousens and mine opinion isn&#x27;t enough
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346360' id='430196'>
<a class='timestamp' href='#430196'><time timestamp='2015-10-20T13:06:00Z'>13:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
arguably if you were using large values in the field it was already broken. You <b>*thought*</b> you were parsing a large value, but you could have been passing a negative value for all you know
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346360' id='430197'>
<a class='timestamp' href='#430197'><time timestamp='2015-10-20T13:06:00Z'>13:06</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
i think the out of range exception behavior is okay and expected
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346480' id='430198'>
<a class='timestamp' href='#430198'><time timestamp='2015-10-20T13:08:00Z'>13:08</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But we need to write some univalue release notes anyways and could mention this there
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346540' id='430199'>
<a class='timestamp' href='#430199'><time timestamp='2015-10-20T13:09:00Z'>13:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
1000000000000 turns into -727379968, for example
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346600' id='430200'>
<a class='timestamp' href='#430200'><time timestamp='2015-10-20T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
wumpus, Please consider the wider picture.  You are focusing on one impacted callsite - and I consistently agree with you that the new behavior at that callsite is better - the issue is that that is not the only .get_int() in the entire codebase.  There may be other user visible breakage where the impact is not so fortunate.  Do not blindly assume.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346600' id='430201'>
<a class='timestamp' href='#430201'><time timestamp='2015-10-20T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
on other  callsites the breakage would be exactly the same
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346600' id='430202'>
<a class='timestamp' href='#430202'><time timestamp='2015-10-20T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
you hope and assume...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346600' id='430203'>
<a class='timestamp' href='#430203'><time timestamp='2015-10-20T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
not, I&#x27;m sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346600' id='430204'>
<a class='timestamp' href='#430204'><time timestamp='2015-10-20T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
get_int() simply does a range check now
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346600' id='430205'>
<a class='timestamp' href='#430205'><time timestamp='2015-10-20T13:10:00Z'>13:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that is safer
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346660' id='430206'>
<a class='timestamp' href='#430206'><time timestamp='2015-10-20T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if you  have one example where this causes dangerous behavior, just say so
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346660' id='430207'>
<a class='timestamp' href='#430207'><time timestamp='2015-10-20T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if not, please stop this nonsense
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346660' id='430208'>
<a class='timestamp' href='#430208'><time timestamp='2015-10-20T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
release notes -&gt; mention integers will now face a range check -&gt;  done?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346660' id='430209'>
<a class='timestamp' href='#430209'><time timestamp='2015-10-20T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
the new behavior is throwing an exception versus returning a range bound value without an exception
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346660' id='430210'>
<a class='timestamp' href='#430210'><time timestamp='2015-10-20T13:11:00Z'>13:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the old behavior was dangerous, not the newo ne
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346720' id='430211'>
<a class='timestamp' href='#430211'><time timestamp='2015-10-20T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
throwing an exception causes different error return messages and different downstream behaviors
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346720' id='430212'>
<a class='timestamp' href='#430212'><time timestamp='2015-10-20T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
which in turn cause user visible interface changes
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346720' id='430213'>
<a class='timestamp' href='#430213'><time timestamp='2015-10-20T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
jgarzik: i agree: it&#x27;s and API change. But in my opinion one that is worth to take.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346720' id='430214'>
<a class='timestamp' href='#430214'><time timestamp='2015-10-20T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but ony if the input <b>*was already invalid*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346720' id='430215'>
<a class='timestamp' href='#430215'><time timestamp='2015-10-20T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
jonasschnelli, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346720' id='430216'>
<a class='timestamp' href='#430216'><time timestamp='2015-10-20T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
jonasschnelli, and my point has always been it needs to be analyzed and documented
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346720' id='430217'>
<a class='timestamp' href='#430217'><time timestamp='2015-10-20T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
at least now you are told that the input is invalid, instead of replacing it with an effectively random number
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346780' id='430218'>
<a class='timestamp' href='#430218'><time timestamp='2015-10-20T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
not simply make the assumption it is OK
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346780' id='430219'>
<a class='timestamp' href='#430219'><time timestamp='2015-10-20T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
that is extremely poor software engineering - hope and pray
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346780' id='430220'>
<a class='timestamp' href='#430220'><time timestamp='2015-10-20T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well then do something better
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346780' id='430221'>
<a class='timestamp' href='#430221'><time timestamp='2015-10-20T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
keeping an issue open until it is analyzed fully is not a huge burden
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346780' id='430222'>
<a class='timestamp' href='#430222'><time timestamp='2015-10-20T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
opening lots of issues that no one ever looks at is just doesn&#x27;t cut it either
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346840' id='430223'>
<a class='timestamp' href='#430223'><time timestamp='2015-10-20T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it is a burdern, though
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346840' id='430224'>
<a class='timestamp' href='#430224'><time timestamp='2015-10-20T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Mention it in the release notes is okay, but not mandatory IMO. If a API consumer was relying range bound value he needs to be slapped anyways. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346840' id='430225'>
<a class='timestamp' href='#430225'><time timestamp='2015-10-20T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
don&#x27;t make mountains out of molehills.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346840' id='430226'>
<a class='timestamp' href='#430226'><time timestamp='2015-10-20T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well possibly they didn&#x27;t even know the range was not 64 bits. This bug could even be exploitable in some cases
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346840' id='430227'>
<a class='timestamp' href='#430227'><time timestamp='2015-10-20T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
at least now they aretold
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346900' id='430228'>
<a class='timestamp' href='#430228'><time timestamp='2015-10-20T13:15:00Z'>13:15</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
the issue is assigned to me now.  please stop hyperventilating over a minor issue.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445346900' id='430229'>
<a class='timestamp' href='#430229'><time timestamp='2015-10-20T13:15:00Z'>13:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there could be cases where <b>*application side*</b> range checks can be bypassed by providing large numbers, unaware that bitcoind cuts them off
<br>
</div>

<div class='talk op-msg' data-timestamp='1445349480' id='430230'>
<a class='timestamp' href='#430230'><time timestamp='2015-10-20T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-4'> GitHub186</span>&gt;
[bitcoin] laanwj closed pull request #6855: [REST] API versioning (master...restVersioning) <a href="https://github.com/bitcoin/bitcoin/pull/6855" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6855</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445350800' id='430231'>
<a class='timestamp' href='#430231'><time timestamp='2015-10-20T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
wumpus: I&#x27;m a bit out of my depth in the memory &quot;leak&quot; related to getblocktemplate,  but i have an idea on the cause
<br>
</div>

<div class='talk op-msg' data-timestamp='1445350800' id='430232'>
<a class='timestamp' href='#430232'><time timestamp='2015-10-20T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
in CreateNewBlock, we have a vecPriority that is approximately equal to the size of the mempool.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445350860' id='430233'>
<a class='timestamp' href='#430233'><time timestamp='2015-10-20T14:21:00Z'>14:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
the first time you call getblocktemplate your resident usage jumps by the size of your mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1445350860' id='430234'>
<a class='timestamp' href='#430234'><time timestamp='2015-10-20T14:21:00Z'>14:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
repeated calls to getblocktemplate will continue to cause that to happen, up to the number of rpc threads you are running
<br>
</div>

<div class='talk op-msg' data-timestamp='1445350920' id='430235'>
<a class='timestamp' href='#430235'><time timestamp='2015-10-20T14:22:00Z'>14:22</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
this is still mostly guesswork at this point, but its not clear to me why that memory used by vecPriority appears to be sticking around (a copy per thread)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351400' id='430236'>
<a class='timestamp' href='#430236'><time timestamp='2015-10-20T14:30:00Z'>14:30</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
morcos: strange; I don&#x27;t think we use any thread-local storage at all
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351460' id='430237'>
<a class='timestamp' href='#430237'><time timestamp='2015-10-20T14:31:00Z'>14:31</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
well, like i said, still guess work, could be wrong.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351460' id='430238'>
<a class='timestamp' href='#430238'><time timestamp='2015-10-20T14:31:00Z'>14:31</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but vecPriority is a local variable, so that would be thread-local storage right, it just should go away when the function exits
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351520' id='430239'>
<a class='timestamp' href='#430239'><time timestamp='2015-10-20T14:32:00Z'>14:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but maybe its some stl &quot;optimization&quot; to keep it allocated or something
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351580' id='430240'>
<a class='timestamp' href='#430240'><time timestamp='2015-10-20T14:33:00Z'>14:33</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
In some thread systems (not sure about RPC threads), the threads do not die - they are recycled
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351640' id='430241'>
<a class='timestamp' href='#430241'><time timestamp='2015-10-20T14:34:00Z'>14:34</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
so a huge stack would remain
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351640' id='430242'>
<a class='timestamp' href='#430242'><time timestamp='2015-10-20T14:34:00Z'>14:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but vecPriority is local to the function CreateNewBlock
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351640' id='430243'>
<a class='timestamp' href='#430243'><time timestamp='2015-10-20T14:34:00Z'>14:34</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
indeed, that should go out of scope
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351700' id='430244'>
<a class='timestamp' href='#430244'><time timestamp='2015-10-20T14:35:00Z'>14:35</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
as should CCoinsViewCache
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351760' id='430245'>
<a class='timestamp' href='#430245'><time timestamp='2015-10-20T14:36:00Z'>14:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the threads certainly stay around
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351760' id='430246'>
<a class='timestamp' href='#430246'><time timestamp='2015-10-20T14:36:00Z'>14:36</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
also in terms of allocator behavior, large amounts of memory are not necessarily reclaimed at the process level.  In the C library (not sure about C++), lots of free(3) memory is recycled back into allocator, not returned to system via munmap(2)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351760' id='430247'>
<a class='timestamp' href='#430247'><time timestamp='2015-10-20T14:36:00Z'>14:36</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but the stack can&#x27;t grow that far, a vector is allocated on the heap not the stack
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351820' id='430248'>
<a class='timestamp' href='#430248'><time timestamp='2015-10-20T14:37:00Z'>14:37</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(also pthreads default stack size is 8mb per thread; hardly possible to cause so much &#x27;leaking&#x27; that way)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351820' id='430249'>
<a class='timestamp' href='#430249'><time timestamp='2015-10-20T14:37:00Z'>14:37</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
So even though the app has released memory to the allocator, the allocator will not necessarily release memory to the system, as shown in top(1)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351880' id='430250'>
<a class='timestamp' href='#430250'><time timestamp='2015-10-20T14:38:00Z'>14:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right, freed memory is not returned to the system immediately
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351880' id='430251'>
<a class='timestamp' href='#430251'><time timestamp='2015-10-20T14:38:00Z'>14:38</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sometimes never, depending on the size of the allocation
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351880' id='430252'>
<a class='timestamp' href='#430252'><time timestamp='2015-10-20T14:38:00Z'>14:38</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
Process virtual memory size therefore just sits at its maximum, even if unused by app
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351880' id='430253'>
<a class='timestamp' href='#430253'><time timestamp='2015-10-20T14:38:00Z'>14:38</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
*sometimes
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351940' id='430254'>
<a class='timestamp' href='#430254'><time timestamp='2015-10-20T14:39:00Z'>14:39</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
(recent libraries do release memory if chunks are large enough)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351940' id='430255'>
<a class='timestamp' href='#430255'><time timestamp='2015-10-20T14:39:00Z'>14:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(but it&#x27;s reused if the application allocates again, so it should not result in growing process size over time in itself)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351940' id='430256'>
<a class='timestamp' href='#430256'><time timestamp='2015-10-20T14:39:00Z'>14:39</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
we&#x27;re talking about resident memory, not virtual memory, but you&#x27;re saying it could still reflect there
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351940' id='430257'>
<a class='timestamp' href='#430257'><time timestamp='2015-10-20T14:39:00Z'>14:39</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
nod
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351940' id='430258'>
<a class='timestamp' href='#430258'><time timestamp='2015-10-20T14:39:00Z'>14:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
do multiple getblocktemplates run at the same time indifferent threads? that&#x27;d explain it 
<br>
</div>

<div class='talk op-msg' data-timestamp='1445351940' id='430259'>
<a class='timestamp' href='#430259'><time timestamp='2015-10-20T14:39:00Z'>14:39</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
wumpus: that&#x27;s why i put &quot;leak&quot; in quotes, it seems entirely possible to me that the memory usage is limited to an excess of #rpcthreads * maxseenmempoolsize
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352000' id='430260'>
<a class='timestamp' href='#430260'><time timestamp='2015-10-20T14:40:00Z'>14:40</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
per-thread heaps are certainly possible in C++
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352000' id='430261'>
<a class='timestamp' href='#430261'><time timestamp='2015-10-20T14:40:00Z'>14:40</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
does memory exceed RPC thread count
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352000' id='430262'>
<a class='timestamp' href='#430262'><time timestamp='2015-10-20T14:40:00Z'>14:40</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
wumpus: i was running them serially
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352000' id='430263'>
<a class='timestamp' href='#430263'><time timestamp='2015-10-20T14:40:00Z'>14:40</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
seems like the steady state could be reached once all RPC threads are &quot;huge&quot; :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352000' id='430264'>
<a class='timestamp' href='#430264'><time timestamp='2015-10-20T14:40:00Z'>14:40</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
morcos: ok 
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352060' id='430265'>
<a class='timestamp' href='#430265'><time timestamp='2015-10-20T14:41:00Z'>14:41</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah, so there might be a steady state, but the steady state is particularly inefficient if you have a lot of RPC threads
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352060' id='430266'>
<a class='timestamp' href='#430266'><time timestamp='2015-10-20T14:41:00Z'>14:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
 the behavior seems consistent with per-thread heap, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352060' id='430267'>
<a class='timestamp' href='#430267'><time timestamp='2015-10-20T14:41:00Z'>14:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
default rpcthreads is only 4, there shouldn&#x27;t usually be a reason to increase that
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352120' id='430268'>
<a class='timestamp' href='#430268'><time timestamp='2015-10-20T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(especially as everything holds the cs_main lock anyway, so there is only very little scope for paralellism)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352120' id='430269'>
<a class='timestamp' href='#430269'><time timestamp='2015-10-20T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yes but 4 * max_mempool_usage is a lot of extra memory right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352120' id='430270'>
<a class='timestamp' href='#430270'><time timestamp='2015-10-20T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
not if you have a studly machine
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352120' id='430271'>
<a class='timestamp' href='#430271'><time timestamp='2015-10-20T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-7'> * jgarzik</span>&gt;
runs
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352180' id='430272'>
<a class='timestamp' href='#430272'><time timestamp='2015-10-20T14:43:00Z'>14:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
would be interesting to use google heap profiler to see if the memory gets released in between the calls
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352180' id='430273'>
<a class='timestamp' href='#430273'><time timestamp='2015-10-20T14:43:00Z'>14:43</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if it doesn&#x27;t show up in there, it&#x27;s the matter of memory not being released to the OS
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352240' id='430274'>
<a class='timestamp' href='#430274'><time timestamp='2015-10-20T14:44:00Z'>14:44</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
Amusingly I bet you could actually go faster with fork(2) and a lockless COW mempool copy that disappears upon child exit(2).    (unrealistic due to portability... not a real proposal)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352300' id='430275'>
<a class='timestamp' href='#430275'><time timestamp='2015-10-20T14:45:00Z'>14:45</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
faster and less memory bloat :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352300' id='430276'>
<a class='timestamp' href='#430276'><time timestamp='2015-10-20T14:45:00Z'>14:45</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(using heap profiler is easy as   LD_PRELOAD=&quot;/.../libtcmalloc.so&quot;  src/bitcoind , see <a href="https://gperftools.googlecode.com/svn/trunk/doc/heapprofile.html" class="link" target="_blank">https://gperftools.googlecode.com/svn/trunk/doc/heapprofile.html</a>   It can also track mmaps but I had less success using it for that)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352360' id='430277'>
<a class='timestamp' href='#430277'><time timestamp='2015-10-20T14:46:00Z'>14:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well if that means forking a child for every http connection, I don&#x27;t think it&#x27;d be faster, but yeah you could use the processes a few times and then have them exit...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352540' id='430278'>
<a class='timestamp' href='#430278'><time timestamp='2015-10-20T14:49:00Z'>14:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;m fairly sure apache does as much
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352540' id='430279'>
<a class='timestamp' href='#430279'><time timestamp='2015-10-20T14:49:00Z'>14:49</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
nah just fork off for that one RPC call, and have the thread wait for results
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352600' id='430280'>
<a class='timestamp' href='#430280'><time timestamp='2015-10-20T14:50:00Z'>14:50</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
when you&#x27;re making a complete copy of the process you can do stuff like that :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352600' id='430281'>
<a class='timestamp' href='#430281'><time timestamp='2015-10-20T14:50:00Z'>14:50</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
but doesn&#x27;t work at all on Windows so...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352600' id='430282'>
<a class='timestamp' href='#430282'><time timestamp='2015-10-20T14:50:00Z'>14:50</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
on Windows, you have to fake it by executing your own .exe again
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352660' id='430283'>
<a class='timestamp' href='#430283'><time timestamp='2015-10-20T14:51:00Z'>14:51</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
And correct - Apache re-uses both processes and threads for a limited time, then closes then - for reasons precisely like the ones we are seeing
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352660' id='430284'>
<a class='timestamp' href='#430284'><time timestamp='2015-10-20T14:51:00Z'>14:51</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
limited recycle prevents memory from building up
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352660' id='430285'>
<a class='timestamp' href='#430285'><time timestamp='2015-10-20T14:51:00Z'>14:51</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
*closes them
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352780' id='430286'>
<a class='timestamp' href='#430286'><time timestamp='2015-10-20T14:53:00Z'>14:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
morcos: can you try export MALLOC_ARENA_MAX=1 , this is supposed to disable per-thread arenas for newer glibc
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352840' id='430287'>
<a class='timestamp' href='#430287'><time timestamp='2015-10-20T14:54:00Z'>14:54</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sure i will try
<br>
</div>

<div class='talk op-msg' data-timestamp='1445352840' id='430288'>
<a class='timestamp' href='#430288'><time timestamp='2015-10-20T14:54:00Z'>14:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(from  <a href="https://www.ibm.com/developerworks/community/blogs/kevgrig/entry/linux_glibc_2_10_rhel_6_malloc_may_show_excessive_virtual_memory_usage?lang=en" class="link" target="_blank">https://www.ibm.com/developerworks/community/blogs/kevgrig/entry/linux_glibc_2_10_rhel_6_malloc_may_show_excessive_virtual_memory_usage?lang=en</a>  they see similar excessive allocation behavior)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353020' id='430289'>
<a class='timestamp' href='#430289'><time timestamp='2015-10-20T14:57:00Z'>14:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
by default it creates an arena for every CPU core
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353260' id='430290'>
<a class='timestamp' href='#430290'><time timestamp='2015-10-20T15:01:00Z'>15:01</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
yep - that&#x27;s so thread local structures can run lock free simply by accessing arena_vector[my_cpu_core_number]
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353320' id='430291'>
<a class='timestamp' href='#430291'><time timestamp='2015-10-20T15:02:00Z'>15:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
from a performance point of view it makes a lot of sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353320' id='430292'>
<a class='timestamp' href='#430292'><time timestamp='2015-10-20T15:02:00Z'>15:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
at least when there is actual paralellism :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353440' id='430293'>
<a class='timestamp' href='#430293'><time timestamp='2015-10-20T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
The cs_main lock has amusing historical parallels.  both freebsd and linux kernels had a Big Kernel Lock - a single lock that nearly everything would grab - during the early days of their conversion to SMP/parallel kernels
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353440' id='430294'>
<a class='timestamp' href='#430294'><time timestamp='2015-10-20T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes and don&#x27;t forget python&#x27;s big lock :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353440' id='430295'>
<a class='timestamp' href='#430295'><time timestamp='2015-10-20T15:04:00Z'>15:04</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
that too
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353500' id='430296'>
<a class='timestamp' href='#430296'><time timestamp='2015-10-20T15:05:00Z'>15:05</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
python is so bad at threading you -have- to fork ;p
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353560' id='430297'>
<a class='timestamp' href='#430297'><time timestamp='2015-10-20T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but I hope bitcoin&#x27;s is more like the BSD/Linux kernel lock than the python one, at least the former got rid of it at some point
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353560' id='430298'>
<a class='timestamp' href='#430298'><time timestamp='2015-10-20T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-3'> GitHub73</span>&gt;
[bitcoin] laanwj pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/020c4073a03a...e26a3f6713f8" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/020c4073a03a...e26a3f6713f8</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353560' id='430299'>
<a class='timestamp' href='#430299'><time timestamp='2015-10-20T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-3'> GitHub73</span>&gt;
bitcoin/master f3525e2 Jorge TimÃ³n: Chainparams: Replace CBaseChainParams::Network enum with string constants (suggested by Wladimir)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353560' id='430300'>
<a class='timestamp' href='#430300'><time timestamp='2015-10-20T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-3'> GitHub73</span>&gt;
bitcoin/master 55a8975 Jorge TimÃ³n: Chainparams: Translations: DRY: options and error strings...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353560' id='430301'>
<a class='timestamp' href='#430301'><time timestamp='2015-10-20T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-3'> GitHub73</span>&gt;
bitcoin/master e26a3f6 Wladimir J. van der Laan: Merge pull request #6235...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353560' id='430302'>
<a class='timestamp' href='#430302'><time timestamp='2015-10-20T15:06:00Z'>15:06</time></a>
&lt;<span class='nick nick-14'> GitHub151</span>&gt;
[bitcoin] laanwj closed pull request #6235: Chainparams: Translations: DRY: options and error strings (master...chainparams-dry) <a href="https://github.com/bitcoin/bitcoin/pull/6235" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6235</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353620' id='430303'>
<a class='timestamp' href='#430303'><time timestamp='2015-10-20T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
with python it&#x27;s such an essential part of the design that it&#x27;s unrealistic to get rid of it. At least that was in the 2.x days, i don&#x27;t know about 3.x
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353740' id='430304'>
<a class='timestamp' href='#430304'><time timestamp='2015-10-20T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-5'> GitHub87</span>&gt;
[bitcoin] laanwj pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/e26a3f6713f8...c6de5cc88614" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/e26a3f6713f8...c6de5cc88614</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353740' id='430305'>
<a class='timestamp' href='#430305'><time timestamp='2015-10-20T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-5'> GitHub87</span>&gt;
bitcoin/master e253e83 Matt Corallo: Update debian/changelog and slight tweak to debian/control
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353740' id='430306'>
<a class='timestamp' href='#430306'><time timestamp='2015-10-20T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-5'> GitHub87</span>&gt;
bitcoin/master c7b36cc Matt Corallo: Change URLs to https in debian/control
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353740' id='430307'>
<a class='timestamp' href='#430307'><time timestamp='2015-10-20T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-5'> GitHub87</span>&gt;
bitcoin/master c6de5cc Wladimir J. van der Laan: Merge pull request #6796...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353740' id='430308'>
<a class='timestamp' href='#430308'><time timestamp='2015-10-20T15:09:00Z'>15:09</time></a>
&lt;<span class='nick nick-9'> GitHub160</span>&gt;
[bitcoin] laanwj closed pull request #6796: Update debian/changelog and slight tweak to debian/control (master...debian) <a href="https://github.com/bitcoin/bitcoin/pull/6796" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6796</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353800' id='430309'>
<a class='timestamp' href='#430309'><time timestamp='2015-10-20T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
yep
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353800' id='430310'>
<a class='timestamp' href='#430310'><time timestamp='2015-10-20T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
and we&#x27;re well on our way to peeling off the cs_main (bsd/linux road)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445353800' id='430311'>
<a class='timestamp' href='#430311'><time timestamp='2015-10-20T15:10:00Z'>15:10</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
imo
<br>
</div>

<div class='talk op-msg' data-timestamp='1445355060' id='430312'>
<a class='timestamp' href='#430312'><time timestamp='2015-10-20T15:31:00Z'>15:31</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
wumpus: sorry its taking me a while, i was trying to get a full mempool but not also spam the rest of the network...  i haven&#x27;t run the getblock templates yet, but it sure does make bitciond use a lot less memory in the first place (using MALLOC_ARENA_MAX=1)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445355120' id='430313'>
<a class='timestamp' href='#430313'><time timestamp='2015-10-20T15:32:00Z'>15:32</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
normally i&#x27;m using close to 1G shortly after starting, with this, it was about 250M
<br>
</div>

<div class='talk op-msg' data-timestamp='1445355960' id='430314'>
<a class='timestamp' href='#430314'><time timestamp='2015-10-20T15:46:00Z'>15:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
morcos: good to know! thanks for testing, I always had this issue where only very little memory usage would show up in the heap profiler, but top showed much more, now we understand why! 
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356080' id='430315'>
<a class='timestamp' href='#430315'><time timestamp='2015-10-20T15:48:00Z'>15:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
and the more cores, the more it will use
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356080' id='430316'>
<a class='timestamp' href='#430316'><time timestamp='2015-10-20T15:48:00Z'>15:48</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
should add that one to the use-less-memory tips
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356140' id='430317'>
<a class='timestamp' href='#430317'><time timestamp='2015-10-20T15:49:00Z'>15:49</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
wumpus: yep, after repeated calls to getblocktemplate, it only jumped in memory usage once
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356200' id='430318'>
<a class='timestamp' href='#430318'><time timestamp='2015-10-20T15:50:00Z'>15:50</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think concentrating on vecPriority was misguided (its not actually that big, just ptrs to txs) but between all the stuff thats stl-allocated in CNB, that probably explains the big jump.  i havent&#x27; gone through really to see if it adds up yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356200' id='430319'>
<a class='timestamp' href='#430319'><time timestamp='2015-10-20T15:50:00Z'>15:50</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
it does still seem like a big jump.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356200' id='430320'>
<a class='timestamp' href='#430320'><time timestamp='2015-10-20T15:50:00Z'>15:50</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
whether it happens 1x or #rpcthreads times
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356260' id='430321'>
<a class='timestamp' href='#430321'><time timestamp='2015-10-20T15:51:00Z'>15:51</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i suppose it might depend on how much the CCoinsViewCache allocates?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356320' id='430322'>
<a class='timestamp' href='#430322'><time timestamp='2015-10-20T15:52:00Z'>15:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that depends; they will cache everything that is queried through them
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356500' id='430323'>
<a class='timestamp' href='#430323'><time timestamp='2015-10-20T15:55:00Z'>15:55</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
wumpus, any remaining merge blockers for #6722 in your view?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356680' id='430324'>
<a class='timestamp' href='#430324'><time timestamp='2015-10-20T15:58:00Z'>15:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
+1 for merging it sooner rather than later. only reason not to merge i think is if we can coerce more people into review/test.  but beyond that, lets get it out into the wild to find more bugs.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356680' id='430325'>
<a class='timestamp' href='#430325'><time timestamp='2015-10-20T15:58:00Z'>15:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
however its worth considering merging the lower chain limits soon as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356680' id='430326'>
<a class='timestamp' href='#430326'><time timestamp='2015-10-20T15:58:00Z'>15:58</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
yeah this sort of stuff is perfect for master
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356800' id='430327'>
<a class='timestamp' href='#430327'><time timestamp='2015-10-20T16:00:00Z'>16:00</time></a>
&lt;<span class='nick nick-9'> GitHub85</span>&gt;
[bitcoin] jtimon reopened pull request #6625: BLOCKING: Consensus: Move blocksize and related parameters to consensusparams ...without removing consensus/consensus.h [#6526 alternative] (master...consensus-blocksize-0.12.99) <a href="https://github.com/bitcoin/bitcoin/pull/6625" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6625</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356860' id='430328'>
<a class='timestamp' href='#430328'><time timestamp='2015-10-20T16:01:00Z'>16:01</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
the Internet is always a better test lab than anything we cook up in private
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356860' id='430329'>
<a class='timestamp' href='#430329'><time timestamp='2015-10-20T16:01:00Z'>16:01</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
merge easy, revert easy
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356860' id='430330'>
<a class='timestamp' href='#430330'><time timestamp='2015-10-20T16:01:00Z'>16:01</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
I would have merged it myself if it were a normal change, given the ACK quotient, but for a change of this notability I want wumpus, gmaxwell, sipa etc. approval of some sort (sipa has already ACK&#x27;d FTR)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356980' id='430331'>
<a class='timestamp' href='#430331'><time timestamp='2015-10-20T16:03:00Z'>16:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
voila <a href="https://gist.github.com/laanwj/efe29c7661ce9b6620a7#linux-specific" class="link" target="_blank">https://gist.github.com/laanwj/efe29c7661ce9b6620a7#linux-specific</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356980' id='430332'>
<a class='timestamp' href='#430332'><time timestamp='2015-10-20T16:03:00Z'>16:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jgarzik: will  take a loook
<br>
</div>

<div class='talk op-msg' data-timestamp='1445356980' id='430333'>
<a class='timestamp' href='#430333'><time timestamp='2015-10-20T16:03:00Z'>16:03</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
I&#x27;ve been testing it as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357040' id='430334'>
<a class='timestamp' href='#430334'><time timestamp='2015-10-20T16:04:00Z'>16:04</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
wumpus, +1 gist
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357160' id='430335'>
<a class='timestamp' href='#430335'><time timestamp='2015-10-20T16:06:00Z'>16:06</time></a>
&lt;<span class='nick nick-14'> GitHub107</span>&gt;
[bitcoin] jtimon closed pull request #6672: Consensus: Separate most consensus functions to consensus.cpp (master...consensus-moveonly-0.12.99) <a href="https://github.com/bitcoin/bitcoin/pull/6672" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6672</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357400' id='430336'>
<a class='timestamp' href='#430336'><time timestamp='2015-10-20T16:10:00Z'>16:10</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
wumpus: do you think thats a sufficient &quot;fix&quot; for the memory usage.   
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357460' id='430337'>
<a class='timestamp' href='#430337'><time timestamp='2015-10-20T16:11:00Z'>16:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
still not clear exactly how much heap allocation is happening in getblocktemplate
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357460' id='430338'>
<a class='timestamp' href='#430338'><time timestamp='2015-10-20T16:11:00Z'>16:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but lets say for the sake of argument its on the order of your mempool usage size
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357460' id='430339'>
<a class='timestamp' href='#430339'><time timestamp='2015-10-20T16:11:00Z'>16:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
now you&#x27;re saying every node out there (that doesn&#x27;t run with your low mem tip) is going to use 5x maxmempoolsize
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357520' id='430340'>
<a class='timestamp' href='#430340'><time timestamp='2015-10-20T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
at least
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357520' id='430341'>
<a class='timestamp' href='#430341'><time timestamp='2015-10-20T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i guess only if they run getblocktemplate
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357580' id='430342'>
<a class='timestamp' href='#430342'><time timestamp='2015-10-20T16:13:00Z'>16:13</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but maybe we can do something to try to reduce that.  we know for instance that there is no need for this particular memory usage to worry about trying to allocate at the same time
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357580' id='430343'>
<a class='timestamp' href='#430343'><time timestamp='2015-10-20T16:13:00Z'>16:13</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if that was even a static variable that was just cleared between calls, it would persist the memory all the time, but only 1x right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357640' id='430344'>
<a class='timestamp' href='#430344'><time timestamp='2015-10-20T16:14:00Z'>16:14</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so maybe vecPriority and view and whatevers using memory in createnewblock
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357880' id='430345'>
<a class='timestamp' href='#430345'><time timestamp='2015-10-20T16:18:00Z'>16:18</time></a>
&lt;<span class='nick nick-11'> GitHub92</span>&gt;
[bitcoin] sdaftuar closed pull request #6557: Mempool limiting with descendant package tracking (master...mempool-packages) <a href="https://github.com/bitcoin/bitcoin/pull/6557" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/6557</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445357940' id='430346'>
<a class='timestamp' href='#430346'><time timestamp='2015-10-20T16:19:00Z'>16:19</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
memory usage I&#x27;m seeing is certantly beyond 5x.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445358000' id='430347'>
<a class='timestamp' href='#430347'><time timestamp='2015-10-20T16:20:00Z'>16:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
3.77GB res compared to   &quot;usage&quot;: 90103744
<br>
</div>

<div class='talk op-msg' data-timestamp='1445358540' id='430348'>
<a class='timestamp' href='#430348'><time timestamp='2015-10-20T16:29:00Z'>16:29</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: i think it turns out this arena per core thing will affect a lot of bitcoind mem usage...   also, i think its the max ever mempool usage that matters, not current
<br>
</div>

<div class='talk op-msg' data-timestamp='1445358660' id='430349'>
<a class='timestamp' href='#430349'><time timestamp='2015-10-20T16:31:00Z'>16:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
ah! reading more backscroll, so the idea is that the pre-thread (or whatever) arena is ending up allocating but not sbrking data in each thread (or core?) that runs a GBT and thus has a high peak usage because it&#x27;s copied the mempool?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445358780' id='430350'>
<a class='timestamp' href='#430350'><time timestamp='2015-10-20T16:33:00Z'>16:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Having control of stuff like this is why firefox uses jemalloc
<br>
</div>

<div class='talk op-msg' data-timestamp='1445359980' id='430351'>
<a class='timestamp' href='#430351'><time timestamp='2015-10-20T16:53:00Z'>16:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: yeah to the limit of my understanding.  except still not exactly clear what is taking up the memory, b/c the mempool isn&#x27;t copied.  but could be the CoinsViewCache.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445362140' id='430352'>
<a class='timestamp' href='#430352'><time timestamp='2015-10-20T17:29:00Z'>17:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
coinsviewcache has methods to measure the size
<br>
</div>

<div class='talk op-msg' data-timestamp='1445362680' id='430353'>
<a class='timestamp' href='#430353'><time timestamp='2015-10-20T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
so, reading the page about <a href="https://www.ibm.com/developerworks/community/blogs/kevgrig/entry/linux_glibc_2_10_rhel_6_malloc_may_show_excessive_virtual_memory_usage?lang=en" class="link" target="_blank">https://www.ibm.com/developerworks/community/blogs/kevgrig/entry/linux_glibc_2_10_rhel_6_malloc_may_show_excessive_virtual_memory_usage?lang=en</a> .. it looks like thats about about virtual usage, not RES.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445362740' id='430354'>
<a class='timestamp' href='#430354'><time timestamp='2015-10-20T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(not that it wouldn&#x27;t also be good to reduce virtual usage, at least on 32bit.. but I&#x27;m seeing about 4x resident than what I expect)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445363100' id='430355'>
<a class='timestamp' href='#430355'><time timestamp='2015-10-20T17:45:00Z'>17:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: yeah that confused me as well.  but from my very ad hoc testing it seemed to affect RES
<br>
</div>

<div class='talk op-msg' data-timestamp='1445363460' id='430356'>
<a class='timestamp' href='#430356'><time timestamp='2015-10-20T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
gmaxwell: well the memory is at least temporary resident when it is used
<br>
</div>

<div class='talk op-msg' data-timestamp='1445363580' id='430357'>
<a class='timestamp' href='#430357'><time timestamp='2015-10-20T17:53:00Z'>17:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s not just reserving an arena, it&#x27;s actually returning memory from it, to be used and later freed
<br>
</div>

<div class='talk op-msg' data-timestamp='1445363580' id='430358'>
<a class='timestamp' href='#430358'><time timestamp='2015-10-20T17:53:00Z'>17:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
after which it sticks around, no longer touched so it doesn&#x27;t have to stay resident, but that depends on mem pressure
<br>
</div>

<div class='talk op-msg' data-timestamp='1445363640' id='430359'>
<a class='timestamp' href='#430359'><time timestamp='2015-10-20T17:54:00Z'>17:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(also if you keep sending getblocktemplate it probably reuses them in more-or-less round-robin fashion)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445363760' id='430360'>
<a class='timestamp' href='#430360'><time timestamp='2015-10-20T17:56:00Z'>17:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh i bet that interacts super well with people who&#x27;ve cranked rpc threads to get around the issues with rpcblocking.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445364240' id='430361'>
<a class='timestamp' href='#430361'><time timestamp='2015-10-20T18:04:00Z'>18:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
nah the number of threads is not that relevant, just the number of cores
<br>
</div>

<div class='talk op-msg' data-timestamp='1445364300' id='430362'>
<a class='timestamp' href='#430362'><time timestamp='2015-10-20T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it tries to balance arenas over cores
<br>
</div>

<div class='talk op-msg' data-timestamp='1445364300' id='430363'>
<a class='timestamp' href='#430363'><time timestamp='2015-10-20T18:05:00Z'>18:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(which makes a lot of sense for performance, but in our case it&#x27;s not useful)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445364360' id='430364'>
<a class='timestamp' href='#430364'><time timestamp='2015-10-20T18:06:00Z'>18:06</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I wonder if its ever useful for large allocations. hm. then again the usage is probably made out of zillions of tiny allocations.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445364420' id='430365'>
<a class='timestamp' href='#430365'><time timestamp='2015-10-20T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
we had a workstation with a crazy NUMA motherboard at uni, where each processor had its own memory. I guess that&#x27;s the only case where it makes sense for large, infrequent allocations.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445364480' id='430366'>
<a class='timestamp' href='#430366'><time timestamp='2015-10-20T18:08:00Z'>18:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(but yes in bitcoin we use tons of small allocations)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445366580' id='430367'>
<a class='timestamp' href='#430367'><time timestamp='2015-10-20T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
wumpus: it seems test_bitcoin behavior has changed recently. not too long ago, if I ran src/test/test_bitcoin --run_tests=&lt;testname&gt; from the root project directory, it would only run that specific test - but now it seems to run all of them
<br>
</div>

<div class='talk op-msg' data-timestamp='1445366640' id='430368'>
<a class='timestamp' href='#430368'><time timestamp='2015-10-20T18:44:00Z'>18:44</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
am I tripping?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367120' id='430369'>
<a class='timestamp' href='#430369'><time timestamp='2015-10-20T18:52:00Z'>18:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
--run-tests= takes a test suite name, not an individual test name
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367180' id='430370'>
<a class='timestamp' href='#430370'><time timestamp='2015-10-20T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I mean singular
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367180' id='430371'>
<a class='timestamp' href='#430371'><time timestamp='2015-10-20T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
--run_test=
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367180' id='430372'>
<a class='timestamp' href='#430372'><time timestamp='2015-10-20T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if the test suite doesn&#x27;t exist, it somehow gets them all
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367180' id='430373'>
<a class='timestamp' href='#430373'><time timestamp='2015-10-20T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that&#x27;s not possible
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367180' id='430374'>
<a class='timestamp' href='#430374'><time timestamp='2015-10-20T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
let me verify what I&#x27;m saying to make sure it&#x27;s accurate...
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367180' id='430375'>
<a class='timestamp' href='#430375'><time timestamp='2015-10-20T18:53:00Z'>18:53</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes it&#x27;s singular run-test, but it takes a suite name
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367240' id='430376'>
<a class='timestamp' href='#430376'><time timestamp='2015-10-20T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
if the test suite doesn&#x27;t exist I get an error
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367240' id='430377'>
<a class='timestamp' href='#430377'><time timestamp='2015-10-20T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-3'> * wumpus</span>&gt;
test_bitcoin -l test_suite   will show exactly what test suites and tests it&#x27;s executing, and how long they take
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367300' id='430378'>
<a class='timestamp' href='#430378'><time timestamp='2015-10-20T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that behavior is part of boost test, so if it changed, you probably changed your boost version
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367360' id='430379'>
<a class='timestamp' href='#430379'><time timestamp='2015-10-20T18:56:00Z'>18:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
-run-tests= isn&#x27;t picked up at all here, -t is
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367420' id='430380'>
<a class='timestamp' href='#430380'><time timestamp='2015-10-20T18:57:00Z'>18:57</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
travis is apparently not liking alert_tests on windows <a href="https://travis-ci.org/bitcoin/bitcoin/jobs/86404141" class="link" target="_blank">https://travis-ci.org/bitcoin/bitcoin/jobs/86404141</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367480' id='430381'>
<a class='timestamp' href='#430381'><time timestamp='2015-10-20T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
seems to be passing fine here?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367480' id='430382'>
<a class='timestamp' href='#430382'><time timestamp='2015-10-20T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I don&#x27;t get that error at all - I didn&#x27;t touch alert_tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367480' id='430383'>
<a class='timestamp' href='#430383'><time timestamp='2015-10-20T18:58:00Z'>18:58</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I mean, I don&#x27;t understand that error
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367720' id='430384'>
<a class='timestamp' href='#430384'><time timestamp='2015-10-20T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
how can I try to reproduce that error locally?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367720' id='430385'>
<a class='timestamp' href='#430385'><time timestamp='2015-10-20T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I had a quite crazy test error in OpenBSD with Alert_tests today: <a href="http://s28.postimg.org/duxcxvrh9/Schermafdruk_van_2015_10_20_10_08_52.png" class="link" target="_blank">http://s28.postimg.org/duxcxvrh9/Schermafdruk_van_2015_10_20_10_08_52.png</a>  (no, probably not related, something is very wrong there)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367720' id='430386'>
<a class='timestamp' href='#430386'><time timestamp='2015-10-20T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
you can reproduce it in travis?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367780' id='430387'>
<a class='timestamp' href='#430387'><time timestamp='2015-10-20T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
I&#x27;m not very familiar with travis - can I get it to run the test again remotely?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367780' id='430388'>
<a class='timestamp' href='#430388'><time timestamp='2015-10-20T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
do I need to force push?
<br>
</div>

<div class='talk op-msg' data-timestamp='1445367780' id='430389'>
<a class='timestamp' href='#430389'><time timestamp='2015-10-20T19:03:00Z'>19:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I can do that, let me see
<br>
</div>

<div class='talk op-msg' data-timestamp='1445368080' id='430390'>
<a class='timestamp' href='#430390'><time timestamp='2015-10-20T19:08:00Z'>19:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
should be running again now
<br>
</div>

<div class='talk op-msg' data-timestamp='1445368320' id='430391'>
<a class='timestamp' href='#430391'><time timestamp='2015-10-20T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-9'> CodeShark</span>&gt;
thanks, wumpus - I tried doing a force push anyhow
<br>
</div>

<div class='talk op-msg' data-timestamp='1445368320' id='430392'>
<a class='timestamp' href='#430392'><time timestamp='2015-10-20T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh then we triggered it twice, that probably just slows it down
<br>
</div>

<div class='talk op-msg' data-timestamp='1445368440' id='430393'>
<a class='timestamp' href='#430393'><time timestamp='2015-10-20T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
RE malloc arenas,
<br>
</div>

<div class='talk op-msg' data-timestamp='1445368440' id='430394'>
<a class='timestamp' href='#430394'><time timestamp='2015-10-20T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
<a href="http://journal.siddhesh.in/posts/malloc-per-thread-arenas-in-glibc.html" class="link" target="_blank">http://journal.siddhesh.in/posts/malloc-per-thread-arenas-in-glibc.html</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1445368440' id='430395'>
<a class='timestamp' href='#430395'><time timestamp='2015-10-20T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
(apologies if dup; didn&#x27;t see it in scrollback)
<br>
</div>

<div class='talk op-msg' data-timestamp='1445368560' id='430396'>
<a class='timestamp' href='#430396'><time timestamp='2015-10-20T19:16:00Z'>19:16</time></a>
&lt;<span class='nick nick-7'> * jgarzik</span>&gt;
looks for some way to cap the number of arenas besides MALLOC_ARENA_MAX
<br>
</div>

<div class='talk op-msg' data-timestamp='1445369220' id='430397'>
<a class='timestamp' href='#430397'><time timestamp='2015-10-20T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
don&#x27;t think I saw that one yet
<br>
</div>

<div class='talk op-msg' data-timestamp='1445369280' id='430398'>
<a class='timestamp' href='#430398'><time timestamp='2015-10-20T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
heh, when I wanted to run a specific test, I edited the makefile to not include the rest &lt;.&lt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1445369340' id='430399'>
<a class='timestamp' href='#430399'><time timestamp='2015-10-20T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
&quot;Freed blocks near the end of heaps in an arena are given back to the system either by using madvise(MADV_DONTNEED) or by explicitly unmapping.&quot; that doesn&#x27;t seem to happen for us, probably due to heap fragmentation
<br>
</div>

<div class='talk op-msg' data-timestamp='1445370060' id='430400'>
<a class='timestamp' href='#430400'><time timestamp='2015-10-20T19:41:00Z'>19:41</time></a>
&lt;<span class='nick nick-5'> jgarzik</span>&gt;
nod - lots of little allocations will do that :/
<br>
</div>

<div class='talk op-msg' data-timestamp='1445371320' id='430401'>
<a class='timestamp' href='#430401'><time timestamp='2015-10-20T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Change to jemalloc which should also reduce fragmentation.
<br>
</div>

<div class='talk op-msg' data-timestamp='1445371320' id='430402'>
<a class='timestamp' href='#430402'><time timestamp='2015-10-20T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
:)
<br>
</div>

</div>
</section>

</body>
</html>
