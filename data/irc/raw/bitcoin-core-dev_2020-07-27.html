<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2020-07-27
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2020-07-27' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:18 UTC</pre>
<pre><a href="/bitcoin-core-dev/2020-06-27">&lt;</a><span class='header'>    July 2020     </span><a href="/bitcoin-core-dev/2020-08-27">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;          <a class="" href="/bitcoin-core-dev/2020-07-01">1</a>  2  3  4  &#x000A; <a class="" href="/bitcoin-core-dev/2020-07-05">5</a>  <a class="" href="/bitcoin-core-dev/2020-07-06">6</a>  <a class="" href="/bitcoin-core-dev/2020-07-07">7</a>  <a class="" href="/bitcoin-core-dev/2020-07-08">8</a>  <a class="" href="/bitcoin-core-dev/2020-07-09">9</a> <a class="" href="/bitcoin-core-dev/2020-07-10">10</a> <a class="" href="/bitcoin-core-dev/2020-07-11">11</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-07-12">12</a> <a class="" href="/bitcoin-core-dev/2020-07-13">13</a> <a class="" href="/bitcoin-core-dev/2020-07-14">14</a> <a class="" href="/bitcoin-core-dev/2020-07-15">15</a> <a class="" href="/bitcoin-core-dev/2020-07-16">16</a> <a class="" href="/bitcoin-core-dev/2020-07-17">17</a> <a class="" href="/bitcoin-core-dev/2020-07-18">18</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-07-19">19</a> <a class="" href="/bitcoin-core-dev/2020-07-20">20</a> <a class="" href="/bitcoin-core-dev/2020-07-21">21</a> <a class="" href="/bitcoin-core-dev/2020-07-22">22</a> <a class="" href="/bitcoin-core-dev/2020-07-23">23</a> <a class="" href="/bitcoin-core-dev/2020-07-24">24</a> <a class="" href="/bitcoin-core-dev/2020-07-25">25</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-07-26">26</a> <a class="current" href="/bitcoin-core-dev/2020-07-27">27</a> <a class="" href="/bitcoin-core-dev/2020-07-28">28</a> <a class="" href="/bitcoin-core-dev/2020-07-29">29</a> <a class="" href="/bitcoin-core-dev/2020-07-30">30</a> <a class="" href="/bitcoin-core-dev/2020-07-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1595819580' id='396579'>
<a class='timestamp' href='#396579'><time timestamp='2020-07-27T03:13:00Z'>03:13</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] freenancial closed pull request #19480: build: Only use `@` prefix for `echo` command in Makefiles (master...remove_at_sign_makefile) <a href="https://github.com/bitcoin/bitcoin/pull/19480" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19480</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595822460' id='396580'>
<a class='timestamp' href='#396580'><time timestamp='2020-07-27T04:01:00Z'>04:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sdaftuar opened pull request #19596: Deduplicate parent txid loop of requested transactions and missing parents of orphan transactions (master...2020-07-dedup-inputs) <a href="https://github.com/bitcoin/bitcoin/pull/19596" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19596</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835240' id='396581'>
<a class='timestamp' href='#396581'><time timestamp='2020-07-27T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
sipa: I need varint in order to be able to create and parse addrv2 messages: <a href="https://github.com/bitcoin/bips/blob/master/bip-0155.mediawiki" class="link" target="_blank">https://github.com/bitcoin/bips/blob/master/bip-0155.mediawiki</a> &quot;time&quot; and &quot;services&quot; use VARINT
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835420' id='396582'>
<a class='timestamp' href='#396582'><time timestamp='2020-07-27T07:37:00Z'>07:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
vasild: heh, that&#x27;s quite underspecified
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835420' id='396583'>
<a class='timestamp' href='#396583'><time timestamp='2020-07-27T07:37:00Z'>07:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
bitcoin core&#x27;s internal varint type isn&#x27;t used in the p2p protocol anywhere
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835420' id='396584'>
<a class='timestamp' href='#396584'><time timestamp='2020-07-27T07:37:00Z'>07:37</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
I implemented (de)ser_varint: <a href="https://bpa.st/HTBA" class="link" target="_blank">https://bpa.st/HTBA</a>, it will end up in some of the addrv2 PRs (still I am only playing with it locally)
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835480' id='396585'>
<a class='timestamp' href='#396585'><time timestamp='2020-07-27T07:38:00Z'>07:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
vasild: could it just mean compactsize ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835480' id='396586'>
<a class='timestamp' href='#396586'><time timestamp='2020-07-27T07:38:00Z'>07:38</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s the varint type that&#x27;s used elsewhere in the p2p protocol
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835480' id='396587'>
<a class='timestamp' href='#396587'><time timestamp='2020-07-27T07:38:00Z'>07:38</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
Isn&#x27;t used <u>_yet_</u> ;-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835540' id='396588'>
<a class='timestamp' href='#396588'><time timestamp='2020-07-27T07:39:00Z'>07:39</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
I agree it is underspecified other than &quot;see bitcoin core source code&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835540' id='396589'>
<a class='timestamp' href='#396589'><time timestamp='2020-07-27T07:39:00Z'>07:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t even see that?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835540' id='396590'>
<a class='timestamp' href='#396590'><time timestamp='2020-07-27T07:39:00Z'>07:39</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
no idea if it is supposed to mean compactsize, wumpus ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835660' id='396591'>
<a class='timestamp' href='#396591'><time timestamp='2020-07-27T07:41:00Z'>07:41</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
&quot;i don&#x27;t even see that?&quot; -- yes, not even &quot;see bitcoin core source code&quot;, but I think that would be undesirable because the code may change
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835720' id='396592'>
<a class='timestamp' href='#396592'><time timestamp='2020-07-27T07:42:00Z'>07:42</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
why are there two encodings, compactsize and varint?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835780' id='396593'>
<a class='timestamp' href='#396593'><time timestamp='2020-07-27T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
compactsize is the one the original source code and protocol from satoshi&#x27;s time used
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835780' id='396594'>
<a class='timestamp' href='#396594'><time timestamp='2020-07-27T07:43:00Z'>07:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which was called varint everywhere, but compactsize inside the source code (as it was only used to serialize the length of things)
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835840' id='396595'>
<a class='timestamp' href='#396595'><time timestamp='2020-07-27T07:44:00Z'>07:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the varint one was inspired by BER&#x27;s length encoding, with a slight (and in retrospect not worthwhile) efficiency improvement i came up with
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835900' id='396596'>
<a class='timestamp' href='#396596'><time timestamp='2020-07-27T07:45:00Z'>07:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it was part of the database redesign in 0.8 that introduced the utxo set chainstate database
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835900' id='396597'>
<a class='timestamp' href='#396597'><time timestamp='2020-07-27T07:45:00Z'>07:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
where i think it performed better than the compactsize we had
<br>
</div>

<div class='talk op-msg' data-timestamp='1595835960' id='396598'>
<a class='timestamp' href='#396598'><time timestamp='2020-07-27T07:46:00Z'>07:46</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
I see
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836020' id='396599'>
<a class='timestamp' href='#396599'><time timestamp='2020-07-27T07:47:00Z'>07:47</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
is compactsize specified anywhere (other than &quot;look at the code&quot;)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836020' id='396600'>
<a class='timestamp' href='#396600'><time timestamp='2020-07-27T07:47:00Z'>07:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and maybe part of the confusion here is because the compactsize encoding is often jusy referred to as varint
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836080' id='396601'>
<a class='timestamp' href='#396601'><time timestamp='2020-07-27T07:48:00Z'>07:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
vasild: not in any BIPs afaik; things that existed in the protocol before the BIPs process existed as generally just taken as gospel
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836080' id='396602'>
<a class='timestamp' href='#396602'><time timestamp='2020-07-27T07:48:00Z'>07:48</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
maybe the new type should have been named something else than varint
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836200' id='396603'>
<a class='timestamp' href='#396603'><time timestamp='2020-07-27T07:50:00Z'>07:50</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
Ok, so neither one of varint or compactsize is defined in BIPs, but compact size is already used in other places in the p2p protocol whereas varint is not.
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836200' id='396604'>
<a class='timestamp' href='#396604'><time timestamp='2020-07-27T07:50:00Z'>07:50</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
BIP155 says:
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836200' id='396605'>
<a class='timestamp' href='#396605'><time timestamp='2020-07-27T07:50:00Z'>07:50</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
- Jonas Schnelli: change services field to VARINT, to make the message more compact in the likely case instead of always using 8 bytes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836200' id='396606'>
<a class='timestamp' href='#396606'><time timestamp='2020-07-27T07:50:00Z'>07:50</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
- Luke-Jr: change time field to VARINT, for post-2038 compatibility. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836260' id='396607'>
<a class='timestamp' href='#396607'><time timestamp='2020-07-27T07:51:00Z'>07:51</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jonasschnelli: luke-jr: ^^^ Did you mean compactsize instead of varint? Should we change that to compactsize now?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836320' id='396608'>
<a class='timestamp' href='#396608'><time timestamp='2020-07-27T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
for BIP152 there was initially an intention to use varint, but it was changed to compactsize to simplify specification
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836320' id='396609'>
<a class='timestamp' href='#396609'><time timestamp='2020-07-27T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
what is the difference between compact size and varint?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836320' id='396610'>
<a class='timestamp' href='#396610'><time timestamp='2020-07-27T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
vasild: ^ that&#x27;s what i mean :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836320' id='396611'>
<a class='timestamp' href='#396611'><time timestamp='2020-07-27T07:52:00Z'>07:52</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
Or, well, if in other specs the word &quot;VARINT&quot; is used to mean &quot;compactsize&quot;, then should the BIP155 C++ source code use compactsize?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836380' id='396612'>
<a class='timestamp' href='#396612'><time timestamp='2020-07-27T07:53:00Z'>07:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
when people say varint in the context of the protocol, it usually refers to what is known as compactsize in the source code
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836380' id='396613'>
<a class='timestamp' href='#396613'><time timestamp='2020-07-27T07:53:00Z'>07:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: scroll up a few lines, i gave the history :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836380' id='396614'>
<a class='timestamp' href='#396614'><time timestamp='2020-07-27T07:53:00Z'>07:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
just read back... :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836920' id='396615'>
<a class='timestamp' href='#396615'><time timestamp='2020-07-27T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
git grep -il varint ./bip-0*    # 8 occurrences
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836920' id='396616'>
<a class='timestamp' href='#396616'><time timestamp='2020-07-27T08:02:00Z'>08:02</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
s/8 occurrences/mentioned in 8 BIPs/
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836980' id='396617'>
<a class='timestamp' href='#396617'><time timestamp='2020-07-27T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
and &quot;compactsize&quot; is mentioned in 6 BIPs
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836980' id='396618'>
<a class='timestamp' href='#396618'><time timestamp='2020-07-27T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which ones?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836980' id='396619'>
<a class='timestamp' href='#396619'><time timestamp='2020-07-27T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
varint:
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836980' id='396620'>
<a class='timestamp' href='#396620'><time timestamp='2020-07-27T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0010.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836980' id='396621'>
<a class='timestamp' href='#396621'><time timestamp='2020-07-27T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0023.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836980' id='396622'>
<a class='timestamp' href='#396622'><time timestamp='2020-07-27T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0037.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836980' id='396623'>
<a class='timestamp' href='#396623'><time timestamp='2020-07-27T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0098.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836980' id='396624'>
<a class='timestamp' href='#396624'><time timestamp='2020-07-27T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0154.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836980' id='396625'>
<a class='timestamp' href='#396625'><time timestamp='2020-07-27T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0155.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836980' id='396626'>
<a class='timestamp' href='#396626'><time timestamp='2020-07-27T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0180.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836980' id='396627'>
<a class='timestamp' href='#396627'><time timestamp='2020-07-27T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0322.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595836980' id='396628'>
<a class='timestamp' href='#396628'><time timestamp='2020-07-27T08:03:00Z'>08:03</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
compactsize:
<br>
</div>

<div class='talk op-msg' data-timestamp='1595837040' id='396629'>
<a class='timestamp' href='#396629'><time timestamp='2020-07-27T08:04:00Z'>08:04</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0152.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595837040' id='396630'>
<a class='timestamp' href='#396630'><time timestamp='2020-07-27T08:04:00Z'>08:04</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0157.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595837040' id='396631'>
<a class='timestamp' href='#396631'><time timestamp='2020-07-27T08:04:00Z'>08:04</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0158.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595837040' id='396632'>
<a class='timestamp' href='#396632'><time timestamp='2020-07-27T08:04:00Z'>08:04</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0330.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595837040' id='396633'>
<a class='timestamp' href='#396633'><time timestamp='2020-07-27T08:04:00Z'>08:04</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0341.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595837040' id='396634'>
<a class='timestamp' href='#396634'><time timestamp='2020-07-27T08:04:00Z'>08:04</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
bip-0342.mediawiki
<br>
</div>

<div class='talk op-msg' data-timestamp='1595837220' id='396635'>
<a class='timestamp' href='#396635'><time timestamp='2020-07-27T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
Anyway, given that compact size is used in p2p and not varint, I suggest that we change the spec to say &quot;compactsize&quot; instead of &quot;varint&quot; with some clarification like &quot;For the purposes of this section, CompactSize refers to the variable-length integer encoding used acros...&quot; (from bip152) and also change the code to use compactsize instead of varint (the code is in 
<br>
</div>

<div class='talk op-msg' data-timestamp='1595837220' id='396636'>
<a class='timestamp' href='#396636'><time timestamp='2020-07-27T08:07:00Z'>08:07</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/pull/19031)" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19031)</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595837340' id='396637'>
<a class='timestamp' href='#396637'><time timestamp='2020-07-27T08:09:00Z'>08:09</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
jonasschnelli: luke-jr: sipa: wumpus: what do you think, (s/VARINT/CompactSize/ in BIP155)?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595839800' id='396638'>
<a class='timestamp' href='#396638'><time timestamp='2020-07-27T08:50:00Z'>08:50</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
vasild: <a href="https://en.bitcoin.it/wiki/Protocol_documentation#Variable_length_integer" class="link" target="_blank">https://en.bitcoin.it/wiki/Protocol_documentation#Variable_length_integer</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595839920' id='396639'>
<a class='timestamp' href='#396639'><time timestamp='2020-07-27T08:52:00Z'>08:52</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I&#x27;m not sure it makes sense to use the old varint for time/services.. benefits more from the new varint
<br>
</div>

<div class='talk op-msg' data-timestamp='1595848140' id='396640'>
<a class='timestamp' href='#396640'><time timestamp='2020-07-27T11:09:00Z'>11:09</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
luke-jr: actually 4 bytes unsigned integer supports time up to year 2106. Only signed 4 bytes will brick after 2038
<br>
</div>

<div class='talk op-msg' data-timestamp='1595848320' id='396641'>
<a class='timestamp' href='#396641'><time timestamp='2020-07-27T11:12:00Z'>11:12</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
CAddress::nTime is uint32_t - it will work as is in master until 2106. I think there is no need to change it to varint or compact size in order to make it post-2038 proof. varint or compactsize would need 5 bytes today.
<br>
</div>

<div class='talk op-msg' data-timestamp='1595848860' id='396642'>
<a class='timestamp' href='#396642'><time timestamp='2020-07-27T11:21:00Z'>11:21</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
For services - both varint and compact size will use 1 byte if NODE_NETWORK_LIMITED is not involved.
<br>
</div>

<div class='talk op-msg' data-timestamp='1595848920' id='396643'>
<a class='timestamp' href='#396643'><time timestamp='2020-07-27T11:22:00Z'>11:22</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
And if NODE_NETWORK_LIMITED is set, then compactsize will use 3 bytes whereas varint will use 2 bytes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1595848980' id='396644'>
<a class='timestamp' href='#396644'><time timestamp='2020-07-27T11:23:00Z'>11:23</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theStack opened pull request #19597: test: test decodepsbt fee calculation (count input value only once per UTXO) (master...20200726-test-check-deceodepsbt-fee-calculation) <a href="https://github.com/bitcoin/bitcoin/pull/19597" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19597</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595848980' id='396645'>
<a class='timestamp' href='#396645'><time timestamp='2020-07-27T11:23:00Z'>11:23</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
Is saving 1 byte worth introducing a new encoding?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850360' id='396646'>
<a class='timestamp' href='#396646'><time timestamp='2020-07-27T11:46:00Z'>11:46</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
vasild: does it introduce a new encoding?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850420' id='396647'>
<a class='timestamp' href='#396647'><time timestamp='2020-07-27T11:47:00Z'>11:47</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
saving a byte per address sounds good actually
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850480' id='396648'>
<a class='timestamp' href='#396648'><time timestamp='2020-07-27T11:48:00Z'>11:48</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
wumpus: as it turns out VARINT is not used anywhere in P2P, CompactSize is used instead.
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850540' id='396649'>
<a class='timestamp' href='#396649'><time timestamp='2020-07-27T11:49:00Z'>11:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850540' id='396650'>
<a class='timestamp' href='#396650'><time timestamp='2020-07-27T11:49:00Z'>11:49</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
So from P2P point of view VARINT is a new encoding.
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850540' id='396651'>
<a class='timestamp' href='#396651'><time timestamp='2020-07-27T11:49:00Z'>11:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so VARINT is only used in on-disk files?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850540' id='396652'>
<a class='timestamp' href='#396652'><time timestamp='2020-07-27T11:49:00Z'>11:49</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
agree that it&#x27;d be preferable not to introduce it into P2P then
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850600' id='396653'>
<a class='timestamp' href='#396653'><time timestamp='2020-07-27T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
though it&#x27;s not a complex encoding
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850600' id='396654'>
<a class='timestamp' href='#396654'><time timestamp='2020-07-27T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
btw, I did not check that myself, but I trust sipa on it
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850600' id='396655'>
<a class='timestamp' href='#396655'><time timestamp='2020-07-27T11:50:00Z'>11:50</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
both varint and compactsize are mentioned in some BIPs
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850660' id='396656'>
<a class='timestamp' href='#396656'><time timestamp='2020-07-27T11:51:00Z'>11:51</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
but I gather &quot;varint&quot; in BIPs may be used to denote what the source code calls compactsize
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850660' id='396657'>
<a class='timestamp' href='#396657'><time timestamp='2020-07-27T11:51:00Z'>11:51</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;m definitely going with sipa&#x27;s judgement on this :) 
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850720' id='396658'>
<a class='timestamp' href='#396658'><time timestamp='2020-07-27T11:52:00Z'>11:52</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
yes, it is not complex - I did the python implementation in order to do some more testing of it, python ser/deser: <a href="https://bpa.st/HTBA" class="link" target="_blank">https://bpa.st/HTBA</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850840' id='396659'>
<a class='timestamp' href='#396659'><time timestamp='2020-07-27T11:54:00Z'>11:54</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
btw, there is one more concern wrt VARINT - it supports unlimited size and the deserializer would throw an exception for a code like: uint64_t x; stream &gt;&gt; VARINT(x); given a specially crafted sequence of bytes
<br>
</div>

<div class='talk op-msg' data-timestamp='1595850900' id='396660'>
<a class='timestamp' href='#396660'><time timestamp='2020-07-27T11:55:00Z'>11:55</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
e.g. 9 bytes that all have the first bit set would overflow uint64_t
<br>
</div>

<div class='talk op-msg' data-timestamp='1595851020' id='396661'>
<a class='timestamp' href='#396661'><time timestamp='2020-07-27T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-5'> vasild</span>&gt;
So, any code that reads varint from the network has to do: try { stream &gt;&gt; VARINT(x); } catch (...) { aha! }
<br>
</div>

<div class='talk op-msg' data-timestamp='1595851080' id='396662'>
<a class='timestamp' href='#396662'><time timestamp='2020-07-27T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/31d2b4098a9e...b62fbf9e1c19" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/31d2b4098a9e...b62fbf9e1c19</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595851080' id='396663'>
<a class='timestamp' href='#396663'><time timestamp='2020-07-27T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 7b3851e Hennadii Stepanov: refactor: Drop unused CBufferedFile::Seek()
<br>
</div>

<div class='talk op-msg' data-timestamp='1595851080' id='396664'>
<a class='timestamp' href='#396664'><time timestamp='2020-07-27T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master b62fbf9 Wladimir J. van der Laan: Merge #19593: refactor: Drop unused CBufferedFile::Seek()
<br>
</div>

<div class='talk op-msg' data-timestamp='1595851080' id='396665'>
<a class='timestamp' href='#396665'><time timestamp='2020-07-27T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] laanwj merged pull request #19593: refactor: Drop unused CBufferedFile::Seek() (master...200726-seek) <a href="https://github.com/bitcoin/bitcoin/pull/19593" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19593</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595851260' id='396666'>
<a class='timestamp' href='#396666'><time timestamp='2020-07-27T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] troygiorshev opened pull request #19599: Clean message_count and last_message (master...2020-07-clean-message_count) <a href="https://github.com/bitcoin/bitcoin/pull/19599" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19599</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595851800' id='396667'>
<a class='timestamp' href='#396667'><time timestamp='2020-07-27T12:10:00Z'>12:10</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] troygiorshev closed pull request #19580: test: Remove message_count (master...2020-07-remove-message_count) <a href="https://github.com/bitcoin/bitcoin/pull/19580" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19580</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595867940' id='396668'>
<a class='timestamp' href='#396668'><time timestamp='2020-07-27T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-14'> alko89</span>&gt;
hi, I have a question about segwit (I know late...)
<br>
</div>

<div class='talk op-msg' data-timestamp='1595867940' id='396669'>
<a class='timestamp' href='#396669'><time timestamp='2020-07-27T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-14'> alko89</span>&gt;
so if the segwit data is separated and not part of the blockchain
<br>
</div>

<div class='talk op-msg' data-timestamp='1595867940' id='396670'>
<a class='timestamp' href='#396670'><time timestamp='2020-07-27T16:39:00Z'>16:39</time></a>
&lt;<span class='nick nick-14'> alko89</span>&gt;
what is the incentive to store that data?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868000' id='396671'>
<a class='timestamp' href='#396671'><time timestamp='2020-07-27T16:40:00Z'>16:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it is part of the blockchain, and committed to by blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868000' id='396672'>
<a class='timestamp' href='#396672'><time timestamp='2020-07-27T16:40:00Z'>16:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just not by the txid that are used by other transactions that refer back to it
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868000' id='396673'>
<a class='timestamp' href='#396673'><time timestamp='2020-07-27T16:40:00Z'>16:40</time></a>
&lt;<span class='nick nick-14'> alko89</span>&gt;
but the block is 1MB and the withess data is 4MB right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868000' id='396674'>
<a class='timestamp' href='#396674'><time timestamp='2020-07-27T16:40:00Z'>16:40</time></a>
&lt;<span class='nick nick-14'> alko89</span>&gt;
ahhh
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868060' id='396675'>
<a class='timestamp' href='#396675'><time timestamp='2020-07-27T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-14'> alko89</span>&gt;
so when the utxo is spent, the data gets removed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868060' id='396676'>
<a class='timestamp' href='#396676'><time timestamp='2020-07-27T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868060' id='396677'>
<a class='timestamp' href='#396677'><time timestamp='2020-07-27T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s part of the blockchain just as much as everything else
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868060' id='396678'>
<a class='timestamp' href='#396678'><time timestamp='2020-07-27T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s just separate
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868060' id='396679'>
<a class='timestamp' href='#396679'><time timestamp='2020-07-27T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but it is data that never enters the utxo set, so it has less impact on nodes&#x27; operations
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868060' id='396680'>
<a class='timestamp' href='#396680'><time timestamp='2020-07-27T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-14'> alko89</span>&gt;
hmmmm...but that means the block size did increase with segwit update :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868060' id='396681'>
<a class='timestamp' href='#396681'><time timestamp='2020-07-27T16:41:00Z'>16:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes, of course
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868120' id='396682'>
<a class='timestamp' href='#396682'><time timestamp='2020-07-27T16:42:00Z'>16:42</time></a>
&lt;<span class='nick nick-14'> alko89</span>&gt;
awwwwwwww!!!!
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868120' id='396683'>
<a class='timestamp' href='#396683'><time timestamp='2020-07-27T16:42:00Z'>16:42</time></a>
&lt;<span class='nick nick-14'> alko89</span>&gt;
thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868120' id='396684'>
<a class='timestamp' href='#396684'><time timestamp='2020-07-27T16:42:00Z'>16:42</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
<a href="https://bitcoin.stackexchange.com/questions/52196/is-segwit-a-blocksize-increase-or-more-efficient-use-of-blockspace" class="link" target="_blank">https://bitcoin.stackexchange.com/questions/52196/is-segwit-a-blocksize-increase-or-more-efficient-use-of-blockspace</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868420' id='396685'>
<a class='timestamp' href='#396685'><time timestamp='2020-07-27T16:47:00Z'>16:47</time></a>
&lt;<span class='nick nick-14'> alko89</span>&gt;
another question: If I&#x27;m not mistaken segwit transactions are visible by the old nodes as being spendable by all?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868480' id='396686'>
<a class='timestamp' href='#396686'><time timestamp='2020-07-27T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
bitcoin.stackexchange.com is probably a better place to ask
<br>
</div>

<div class='talk op-msg' data-timestamp='1595868480' id='396687'>
<a class='timestamp' href='#396687'><time timestamp='2020-07-27T16:48:00Z'>16:48</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there are plenty of questions on that topic already
<br>
</div>

<div class='talk op-msg' data-timestamp='1595871840' id='396688'>
<a class='timestamp' href='#396688'><time timestamp='2020-07-27T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto opened pull request #19600: doc: Fix log message for -reindex (master...200727-load-log) <a href="https://github.com/bitcoin/bitcoin/pull/19600" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19600</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595873400' id='396689'>
<a class='timestamp' href='#396689'><time timestamp='2020-07-27T18:10:00Z'>18:10</time></a>
&lt;<span class='nick nick-12'> * midnight</span>&gt;
prods sipa re: graphs..?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595874420' id='396690'>
<a class='timestamp' href='#396690'><time timestamp='2020-07-27T18:27:00Z'>18:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
midnight: oops, on it
<br>
</div>

<div class='talk op-msg' data-timestamp='1595874660' id='396691'>
<a class='timestamp' href='#396691'><time timestamp='2020-07-27T18:31:00Z'>18:31</time></a>
&lt;<span class='nick nick-8'> midnight</span>&gt;
&lt;3
<br>
</div>

<div class='talk op-msg' data-timestamp='1595877120' id='396692'>
<a class='timestamp' href='#396692'><time timestamp='2020-07-27T19:12:00Z'>19:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
midnight: better?
<br>
</div>

<div class='talk op-msg' data-timestamp='1595877960' id='396693'>
<a class='timestamp' href='#396693'><time timestamp='2020-07-27T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-8'> midnight</span>&gt;
sipa: beautiful!
<br>
</div>

<div class='talk op-msg' data-timestamp='1595878080' id='396694'>
<a class='timestamp' href='#396694'><time timestamp='2020-07-27T19:28:00Z'>19:28</time></a>
&lt;<span class='nick nick-3'> ahmed_</span>&gt;
<a href="https://gist.github.com/ahmedbodi/c19eae5afddb72348a53d7b71b185bae" class="link" target="_blank">https://gist.github.com/ahmedbodi/c19eae5afddb72348a53d7b71b185bae</a> &lt;- does anyone have any ideas what im doing wrong here? i get a CDataStream error while trying to connect to the P2P port of bitcoind
<br>
</div>

<div class='talk op-msg' data-timestamp='1595878140' id='396695'>
<a class='timestamp' href='#396695'><time timestamp='2020-07-27T19:29:00Z'>19:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ahmed_: most likely that means you sent a message that&#x27;s shorter than expected
<br>
</div>

<div class='talk op-msg' data-timestamp='1595878200' id='396696'>
<a class='timestamp' href='#396696'><time timestamp='2020-07-27T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-3'> ahmed_</span>&gt;
@sipa thats why im confused, ive pulled CAddress code from @petertodd&#x27;s bitcoin-python and the Version message code is tidied up version of the msg_version code in his repo
<br>
</div>

<div class='talk op-msg' data-timestamp='1595880120' id='396697'>
<a class='timestamp' href='#396697'><time timestamp='2020-07-27T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] JeremyRubin opened pull request #19601: Refactoring CHashWriter &amp; Get{Prevouts,Sequence,Outputs}Hash to SHA256 (Alternative to #18071)  (master...refactoring-hashers-2) <a href="https://github.com/bitcoin/bitcoin/pull/19601" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19601</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1595881320' id='396698'>
<a class='timestamp' href='#396698'><time timestamp='2020-07-27T20:22:00Z'>20:22</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] achow101 opened pull request #19602: wallet: Migrate legacy wallets to descriptor wallets (master...descriptor-wallet-migration) <a href="https://github.com/bitcoin/bitcoin/pull/19602" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/19602</a>
<br>
</div>

</div>
</section>

</body>
</html>
