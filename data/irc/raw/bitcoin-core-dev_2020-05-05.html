<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2020-05-05
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2020-05-05' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:18 UTC</pre>
<pre><a href="/bitcoin-core-dev/2020-04-05">&lt;</a><span class='header'>     May 2020     </span><a href="/bitcoin-core-dev/2020-06-05">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;                <a class="" href="/bitcoin-core-dev/2020-05-01">1</a>  <a class="" href="/bitcoin-core-dev/2020-05-02">2</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2020-05-03">3</a>  <a class="" href="/bitcoin-core-dev/2020-05-04">4</a>  <a class="current" href="/bitcoin-core-dev/2020-05-05">5</a>  <a class="" href="/bitcoin-core-dev/2020-05-06">6</a>  <a class="" href="/bitcoin-core-dev/2020-05-07">7</a>  <a class="" href="/bitcoin-core-dev/2020-05-08">8</a>  <a class="" href="/bitcoin-core-dev/2020-05-09">9</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-05-10">10</a> <a class="" href="/bitcoin-core-dev/2020-05-11">11</a> <a class="" href="/bitcoin-core-dev/2020-05-12">12</a> <a class="" href="/bitcoin-core-dev/2020-05-13">13</a> <a class="" href="/bitcoin-core-dev/2020-05-14">14</a> <a class="" href="/bitcoin-core-dev/2020-05-15">15</a> <a class="" href="/bitcoin-core-dev/2020-05-16">16</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-05-17">17</a> <a class="" href="/bitcoin-core-dev/2020-05-18">18</a> <a class="" href="/bitcoin-core-dev/2020-05-19">19</a> <a class="" href="/bitcoin-core-dev/2020-05-20">20</a> <a class="" href="/bitcoin-core-dev/2020-05-21">21</a> <a class="" href="/bitcoin-core-dev/2020-05-22">22</a> <a class="" href="/bitcoin-core-dev/2020-05-23">23</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-05-24">24</a> <a class="" href="/bitcoin-core-dev/2020-05-25">25</a> <a class="" href="/bitcoin-core-dev/2020-05-26">26</a> <a class="" href="/bitcoin-core-dev/2020-05-27">27</a> <a class="" href="/bitcoin-core-dev/2020-05-28">28</a> <a class="" href="/bitcoin-core-dev/2020-05-29">29</a> <a class="" href="/bitcoin-core-dev/2020-05-30">30</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2020-05-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1588636800' id='385419'>
<a class='timestamp' href='#385419'><time timestamp='2020-05-05T00:00:00Z'>00:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #18875: fuzz: Stop nodes in process_message* fuzzers (master...2005-fuzzStopNodes) <a href="https://github.com/bitcoin/bitcoin/pull/18875" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18875</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588646040' id='385420'>
<a class='timestamp' href='#385420'><time timestamp='2020-05-05T02:34:00Z'>02:34</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
maybe #9381 should go on high priority just to get it in finally, it has been sitting around for years with some decent review between rebases, if a few people reviewed it this week before it requires rebase again, it could definitely go in
<br>
</div>

<div class='talk op-msg' data-timestamp='1588646040' id='385421'>
<a class='timestamp' href='#385421'><time timestamp='2020-05-05T02:34:00Z'>02:34</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9381" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9381</a> | Remove CWalletTx merging logic from AddToWallet by ryanofsky · Pull Request #9381 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1588646040' id='385422'>
<a class='timestamp' href='#385422'><time timestamp='2020-05-05T02:34:00Z'>02:34</time></a>
&lt;<span class='nick nick-3'> meshcollider</span>&gt;
at least, review beg ^
<br>
</div>

<div class='talk op-msg' data-timestamp='1588647300' id='385423'>
<a class='timestamp' href='#385423'><time timestamp='2020-05-05T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #18876: Serve BIP 157 compact filters (master...pr16442.3) <a href="https://github.com/bitcoin/bitcoin/pull/18876" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18876</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588647480' id='385424'>
<a class='timestamp' href='#385424'><time timestamp='2020-05-05T02:58:00Z'>02:58</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #18877: Serve cfcheckpt requests (master...2020-04-serve-getcfcheckpt) <a href="https://github.com/bitcoin/bitcoin/pull/18877" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18877</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588648140' id='385425'>
<a class='timestamp' href='#385425'><time timestamp='2020-05-05T03:09:00Z'>03:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake closed pull request #16442: Serve BIP 157 compact filters (master...bip157-net) <a href="https://github.com/bitcoin/bitcoin/pull/16442" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/16442</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588648860' id='385426'>
<a class='timestamp' href='#385426'><time timestamp='2020-05-05T03:21:00Z'>03:21</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] ryanofsky opened pull request #18878: test: Add test for conflicted wallet tx notifications (master...pr/nonot) <a href="https://github.com/bitcoin/bitcoin/pull/18878" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18878</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588649580' id='385427'>
<a class='timestamp' href='#385427'><time timestamp='2020-05-05T03:33:00Z'>03:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake opened pull request #18879: valgrind: remove outdated suppressions (master...remove_outdated_supp) <a href="https://github.com/bitcoin/bitcoin/pull/18879" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18879</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588650960' id='385428'>
<a class='timestamp' href='#385428'><time timestamp='2020-05-05T03:56:00Z'>03:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] meshcollider pushed 3 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/e727c2bdcab3...ec79b5f86b22" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/e727c2bdcab3...ec79b5f86b22</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588650960' id='385429'>
<a class='timestamp' href='#385429'><time timestamp='2020-05-05T03:56:00Z'>03:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ff046ae practicalswift: wallet: Make sure no DescriptorScriptPubKeyMan members are uninitialized a...
<br>
</div>

<div class='talk op-msg' data-timestamp='1588650960' id='385430'>
<a class='timestamp' href='#385430'><time timestamp='2020-05-05T03:56:00Z'>03:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 2a78098 practicalswift: wallet: Make sure no WalletDescriptor members are uninitialized after cons...
<br>
</div>

<div class='talk op-msg' data-timestamp='1588650960' id='385431'>
<a class='timestamp' href='#385431'><time timestamp='2020-05-05T03:56:00Z'>03:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master ec79b5f Samuel Dobson: Merge #18782: wallet: Make sure no DescriptorScriptPubKeyMan or WalletDesc...
<br>
</div>

<div class='talk op-msg' data-timestamp='1588650960' id='385432'>
<a class='timestamp' href='#385432'><time timestamp='2020-05-05T03:56:00Z'>03:56</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] meshcollider merged pull request #18782: wallet: Make sure no DescriptorScriptPubKeyMan or WalletDescriptor members are left uninitialized after construction (master...uninitialized-members) <a href="https://github.com/bitcoin/bitcoin/pull/18782" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18782</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588651740' id='385433'>
<a class='timestamp' href='#385433'><time timestamp='2020-05-05T04:09:00Z'>04:09</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] luke-jr opened pull request #18880: [0.20] wallet: Add BlockUntilSyncedToCurrentChain to dumpwallet (0.20...pr18671-0.20) <a href="https://github.com/bitcoin/bitcoin/pull/18880" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18880</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588653720' id='385434'>
<a class='timestamp' href='#385434'><time timestamp='2020-05-05T04:42:00Z'>04:42</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
#proposedwalletmeetingtopic Moving to a new storage database for descriptor wallets
<br>
</div>

<div class='talk op-msg' data-timestamp='1588653840' id='385435'>
<a class='timestamp' href='#385435'><time timestamp='2020-05-05T04:44:00Z'>04:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
reviving #5686?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588653840' id='385436'>
<a class='timestamp' href='#385436'><time timestamp='2020-05-05T04:44:00Z'>04:44</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/5686" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/5686</a> | [Wallet] replace BDB with internal append only (logdb) backend by jonasschnelli · Pull Request #5686 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1588653900' id='385437'>
<a class='timestamp' href='#385437'><time timestamp='2020-05-05T04:45:00Z'>04:45</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
possibly
<br>
</div>

<div class='talk op-msg' data-timestamp='1588653900' id='385438'>
<a class='timestamp' href='#385438'><time timestamp='2020-05-05T04:45:00Z'>04:45</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
or something else entirely. that&#x27;s for us to discuss/bikeshed I guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654020' id='385439'>
<a class='timestamp' href='#385439'><time timestamp='2020-05-05T04:47:00Z'>04:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sqlite has been suggested as well before
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654080' id='385440'>
<a class='timestamp' href='#385440'><time timestamp='2020-05-05T04:48:00Z'>04:48</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
that was one option I was looking at
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654080' id='385441'>
<a class='timestamp' href='#385441'><time timestamp='2020-05-05T04:48:00Z'>04:48</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
another was lmdb
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654380' id='385442'>
<a class='timestamp' href='#385442'><time timestamp='2020-05-05T04:53:00Z'>04:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
lmdb is very performant, but has an architecture-dependent format
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654380' id='385443'>
<a class='timestamp' href='#385443'><time timestamp='2020-05-05T04:53:00Z'>04:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
also, all of this is overkill - we don&#x27;t need a database
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654380' id='385444'>
<a class='timestamp' href='#385444'><time timestamp='2020-05-05T04:53:00Z'>04:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
just a list of key value pairs that are loaded at startup and occasionally overwritten
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654440' id='385445'>
<a class='timestamp' href='#385445'><time timestamp='2020-05-05T04:54:00Z'>04:54</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yeah but I don&#x27;t want to write/review something from scratch
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654440' id='385446'>
<a class='timestamp' href='#385446'><time timestamp='2020-05-05T04:54:00Z'>04:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so it&#x27;s not worth making many convenience compromises for
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654440' id='385447'>
<a class='timestamp' href='#385447'><time timestamp='2020-05-05T04:54:00Z'>04:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s very reasonable
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654500' id='385448'>
<a class='timestamp' href='#385448'><time timestamp='2020-05-05T04:55:00Z'>04:55</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
one thing that I would like to do is to have each ScriptPubKeyMan manage its own storage. and that would be achievable through giving each a table or subdatabase (that&#x27;s a think in bdb and lmdb)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654500' id='385449'>
<a class='timestamp' href='#385449'><time timestamp='2020-05-05T04:55:00Z'>04:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654500' id='385450'>
<a class='timestamp' href='#385450'><time timestamp='2020-05-05T04:55:00Z'>04:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as in separate files?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654500' id='385451'>
<a class='timestamp' href='#385451'><time timestamp='2020-05-05T04:55:00Z'>04:55</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
no in the same file
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654500' id='385452'>
<a class='timestamp' href='#385452'><time timestamp='2020-05-05T04:55:00Z'>04:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
what does that mean/accomplish?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654560' id='385453'>
<a class='timestamp' href='#385453'><time timestamp='2020-05-05T04:56:00Z'>04:56</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
but the specifics of how stuff is stored and what is stored is self contained within a ScriptPubKeyMan&#x27;s module
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654560' id='385454'>
<a class='timestamp' href='#385454'><time timestamp='2020-05-05T04:56:00Z'>04:56</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i guess it&#x27;s bringing the encapsulation of the code to the storage layer as well
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654560' id='385455'>
<a class='timestamp' href='#385455'><time timestamp='2020-05-05T04:56:00Z'>04:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that could be done by just giving each a unique prefix for its keys
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654680' id='385456'>
<a class='timestamp' href='#385456'><time timestamp='2020-05-05T04:58:00Z'>04:58</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i guess...
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654680' id='385457'>
<a class='timestamp' href='#385457'><time timestamp='2020-05-05T04:58:00Z'>04:58</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i meam, if the db system used exposes a feature to do this more natively, sure use it
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654740' id='385458'>
<a class='timestamp' href='#385458'><time timestamp='2020-05-05T04:59:00Z'>04:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i don&#x27;t think it&#x27;s worth picking one db system over another for, or at least not if it comes with other compromises
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654740' id='385459'>
<a class='timestamp' href='#385459'><time timestamp='2020-05-05T04:59:00Z'>04:59</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
compatibility of wallet files i think would be a dealbreaker for lmdb
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654740' id='385460'>
<a class='timestamp' href='#385460'><time timestamp='2020-05-05T04:59:00Z'>04:59</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654800' id='385461'>
<a class='timestamp' href='#385461'><time timestamp='2020-05-05T05:00:00Z'>05:00</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i&#x27;ve been primarily looking for things that are self contained single files, platform independent, and not likely to have changing formtas
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654800' id='385462'>
<a class='timestamp' href='#385462'><time timestamp='2020-05-05T05:00:00Z'>05:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sqlite seems to match that
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654800' id='385463'>
<a class='timestamp' href='#385463'><time timestamp='2020-05-05T05:00:00Z'>05:00</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
lmdb has some build options that make it independent of bitness, but not endianness
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654800' id='385464'>
<a class='timestamp' href='#385464'><time timestamp='2020-05-05T05:00:00Z'>05:00</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or text files ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654860' id='385465'>
<a class='timestamp' href='#385465'><time timestamp='2020-05-05T05:01:00Z'>05:01</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
apparently monero uses lmdb for something and the guy that wrote/writes/maintains lmdb contributes there
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654860' id='385466'>
<a class='timestamp' href='#385466'><time timestamp='2020-05-05T05:01:00Z'>05:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654920' id='385467'>
<a class='timestamp' href='#385467'><time timestamp='2020-05-05T05:02:00Z'>05:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but lmdb is very focused on performance
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654920' id='385468'>
<a class='timestamp' href='#385468'><time timestamp='2020-05-05T05:02:00Z'>05:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
for the wallet we couldn&#x27;t care less about that
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654920' id='385469'>
<a class='timestamp' href='#385469'><time timestamp='2020-05-05T05:02:00Z'>05:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
well I&#x27;d like to care about performace :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654920' id='385470'>
<a class='timestamp' href='#385470'><time timestamp='2020-05-05T05:02:00Z'>05:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588654980' id='385471'>
<a class='timestamp' href='#385471'><time timestamp='2020-05-05T05:03:00Z'>05:03</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
there was that one time importmulti would take so long writing everthing to disk that the RPC would timeout before it finished
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655040' id='385472'>
<a class='timestamp' href='#385472'><time timestamp='2020-05-05T05:04:00Z'>05:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that was just due to silliness of flushing in between any two records writte 
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655040' id='385473'>
<a class='timestamp' href='#385473'><time timestamp='2020-05-05T05:04:00Z'>05:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655040' id='385474'>
<a class='timestamp' href='#385474'><time timestamp='2020-05-05T05:04:00Z'>05:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655040' id='385475'>
<a class='timestamp' href='#385475'><time timestamp='2020-05-05T05:04:00Z'>05:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if writing a few kb takes more than milliseconds it&#x27;s not a fault of the db system
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655100' id='385476'>
<a class='timestamp' href='#385476'><time timestamp='2020-05-05T05:05:00Z'>05:05</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
it was. but a performant db system means I can do dumb things like that and not have a noticeable impact on the user experince :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655160' id='385477'>
<a class='timestamp' href='#385477'><time timestamp='2020-05-05T05:06:00Z'>05:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
no
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655160' id='385478'>
<a class='timestamp' href='#385478'><time timestamp='2020-05-05T05:06:00Z'>05:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
this is literally not something any db system could make reasnable
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655160' id='385479'>
<a class='timestamp' href='#385479'><time timestamp='2020-05-05T05:06:00Z'>05:06</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I was really only looking at lmdb since it seemed to be almost a drop in replacement for bdb
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655160' id='385480'>
<a class='timestamp' href='#385480'><time timestamp='2020-05-05T05:06:00Z'>05:06</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
yeah, i know. i&#x27;m just trolling you
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655220' id='385481'>
<a class='timestamp' href='#385481'><time timestamp='2020-05-05T05:07:00Z'>05:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
okay :D
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655400' id='385482'>
<a class='timestamp' href='#385482'><time timestamp='2020-05-05T05:10:00Z'>05:10</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i&#x27;m not sure that a key-value store is really what we want though. what we have now just feels like jamming separate values to fit into a key-value store. we have a bunch of records that are multiple values that could fit better into table
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655460' id='385483'>
<a class='timestamp' href='#385483'><time timestamp='2020-05-05T05:11:00Z'>05:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
although I would agree with a relation db system is way overkill
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655460' id='385484'>
<a class='timestamp' href='#385484'><time timestamp='2020-05-05T05:11:00Z'>05:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
well, you&#x27;re right that it&#x27;s not quite exactly a key-value store
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655460' id='385485'>
<a class='timestamp' href='#385485'><time timestamp='2020-05-05T05:11:00Z'>05:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but it is how it works now
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655520' id='385486'>
<a class='timestamp' href='#385486'><time timestamp='2020-05-05T05:12:00Z'>05:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
changing the organization of the data as well as the backend storage is a way bigger change
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655520' id='385487'>
<a class='timestamp' href='#385487'><time timestamp='2020-05-05T05:12:00Z'>05:12</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
that was part of the plan
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655520' id='385488'>
<a class='timestamp' href='#385488'><time timestamp='2020-05-05T05:12:00Z'>05:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
even things like google&#x27;s bigtable is effectively leveldb but with keys that are sort of a hierarchy of fields
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655520' id='385489'>
<a class='timestamp' href='#385489'><time timestamp='2020-05-05T05:12:00Z'>05:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ugh :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655580' id='385490'>
<a class='timestamp' href='#385490'><time timestamp='2020-05-05T05:13:00Z'>05:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
seems unnecesary
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655760' id='385491'>
<a class='timestamp' href='#385491'><time timestamp='2020-05-05T05:16:00Z'>05:16</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
I would like to do some things like consolidated address book data and changing unenecrypted privkey storage format that would make it diverge from what we currently have
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655820' id='385492'>
<a class='timestamp' href='#385492'><time timestamp='2020-05-05T05:17:00Z'>05:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you can do that without changing the organization or the storage format
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655880' id='385493'>
<a class='timestamp' href='#385493'><time timestamp='2020-05-05T05:18:00Z'>05:18</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
address book stuff would be different records entirely so that&#x27;s changing the organization
<br>
</div>

<div class='talk op-msg' data-timestamp='1588655940' id='385494'>
<a class='timestamp' href='#385494'><time timestamp='2020-05-05T05:19:00Z'>05:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i mean: it doesn&#x27;t require moving away from a key-value store
<br>
</div>

<div class='talk op-msg' data-timestamp='1588656000' id='385495'>
<a class='timestamp' href='#385495'><time timestamp='2020-05-05T05:20:00Z'>05:20</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
nothing strictly requires one or the other so it&#x27;s just a function of how much work you want to do
<br>
</div>

<div class='talk op-msg' data-timestamp='1588656000' id='385496'>
<a class='timestamp' href='#385496'><time timestamp='2020-05-05T05:20:00Z'>05:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as little as possible :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588658700' id='385497'>
<a class='timestamp' href='#385497'><time timestamp='2020-05-05T06:05:00Z'>06:05</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto opened pull request #18881: Prevent UB in DeleteLock() function (master...200505-cofu) <a href="https://github.com/bitcoin/bitcoin/pull/18881" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18881</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661100' id='385498'>
<a class='timestamp' href='#385498'><time timestamp='2020-05-05T06:45:00Z'>06:45</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: what would speak against a simple append only file-format? Keep all the wallets in memory for fast performance. And if memory gets a concern, load the transactions when required.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661100' id='385499'>
<a class='timestamp' href='#385499'><time timestamp='2020-05-05T06:45:00Z'>06:45</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I&#x27;d say even for large wallets, that should be reasonable fast.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661160' id='385500'>
<a class='timestamp' href='#385500'><time timestamp='2020-05-05T06:46:00Z'>06:46</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: i don&#x27;t think we should do append only. we currently do things that would not work well with append only and it seems reasonable that we would do things similarly in the future
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661220' id='385501'>
<a class='timestamp' href='#385501'><time timestamp='2020-05-05T06:47:00Z'>06:47</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
for example UpgradeKeyMetadata modifies CKeyMetadata and doing this in an append only format would not be ideal
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661220' id='385502'>
<a class='timestamp' href='#385502'><time timestamp='2020-05-05T06:47:00Z'>06:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
If one wants to increase the performance of tx loading / decomposing, one could implement kinda subtotals... which would reduce the balance algorithms to not always scan the whole tx database
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661220' id='385503'>
<a class='timestamp' href='#385503'><time timestamp='2020-05-05T06:47:00Z'>06:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: just write the new records as append only,... which would internally overwrite the old recods...
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661220' id='385504'>
<a class='timestamp' href='#385504'><time timestamp='2020-05-05T06:47:00Z'>06:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
just disk size and loading time would increase
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661280' id='385505'>
<a class='timestamp' href='#385505'><time timestamp='2020-05-05T06:48:00Z'>06:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
until one performs a compact-save (write 100% again)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661280' id='385506'>
<a class='timestamp' href='#385506'><time timestamp='2020-05-05T06:48:00Z'>06:48</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
well yeah, that&#x27;s the problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661280' id='385507'>
<a class='timestamp' href='#385507'><time timestamp='2020-05-05T06:48:00Z'>06:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
what? the compact write?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661280' id='385508'>
<a class='timestamp' href='#385508'><time timestamp='2020-05-05T06:48:00Z'>06:48</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the duplicate records which impacts disk size and loading times
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661280' id='385509'>
<a class='timestamp' href='#385509'><time timestamp='2020-05-05T06:48:00Z'>06:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
or the disk size?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661340' id='385510'>
<a class='timestamp' href='#385510'><time timestamp='2020-05-05T06:49:00Z'>06:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
who cares about disk size if you have 300GB+ blockchain data? :-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661340' id='385511'>
<a class='timestamp' href='#385511'><time timestamp='2020-05-05T06:49:00Z'>06:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
and if you care, do a compact-save
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661340' id='385512'>
<a class='timestamp' href='#385512'><time timestamp='2020-05-05T06:49:00Z'>06:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(optimizewallet call or so)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661340' id='385513'>
<a class='timestamp' href='#385513'><time timestamp='2020-05-05T06:49:00Z'>06:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
and you could write special &quot;overwrite&quot; records for things that happen often and use little space.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661340' id='385514'>
<a class='timestamp' href='#385514'><time timestamp='2020-05-05T06:49:00Z'>06:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Not often. but take abandontransaction as example.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661400' id='385515'>
<a class='timestamp' href='#385515'><time timestamp='2020-05-05T06:50:00Z'>06:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
just write a special record type that abandons a tx id rather than stroing the whole tx stucture again.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661400' id='385516'>
<a class='timestamp' href='#385516'><time timestamp='2020-05-05T06:50:00Z'>06:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(would only be required if you care about disk size though)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661460' id='385517'>
<a class='timestamp' href='#385517'><time timestamp='2020-05-05T06:51:00Z'>06:51</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
a compact save seems like a possibility to lose data
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661460' id='385518'>
<a class='timestamp' href='#385518'><time timestamp='2020-05-05T06:51:00Z'>06:51</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
and I don&#x27;t really want the user to have to manually initiate one, doesn&#x27;t feel like good ux
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661460' id='385519'>
<a class='timestamp' href='#385519'><time timestamp='2020-05-05T06:51:00Z'>06:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: not if done right... compact write to a second file, validate integrity, atomic swap
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661520' id='385520'>
<a class='timestamp' href='#385520'><time timestamp='2020-05-05T06:52:00Z'>06:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: you could calculate the % overhead on each load,.. if to large, compact save.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661520' id='385521'>
<a class='timestamp' href='#385521'><time timestamp='2020-05-05T06:52:00Z'>06:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
is matters of milliseconds.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661520' id='385522'>
<a class='timestamp' href='#385522'><time timestamp='2020-05-05T06:52:00Z'>06:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
integrity can be guaranteed if done right
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661520' id='385523'>
<a class='timestamp' href='#385523'><time timestamp='2020-05-05T06:52:00Z'>06:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
no external dependencies....
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661520' id='385524'>
<a class='timestamp' href='#385524'><time timestamp='2020-05-05T06:52:00Z'>06:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sha256 hash per record to have a database &quot;made&quot; for secrets
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661580' id='385525'>
<a class='timestamp' href='#385525'><time timestamp='2020-05-05T06:53:00Z'>06:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yeah, that&#x27;s what logdb did
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661580' id='385526'>
<a class='timestamp' href='#385526'><time timestamp='2020-05-05T06:53:00Z'>06:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I would avoid getting caught in sqlite3 or lmdb pitfalls
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661580' id='385527'>
<a class='timestamp' href='#385527'><time timestamp='2020-05-05T06:53:00Z'>06:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: exactly
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661640' id='385528'>
<a class='timestamp' href='#385528'><time timestamp='2020-05-05T06:54:00Z'>06:54</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
the only question for me is, if it is acceptable to have everything in memory and if not, how hard it would be to have a disk based tx decomposer
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661640' id='385529'>
<a class='timestamp' href='#385529'><time timestamp='2020-05-05T06:54:00Z'>06:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;d be ok with sqlite
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661640' id='385530'>
<a class='timestamp' href='#385530'><time timestamp='2020-05-05T06:54:00Z'>06:54</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
yeah,... for the tx history,... but just for the keys, scripts, it seems to be an overkill
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661700' id='385531'>
<a class='timestamp' href='#385531'><time timestamp='2020-05-05T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s absolutely overkill
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661700' id='385532'>
<a class='timestamp' href='#385532'><time timestamp='2020-05-05T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: it&#x27;s slightly difficult for right now to not have all the txs in memory
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661700' id='385533'>
<a class='timestamp' href='#385533'><time timestamp='2020-05-05T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
bunch of gui stuff relies on that fact
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661700' id='385534'>
<a class='timestamp' href='#385534'><time timestamp='2020-05-05T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i have a branch that attempted to load txs on demand and it was kinda awful
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661700' id='385535'>
<a class='timestamp' href='#385535'><time timestamp='2020-05-05T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but it&#x27;s also a well-tested existing standalone library that does what we need - and a lot we don&#x27;t need
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661700' id='385536'>
<a class='timestamp' href='#385536'><time timestamp='2020-05-05T06:55:00Z'>06:55</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: indeed. Optimizing performance would require some sub-total (balance-up-to-this-tx) cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661760' id='385537'>
<a class='timestamp' href='#385537'><time timestamp='2020-05-05T06:56:00Z'>06:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i would avoid lmdb, it seems designed for very different goals
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661760' id='385538'>
<a class='timestamp' href='#385538'><time timestamp='2020-05-05T06:56:00Z'>06:56</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. Makes little sense for a wallet IMO
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661820' id='385539'>
<a class='timestamp' href='#385539'><time timestamp='2020-05-05T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
IIRC Armory is using/was going to use lmdb for the wallet. dunno how far that got
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661820' id='385540'>
<a class='timestamp' href='#385540'><time timestamp='2020-05-05T06:57:00Z'>06:57</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
but yeah, after looking at lmdb, it doesn&#x27;t seem like a good fit, particularly the arch dependent format
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661940' id='385541'>
<a class='timestamp' href='#385541'><time timestamp='2020-05-05T06:59:00Z'>06:59</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
bikeshedding over what format to use can come later though. I first want to know if trying to do this now will even get anywhere
<br>
</div>

<div class='talk op-msg' data-timestamp='1588661940' id='385542'>
<a class='timestamp' href='#385542'><time timestamp='2020-05-05T06:59:00Z'>06:59</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
first it would be good to layer out bdb... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662000' id='385543'>
<a class='timestamp' href='#385543'><time timestamp='2020-05-05T07:00:00Z'>07:00</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
one of my concerns is whether we should even try to do this for descriptor wallets now
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662000' id='385544'>
<a class='timestamp' href='#385544'><time timestamp='2020-05-05T07:00:00Z'>07:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
the code needs to be ready to support both formats
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662000' id='385545'>
<a class='timestamp' href='#385545'><time timestamp='2020-05-05T07:00:00Z'>07:00</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
or if it&#x27;s too late
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662000' id='385546'>
<a class='timestamp' href='#385546'><time timestamp='2020-05-05T07:00:00Z'>07:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
since you dont want to abandon old wallets
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662060' id='385547'>
<a class='timestamp' href='#385547'><time timestamp='2020-05-05T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: you mean <b>*only*</b> for descriptor wallets?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662060' id='385548'>
<a class='timestamp' href='#385548'><time timestamp='2020-05-05T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: my idea was to make it a descriptor wallets only thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662060' id='385549'>
<a class='timestamp' href='#385549'><time timestamp='2020-05-05T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
yeah. that would be an ideal time
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662060' id='385550'>
<a class='timestamp' href='#385550'><time timestamp='2020-05-05T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think that&#x27;s crazy
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662060' id='385551'>
<a class='timestamp' href='#385551'><time timestamp='2020-05-05T07:01:00Z'>07:01</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the reasoning being that since descriptor wallets is a wholly new thing, might be a good time to also bring in a new disk format
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662120' id='385552'>
<a class='timestamp' href='#385552'><time timestamp='2020-05-05T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if will complicate maintaining support for legacy wallets, by duplicating all storage level stuff work now for bdb and whatever is chosen
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662120' id='385553'>
<a class='timestamp' href='#385553'><time timestamp='2020-05-05T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
imo it&#x27;s something to do completely orthogonally
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662120' id='385554'>
<a class='timestamp' href='#385554'><time timestamp='2020-05-05T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: but you have to support both storage backends anyways. right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662120' id='385555'>
<a class='timestamp' href='#385555'><time timestamp='2020-05-05T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sipa: how so?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662120' id='385556'>
<a class='timestamp' href='#385556'><time timestamp='2020-05-05T07:02:00Z'>07:02</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
the thought was that legacy wallets would only use bdb, and descriptor wallets only the new thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662180' id='385557'>
<a class='timestamp' href='#385557'><time timestamp='2020-05-05T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
then whenver we get around to killing legacy wallets, bdb goes with it
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662180' id='385558'>
<a class='timestamp' href='#385558'><time timestamp='2020-05-05T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: yeah, i think that&#x27;s crazy
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662180' id='385559'>
<a class='timestamp' href='#385559'><time timestamp='2020-05-05T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you&#x27;ll need two walletdb
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662180' id='385560'>
<a class='timestamp' href='#385560'><time timestamp='2020-05-05T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
If an storage upgrade is required for legacy wallets (which would be a no-go IMO), it could go over bitcoin-wallet (where we still need both storage backend in the code)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662180' id='385561'>
<a class='timestamp' href='#385561'><time timestamp='2020-05-05T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you&#x27;ll need two walletdb.cpp&#x27;s
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662180' id='385562'>
<a class='timestamp' href='#385562'><time timestamp='2020-05-05T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
yes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662180' id='385563'>
<a class='timestamp' href='#385563'><time timestamp='2020-05-05T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and you&#x27;ll duplicate work for all improvements that aren&#x27;t specific to descriptor wallets
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662180' id='385564'>
<a class='timestamp' href='#385564'><time timestamp='2020-05-05T07:03:00Z'>07:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I once tried to make the storage backend flexible, changable,... not very easy
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662240' id='385565'>
<a class='timestamp' href='#385565'><time timestamp='2020-05-05T07:04:00Z'>07:04</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
but you need that already
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662240' id='385566'>
<a class='timestamp' href='#385566'><time timestamp='2020-05-05T07:04:00Z'>07:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and it seems completely unnecessary
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662240' id='385567'>
<a class='timestamp' href='#385567'><time timestamp='2020-05-05T07:04:00Z'>07:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
as long as what is exposed is a key-value store, the choice of storage format can be independent of what the keys in it meam
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662240' id='385568'>
<a class='timestamp' href='#385568'><time timestamp='2020-05-05T07:04:00Z'>07:04</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and sure, descriptor walleta would by default by the new thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662300' id='385569'>
<a class='timestamp' href='#385569'><time timestamp='2020-05-05T07:05:00Z'>07:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
yes. it needs a new layers.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662300' id='385570'>
<a class='timestamp' href='#385570'><time timestamp='2020-05-05T07:05:00Z'>07:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and.old wallets would generally be the old thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662300' id='385571'>
<a class='timestamp' href='#385571'><time timestamp='2020-05-05T07:05:00Z'>07:05</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sipa: I think you could still get it to be shared even with different db backends
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662300' id='385572'>
<a class='timestamp' href='#385572'><time timestamp='2020-05-05T07:05:00Z'>07:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: yes, if the ly&#x27;re orthogonal
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662300' id='385573'>
<a class='timestamp' href='#385573'><time timestamp='2020-05-05T07:05:00Z'>07:05</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i get that the separation doesn&#x27;t make sense technically. but i&#x27;m also trying to make it a logical separation to
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662360' id='385574'>
<a class='timestamp' href='#385574'><time timestamp='2020-05-05T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think you shouldn&#x27;t try to make this a descriptor-wallet-only thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662360' id='385575'>
<a class='timestamp' href='#385575'><time timestamp='2020-05-05T07:06:00Z'>07:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that risks huge compatibility problems if it doesn&#x27;t get in by 0.21
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662420' id='385576'>
<a class='timestamp' href='#385576'><time timestamp='2020-05-05T07:07:00Z'>07:07</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
and that&#x27;s the other problem
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662480' id='385577'>
<a class='timestamp' href='#385577'><time timestamp='2020-05-05T07:08:00Z'>07:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and there&#x27;s no need, i think - you&#x27;ll want to abstract out the storage layer, amlnd if that&#x27;s done cleanly, there should be no reason why you couldn&#x27;t supoort a legacy new-format wallet or a descriptor bdb wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662480' id='385578'>
<a class='timestamp' href='#385578'><time timestamp='2020-05-05T07:08:00Z'>07:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(perhaps you wouldn&#x27;t want to support creating such things through RPC or whatever - but i think internally you want things separated that way)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662540' id='385579'>
<a class='timestamp' href='#385579'><time timestamp='2020-05-05T07:09:00Z'>07:09</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
well yeah, that was kind of the idea. that in theory you could write a legacy wallet to the new storage, but we just wouldn&#x27;t allow it
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662540' id='385580'>
<a class='timestamp' href='#385580'><time timestamp='2020-05-05T07:09:00Z'>07:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right, but the decision on what to allow can come late
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662600' id='385581'>
<a class='timestamp' href='#385581'><time timestamp='2020-05-05T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if things are in by 0.21 you could indeed say descriptor wallets only in the new format
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662600' id='385582'>
<a class='timestamp' href='#385582'><time timestamp='2020-05-05T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i suppose so
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662600' id='385583'>
<a class='timestamp' href='#385583'><time timestamp='2020-05-05T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i think you&#x27;ll want support for legacy new-format wallets in any caze too
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662600' id='385584'>
<a class='timestamp' href='#385584'><time timestamp='2020-05-05T07:10:00Z'>07:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
eventually someone may want to run a convert tool to convert a bdb wallet to a new format wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662660' id='385585'>
<a class='timestamp' href='#385585'><time timestamp='2020-05-05T07:11:00Z'>07:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if bdb gets dropped
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662660' id='385586'>
<a class='timestamp' href='#385586'><time timestamp='2020-05-05T07:11:00Z'>07:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but that process can&#x27;t convert a legacy wallet into a descriptor wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662660' id='385587'>
<a class='timestamp' href='#385587'><time timestamp='2020-05-05T07:11:00Z'>07:11</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662780' id='385588'>
<a class='timestamp' href='#385588'><time timestamp='2020-05-05T07:13:00Z'>07:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think the bdb support can&#x27;t be drop in near and longterm future.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662840' id='385589'>
<a class='timestamp' href='#385589'><time timestamp='2020-05-05T07:14:00Z'>07:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
If an &quot;tool&quot; (like bitcoin-wallet) would allow the migration from bdb-storage to new-storage, we still would require the bdb support
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662840' id='385590'>
<a class='timestamp' href='#385590'><time timestamp='2020-05-05T07:14:00Z'>07:14</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
so bdb&#x27;s file format isn&#x27;t that hard to parse so it wouldn&#x27;t be all that hard to move to new storage
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662840' id='385591'>
<a class='timestamp' href='#385591'><time timestamp='2020-05-05T07:14:00Z'>07:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
an it would be foolish to tell people to use a third party tool for that
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662900' id='385592'>
<a class='timestamp' href='#385592'><time timestamp='2020-05-05T07:15:00Z'>07:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: you mean a simple record by record migration... yeah. maybe. Still would required the bdb dependency... and some parts of our bdb db.cpp code
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662960' id='385593'>
<a class='timestamp' href='#385593'><time timestamp='2020-05-05T07:16:00Z'>07:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
which makes me think supporting both storage backends in the long term future is easier and unavoidable
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662960' id='385594'>
<a class='timestamp' href='#385594'><time timestamp='2020-05-05T07:16:00Z'>07:16</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: #18836 has a pure python deserializer for bdb files. That with python3&#x27;s sqlite lib should make a python script that can do a record for record conversion in &lt;200 LOC
<br>
</div>

<div class='talk op-msg' data-timestamp='1588662960' id='385595'>
<a class='timestamp' href='#385595'><time timestamp='2020-05-05T07:16:00Z'>07:16</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18836" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18836</a> | wallet: upgradewallet fixes and additional tests by achow101 · Pull Request #18836 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663020' id='385596'>
<a class='timestamp' href='#385596'><time timestamp='2020-05-05T07:17:00Z'>07:17</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
(the python deserializer is to inspect wallet files to make sure that records are being updated by upgradedwallet)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663020' id='385597'>
<a class='timestamp' href='#385597'><time timestamp='2020-05-05T07:17:00Z'>07:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: wow.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663080' id='385598'>
<a class='timestamp' href='#385598'><time timestamp='2020-05-05T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: I think only python scripts is not an adequate option to a must-migrate approach
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663080' id='385599'>
<a class='timestamp' href='#385599'><time timestamp='2020-05-05T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m surprised and impressed that it&#x27;s so simple
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663080' id='385600'>
<a class='timestamp' href='#385600'><time timestamp='2020-05-05T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Think of the novice gui only windows users
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663080' id='385601'>
<a class='timestamp' href='#385601'><time timestamp='2020-05-05T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: right. my point is that it wouldn&#x27;t be that hard to do add a function within bitcoind itself and it doesn&#x27;t require bdb
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663080' id='385602'>
<a class='timestamp' href='#385602'><time timestamp='2020-05-05T07:18:00Z'>07:18</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
also,.. I think it would be non-ideal to tell people to use third party libraries (python stack) to migrate their most crucial database
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663140' id='385603'>
<a class='timestamp' href='#385603'><time timestamp='2020-05-05T07:19:00Z'>07:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: ah. I see. Yes. Thats a good point.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663140' id='385604'>
<a class='timestamp' href='#385604'><time timestamp='2020-05-05T07:19:00Z'>07:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Just; we where really careful to not force walletupgrade for things like HD, etc. Then we suddenly force people to upgrade due to a storage engine change?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663200' id='385605'>
<a class='timestamp' href='#385605'><time timestamp='2020-05-05T07:20:00Z'>07:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I&#x27;d rather support both storage backends long term
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663260' id='385606'>
<a class='timestamp' href='#385606'><time timestamp='2020-05-05T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
same. I think supporting both would be required for quite a while. then the super long term solution is an upgrade with a minimal tool/function
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663260' id='385607'>
<a class='timestamp' href='#385607'><time timestamp='2020-05-05T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: yes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663260' id='385608'>
<a class='timestamp' href='#385608'><time timestamp='2020-05-05T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;s starting to look much more reasonable now
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663260' id='385609'>
<a class='timestamp' href='#385609'><time timestamp='2020-05-05T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
given how simple bdb is to read
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663260' id='385610'>
<a class='timestamp' href='#385610'><time timestamp='2020-05-05T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not short or medium term
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663260' id='385611'>
<a class='timestamp' href='#385611'><time timestamp='2020-05-05T07:21:00Z'>07:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but perhaps long term
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663320' id='385612'>
<a class='timestamp' href='#385612'><time timestamp='2020-05-05T07:22:00Z'>07:22</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sipa: I was surprised too. Unfortunately none of this was documented anywhere and it required rooting around in the source code for a while. at least all the things were in structs in one file in their source tarball
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663320' id='385613'>
<a class='timestamp' href='#385613'><time timestamp='2020-05-05T07:22:00Z'>07:22</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
At one point, bdb depdency could be optional / disabled by default, leaving only the internal conversion tool.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663320' id='385614'>
<a class='timestamp' href='#385614'><time timestamp='2020-05-05T07:22:00Z'>07:22</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
later, the bdb dependency will be removed and users are forced to upgrade (long long term)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663380' id='385615'>
<a class='timestamp' href='#385615'><time timestamp='2020-05-05T07:23:00Z'>07:23</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
sipa: part of the simplicity is also that we don&#x27;t use advanced feature of bdb so the page layout is also very predictable
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663380' id='385616'>
<a class='timestamp' href='#385616'><time timestamp='2020-05-05T07:23:00Z'>07:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663440' id='385617'>
<a class='timestamp' href='#385617'><time timestamp='2020-05-05T07:24:00Z'>07:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sqlite3 is very well defined apparently; all releases back 3.0 can read/write those filss
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663500' id='385618'>
<a class='timestamp' href='#385618'><time timestamp='2020-05-05T07:25:00Z'>07:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ah, not perfectly forward compatible :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663560' id='385619'>
<a class='timestamp' href='#385619'><time timestamp='2020-05-05T07:26:00Z'>07:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i also like that it&#x27;s just a single file
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663560' id='385620'>
<a class='timestamp' href='#385620'><time timestamp='2020-05-05T07:26:00Z'>07:26</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sqlite3 would have some nice benefits for large (many tx) wallets allowing some nice queries
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663560' id='385621'>
<a class='timestamp' href='#385621'><time timestamp='2020-05-05T07:26:00Z'>07:26</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Though I wonder how much of a concern it will be in 10 years and if we would not end up at the same point as we are now with bdb
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663620' id='385622'>
<a class='timestamp' href='#385622'><time timestamp='2020-05-05T07:27:00Z'>07:27</time></a>
&lt;<span class='nick nick-12'> * midnight</span>&gt;
would cheer if bdb went away
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663620' id='385623'>
<a class='timestamp' href='#385623'><time timestamp='2020-05-05T07:27:00Z'>07:27</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i think that bdb isn&#x27;t that bad of a choice for a wallet file format. my main gripe is that we&#x27;re using a version that&#x27;s now more than 10 years old. and also oracle messing with the licensing
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663680' id='385624'>
<a class='timestamp' href='#385624'><time timestamp='2020-05-05T07:28:00Z'>07:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
achow101: my... experience is different
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663740' id='385625'>
<a class='timestamp' href='#385625'><time timestamp='2020-05-05T07:29:00Z'>07:29</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
i&#x27;m sure it is :) I know there were a lot of consistency and corruption issues before, but I haven&#x27;t seen a lot of those recently
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663740' id='385626'>
<a class='timestamp' href='#385626'><time timestamp='2020-05-05T07:29:00Z'>07:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
achow101: Yes. And how big would be the risk of repeating that when using another library like sqlite?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663800' id='385627'>
<a class='timestamp' href='#385627'><time timestamp='2020-05-05T07:30:00Z'>07:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
my impression is that bdb was origonally designed for large multi-process databases, where there was a dedicated and competent database mantainer who would manually perform tweaking, and upgrades
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663800' id='385628'>
<a class='timestamp' href='#385628'><time timestamp='2020-05-05T07:30:00Z'>07:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
rather than as an application storage format
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663800' id='385629'>
<a class='timestamp' href='#385629'><time timestamp='2020-05-05T07:30:00Z'>07:30</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
<b>*just send me your wallets, i&#x27;m a competent database maintainer.*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663860' id='385630'>
<a class='timestamp' href='#385630'><time timestamp='2020-05-05T07:31:00Z'>07:31</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] fanquake opened pull request #18882: build: fix -Wformat-security check when compiling with GCC (master...fix_gcc_wformat_security) <a href="https://github.com/bitcoin/bitcoin/pull/18882" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18882</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663980' id='385631'>
<a class='timestamp' href='#385631'><time timestamp='2020-05-05T07:33:00Z'>07:33</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
jonasschnelli: with sqlite itself, I would expect there to be few to no compatibility or licensing issues. For consistency and corruption, i&#x27;d trust it more than a homegrown format tbh
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663980' id='385632'>
<a class='timestamp' href='#385632'><time timestamp='2020-05-05T07:33:00Z'>07:33</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Maybe. Yes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1588663980' id='385633'>
<a class='timestamp' href='#385633'><time timestamp='2020-05-05T07:33:00Z'>07:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i believe sqlite is very well tested
<br>
</div>

<div class='talk op-msg' data-timestamp='1588664040' id='385634'>
<a class='timestamp' href='#385634'><time timestamp='2020-05-05T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Also,.. it would allow better handling of larger wallets
<br>
</div>

<div class='talk op-msg' data-timestamp='1588664040' id='385635'>
<a class='timestamp' href='#385635'><time timestamp='2020-05-05T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how so?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588664040' id='385636'>
<a class='timestamp' href='#385636'><time timestamp='2020-05-05T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
(without more homegrown code)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588664040' id='385637'>
<a class='timestamp' href='#385637'><time timestamp='2020-05-05T07:34:00Z'>07:34</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
A decent option to query stuff if we use not just k/v storage
<br>
</div>

<div class='talk op-msg' data-timestamp='1588664100' id='385638'>
<a class='timestamp' href='#385638'><time timestamp='2020-05-05T07:35:00Z'>07:35</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
right now,.. all txns are in memory... assume you just want to show the first page of txns (the most recent 10)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588664100' id='385639'>
<a class='timestamp' href='#385639'><time timestamp='2020-05-05T07:35:00Z'>07:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i think that&#x27;s just asking for problems again
<br>
</div>

<div class='talk op-msg' data-timestamp='1588664160' id='385640'>
<a class='timestamp' href='#385640'><time timestamp='2020-05-05T07:36:00Z'>07:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if we want a chance of.doing this, it can&#x27;t be tied to any other changes
<br>
</div>

<div class='talk op-msg' data-timestamp='1588664160' id='385641'>
<a class='timestamp' href='#385641'><time timestamp='2020-05-05T07:36:00Z'>07:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and should be just a straight change from one storage format to another (i.e. remain a k/v store, with the same keys and the same meaning)
<br>
</div>

<div class='talk op-msg' data-timestamp='1588664220' id='385642'>
<a class='timestamp' href='#385642'><time timestamp='2020-05-05T07:37:00Z'>07:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe later (much later...) you could start using other features, but i&#x27;m unconvinced that&#x27;s even worth it
<br>
</div>

<div class='talk op-msg' data-timestamp='1588668840' id='385643'>
<a class='timestamp' href='#385643'><time timestamp='2020-05-05T08:54:00Z'>08:54</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] hebasto opened pull request #18883: qt: Fix OpenWalletActivity::open() (master...200505-fix-win) <a href="https://github.com/bitcoin/bitcoin/pull/18883" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18883</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588678200' id='385644'>
<a class='timestamp' href='#385644'><time timestamp='2020-05-05T11:30:00Z'>11:30</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #18885: contrib: Move optimize-pngs.py script to the maintainer repo (master...2005-noOptPng) <a href="https://github.com/bitcoin/bitcoin/pull/18885" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18885</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588681980' id='385645'>
<a class='timestamp' href='#385645'><time timestamp='2020-05-05T12:33:00Z'>12:33</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] luke-jr closed pull request #18880: [0.20] wallet: Add BlockUntilSyncedToCurrentChain to dumpwallet (0.20...pr18671-0.20) <a href="https://github.com/bitcoin/bitcoin/pull/18880" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18880</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588683060' id='385646'>
<a class='timestamp' href='#385646'><time timestamp='2020-05-05T12:51:00Z'>12:51</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] vasild opened pull request #18887: build: enable -Werror=gnu (master...add_Werror_gnu) <a href="https://github.com/bitcoin/bitcoin/pull/18887" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18887</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588686660' id='385647'>
<a class='timestamp' href='#385647'><time timestamp='2020-05-05T13:51:00Z'>13:51</time></a>
&lt;<span class='nick nick-8'> promag</span>&gt;
sipa: mind taking a look at #18863?
<br>
</div>

<div class='talk op-msg' data-timestamp='1588686660' id='385648'>
<a class='timestamp' href='#385648'><time timestamp='2020-05-05T13:51:00Z'>13:51</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18863" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18863</a> | refactor: Drop unused CScriptVisitor return type by promag · Pull Request #18863 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1588686840' id='385649'>
<a class='timestamp' href='#385649'><time timestamp='2020-05-05T13:54:00Z'>13:54</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] promag closed pull request #18246: wip: gui: Drop connectSlotsByName usage (master...2020-03-drop-connectslotsbyName) <a href="https://github.com/bitcoin/bitcoin/pull/18246" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18246</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588687680' id='385650'>
<a class='timestamp' href='#385650'><time timestamp='2020-05-05T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 3 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/ec79b5f86b22...52ce396b2a47" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/ec79b5f86b22...52ce396b2a47</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588687680' id='385651'>
<a class='timestamp' href='#385651'><time timestamp='2020-05-05T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 708e3c7 fanquake: valgrind: remove rest_blockhash_by_height suppression
<br>
</div>

<div class='talk op-msg' data-timestamp='1588687680' id='385652'>
<a class='timestamp' href='#385652'><time timestamp='2020-05-05T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master d7120f7 fanquake: valgrind : remove duplicate BCLog::Logger suppression
<br>
</div>

<div class='talk op-msg' data-timestamp='1588687680' id='385653'>
<a class='timestamp' href='#385653'><time timestamp='2020-05-05T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 52ce396 MarcoFalke: Merge #18879: valgrind: remove outdated suppressions
<br>
</div>

<div class='talk op-msg' data-timestamp='1588687680' id='385654'>
<a class='timestamp' href='#385654'><time timestamp='2020-05-05T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #18879: valgrind: remove outdated suppressions (master...remove_outdated_supp) <a href="https://github.com/bitcoin/bitcoin/pull/18879" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18879</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588689720' id='385655'>
<a class='timestamp' href='#385655'><time timestamp='2020-05-05T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke pushed 2 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/52ce396b2a47...fbd522721cb8" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/52ce396b2a47...fbd522721cb8</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588689720' id='385656'>
<a class='timestamp' href='#385656'><time timestamp='2020-05-05T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fa13090 MarcoFalke: contrib: Remove optimize-pngs.py script, which lives in the maintainer rep...
<br>
</div>

<div class='talk op-msg' data-timestamp='1588689720' id='385657'>
<a class='timestamp' href='#385657'><time timestamp='2020-05-05T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master fbd5227 MarcoFalke: Merge #18885: contrib: Move optimize-pngs.py script to the maintainer repo...
<br>
</div>

<div class='talk op-msg' data-timestamp='1588689720' id='385658'>
<a class='timestamp' href='#385658'><time timestamp='2020-05-05T14:42:00Z'>14:42</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke merged pull request #18885: contrib: Move optimize-pngs.py script to the maintainer repo (master...2005-noOptPng) <a href="https://github.com/bitcoin/bitcoin/pull/18885" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18885</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588692600' id='385659'>
<a class='timestamp' href='#385659'><time timestamp='2020-05-05T15:30:00Z'>15:30</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] MarcoFalke opened pull request #18888: test: Remove RPCOverloadWrapper boilerplate (master...2005-testNoBoilerplate) <a href="https://github.com/bitcoin/bitcoin/pull/18888" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18888</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588701600' id='385660'>
<a class='timestamp' href='#385660'><time timestamp='2020-05-05T18:00:00Z'>18:00</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] robot-visions opened pull request #18890: test: disconnect_nodes should warn if nodes were already disconnected (master...disconnect-nodes) <a href="https://github.com/bitcoin/bitcoin/pull/18890" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18890</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588709160' id='385661'>
<a class='timestamp' href='#385661'><time timestamp='2020-05-05T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
anyone ever seen this before? /usr/include/db4.8/db_cxx.h:59:10: fatal error: iostream.h: No such file or directory
<br>
</div>

<div class='talk op-msg' data-timestamp='1588711020' id='385662'>
<a class='timestamp' href='#385662'><time timestamp='2020-05-05T20:37:00Z'>20:37</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
luke-jr: i may have seen that once or twice...
<br>
</div>

<div class='talk op-msg' data-timestamp='1588711080' id='385663'>
<a class='timestamp' href='#385663'><time timestamp='2020-05-05T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
hmm, looks like bdb got installed without C++ support, yet still installs the header :x
<br>
</div>

<div class='talk op-msg' data-timestamp='1588711080' id='385664'>
<a class='timestamp' href='#385664'><time timestamp='2020-05-05T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-14'> jonatack</span>&gt;
testing #18870 rn with bdb 5.3
<br>
</div>

<div class='talk op-msg' data-timestamp='1588711080' id='385665'>
<a class='timestamp' href='#385665'><time timestamp='2020-05-05T20:38:00Z'>20:38</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/18870" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/18870</a> | build: Allow BDB between 4.7 and 5.3 without --with-incompatible-bdb by achow101 · Pull Request #18870 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1588721220' id='385666'>
<a class='timestamp' href='#385666'><time timestamp='2020-05-05T23:27:00Z'>23:27</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] promag opened pull request #18894: gui: Fix manual coin control with multiple wallets loaded (master...2019-11-fix-15725.2) <a href="https://github.com/bitcoin/bitcoin/pull/18894" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/18894</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588721460' id='385667'>
<a class='timestamp' href='#385667'><time timestamp='2020-05-05T23:31:00Z'>23:31</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] promag closed pull request #17457: gui: Fix manual coin control with multiple wallets loaded (master...2019-11-fix-15725) <a href="https://github.com/bitcoin/bitcoin/pull/17457" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/17457</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588721820' id='385668'>
<a class='timestamp' href='#385668'><time timestamp='2020-05-05T23:37:00Z'>23:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] meshcollider pushed 6 commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/fbd522721cb8...60091d20f9bb" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/fbd522721cb8...60091d20f9bb</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1588721820' id='385669'>
<a class='timestamp' href='#385669'><time timestamp='2020-05-05T23:37:00Z'>23:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 2b9cba2 Russell Yanofsky: Remove CWalletTx merging logic from AddToWallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1588721820' id='385670'>
<a class='timestamp' href='#385670'><time timestamp='2020-05-05T23:37:00Z'>23:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master bd2fbc7 Russell Yanofsky: Get rid of unneeded CWalletTx::Init parameter
<br>
</div>

<div class='talk op-msg' data-timestamp='1588721820' id='385671'>
<a class='timestamp' href='#385671'><time timestamp='2020-05-05T23:37:00Z'>23:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 65b9d8f Russell Yanofsky: Avoid copying CWalletTx in LoadToWallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1588721940' id='385672'>
<a class='timestamp' href='#385672'><time timestamp='2020-05-05T23:39:00Z'>23:39</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] meshcollider merged pull request #9381: Remove CWalletTx merging logic from AddToWallet (master...pr/atw-nomerge) <a href="https://github.com/bitcoin/bitcoin/pull/9381" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9381</a>
<br>
</div>

</div>
</section>

</body>
</html>
