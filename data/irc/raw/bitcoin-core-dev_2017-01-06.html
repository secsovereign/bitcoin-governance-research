<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-01-06
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-01-06' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:25 UTC</pre>
<pre><a href="/bitcoin-core-dev/2016-12-06">&lt;</a><span class='header'>   January 2017   </span><a href="/bitcoin-core-dev/2017-02-06">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A; <a class="" href="/bitcoin-core-dev/2017-01-01">1</a>  <a class="" href="/bitcoin-core-dev/2017-01-02">2</a>  <a class="" href="/bitcoin-core-dev/2017-01-03">3</a>  <a class="" href="/bitcoin-core-dev/2017-01-04">4</a>  <a class="" href="/bitcoin-core-dev/2017-01-05">5</a>  <a class="current" href="/bitcoin-core-dev/2017-01-06">6</a>  <a class="" href="/bitcoin-core-dev/2017-01-07">7</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-01-08">8</a>  <a class="" href="/bitcoin-core-dev/2017-01-09">9</a> <a class="" href="/bitcoin-core-dev/2017-01-10">10</a> <a class="" href="/bitcoin-core-dev/2017-01-11">11</a> <a class="" href="/bitcoin-core-dev/2017-01-12">12</a> <a class="" href="/bitcoin-core-dev/2017-01-13">13</a> <a class="" href="/bitcoin-core-dev/2017-01-14">14</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-01-15">15</a> <a class="" href="/bitcoin-core-dev/2017-01-16">16</a> <a class="" href="/bitcoin-core-dev/2017-01-17">17</a> <a class="" href="/bitcoin-core-dev/2017-01-18">18</a> <a class="" href="/bitcoin-core-dev/2017-01-19">19</a> <a class="" href="/bitcoin-core-dev/2017-01-20">20</a> <a class="" href="/bitcoin-core-dev/2017-01-21">21</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-01-22">22</a> <a class="" href="/bitcoin-core-dev/2017-01-23">23</a> <a class="" href="/bitcoin-core-dev/2017-01-24">24</a> <a class="" href="/bitcoin-core-dev/2017-01-25">25</a> <a class="" href="/bitcoin-core-dev/2017-01-26">26</a> <a class="" href="/bitcoin-core-dev/2017-01-27">27</a> <a class="" href="/bitcoin-core-dev/2017-01-28">28</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-01-29">29</a> <a class="" href="/bitcoin-core-dev/2017-01-30">30</a> <a class="" href="/bitcoin-core-dev/2017-01-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1483664220' id='521525'>
<a class='timestamp' href='#521525'><time timestamp='2017-01-06T00:57:00Z'>00:57</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
sipa: I see your point. paveljanik: are you already working on a PR, or shall I?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483664220' id='521526'>
<a class='timestamp' href='#521526'><time timestamp='2017-01-06T00:57:00Z'>00:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
16:53 &lt; Michail1&gt; gmaxwell - Mental note:  bitcoin-0.13.2-win64-setup.exe is detected by Norton (File Insight) as not safe and  automatically removes it.  (Not that you can do anything about it, just letting you know.)  I am confirming the prior  versions are not auto deleted.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483665300' id='521527'>
<a class='timestamp' href='#521527'><time timestamp='2017-01-06T01:15:00Z'>01:15</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] JeremyRubin opened pull request #9480: [trivial] De-duplicate SignatureCacheHasher (master...refactor-signaturecachehasher-visibility) <a href="https://github.com/bitcoin/bitcoin/pull/9480" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9480</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1483665900' id='521528'>
<a class='timestamp' href='#521528'><time timestamp='2017-01-06T01:25:00Z'>01:25</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] kallewoof closed pull request #9478: Trivial refactor: BOOST_FOREACH(a, b) -&gt; for (a : b) (master...replace-boostforeach) <a href="https://github.com/bitcoin/bitcoin/pull/9478" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9478</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1483669200' id='521529'>
<a class='timestamp' href='#521529'><time timestamp='2017-01-06T02:20:00Z'>02:20</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
sipa: i have 4 nodes (n1-n4) partitioned into two nets (n12 n34). n2 and n3 both spend the same UTXO, then 6 blocks are generated on each side after which the nets are merged and an additional block is generated on n4 causing the n3 transaction to take precedence, knocking the n1 transaction out. this is sometimes listed in listsinceblock and sometimes not.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483669260' id='521530'>
<a class='timestamp' href='#521530'><time timestamp='2017-01-06T02:21:00Z'>02:21</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
sipa: I tried putting a 1 sec delay after the generate to see if there was some wallet fiddling that did not finish in time but this did not change the outcome. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1483669860' id='521531'>
<a class='timestamp' href='#521531'><time timestamp='2017-01-06T02:31:00Z'>02:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
listed in listsinceblock on which side?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483669860' id='521532'>
<a class='timestamp' href='#521532'><time timestamp='2017-01-06T02:31:00Z'>02:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
and which block are you listing since?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483670040' id='521533'>
<a class='timestamp' href='#521533'><time timestamp='2017-01-06T02:34:00Z'>02:34</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
I am calling listsinceblock from n1
<br>
</div>

<div class='talk op-msg' data-timestamp='1483670160' id='521534'>
<a class='timestamp' href='#521534'><time timestamp='2017-01-06T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
What&#x27;s fascinating is that, for the MISSING case (i.e. when it doesn&#x27;t list the now-orphaned transaction originating from n2), n1 has this in the debug.log file, and for the present case it does not have this:
<br>
</div>

<div class='talk op-msg' data-timestamp='1483670160' id='521535'>
<a class='timestamp' href='#521535'><time timestamp='2017-01-06T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
2017-01-05 11:04:46 Transaction efd9e5d4daf8d47a2cc07db0e153513b2d02da2e031d3f2398f804b2a3d7ba03 (in block 2fd09b11259689722ec38873aeedc7e27753a587f66a542bb2ae64546b17943f) conflicts with wallet transaction 5c717b80ee4e4909e9f4a15bfacd728c3be8c1e75d6eed83a3e9324f6b9ea38c (both spend f72d9d38468c40777640e5b7731dab76cd961ee60cc93198b2ec706c21fb1801:0)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483670400' id='521536'>
<a class='timestamp' href='#521536'><time timestamp='2017-01-06T02:40:00Z'>02:40</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
I guess since the transaction was overridden by another one, &#x27;orphaned&#x27; is probably not the right term. &#x27;Invalidated&#x27;? &#x27;Betrayed&#x27;? Anyway, the tx that lost the UTXO race.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483670520' id='521537'>
<a class='timestamp' href='#521537'><time timestamp='2017-01-06T02:42:00Z'>02:42</time></a>
&lt;<span class='nick nick-11'> kallewoof</span>&gt;
A bit verbose but you can compare the two cases here: <a href="http://pastebin.com/EqupZuFM" class="link" target="_blank">http://pastebin.com/EqupZuFM</a> (missing) and here: <a href="http://pastebin.com/Phy6mN3G" class="link" target="_blank">http://pastebin.com/Phy6mN3G</a> (present)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483675320' id='521538'>
<a class='timestamp' href='#521538'><time timestamp='2017-01-06T04:02:00Z'>04:02</time></a>
&lt;<span class='nick nick-4'> phantomcircuit</span>&gt;
kallewoof, conflicted
<br>
</div>

<div class='talk op-msg' data-timestamp='1483680900' id='521539'>
<a class='timestamp' href='#521539'><time timestamp='2017-01-06T05:35:00Z'>05:35</time></a>
&lt;<span class='nick nick-15'> paveljanik</span>&gt;
luke-jr, I&#x27;m not (I was sleeping ;-)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483684320' id='521540'>
<a class='timestamp' href='#521540'><time timestamp='2017-01-06T06:32:00Z'>06:32</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos:  par=4 synctime of 24453.715550 (all signatures checked), and par=max (24 actual core host) 12182.296543...  so yea, I suppose it&#x27;s scaling better than it used to.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483684380' id='521541'>
<a class='timestamp' href='#521541'><time timestamp='2017-01-06T06:33:00Z'>06:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(these figures with dbcache=2000)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483696080' id='521542'>
<a class='timestamp' href='#521542'><time timestamp='2017-01-06T09:48:00Z'>09:48</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli closed pull request #7826: [Qt] show conflicts of unconfirmed transactions in the UI (master...2016/04/ui_mem_cflct) <a href="https://github.com/bitcoin/bitcoin/pull/7826" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7826</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1483696140' id='521543'>
<a class='timestamp' href='#521543'><time timestamp='2017-01-06T09:49:00Z'>09:49</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli closed pull request #7817: [Qt] attribute replaceable (RBF) transactions (master...2016/04/qt_rbf) <a href="https://github.com/bitcoin/bitcoin/pull/7817" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7817</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1483696980' id='521544'>
<a class='timestamp' href='#521544'><time timestamp='2017-01-06T10:03:00Z'>10:03</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli opened pull request #9481: [Qt] Show more significant warning if we fall back to the default fee (master...2017/01/fee_warning) <a href="https://github.com/bitcoin/bitcoin/pull/9481" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9481</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1483697580' id='521545'>
<a class='timestamp' href='#521545'><time timestamp='2017-01-06T10:13:00Z'>10:13</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
jonasschnelli: I&#x27;m willing to test those this weekend...
<br>
</div>

<div class='talk op-msg' data-timestamp='1483697640' id='521546'>
<a class='timestamp' href='#521546'><time timestamp='2017-01-06T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
btcdrak: They need overhaul from my side, don&#x27;t bother
<br>
</div>

<div class='talk op-msg' data-timestamp='1483697640' id='521547'>
<a class='timestamp' href='#521547'><time timestamp='2017-01-06T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
ok     
<br>
</div>

<div class='talk op-msg' data-timestamp='1483697640' id='521548'>
<a class='timestamp' href='#521548'><time timestamp='2017-01-06T10:14:00Z'>10:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I&#x27;ll re-base overhaul them as soon as they rise on my pile-of-work
<br>
</div>

<div class='talk op-msg' data-timestamp='1483710540' id='521549'>
<a class='timestamp' href='#521549'><time timestamp='2017-01-06T13:49:00Z'>13:49</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Request for review: #9294
<br>
</div>

<div class='talk op-msg' data-timestamp='1483710540' id='521550'>
<a class='timestamp' href='#521550'><time timestamp='2017-01-06T13:49:00Z'>13:49</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9294" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9294</a> | Use internal HD chain for change outputs (hd split) by jonasschnelli · Pull Request #9294 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1483710900' id='521551'>
<a class='timestamp' href='#521551'><time timestamp='2017-01-06T13:55:00Z'>13:55</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: re: CreateTransaction logging, I think thats a great idea.  If needed we could even make fee estimation take a bool to output more debugging information for the times its called via CreateTransaction.  but even without that, just having the basic info would be nice.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483712580' id='521552'>
<a class='timestamp' href='#521552'><time timestamp='2017-01-06T14:23:00Z'>14:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Idea: would it be stupid to use the first 16 addrs of the dns-seeder DNS response as a &quot;hidden&quot; secp256k1 compact sig for the next 16 addrs of a complete response of 32 addrs?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483712580' id='521553'>
<a class='timestamp' href='#521553'><time timestamp='2017-01-06T14:23:00Z'>14:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Then ship apps with an ec pubkey per seeder (that supports signed dns responses)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483712640' id='521554'>
<a class='timestamp' href='#521554'><time timestamp='2017-01-06T14:24:00Z'>14:24</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think this approach would be a simple hack and much less work then switching to DNSSEC
<br>
</div>

<div class='talk op-msg' data-timestamp='1483712760' id='521555'>
<a class='timestamp' href='#521555'><time timestamp='2017-01-06T14:26:00Z'>14:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: i believw intermediate resolvers can reorder/filter responses
<br>
</div>

<div class='talk op-msg' data-timestamp='1483712940' id='521556'>
<a class='timestamp' href='#521556'><time timestamp='2017-01-06T14:29:00Z'>14:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
s/can/constantly/
<br>
</div>

<div class='talk op-msg' data-timestamp='1483713000' id='521557'>
<a class='timestamp' href='#521557'><time timestamp='2017-01-06T14:30:00Z'>14:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
a lot of intermediate resolvers trim the results to just a few,  and many (most?) reorder them (e.g. under the assumption that the final device will use the first, then yielding a cached response they reorder to avoid overloading the source).
<br>
</div>

<div class='talk op-msg' data-timestamp='1483714260' id='521558'>
<a class='timestamp' href='#521558'><time timestamp='2017-01-06T14:51:00Z'>14:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
hmm... that unfortunate.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483719120' id='521559'>
<a class='timestamp' href='#521559'><time timestamp='2017-01-06T16:12:00Z'>16:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
We do we try to connect to the dnsseeder on 8333? One-shot getaddr?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483719240' id='521560'>
<a class='timestamp' href='#521560'><time timestamp='2017-01-06T16:14:00Z'>16:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
?     
<br>
</div>

<div class='talk op-msg' data-timestamp='1483719240' id='521561'>
<a class='timestamp' href='#521561'><time timestamp='2017-01-06T16:14:00Z'>16:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you mean why does the oneshot concept exist?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483719300' id='521562'>
<a class='timestamp' href='#521562'><time timestamp='2017-01-06T16:15:00Z'>16:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
if you&#x27;re connecting over Tor you shouldn&#x27;t do DNS lookups, as they&#x27;d leak your traffic
<br>
</div>

<div class='talk op-msg' data-timestamp='1483719300' id='521563'>
<a class='timestamp' href='#521563'><time timestamp='2017-01-06T16:15:00Z'>16:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: That was the problem! Dam Qt settings... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1483719360' id='521564'>
<a class='timestamp' href='#521564'><time timestamp='2017-01-06T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Now I also know why my SPV block downloads where slower then expected. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483719360' id='521565'>
<a class='timestamp' href='#521565'><time timestamp='2017-01-06T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so instead we &quot;connect&quot; to the seeder, which in practice means we&#x27;re connecting to a Tor exit router, and make the router resoove the seeder, and connect tovit
<br>
</div>

<div class='talk op-msg' data-timestamp='1483719360' id='521566'>
<a class='timestamp' href='#521566'><time timestamp='2017-01-06T16:16:00Z'>16:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we don&#x27;t actually learn what IP we&#x27;re connecting to in that case
<br>
</div>

<div class='talk op-msg' data-timestamp='1483720680' id='521567'>
<a class='timestamp' href='#521567'><time timestamp='2017-01-06T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa pushed 4 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/f646275b90b1...a55716abe566" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/f646275b90b1...a55716abe566</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1483720680' id='521568'>
<a class='timestamp' href='#521568'><time timestamp='2017-01-06T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 50bd12c Gregory Maxwell: Break addnode out from the outbound connection limits....
<br>
</div>

<div class='talk op-msg' data-timestamp='1483720680' id='521569'>
<a class='timestamp' href='#521569'><time timestamp='2017-01-06T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 90f13e1 Gregory Maxwell: Add release notes for addnode changes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483720680' id='521570'>
<a class='timestamp' href='#521570'><time timestamp='2017-01-06T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 032ba3f Gregory Maxwell: RPC help documentation for addnode peerinfo....
<br>
</div>

<div class='talk op-msg' data-timestamp='1483720680' id='521571'>
<a class='timestamp' href='#521571'><time timestamp='2017-01-06T16:38:00Z'>16:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #9319: Break addnode out from the outbound connection limits. (master...addnode_own_count) <a href="https://github.com/bitcoin/bitcoin/pull/9319" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9319</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1483721040' id='521572'>
<a class='timestamp' href='#521572'><time timestamp='2017-01-06T16:44:00Z'>16:44</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jonasschnelli opened pull request #9483: Complete hybrid full block SPV mode (master...2017/01/spv) <a href="https://github.com/bitcoin/bitcoin/pull/9483" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9483</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1483721100' id='521573'>
<a class='timestamp' href='#521573'><time timestamp='2017-01-06T16:45:00Z'>16:45</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
\o/  YAYYY
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722480' id='521574'>
<a class='timestamp' href='#521574'><time timestamp='2017-01-06T17:08:00Z'>17:08</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
cfields: just finished reading through 9441, didn&#x27;t understand your last comment on the PR, you are going to change it back to what?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722540' id='521575'>
<a class='timestamp' href='#521575'><time timestamp='2017-01-06T17:09:00Z'>17:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: the current PR makes ProcessMessages only process one message at a timre
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722540' id='521576'>
<a class='timestamp' href='#521576'><time timestamp='2017-01-06T17:09:00Z'>17:09</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i don&#x27;t think you need to change it (now) i think its fairly clear any edge case change from current behavior is a net benefit
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722540' id='521577'>
<a class='timestamp' href='#521577'><time timestamp='2017-01-06T17:09:00Z'>17:09</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: but thats what it did before
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722600' id='521578'>
<a class='timestamp' href='#521578'><time timestamp='2017-01-06T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes     
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722600' id='521579'>
<a class='timestamp' href='#521579'><time timestamp='2017-01-06T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so you think he should change it to process more than one?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722600' id='521580'>
<a class='timestamp' href='#521580'><time timestamp='2017-01-06T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;d be more confortable with that
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722660' id='521581'>
<a class='timestamp' href='#521581'><time timestamp='2017-01-06T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
you&#x27;d be more comfortable with a change in behavior?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722660' id='521582'>
<a class='timestamp' href='#521582'><time timestamp='2017-01-06T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
that seems like the change to me, possibly a good one, but the PR seems more clearly correct without doing that b/c it doesn&#x27;t require thinking about that
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722660' id='521583'>
<a class='timestamp' href='#521583'><time timestamp='2017-01-06T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I mean I agree we should probably do that in the furture, but why change it now?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722660' id='521584'>
<a class='timestamp' href='#521584'><time timestamp='2017-01-06T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: +!
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722660' id='521585'>
<a class='timestamp' href='#521585'><time timestamp='2017-01-06T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
1     
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722660' id='521586'>
<a class='timestamp' href='#521586'><time timestamp='2017-01-06T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;m confused
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722660' id='521587'>
<a class='timestamp' href='#521587'><time timestamp='2017-01-06T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the current code processes multiple messages at once
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722660' id='521588'>
<a class='timestamp' href='#521588'><time timestamp='2017-01-06T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
the pr does not change the behavior except for some stupid weird edge cases
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722660' id='521589'>
<a class='timestamp' href='#521589'><time timestamp='2017-01-06T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
his current PR changes that to only process one at a time
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722660' id='521590'>
<a class='timestamp' href='#521590'><time timestamp='2017-01-06T17:11:00Z'>17:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
specifically, currently, if you have a message with a bad hash, it will process more than once
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722720' id='521591'>
<a class='timestamp' href='#521591'><time timestamp='2017-01-06T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
morcos&gt; sipa: but thats what it did before  (meaning master does not process more than one)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722720' id='521592'>
<a class='timestamp' href='#521592'><time timestamp='2017-01-06T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but the current code does NOT process more than one message if it calls ProcessMessage
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722720' id='521593'>
<a class='timestamp' href='#521593'><time timestamp='2017-01-06T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: heh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722720' id='521594'>
<a class='timestamp' href='#521594'><time timestamp='2017-01-06T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(also the pr just disconnects on a bad hash, which I think is a change, but a good one imo)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722720' id='521595'>
<a class='timestamp' href='#521595'><time timestamp='2017-01-06T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
master does process more than one, unless it&#x27;s a block
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722720' id='521596'>
<a class='timestamp' href='#521596'><time timestamp='2017-01-06T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
no     
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722720' id='521597'>
<a class='timestamp' href='#521597'><time timestamp='2017-01-06T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
or the send buffer is full
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722720' id='521598'>
<a class='timestamp' href='#521598'><time timestamp='2017-01-06T17:12:00Z'>17:12</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
it does not
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722780' id='521599'>
<a class='timestamp' href='#521599'><time timestamp='2017-01-06T17:13:00Z'>17:13</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I had the same misunderstanding initially
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722840' id='521600'>
<a class='timestamp' href='#521600'><time timestamp='2017-01-06T17:14:00Z'>17:14</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
line 2566 in net_processing.cpp on master i think
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722840' id='521601'>
<a class='timestamp' href='#521601'><time timestamp='2017-01-06T17:14:00Z'>17:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok, i was not aware of that
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722900' id='521602'>
<a class='timestamp' href='#521602'><time timestamp='2017-01-06T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but that seems to be a bug
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722900' id='521603'>
<a class='timestamp' href='#521603'><time timestamp='2017-01-06T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
:) i think cfields tried to explain it multiple times
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722900' id='521604'>
<a class='timestamp' href='#521604'><time timestamp='2017-01-06T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think we all agree it may be better to process multiple messages, but it seems to me to make more sense to do that as a follow on PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722960' id='521605'>
<a class='timestamp' href='#521605'><time timestamp='2017-01-06T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(and the overhead of not doing so is (likely) not too terrible)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722960' id='521606'>
<a class='timestamp' href='#521606'><time timestamp='2017-01-06T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(except for the bug fixed by #9315)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483722960' id='521607'>
<a class='timestamp' href='#521607'><time timestamp='2017-01-06T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9315" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9315</a> | Request announcement by cmpctblock AFTER requesting cmpctblock/blocktxn by rebroad · Pull Request #9315 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723080' id='521608'>
<a class='timestamp' href='#521608'><time timestamp='2017-01-06T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
we need to think carefully if there could be negative situations in the other direction..  you&#x27;re about to announce blocks to all your peers or respond to their getblocktxns messages and some other peer manages to tie you up with a slew of expensive to process received msgs
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723080' id='521609'>
<a class='timestamp' href='#521609'><time timestamp='2017-01-06T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
heh, fun github bug - if you &quot;start a review&quot; and then &quot;add single comment&quot;, it will publish all pending comments
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723140' id='521610'>
<a class='timestamp' href='#521610'><time timestamp='2017-01-06T17:19:00Z'>17:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
on a different page?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723200' id='521611'>
<a class='timestamp' href='#521611'><time timestamp='2017-01-06T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ok, so it seems i had completely forgotten about #3180 (&gt; 3 years old)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723200' id='521612'>
<a class='timestamp' href='#521612'><time timestamp='2017-01-06T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/3180" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/3180</a> | Reduce latency in network processing by pstratem · Pull Request #3180 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723200' id='521613'>
<a class='timestamp' href='#521613'><time timestamp='2017-01-06T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
you dont /usually/ forget prs from 3 years ago???!
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723200' id='521614'>
<a class='timestamp' href='#521614'><time timestamp='2017-01-06T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
man, I cant remember prs from 6 months ago
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723200' id='521615'>
<a class='timestamp' href='#521615'><time timestamp='2017-01-06T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: heh, i commented on it in about ~5 places :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723200' id='521616'>
<a class='timestamp' href='#521616'><time timestamp='2017-01-06T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i think clearly we should do SOMETHING smarter, i mean if a block has been announced to you and is sitting in yoru receive queue, seems silly to announce it back just b/c you haven&#x27;t read it...  
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723260' id='521617'>
<a class='timestamp' href='#521617'><time timestamp='2017-01-06T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: i thought you just wanted to minimize the diff here
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723260' id='521618'>
<a class='timestamp' href='#521618'><time timestamp='2017-01-06T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: you said &quot;in nearly all cases, only one message is processed&quot; - i thought that referred to cases where the buffer was full or we&#x27;re processing blocks - the pre-3180 behaviour
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723260' id='521619'>
<a class='timestamp' href='#521619'><time timestamp='2017-01-06T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and i didn&#x27;t understand why you&#x27;d be changing it
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723320' id='521620'>
<a class='timestamp' href='#521620'><time timestamp='2017-01-06T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so do we all agree that cfields should leave 9441 alone, and any further change should be in a separate PR?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723320' id='521621'>
<a class='timestamp' href='#521621'><time timestamp='2017-01-06T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723320' id='521622'>
<a class='timestamp' href='#521622'><time timestamp='2017-01-06T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: ah, sorry. the only cases for processing multiple are for bad hash, or bad header
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723380' id='521623'>
<a class='timestamp' href='#521623'><time timestamp='2017-01-06T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i was trying to ask &quot;why are you changing behaviour&quot; - it would have been clearer if you just had said &quot;it doesn&#x27;t&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723380' id='521624'>
<a class='timestamp' href='#521624'><time timestamp='2017-01-06T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
:)     
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723380' id='521625'>
<a class='timestamp' href='#521625'><time timestamp='2017-01-06T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
s/only cases/only preexisting cases were/
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723380' id='521626'>
<a class='timestamp' href='#521626'><time timestamp='2017-01-06T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
luke-jr: I first was using the term &quot;non-validation mode&quot;. But than – after reading satoshis whitepaper again – considered to use the name &quot;Simple Payment Verification&quot;.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723380' id='521627'>
<a class='timestamp' href='#521627'><time timestamp='2017-01-06T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
fucking engineers - always precise.....
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723380' id='521628'>
<a class='timestamp' href='#521628'><time timestamp='2017-01-06T17:23:00Z'>17:23</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
sorry, i was probably misreading what you said
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723440' id='521629'>
<a class='timestamp' href='#521629'><time timestamp='2017-01-06T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
or something.. nm
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723440' id='521630'>
<a class='timestamp' href='#521630'><time timestamp='2017-01-06T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: it&#x27;s mentioned in a bunch of places and at one point you said &quot;I certainly noticed it only processed one message at a time&quot;, so i thought we were on the same page
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723440' id='521631'>
<a class='timestamp' href='#521631'><time timestamp='2017-01-06T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
no worries though, sounds like we&#x27;re all good now
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723440' id='521632'>
<a class='timestamp' href='#521632'><time timestamp='2017-01-06T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
cfields: i&#x27;ll review again after you fix outstanding comments
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723440' id='521633'>
<a class='timestamp' href='#521633'><time timestamp='2017-01-06T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: i noticed that your PR changed it to only processing one message at a time
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723500' id='521634'>
<a class='timestamp' href='#521634'><time timestamp='2017-01-06T17:25:00Z'>17:25</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i didn&#x27;t realize that that was not a change
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723500' id='521635'>
<a class='timestamp' href='#521635'><time timestamp='2017-01-06T17:25:00Z'>17:25</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: ah, heh. i misread you too then :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723500' id='521636'>
<a class='timestamp' href='#521636'><time timestamp='2017-01-06T17:25:00Z'>17:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i&#x27;m not sure i 100% understand the wait_until condition,  is the idea that you don&#x27;t want spurious wakeups to cause another loop?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723500' id='521637'>
<a class='timestamp' href='#521637'><time timestamp='2017-01-06T17:25:00Z'>17:25</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ok. I rebased this morning to address all nits and keep the loop in. Will back that out and push.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723560' id='521638'>
<a class='timestamp' href='#521638'><time timestamp='2017-01-06T17:26:00Z'>17:26</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
anyway - misunderstandings in both directions. i should have read the code, instead of making (apparently 3-year old) assumptions about the code
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723560' id='521639'>
<a class='timestamp' href='#521639'><time timestamp='2017-01-06T17:26:00Z'>17:26</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: sure, no worries. It&#x27;s not obvious behavior _at all_.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723620' id='521640'>
<a class='timestamp' href='#521640'><time timestamp='2017-01-06T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: the condition lets us wake the processor from the message handler thread when a new message comes in
<br>
</div>

<div class='talk op-msg' data-timestamp='1483723620' id='521641'>
<a class='timestamp' href='#521641'><time timestamp='2017-01-06T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
and yea, avoids spurious wakes too
<br>
</div>

<div class='talk op-msg' data-timestamp='1483724280' id='521642'>
<a class='timestamp' href='#521642'><time timestamp='2017-01-06T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa pushed 3 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/a55716abe566...46b249e578e8" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/a55716abe566...46b249e578e8</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1483724280' id='521643'>
<a class='timestamp' href='#521643'><time timestamp='2017-01-06T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 9479f8d Jonas Schnelli: Allow shutdown during LoadMempool, dump only when necessary
<br>
</div>

<div class='talk op-msg' data-timestamp='1483724280' id='521644'>
<a class='timestamp' href='#521644'><time timestamp='2017-01-06T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 325e400 Jonas Schnelli: [Qt] Do proper shutdown
<br>
</div>

<div class='talk op-msg' data-timestamp='1483724280' id='521645'>
<a class='timestamp' href='#521645'><time timestamp='2017-01-06T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 46b249e Pieter Wuille: Merge #9408: Allow shutdown during LoadMempool, dump only when necessary...
<br>
</div>

<div class='talk op-msg' data-timestamp='1483724280' id='521646'>
<a class='timestamp' href='#521646'><time timestamp='2017-01-06T17:38:00Z'>17:38</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #9408: Allow shutdown during LoadMempool, dump only when necessary (master...2016/12/memp_dump) <a href="https://github.com/bitcoin/bitcoin/pull/9408" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9408</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1483724820' id='521647'>
<a class='timestamp' href='#521647'><time timestamp='2017-01-06T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
cfields: ah yes, ok good..  cool.  i like the new design...
<br>
</div>

<div class='talk op-msg' data-timestamp='1483724880' id='521648'>
<a class='timestamp' href='#521648'><time timestamp='2017-01-06T17:48:00Z'>17:48</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: great, thanks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483725180' id='521649'>
<a class='timestamp' href='#521649'><time timestamp='2017-01-06T17:53:00Z'>17:53</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
BlueMatt: how&#x27;s this look now?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483725420' id='521650'>
<a class='timestamp' href='#521650'><time timestamp='2017-01-06T17:57:00Z'>17:57</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: updated. Very little changed from before, mostly just fixed some things in the interim commits to be more correct for easier review
<br>
</div>

<div class='talk op-msg' data-timestamp='1483728000' id='521651'>
<a class='timestamp' href='#521651'><time timestamp='2017-01-06T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-9'> brg444</span>&gt;
can someone confirm how many iterations of segwit testnet there were?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483728060' id='521652'>
<a class='timestamp' href='#521652'><time timestamp='2017-01-06T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
4, i believe
<br>
</div>

<div class='talk op-msg' data-timestamp='1483728120' id='521653'>
<a class='timestamp' href='#521653'><time timestamp='2017-01-06T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-9'> brg444</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730280' id='521654'>
<a class='timestamp' href='#521654'><time timestamp='2017-01-06T19:18:00Z'>19:18</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
cfields: one more question on that wait_until..  lets say a block message comes in, takes you a while to process..  if any peers sent you a new message in the interim, you won&#x27;t wait b/c of fMsgProcWake correct?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730340' id='521655'>
<a class='timestamp' href='#521655'><time timestamp='2017-01-06T19:19:00Z'>19:19</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
But if no peers sent you a message, you will announce quickly to peers N+1 -&gt; MAX_CONNECTIONS, but then sleep up to 100ms before announcing to peers 1 -&gt; N-1 ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730400' id='521656'>
<a class='timestamp' href='#521656'><time timestamp='2017-01-06T19:20:00Z'>19:20</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: Processmessage <u>_currently_</u> processes one at a time, there is a break stuck in the bottom of the loop.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730460' id='521657'>
<a class='timestamp' href='#521657'><time timestamp='2017-01-06T19:21:00Z'>19:21</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I thought I had seen somewhere talk about making the wait_until time be 100ms from start of loop and not end, or perhaps we should add a WakeMessageHandler for new tips in particular?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730580' id='521658'>
<a class='timestamp' href='#521658'><time timestamp='2017-01-06T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: I opened a PR that did those things, and also explicitly asked about the fact that it changed the message handling back to process multiple messages. After no one replied for a bit I just changed it back to one message at a time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730580' id='521659'>
<a class='timestamp' href='#521659'><time timestamp='2017-01-06T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: yes, that would probably make sense. I think gmaxwell&#x27;s change included that
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730580' id='521660'>
<a class='timestamp' href='#521660'><time timestamp='2017-01-06T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
Then after cfields said he preferred his net refactors I closed it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730580' id='521661'>
<a class='timestamp' href='#521661'><time timestamp='2017-01-06T19:23:00Z'>19:23</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
it didn&#x27;t really make that much of a difference when the other problems were fixed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730640' id='521662'>
<a class='timestamp' href='#521662'><time timestamp='2017-01-06T19:24:00Z'>19:24</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: I like the changes in 9441 and i think its good to be making progress as part of a larger roadmap..  i think it captures most of the improtant improvements..  
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730700' id='521663'>
<a class='timestamp' href='#521663'><time timestamp='2017-01-06T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
perhaps we can add quick relay of new tips,  and processing multiple messages requires a bit more thought in my view..  as we can see by the fact that it was ever taken out in the first place
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730700' id='521664'>
<a class='timestamp' href='#521664'><time timestamp='2017-01-06T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
that said, i admit i did not look at your PRs
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730700' id='521665'>
<a class='timestamp' href='#521665'><time timestamp='2017-01-06T19:25:00Z'>19:25</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
hard to keep up!
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730760' id='521666'>
<a class='timestamp' href='#521666'><time timestamp='2017-01-06T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
It&#x27;s certainly reasonable to tweak it now that the dependencies are untangled, I just tried to keep the scope narrow at first
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730760' id='521667'>
<a class='timestamp' href='#521667'><time timestamp='2017-01-06T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I know, that why I closed them rather than have more things to look at!
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730760' id='521668'>
<a class='timestamp' href='#521668'><time timestamp='2017-01-06T19:26:00Z'>19:26</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
not gonna stop me from going &#x27;I already pointed this out, if you only listened!&#x27; :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730820' id='521669'>
<a class='timestamp' href='#521669'><time timestamp='2017-01-06T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
insufficient emoticons
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730820' id='521670'>
<a class='timestamp' href='#521670'><time timestamp='2017-01-06T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i finally understand your comment on the PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1483730820' id='521671'>
<a class='timestamp' href='#521671'><time timestamp='2017-01-06T19:27:00Z'>19:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i thought you were trying to say that that PR changed it to only process one at a time (which i noticed)... and i was very confused by what you said afterwards about fixing it
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731000' id='521672'>
<a class='timestamp' href='#521672'><time timestamp='2017-01-06T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: it changed it to process multiple at a time initially, and I immediately added a line comment on that change asking for review of that (which github seems to have lost when I force pushed a change that reverted back to the old behavior)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731000' id='521673'>
<a class='timestamp' href='#521673'><time timestamp='2017-01-06T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: hmm, wait. Are you talking about the new quick-relay from 9375 in particular?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731000' id='521674'>
<a class='timestamp' href='#521674'><time timestamp='2017-01-06T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
cfields: no i&#x27;m talking about exactly not that
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731000' id='521675'>
<a class='timestamp' href='#521675'><time timestamp='2017-01-06T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
seems i was just assuming i knew what master did, and i misinterpreted everything that people tried to explain it to me
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731000' id='521676'>
<a class='timestamp' href='#521676'><time timestamp='2017-01-06T19:30:00Z'>19:30</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: ok, good
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731060' id='521677'>
<a class='timestamp' href='#521677'><time timestamp='2017-01-06T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: I think it should probably handle multiple at a time subject to some time limit. ::shrugs::
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731060' id='521678'>
<a class='timestamp' href='#521678'><time timestamp='2017-01-06T19:31:00Z'>19:31</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
cfields: its very easy to see the behavior with 9375 now though b/c of the cached blocks making the annoucements so fast.  you watch annoucements in quick succession up to some high numbered peer and then a pause before announcements start to low numbered peers
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731120' id='521679'>
<a class='timestamp' href='#521679'><time timestamp='2017-01-06T19:32:00Z'>19:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: absolutely agree
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731180' id='521680'>
<a class='timestamp' href='#521680'><time timestamp='2017-01-06T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but if we&#x27;ve done it this way since 0.10, i really don&#x27;t care whether that happens in 0.14 or not
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731180' id='521681'>
<a class='timestamp' href='#521681'><time timestamp='2017-01-06T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: gmaxwell: i think ideally we might do something even smarter, such as queue received transactions to be ATMP&#x27;ed after we&#x27;d gotten through block relay..  however its a bit tricky in that you dont&#x27; want to reorder those after any potential other cmpctblock messages for reconstruction purposes
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731180' id='521682'>
<a class='timestamp' href='#521682'><time timestamp='2017-01-06T19:33:00Z'>19:33</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: ah, i think that&#x27;d be a different culprit then
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731240' id='521683'>
<a class='timestamp' href='#521683'><time timestamp='2017-01-06T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa:  in other things people probably didn&#x27;t notice,  I&#x27;ve been complaining that our socket recieve buffer (5 MB) is <u>_way_</u> too small given how long executions of the message handler take; and it is adversely impacting performance; even with cfields&#x27; PR. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731240' id='521684'>
<a class='timestamp' href='#521684'><time timestamp='2017-01-06T19:34:00Z'>19:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
cfields: wait, why a different culprit?  didn&#x27;t the old code have the same problem in a different way?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731300' id='521685'>
<a class='timestamp' href='#521685'><time timestamp='2017-01-06T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: to be clear, you&#x27;re saying that you observe that behavior with the cached blocks?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731360' id='521686'>
<a class='timestamp' href='#521686'><time timestamp='2017-01-06T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
cfields: :) yes, but not the pre-announced cached blocks.  we use the cached blocks for regular announcment too.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731360' id='521687'>
<a class='timestamp' href='#521687'><time timestamp='2017-01-06T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: e.g. right now we can, during a single handler run, connect 999 blocks which will take 2000 seconds even on a moderately fast computer... all the rx buffers just fill. (and on a really slow computer, we&#x27;ll ping timeout our peers while connecting a wad of blocks)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731360' id='521688'>
<a class='timestamp' href='#521688'><time timestamp='2017-01-06T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gmaxwell: <a href="https://github.com/bitcoin/bitcoin/pull/9441#issuecomment-270397280" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9441#issuecomment-270397280</a> . I think we should consider changing this for 0.14 as well.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731540' id='521689'>
<a class='timestamp' href='#521689'><time timestamp='2017-01-06T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
morcos: aha, i see. I&#x27;m with you now.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731540' id='521690'>
<a class='timestamp' href='#521690'><time timestamp='2017-01-06T19:39:00Z'>19:39</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
they just make the rest of the loop so fast that the pause is more visible
<br>
</div>

<div class='talk op-msg' data-timestamp='1483731780' id='521691'>
<a class='timestamp' href='#521691'><time timestamp='2017-01-06T19:43:00Z'>19:43</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: my strategy was basically to make the loop run immediately again after anything interestin happened.  I think it&#x27;s harmless to always execute the loop an extra time.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732020' id='521692'>
<a class='timestamp' href='#521692'><time timestamp='2017-01-06T19:47:00Z'>19:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: how would you define interesting?  any message processed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732080' id='521693'>
<a class='timestamp' href='#521693'><time timestamp='2017-01-06T19:48:00Z'>19:48</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: yes, though my PR didn&#x27;t bother catching any message processed, it did catch any message sent or any block recieved, I believe.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732140' id='521694'>
<a class='timestamp' href='#521694'><time timestamp='2017-01-06T19:49:00Z'>19:49</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I think it would be fine to make it do any message sent or recieved.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732260' id='521695'>
<a class='timestamp' href='#521695'><time timestamp='2017-01-06T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
I also made it run through the loop an extra time in any case it skipped something due to lock contention.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732260' id='521696'>
<a class='timestamp' href='#521696'><time timestamp='2017-01-06T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: i&#x27;m aware... but i think it&#x27;s just fundamentally broken that we&#x27;re pegging the message handler thread for 2000s
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732260' id='521697'>
<a class='timestamp' href='#521697'><time timestamp='2017-01-06T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: it&#x27;s not too hard to not always connect everything we have
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732320' id='521698'>
<a class='timestamp' href='#521698'><time timestamp='2017-01-06T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: That would be good, the change to accomplish that wasn&#x27;t obvious to me or I would have PRed it already; though that is necessary it&#x27;s not sufficient.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732380' id='521699'>
<a class='timestamp' href='#521699'><time timestamp='2017-01-06T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
sipa: since even a <u>_1_</u> second delay coupled with a 5MB buffer is enough to limit our IBD sync speed to far below what we can reindex-chainstate at on reasonable hardware.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732560' id='521700'>
<a class='timestamp' href='#521700'><time timestamp='2017-01-06T19:56:00Z'>19:56</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: the wake on lock contention seemed important to me, otherwise we could get a message from a peer, bounce off cs_main before getting to handle it, then sleep for 100ms before trying again. 
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732620' id='521701'>
<a class='timestamp' href='#521701'><time timestamp='2017-01-06T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
(e.g. if we&#x27;re competing with rpc for cs_main)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732740' id='521702'>
<a class='timestamp' href='#521702'><time timestamp='2017-01-06T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: hmm.. that makes sense.  where are you referring to where we skip handling the message if we can&#x27;t get cs_main?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732920' id='521703'>
<a class='timestamp' href='#521703'><time timestamp='2017-01-06T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
morcos: ah, I think one of the just merged networking changes just removed where we did that.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732920' id='521704'>
<a class='timestamp' href='#521704'><time timestamp='2017-01-06T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
oh in SendMessages
<br>
</div>

<div class='talk op-msg' data-timestamp='1483732920' id='521705'>
<a class='timestamp' href='#521705'><time timestamp='2017-01-06T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
oh no, there it is.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733100' id='521706'>
<a class='timestamp' href='#521706'><time timestamp='2017-01-06T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
gmaxwell: on another note, i guess our ability to make use of &gt;4 cores isn&#x27;t as good as I thought...  I had a whole series of PR&#x27;s that removed successive bottlenecks, but i&#x27;d misremembered how much progress we could make wiht only the cuckoocache
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733100' id='521707'>
<a class='timestamp' href='#521707'><time timestamp='2017-01-06T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
And then I got sidetracked by the near conesnsus bug with CCoinsViewCache..  but when I get a chance I&#x27;ll go back and see if there are other parts of that that are still worth doing now
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733100' id='521708'>
<a class='timestamp' href='#521708'><time timestamp='2017-01-06T20:05:00Z'>20:05</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
yea...
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733220' id='521709'>
<a class='timestamp' href='#521709'><time timestamp='2017-01-06T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
ugh, ffs, fibre cuts in india means fibre rtt between eu and asia is up 90ms on one path :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733220' id='521710'>
<a class='timestamp' href='#521710'><time timestamp='2017-01-06T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
luke-jr: did you fix <a href="https://github.com/bitcoin/bitcoin/pull/8775#discussion_r94985339" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/8775#discussion_r94985339</a> ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733220' id='521711'>
<a class='timestamp' href='#521711'><time timestamp='2017-01-06T20:07:00Z'>20:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that try_lock cs_main can go away after #9419 (+ follow ups), i think, as it will be replaced by the nodestate locks
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733280' id='521712'>
<a class='timestamp' href='#521712'><time timestamp='2017-01-06T20:08:00Z'>20:08</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/9419" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/9419</a> | Stop Using cs_main for CNodeState/State() by TheBlueMatt · Pull Request #9419 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733400' id='521713'>
<a class='timestamp' href='#521713'><time timestamp='2017-01-06T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
BlueMatt: no, where is it assumed to return non-NULL?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733400' id='521714'>
<a class='timestamp' href='#521714'><time timestamp='2017-01-06T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
there is some advantage in skipping processing peers that need a lock, when other peers can be processed without it.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733400' id='521715'>
<a class='timestamp' href='#521715'><time timestamp='2017-01-06T20:10:00Z'>20:10</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
luke-jr: ok, please add documentation to note that it is assumed it can return null
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733520' id='521716'>
<a class='timestamp' href='#521716'><time timestamp='2017-01-06T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
though on the other hand, I think that that construction could leave us sending pings even if cs_main is deadlocked which would be undesirable. (not an actual issue because our message handler will get stuck elsewhere in the case, but still)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733520' id='521717'>
<a class='timestamp' href='#521717'><time timestamp='2017-01-06T20:12:00Z'>20:12</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I would think that&#x27;s implied in returning a pointer type, but ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733700' id='521718'>
<a class='timestamp' href='#521718'><time timestamp='2017-01-06T20:15:00Z'>20:15</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
luke-jr: could you not rebase when people are in the middle of review?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733880' id='521719'>
<a class='timestamp' href='#521719'><time timestamp='2017-01-06T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
haven&#x27;t rebased that PR in a week, but ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733880' id='521720'>
<a class='timestamp' href='#521720'><time timestamp='2017-01-06T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
did you just rebase again?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733880' id='521721'>
<a class='timestamp' href='#521721'><time timestamp='2017-01-06T20:18:00Z'>20:18</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
no, just added the comment
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733940' id='521722'>
<a class='timestamp' href='#521722'><time timestamp='2017-01-06T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
no? the previous head is now gone?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733940' id='521723'>
<a class='timestamp' href='#521723'><time timestamp='2017-01-06T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
indeed, I amended it
<br>
</div>

<div class='talk op-msg' data-timestamp='1483733940' id='521724'>
<a class='timestamp' href='#521724'><time timestamp='2017-01-06T20:19:00Z'>20:19</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
please do not do that
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734060' id='521725'>
<a class='timestamp' href='#521725'><time timestamp='2017-01-06T20:21:00Z'>20:21</time></a>
&lt;<span class='nick nick-14'> * luke-jr</span>&gt;
starts a list of the contradicting development processes preferred by various people.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734300' id='521726'>
<a class='timestamp' href='#521726'><time timestamp='2017-01-06T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-16'> * BlueMatt</span>&gt;
restarts review from the start :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734300' id='521727'>
<a class='timestamp' href='#521727'><time timestamp='2017-01-06T20:25:00Z'>20:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
does anyone ask for regular squash/rebase mid-review?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734480' id='521728'>
<a class='timestamp' href='#521728'><time timestamp='2017-01-06T20:28:00Z'>20:28</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I don&#x27;t usually distinguish (or have a way to) when others are actively reviewing. (note there was already amended commits before I became aware you were)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734540' id='521729'>
<a class='timestamp' href='#521729'><time timestamp='2017-01-06T20:29:00Z'>20:29</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
at what point is someone not reviewing?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734600' id='521730'>
<a class='timestamp' href='#521730'><time timestamp='2017-01-06T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
gmaxwell: exactly, hence why some desiring squashing vs others not liking squashing [at particular times] is confusing to resolve
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734600' id='521731'>
<a class='timestamp' href='#521731'><time timestamp='2017-01-06T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
when it is time to merge and/or there are limited comments showing up?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734600' id='521732'>
<a class='timestamp' href='#521732'><time timestamp='2017-01-06T20:30:00Z'>20:30</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
no one desires squashing unless its been a while since things have been commented on, though to be fair, you should, at a minimum, comment when you squash and note changes
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734660' id='521733'>
<a class='timestamp' href='#521733'><time timestamp='2017-01-06T20:31:00Z'>20:31</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
eg respond to the previous comments and note where you did/didnt make changes, instead of letting them sit
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734720' id='521734'>
<a class='timestamp' href='#521734'><time timestamp='2017-01-06T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i usually prefer squashing trivial fixes immediately, unless it&#x27;s a very complicated PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734720' id='521735'>
<a class='timestamp' href='#521735'><time timestamp='2017-01-06T20:32:00Z'>20:32</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
most of the time is understanding what the PR is trying to achieve and how... reading the code is easy
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734780' id='521736'>
<a class='timestamp' href='#521736'><time timestamp='2017-01-06T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
matt&#x27;s style can be helpful on more complicated ones, but as someone who has often come to a PR to review later, I&#x27;ve found the style to really suck in that case.  I waste my time finding bugs that are already fixed in later updates.
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734780' id='521737'>
<a class='timestamp' href='#521737'><time timestamp='2017-01-06T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
not for a major refactor pr where most of the pr is just code movement
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734780' id='521738'>
<a class='timestamp' href='#521738'><time timestamp='2017-01-06T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
gmaxwell: likewise
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734780' id='521739'>
<a class='timestamp' href='#521739'><time timestamp='2017-01-06T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(but i don&#x27;t mind following either style... just my personal preference is usually fixing things immediately)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734780' id='521740'>
<a class='timestamp' href='#521740'><time timestamp='2017-01-06T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
gmaxwell: I try to title such commits f &quot;Commit title this should be squashed into&quot; fix XYZ
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734780' id='521741'>
<a class='timestamp' href='#521741'><time timestamp='2017-01-06T20:33:00Z'>20:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which should at least make it easy to glance at such changes
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734840' id='521742'>
<a class='timestamp' href='#521742'><time timestamp='2017-01-06T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i guess things have improved with the &quot;review&quot; thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734840' id='521743'>
<a class='timestamp' href='#521743'><time timestamp='2017-01-06T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-14'> gmaxwell</span>&gt;
also it leaves me having to re-review the squash since sometimes a pair of reasonable looking changes my reveal their brokenness once merged. (also we have no tools to tell if a squash was faithful in any case, so someone malicious could slip something in if people didn&#x27;t review the squash just as carefully)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734840' id='521744'>
<a class='timestamp' href='#521744'><time timestamp='2017-01-06T20:34:00Z'>20:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so you can comment on an issue, and then later delete if you see it&#x27;s already fixed ahead of time
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734900' id='521745'>
<a class='timestamp' href='#521745'><time timestamp='2017-01-06T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yes, my bigger annoyance is having to re-review after squash was shit
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734900' id='521746'>
<a class='timestamp' href='#521746'><time timestamp='2017-01-06T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
its easy if its clear and the commits are just being cleanly squashed (can compare treeish)
<br>
</div>

<div class='talk op-msg' data-timestamp='1483734900' id='521747'>
<a class='timestamp' href='#521747'><time timestamp='2017-01-06T20:35:00Z'>20:35</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
I have an alias that compares diffs that I&#x27;ve gotten used to using to see what changed in an amend
<br>
</div>

<div class='talk op-msg' data-timestamp='1483737000' id='521748'>
<a class='timestamp' href='#521748'><time timestamp='2017-01-06T21:10:00Z'>21:10</time></a>
&lt;<span class='nick nick-10'> owowo</span>&gt;
is there a time when core drops a tx if unconfirmed for a long time? Or will it just keep on rebroadcasting it until the return of the Messiah?
<br>
</div>

<div class='talk op-msg' data-timestamp='1483737060' id='521749'>
<a class='timestamp' href='#521749'><time timestamp='2017-01-06T21:11:00Z'>21:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
the wallet will keep rebroadcasting, but you can &quot;abandon&quot; a transaction both in the gui and the rpc
<br>
</div>

<div class='talk op-msg' data-timestamp='1483737060' id='521750'>
<a class='timestamp' href='#521750'><time timestamp='2017-01-06T21:11:00Z'>21:11</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
the mempool will eventually drop them, but there are &quot;helpful&quot; nodes which like to rebroadcast lots of shit to their peers all the time
<br>
</div>

<div class='talk op-msg' data-timestamp='1483737120' id='521751'>
<a class='timestamp' href='#521751'><time timestamp='2017-01-06T21:12:00Z'>21:12</time></a>
&lt;<span class='nick nick-10'> owowo</span>&gt;
ok, thx
<br>
</div>

<div class='talk op-msg' data-timestamp='1483744680' id='521752'>
<a class='timestamp' href='#521752'><time timestamp='2017-01-06T23:18:00Z'>23:18</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] gmaxwell opened pull request #9484: Introduce assumevalid setting to skip validation presumed valid scripts. (master...script_elide_verified) <a href="https://github.com/bitcoin/bitcoin/pull/9484" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9484</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1483745340' id='521753'>
<a class='timestamp' href='#521753'><time timestamp='2017-01-06T23:29:00Z'>23:29</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] mcelrath opened pull request #9485: ZMQ example using python3 and asyncio (master...python3zmq) <a href="https://github.com/bitcoin/bitcoin/pull/9485" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/9485</a>
<br>
</div>

</div>
</section>

</body>
</html>
