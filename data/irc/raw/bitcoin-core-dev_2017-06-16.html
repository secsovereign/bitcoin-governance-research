<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2017-06-16
 — 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2017-06-16' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:24 UTC</pre>
<pre><a href="/bitcoin-core-dev/2017-05-16">&lt;</a><span class='header'>    June 2017     </span><a href="/bitcoin-core-dev/2017-07-16">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;             <a class="" href="/bitcoin-core-dev/2017-06-01">1</a>  <a class="" href="/bitcoin-core-dev/2017-06-02">2</a>  <a class="" href="/bitcoin-core-dev/2017-06-03">3</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2017-06-04">4</a>  <a class="" href="/bitcoin-core-dev/2017-06-05">5</a>  <a class="" href="/bitcoin-core-dev/2017-06-06">6</a>  <a class="" href="/bitcoin-core-dev/2017-06-07">7</a>  <a class="" href="/bitcoin-core-dev/2017-06-08">8</a>  <a class="" href="/bitcoin-core-dev/2017-06-09">9</a> <a class="" href="/bitcoin-core-dev/2017-06-10">10</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-06-11">11</a> <a class="" href="/bitcoin-core-dev/2017-06-12">12</a> <a class="" href="/bitcoin-core-dev/2017-06-13">13</a> <a class="" href="/bitcoin-core-dev/2017-06-14">14</a> <a class="" href="/bitcoin-core-dev/2017-06-15">15</a> <a class="current" href="/bitcoin-core-dev/2017-06-16">16</a> <a class="" href="/bitcoin-core-dev/2017-06-17">17</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-06-18">18</a> <a class="" href="/bitcoin-core-dev/2017-06-19">19</a> <a class="" href="/bitcoin-core-dev/2017-06-20">20</a> <a class="" href="/bitcoin-core-dev/2017-06-21">21</a> <a class="" href="/bitcoin-core-dev/2017-06-22">22</a> <a class="" href="/bitcoin-core-dev/2017-06-23">23</a> <a class="" href="/bitcoin-core-dev/2017-06-24">24</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2017-06-25">25</a> <a class="" href="/bitcoin-core-dev/2017-06-26">26</a> <a class="" href="/bitcoin-core-dev/2017-06-27">27</a> <a class="" href="/bitcoin-core-dev/2017-06-28">28</a> <a class="" href="/bitcoin-core-dev/2017-06-29">29</a> <a class="" href="/bitcoin-core-dev/2017-06-30">30</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1497574020' id='551081'>
<a class='timestamp' href='#551081'><time timestamp='2017-06-16T00:47:00Z'>00:47</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] gmaxwell opened pull request #10608: Add a comment explaining the use of MAX_BLOCK_BASE_SIZE. (master...size_comment) <a href="https://github.com/bitcoin/bitcoin/pull/10608" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10608</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497576420' id='551082'>
<a class='timestamp' href='#551082'><time timestamp='2017-06-16T01:27:00Z'>01:27</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
wumpus sipa gmaxwell jonasschnelli morcos luke-jr btcdrak sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier jl2012 instagibbs achow101 : Sorry to ping you all, but since some dev are in Tokyo around end of july for some conferences, I thought it can be a good idea to have such occasion to have 1 or 2 days of pure bitcoin core
<br>
</div>

<div class='talk op-msg' data-timestamp='1497576420' id='551083'>
<a class='timestamp' href='#551083'><time timestamp='2017-06-16T01:27:00Z'>01:27</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
coding/review/idea sharing together. If you are interested, come in the channel ##tokyocore . My company Digital Garage can give us a nice place to go for coding. Note: I certaintly forgot some name, if you are contributor and wish to come, you are defintively welcome. The 25 June we freeze the list.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497576660' id='551084'>
<a class='timestamp' href='#551084'><time timestamp='2017-06-16T01:31:00Z'>01:31</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
NicolasDorier: thanks for arranging!
<br>
</div>

<div class='talk op-msg' data-timestamp='1497579480' id='551085'>
<a class='timestamp' href='#551085'><time timestamp='2017-06-16T02:18:00Z'>02:18</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gitian builders: 0.14.2 detached sigs are up
<br>
</div>

<div class='talk op-msg' data-timestamp='1497587580' id='551086'>
<a class='timestamp' href='#551086'><time timestamp='2017-06-16T04:33:00Z'>04:33</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
NicolasDorier: I just rsvpd as I was going to be there already. Thanks again.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497589020' id='551087'>
<a class='timestamp' href='#551087'><time timestamp='2017-06-16T04:57:00Z'>04:57</time></a>
&lt;<span class='nick nick-7'> NicolasDorier</span>&gt;
yay awesome
<br>
</div>

<div class='talk op-msg' data-timestamp='1497606600' id='551088'>
<a class='timestamp' href='#551088'><time timestamp='2017-06-16T09:50:00Z'>09:50</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
you know you&#x27;re up too late when you don&#x27;t remember what the bug you were trying to fix was. ._.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497607260' id='551089'>
<a class='timestamp' href='#551089'><time timestamp='2017-06-16T10:01:00Z'>10:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
cfields: thanks, pushed 0.14.2 signed sigs
<br>
</div>

<div class='talk op-msg' data-timestamp='1497613860' id='551090'>
<a class='timestamp' href='#551090'><time timestamp='2017-06-16T11:51:00Z'>11:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
cfields: with be49a294a240ec81a901af1aaabbba2172d38dc1 I get only a single lock report... haven&#x27;t looked at your code thourgh
<br>
</div>

<div class='talk op-msg' data-timestamp='1497613860' id='551091'>
<a class='timestamp' href='#551091'><time timestamp='2017-06-16T11:51:00Z'>11:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
*though
<br>
</div>

<div class='talk op-msg' data-timestamp='1497614520' id='551092'>
<a class='timestamp' href='#551092'><time timestamp='2017-06-16T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: the pollBalanceThread is mainly responsible for UI freezes...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497614520' id='551093'>
<a class='timestamp' href='#551093'><time timestamp='2017-06-16T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
If I disable that poll thread,.. stuff runs much better
<br>
</div>

<div class='talk op-msg' data-timestamp='1497615780' id='551094'>
<a class='timestamp' href='#551094'><time timestamp='2017-06-16T12:23:00Z'>12:23</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ryanofsky: I&#x27;ll give it a test (polling but keeping the cache)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497615840' id='551095'>
<a class='timestamp' href='#551095'><time timestamp='2017-06-16T12:24:00Z'>12:24</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ryanofsky: But what I don&#x27;t understand is why we would/should do a TRY_LOCK on cs_main every 250ms
<br>
</div>

<div class='talk op-msg' data-timestamp='1497615900' id='551096'>
<a class='timestamp' href='#551096'><time timestamp='2017-06-16T12:25:00Z'>12:25</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
cfields: nighly gitian build crashes on OSX (not tested on WIN/LINUX): <a href="https://0bin.net/paste/8-QKc7g9psBmYIGJ#msAwcpNd1CtU4KdEObG7tN4PK0XiIAbiELdwUtJLzui" class="link" target="_blank">https://0bin.net/paste/8-QKc7g9psBmYIGJ#msAwcpNd1CtU4KdEObG7tN4PK0XiIAbiELdwUtJLzui</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497619740' id='551097'>
<a class='timestamp' href='#551097'><time timestamp='2017-06-16T13:29:00Z'>13:29</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: you said CCoinsViewDB::Upgrade() can be cancelled (and continued) any time. Is that correct?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497619800' id='551098'>
<a class='timestamp' href='#551098'><time timestamp='2017-06-16T13:30:00Z'>13:30</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Adding a check for ShutdownRequested() and break the while (and write the possible batch) would make sense then?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497619980' id='551099'>
<a class='timestamp' href='#551099'><time timestamp='2017-06-16T13:33:00Z'>13:33</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Will have 0.14.2 signed up shortly
<br>
</div>

<div class='talk op-msg' data-timestamp='1497619980' id='551100'>
<a class='timestamp' href='#551100'><time timestamp='2017-06-16T13:33:00Z'>13:33</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Doing a bit of VM maintenance
<br>
</div>

<div class='talk op-msg' data-timestamp='1497619980' id='551101'>
<a class='timestamp' href='#551101'><time timestamp='2017-06-16T13:33:00Z'>13:33</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
Speaking of which: does anyone know what the status is of Gitian in Xenial?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497620040' id='551102'>
<a class='timestamp' href='#551102'><time timestamp='2017-06-16T13:34:00Z'>13:34</time></a>
&lt;<span class='nick nick-10'> michagogo</span>&gt;
ISTR that for some reason we can&#x27;t actually compile on Xenial and so the guest needs to remain Trusty, but can the Gitian (LXC) <b>*host*</b> be Xenial?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497620160' id='551103'>
<a class='timestamp' href='#551103'><time timestamp='2017-06-16T13:36:00Z'>13:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
michagogo: Xenial should work fine IMO
<br>
</div>

<div class='talk op-msg' data-timestamp='1497620460' id='551104'>
<a class='timestamp' href='#551104'><time timestamp='2017-06-16T13:41:00Z'>13:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
jonasschnelli: i guess!
<br>
</div>

<div class='talk op-msg' data-timestamp='1497620520' id='551105'>
<a class='timestamp' href='#551105'><time timestamp='2017-06-16T13:42:00Z'>13:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: Seems to work here...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497620520' id='551106'>
<a class='timestamp' href='#551106'><time timestamp='2017-06-16T13:42:00Z'>13:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
sipa: Can you tell me again how I can calculate the progress in that pcursor while loop?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497620580' id='551107'>
<a class='timestamp' href='#551107'><time timestamp='2017-06-16T13:43:00Z'>13:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i&#x27;ll make a commit later
<br>
</div>

<div class='talk op-msg' data-timestamp='1497620580' id='551108'>
<a class='timestamp' href='#551108'><time timestamp='2017-06-16T13:43:00Z'>13:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
thanks for doing thid
<br>
</div>

<div class='talk op-msg' data-timestamp='1497620700' id='551109'>
<a class='timestamp' href='#551109'><time timestamp='2017-06-16T13:45:00Z'>13:45</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
okay. thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621120' id='551110'>
<a class='timestamp' href='#551110'><time timestamp='2017-06-16T13:52:00Z'>13:52</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
jonasschnelli: interesting! I hadn&#x27;t expected that, it should only update the balance if the TRY_ succeeds not freeze on the lock update
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621180' id='551111'>
<a class='timestamp' href='#551111'><time timestamp='2017-06-16T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I don&#x27;t know why currently but I know that its much faster with that PR
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621180' id='551112'>
<a class='timestamp' href='#551112'><time timestamp='2017-06-16T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
At least on OSX
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621180' id='551113'>
<a class='timestamp' href='#551113'><time timestamp='2017-06-16T13:53:00Z'>13:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Would be nice if someone could profile it on Linux / Win.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621240' id='551114'>
<a class='timestamp' href='#551114'><time timestamp='2017-06-16T13:54:00Z'>13:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but the try_lock on cs_main should not <b>*itself*</b> cause freezes
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621240' id='551115'>
<a class='timestamp' href='#551115'><time timestamp='2017-06-16T13:54:00Z'>13:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if it runs the poll, and the lock is not available, the whole point would be that it doesn&#x27;t spend time
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621240' id='551116'>
<a class='timestamp' href='#551116'><time timestamp='2017-06-16T13:54:00Z'>13:54</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if that&#x27;s not how it works it seems the whole TRY_ concept is broken
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621300' id='551117'>
<a class='timestamp' href='#551117'><time timestamp='2017-06-16T13:55:00Z'>13:55</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
but what if the TRY_LOCK can acquire the lock every 250 ms and do the calculation...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621300' id='551118'>
<a class='timestamp' href='#551118'><time timestamp='2017-06-16T13:55:00Z'>13:55</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it should only do the computation if the balance is dirty, right?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621360' id='551119'>
<a class='timestamp' href='#551119'><time timestamp='2017-06-16T13:56:00Z'>13:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so in by far most cases if it gets the lock,  it immediately is supposed to notice the balance is not dirty, so doesn&#x27;t recompute it
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621360' id='551120'>
<a class='timestamp' href='#551120'><time timestamp='2017-06-16T13:56:00Z'>13:56</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I tested three options, 1) master, 2) only atomic caches with polling, 3) like 2 but polling replaced with signal
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621360' id='551121'>
<a class='timestamp' href='#551121'><time timestamp='2017-06-16T13:56:00Z'>13:56</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if only needs to be recomputed if something changed
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621360' id='551122'>
<a class='timestamp' href='#551122'><time timestamp='2017-06-16T13:56:00Z'>13:56</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: so, yes. It should only lock when the balances are dirty
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621420' id='551123'>
<a class='timestamp' href='#551123'><time timestamp='2017-06-16T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But in my test, I sent 20 txes, so the balance was always dirty afterwards
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621420' id='551124'>
<a class='timestamp' href='#551124'><time timestamp='2017-06-16T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I don&#x27;t know why its much slower with the TRY_LOCK
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621420' id='551125'>
<a class='timestamp' href='#551125'><time timestamp='2017-06-16T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621420' id='551126'>
<a class='timestamp' href='#551126'><time timestamp='2017-06-16T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess it must be the QTimer / TryLock overhead?!
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621420' id='551127'>
<a class='timestamp' href='#551127'><time timestamp='2017-06-16T13:57:00Z'>13:57</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well yes if it gets a transaction every 250ms, sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621480' id='551128'>
<a class='timestamp' href='#551128'><time timestamp='2017-06-16T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
i&#x27;d think TRY_LOCK only when balances were dirty would give best of both worlds
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621480' id='551129'>
<a class='timestamp' href='#551129'><time timestamp='2017-06-16T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I manually sent the tx... ~every 0.5s
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621480' id='551130'>
<a class='timestamp' href='#551130'><time timestamp='2017-06-16T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but GUI freezes happen anso to people that don&#x27;t have anythign in their wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621480' id='551131'>
<a class='timestamp' href='#551131'><time timestamp='2017-06-16T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
on the first sync
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621480' id='551132'>
<a class='timestamp' href='#551132'><time timestamp='2017-06-16T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ryanofsky: I though as well,.. but look at my profile results,.. they tell a different story
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621480' id='551133'>
<a class='timestamp' href='#551133'><time timestamp='2017-06-16T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so it can&#x27;t be just something with transactions, though there&#x27;s clearly something with transactions too...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621480' id='551134'>
<a class='timestamp' href='#551134'><time timestamp='2017-06-16T13:58:00Z'>13:58</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
oh ok, i didn&#x27;t see that listed as one your three tests
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621540' id='551135'>
<a class='timestamp' href='#551135'><time timestamp='2017-06-16T13:59:00Z'>13:59</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Look here: <a href="https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-309021160" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10251#issuecomment-309021160</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621540' id='551136'>
<a class='timestamp' href='#551136'><time timestamp='2017-06-16T13:59:00Z'>13:59</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Master with only the atomic caches result in still 33% of the execution time in that poll function
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621540' id='551137'>
<a class='timestamp' href='#551137'><time timestamp='2017-06-16T13:59:00Z'>13:59</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok     
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621600' id='551138'>
<a class='timestamp' href='#551138'><time timestamp='2017-06-16T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
While I can&#x27;t find any call in my profiler running pure (all commits) of 10251
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621600' id='551139'>
<a class='timestamp' href='#551139'><time timestamp='2017-06-16T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
33% of the time for something that gets called 4 times per second?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621600' id='551140'>
<a class='timestamp' href='#551140'><time timestamp='2017-06-16T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
is that a very large wallet?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621600' id='551141'>
<a class='timestamp' href='#551141'><time timestamp='2017-06-16T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
*any call that related to the balance update
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621600' id='551142'>
<a class='timestamp' href='#551142'><time timestamp='2017-06-16T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: not really large,.. I only did generate 1100
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621600' id='551143'>
<a class='timestamp' href='#551143'><time timestamp='2017-06-16T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
depends what &quot;large&quot; is
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621600' id='551144'>
<a class='timestamp' href='#551144'><time timestamp='2017-06-16T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s interesting that the balance computation is so slow
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621600' id='551145'>
<a class='timestamp' href='#551145'><time timestamp='2017-06-16T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
well if so, that&#x27;s already large, it seems
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621600' id='551146'>
<a class='timestamp' href='#551146'><time timestamp='2017-06-16T14:00:00Z'>14:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess we loop 6 times over the complete mapWallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621660' id='551147'>
<a class='timestamp' href='#551147'><time timestamp='2017-06-16T14:01:00Z'>14:01</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh wow
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621660' id='551148'>
<a class='timestamp' href='#551148'><time timestamp='2017-06-16T14:01:00Z'>14:01</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
for all balance types...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621720' id='551149'>
<a class='timestamp' href='#551149'><time timestamp='2017-06-16T14:02:00Z'>14:02</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ok, yes then I understand why things are so slow, though I still don&#x27;t understand why it recomputes also the times the balance was not updated
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621780' id='551150'>
<a class='timestamp' href='#551150'><time timestamp='2017-06-16T14:03:00Z'>14:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it&#x27;s as if the wallet is always dirty, even though only once in 0.5s a transaction arrives
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621780' id='551151'>
<a class='timestamp' href='#551151'><time timestamp='2017-06-16T14:03:00Z'>14:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I&#x27;m not sure if it recomputes then... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621780' id='551152'>
<a class='timestamp' href='#551152'><time timestamp='2017-06-16T14:03:00Z'>14:03</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
because in principle, this should result in the same load: with the 0.25s poll, it should compute every time after a transaction comes it
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621780' id='551153'>
<a class='timestamp' href='#551153'><time timestamp='2017-06-16T14:03:00Z'>14:03</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But when it does,.. it seems to take much longer.. don&#x27;t know why. Maybe because of the QTimer internals
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621840' id='551154'>
<a class='timestamp' href='#551154'><time timestamp='2017-06-16T14:04:00Z'>14:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
with the per-transaction notification, it also does
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621840' id='551155'>
<a class='timestamp' href='#551155'><time timestamp='2017-06-16T14:04:00Z'>14:04</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
what if the transaction rate is higher though, e.g. with 10 transactions per second the polling shoudl be faster
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621840' id='551156'>
<a class='timestamp' href='#551156'><time timestamp='2017-06-16T14:04:00Z'>14:04</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes. Indeed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621840' id='551157'>
<a class='timestamp' href='#551157'><time timestamp='2017-06-16T14:04:00Z'>14:04</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
The signal should filter that out... min 250ms delta or something
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621900' id='551158'>
<a class='timestamp' href='#551158'><time timestamp='2017-06-16T14:05:00Z'>14:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the fixed polling is also to reduce the maximum amount of work done
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621900' id='551159'>
<a class='timestamp' href='#551159'><time timestamp='2017-06-16T14:05:00Z'>14:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
yes.. indeed.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621900' id='551160'>
<a class='timestamp' href='#551160'><time timestamp='2017-06-16T14:05:00Z'>14:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
yes, it could, though if done not carefully it means the data is always one update behind
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621900' id='551161'>
<a class='timestamp' href='#551161'><time timestamp='2017-06-16T14:05:00Z'>14:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(e.g. if you would naively do &quot;process this update only if the last was &gt;250ms ago&quot;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621900' id='551162'>
<a class='timestamp' href='#551162'><time timestamp='2017-06-16T14:05:00Z'>14:05</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Could it be the QTimer overhead?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621900' id='551163'>
<a class='timestamp' href='#551163'><time timestamp='2017-06-16T14:05:00Z'>14:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
no, I don&#x27;t believe that
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621900' id='551164'>
<a class='timestamp' href='#551164'><time timestamp='2017-06-16T14:05:00Z'>14:05</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
not at a 4Hz frequency
<br>
</div>

<div class='talk op-msg' data-timestamp='1497621960' id='551165'>
<a class='timestamp' href='#551165'><time timestamp='2017-06-16T14:06:00Z'>14:06</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if you remove the code from the handler but keep the timer, it&#x27;d probably be the same
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622020' id='551166'>
<a class='timestamp' href='#551166'><time timestamp='2017-06-16T14:07:00Z'>14:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess we should then try to continue to measure the atomic cache commit on top of master (with the TRY_LOCK polling).
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622020' id='551167'>
<a class='timestamp' href='#551167'><time timestamp='2017-06-16T14:07:00Z'>14:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
This is already much faster (I don&#x27;t have numbers though)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622020' id='551168'>
<a class='timestamp' href='#551168'><time timestamp='2017-06-16T14:07:00Z'>14:07</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
s/is/feels/
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622080' id='551169'>
<a class='timestamp' href='#551169'><time timestamp='2017-06-16T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I&#x27;m really surprised by the result at least...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622080' id='551170'>
<a class='timestamp' href='#551170'><time timestamp='2017-06-16T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
What could be that we falsely always set fForceCheckBalanceChanged
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622080' id='551171'>
<a class='timestamp' href='#551171'><time timestamp='2017-06-16T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Could also be OSX only... who knows
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622080' id='551172'>
<a class='timestamp' href='#551172'><time timestamp='2017-06-16T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But since we also have a windows issue...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622080' id='551173'>
<a class='timestamp' href='#551173'><time timestamp='2017-06-16T14:08:00Z'>14:08</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I doubt it&#x27;s OSX only
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622140' id='551174'>
<a class='timestamp' href='#551174'><time timestamp='2017-06-16T14:09:00Z'>14:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
btw: what is the advantage of having a dirty flag per kind of balance - won&#x27;t every update to the wallet invalidate <b>*all*</b> of them?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622140' id='551175'>
<a class='timestamp' href='#551175'><time timestamp='2017-06-16T14:09:00Z'>14:09</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
or are there changes that, say, only invalidate the immutable balance
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622200' id='551176'>
<a class='timestamp' href='#551176'><time timestamp='2017-06-16T14:10:00Z'>14:10</time></a>
&lt;<span class='nick nick-12'> * jonasschnelli</span>&gt;
looking at the code again
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622200' id='551177'>
<a class='timestamp' href='#551177'><time timestamp='2017-06-16T14:10:00Z'>14:10</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
I feel like this is the secret password to join a club:  a60d7c8dde9b77e7ff547976ce37db1fe98c71833003465befe650d6bc102b6b  bitcoin-0.14.1-aarch64-linux-gnu.tar.gz
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622200' id='551178'>
<a class='timestamp' href='#551178'><time timestamp='2017-06-16T14:10:00Z'>14:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ProfMac: congrats!
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622200' id='551179'>
<a class='timestamp' href='#551179'><time timestamp='2017-06-16T14:10:00Z'>14:10</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so you got it to work, awesome
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622260' id='551180'>
<a class='timestamp' href='#551180'><time timestamp='2017-06-16T14:11:00Z'>14:11</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
I said bad things &amp; stomped my foot a time or two.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622260' id='551181'>
<a class='timestamp' href='#551181'><time timestamp='2017-06-16T14:11:00Z'>14:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ProfMac: nice one!
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622260' id='551182'>
<a class='timestamp' href='#551182'><time timestamp='2017-06-16T14:11:00Z'>14:11</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
i think dirty flag doesn&#x27;t really make sense for qt, but it does make sense for rpc
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622260' id='551183'>
<a class='timestamp' href='#551183'><time timestamp='2017-06-16T14:11:00Z'>14:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
so the balance computations loop over all transactions?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622260' id='551184'>
<a class='timestamp' href='#551184'><time timestamp='2017-06-16T14:11:00Z'>14:11</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
which is always done 6 times
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622260' id='551185'>
<a class='timestamp' href='#551185'><time timestamp='2017-06-16T14:11:00Z'>14:11</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: because each balance type has its own routine to calculate, we probably should have caches/dirty-flags per routine
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622320' id='551186'>
<a class='timestamp' href='#551186'><time timestamp='2017-06-16T14:12:00Z'>14:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: that&#x27;s the root source!
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622320' id='551187'>
<a class='timestamp' href='#551187'><time timestamp='2017-06-16T14:12:00Z'>14:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I wonder if it&#x27;d make sense to roll it into one routine, that computes all 6 balalnces in one pass
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622320' id='551188'>
<a class='timestamp' href='#551188'><time timestamp='2017-06-16T14:12:00Z'>14:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: +100
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622320' id='551189'>
<a class='timestamp' href='#551189'><time timestamp='2017-06-16T14:12:00Z'>14:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
it would be more cache friendly at least
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622320' id='551190'>
<a class='timestamp' href='#551190'><time timestamp='2017-06-16T14:12:00Z'>14:12</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess that was a &quot;organic growing&quot; issue... we added one type after another over tim,e
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622320' id='551191'>
<a class='timestamp' href='#551191'><time timestamp='2017-06-16T14:12:00Z'>14:12</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
the added overhead of, in that loop over every transaction, adding up one more number is probably neglible
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622380' id='551192'>
<a class='timestamp' href='#551192'><time timestamp='2017-06-16T14:13:00Z'>14:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622380' id='551193'>
<a class='timestamp' href='#551193'><time timestamp='2017-06-16T14:13:00Z'>14:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
while LOCKing the wallet six times and iterating over its contents six times is probably bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622380' id='551194'>
<a class='timestamp' href='#551194'><time timestamp='2017-06-16T14:13:00Z'>14:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
in any case it&#x27;s good that your PR already brings improvements
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622380' id='551195'>
<a class='timestamp' href='#551195'><time timestamp='2017-06-16T14:13:00Z'>14:13</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
then we should probably merge it
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622380' id='551196'>
<a class='timestamp' href='#551196'><time timestamp='2017-06-16T14:13:00Z'>14:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But now it comes...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622380' id='551197'>
<a class='timestamp' href='#551197'><time timestamp='2017-06-16T14:13:00Z'>14:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
We call GetDepthInMainChain for each mapWallet tx
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622440' id='551198'>
<a class='timestamp' href='#551198'><time timestamp='2017-06-16T14:14:00Z'>14:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Which does mapBlockIndex.find(hashBlock);
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622440' id='551199'>
<a class='timestamp' href='#551199'><time timestamp='2017-06-16T14:14:00Z'>14:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I tried multiple times to cache the height... but seems to be relatively difficult to do it right
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622440' id='551200'>
<a class='timestamp' href='#551200'><time timestamp='2017-06-16T14:14:00Z'>14:14</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that would also be reduced with factor 6 if it were to be done in one go
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622440' id='551201'>
<a class='timestamp' href='#551201'><time timestamp='2017-06-16T14:14:00Z'>14:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Yes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622500' id='551202'>
<a class='timestamp' href='#551202'><time timestamp='2017-06-16T14:15:00Z'>14:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
That would be related to 10251 but with a bigger ramification
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622500' id='551203'>
<a class='timestamp' href='#551203'><time timestamp='2017-06-16T14:15:00Z'>14:15</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
I mean <b>*ideally*</b> the wallet would compute balance incremementally
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622500' id='551204'>
<a class='timestamp' href='#551204'><time timestamp='2017-06-16T14:15:00Z'>14:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I think the pure atomic caches is a first step... even if we then can throw away all down to a sigle cache
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622560' id='551205'>
<a class='timestamp' href='#551205'><time timestamp='2017-06-16T14:16:00Z'>14:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
wumpus: Yes.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622560' id='551206'>
<a class='timestamp' href='#551206'><time timestamp='2017-06-16T14:16:00Z'>14:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
It should keep basepoints at certain height/states
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622560' id='551207'>
<a class='timestamp' href='#551207'><time timestamp='2017-06-16T14:16:00Z'>14:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
but if we had to do a pass over the entire wallet it&#x27;s by far best to do it only once
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622560' id='551208'>
<a class='timestamp' href='#551208'><time timestamp='2017-06-16T14:16:00Z'>14:16</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right, it&#x27;s extremely complex to get right, which is why it was never done
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622560' id='551209'>
<a class='timestamp' href='#551209'><time timestamp='2017-06-16T14:16:00Z'>14:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Indeed, ... and we should probably do in – as most things – in a background thread (GUI wise)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622620' id='551210'>
<a class='timestamp' href='#551210'><time timestamp='2017-06-16T14:17:00Z'>14:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
If the node coms where in a background thread, nobody would tackle this
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622620' id='551211'>
<a class='timestamp' href='#551211'><time timestamp='2017-06-16T14:17:00Z'>14:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
e.g. there are so many small things that can change how a transaction is counted
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622620' id='551212'>
<a class='timestamp' href='#551212'><time timestamp='2017-06-16T14:17:00Z'>14:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
right, if the computation was not in the GUI thread, it&#x27;d be much less bad
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622620' id='551213'>
<a class='timestamp' href='#551213'><time timestamp='2017-06-16T14:17:00Z'>14:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
there would be some unnoticable lag
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622620' id='551214'>
<a class='timestamp' href='#551214'><time timestamp='2017-06-16T14:17:00Z'>14:17</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
if you get rid of the dirty flag and compute balance with each transactions that effectively would move computation to a background thread. still might lock up gui because of holding cs_main though
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622620' id='551215'>
<a class='timestamp' href='#551215'><time timestamp='2017-06-16T14:17:00Z'>14:17</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
instead of the thing hanging and complaining
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622680' id='551216'>
<a class='timestamp' href='#551216'><time timestamp='2017-06-16T14:18:00Z'>14:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ryanofsky: but that&#x27;d be crazy, it&#x27;d make receiving transactions quadratic
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622680' id='551217'>
<a class='timestamp' href='#551217'><time timestamp='2017-06-16T14:18:00Z'>14:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ryanofsky: if every transactions received causes a scan over the entire wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622680' id='551218'>
<a class='timestamp' href='#551218'><time timestamp='2017-06-16T14:18:00Z'>14:18</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ryanofsky: that&#x27;s why the dirty flag exists
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622740' id='551219'>
<a class='timestamp' href='#551219'><time timestamp='2017-06-16T14:19:00Z'>14:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Balances should only be calculated if the user wants them
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622740' id='551220'>
<a class='timestamp' href='#551220'><time timestamp='2017-06-16T14:19:00Z'>14:19</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
yes, what i meant above by dirty flag makes sense for rpc but not gui
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622740' id='551221'>
<a class='timestamp' href='#551221'><time timestamp='2017-06-16T14:19:00Z'>14:19</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
In the GUI, thats a bit different
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622740' id='551222'>
<a class='timestamp' href='#551222'><time timestamp='2017-06-16T14:19:00Z'>14:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ryanofsky: right now it makes sense for the GUI too, as it&#x27;s only polled 4 times per second
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622740' id='551223'>
<a class='timestamp' href='#551223'><time timestamp='2017-06-16T14:19:00Z'>14:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ryanofsky: so it&#x27;s naturally rate limited
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622740' id='551224'>
<a class='timestamp' href='#551224'><time timestamp='2017-06-16T14:19:00Z'>14:19</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
ryanofsky: if you get 400 transactions per second, it still only computes 4 times per second
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622740' id='551225'>
<a class='timestamp' href='#551225'><time timestamp='2017-06-16T14:19:00Z'>14:19</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
for gui users who are creating more than 4 transactions per second i guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622800' id='551226'>
<a class='timestamp' href='#551226'><time timestamp='2017-06-16T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Modern GUI frameworks often poll/call updates when the according element is visible
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622800' id='551227'>
<a class='timestamp' href='#551227'><time timestamp='2017-06-16T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
or &quot;receiving&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622800' id='551228'>
<a class='timestamp' href='#551228'><time timestamp='2017-06-16T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
this happens during initial sync
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622800' id='551229'>
<a class='timestamp' href='#551229'><time timestamp='2017-06-16T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
if you have a full wallet
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622800' id='551230'>
<a class='timestamp' href='#551230'><time timestamp='2017-06-16T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
oh, that&#x27;s true. dirty flag makes sense there too
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622800' id='551231'>
<a class='timestamp' href='#551231'><time timestamp='2017-06-16T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
people always ignore initial sync for some reason, while that is the most common source of hangs, after initial sync the GUI is pretty ok
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622800' id='551232'>
<a class='timestamp' href='#551232'><time timestamp='2017-06-16T14:20:00Z'>14:20</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
anyway to be clear i&#x27;m not suggesting getting rid of dirty flag
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622860' id='551233'>
<a class='timestamp' href='#551233'><time timestamp='2017-06-16T14:21:00Z'>14:21</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(initial sync or: more often, catching up after not running the node for a few days)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622860' id='551234'>
<a class='timestamp' href='#551234'><time timestamp='2017-06-16T14:21:00Z'>14:21</time></a>
&lt;<span class='nick nick-12'> ryanofsky</span>&gt;
i&#x27;m just saying one way to move balance computation to &quot;background thread&quot; instead of gui thread is to compute it on tx notifications in cases where that makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1497622920' id='551235'>
<a class='timestamp' href='#551235'><time timestamp='2017-06-16T14:22:00Z'>14:22</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624600' id='551236'>
<a class='timestamp' href='#551236'><time timestamp='2017-06-16T14:50:00Z'>14:50</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli: the lock report is printed when threads destruct. So, mostly at shutdown
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624600' id='551237'>
<a class='timestamp' href='#551237'><time timestamp='2017-06-16T14:50:00Z'>14:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ah.. okay.. then my fault
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624600' id='551238'>
<a class='timestamp' href='#551238'><time timestamp='2017-06-16T14:50:00Z'>14:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
cfields: have you seen the crash on OSX in current master over gitian
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624660' id='551239'>
<a class='timestamp' href='#551239'><time timestamp='2017-06-16T14:51:00Z'>14:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
It must be one of the last 10 commits
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624660' id='551240'>
<a class='timestamp' href='#551240'><time timestamp='2017-06-16T14:51:00Z'>14:51</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
could it be: <a href="https://github.com/bitcoin/bitcoin/commit/cb24c8539d1098d1a61605b452ecfa11a693320d" class="link" target="_blank">https://github.com/bitcoin/bitcoin/commit/cb24c8539d1098d1a61605b452ecfa11a693320d</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624660' id='551241'>
<a class='timestamp' href='#551241'><time timestamp='2017-06-16T14:51:00Z'>14:51</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli: no, i haven&#x27;t rebased my osx work in maybe ~1week, though
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624660' id='551242'>
<a class='timestamp' href='#551242'><time timestamp='2017-06-16T14:51:00Z'>14:51</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
I&#x27;ll fire one up now
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624720' id='551243'>
<a class='timestamp' href='#551243'><time timestamp='2017-06-16T14:52:00Z'>14:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
The crash only happens when build via gitian
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624720' id='551244'>
<a class='timestamp' href='#551244'><time timestamp='2017-06-16T14:52:00Z'>14:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
local builds are fine...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624720' id='551245'>
<a class='timestamp' href='#551245'><time timestamp='2017-06-16T14:52:00Z'>14:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli: could also be the crc32 thing
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624720' id='551246'>
<a class='timestamp' href='#551246'><time timestamp='2017-06-16T14:52:00Z'>14:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But nighly build from 15th works
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624720' id='551247'>
<a class='timestamp' href='#551247'><time timestamp='2017-06-16T14:52:00Z'>14:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
interesting
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624720' id='551248'>
<a class='timestamp' href='#551248'><time timestamp='2017-06-16T14:52:00Z'>14:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Most be the last 10 commits
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624720' id='551249'>
<a class='timestamp' href='#551249'><time timestamp='2017-06-16T14:52:00Z'>14:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli: you have binaries handy?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624720' id='551250'>
<a class='timestamp' href='#551250'><time timestamp='2017-06-16T14:52:00Z'>14:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
yes...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624720' id='551251'>
<a class='timestamp' href='#551251'><time timestamp='2017-06-16T14:52:00Z'>14:52</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
see: <a href="https://github.com/bitcoin/bitcoin/issues/10611" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10611</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624780' id='551252'>
<a class='timestamp' href='#551252'><time timestamp='2017-06-16T14:53:00Z'>14:53</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
use my builders build 176 vs 175
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624780' id='551253'>
<a class='timestamp' href='#551253'><time timestamp='2017-06-16T14:53:00Z'>14:53</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
perfect, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624780' id='551254'>
<a class='timestamp' href='#551254'><time timestamp='2017-06-16T14:53:00Z'>14:53</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
argh, i never added the osx debug symbols, did i?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624840' id='551255'>
<a class='timestamp' href='#551255'><time timestamp='2017-06-16T14:54:00Z'>14:54</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I guess no...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624900' id='551256'>
<a class='timestamp' href='#551256'><time timestamp='2017-06-16T14:55:00Z'>14:55</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
:(     
<br>
</div>

<div class='talk op-msg' data-timestamp='1497624900' id='551257'>
<a class='timestamp' href='#551257'><time timestamp='2017-06-16T14:55:00Z'>14:55</time></a>
&lt;<span class='nick nick-15'> * cfields</span>&gt;
adds it to the list
<br>
</div>

<div class='talk op-msg' data-timestamp='1497625620' id='551258'>
<a class='timestamp' href='#551258'><time timestamp='2017-06-16T15:07:00Z'>15:07</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli / sipa: <a href="https://0bin.net/paste/+O0wEWXmLDshuG97#oQTOyc4av4get3wvsrwRNwbKaTO7ODBrTotk5nbXcf3" class="link" target="_blank">https://0bin.net/paste/+O0wEWXmLDshuG97#oQTOyc4av4get3wvsrwRNwbKaTO7ODBrTotk5nbXcf3</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497628920' id='551259'>
<a class='timestamp' href='#551259'><time timestamp='2017-06-16T16:02:00Z'>16:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] jnewbery opened pull request #10612: The young person&#x27;s guide to the test_framework (master...templatefunctionaltest) <a href="https://github.com/bitcoin/bitcoin/pull/10612" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10612</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497629040' id='551260'>
<a class='timestamp' href='#551260'><time timestamp='2017-06-16T16:04:00Z'>16:04</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
anybody else having issues when cross-compiling 0.14.2 for windows in ubuntu 14?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497629160' id='551261'>
<a class='timestamp' href='#551261'><time timestamp='2017-06-16T16:06:00Z'>16:06</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
I&#x27;m getting this thing on a machine that used to compile properly until now <a href="https://0bin.net/paste/q13F+WfsGqY4fkcW#4UXO33FPpzPvu7zb-Omj6zz8tHPGiAOH18/E5ti0xNO" class="link" target="_blank">https://0bin.net/paste/q13F+WfsGqY4fkcW#4UXO33FPpzPvu7zb-Omj6zz8tHPGiAOH18/E5ti0xNO</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497629160' id='551262'>
<a class='timestamp' href='#551262'><time timestamp='2017-06-16T16:06:00Z'>16:06</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/4" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/4</a> | Export/Import wallet in a human readable, future-proof format · Issue #4 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1497629220' id='551263'>
<a class='timestamp' href='#551263'><time timestamp='2017-06-16T16:07:00Z'>16:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Victorsueca: &quot;issues&quot; is pretty vague
<br>
</div>

<div class='talk op-msg' data-timestamp='1497629220' id='551264'>
<a class='timestamp' href='#551264'><time timestamp='2017-06-16T16:07:00Z'>16:07</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
sipa: yeah, more specifically with miniupnpc apparently
<br>
</div>

<div class='talk op-msg' data-timestamp='1497629220' id='551265'>
<a class='timestamp' href='#551265'><time timestamp='2017-06-16T16:07:00Z'>16:07</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
see the 0bin
<br>
</div>

<div class='talk op-msg' data-timestamp='1497629220' id='551266'>
<a class='timestamp' href='#551266'><time timestamp='2017-06-16T16:07:00Z'>16:07</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oh, sorry i missed the link
<br>
</div>

<div class='talk op-msg' data-timestamp='1497630600' id='551267'>
<a class='timestamp' href='#551267'><time timestamp='2017-06-16T16:30:00Z'>16:30</time></a>
&lt;<span class='nick nick-7'> spudowiar</span>&gt;
o/ jnewbery 
<br>
</div>

<div class='talk op-msg' data-timestamp='1497632520' id='551268'>
<a class='timestamp' href='#551268'><time timestamp='2017-06-16T17:02:00Z'>17:02</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli: ok, i think i have the crash worked out. I&#x27;ve taken the opportunity to learn more about asm
<br>
</div>

<div class='talk op-msg' data-timestamp='1497632940' id='551269'>
<a class='timestamp' href='#551269'><time timestamp='2017-06-16T17:09:00Z'>17:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: my condolences
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633000' id='551270'>
<a class='timestamp' href='#551270'><time timestamp='2017-06-16T17:10:00Z'>17:10</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: heh. my mistake for not diving in decades ago
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633300' id='551271'>
<a class='timestamp' href='#551271'><time timestamp='2017-06-16T17:15:00Z'>17:15</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: clang is nice enough to use ebx for its stack canary, which cpuid clobbers. I&#x27;m trying to understand the PIC/ebx interaction fully before PRing something
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633360' id='551272'>
<a class='timestamp' href='#551272'><time timestamp='2017-06-16T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(context: rdrand detection)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633360' id='551273'>
<a class='timestamp' href='#551273'><time timestamp='2017-06-16T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: huh?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633360' id='551274'>
<a class='timestamp' href='#551274'><time timestamp='2017-06-16T17:16:00Z'>17:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
my PR avoids clobbering ebx...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633420' id='551275'>
<a class='timestamp' href='#551275'><time timestamp='2017-06-16T17:17:00Z'>17:17</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
more context: #10611
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633420' id='551276'>
<a class='timestamp' href='#551276'><time timestamp='2017-06-16T17:17:00Z'>17:17</time></a>
&lt;<span class='nick nick-9'> gribble</span>&gt;
<a href="https://github.com/bitcoin/bitcoin/issues/10611" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10611</a> | Gitian build (current master) crashes on OSX · Issue #10611 · bitcoin/bitcoin · GitHub
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633420' id='551277'>
<a class='timestamp' href='#551277'><time timestamp='2017-06-16T17:17:00Z'>17:17</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: my understanding is that the instruction still clobbers it, the compiler just isn&#x27;t aware of that
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633420' id='551278'>
<a class='timestamp' href='#551278'><time timestamp='2017-06-16T17:17:00Z'>17:17</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it does not clobber it
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633480' id='551279'>
<a class='timestamp' href='#551279'><time timestamp='2017-06-16T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the cpuid instruction clobbers it, but the whole asm block does not
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633480' id='551280'>
<a class='timestamp' href='#551280'><time timestamp='2017-06-16T17:18:00Z'>17:18</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it moves the old value to a temp register first, and restores it
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633540' id='551281'>
<a class='timestamp' href='#551281'><time timestamp='2017-06-16T17:19:00Z'>17:19</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
grr, i was looking at my hacked up local source. I see that now, thanks.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633540' id='551282'>
<a class='timestamp' href='#551282'><time timestamp='2017-06-16T17:19:00Z'>17:19</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
can you show me objdump -dC libbitcoin_util_a-random.o ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633600' id='551283'>
<a class='timestamp' href='#551283'><time timestamp='2017-06-16T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
yea, sec, let me revert
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633600' id='551284'>
<a class='timestamp' href='#551284'><time timestamp='2017-06-16T17:20:00Z'>17:20</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
please don&#x27;t tell the problem/solution though, I&#x27;d like to work it out
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633660' id='551285'>
<a class='timestamp' href='#551285'><time timestamp='2017-06-16T17:21:00Z'>17:21</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t expect to learn anything interesting - just want to see if the clang compiler isn&#x27;t doing something unexpected
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633720' id='551286'>
<a class='timestamp' href='#551286'><time timestamp='2017-06-16T17:22:00Z'>17:22</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
<a href="https://pastebin.com/raw/tS1TUPe0" class="link" target="_blank">https://pastebin.com/raw/tS1TUPe0</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633840' id='551287'>
<a class='timestamp' href='#551287'><time timestamp='2017-06-16T17:24:00Z'>17:24</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
oooh!
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633900' id='551288'>
<a class='timestamp' href='#551288'><time timestamp='2017-06-16T17:25:00Z'>17:25</time></a>
&lt;<span class='nick nick-4'> * sipa</span>&gt;
sees it
<br>
</div>

<div class='talk op-msg' data-timestamp='1497633960' id='551289'>
<a class='timestamp' href='#551289'><time timestamp='2017-06-16T17:26:00Z'>17:26</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
just tell me how deep i&#x27;m going to have to dive? :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634020' id='551290'>
<a class='timestamp' href='#551290'><time timestamp='2017-06-16T17:27:00Z'>17:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
hint: we&#x27;ll need different asm code for 32bit and 64bit
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634380' id='551291'>
<a class='timestamp' href='#551291'><time timestamp='2017-06-16T17:33:00Z'>17:33</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
full canary address doesn&#x27;t get restored via mov?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634440' id='551292'>
<a class='timestamp' href='#551292'><time timestamp='2017-06-16T17:34:00Z'>17:34</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634500' id='551293'>
<a class='timestamp' href='#551293'><time timestamp='2017-06-16T17:35:00Z'>17:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
see why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634560' id='551294'>
<a class='timestamp' href='#551294'><time timestamp='2017-06-16T17:36:00Z'>17:36</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
vaguely. I&#x27;m so green I&#x27;m having trouble distinguishing values from addresses. Investigating.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634740' id='551295'>
<a class='timestamp' href='#551295'><time timestamp='2017-06-16T17:39:00Z'>17:39</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
oh, so the compiler isn&#x27;t being told correctly what registers are being clobbered?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634800' id='551296'>
<a class='timestamp' href='#551296'><time timestamp='2017-06-16T17:40:00Z'>17:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: if you tell the compiler yoi clobber ebx, it will complain saying that it needs ebx for PIC
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634800' id='551297'>
<a class='timestamp' href='#551297'><time timestamp='2017-06-16T17:40:00Z'>17:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and fail to compile
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634800' id='551298'>
<a class='timestamp' href='#551298'><time timestamp='2017-06-16T17:40:00Z'>17:40</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
so the code there manually saves and restores ebx
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634860' id='551299'>
<a class='timestamp' href='#551299'><time timestamp='2017-06-16T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i believe that is fixed in a later gcc
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634860' id='551300'>
<a class='timestamp' href='#551300'><time timestamp='2017-06-16T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
gcc5
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634860' id='551301'>
<a class='timestamp' href='#551301'><time timestamp='2017-06-16T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
i suppose it needs to be movq/rbx for 64bit instead?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634860' id='551302'>
<a class='timestamp' href='#551302'><time timestamp='2017-06-16T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
indeed
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634860' id='551303'>
<a class='timestamp' href='#551303'><time timestamp='2017-06-16T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
that seems kind of stupid, now you need to write the code in mind with the knowledge what every compiler might use for special things
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634860' id='551304'>
<a class='timestamp' href='#551304'><time timestamp='2017-06-16T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
wumpus: indeed :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634860' id='551305'>
<a class='timestamp' href='#551305'><time timestamp='2017-06-16T17:41:00Z'>17:41</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: tmp needs to be a 64-bit int on 64-bit systems
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634920' id='551306'>
<a class='timestamp' href='#551306'><time timestamp='2017-06-16T17:42:00Z'>17:42</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: i&#x27;ve seen lots of rantings about gcc&#x27;s x86 pic handling in the past, i&#x27;m beginning to understand the hatred now
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634920' id='551307'>
<a class='timestamp' href='#551307'><time timestamp='2017-06-16T17:42:00Z'>17:42</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
(I suspect the cookie in ebx is not part of any official ABI convention, at least)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497634980' id='551308'>
<a class='timestamp' href='#551308'><time timestamp='2017-06-16T17:43:00Z'>17:43</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
well if you list ebx as a clobber, it sticks the cookie somewhere else. So my &quot;fix&quot; was totally accidental and wrong (and would ofc break on x86 pic).
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635040' id='551309'>
<a class='timestamp' href='#551309'><time timestamp='2017-06-16T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: oh you&#x27;re able to list ebx as a clobber?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635040' id='551310'>
<a class='timestamp' href='#551310'><time timestamp='2017-06-16T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and it compiles?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635040' id='551311'>
<a class='timestamp' href='#551311'><time timestamp='2017-06-16T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
in its defense, handling PIC on x86 32 bit is a nightmare
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635040' id='551312'>
<a class='timestamp' href='#551312'><time timestamp='2017-06-16T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
in that case, we should probably do that on x86_64
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635040' id='551313'>
<a class='timestamp' href='#551313'><time timestamp='2017-06-16T17:44:00Z'>17:44</time></a>
&lt;<span class='nick nick-16'> wumpus</span>&gt;
modern architectures, and even less modern ones, have been designed with PIC in mind, but x86 never was
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635100' id='551314'>
<a class='timestamp' href='#551314'><time timestamp='2017-06-16T17:45:00Z'>17:45</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: yea
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635160' id='551315'>
<a class='timestamp' href='#551315'><time timestamp='2017-06-16T17:46:00Z'>17:46</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you want to write a pr?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635220' id='551316'>
<a class='timestamp' href='#551316'><time timestamp='2017-06-16T17:47:00Z'>17:47</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: sure, will be a while though. Still reading/experimenting/learning
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635400' id='551317'>
<a class='timestamp' href='#551317'><time timestamp='2017-06-16T17:50:00Z'>17:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: the issue is that the 32-bit ebx register and the 64-bit rbx register occupy the same space
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635460' id='551318'>
<a class='timestamp' href='#551318'><time timestamp='2017-06-16T17:51:00Z'>17:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ebx is just a &quot;view&quot; of the lower 32 bits of rbx
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635520' id='551319'>
<a class='timestamp' href='#551319'><time timestamp='2017-06-16T17:52:00Z'>17:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
that makes sense
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635520' id='551320'>
<a class='timestamp' href='#551320'><time timestamp='2017-06-16T17:52:00Z'>17:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
and the &quot;b&quot; constraint can either mean ebx or rbx, depending on the size of the variable
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635580' id='551321'>
<a class='timestamp' href='#551321'><time timestamp='2017-06-16T17:53:00Z'>17:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
there are 8-bit and 16-bit views too
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635700' id='551322'>
<a class='timestamp' href='#551322'><time timestamp='2017-06-16T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
so the compiler adapts the mov to the register size?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635700' id='551323'>
<a class='timestamp' href='#551323'><time timestamp='2017-06-16T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
yup     
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635700' id='551324'>
<a class='timestamp' href='#551324'><time timestamp='2017-06-16T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
the assembler, rather
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635700' id='551325'>
<a class='timestamp' href='#551325'><time timestamp='2017-06-16T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ok, got it
<br>
</div>

<div class='talk op-msg' data-timestamp='1497635700' id='551326'>
<a class='timestamp' href='#551326'><time timestamp='2017-06-16T17:55:00Z'>17:55</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
thanks for the 101 :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497636420' id='551327'>
<a class='timestamp' href='#551327'><time timestamp='2017-06-16T18:07:00Z'>18:07</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: <a href="https://pastebin.com/raw/68f8cKHd" class="link" target="_blank">https://pastebin.com/raw/68f8cKHd</a> ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497636780' id='551328'>
<a class='timestamp' href='#551328'><time timestamp='2017-06-16T18:13:00Z'>18:13</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
mm, apparently that&#x27;s broken since cpuid overwrites eax
<br>
</div>

<div class='talk op-msg' data-timestamp='1497636900' id='551329'>
<a class='timestamp' href='#551329'><time timestamp='2017-06-16T18:15:00Z'>18:15</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you can list eax as an input/outpit register
<br>
</div>

<div class='talk op-msg' data-timestamp='1497636960' id='551330'>
<a class='timestamp' href='#551330'><time timestamp='2017-06-16T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but i think just listing all 4 as outputs is easier
<br>
</div>

<div class='talk op-msg' data-timestamp='1497636960' id='551331'>
<a class='timestamp' href='#551331'><time timestamp='2017-06-16T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
right, so:https://pastebin.com/BhBAHeFK
<br>
</div>

<div class='talk op-msg' data-timestamp='1497636960' id='551332'>
<a class='timestamp' href='#551332'><time timestamp='2017-06-16T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
ok     
<br>
</div>

<div class='talk op-msg' data-timestamp='1497636960' id='551333'>
<a class='timestamp' href='#551333'><time timestamp='2017-06-16T18:16:00Z'>18:16</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
will just do that. PRing. thanks again.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638040' id='551334'>
<a class='timestamp' href='#551334'><time timestamp='2017-06-16T18:34:00Z'>18:34</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
sipa: had to go for a while, any news on my issue? need extra debug info?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638220' id='551335'>
<a class='timestamp' href='#551335'><time timestamp='2017-06-16T18:37:00Z'>18:37</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
Victorsueca: i have no clue
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638340' id='551336'>
<a class='timestamp' href='#551336'><time timestamp='2017-06-16T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
Victorsueca: are you using WSL?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638400' id='551337'>
<a class='timestamp' href='#551337'><time timestamp='2017-06-16T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
achow101: yes, it has been working until now
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638400' id='551338'>
<a class='timestamp' href='#551338'><time timestamp='2017-06-16T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
IIRC it wasn&#x27;t working for the past few months
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638400' id='551339'>
<a class='timestamp' href='#551339'><time timestamp='2017-06-16T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
(at least not on my machines)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638400' id='551340'>
<a class='timestamp' href='#551340'><time timestamp='2017-06-16T18:40:00Z'>18:40</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
I successfully did a gitian build on 0.14.1.  It took days to grok the web pages, and about 7 hours to execute.  I have placed some shell scripts at <a href="https://github.com/a-mcintosh/gitian-bitcoin-shell-scripts" class="link" target="_blank">https://github.com/a-mcintosh/gitian-bitcoin-shell-scripts</a> and these scripts capture the workflow mentioned at <a href="https://github.com/bitcoin/bitcoin/blob/master/doc/gitian-building.md#create-a-new-virtualbox-vm" class="link" target="_blank">https://github.com/bitcoin/bitcoin/blob/master/doc/gitian-building.md#create-a-new-virtualbox-vm</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638460' id='551341'>
<a class='timestamp' href='#551341'><time timestamp='2017-06-16T18:41:00Z'>18:41</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
7h?!
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638520' id='551342'>
<a class='timestamp' href='#551342'><time timestamp='2017-06-16T18:42:00Z'>18:42</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
DId you pass in -j2 or -j4?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638580' id='551343'>
<a class='timestamp' href='#551343'><time timestamp='2017-06-16T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
the last version i&#x27;ve built succefully on my WSL was 0.14.1, now I&#x27;m on the same machine and it won&#x27;t do the depends for 0.14.2
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638580' id='551344'>
<a class='timestamp' href='#551344'><time timestamp='2017-06-16T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
Victorsueca: try <a href="https://github.com/bitcoin/bitcoin/issues/10269#issuecomment-307293086" class="link" target="_blank">https://github.com/bitcoin/bitcoin/issues/10269#issuecomment-307293086</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638580' id='551345'>
<a class='timestamp' href='#551345'><time timestamp='2017-06-16T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
lol.  At this point I&#x27;m so fatigued, I don&#x27;t even know my own name.  It does seem pretty slow.  Have a look at the scripts and see if you spot any trouble.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638580' id='551346'>
<a class='timestamp' href='#551346'><time timestamp='2017-06-16T18:43:00Z'>18:43</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
ProfMac: machine without hardware virtualization?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638640' id='551347'>
<a class='timestamp' href='#551347'><time timestamp='2017-06-16T18:44:00Z'>18:44</time></a>
&lt;<span class='nick nick-1'> achow101</span>&gt;
ProfMac: perhaps try using kvm instead of lxc? it will need to run on hardware and not in a vm though
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638760' id='551348'>
<a class='timestamp' href='#551348'><time timestamp='2017-06-16T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
achow101: that seems to work \o/
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638760' id='551349'>
<a class='timestamp' href='#551349'><time timestamp='2017-06-16T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-8'> Victorsueca</span>&gt;
thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638760' id='551350'>
<a class='timestamp' href='#551350'><time timestamp='2017-06-16T18:46:00Z'>18:46</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
Probably just not configured correctly.  One of the scripts creates the virtualbox, so that can be corrected.  5.7 GiB RAM, Intel Core 2 Duo CPU E8400 @ 3.00 GHz x 2 Ubuntu 14.04 LTS 2.0 TB online.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638820' id='551351'>
<a class='timestamp' href='#551351'><time timestamp='2017-06-16T18:47:00Z'>18:47</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
what kind of build times to others have?  My impression was that it build the entire Trusty system from source during the process.  
<br>
</div>

<div class='talk op-msg' data-timestamp='1497638880' id='551352'>
<a class='timestamp' href='#551352'><time timestamp='2017-06-16T18:48:00Z'>18:48</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
I don&#x27;t know how to peek inside gitian-builder/target-trusty-amd64
<br>
</div>

<div class='talk op-msg' data-timestamp='1497639000' id='551353'>
<a class='timestamp' href='#551353'><time timestamp='2017-06-16T18:50:00Z'>18:50</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ProfMac: my build times are at bitcoin.jonasschnelli.ch
<br>
</div>

<div class='talk op-msg' data-timestamp='1497639060' id='551354'>
<a class='timestamp' href='#551354'><time timestamp='2017-06-16T18:51:00Z'>18:51</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
Could I just make a new Trusty VM and do the build there?  If I restore a &quot;bare&quot; snapshot before each build, what do I give up?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497639240' id='551355'>
<a class='timestamp' href='#551355'><time timestamp='2017-06-16T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
jonasschnelli, thanks, but I get a 403 forbidden when I drop that into an address bar.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497639240' id='551356'>
<a class='timestamp' href='#551356'><time timestamp='2017-06-16T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
<a href="https://bitcoin.jonasschnelli.ch" class="link" target="_blank">https://bitcoin.jonasschnelli.ch</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497639240' id='551357'>
<a class='timestamp' href='#551357'><time timestamp='2017-06-16T18:54:00Z'>18:54</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Oh.. the SSL forwarder seems broken
<br>
</div>

<div class='talk op-msg' data-timestamp='1497639300' id='551358'>
<a class='timestamp' href='#551358'><time timestamp='2017-06-16T18:55:00Z'>18:55</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
I&#x27;m at the page.  Nice homage to Matrix, unless like me you still see pink after a night at the CRT.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497639540' id='551359'>
<a class='timestamp' href='#551359'><time timestamp='2017-06-16T18:59:00Z'>18:59</time></a>
&lt;<span class='nick nick-7'> ProfMac</span>&gt;
Oh my.  21 minutes vs 7 hours.  LOL.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497639720' id='551360'>
<a class='timestamp' href='#551360'><time timestamp='2017-06-16T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] theuni opened pull request #10614: random: fix crash on some 64bit platforms (master...fix-osx-crash) <a href="https://github.com/bitcoin/bitcoin/pull/10614" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10614</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497639720' id='551361'>
<a class='timestamp' href='#551361'><time timestamp='2017-06-16T19:02:00Z'>19:02</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
jonasschnelli: ^^
<br>
</div>

<div class='talk op-msg' data-timestamp='1497640140' id='551362'>
<a class='timestamp' href='#551362'><time timestamp='2017-06-16T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: also, for reusable code (if we want to use hw sha instruction or something, you can use &quot;xchg %1, %%ebx&quot; instead of mov, and get the real ebx out
<br>
</div>

<div class='talk op-msg' data-timestamp='1497640140' id='551363'>
<a class='timestamp' href='#551363'><time timestamp='2017-06-16T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: heh, i meant to ask about that. that&#x27;s what gcc does internally
<br>
</div>

<div class='talk op-msg' data-timestamp='1497640140' id='551364'>
<a class='timestamp' href='#551364'><time timestamp='2017-06-16T19:09:00Z'>19:09</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
not suggesting to do that here, but it&#x27;s hardly harder to write a generic &quot;cpuid number -&gt; give me a tuple of 4 uint32_t&quot; function
<br>
</div>

<div class='talk op-msg' data-timestamp='1497640380' id='551365'>
<a class='timestamp' href='#551365'><time timestamp='2017-06-16T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: you mean just drop the special case and always stash b?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497640380' id='551366'>
<a class='timestamp' href='#551366'><time timestamp='2017-06-16T19:13:00Z'>19:13</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: i think your PR is fine
<br>
</div>

<div class='talk op-msg' data-timestamp='1497640440' id='551367'>
<a class='timestamp' href='#551367'><time timestamp='2017-06-16T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but maybe later if we ever have multiple things to query cpuid for
<br>
</div>

<div class='talk op-msg' data-timestamp='1497640440' id='551368'>
<a class='timestamp' href='#551368'><time timestamp='2017-06-16T19:14:00Z'>19:14</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: well i&#x27;m pretty sure I whined about it not being generic in your original PR :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1497640500' id='551369'>
<a class='timestamp' href='#551369'><time timestamp='2017-06-16T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
cfields: nice. Just started a build: <a href="https://bitcoin.jonasschnelli.ch/build/181" class="link" target="_blank">https://bitcoin.jonasschnelli.ch/build/181</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497640500' id='551370'>
<a class='timestamp' href='#551370'><time timestamp='2017-06-16T19:15:00Z'>19:15</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: heh, yea: <a href="https://github.com/bitcoin/bitcoin/pull/10377#pullrequestreview-37172453" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10377#pullrequestreview-37172453</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497641700' id='551371'>
<a class='timestamp' href='#551371'><time timestamp='2017-06-16T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/c2ab38bdd57a...7a74f88a26cf" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/c2ab38bdd57a...7a74f88a26cf</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497641700' id='551372'>
<a class='timestamp' href='#551372'><time timestamp='2017-06-16T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master cc0ed26 Pavel Janík: Supress struct/class mismatch warnings introduced in #10284.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497641700' id='551373'>
<a class='timestamp' href='#551373'><time timestamp='2017-06-16T19:35:00Z'>19:35</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 7a74f88 Pieter Wuille: Merge #10598: Supress struct/class mismatch warnings introduced in #10284...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497641760' id='551374'>
<a class='timestamp' href='#551374'><time timestamp='2017-06-16T19:36:00Z'>19:36</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #10598: Supress struct/class mismatch warnings introduced in #10284 (master...20170615_FeeCalculation_structclass) <a href="https://github.com/bitcoin/bitcoin/pull/10598" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10598</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642600' id='551375'>
<a class='timestamp' href='#551375'><time timestamp='2017-06-16T19:50:00Z'>19:50</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: we&#x27;re using gcc 4.8 for win and linux builds, which i think has a sufficiently mature LTO implementation; any opinion on using it in release builds?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642660' id='551376'>
<a class='timestamp' href='#551376'><time timestamp='2017-06-16T19:51:00Z'>19:51</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i don&#x27;t know the status of LTO in clang
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642720' id='551377'>
<a class='timestamp' href='#551377'><time timestamp='2017-06-16T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: my main concern is that we could see a discrepancy between release binaries and what devs run
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642720' id='551378'>
<a class='timestamp' href='#551378'><time timestamp='2017-06-16T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: why?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642720' id='551379'>
<a class='timestamp' href='#551379'><time timestamp='2017-06-16T19:52:00Z'>19:52</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
as even with gcc7, linking still takes a long time. I don&#x27;t think we could enable it by default, it&#x27;d have to be in gitian
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642780' id='551380'>
<a class='timestamp' href='#551380'><time timestamp='2017-06-16T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it does take less memory too
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642780' id='551381'>
<a class='timestamp' href='#551381'><time timestamp='2017-06-16T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
maybe a generic &quot;optimized build&quot; available from configure and one that isn&#x27;t, and gitian uses optimized
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642780' id='551382'>
<a class='timestamp' href='#551382'><time timestamp='2017-06-16T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
(not opposed, just considering the downsides)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642780' id='551383'>
<a class='timestamp' href='#551383'><time timestamp='2017-06-16T19:53:00Z'>19:53</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s a good point to bring up
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642840' id='551384'>
<a class='timestamp' href='#551384'><time timestamp='2017-06-16T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i like that it categorically removes the concern about whether code needs to go in a header or not :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642840' id='551385'>
<a class='timestamp' href='#551385'><time timestamp='2017-06-16T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: yea, that sounds reasonable
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642840' id='551386'>
<a class='timestamp' href='#551386'><time timestamp='2017-06-16T19:54:00Z'>19:54</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
heh     
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642900' id='551387'>
<a class='timestamp' href='#551387'><time timestamp='2017-06-16T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
speaking of which, i worked on pre-compiled headers a few days ago. Shaved roughly ~30% off of build time
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642900' id='551388'>
<a class='timestamp' href='#551388'><time timestamp='2017-06-16T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: another one of the big benefits is that our deps can be lto&#x27;d as well. I suspect static lto&#x27;d qt would be a big win for filesize
<br>
</div>

<div class='talk op-msg' data-timestamp='1497642900' id='551389'>
<a class='timestamp' href='#551389'><time timestamp='2017-06-16T19:55:00Z'>19:55</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
but again, that makes linking take forever
<br>
</div>

<div class='talk op-msg' data-timestamp='1497643020' id='551390'>
<a class='timestamp' href='#551390'><time timestamp='2017-06-16T19:57:00Z'>19:57</time></a>
&lt;<span class='nick nick-15'> * cfields</span>&gt;
kicks off an lto&#x27;d qt build out of curiosity
<br>
</div>

<div class='talk op-msg' data-timestamp='1497643140' id='551391'>
<a class='timestamp' href='#551391'><time timestamp='2017-06-16T19:59:00Z'>19:59</time></a>
&lt;<span class='nick nick-6'> TD-Linux</span>&gt;
cfields, <a href="https://git.xiph.org/?p=opus.git;a=blob;f=celt" class="link" target="_blank">https://git.xiph.org/?p=opus.git;a=blob;f=celt</a>/x86/x86cpu.c;h=080eb25e413d9e6587a419933d85ea9a6243b46e;hb=HEAD#l61
<br>
</div>

<div class='talk op-msg' data-timestamp='1497643200' id='551392'>
<a class='timestamp' href='#551392'><time timestamp='2017-06-16T20:00:00Z'>20:00</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
TD-Linux: hah. Always research first how other did it. ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497643320' id='551393'>
<a class='timestamp' href='#551393'><time timestamp='2017-06-16T20:02:00Z'>20:02</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
*others
<br>
</div>

<div class='talk op-msg' data-timestamp='1497643380' id='551394'>
<a class='timestamp' href='#551394'><time timestamp='2017-06-16T20:03:00Z'>20:03</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
heh, yep
<br>
</div>

<div class='talk op-msg' data-timestamp='1497643740' id='551395'>
<a class='timestamp' href='#551395'><time timestamp='2017-06-16T20:09:00Z'>20:09</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
has anyone benchmarked LTO vs normal?
<br>
</div>

<div class='talk op-msg' data-timestamp='1497644640' id='551396'>
<a class='timestamp' href='#551396'><time timestamp='2017-06-16T20:24:00Z'>20:24</time></a>
&lt;<span class='nick nick-16'> luke-jr</span>&gt;
jonasschnelli: please add sources for companies you add to <a href="https://en.bitcoin.it/wiki/Segwit_support" class="link" target="_blank">https://en.bitcoin.it/wiki/Segwit_support</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497646380' id='551397'>
<a class='timestamp' href='#551397'><time timestamp='2017-06-16T20:53:00Z'>20:53</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] luke-jr opened pull request #10615: RPC: Allow rpcauth configs to specify a 4th parameter naming a specific wallet (master...multiwallet_rpc) <a href="https://github.com/bitcoin/bitcoin/pull/10615" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10615</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497650580' id='551398'>
<a class='timestamp' href='#551398'><time timestamp='2017-06-16T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/7a74f88a26cf...d76e84a21416" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/7a74f88a26cf...d76e84a21416</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497650580' id='551399'>
<a class='timestamp' href='#551399'><time timestamp='2017-06-16T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master 131a8ce practicalswift: Make clang-format use C++11 features (e.g. A&lt;A&lt;int&gt;&gt; instead of A&lt;A&lt;int&gt; &gt;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497650580' id='551400'>
<a class='timestamp' href='#551400'><time timestamp='2017-06-16T22:03:00Z'>22:03</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master d76e84a Pieter Wuille: Merge #10602: Make clang-format use C++11 features (e.g. A&lt;A&lt;int&gt;&gt; instead of A&lt;A&lt;int&gt; &gt;)...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497650640' id='551401'>
<a class='timestamp' href='#551401'><time timestamp='2017-06-16T22:04:00Z'>22:04</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #10602: Make clang-format use C++11 features (e.g. A&lt;A&lt;int&gt;&gt; instead of A&lt;A&lt;int&gt; &gt;) (master...clang-format-cpp11) <a href="https://github.com/bitcoin/bitcoin/pull/10602" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10602</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497652920' id='551402'>
<a class='timestamp' href='#551402'><time timestamp='2017-06-16T22:42:00Z'>22:42</time></a>
&lt;<span class='nick nick-5'> midnightmagic</span>&gt;
eek why is there only two of us signing the windows signed executables :-P
<br>
</div>

<div class='talk op-msg' data-timestamp='1497654240' id='551403'>
<a class='timestamp' href='#551403'><time timestamp='2017-06-16T23:04:00Z'>23:04</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: I&#x27;m confused about <a href="https://github.com/bitcoin-core/leveldb/commit/196962ff01c39b4705d8117df5c3f8c205349950" class="link" target="_blank">https://github.com/bitcoin-core/leveldb/commit/196962ff01c39b4705d8117df5c3f8c205349950</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497654300' id='551404'>
<a class='timestamp' href='#551404'><time timestamp='2017-06-16T23:05:00Z'>23:05</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
how does that manage to link? there&#x27;s no definition that returns zero
<br>
</div>

<div class='talk op-msg' data-timestamp='1497654300' id='551405'>
<a class='timestamp' href='#551405'><time timestamp='2017-06-16T23:05:00Z'>23:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
cfields: the implementation is in posix_sse.c
<br>
</div>

<div class='talk op-msg' data-timestamp='1497654300' id='551406'>
<a class='timestamp' href='#551406'><time timestamp='2017-06-16T23:05:00Z'>23:05</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
which apparently gets linked in
<br>
</div>

<div class='talk op-msg' data-timestamp='1497654360' id='551407'>
<a class='timestamp' href='#551407'><time timestamp='2017-06-16T23:06:00Z'>23:06</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
sipa: ah, that&#x27;s our problem then. leveldb&#x27;s build doesn&#x27;t link that in
<br>
</div>

<div class='talk op-msg' data-timestamp='1497654360' id='551408'>
<a class='timestamp' href='#551408'><time timestamp='2017-06-16T23:06:00Z'>23:06</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
...but that would mean windows is broken upstream
<br>
</div>

<div class='talk op-msg' data-timestamp='1497654360' id='551409'>
<a class='timestamp' href='#551409'><time timestamp='2017-06-16T23:06:00Z'>23:06</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
windows does not <u>_exist_</u> upstream
<br>
</div>

<div class='talk op-msg' data-timestamp='1497654360' id='551410'>
<a class='timestamp' href='#551410'><time timestamp='2017-06-16T23:06:00Z'>23:06</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
oooooh :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1497654420' id='551411'>
<a class='timestamp' href='#551411'><time timestamp='2017-06-16T23:07:00Z'>23:07</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
hehe, got it. will fix.
<br>
</div>

<div class='talk op-msg' data-timestamp='1497654480' id='551412'>
<a class='timestamp' href='#551412'><time timestamp='2017-06-16T23:08:00Z'>23:08</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
i see. so we patched up their build discovery stuff at one point, but stopped when we migrated it into our build
<br>
</div>

<div class='talk op-msg' data-timestamp='1497654480' id='551413'>
<a class='timestamp' href='#551413'><time timestamp='2017-06-16T23:08:00Z'>23:08</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
right, and we don&#x27;t run the tests for the windows build
<br>
</div>

<div class='talk op-msg' data-timestamp='1497654540' id='551414'>
<a class='timestamp' href='#551414'><time timestamp='2017-06-16T23:09:00Z'>23:09</time></a>
&lt;<span class='nick nick-13'> cfields</span>&gt;
got it, thanks
<br>
</div>

<div class='talk op-msg' data-timestamp='1497656220' id='551415'>
<a class='timestamp' href='#551415'><time timestamp='2017-06-16T23:37:00Z'>23:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa pushed 2 new commits to master: <a href="https://github.com/bitcoin/bitcoin/compare/d76e84a21416...de8db47b7ff3" class="link" target="_blank">https://github.com/bitcoin/bitcoin/compare/d76e84a21416...de8db47b7ff3</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1497656220' id='551416'>
<a class='timestamp' href='#551416'><time timestamp='2017-06-16T23:37:00Z'>23:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master f2fb132 practicalswift: Net: Fix resource leak in ReadBinaryFile(...)...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497656220' id='551417'>
<a class='timestamp' href='#551417'><time timestamp='2017-06-16T23:37:00Z'>23:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
bitcoin/master de8db47 Pieter Wuille: Merge #10587: Net: Fix resource leak in ReadBinaryFile(...)...
<br>
</div>

<div class='talk op-msg' data-timestamp='1497656220' id='551418'>
<a class='timestamp' href='#551418'><time timestamp='2017-06-16T23:37:00Z'>23:37</time></a>
&lt;<span class='nick nick-11'> bitcoin-git</span>&gt;
[bitcoin] sipa closed pull request #10587: Net: Fix resource leak in ReadBinaryFile(...) (master...fopen-not-followed-by-fclose-in-all-states-of-the-universe) <a href="https://github.com/bitcoin/bitcoin/pull/10587" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/10587</a>
<br>
</div>

</div>
</section>

</body>
</html>
