<!DOCTYPE html>
<html>
<title>
#bitcoin-core-dev
 on 2015-12-16
 â€” 
searchable irc log
</title>
<meta charset='utf-8'>
<meta content='IE=9' http-equiv='X-UA-Compatible'>
<link href='/style-light.css' id='stylesheet' rel='stylesheet'>
<link href='/favicon.png' rel='shortcut icon'>
<link href='http://chaincode.com/bitcoin-core-dev/2015-12-16' rel='canonical'>
<meta content='channel #bitcoin-core-dev IRC chat logs' name='description'>
<script src='/jquery.min.js'></script>
<script src='/jquery.ba-hashchange.min.js'></script>
<script src='/cookies.min.js'></script>
<script src='/application.js'></script>
<body>
<section id='sidebar'>
<section id='calendar'>
<pre class='clock'>17:27 UTC</pre>
<pre><a href="/bitcoin-core-dev/2015-11-16">&lt;</a><span class='header'>  December 2015   </span><a href="/bitcoin-core-dev/2016-01-16">&gt;</a>&#x000A;<span class='header'>Su Mo Tu We Th Fr Sa  </span>&#x000A;       <a class="" href="/bitcoin-core-dev/2015-12-01">1</a>  <a class="" href="/bitcoin-core-dev/2015-12-02">2</a>  <a class="" href="/bitcoin-core-dev/2015-12-03">3</a>  <a class="" href="/bitcoin-core-dev/2015-12-04">4</a>  <a class="" href="/bitcoin-core-dev/2015-12-05">5</a>  &#x000A; <a class="" href="/bitcoin-core-dev/2015-12-06">6</a>  <a class="" href="/bitcoin-core-dev/2015-12-07">7</a>  <a class="" href="/bitcoin-core-dev/2015-12-08">8</a>  <a class="" href="/bitcoin-core-dev/2015-12-09">9</a> <a class="" href="/bitcoin-core-dev/2015-12-10">10</a> <a class="" href="/bitcoin-core-dev/2015-12-11">11</a> <a class="" href="/bitcoin-core-dev/2015-12-12">12</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-12-13">13</a> <a class="" href="/bitcoin-core-dev/2015-12-14">14</a> <a class="" href="/bitcoin-core-dev/2015-12-15">15</a> <a class="current" href="/bitcoin-core-dev/2015-12-16">16</a> <a class="" href="/bitcoin-core-dev/2015-12-17">17</a> <a class="" href="/bitcoin-core-dev/2015-12-18">18</a> <a class="" href="/bitcoin-core-dev/2015-12-19">19</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-12-20">20</a> <a class="" href="/bitcoin-core-dev/2015-12-21">21</a> <a class="" href="/bitcoin-core-dev/2015-12-22">22</a> <a class="" href="/bitcoin-core-dev/2015-12-23">23</a> <a class="" href="/bitcoin-core-dev/2015-12-24">24</a> <a class="" href="/bitcoin-core-dev/2015-12-25">25</a> <a class="" href="/bitcoin-core-dev/2015-12-26">26</a>  &#x000A;<a class="" href="/bitcoin-core-dev/2015-12-27">27</a> <a class="" href="/bitcoin-core-dev/2015-12-28">28</a> <a class="" href="/bitcoin-core-dev/2015-12-29">29</a> <a class="" href="/bitcoin-core-dev/2015-12-30">30</a> <a class="" href="/bitcoin-core-dev/2015-12-31">31</a></pre>
</section>
<section id='options'>
<form action='/bitcoin-core-dev/search'>
<input id='search-box' name='q' placeholder='Enter keywords'>
<input type='submit' value='Search'>
<br/>
<br/>
<p>This is a searchable archive of <a href=/bitcoin-core-dev>#bitcoin-core-dev</a> irc</p>
<br/>
<small>
<b>Examples</b>
<br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=bitcoin">bitcoin</a>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=*BIP*">*BIP*</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22bitcoin-git%22">bitcoin-git</a><br/>
<a href="http://bitcoin-irc.chaincode.com/bitcoin-core-dev/search?q=%22core-meetingbot%22">core-meetingbot</a>
<br/>
<br/>
</small>
<small>Search supports standard MySQL <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html">fulltext search operations</a></small>
<br/>
<br/>
<small>Click on the timestamp of a message for a sharable link</small>
<br/>
<br/>
<small>Message timestamps are in UTC</small>
<br/>
<br/>
<small>This archive is hosted by <a href="http://chaincode.com">Chaincode</a> and runs on <a href="https://github.com/whitequark/irclogger">irclogger</a></small>
<br/>
</form>
</section>
</section>
<section class='without-noise' data-channel='#bitcoin-core-dev' id='log'>
<aside id='log-panel'>
<a href='#' id='light_dark'></a>
<label for='filter'>
Filter:
</label>
<input id='filter'>
<span class='clear-input' id='clear_filter' style='display:none'></span>
<div class='input-group'>
<input id='show_noise' type='checkbox'>
<label for='show_noise'>
Show join/leave messages
</label>
</div>
</aside>
<div class='log-messages with-panel'>
<div class='talk op-msg' data-timestamp='1450226040' id='444616'>
<a class='timestamp' href='#444616'><time timestamp='2015-12-16T00:34:00Z'>00:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
jamesob: i&#x27;m also working on CNB improvements right now
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226040' id='444617'>
<a class='timestamp' href='#444617'><time timestamp='2015-12-16T00:34:00Z'>00:34</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
however the background threading was further down my list, so perhaps we can coordinate our work to some degree
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226100' id='444618'>
<a class='timestamp' href='#444618'><time timestamp='2015-12-16T00:35:00Z'>00:35</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
right now i&#x27;m refactoring CNB into a class (i should have just done that last time)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226460' id='444619'>
<a class='timestamp' href='#444619'><time timestamp='2015-12-16T00:41:00Z'>00:41</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i&#x27;d be interested in understanding exactly what you&#x27;re trying to accomplish though, b/c it&#x27;s not really clear to me how to gain a whole lot without much more locking rework.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226520' id='444620'>
<a class='timestamp' href='#444620'><time timestamp='2015-12-16T00:42:00Z'>00:42</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
certainly there are a couple of good ideas that should be implemented and which we&#x27;ve seen PR&#x27;s take a stab at though:
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226520' id='444621'>
<a class='timestamp' href='#444621'><time timestamp='2015-12-16T00:42:00Z'>00:42</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
1) moving TestBlockValidity to a background thread (although its not clear how easy it is to make this interuptable and this is 90% of the time of CNB right now)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226580' id='444622'>
<a class='timestamp' href='#444622'><time timestamp='2015-12-16T00:43:00Z'>00:43</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
2) returning a template based on no txs after a new tip
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226640' id='444623'>
<a class='timestamp' href='#444623'><time timestamp='2015-12-16T00:44:00Z'>00:44</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
making CNB as a whole run in the background would make taking TBV out of the delay very easy: just set the stored CNB result before verifying it
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226640' id='444624'>
<a class='timestamp' href='#444624'><time timestamp='2015-12-16T00:44:00Z'>00:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
3) interrupting the cs_main lock required for block assembly (before TBV) when a new tip comes in, although now this is only 10-20ms and it really shouldn&#x27;t require so much cs_main as a mempool lock which just happens to be cs_main now
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226700' id='444625'>
<a class='timestamp' href='#444625'><time timestamp='2015-12-16T00:45:00Z'>00:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: i suppose that&#x27;s true.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226760' id='444626'>
<a class='timestamp' href='#444626'><time timestamp='2015-12-16T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i guess it just seems to me that its almost more logical to let the caller dictate when (how often) the new block is assembled
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226760' id='444627'>
<a class='timestamp' href='#444627'><time timestamp='2015-12-16T00:46:00Z'>00:46</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
the latency is irrelvant except when a new tip comes in, and thats really the interupt function you need to get right
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226820' id='444628'>
<a class='timestamp' href='#444628'><time timestamp='2015-12-16T00:47:00Z'>00:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
and then can work just as well or even better in the same thread
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226820' id='444629'>
<a class='timestamp' href='#444629'><time timestamp='2015-12-16T00:47:00Z'>00:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
longpoll returns after a) some specified amount of time has passed, and then at the end of it a new template is created or b) a new tip comes in
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226820' id='444630'>
<a class='timestamp' href='#444630'><time timestamp='2015-12-16T00:47:00Z'>00:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
i mean it really already is a &quot;background&quot; thread
<br>
</div>

<div class='talk op-msg' data-timestamp='1450226880' id='444631'>
<a class='timestamp' href='#444631'><time timestamp='2015-12-16T00:48:00Z'>00:48</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
you just want to return the result before running TestBlockValidity, and you want to have an interupt for new tips
<br>
</div>

<div class='talk op-msg' data-timestamp='1450227000' id='444632'>
<a class='timestamp' href='#444632'><time timestamp='2015-12-16T00:50:00Z'>00:50</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Or am I missing that there is some advantage of immediately returning a template that is Y seconds old when you call gbt instead of having to wait X seconds for a template that is X seconds old where X is by definition less than Y b/c X is the block assembly time
<br>
</div>

<div class='talk op-msg' data-timestamp='1450227240' id='444633'>
<a class='timestamp' href='#444633'><time timestamp='2015-12-16T00:54:00Z'>00:54</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: do you have any thoughts on the feasibility of making ConnectBlock interuptable?  That seems to me its always going to be an issue with generating a lot of different blocks if you want to keep testing them.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232700' id='444634'>
<a class='timestamp' href='#444634'><time timestamp='2015-12-16T02:25:00Z'>02:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: please do not further complicate getblocktemplate
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232700' id='444635'>
<a class='timestamp' href='#444635'><time timestamp='2015-12-16T02:25:00Z'>02:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
we want to move complexity out of pool servers and into bitcoind, not the other way around
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232700' id='444636'>
<a class='timestamp' href='#444636'><time timestamp='2015-12-16T02:25:00Z'>02:25</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(pool servers are largely bit proprietary blobs that get essentially no external review, whereas bitcoin core is....not that)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232820' id='444637'>
<a class='timestamp' href='#444637'><time timestamp='2015-12-16T02:27:00Z'>02:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
morcos: i&#x27;d rather just not always call TBV... <b>*ducks*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232820' id='444638'>
<a class='timestamp' href='#444638'><time timestamp='2015-12-16T02:27:00Z'>02:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: noooooooooooooooooo
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232820' id='444639'>
<a class='timestamp' href='#444639'><time timestamp='2015-12-16T02:27:00Z'>02:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
that shit has been so broken up until literally the latest release
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232820' id='444640'>
<a class='timestamp' href='#444640'><time timestamp='2015-12-16T02:27:00Z'>02:27</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
there is no way in hell we should remove that check
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232820' id='444641'>
<a class='timestamp' href='#444641'><time timestamp='2015-12-16T02:27:00Z'>02:27</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
i am not saying remove it
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232880' id='444642'>
<a class='timestamp' href='#444642'><time timestamp='2015-12-16T02:28:00Z'>02:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
but just call it 1% or 10% of the time or so
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232880' id='444643'>
<a class='timestamp' href='#444643'><time timestamp='2015-12-16T02:28:00Z'>02:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s there to detect software bugs
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232880' id='444644'>
<a class='timestamp' href='#444644'><time timestamp='2015-12-16T02:28:00Z'>02:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s not there to prevent incorrect responses
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232880' id='444645'>
<a class='timestamp' href='#444645'><time timestamp='2015-12-16T02:28:00Z'>02:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: it is absolutely there to prevent incorrect responses
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232880' id='444646'>
<a class='timestamp' href='#444646'><time timestamp='2015-12-16T02:28:00Z'>02:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
up until the latest release there were known bugs which made it required
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232880' id='444647'>
<a class='timestamp' href='#444647'><time timestamp='2015-12-16T02:28:00Z'>02:28</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(well assuming you dont check txn as you go, which we now dont)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232880' id='444648'>
<a class='timestamp' href='#444648'><time timestamp='2015-12-16T02:28:00Z'>02:28</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
... and cause the software to crash?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232940' id='444649'>
<a class='timestamp' href='#444649'><time timestamp='2015-12-16T02:29:00Z'>02:29</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
it&#x27;s an assert
<br>
</div>

<div class='talk op-msg' data-timestamp='1450232940' id='444650'>
<a class='timestamp' href='#444650'><time timestamp='2015-12-16T02:29:00Z'>02:29</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
it isnt anymore
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233180' id='444651'>
<a class='timestamp' href='#444651'><time timestamp='2015-12-16T02:33:00Z'>02:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: in any case, my view for getblocktemplate refactors, which should be a few small changes (that I suggested to jamesob last night) is
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233180' id='444652'>
<a class='timestamp' href='#444652'><time timestamp='2015-12-16T02:33:00Z'>02:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
1) Interrupt CNB when a new block comes in...you suggest block validation times are not an issue, but, really, pools do not run with our fancy hardware or mempool limiting (hell, when talking about mempool limiting we often assumed miners have a massive mempool)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233180' id='444653'>
<a class='timestamp' href='#444653'><time timestamp='2015-12-16T02:33:00Z'>02:33</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
2) run CNB in the background on a loop...making getblocktemplate never block. Often when pools call getblocktemplate, they do it very often, and you&#x27;ll end up blocking accepting a new block for getblocktemplate to return.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233240' id='444654'>
<a class='timestamp' href='#444654'><time timestamp='2015-12-16T02:34:00Z'>02:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
3) return an empty block if the current block template we have is not based on the tip
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233240' id='444655'>
<a class='timestamp' href='#444655'><time timestamp='2015-12-16T02:34:00Z'>02:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
3 should be a trivial change, and 1 and 2 should be pretty easily-reviewable code
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233240' id='444656'>
<a class='timestamp' href='#444656'><time timestamp='2015-12-16T02:34:00Z'>02:34</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
between the 3 getblocktemplate is about as optimal as we need to care, and all of the questionable logic currently in pools to emulate this can go away
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233300' id='444657'>
<a class='timestamp' href='#444657'><time timestamp='2015-12-16T02:35:00Z'>02:35</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
3) means that the update new tip code should also briefly lock the CNB cached value and wipe it
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233360' id='444658'>
<a class='timestamp' href='#444658'><time timestamp='2015-12-16T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: which looks almost identical to your proposal, but I dont think we should only be moving TBV to a background thread
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233360' id='444659'>
<a class='timestamp' href='#444659'><time timestamp='2015-12-16T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
all of CNB should be there, getblocktemplate should never block
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233360' id='444660'>
<a class='timestamp' href='#444660'><time timestamp='2015-12-16T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
otherwise GBT needs to grab cs_main to determine whether the tip changed
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233360' id='444661'>
<a class='timestamp' href='#444661'><time timestamp='2015-12-16T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
(not a problem; just realizing this)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233360' id='444662'>
<a class='timestamp' href='#444662'><time timestamp='2015-12-16T02:36:00Z'>02:36</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
sipa: good point
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233540' id='444663'>
<a class='timestamp' href='#444663'><time timestamp='2015-12-16T02:39:00Z'>02:39</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
ok hold on catching up on scrollback
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233660' id='444664'>
<a class='timestamp' href='#444664'><time timestamp='2015-12-16T02:41:00Z'>02:41</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: ok first of all i&#x27;m not suggesting moving more logic into pool servers.  i 100% agree that bitcoind should on its own provide near optimal mining functionality
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233660' id='444665'>
<a class='timestamp' href='#444665'><time timestamp='2015-12-16T02:41:00Z'>02:41</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: note that I only realized how similar our proposals were after going back and reading what I wrote :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233660' id='444666'>
<a class='timestamp' href='#444666'><time timestamp='2015-12-16T02:41:00Z'>02:41</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
for your #1, what do you want to interrupt?  90% of CNB is TBV which is mostly ConnectBlock, which is why I asked sipa about interrupting it?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233720' id='444667'>
<a class='timestamp' href='#444667'><time timestamp='2015-12-16T02:42:00Z'>02:42</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
I&#x27;m not necessarily opposed to moving all of CNB into a separate thread, but I have two concerns with it, both minor&#x27;ish..  
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233780' id='444668'>
<a class='timestamp' href='#444668'><time timestamp='2015-12-16T02:43:00Z'>02:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
honestly I&#x27;d love to re-add the during CNB txn validity checks that were removed for 0.12, but I&#x27;ll leave that one for now...in any case, in this case ConnectBlock only touches its own datastructures, so making it return when a particular flag gets set should be doable
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233780' id='444669'>
<a class='timestamp' href='#444669'><time timestamp='2015-12-16T02:43:00Z'>02:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
annoying to shove that in ConnectBlock, but, doable
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233780' id='444670'>
<a class='timestamp' href='#444670'><time timestamp='2015-12-16T02:43:00Z'>02:43</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
we could do more fucking thread::interruption_points
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233780' id='444671'>
<a class='timestamp' href='#444671'><time timestamp='2015-12-16T02:43:00Z'>02:43</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
a) if CNB still acquires cs_main for a lot of time, then busy running it is going to block a lot of other stuff even if somehow new tips can interrupt it, and thats not useful if the mining software isn&#x27;t getting the new blocks that quickly.   you only need as many new blocks as often as they are going to switch work
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233840' id='444672'>
<a class='timestamp' href='#444672'><time timestamp='2015-12-16T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
b) when you do return work to the miner, its sort of silly to return work that is old by the period of your CNB loop instead of returning it on demand
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233840' id='444673'>
<a class='timestamp' href='#444673'><time timestamp='2015-12-16T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
hmm? I&#x27;m confused on a) are you just talking about the other non-new-block shit that locks cs_main?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233840' id='444674'>
<a class='timestamp' href='#444674'><time timestamp='2015-12-16T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233840' id='444675'>
<a class='timestamp' href='#444675'><time timestamp='2015-12-16T02:44:00Z'>02:44</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
a lot of the nodes operation does this
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233900' id='444676'>
<a class='timestamp' href='#444676'><time timestamp='2015-12-16T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
acceptToMemoryPool being among the worst offenders
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233900' id='444677'>
<a class='timestamp' href='#444677'><time timestamp='2015-12-16T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, I&#x27;m not too worried about that....mostly because the rest of that stuff is very non-latency-critical
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233900' id='444678'>
<a class='timestamp' href='#444678'><time timestamp='2015-12-16T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
accepting new blocks is
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233900' id='444679'>
<a class='timestamp' href='#444679'><time timestamp='2015-12-16T02:45:00Z'>02:45</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: as for your comment about massive mempools or fancy hardware.  CreateNewBlock speed is not related to mempool size, or only just barely.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233960' id='444680'>
<a class='timestamp' href='#444680'><time timestamp='2015-12-16T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, aside from a new block, nothing is latency-critical
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233960' id='444681'>
<a class='timestamp' href='#444681'><time timestamp='2015-12-16T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: true, I suppose that is now true...still thinking in a pre-0.12 world :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233960' id='444682'>
<a class='timestamp' href='#444682'><time timestamp='2015-12-16T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: oops, no, you misread my comment, I was suggesting accepting a new block is related to mempool size
<br>
</div>

<div class='talk op-msg' data-timestamp='1450233960' id='444683'>
<a class='timestamp' href='#444683'><time timestamp='2015-12-16T02:46:00Z'>02:46</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
which it still is, if you have a completely insanely large mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234020' id='444684'>
<a class='timestamp' href='#444684'><time timestamp='2015-12-16T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how so?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234020' id='444685'>
<a class='timestamp' href='#444685'><time timestamp='2015-12-16T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
as for adding back in the tx validity checks.   one of the reasons i was happy to take them out is it would have been just as easy to have an error in how those were applied as have an error in mempool consistency
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234020' id='444686'>
<a class='timestamp' href='#444686'><time timestamp='2015-12-16T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
that plus disk i/o and cache size, and some miners have surprisingly low cache/disk throughput
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234020' id='444687'>
<a class='timestamp' href='#444687'><time timestamp='2015-12-16T02:47:00Z'>02:47</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: in theory, sure, but we&#x27;ve never had a release where mempool was consistent (and we thought it was for many, many releases), but we&#x27;ve never found any issues in the way the txn checks were done in CNB
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234080' id='444688'>
<a class='timestamp' href='#444688'><time timestamp='2015-12-16T02:48:00Z'>02:48</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
in fact we do have an error in how they are applied already.  0.11 will just has happily build a block that fails TBV as 0.12 when a new soft fork activates
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234080' id='444689'>
<a class='timestamp' href='#444689'><time timestamp='2015-12-16T02:48:00Z'>02:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
going back to your (b) above, meh, I&#x27;d much, much rather do that than block and make miners do some kind of crazy hacky solution because of it
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234080' id='444690'>
<a class='timestamp' href='#444690'><time timestamp='2015-12-16T02:48:00Z'>02:48</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: oh? do we really? fuck :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234140' id='444691'>
<a class='timestamp' href='#444691'><time timestamp='2015-12-16T02:49:00Z'>02:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how so?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234140' id='444692'>
<a class='timestamp' href='#444692'><time timestamp='2015-12-16T02:49:00Z'>02:49</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: back to b a second.  I&#x27;m confused, what are minors doing that you are calling a crazy hacky solution
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234140' id='444693'>
<a class='timestamp' href='#444693'><time timestamp='2015-12-16T02:49:00Z'>02:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
we never accept transactions that violate a future softfork into the mempool
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234140' id='444694'>
<a class='timestamp' href='#444694'><time timestamp='2015-12-16T02:49:00Z'>02:49</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
even a non-activated one
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234200' id='444695'>
<a class='timestamp' href='#444695'><time timestamp='2015-12-16T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: one major miner who happens to have a reasonable infrastructure has one pool server (with some failover stuff) controlling their hardware....connected to about 5/10 bitcoinds on the backend
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234200' id='444696'>
<a class='timestamp' href='#444696'><time timestamp='2015-12-16T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
sipa: oh yeah sorry, i think i meant if you&#x27;re running wiht non default policy
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234200' id='444697'>
<a class='timestamp' href='#444697'><time timestamp='2015-12-16T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: you have to do that for latency of accepting a new block reasons
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234200' id='444698'>
<a class='timestamp' href='#444698'><time timestamp='2015-12-16T02:50:00Z'>02:50</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: but, really, now that I say that, it doesnt really effect what we&#x27;re talking about :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234260' id='444699'>
<a class='timestamp' href='#444699'><time timestamp='2015-12-16T02:51:00Z'>02:51</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: exactly.  once you do your number 3, then there is no more benefit to be gained beyond moving TBV out of thread
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234260' id='444700'>
<a class='timestamp' href='#444700'><time timestamp='2015-12-16T02:51:00Z'>02:51</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
in any case, my thought is really that if you block gbt, pool server implementors are going to have to build smarter software that does things like threading or calling select() instead of being able to be just as effecient as the next guy by just using blocking sockets :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234260' id='444701'>
<a class='timestamp' href='#444701'><time timestamp='2015-12-16T02:51:00Z'>02:51</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but at this point we&#x27;re talking micro optimizations.  kind of depedns on how often minors want new work, and how frequently we think running CNB is reasonable.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234320' id='444702'>
<a class='timestamp' href='#444702'><time timestamp='2015-12-16T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
you&#x27;d certainly not run CNB in a busy loop
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234320' id='444703'>
<a class='timestamp' href='#444703'><time timestamp='2015-12-16T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, we should have a discussion about how often we re-call CNB later
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234320' id='444704'>
<a class='timestamp' href='#444704'><time timestamp='2015-12-16T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
that&#x27;d interfere greatly with other cs_main lockers
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234320' id='444705'>
<a class='timestamp' href='#444705'><time timestamp='2015-12-16T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
probably something related to how many new txn you have in mempool or so
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234320' id='444706'>
<a class='timestamp' href='#444706'><time timestamp='2015-12-16T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but...first lets get the easy stuff in
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234320' id='444707'>
<a class='timestamp' href='#444707'><time timestamp='2015-12-16T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: thats already how it works
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234320' id='444708'>
<a class='timestamp' href='#444708'><time timestamp='2015-12-16T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i thought it currently has a timeout?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234320' id='444709'>
<a class='timestamp' href='#444709'><time timestamp='2015-12-16T02:52:00Z'>02:52</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
meh, i havent looked at that code in too long, i guess
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234380' id='444710'>
<a class='timestamp' href='#444710'><time timestamp='2015-12-16T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: yeah maybe it waits the timeout, and then also requires that the # of txs changed
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234380' id='444711'>
<a class='timestamp' href='#444711'><time timestamp='2015-12-16T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but the point is it already has logic like that, tweakign the logic is easy
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234380' id='444712'>
<a class='timestamp' href='#444712'><time timestamp='2015-12-16T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
in any case, my thought is really that it is easier to write a pool if calls to gbt never take longer than an ms or two than if they sometimes block
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234380' id='444713'>
<a class='timestamp' href='#444713'><time timestamp='2015-12-16T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but anyway, sounds liek we agree on what we&#x27;re trying to accomplish
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234380' id='444714'>
<a class='timestamp' href='#444714'><time timestamp='2015-12-16T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
really my goal is to make a braindead pool software just as fast as a really smart and overengineered one
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234380' id='444715'>
<a class='timestamp' href='#444715'><time timestamp='2015-12-16T02:53:00Z'>02:53</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
BlueMatt: ok, well if there is a difference between blocking for 10ms and blocking for 100ms then i agree with you
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234440' id='444716'>
<a class='timestamp' href='#444716'><time timestamp='2015-12-16T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
you could assemble the JSON response ahead of time too
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234440' id='444717'>
<a class='timestamp' href='#444717'><time timestamp='2015-12-16T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I mean fuck if I know, but if I&#x27;m writing something really braindead, if it blocks for 100ms I have to actually think about what to do, but if its 10 or 1, then I can just do whatever I think of first
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234440' id='444718'>
<a class='timestamp' href='#444718'><time timestamp='2015-12-16T02:54:00Z'>02:54</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
heh, could do that, too
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234500' id='444719'>
<a class='timestamp' href='#444719'><time timestamp='2015-12-16T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
but we should figure out how to interrupt connectblock
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234500' id='444720'>
<a class='timestamp' href='#444720'><time timestamp='2015-12-16T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
yea, that sounds painful
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234500' id='444721'>
<a class='timestamp' href='#444721'><time timestamp='2015-12-16T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
how about we ship Varnish along with bitcoind to cache the GBT results <b>*ducks*</b>
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234500' id='444722'>
<a class='timestamp' href='#444722'><time timestamp='2015-12-16T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
also, we should have connetblock be able to give up its cs_main after connecting inputs and before validating sigs
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234500' id='444723'>
<a class='timestamp' href='#444723'><time timestamp='2015-12-16T02:55:00Z'>02:55</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
but we can since jamesob was asking for simple tasks, I was trying to avoid scope creep at all costs
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234560' id='444724'>
<a class='timestamp' href='#444724'><time timestamp='2015-12-16T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: yea, that
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234560' id='444725'>
<a class='timestamp' href='#444725'><time timestamp='2015-12-16T02:56:00Z'>02:56</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
    morcos: yea, that
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234680' id='444726'>
<a class='timestamp' href='#444726'><time timestamp='2015-12-16T02:58:00Z'>02:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
hmm... so for the simple first version
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234680' id='444727'>
<a class='timestamp' href='#444727'><time timestamp='2015-12-16T02:58:00Z'>02:58</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
1) empty block template, all agree on that
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234800' id='444728'>
<a class='timestamp' href='#444728'><time timestamp='2015-12-16T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
2) need to not wait on TBV at least.   if we move all of CNB into its own thread...  does it just run on a schedule continuously.   is that close enough to ok...  i guess maybe so..
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234800' id='444729'>
<a class='timestamp' href='#444729'><time timestamp='2015-12-16T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
morcos: we used to be able to skip cs_main for the ConnectBlock call at the end to validate because we had a CCoinsViewCache that was filled with txn previns when we ran through and did the validation on each txn
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234800' id='444730'>
<a class='timestamp' href='#444730'><time timestamp='2015-12-16T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
now we cant so easily :(
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234800' id='444731'>
<a class='timestamp' href='#444731'><time timestamp='2015-12-16T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
(because ConnectBlock&#x27;s calls to the CCoinsViewCache fall through to pcoinsViewTip since the cache is empty when we start checking validity)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234800' id='444732'>
<a class='timestamp' href='#444732'><time timestamp='2015-12-16T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
oh, nvm
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234800' id='444733'>
<a class='timestamp' href='#444733'><time timestamp='2015-12-16T03:00:00Z'>03:00</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
one thing i don&#x27;t like the idea of is waiting say 10 seconds to give a second template with actual txs in it after a new tip
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234860' id='444734'>
<a class='timestamp' href='#444734'><time timestamp='2015-12-16T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
if you have that information at T+10ms, it seems crazy to spend 10secs or 30 or 60 building empty blocks
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234860' id='444735'>
<a class='timestamp' href='#444735'><time timestamp='2015-12-16T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
&lt;BlueMatt&gt; oh, nvm &lt;-- nope, my previous statements was correct, ignore this comment
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234860' id='444736'>
<a class='timestamp' href='#444736'><time timestamp='2015-12-16T03:01:00Z'>03:01</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
we have to make sure we get that switchover right
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234920' id='444737'>
<a class='timestamp' href='#444737'><time timestamp='2015-12-16T03:02:00Z'>03:02</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yeah i guess this is where i don&#x27;t understand what pool server software should look like
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234980' id='444738'>
<a class='timestamp' href='#444738'><time timestamp='2015-12-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
the longpoll idea makes sense to me... b/c bitcoind tells you when hey, here is new info you need
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234980' id='444739'>
<a class='timestamp' href='#444739'><time timestamp='2015-12-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
agreed
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234980' id='444740'>
<a class='timestamp' href='#444740'><time timestamp='2015-12-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
vs you having to know when to ask
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234980' id='444741'>
<a class='timestamp' href='#444741'><time timestamp='2015-12-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
so its by definition blocking for a while
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234980' id='444742'>
<a class='timestamp' href='#444742'><time timestamp='2015-12-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
I dont think most pool servers use longpolling, because it is often slower or something
<br>
</div>

<div class='talk op-msg' data-timestamp='1450234980' id='444743'>
<a class='timestamp' href='#444743'><time timestamp='2015-12-16T03:03:00Z'>03:03</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
i dont know why, havent looked into it
<br>
</div>

<div class='talk op-msg' data-timestamp='1450235040' id='444744'>
<a class='timestamp' href='#444744'><time timestamp='2015-12-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
well thats the question we need to answer
<br>
</div>

<div class='talk op-msg' data-timestamp='1450235040' id='444745'>
<a class='timestamp' href='#444745'><time timestamp='2015-12-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
as for the switchover, another option is just to tickle the background thread when we realize the block is now out of date
<br>
</div>

<div class='talk op-msg' data-timestamp='1450235040' id='444746'>
<a class='timestamp' href='#444746'><time timestamp='2015-12-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
lose an extra ms on switching time, but thats fine
<br>
</div>

<div class='talk op-msg' data-timestamp='1450235040' id='444747'>
<a class='timestamp' href='#444747'><time timestamp='2015-12-16T03:04:00Z'>03:04</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
b/c it seems simpler to me to write braind dead pool software that long polls than pool software that has to figure out itself when it should ask bitcoind for info
<br>
</div>

<div class='talk op-msg' data-timestamp='1450235100' id='444748'>
<a class='timestamp' href='#444748'><time timestamp='2015-12-16T03:05:00Z'>03:05</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
yes but how does the pool know to ask again
<br>
</div>

<div class='talk op-msg' data-timestamp='1450235100' id='444749'>
<a class='timestamp' href='#444749'><time timestamp='2015-12-16T03:05:00Z'>03:05</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
is it literally going to busy call gbt and check if it changed?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450235100' id='444750'>
<a class='timestamp' href='#444750'><time timestamp='2015-12-16T03:05:00Z'>03:05</time></a>
&lt;<span class='nick nick-4'> BlueMatt</span>&gt;
some software does this, yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1450239540' id='444751'>
<a class='timestamp' href='#444751'><time timestamp='2015-12-16T04:19:00Z'>04:19</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
morcos: I dont think jamesob saw your messages, says he quit before you replied.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450239660' id='444752'>
<a class='timestamp' href='#444752'><time timestamp='2015-12-16T04:21:00Z'>04:21</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
btcdrak: sorry, i got distracted turning my htlc code into something closer to a working demo; should be up on github today or tomorrow
<br>
</div>

<div class='talk op-msg' data-timestamp='1450239660' id='444753'>
<a class='timestamp' href='#444753'><time timestamp='2015-12-16T04:21:00Z'>04:21</time></a>
&lt;<span class='nick nick-6'> btcdrak</span>&gt;
aj: thanks!
<br>
</div>

<div class='talk op-msg' data-timestamp='1450242840' id='444754'>
<a class='timestamp' href='#444754'><time timestamp='2015-12-16T05:14:00Z'>05:14</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: meh, may need to find another font still :x
<br>
</div>

<div class='talk op-msg' data-timestamp='1450242960' id='444755'>
<a class='timestamp' href='#444755'><time timestamp='2015-12-16T05:16:00Z'>05:16</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: reason for generating a custom DS_Store, is that it needs the volume name in it
<br>
</div>

<div class='talk op-msg' data-timestamp='1450247040' id='444756'>
<a class='timestamp' href='#444756'><time timestamp='2015-12-16T06:24:00Z'>06:24</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
fwiw, gentoo testing (not stable) just got GCC 5.3.0
<br>
</div>

<div class='talk op-msg' data-timestamp='1450248600' id='444757'>
<a class='timestamp' href='#444757'><time timestamp='2015-12-16T06:50:00Z'>06:50</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
found a half-decent public domain font we can use
<br>
</div>

<div class='talk op-msg' data-timestamp='1450255860' id='444758'>
<a class='timestamp' href='#444758'><time timestamp='2015-12-16T08:51:00Z'>08:51</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: can you minimally modify the generated DS_Store to work, and post me the working file?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450255920' id='444759'>
<a class='timestamp' href='#444759'><time timestamp='2015-12-16T08:52:00Z'>08:52</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: (not on your broken SSL server..)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450266780' id='444760'>
<a class='timestamp' href='#444760'><time timestamp='2015-12-16T11:53:00Z'>11:53</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
hm, maybe I found a trivial bug in RBF logic.. it seems to be checking the replacement pays more fees than the replaced <b>*plus*</b> what would be required of the replacement on its own
<br>
</div>

<div class='talk op-msg' data-timestamp='1450266780' id='444761'>
<a class='timestamp' href='#444761'><time timestamp='2015-12-16T11:53:00Z'>11:53</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
rather than what would be required for both..
<br>
</div>

<div class='talk op-msg' data-timestamp='1450266900' id='444762'>
<a class='timestamp' href='#444762'><time timestamp='2015-12-16T11:55:00Z'>11:55</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
so if the replaced transaction had 1 BTC in fees, the replacment must have 1 BTC + relayMinimums(replacement), when it might be argued that it ought be relayMinimums(replaced) + relayMinimums(replacement)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450266900' id='444763'>
<a class='timestamp' href='#444763'><time timestamp='2015-12-16T11:55:00Z'>11:55</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
thoughts?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450266900' id='444764'>
<a class='timestamp' href='#444764'><time timestamp='2015-12-16T11:55:00Z'>11:55</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
Luke-Jr: the 1BTC already includes relayMinimums(replaced) though?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450266960' id='444765'>
<a class='timestamp' href='#444765'><time timestamp='2015-12-16T11:56:00Z'>11:56</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
But relayMinimums(replaced) + relayMinimums(replacement) can be smaller than 1 BTC
<br>
</div>

<div class='talk op-msg' data-timestamp='1450266960' id='444766'>
<a class='timestamp' href='#444766'><time timestamp='2015-12-16T11:56:00Z'>11:56</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
^
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267020' id='444767'>
<a class='timestamp' href='#444767'><time timestamp='2015-12-16T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
so what we really would want is fee(replacement) &gt; max(relayMinimums(replaced)+relayMinimums(replacement), fee(replaced))
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267020' id='444768'>
<a class='timestamp' href='#444768'><time timestamp='2015-12-16T11:57:00Z'>11:57</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
yeah, i thought that was to make RBF deliberately &quot;expensive&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267080' id='444769'>
<a class='timestamp' href='#444769'><time timestamp='2015-12-16T11:58:00Z'>11:58</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
I don&#x27;t follow..
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267200' id='444770'>
<a class='timestamp' href='#444770'><time timestamp='2015-12-16T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
unless you mean logic-less inflation of RBF costs
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267200' id='444771'>
<a class='timestamp' href='#444771'><time timestamp='2015-12-16T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
i&#x27;ve seen gmaxwell (iirc) explain it on reddit as RBF having to pay for the cost of replacing both transactions
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267200' id='444772'>
<a class='timestamp' href='#444772'><time timestamp='2015-12-16T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
i didn&#x27;t follow why that was a good thing though
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267200' id='444773'>
<a class='timestamp' href='#444773'><time timestamp='2015-12-16T12:00:00Z'>12:00</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
oh
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267260' id='444774'>
<a class='timestamp' href='#444774'><time timestamp='2015-12-16T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
if we use rM(repl&#x27;d)+rM(repl), we get a DoS attack because they could both be exactly 1 BTC and replace each other
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267260' id='444775'>
<a class='timestamp' href='#444775'><time timestamp='2015-12-16T12:01:00Z'>12:01</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
we&#x27;d need a +1
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267320' id='444776'>
<a class='timestamp' href='#444776'><time timestamp='2015-12-16T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
It&#x27;s max(relayMinimums(replaced)+relayMinimums(replacement), fee(replaced) + relayMinimums(replacement))
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267320' id='444777'>
<a class='timestamp' href='#444777'><time timestamp='2015-12-16T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
which is the same as 1 BTC + relayMinimums(replacement)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267320' id='444778'>
<a class='timestamp' href='#444778'><time timestamp='2015-12-16T12:02:00Z'>12:02</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
and you already explained why
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267380' id='444779'>
<a class='timestamp' href='#444779'><time timestamp='2015-12-16T12:03:00Z'>12:03</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
I guess max doesn&#x27;t do what I mean
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267380' id='444780'>
<a class='timestamp' href='#444780'><time timestamp='2015-12-16T12:03:00Z'>12:03</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
wait, yes it does
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267380' id='444781'>
<a class='timestamp' href='#444781'><time timestamp='2015-12-16T12:03:00Z'>12:03</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
MarcoFalke: it should be max(relayMinimums(replaced)+relayMinimums(replacement), fee(replaced) + 1), no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267440' id='444782'>
<a class='timestamp' href='#444782'><time timestamp='2015-12-16T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
what unit is &quot;1&quot;
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267440' id='444783'>
<a class='timestamp' href='#444783'><time timestamp='2015-12-16T12:04:00Z'>12:04</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
satoshis?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267500' id='444784'>
<a class='timestamp' href='#444784'><time timestamp='2015-12-16T12:05:00Z'>12:05</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
sure
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267500' id='444785'>
<a class='timestamp' href='#444785'><time timestamp='2015-12-16T12:05:00Z'>12:05</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
it just needs to be &gt; to prevent recursion
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267560' id='444786'>
<a class='timestamp' href='#444786'><time timestamp='2015-12-16T12:06:00Z'>12:06</time></a>
&lt;<span class='nick nick-1'> GitHub32</span>&gt;
[bitcoin] MarcoFalke opened pull request #7218: [qt] Fix misleading translation (master...MarcoFalke-2015-trivial7) <a href="https://github.com/bitcoin/bitcoin/pull/7218" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7218</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267620' id='444787'>
<a class='timestamp' href='#444787'><time timestamp='2015-12-16T12:07:00Z'>12:07</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Then you can just spend 1 satoshi to transmit whatever your tx size is to the whole network. Sounds like DOS?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267620' id='444788'>
<a class='timestamp' href='#444788'><time timestamp='2015-12-16T12:07:00Z'>12:07</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
MarcoFalke: only if you already paid more than enough in fees
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267680' id='444789'>
<a class='timestamp' href='#444789'><time timestamp='2015-12-16T12:08:00Z'>12:08</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
ie, if you overpaid on your initial tx already, you can pay only 1 sat. more for replacement
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267740' id='444790'>
<a class='timestamp' href='#444790'><time timestamp='2015-12-16T12:09:00Z'>12:09</time></a>
&lt;<span class='nick nick-3'> aj</span>&gt;
Luke-Jr: 2*relayMinimum could still be well below what&#x27;s being accepted into blocks though?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450267800' id='444791'>
<a class='timestamp' href='#444791'><time timestamp='2015-12-16T12:10:00Z'>12:10</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
aj: I don&#x27;t see relevance.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450268100' id='444792'>
<a class='timestamp' href='#444792'><time timestamp='2015-12-16T12:15:00Z'>12:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: IIRC, the .DS_Store does link to the filename,.. so, if the filename (App Name) is dynamic, the DS_Store files need also. So you need a script that can generate/modify a DS_Store file.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450268160' id='444793'>
<a class='timestamp' href='#444793'><time timestamp='2015-12-16T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: yes, but I am lost for what the problem is, so analysing a fixed file would possibly help
<br>
</div>

<div class='talk op-msg' data-timestamp='1450268160' id='444794'>
<a class='timestamp' href='#444794'><time timestamp='2015-12-16T12:16:00Z'>12:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: SSL. I testes the Site with Ubuntu 12.04 and 15.04 as well as with a recent Fedora version. I guess the COMODO SSL CA is probably not supported by your OS?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450268220' id='444795'>
<a class='timestamp' href='#444795'><time timestamp='2015-12-16T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: it&#x27;s not a cert error
<br>
</div>

<div class='talk op-msg' data-timestamp='1450268220' id='444796'>
<a class='timestamp' href='#444796'><time timestamp='2015-12-16T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: Okay. Right. Makes sense. Will try to create a correct DS_Store
<br>
</div>

<div class='talk op-msg' data-timestamp='1450268220' id='444797'>
<a class='timestamp' href='#444797'><time timestamp='2015-12-16T12:17:00Z'>12:17</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Does your browser/os enforce SSLv2 or v3?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450268280' id='444798'>
<a class='timestamp' href='#444798'><time timestamp='2015-12-16T12:18:00Z'>12:18</time></a>
&lt;<span class='nick nick-15'> GitHub128</span>&gt;
[bitcoin] luke-jr opened pull request #7219: Make RBF policies optional (master...rbf_opts) <a href="https://github.com/bitcoin/bitcoin/pull/7219" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7219</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1450268340' id='444799'>
<a class='timestamp' href='#444799'><time timestamp='2015-12-16T12:19:00Z'>12:19</time></a>
&lt;<span class='nick nick-1'> GitHub143</span>&gt;
[bitcoin] luke-jr opened pull request #7220: RBF: Allow replacements to pay for minRelayFee(replaced)+minRelayFee(replacement) rather than actualFee(replaced)+minRelayFee(replacement) (master...rbf_feecomp) <a href="https://github.com/bitcoin/bitcoin/pull/7220" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7220</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1450268400' id='444800'>
<a class='timestamp' href='#444800'><time timestamp='2015-12-16T12:20:00Z'>12:20</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: probably?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450268820' id='444801'>
<a class='timestamp' href='#444801'><time timestamp='2015-12-16T12:27:00Z'>12:27</time></a>
&lt;<span class='nick nick-4'> * Luke-Jr</span>&gt;
ponders if wget would work
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269060' id='444802'>
<a class='timestamp' href='#444802'><time timestamp='2015-12-16T12:31:00Z'>12:31</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: give it a try with `curl -v` (and maybe a `curl -v --insecure`..
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269180' id='444803'>
<a class='timestamp' href='#444803'><time timestamp='2015-12-16T12:33:00Z'>12:33</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
hm, got a link handy?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269180' id='444804'>
<a class='timestamp' href='#444804'><time timestamp='2015-12-16T12:33:00Z'>12:33</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
for some reason I am having trouble finding one in my log
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269240' id='444805'>
<a class='timestamp' href='#444805'><time timestamp='2015-12-16T12:34:00Z'>12:34</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
found it <a href="https://bitcoin.jonasschnelli.ch" class="link" target="_blank">https://bitcoin.jonasschnelli.ch</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269240' id='444806'>
<a class='timestamp' href='#444806'><time timestamp='2015-12-16T12:34:00Z'>12:34</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
nope, curl and wget hate it too
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269240' id='444807'>
<a class='timestamp' href='#444807'><time timestamp='2015-12-16T12:34:00Z'>12:34</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
argh. Some system wide problem... 
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269300' id='444808'>
<a class='timestamp' href='#444808'><time timestamp='2015-12-16T12:35:00Z'>12:35</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
I don&#x27;t think curl does SSL at all, just TLS
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269300' id='444809'>
<a class='timestamp' href='#444809'><time timestamp='2015-12-16T12:35:00Z'>12:35</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
ooh
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269300' id='444810'>
<a class='timestamp' href='#444810'><time timestamp='2015-12-16T12:35:00Z'>12:35</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: IPv6!
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269360' id='444811'>
<a class='timestamp' href='#444811'><time timestamp='2015-12-16T12:36:00Z'>12:36</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
you&#x27;re only broken on IPv6, not IPv4
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269360' id='444812'>
<a class='timestamp' href='#444812'><time timestamp='2015-12-16T12:36:00Z'>12:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: hmm.. how could 
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269360' id='444813'>
<a class='timestamp' href='#444813'><time timestamp='2015-12-16T12:36:00Z'>12:36</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
is the IPv6 address correct? ;)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269360' id='444814'>
<a class='timestamp' href='#444814'><time timestamp='2015-12-16T12:36:00Z'>12:36</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
in DNS
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269360' id='444815'>
<a class='timestamp' href='#444815'><time timestamp='2015-12-16T12:36:00Z'>12:36</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
buh... no idea... need to check. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269420' id='444816'>
<a class='timestamp' href='#444816'><time timestamp='2015-12-16T12:37:00Z'>12:37</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
if not, I&#x27;m hitting some random other server :P
<br>
</div>

<div class='talk op-msg' data-timestamp='1450269420' id='444817'>
<a class='timestamp' href='#444817'><time timestamp='2015-12-16T12:37:00Z'>12:37</time></a>
&lt;<span class='nick nick-12'> * jonasschnelli</span>&gt;
is reading some IPv6 guides...
<br>
</div>

<div class='talk op-msg' data-timestamp='1450270080' id='444818'>
<a class='timestamp' href='#444818'><time timestamp='2015-12-16T12:48:00Z'>12:48</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: hmm... IPv6 seems to be set up coorect. dig AAAA bitcoin.jonasschnelli.ch gives me the right answer, .. i can ping6 from another machine (in the same lan although).
<br>
</div>

<div class='talk op-msg' data-timestamp='1450270140' id='444819'>
<a class='timestamp' href='#444819'><time timestamp='2015-12-16T12:49:00Z'>12:49</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
I can ping it, just TLS fails
<br>
</div>

<div class='talk op-msg' data-timestamp='1450270500' id='444820'>
<a class='timestamp' href='#444820'><time timestamp='2015-12-16T12:55:00Z'>12:55</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
ah... found the issue. Missing apache ipv6 config.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450270560' id='444821'>
<a class='timestamp' href='#444821'><time timestamp='2015-12-16T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
XD
<br>
</div>

<div class='talk op-msg' data-timestamp='1450270560' id='444822'>
<a class='timestamp' href='#444822'><time timestamp='2015-12-16T12:56:00Z'>12:56</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
works now
<br>
</div>

<div class='talk op-msg' data-timestamp='1450270620' id='444823'>
<a class='timestamp' href='#444823'><time timestamp='2015-12-16T12:57:00Z'>12:57</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: works? Perfect!
<br>
</div>

<div class='talk op-msg' data-timestamp='1450271520' id='444824'>
<a class='timestamp' href='#444824'><time timestamp='2015-12-16T13:12:00Z'>13:12</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
jonasschnelli: Our scheme looks more (not everywhere) after full length parameters/commands (we use createrawtransaction instead of createrawtx, etc.). &lt;-- more what? O.o
<br>
</div>

<div class='talk op-msg' data-timestamp='1450271580' id='444825'>
<a class='timestamp' href='#444825'><time timestamp='2015-12-16T13:13:00Z'>13:13</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Luke-Jr: things like &#x27;-limitfreerelay&#x27;, or -stopafterblockimport or -permitbaremultisig
<br>
</div>

<div class='talk op-msg' data-timestamp='1450271640' id='444826'>
<a class='timestamp' href='#444826'><time timestamp='2015-12-16T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
But right, there are also things like: acceptnonstdtxn
<br>
</div>

<div class='talk op-msg' data-timestamp='1450271640' id='444827'>
<a class='timestamp' href='#444827'><time timestamp='2015-12-16T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
more examples don&#x27;t help; the sentence is missing an adjective :p
<br>
</div>

<div class='talk op-msg' data-timestamp='1450271640' id='444828'>
<a class='timestamp' href='#444828'><time timestamp='2015-12-16T13:14:00Z'>13:14</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
but replacebyfee is relatively short.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450271700' id='444829'>
<a class='timestamp' href='#444829'><time timestamp='2015-12-16T13:15:00Z'>13:15</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
&quot;Our scheme looks more after full length â€¦ &quot; doesn&#x27;t parse &lt;.&lt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1450271700' id='444830'>
<a class='timestamp' href='#444830'><time timestamp='2015-12-16T13:15:00Z'>13:15</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
Don&#x27;t judge my english..,.  (or i gonna judge your german). But I know, my english lacks here and there. :)
<br>
</div>

<div class='talk op-msg' data-timestamp='1450271700' id='444831'>
<a class='timestamp' href='#444831'><time timestamp='2015-12-16T13:15:00Z'>13:15</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
ok, but I don&#x27;t know what it means :&lt;
<br>
</div>

<div class='talk op-msg' data-timestamp='1450271760' id='444832'>
<a class='timestamp' href='#444832'><time timestamp='2015-12-16T13:16:00Z'>13:16</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
I was trying to say, our command line arguments and rpc commands are mostly &quot;full names&quot; instead of abbreviations.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450271880' id='444833'>
<a class='timestamp' href='#444833'><time timestamp='2015-12-16T13:18:00Z'>13:18</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
ah
<br>
</div>

<div class='talk op-msg' data-timestamp='1450272780' id='444834'>
<a class='timestamp' href='#444834'><time timestamp='2015-12-16T13:33:00Z'>13:33</time></a>
&lt;<span class='nick nick-6'> GitHub62</span>&gt;
[bitcoin] parazyd opened pull request #7221: Merge pull request #1 from bitcoin/master (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/7221" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7221</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1450272840' id='444835'>
<a class='timestamp' href='#444835'><time timestamp='2015-12-16T13:34:00Z'>13:34</time></a>
&lt;<span class='nick nick-16'> GitHub110</span>&gt;
[bitcoin] parazyd closed pull request #7221: Merge pull request #1 from bitcoin/master (master...master) <a href="https://github.com/bitcoin/bitcoin/pull/7221" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7221</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1450275960' id='444836'>
<a class='timestamp' href='#444836'><time timestamp='2015-12-16T14:26:00Z'>14:26</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
&gt; Luke-Jr
<br>
</div>

<div class='talk op-msg' data-timestamp='1450275960' id='444837'>
<a class='timestamp' href='#444837'><time timestamp='2015-12-16T14:26:00Z'>14:26</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
MarcoFalke: only if you already paid more than enough in fees
<br>
</div>

<div class='talk op-msg' data-timestamp='1450275960' id='444838'>
<a class='timestamp' href='#444838'><time timestamp='2015-12-16T14:26:00Z'>14:26</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
For one transaction, that is.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450275960' id='444839'>
<a class='timestamp' href='#444839'><time timestamp='2015-12-16T14:26:00Z'>14:26</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
But the network has to process every rbf tx
<br>
</div>

<div class='talk op-msg' data-timestamp='1450276020' id='444840'>
<a class='timestamp' href='#444840'><time timestamp='2015-12-16T14:27:00Z'>14:27</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
Just think about the &quot;strss-test&quot; in August
<br>
</div>

<div class='talk op-msg' data-timestamp='1450276020' id='444841'>
<a class='timestamp' href='#444841'><time timestamp='2015-12-16T14:27:00Z'>14:27</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
rbf with your logic would make it a lot cheaper
<br>
</div>

<div class='talk op-msg' data-timestamp='1450276680' id='444842'>
<a class='timestamp' href='#444842'><time timestamp='2015-12-16T14:38:00Z'>14:38</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
jonasschnelli, theoretically you could also change gui settings without the gui
<br>
</div>

<div class='talk op-msg' data-timestamp='1450276740' id='444843'>
<a class='timestamp' href='#444843'><time timestamp='2015-12-16T14:39:00Z'>14:39</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
MarcoFalke: how?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450276740' id='444844'>
<a class='timestamp' href='#444844'><time timestamp='2015-12-16T14:39:00Z'>14:39</time></a>
&lt;<span class='nick nick-13'> gijensen</span>&gt;
PR 7220 Is it heavy to consider all TXs that were replaced in the chain up until the first TX with an RBF flag that didn&#x27;t get replaced? That&#x27;s the only solution I see to morco&#x27;s NACK
<br>
</div>

<div class='talk op-msg' data-timestamp='1450277160' id='444845'>
<a class='timestamp' href='#444845'><time timestamp='2015-12-16T14:46:00Z'>14:46</time></a>
&lt;<span class='nick nick-7'> MarcoFalke</span>&gt;
In the registry and stuff, but &quot;GUI settings&quot; is not true as well. I will just use your suggestion.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450277220' id='444846'>
<a class='timestamp' href='#444846'><time timestamp='2015-12-16T14:47:00Z'>14:47</time></a>
&lt;<span class='nick nick-13'> jonasschnelli</span>&gt;
MarcoFalke: Hm... sure, you can change everything by accessing the right space on your OS. I still think &quot;GUI settings&quot; is the right name.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450284600' id='444847'>
<a class='timestamp' href='#444847'><time timestamp='2015-12-16T16:50:00Z'>16:50</time></a>
&lt;<span class='nick nick-13'> helo</span>&gt;
someone familiar with p2pool code may want to take a look at KipIngram&#x27;s messages in #bitcoin
<br>
</div>

<div class='talk op-msg' data-timestamp='1450290660' id='444848'>
<a class='timestamp' href='#444848'><time timestamp='2015-12-16T18:31:00Z'>18:31</time></a>
&lt;<span class='nick nick-13'> GitHub4</span>&gt;
[bitcoin] luke-jr closed pull request #7220: RBF: Allow replacements to pay for minRelayFee(replaced)+minRelayFee(replacement) rather than actualFee(replaced)+minRelayFee(replacement) (master...rbf_feecomp) <a href="https://github.com/bitcoin/bitcoin/pull/7220" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7220</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1450291020' id='444849'>
<a class='timestamp' href='#444849'><time timestamp='2015-12-16T18:37:00Z'>18:37</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
Am I allowed to store a reference to chainparams?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450291080' id='444850'>
<a class='timestamp' href='#444850'><time timestamp='2015-12-16T18:38:00Z'>18:38</time></a>
&lt;<span class='nick nick-11'> morcos</span>&gt;
In particular refactoring CreateNewBlock to be a class needs access to chainparams, can i just pass it in as a reference on construction and access it whenever after that point?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450291140' id='444851'>
<a class='timestamp' href='#444851'><time timestamp='2015-12-16T18:39:00Z'>18:39</time></a>
&lt;<span class='nick nick-13'> sipa</span>&gt;
imho yes
<br>
</div>

<div class='talk op-msg' data-timestamp='1450296360' id='444852'>
<a class='timestamp' href='#444852'><time timestamp='2015-12-16T20:06:00Z'>20:06</time></a>
&lt;<span class='nick nick-12'> GitHub68</span>&gt;
[bitcoin] sdaftuar opened pull request #7222: [WIP] RPC: Indicate which transactions are signaling opt-in RBF (master...add-optin-info) <a href="https://github.com/bitcoin/bitcoin/pull/7222" class="link" target="_blank">https://github.com/bitcoin/bitcoin/pull/7222</a>
<br>
</div>

<div class='talk op-msg' data-timestamp='1450296780' id='444853'>
<a class='timestamp' href='#444853'><time timestamp='2015-12-16T20:13:00Z'>20:13</time></a>
&lt;<span class='nick nick-13'> gijensen</span>&gt;
Luke-jr, PR 7220 for my sanity, you closed it because it doesn&#x27;t cache the minimums (so the proper min can&#x27;t be calculated)? That&#x27;s what I thought but two other people disagreed with me :S
<br>
</div>

<div class='talk op-msg' data-timestamp='1450303500' id='444854'>
<a class='timestamp' href='#444854'><time timestamp='2015-12-16T22:05:00Z'>22:05</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
gijensen: ?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450303680' id='444855'>
<a class='timestamp' href='#444855'><time timestamp='2015-12-16T22:08:00Z'>22:08</time></a>
&lt;<span class='nick nick-13'> gijensen</span>&gt;
Luke-Jr I&#x27;m just asking for clarity on the comments previous to your final one. I was trying to convey the issue is the PR as is didn&#x27;t account for all the minimum fees of past transactions. Is that correct, or no?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450303740' id='444856'>
<a class='timestamp' href='#444856'><time timestamp='2015-12-16T22:09:00Z'>22:09</time></a>
&lt;<span class='nick nick-13'> gijensen</span>&gt;
You mentioned a cache, so that made me believe I&#x27;m correct. I just want to know to be sure I properly understand what&#x27;s happening.
<br>
</div>

<div class='talk op-msg' data-timestamp='1450304220' id='444857'>
<a class='timestamp' href='#444857'><time timestamp='2015-12-16T22:17:00Z'>22:17</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
yes, if A is replaced by B, and C might replace B, we need C to pay for A+B+C, but we no longer have A
<br>
</div>

<div class='talk op-msg' data-timestamp='1450304280' id='444858'>
<a class='timestamp' href='#444858'><time timestamp='2015-12-16T22:18:00Z'>22:18</time></a>
&lt;<span class='nick nick-13'> gijensen</span>&gt;
Thank you!
<br>
</div>

<div class='talk op-msg' data-timestamp='1450304280' id='444859'>
<a class='timestamp' href='#444859'><time timestamp='2015-12-16T22:18:00Z'>22:18</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
so to fix this, we would need to store the size of A (and anything it replaced) with B
<br>
</div>

<div class='talk op-msg' data-timestamp='1450304340' id='444860'>
<a class='timestamp' href='#444860'><time timestamp='2015-12-16T22:19:00Z'>22:19</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
nTotalRelaySize or smth
<br>
</div>

<div class='talk op-msg' data-timestamp='1450304400' id='444861'>
<a class='timestamp' href='#444861'><time timestamp='2015-12-16T22:20:00Z'>22:20</time></a>
&lt;<span class='nick nick-13'> gijensen</span>&gt;
Okay, yes I understand completely. Do you still plan on trying to work on the concept? Or just axe it for now?
<br>
</div>

<div class='talk op-msg' data-timestamp='1450304580' id='444862'>
<a class='timestamp' href='#444862'><time timestamp='2015-12-16T22:23:00Z'>22:23</time></a>
&lt;<span class='nick nick-2'> Luke-Jr</span>&gt;
I think the benefits do not outweigh the costs now
<br>
</div>

<div class='talk op-msg' data-timestamp='1450304940' id='444863'>
<a class='timestamp' href='#444863'><time timestamp='2015-12-16T22:29:00Z'>22:29</time></a>
&lt;<span class='nick nick-13'> gijensen</span>&gt;
I was worried about that, okay
<br>
</div>

</div>
</section>

</body>
</html>
